// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/numberUtils",["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(n,p,q,r){var t=function(c,a){return c-a},e={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(c){var a=String(c),b=a.match(e._reNumber);c={integer:0,fractional:0};b&&b[1]?(c.integer=b[1].split("").length,c.fractional=b[3]?b[3].split("").length:0):-1<a.toLowerCase().indexOf("e")&&(b=a.split("e"),a=b[0],b=b[1],a&&b&&(a=Number(a),b=Number(b),(c=0<b)||(b=Math.abs(b)),a=e.getDigits(a),c?(a.integer+=
b,a.fractional=b>a.fractional?0:a.fractional-b):(a.fractional+=b,a.integer=b>a.integer?1:a.integer-b),c=a));return c},getFixedNumbers:function(c,a){var b=Number(c.toFixed(a));b<c?c=b+1/Math.pow(10,a):(c=b,b-=1/Math.pow(10,a));b=Number(b.toFixed(a));c=Number(c.toFixed(a));return[b,c]},getPctChange:function(c,a,b,f){var g={prev:null,next:null};if(null!=b){var d=c-b;g.prev=Math.floor(Math.abs(100*(a-b-d)/d))}null!=f&&(d=f-c,g.next=Math.floor(Math.abs(100*(f-a-d)/d)));return g},round:function(c,a){c=
c.slice(0);var b,f,g=a&&null!=a.tolerance?a.tolerance:2,d=a&&a.indexes,u=a&&null!=a.strictBounds?a.strictBounds:!1;if(d)d.sort(t);else for(d=[],b=0;b<c.length;b++)d.push(b);for(b=0;b<d.length;b++){var h=d[b];a=c[h];var v=0===h?null:c[h-1];var w=h===c.length-1?null:c[h+1];var l=e.getDigits(a);if(l=l.fractional){var m=0;for(f=!1;m<=l&&!f;){var k=e.getFixedNumbers(a,m);k=u&&0===b?k[1]:k[0];f=e.hasMinimalChange(a,k,v,w,g);m++}f&&(c[h]=k)}}return c},hasMinimalChange:function(c,a,b,f,g){c=e.getPctChange(c,
a,b,f);a=null==c.prev||c.prev<=g;b=null==c.next||c.next<=g;return a&&b||c.prev+c.next<=2*g},_reAllZeros:new RegExp("\\"+q.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(c,a){a=a||{places:20,round:-1};(c=p.format(c,a))&&(c=c.replace(e._reSomeZeros,"$1").replace(e._reAllZeros,""));return c}};n("extend-esri")&&(r.numberUtils=e);return e});