// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/urlUtils","dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(m,u,r,n,v,p,w,g,t,x){var c={},q=g.defaults.io,B=/^[a-z][a-z0-9\+\-\.]*:/i,y=/^\s*http:/i,z=/^\s*https:/i,C=/:\d+$/,D=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;c.isHTTP=function(a){var b=n.location.protocol;return null==a?"http:"===b||"https:"===b:a?"https:"===b:"http:"===b};c.getProtocolForWebResource=function(a){return c.isHTTP()?
n.location.protocol:a?"https:":"http:"};c.urlToObject=function(a){var b={},d=new r(a),e=a.indexOf("?");null===d.query?b={path:a,query:null}:(b.path=a.substring(0,e),b.query=v.queryToObject(d.query));d.fragment&&(b.hash=d.fragment,null===d.query&&(b.path=b.path.substring(0,b.path.length-(d.fragment.length+1))));return b};c.getProxyUrl=function(a,b){var d=m.isString(a)?0===m.trim(a).toLowerCase().indexOf("https:"):a,e=q.proxyUrl,f=x.io.proxyNotSet;m.isString(a)&&(a=c.getProxyRule(a))&&(e=a.proxyUrl);
if(!e)throw console.log(f),Error(f);if(d&&!1!==b&&0!==n.location.href.toLowerCase().indexOf("https:")&&(b=e,0!==b.toLowerCase().indexOf("http")&&(b=c.getAbsoluteUrl(b)),b=b.replace(/^http:/i,"https:"),c.canUseXhr(b))){e=b;var h=1}e=c.urlToObject(e);e._xo=h;return e};c.addProxy=function(a){var b=c.getProxyRule(a),d;b?d=c.urlToObject(b.proxyUrl):q.alwaysUseProxy&&(d=c.getProxyUrl());d&&(b=c.urlToObject(a),a=d.path+"?"+b.path,(d=v.objectToQuery(m.mixin(d.query||{},b.query)))&&(a+="?"+d));return a};c.addProxyRule=
function(a){var b=a.urlPrefix=c.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),d=q.proxyRules,e,f=d.length,h=f;for(e=0;e<f;e++){var l=d[e].urlPrefix;if(0===b.indexOf(l)){if(b.length===l)return-1;h=e;break}else 0===l.indexOf(b)&&(h=e+1)}d.splice(h,0,a);return h};c.getProxyRule=function(a){var b=q.proxyRules,d=b.length,e=c.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(a=0;a<d;a++)if(0===e.indexOf(b[a].urlPrefix)){var f=
b[a];break}return f};c.hasSameOrigin=function(a,b,d){a=a.toLowerCase();b=b.toLowerCase();var e=n.location.href.toLowerCase();a=0===a.indexOf("http")?new r(a):e=new r(e);b=0===b.indexOf("http")?new r(b):m.isString(e)?new r(e):e;return(d||a.scheme===b.scheme)&&a.host===b.host&&a.port===b.port};c.canUseXhr=function(a,b){var d=t("esri-phonegap")?!0:!1,e=c.hasSameOrigin,f=q.corsEnabledServers,h,l=-1;!d&&t("esri-cors")&&f&&f.length&&(d=u.some(f,function(k,A){k=!k||"object"!==typeof k||k instanceof RegExp?
k:k.host;if(k instanceof RegExp){if(k.test(a))return l=A,!0}else if(k&&(h=0!==k.trim().toLowerCase().indexOf("http"),e(a,h?"http://"+k:k)||h&&e(a,"https://"+k)))return l=A,!0;return!1}));return b?l:d};c.getAbsoluteUrl=function(a){var b=c.getProtocolForWebResource();return m.isString(a)&&!B.test(a)?0===a.indexOf("//")?b+a:0===a.indexOf("/")?b+"//"+n.location.host+a:p._appBaseUrl+a:a};c.fixUrl=function(a){a=m.trim(a);a=c.getAbsoluteUrl(a);a=c.normalizeSlashes(a);a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,
"$1www.$2");a=c.downgradeToHTTP(a);return a=c.upgradeToHTTPS(a)};c.normalize=function(a){return c.fixUrl(a)};c.normalizeSlashes=function(a){if(/^https?:\/\//i.test(a)){var b=a.indexOf("?");if(-1<b){var d=a.slice(0,b);var e=a.slice(b+1)}else d=a;a=d.replace(/\/{2,}/g,"/");a=a.replace("/","//");e&&(a+="?"+e)}return a};c.downgradeToHTTP=function(a){return c.isHTTP(!1)&&z.test(a)&&c.hasSameOrigin(n.location.href,a,!0)&&!c.canUseXhr(a)?a.replace(z,"http:"):a};c.upgradeToHTTPS=function(a){var b=q.httpsDomains,
d=c.isHTTP(!1),e=c.isHTTP(!0);if(!y.test(a))return a;a=m.trim(a);var f=a.indexOf("/",7);f=-1===f?a:a.slice(0,f);f=f.toLowerCase().slice(7);if(C.test(f))if(w.endsWith(f,":80"))f=f.slice(0,-3),a=a.replace(":80","");else return a;if(d&&f===n.location.host&&(!D.test(a)||!c.canUseXhr(a)))return a;d=!1;if(e&&f===n.location.host)d=!0;else if(b)for(var h=0;h<b.length;h++){var l=b[h];if(f===l||w.endsWith(f,"."+l)){d=!0;break}}d||!e||q.alwaysUseProxy||c.getProxyRule(a)||(d=!0);d&&(a=a.replace(y,"https:"));
return a};g=x.widgets.popup;var E=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:g.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:g.NLS_openLinkInApp},
{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:g.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:g.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:g.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,
appName:"FlowFinity",label:g.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:g.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:g.NLS_openLinkInApp}];c.getURIInfo=function(a){var b;u.some(E,function(d){d.pattern.test(a)&&(b=d);return!!b});return b};c.isKnownURI=function(a){return!!c.getURIInfo(a)};t("extend-esri")&&(m.mixin(p,c),p._getProxyUrl=c.getProxyUrl,p._getProxiedUrl=c.addProxy,p._hasSameOrigin=c.hasSameOrigin,
p._canDoXOXHR=c.canUseXhr,p._getAbsoluteUrl=c.getAbsoluteUrl,p.fixUrl=c.fixUrl);return c});