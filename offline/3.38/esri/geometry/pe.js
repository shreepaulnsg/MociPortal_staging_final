// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/geometry/pe",["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(w,a,C,D,E){function x(c){function d(b,e,k){b[e]=k(b[e])}a._pe=c;n.init();y.init();z.init();A.init();B.init();a.PeGCSExtent=function(b){function e(){return null!==b&&b.apply(this,arguments)||this}C(e,b);e.prototype.destroy=function(){a._pe.destroy(this)};return e}(a._pe.PeGCSExtent);for(var h=0,f=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,
a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];h<f.length;h++)c=f[h],d(c.prototype,"getName",function(b){return function(){return b.call(this,Array(n.PE_NAME_MAX))}});h=0;for(f=[a._pe.PeGeogtran,a._pe.PeProjcs];h<f.length;h++)c=f[h],d(c.prototype,"getParameters",function(b){return function(){for(var e=Array(n.PE_PARM_MAX),k=b.call(this),l=0;l<e.length;l++){var m=a._pe.getValue(k,"*");e[l]=m?a._pe.wrapPointer(m,a._pe.PeParameter):null;k+=Int32Array.BYTES_PER_ELEMENT}return e}});d(a._pe.PeHorizon.prototype,
"getCoord",function(b){return function(){var e=this.getSize();if(!e)return null;var k=[],l=b.call(this);r(k,e,l);return k}});d(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var e=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var k=null,l=b.call(this);if(!a._pe.compare(l,a._pe.NULL)){k=[l];var m=this.getSteps();if(1<m){l=a._pe.getPointer(l);for(var p=1;p<m;p++)k.push(a._pe.wrapPointer(l+e*p,a._pe.PeGTlistExtendedGTs))}}return k}});var g=a._pe._pe_getPeHorizonSize();c=function(b){return function(){var e=
this._cache;e||(this._cache=e=new Map);if(e.has(b))return e.get(b);var k=null,l=b.call(this);if(!a._pe.compare(l,a._pe.NULL)){k=[l];var m=l.getNump();if(1<m){l=a._pe.getPointer(l);for(var p=1;p<m;p++)k.push(a._pe.wrapPointer(l+g*p,a._pe.PeHorizon))}}e.set(b,k);return k}};d(a._pe.PeProjcs.prototype,"horizonGcsGenerate",c);d(a._pe.PeProjcs.prototype,"horizonPcsGenerate",c);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=n.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var e=a._pe.getPointer(this),
k=a._pe.ensureInt8(Array(n.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(e,b,k))}}function q(c){if(c){var d=a._pe.getClass(c);d&&(d=a._pe.getCache(d))&&(c=a._pe.getPointer(c))&&delete d[c]}}function v(c,d){var h=[];d=Array(d);for(var f=0;f<c;f++)h.push(a._pe.ensureInt8(d));return h}function t(c){if(Array.isArray(c[0])){var d=[];c.forEach(function(h){d.push(h[0],h[1])})}else d=c;return d}function r(c,d,h,f){void 0===f&&(f=!1);if(f)for(f=0;f<2*d;f++)c[f]=a._pe.getValue(h+
f*Float64Array.BYTES_PER_ELEMENT,"double");else{var g=0===c.length;for(f=0;f<d;f++)g&&(c[f]=Array(2)),c[f][0]=a._pe.getValue(h,"double"),c[f][1]=a._pe.getValue(h+Float64Array.BYTES_PER_ELEMENT,"double"),h+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var u;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!E("esri-wasm")};a.load=function(){if(u)return u.promise;u=new D;w(["./support/pe-wasm"],function(c){c({locateFile:function(d){return w.toUrl("./support/"+
d)},onAbort:function(d){u.reject(Error(d))}}).then(function(d){x(d);u.resolve()})});return u.promise};(function(c){function d(g,b,e){a._pe.ensureCache.prepare();var k=t(e),l=e===k;k=a._pe.ensureFloat64(k);(g=a._pe._pe_geog_to_proj(a._pe.getPointer(g),b,k))&&r(e,b,k,l);return g}function h(g,b,e){return f(g,b,e,0)}function f(g,b,e,k){a._pe.ensureCache.prepare();var l=t(e),m=e===l;l=a._pe.ensureFloat64(l);(g=a._pe._pe_proj_to_geog_center(a._pe.getPointer(g),b,l,k))&&r(e,b,l,m);return g}c.geogToProj=
d;c.projGeog=function(g,b,e,k){switch(k){case n.PE_TRANSFORM_P_TO_G:return h(g,b,e);case n.PE_TRANSFORM_G_TO_P:return d(g,b,e)}return 0};c.projToGeog=h;c.projToGeogCenter=f})(a.PeCSTransformations||(a.PeCSTransformations={}));var n;(function(c){c.init=function(){c.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;
c.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;
c.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
c.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(n=a.PeDefs||(a.PeDefs={}));(function(c){function d(b,e){var k=null,l=f[b];l||(l={},f[b]=l);l.hasOwnProperty(String(e))?k=l[e]:(b=a._pe.PeFactory.prototype.factoryByType(b,e),a._pe.compare(b,a._pe.NULL)||
(k=b,l[e]=k));return k=h(k)}function h(b){if(b){var e=b.getType();switch(e){case n.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case n.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case n.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:e&n.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var f={},g={};c.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(b){return d(n.PE_TYPE_COORDSYS,b)};c.factoryByType=
d;c.fromString=function(b,e){var k=null,l=g[b];l||(l={},g[b]=l);l.hasOwnProperty(e)?k=l[e]:(b=a._pe.PeFactory.prototype.fromString(b,e),a._pe.compare(b,a._pe.NULL)||(k=b,l[e]=k));return k=h(k)};c.geogcs=function(b){return d(n.PE_TYPE_GEOGCS,b)};c.geogtran=function(b){return d(n.PE_TYPE_GEOGTRAN,b)};c.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};c.projcs=function(b){return d(n.PE_TYPE_PROJCS,b)};c.unit=function(b){return d(n.PE_TYPE_UNIT,b)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=
null;var y;(function(c){var d;c.init=function(){c.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=a._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(h,f,g,b,e,k){var l=null,m=new a._pe.PeInteger(k);try{var p=a._pe.PeGTlistExtended.prototype.getGTlist(h,f,g,b,e,m);if(k=m.val)if(l=[p],1<k){var F=a._pe.getPointer(p);for(h=1;h<k;h++)l.push(a._pe.wrapPointer(F+d*h,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(m)}return l}})(y=a.PeGTlistExtended||(a.PeGTlistExtended=
{}));(function(c){c.destroy=function(d){if(d&&d.length){for(var h=0;h<d.length;h++){var f=d[h];q(f);f.getEntries().forEach(function(g){q(g);g=g.getGeogtran();q(g);g.getParameters().forEach(q);[g.getGeogcs1(),g.getGeogcs2()].forEach(function(b){q(b);var e=b.getDatum();q(e);q(e.getSpheroid());q(b.getPrimem());q(b.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(d[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(c){c.geogToGeog=function(d,h,f,g,b){a._pe.ensureCache.prepare();
var e=t(f),k=f===e;e=a._pe.ensureFloat64(e);var l=0;g&&(l=a._pe.ensureFloat64(g));(d=a._pe._pe_geog_to_geog(a._pe.getPointer(d),h,e,l,b))&&r(f,h,e,k);return d}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(c){function d(f,g,b,e,k,l){a._pe.ensureCache.prepare();switch(f){case "dd":var m=a._pe._pe_geog_to_dd;var p=n.PE_DD_MAX;break;case "ddm":m=a._pe._pe_geog_to_ddm;p=n.PE_DDM_MAX;break;case "dms":m=a._pe._pe_geog_to_dms,p=n.PE_DMS_MAX}f=0;g&&(f=a._pe.getPointer(g));g=t(e);g=a._pe.ensureFloat64(g);
p=v(b,p);e=a._pe.ensureInt32(p);if(k=m(f,b,g,k,e))for(m=0;m<b;m++)l[m]=a._pe.UTF8ToString(p[m]);return k}function h(f,g,b,e,k){a._pe.ensureCache.prepare();switch(f){case "dd":var l=a._pe._pe_dd_to_geog;break;case "ddm":l=a._pe._pe_ddm_to_geog;break;case "dms":l=a._pe._pe_dms_to_geog}f=0;g&&(f=a._pe.getPointer(g));g=e.map(function(m){return a._pe.ensureString(m)});e=a._pe.ensureInt32(g);g=a._pe.ensureFloat64(Array(2*b));(l=l(f,b,e,g))&&r(k,b,g);return l}c.geog_to_dms=function(f,g,b,e,k){return d("dms",
f,g,b,e,k)};c.dms_to_geog=function(f,g,b,e){return h("dms",f,g,b,e)};c.geog_to_ddm=function(f,g,b,e,k){return d("ddm",f,g,b,e,k)};c.ddm_to_geog=function(f,g,b,e){return h("ddm",f,g,b,e)};c.geog_to_dd=function(f,g,b,e,k){return d("dd",f,g,b,e,k)};c.dd_to_geog=function(f,g,b,e){return h("dd",f,g,b,e)}})(a.PeNotationDms||(a.PeNotationDms={}));var z;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;
c.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(d,h,f,g,b,e,k){a._pe.ensureCache.prepare();var l=0;d&&(l=a._pe.getPointer(d));d=t(f);f=a._pe.ensureFloat64(d);d=v(h,n.PE_MGRS_MAX);var m=a._pe.ensureInt32(d);if(g=a._pe._pe_geog_to_mgrs_extended(l,h,f,g,b,e,m))for(b=0;b<h;b++)k[b]=a._pe.UTF8ToString(d[b]);
return g};c.mgrs_to_geog_extended=function(d,h,f,g,b){a._pe.ensureCache.prepare();var e=0;d&&(e=a._pe.getPointer(d));d=f.map(function(k){return a._pe.ensureString(k)});f=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*h));(g=a._pe._pe_mgrs_to_geog_extended(e,h,f,g,d))&&r(b,h,d);return g}})(z=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(c){c.geog_to_usng=function(d,h,f,g,b,e,k){a._pe.ensureCache.prepare();var l=0;d&&(l=a._pe.getPointer(d));d=t(f);f=a._pe.ensureFloat64(d);d=v(h,n.PE_MGRS_MAX);
var m=a._pe.ensureInt32(d);if(g=a._pe._pe_geog_to_usng(l,h,f,g,b,e,m))for(b=0;b<h;b++)k[b]=a._pe.UTF8ToString(d[b]);return g};c.usng_to_geog=function(d,h,f,g){a._pe.ensureCache.prepare();var b=0;d&&(b=a._pe.getPointer(d));d=f.map(function(e){return a._pe.ensureString(e)});f=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*h));(b=a._pe._pe_usng_to_geog(b,h,f,d))&&r(g,h,d);return b}})(a.PeNotationUsng||(a.PeNotationUsng={}));var A;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;
c.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geog_to_utm=function(d,h,f,g,b){a._pe.ensureCache.prepare();var e=0;d&&(e=a._pe.getPointer(d));d=t(f);f=a._pe.ensureFloat64(d);d=v(h,n.PE_UTM_MAX);var k=a._pe.ensureInt32(d);if(g=a._pe._pe_geog_to_utm(e,h,f,g,k))for(e=0;e<h;e++)b[e]=a._pe.UTF8ToString(d[e]);return g};c.utm_to_geog=function(d,h,f,g,b){a._pe.ensureCache.prepare();var e=0;d&&(e=a._pe.getPointer(d));
d=f.map(function(k){return a._pe.ensureString(k)});f=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*h));(g=a._pe._pe_utm_to_geog(e,h,f,g,d))&&r(b,h,d);return g}})(A=a.PeNotationUtm||(a.PeNotationUtm={}));var B;(function(c){var d=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=
a._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(h,f){void 0===f&&(f=c.PE_PCSINFO_OPTION_DOMAIN);var g;if(d.has(h)){var b=d.get(h);b[f]&&(g=b[f])}g||(g=a._pe.PePCSInfo.prototype.generate(h,f),b||(b=[],d.set(h,b)),b[f]=g);return g}})(B=a.PePCSInfo||(a.PePCSInfo={}));(function(c){c.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=x});