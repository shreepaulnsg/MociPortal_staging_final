// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/geometry/geodesicUtils","dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),function(A,L,P,Q,F,B,G,M){function N(a){return!!(a&&a.wkid&&H[a.wkid])}function C(a){return N(a)?H[a.wkid]:H[4326]}function D(a){var n=a.spatialReference,d=C(n),m=d.a;d=d.eSq;var l=Math.sqrt(d),f=Math.sin(a.y*u);return new B(m*a.x*u,0<d?m*(1-d)*(f/(1-d*f*f)-1/(2*l)*Math.log((1-l*f)/(1+l*f)))*.5:m*f,n)}function E(a,n,d,m,l){var f=C(l),e=f.a,g=f.b;f=
f.f;var k=Math.sin(d);d=Math.cos(d);var b=(1-f)*Math.tan(a);a=1/Math.sqrt(1+b*b);var c=b*a,p=Math.atan2(b,d);b=a*k;var h=b*b,q=1-h;e=q*(e*e-g*g)/(g*g);var y=1+e/16384*(4096+e*(-768+e*(320-175*e))),r=e/1024*(256+e*(-128+e*(74-47*e)));e=m/(g*y);for(var w=2*Math.PI,t,x,v,z;1E-12<Math.abs(e-w);)v=Math.cos(2*p+e),t=Math.sin(e),x=Math.cos(e),z=r*t*(v+r/4*(x*(-1+2*v*v)-r/6*v*(-3+4*t*t)*(-3+4*v*v))),w=e,e=m/(g*y)+z;m=c*t-a*x*d;g=f/16*q*(4+f*(4-3*q));return new B((n+(Math.atan2(t*k,a*x-c*t*d)-(1-g)*f*b*(e+
g*t*(v+g*x*(-1+2*v*v)))))/u,Math.atan2(c*x+a*t*d,(1-f)*Math.sqrt(h+m*m))/u,l)}function I(a,n,d,m,l){var f=C(l),e=f.a;l=f.b;var g=f.f,k=m-n,b=Math.atan((1-g)*Math.tan(a)),c=Math.atan((1-g)*Math.tan(d)),p=Math.sin(b);b=Math.cos(b);var h=Math.sin(c);c=Math.cos(c);var q=k,y=1E3;do{var r=Math.sin(q);var w=Math.cos(q);var t=Math.sqrt(c*r*c*r+(b*h-p*c*w)*(b*h-p*c*w));if(0===t)return 0;w=p*h+b*c*w;var x=Math.atan2(t,w);var v=b*c*r/t;var z=1-v*v;r=w-2*p*h/z;isNaN(r)&&(r=0);var J=g/16*z*(4+g*(4-3*z));var R=
q;q=k+(1-J)*g*v*(x+J*t*(r+J*w*(-1+2*r*r)))}while(1E-12<Math.abs(q-R)&&0<--y);if(0===y)return l=m-n,{azimuth:Math.atan2(Math.sin(l)*Math.cos(d),Math.cos(a)*Math.sin(d)-Math.sin(a)*Math.cos(d)*Math.cos(l)),geodesicDistance:Math.acos(Math.sin(a)*Math.sin(d)+Math.cos(a)*Math.cos(d)*Math.cos(m-n))*f.radius};a=z*(e*e-l*l)/(l*l);n=a/1024*(256+a*(-128+a*(74-47*a)));return{azimuth:Math.atan2(c*Math.sin(q),b*h-p*c*Math.cos(q)),geodesicDistance:l*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(x-n*t*(r+n/4*(w*(-1+
2*r*r)-n/6*r*(-3+4*t*t)*(-3+4*r*r)))),reverseAzimuth:Math.atan2(b*Math.sin(q),b*h*Math.cos(q)-p*c)}}function O(a,n){if(!(a instanceof G||a instanceof M))throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),Error("_geodesicDensify: the input geometry is neither polyline nor polygon");var d=a.spatialReference,m=C(d).radius/1E4;n<m&&(n=m);m=a instanceof G;var l=[],f;A.forEach(m?a.paths:a.rings,function(e){l.push(f=[]);f.push([e[0][0],e[0][1]]);var g,k;var b=e[0][0]*
u;var c=e[0][1]*u;for(g=0;g<e.length-1;g++){var p=e[g+1][0]*u;var h=e[g+1][1]*u;if(b!==p||c!==h){h=I(c,b,h,p,d);p=h.azimuth;h=h.geodesicDistance;var q=h/n;if(1<q){for(k=1;k<=q-1;k++){var y=E(c,b,p,k*n,d);f.push([y.x,y.y])}k=E(c,b,p,(h+Math.floor(q-1)*n)/2,d);f.push([k.x,k.y])}c=E(c,b,p,h,d);f.push([c.x,c.y]);b=c.x*u;c=c.y*u}}});return m?new G({paths:l,spatialReference:d}):new M({rings:l,spatialReference:d})}var K={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,
esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},u=Math.PI/180,H={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,
f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,
b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};F={isSupported:N,getSpheroidInfo:C,geodesicDensify:O,
geodesicLengths:function(a,n){var d=[];A.forEach(a,function(m,l){var f=0,e=m.spatialReference;A.forEach(m.paths,function(g,k){k=0;var b;for(b=1;b<g.length;b++){var c=g[b-1][0]*u;var p=g[b][0]*u;var h=g[b-1][1]*u;var q=g[b][1]*u;if(h!==q||c!==p)c=I(h,c,q,p,e),k+=c.geodesicDistance}f+=k});f/=K[n];d.push(f)});return d},geodesicAreas:function(a,n){var d=[],m=[];A.forEach(a,function(l,f){f=.0015696101447650193*C(l.spatialReference).radius;d.push(O(l,f))});A.forEach(d,function(l,f){var e=0,g=l.spatialReference;
A.forEach(l.rings,function(k,b){b=D(new B(k[0][0],k[0][1],g));var c=D(new B(k[k.length-1][0],k[k.length-1][1],g)),p=c.x*b.y-b.x*c.y,h;for(h=0;h<k.length-1;h++)b=D(new B(k[h+1][0],k[h+1][1],g)),c=D(new B(k[h][0],k[h][1],g)),p+=c.x*b.y-b.x*c.y;e+=p});e/=K[n];m.push(e/-2)});return m},_unitsDictionary:K,_toEqualAreaPoint:D,_directGeodeticSolver:E,_inverseGeodeticSolver:I};P("extend-esri")&&L.mixin(L.getObject("geometry",!0,Q),F);return F});