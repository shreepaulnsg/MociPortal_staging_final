// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/geometry/Circle","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(h,n,q,r,t,l,u,p,k,v){h=h(l,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(b,
a){b.center?a=b:(a=a||{},a.center=b);this.center=n.isArray(a.center)?new t(a.center[0],a.center[1]):a.center;this.radius=a.radius||1E3;this.radiusUnit=a.radiusUnit||v.METERS;this.geodesic=!0===a.geodesic?!0:!1;this.numberOfPoints=a.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var b=this.radius*this._unitToMeters[this.radiusUnit],a=this._srType(this.center.spatialReference);if(this.geodesic){switch(a){case "webMercator":var d=
p.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":d=this.center}b=this._createGeodesicCircle(d,b,this.numberOfPoints,d.spatialReference);"webMercator"===a&&(b=p.geographicToWebMercator(b))}else{var c;"webMercator"===a||"projected"===a?c=b/this._convert2Meters(1,this.center.spatialReference):"geographic"===a&&(c=b/this._unitToMeters.esriDecimalDegrees);
b=this._createPlanarCircle(this.center,c,this.numberOfPoints)}this.spatialReference=b.spatialReference;this.addRing(b.rings[0]);this.verifySR()},_createGeodesicCircle:function(b,a,d,c){for(var e=0,g=Math.PI/180,f=[],m;e<2*Math.PI;)m=u._directGeodeticSolver(b.y*g,b.x*g,e,a,c),f.push([m.x,m.y]),e+=Math.PI/(d/2);f.push(f[0]);return new l(f)},_createPlanarCircle:function(b,a,d){for(var c=0,e=[],g,f;c<2*Math.PI;)g=b.x+Math.cos(c)*a,f=b.y+Math.sin(c)*a,e.push([g,f]),c+=Math.PI/(d/2);e.push(e[0]);b=new l(b.spatialReference);
b.addRing(e);return b},_srType:function(b){return b.isWebMercator()?"webMercator":null!=k[b.wkid]||b.wkt&&0===b.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(b,a){if(null!=k[a.wkid])a=k.values[k[a.wkid]];else{a=a.wkt;var d=a.lastIndexOf(",")+1,c=a.lastIndexOf("]]");a=parseFloat(a.substring(d,c))}return b*a}});q("extend-esri")&&n.setObject("geometry.Circle",h,r);return h});