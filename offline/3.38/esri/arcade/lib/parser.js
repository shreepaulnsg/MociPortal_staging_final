// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/arcade/lib/parser","require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(r,p,q,u,h,f,v,t,w){Object.defineProperty(p,"__esModule",{value:!0});p.Parser=void 0;r=function(){function d(a,b,c){void 0===b&&(b={});this.config={range:"boolean"===typeof b.range&&b.range,loc:"boolean"===typeof b.loc&&b.loc,source:null,tokens:"boolean"===typeof b.tokens&&b.tokens,comment:"boolean"===typeof b.comment&&b.comment,tolerant:"boolean"===typeof b.tolerant&&
b.tolerant,globalReturn:!!b.globalReturn};this.config.loc&&b.source&&null!==b.source&&(this.config.source=String(b.source));this.delegate=c;this.errorHandler=new u.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new v.Scanner(a,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,
"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,
column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}d.prototype.tolerateError=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var e=b.slice();b=a.replace(/%(\d)/g,function(k,g){q.assert(g<e.length,"Message reference must be in range");return e[g]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,b)};d.prototype.unexpectedTokenError=
function(a,b){var c=b||h.Messages.UnexpectedToken;a?(b||(c=2===a.type?h.Messages.UnexpectedEOS:3===a.type?h.Messages.UnexpectedIdentifier:6===a.type?h.Messages.UnexpectedNumber:8===a.type?h.Messages.UnexpectedString:10===a.type?h.Messages.UnexpectedTemplate:h.Messages.UnexpectedToken),b=a.value.toString()):b="ILLEGAL";c=c.replace("%0",b);return a&&"number"===typeof a.lineNumber?this.errorHandler.createError(a.start,a.lineNumber,a.start-(this.lastMarker.index-this.lastMarker.column)+1,c):this.errorHandler.createError(this.lastMarker.index,
this.lastMarker.line,this.lastMarker.column+1,c)};d.prototype.throwUnexpectedToken=function(a,b){throw this.unexpectedTokenError(a,b);};d.prototype.tolerateUnexpectedToken=function(a,b){this.errorHandler.tolerate(this.unexpectedTokenError(a,b))};d.prototype.collectComments=function(){if(this.config.comment){var a=this.scanner.scanComments();if(a&&0<a.length&&this.delegate)for(var b=0;b<a.length;++b){var c=a[b],e=new f.Comment(c.multiLine?"Block":"Line",this.scanner.source.slice(c.slice[0],c.slice[1]));
this.config.range&&(e.range=c.range);this.config.loc&&(e.loc=c.loc);this.delegate(e,{start:{line:c.loc.start.line,column:c.loc.start.column,offset:c.range[0]},end:{line:c.loc.end.line,column:c.loc.end.column,offset:c.range[1]}})}}else this.scanner.scanComments()};d.prototype.peekAhead=function(a){var b=this,c=this.scanner.saveState();a.call(this,function(){b.scanner.scanComments();return b.scanner.lex()});this.scanner.restoreState(c)};d.prototype.getTokenRaw=function(a){return this.scanner.source.slice(a.start,
a.end)};d.prototype.convertToken=function(a){var b={type:w.TokenName[a.type],value:this.getTokenRaw(a)};this.config.range&&(b.range=[a.start,a.end]);this.config.loc&&(b.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===a.type&&(b.regex={pattern:a.pattern,flags:a.flags});return b};d.prototype.nextToken=function(){var a=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=
this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var b=this.scanner.lex();this.hasLineTerminator=a.lineNumber!==b.lineNumber;this.lookahead=b;this.config.tokens&&2!==b.type&&this.tokens.push(this.convertToken(b));return a};d.prototype.createNode=
function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};d.prototype.startNode=function(a,b){void 0===b&&(b=0);var c=a.start-a.lineStart,e=a.lineNumber;0>c&&(c+=b,e--);return{index:a.start,line:e,column:c}};d.prototype.finalize=function(a,b){this.config.range&&(b.range=[a.index,this.lastMarker.index]);this.config.loc&&(b.loc={start:{line:a.line,column:a.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(b.loc.source=
this.config.source));this.delegate&&this.delegate(b,{start:{line:a.line,column:a.column,offset:a.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return b};d.prototype.expect=function(a){var b=this.nextToken();7===b.type&&b.value===a||this.throwUnexpectedToken(b)};d.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var a=this.lookahead;7===a.type&&","===a.value?this.nextToken():7===a.type&&";"===a.value?(this.nextToken(),this.tolerateUnexpectedToken(a)):
this.tolerateUnexpectedToken(a,h.Messages.UnexpectedToken)}else this.expect(",")};d.prototype.expectKeyword=function(a){var b=this.nextToken();4===b.type&&b.value.toString().toLowerCase()===a.toLowerCase()||this.throwUnexpectedToken(b)};d.prototype.match=function(a){return 7===this.lookahead.type&&this.lookahead.value===a};d.prototype.matchKeyword=function(a){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===a.toLowerCase()};d.prototype.matchContextualKeyword=function(a){return 3===
this.lookahead.type&&this.lookahead.value===a};d.prototype.matchAssign=function(){return 7!==this.lookahead.type?!1:f.AssignmentOperators.includes(this.lookahead.value)};d.prototype.isolateCoverGrammar=function(a){var b=this.context.isBindingElement,c=this.context.isAssignmentTarget,e=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;a=a.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=b;this.context.isAssignmentTarget=c;this.context.firstCoverInitializedNameError=e;return a};d.prototype.inheritCoverGrammar=function(a){var b=this.context.isBindingElement,c=this.context.isAssignmentTarget,e=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;a=a.call(this);this.context.isBindingElement=
this.context.isBindingElement&&b;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&c;this.context.firstCoverInitializedNameError=e||this.context.firstCoverInitializedNameError;return a};d.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};
d.prototype.parsePrimaryExpression=function(){var a=this.createNode();switch(this.lookahead.type){case 3:a=this.finalize(a,new f.Identifier(this.nextToken().value));break;case 6:case 8:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var b=this.nextToken();var c=this.getTokenRaw(b);a=this.finalize(a,new f.Literal(b.value,c));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;b=this.nextToken();c=this.getTokenRaw(b);a=this.finalize(a,new f.Literal("true"===
b.value.toString().toLowerCase(),c));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;b=this.nextToken();c=this.getTokenRaw(b);a=this.finalize(a,new f.Literal(null,c));break;case 10:a=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;a=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":a=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":a=this.inheritCoverGrammar(this.parseObjectInitializer);
break;default:a=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;a=this.throwUnexpectedToken(this.nextToken());break;default:a=this.throwUnexpectedToken(this.nextToken())}return a};d.prototype.parseArrayInitializer=function(){var a=this.createNode(),b=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),b.push(null)):(b.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||
this.expect(","));this.expect("]");return this.finalize(a,new f.ArrayExpression(b))};d.prototype.parseObjectPropertyKey=function(){var a=this.createNode(),b=this.nextToken();switch(b.type){case 8:case 6:a=this.finalize(a,new f.Literal(b.value,this.getTokenRaw(b)));break;case 3:case 1:case 5:case 4:a=this.finalize(a,new f.Identifier(b.value));break;default:a=this.throwUnexpectedToken(b)}return a};d.prototype.parseObjectProperty=function(){var a=this.createNode(),b=this.lookahead,c=!1,e=!1,k=null;if(3===
b.type){var g=b.value;this.nextToken();c=this.match("[");k=this.finalize(a,new f.Identifier(g))}else this.match("*")?this.nextToken():(c=this.match("["),k=this.parseObjectPropertyKey());k||this.throwUnexpectedToken(this.lookahead);g=null;this.match(":")?(this.nextToken(),g=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===b.type?(g=this.finalize(a,new f.Identifier(b.value)),e=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(a,new f.Property("init",k,c,g,!1,e))};d.prototype.parseObjectInitializer=
function(){var a=this.createNode();this.expect("{");for(var b=[];!this.match("}");)b.push(this.parseObjectProperty()),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(a,new f.ObjectExpression(b))};d.prototype.parseTemplateHead=function(){q.assert(this.lookahead.head,"Template literal must start with a template head");var a=this.createNode(),b=this.nextToken();return this.finalize(a,new f.TemplateElement({raw:b.value,cooked:b.cooked},b.tail))};d.prototype.parseTemplateElement=
function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var a=this.createNode(),b=this.nextToken();return this.finalize(a,new f.TemplateElement({raw:b.value,cooked:b.cooked},b.tail))};d.prototype.parseTemplateLiteral=function(){var a=this.createNode(),b=[],c=[],e=this.parseTemplateHead();for(c.push(e);!e.tail;)b.push(this.parseExpression()),e=this.parseTemplateElement(),c.push(e);return this.finalize(a,new f.TemplateLiteral(c,b))};d.prototype.parseGroupExpression=function(){this.expect("(");
this.context.isBindingElement=!0;var a=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expect(")");this.context.isBindingElement=!1;return a};d.prototype.parseArguments=function(){this.expect("(");var a=[];if(!this.match(")"))for(;;){var b=this.isolateCoverGrammar(this.parseAssignmentExpression);a.push(b);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return a};d.prototype.isIdentifierName=function(a){return 3===a.type||4===a.type||1===
a.type||5===a.type};d.prototype.parseIdentifierName=function(){var a=this.createNode(),b=this.nextToken();this.isIdentifierName(b)||this.throwUnexpectedToken(b);return this.finalize(a,new f.Identifier(b.value))};d.prototype.parseLeftHandSideExpressionAllowCall=function(){var a=this.lookahead,b=this.context.allowIn;this.context.allowIn=!0;for(var c=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!1;var e=this.parseArguments();
c=this.finalize(this.startNode(a),new f.CallExpression(c,e))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),e=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),c=this.finalize(this.startNode(a),new f.ComputedMemberExpression(c,e));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),e=this.parseIdentifierName(),c=this.finalize(this.startNode(a),new f.StaticMemberExpression(c,
e));else break;this.context.allowIn=b;return c};d.prototype.parseLeftHandSideExpression=function(){q.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var a=this.startNode(this.lookahead),b=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var c=this.isolateCoverGrammar(this.parseExpression);this.expect("]");b=this.finalize(a,new f.ComputedMemberExpression(b,
c))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),c=this.parseIdentifierName(),b=this.finalize(a,new f.StaticMemberExpression(b,c));else break;return b};d.prototype.parseUpdateExpression=function(){var a=this.lookahead;if(this.match("++")||this.match("--")){a=this.startNode(a);var b=this.nextToken();var c=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment);
c=this.finalize(a,new f.UpdateExpression(b.value,c,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else c=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,b=this.nextToken().value,c=this.finalize(this.startNode(a),
new f.UpdateExpression(b,c,!1)));return c};d.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var a=this.startNode(this.lookahead),b=this.nextToken();var c=this.inheritCoverGrammar(this.parseUnaryExpression);c=this.finalize(a,new f.UnaryExpression(b.value,c));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else c=this.parseUpdateExpression();return c};d.prototype.binaryPrecedence=function(a){var b=a.value;return 7===
a.type?this.operatorPrecedence[b]||0:4===a.type?this.context.allowIn&&"in"===b?12:0:0};d.prototype.parseBinaryExpression=function(){var a=this.lookahead,b=this.inheritCoverGrammar(this.parseUnaryExpression),c=this.lookahead,e=this.binaryPrecedence(c);if(0<e){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;a=[a,this.lookahead];var k=this.inheritCoverGrammar(this.parseUnaryExpression);c=[b,c.value,k];for(var g=[e];;){e=this.binaryPrecedence(this.lookahead);if(0>=
e)break;for(;2<c.length&&e<=g[g.length-1];){k=c.pop();var l=c.pop();g.pop();b=c.pop();a.pop();var m=a[a.length-1],n=this.startNode(m,m.lineStart);c.push(this.finalize(n,new f.BinaryExpression(l,b,k)))}c.push(this.nextToken().value);g.push(e);a.push(this.lookahead);c.push(this.inheritCoverGrammar(this.parseUnaryExpression))}e=c.length-1;b=c[e];for(l=a.pop();1<e;){m=a.pop();if(!m)break;n=this.startNode(m,l&&l.lineStart);l=c[e-1];b=this.finalize(n,new f.BinaryExpression(l,c[e-2],b));e-=2;l=m}}return b};
d.prototype.parseAssignmentExpression=function(){var a=this.lookahead,b=a,c=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(h.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);b=this.nextToken();b=b.value;var e=this.isolateCoverGrammar(this.parseAssignmentExpression);c=this.finalize(this.startNode(a),new f.AssignmentExpression(b,c,e));this.context.firstCoverInitializedNameError=
null}return c};d.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};d.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var a=this.parseFunctionDeclaration();break;default:a=this.parseStatement()}else a=this.parseStatement();return a};d.prototype.parseBlock=function(){var a=this.createNode();this.expect("{");for(var b=
[];!this.match("}");)b.push(this.parseStatementListItem());this.expect("}");return this.finalize(a,new f.BlockStatement(b))};d.prototype.parseObjectStatement=function(){var a=this.createNode(),b=this.parseObjectInitializer();return this.finalize(a,new f.ExpressionStatement(b))};d.prototype.parseBlockOrObjectStatement=function(){var a="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(b){var c=b();if(3===c.type||8===c.type)c=b(),7===c.type&&
":"===c.value&&(a=!0)});return a?this.parseObjectStatement():this.parseBlock()};d.prototype.parseVariableIdentifier=function(){var a=this.createNode(),b=this.nextToken();3!==b.type&&this.throwUnexpectedToken(b,h.Messages.IdentiferExpected);return this.finalize(a,new f.Identifier(b.value))};d.prototype.parseVariableDeclaration=function(a){var b=this.createNode(),c=this.parseVariableIdentifier(),e=null;this.match("\x3d")?(this.nextToken(),e=this.isolateCoverGrammar(this.parseAssignmentExpression)):
c.type===t.Syntax.Identifier||a.inFor||this.expect("\x3d");return this.finalize(b,new f.VariableDeclarator(c,e))};d.prototype.parseVariableDeclarationList=function(a){for(var b=[this.parseVariableDeclaration(a)];this.match(",");)this.nextToken(),b.push(this.parseVariableDeclaration(a));return b};d.prototype.parseVariableStatement=function(){var a=this.createNode();this.expectKeyword("var");var b=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(a,new f.VariableDeclaration(b,
"var"))};d.prototype.parseEmptyStatement=function(){var a=this.createNode();this.expect(";");return this.finalize(a,new f.EmptyStatement)};d.prototype.parseExpressionStatement=function(){var a=this.createNode(),b=this.parseExpression();this.consumeSemicolon();return this.finalize(a,new f.ExpressionStatement(b))};d.prototype.parseIfClause=function(){var a=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";var b=this.parseStatement();this.context.curlyParsing=a;return b};d.prototype.parseIfStatement=
function(){var a=this.createNode(),b=null;this.expectKeyword("if");this.expect("(");var c=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var e=this.finalize(this.createNode(),new f.EmptyStatement)}else this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),b=this.parseIfClause());return this.finalize(a,new f.IfStatement(c,e,b))};d.prototype.parseForStatement=function(){var a=null,b=null,c=null,e=null,k=
null,g=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var l=this.createNode();this.nextToken();var m=this.context.allowIn;this.context.allowIn=!1;var n=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=m;1===n.length&&this.matchKeyword("in")?(n[0].init&&this.tolerateError(h.Messages.ForInOfLoopInitializer,"for-in"),e=this.finalize(l,new f.VariableDeclaration(n,"var")),this.nextToken(),k=this.parseExpression()):
(a=this.finalize(l,new f.VariableDeclaration(n,"var")),this.expect(";"))}else{l=this.context.isBindingElement;n=this.context.isAssignmentTarget;var x=this.context.firstCoverInitializedNameError;m=this.context.allowIn;this.context.allowIn=!1;a=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=m;this.matchKeyword("in")?(this.context.isAssignmentTarget&&a.type!==t.Syntax.AssignmentExpression||this.tolerateError(h.Messages.InvalidLHSInForIn),this.nextToken(),e=a,k=this.parseExpression(),
a=null):(this.context.isBindingElement=l,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=x,this.expect(";"))}e||(this.match(";")||(b=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(c=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),m=this.finalize(this.createNode(),new f.EmptyStatement)):(this.expect(")"),l=this.context.inIteration,n=this.context.curlyParsing,
this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",m=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=n,this.context.inIteration=l);return e&&k?this.finalize(g,new f.ForInStatement(e,k,m)):this.finalize(g,new f.ForStatement(a,b,c,m))};d.prototype.parseContinueStatement=function(){var a=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(a,new f.ContinueStatement)};d.prototype.parseBreakStatement=function(){var a=
this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(a,new f.BreakStatement)};d.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(h.Messages.IllegalReturn);var a=this.createNode();this.expectKeyword("return");var b=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();
return this.finalize(a,new f.ReturnStatement(b))};d.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 3:var a=this.parseExpressionStatement();break;case 7:a=this.lookahead.value;a="{"===a?this.parseBlockOrObjectStatement():"("===a?this.parseExpressionStatement():";"===a?this.parseEmptyStatement():this.parseExpressionStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":a=this.parseBreakStatement();break;case "continue":a=
this.parseContinueStatement();break;case "for":a=this.parseForStatement();break;case "function":a=this.parseFunctionDeclaration();break;case "if":a=this.parseIfStatement();break;case "return":a=this.parseReturnStatement();break;case "var":a=this.parseVariableStatement();break;default:a=this.parseExpressionStatement()}break;default:a=this.throwUnexpectedToken(this.lookahead)}return a};d.prototype.parseFunctionSourceElements=function(){var a=this.createNode();this.expect("{");var b=this.context.inIteration,
c=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var e=[];2!==this.lookahead.type&&!this.match("}");)e.push(this.parseStatementListItem());this.expect("}");this.context.inIteration=b;this.context.inFunctionBody=c;return this.finalize(a,new f.BlockStatement(e))};d.prototype.parseFormalParameters=function(){var a=[];this.expect("(");if(!this.match(")"))for(;2!==this.lookahead.type;){a.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");
if(this.match(")"))break}this.expect(")");return a};d.prototype.parseFunctionDeclaration=function(){var a=this.createNode();this.expectKeyword("function");var b=this.parseVariableIdentifier(),c=this.parseFormalParameters(),e=this.parseFunctionSourceElements();return this.finalize(a,new f.FunctionDeclaration(b,c,e))};d.prototype.parseScript=function(){for(var a=this.createNode(),b=[];2!==this.lookahead.type;)b.push(this.parseStatementListItem());return this.finalize(a,new f.Program(b))};return d}();
p.Parser=r});