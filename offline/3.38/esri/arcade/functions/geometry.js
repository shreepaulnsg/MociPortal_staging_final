// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/arcade/functions/geometry","require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(C,z,n,l,B,c,A,x,v,q,t,w,u,r){function y(k){return k instanceof l||"object"===typeof k&&"FeatureSetReader"===k.type}Object.defineProperty(z,"__esModule",{value:!0});z.registerFunctions=
void 0;z.registerFunctions=function(k,p){k.ringisclockwise=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,1,1);b=[];if(null===a[0])return!1;if(c.isArray(a[0])){var g=0;for(a=a[0];g<a.length;g++)if(d=a[g],d instanceof q)b.push([d.x,d.y]);else throw Error("Invalid Argument");}else if(a[0]instanceof B)b=a[0]._elements;else if(c.isImmutableArray(a[0])){g=0;for(var h=a[0].toArray();g<h.length;g++)if(d=h[g],d instanceof q)b.push([d.x,d.y]);else throw Error("Invalid Argument");0<b.length&&(a[0].get(0),
a[0].get(0))}else throw Error("Invalid Argument");return 3>b.length?!1:(new t({rings:[],spatialReference:{wkid:4326}})).isClockwise(b)})};k.polygon=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,1,1);b=null;if(a[0]instanceof n){if(b=c.fixSpatialReference(l.parseGeometryFromDictionary(a[0]),e.spatialReference),!1===b instanceof t)throw Error("Illegal Parameter");}else b=a[0]instanceof t?r.fromJson(a[0].toJson()):c.fixSpatialReference(new t(JSON.parse(a[0])),e.spatialReference);if(null!==b&&
!1===b.spatialReference.equals(e.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(b)})};k.polyline=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,1,1);b=null;if(a[0]instanceof n){if(b=c.fixSpatialReference(l.parseGeometryFromDictionary(a[0]),e.spatialReference),!1===b instanceof w)throw Error("Illegal Parameter");}else b=a[0]instanceof w?r.fromJson(a[0].toJson()):c.fixSpatialReference(new w(JSON.parse(a[0])),
e.spatialReference);if(null!==b&&!1===b.spatialReference.equals(e.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(b)})};k.point=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,1,1);b=null;if(a[0]instanceof n){if(b=c.fixSpatialReference(l.parseGeometryFromDictionary(a[0]),e.spatialReference),!1===b instanceof q)throw Error("Illegal Parameter");}else b=a[0]instanceof q?r.fromJson(a[0].toJson()):
c.fixSpatialReference(new q(JSON.parse(a[0])),e.spatialReference);if(null!==b&&!1===b.spatialReference.equals(e.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(b)})};k.multipoint=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,1,1);b=null;if(a[0]instanceof n){if(b=c.fixSpatialReference(l.parseGeometryFromDictionary(a[0]),e.spatialReference),!1===b instanceof v)throw Error("Illegal Parameter");
}else b=a[0]instanceof v?r.fromJson(a[0].toJson()):c.fixSpatialReference(new v(JSON.parse(a[0])),e.spatialReference);if(null!==b&&!1===b.spatialReference.equals(e.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(b)})};k.extent=function(e,f){return p(e,f,function(b,d,a){a=c.autoCastFeatureToGeometry(a);c.pcCheck(a,1,1);b=null;a[0]instanceof n?b=c.fixSpatialReference(l.parseGeometryFromDictionary(a[0]),
e.spatialReference):a[0]instanceof q?(b={xmin:a[0].x,ymin:a[0].y,xmax:a[0].x,ymax:a[0].y,spatialReference:a[0].spatialReference.toJson()},a=a[0],a.hasZ?(b.zmin=a.z,b.zmax=a.z):a.hasM&&(b.mmin=a.m,b.mmax=a.m),b=r.fromJson(b)):b=a[0]instanceof t?r.fromJson(a[0].getExtent().toJson()):a[0]instanceof w?r.fromJson(a[0].getExtent().toJson()):a[0]instanceof v?r.fromJson(a[0].getExtent().toJson()):a[0]instanceof A?r.fromJson(a[0].toJson()):c.fixSpatialReference(new A(JSON.parse(a[0])),e.spatialReference);
if(null!==b&&!1===b.spatialReference.equals(e.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(b)})};k.geometry=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,1,1);b=null;b=y(a[0])?c.fixSpatialReference(a[0].geometry(),e.spatialReference):a[0]instanceof n?c.fixSpatialReference(l.parseGeometryFromDictionary(a[0]),e.spatialReference):c.fixSpatialReference(r.fromJson(JSON.parse(a[0])),e.spatialReference);
if(null!==b&&!1===b.spatialReference.equals(e.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return c.fixNullGeometry(b)})};k.setgeometry=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,2,2);if(y(a[0])){if(!0===a[0].immutable)throw Error("Feature is Immutable");if(a[1]instanceof x||null===a[1])a[0]._geometry=a[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return c.voidOperation})};
k.feature=function(e,f){return p(e,f,function(b,d,a){if(0===a.length)throw Error("Missing Parameters");b=null;if(1===a.length)if(c.isString(a[0]))b=l.fromJson(JSON.parse(a[0]));else if(y(a[0]))b=l.createFromArcadeFeature(a[0]);else if(a[0]instanceof x)b=l.createFromGraphicLikeObject(a[0],null,null);else if(a[0]instanceof n)b=a[0].hasField("geometry")?a[0].field("geometry"):null,d=a[0].hasField("attributes")?a[0].field("attributes"):null,null!==b&&b instanceof n&&(b=l.parseGeometryFromDictionary(b)),
null!==d&&(d=l.parseAttributesFromDictionary(d)),b=l.createFromGraphicLikeObject(b,d,null);else throw Error("Illegal Argument");else{if(2===a.length){d=b=null;if(null!==a[0])if(a[0]instanceof x)b=a[0];else if(b instanceof n)b=l.parseGeometryFromDictionary(a[0]);else throw Error("Illegal Argument");if(null!==a[1])if(a[1]instanceof n)d=l.parseAttributesFromDictionary(a[1]);else throw Error("Illegal Argument");}else{b=null;d={};if(null!==a[0])if(a[0]instanceof x)b=a[0];else if(b instanceof n)b=l.parseGeometryFromDictionary(a[0]);
else throw Error("Illegal Argument");for(var g=1;g<a.length;g+=2){var h=c.toString(a[g]),m=a[g+1];if(null===m||void 0===m||c.isString(m)||isNaN(m)||c.isDate(m)||c.isNumber(m)||c.isBoolean(m)){if(c.isFunctionParameter(m)||!1===c.isSimpleType(m))throw Error("Illegal Argument");d[h]=m===c.voidOperation?null:m}else throw Error("Illegal Argument");}}b=l.createFromGraphicLikeObject(b,d,null)}b._geometry=c.fixSpatialReference(b.geometry(),e.spatialReference);b.immutable=!1;return b})};k.dictionary=function(e,
f){return p(e,f,function(b,d,a){if(0===a.length)return a=new n,a.immutable=!1,a;if(1===a.length&&c.isString(a[0]))try{var g=JSON.parse(a[0]),h=n.convertObjectToArcadeDictionary(g,!1);h.immutable=!1;return h}catch(m){throw Error("Missing Parameters or Illegal Json");}if(0!==a.length%2)throw Error("Missing Parameters");b={};for(d=0;d<a.length;d+=2)if(g=c.toString(a[d]),h=a[d+1],null===h||void 0===h||c.isString(h)||isNaN(h)||c.isDate(h)||c.isNumber(h)||c.isBoolean(h)||c.isArray(h)||c.isImmutableArray(h)){if(c.isFunctionParameter(h))throw Error("Illegal Argument");
b[g]=h===c.voidOperation?null:h}else throw Error("Illegal Argument");a=new n(b);a.immutable=!1;return a})};k.haskey=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,2,2);b=c.toString(a[1]);if(y(a[0])||a[0]instanceof n)return a[0].hasField(b);throw Error("Illegal Argument");})};k.indexof=function(e,f){return p(e,f,function(b,d,a){c.pcCheck(a,2,2);b=a[1];if(c.isArray(a[0])){for(d=0;d<a[0].length;d++)if(c.equalityTest(b,a[0][d]))return d;return-1}if(c.isImmutableArray(a[0])){var g=a[0].length();
for(d=0;d<g;d++)if(c.equalityTest(b,a[0].get(d)))return d;return-1}throw Error("Illegal Argument");})};k.angle=function(e,f){return p(e,f,function(b,d,a){a=c.autoCastFeatureToGeometry(a);c.pcCheck(a,2,3);if(!(a[0]instanceof q))throw Error("Illegal Argument");if(!(a[1]instanceof q))throw Error("Illegal Argument");if(2<a.length&&!(a[2]instanceof q))throw Error("Illegal Argument");return 2===a.length?u.angle2D(a[0],a[1]):u.angleBetween2D(a[0],a[1],a[2])})};k.bearing=function(e,f){return p(e,f,function(b,
d,a){a=c.autoCastFeatureToGeometry(a);c.pcCheck(a,2,3);if(!(a[0]instanceof q))throw Error("Illegal Argument");if(!(a[1]instanceof q))throw Error("Illegal Argument");if(2<a.length&&!(a[2]instanceof q))throw Error("Illegal Argument");return 2===a.length?u.bearing2D(a[0],a[1]):u.bearingBetween2D(a[0],a[1],a[2])})};k.isselfintersecting=function(e,f){return p(e,f,function(b,d,a){a=c.autoCastFeatureToGeometry(a);c.pcCheck(a,1,1);b=a[0];if(b instanceof t)return b.isSelfIntersecting(b);if(b instanceof w)return b=
b.paths,u.pathsSelfIntersecting(b);if(b instanceof v)for(d=b.points,a=0;a<d.length;a++)for(var g=0;g<d.length;g++)if(g!==a){for(var h=!0,m=0;m<d[a].length;m++)if(d[a][m]!==d[g][m]){h=!1;break}if(!0===h)return!0}return c.isArray(b)||c.isImmutableArray(b)?(b=c.autoCastArrayOfPointsToPolyline(b,e.spatialReference),null!==b&&(b=b.paths),u.pathsSelfIntersecting(b)):!1})}}});