// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/arcade/featureset/support/RecentlyUsedCache",["require","exports"],function(k,l){var h=function(){function d(a){var b=this;b._keys=[];b._values=[];b.length=0;a&&a.forEach(function(c){b.set(c[0],c[1])})}d.prototype.entries=function(){var a=this;return[].slice.call(this.keys().map(function(b){return[b,a.get(b)]}))};d.prototype.keys=function(){return[].slice.call(this._keys)};d.prototype.values=function(){return[].slice.call(this._values)};d.prototype.has=function(a){return-1<this._keys.indexOf(a)};
d.prototype.get=function(a){a=this._keys.indexOf(a);return-1<a?this._values[a]:void 0};d.prototype.deepGet=function(a){if(!a||!a.length)return null;var b=function(c,e){return void 0===c||null===c?null:e.length?b(c instanceof d?c.get(e[0]):c[e[0]],e.slice(1)):c};return b(this.get(a[0]),a.slice(1))};d.prototype.set=function(a,b){var c=this._keys.indexOf(a);-1<c?this._values[c]=b:(this._keys.push(a),this._values.push(b),this.length=this._values.length);return this};d.prototype.sortedSet=function(a,b,
c,e){var f=this._keys.length;c=c||0;e=void 0!==e?e:f-1;if(0===f)return this._keys.push(a),this._values.push(b),this;if(a===this._keys[c])return this._values.splice(c,0,b),this;if(a===this._keys[e])return this._values.splice(e,0,b),this;if(a>this._keys[e])return this._keys.splice(e+1,0,a),this._values.splice(e+1,0,b),this;if(a<this._keys[c])return this._values.splice(c,0,b),this._keys.splice(c,0,a),this;if(c>=e)return this;f=c+Math.floor((e-c)/2);return a<this._keys[f]?this.sortedSet(a,b,c,f-1):a>
this._keys[f]?this.sortedSet(a,b,f+1,e):this};d.prototype.size=function(){return this.length};d.prototype.clear=function(){this._keys.length=this.length=this._values.length=0;return this};d.prototype.delete=function(a){a=this._keys.indexOf(a);return-1<a?(this._keys.splice(a,1),this._values.splice(a,1),this.length=this._keys.length,!0):!1};d.prototype.forEach=function(a){var b=this;this._keys.forEach(function(c,e){a(b.get(c),c,e)})};d.prototype.map=function(a){var b=this;return this.keys().map(function(c,
e){return a(b.get(c),c,e)})};d.prototype.filter=function(a){var b=this;b._keys.forEach(function(c,e){!1===a(b.get(c),c,e)&&b.delete(c)});return this};d.prototype.clone=function(){return new d(this.entries())};return d}(),g=function(){function d(a){void 0===a&&(a=20);this.maxEntries=a;this.values=new h}d.prototype.delete=function(a){this.values.has(a)&&this.values.delete(a)};d.prototype.get=function(a){var b=null;this.values.has(a)&&(b=this.values.get(a),this.values.delete(a),this.values.set(a,b));
return b};d.prototype.put=function(a,b){if(this.values.size()>=this.maxEntries){var c=this.values.keys()[0];this.values.delete(c)}this.values.set(a,b)};return d}();return function(){function d(a){void 0===a&&(a=20);this.maxEntries=a;this._cache=new g(this.maxEntries)}d.prototype.clear=function(){this._cache=new g(this.maxEntries)};d.prototype.addToCache=function(a,b){this._cache.put(a,b)};d.prototype.removeFromCache=function(a){this._cache.delete(a)};d.prototype.getFromCache=function(a){return this._cache.get(a)};
return d}()});