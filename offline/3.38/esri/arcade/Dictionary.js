// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/arcade/Dictionary",["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(p,q,m,e,n){function h(d,a){void 0===a&&(a=!1);if(null===d||void 0===d)return null;if(e.isNumber(d))return e.toNumber(d);if(e.isBoolean(d))return e.toBoolean(d);if(e.isString(d))return e.toString(d);if(e.isDate(d))return e.toDate(d);if(e.isArray(d)){for(var c=[],b=0;b<d.length;b++)c.push(h(d[b],a));return c}b=new k;b.immutable=!1;for(var f=0,g=Object.keys(d);f<g.length;f++){var l=
g[f];c=d[l];void 0!==c&&b.setField(l,h(c,a))}b.immutable=a;return b}var k=function(){function d(a){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=a instanceof d?a.attributes:void 0===a?{}:null===a?{}:a}d.prototype.field=function(a){var c=a.toLowerCase(),b=this.attributes[a];if(void 0!==b)return b;for(var f in this.attributes)if(f.toLowerCase()===c)return this.attributes[f];throw Error("Field not Found : "+a);};d.prototype.setField=
function(a,c){if(this.immutable)throw Error("Dictionary is Immutable");var b=a.toLowerCase();if(void 0===this.attributes[a])for(var f in this.attributes)if(f.toLowerCase()===b){this.attributes[f]=c;return}this.attributes[a]=c};d.prototype.hasField=function(a){var c=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var b in this.attributes)if(b.toLowerCase()===c)return!0;return!1};d.prototype.keys=function(){var a=[],c;for(c in this.attributes)a.push(c);return a=a.sort()};d.prototype.castToText=
function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var b=this.attributes[c];null==b?a+=JSON.stringify(c)+":null":e.isBoolean(b)||e.isNumber(b)||e.isString(b)?a+=JSON.stringify(c)+":"+JSON.stringify(b):b instanceof n?a+=JSON.stringify(c)+":"+e.toStringExplicit(b):b instanceof m?a+=JSON.stringify(c)+":"+e.toStringExplicit(b):b instanceof Array?a+=JSON.stringify(c)+":"+e.toStringExplicit(b):b instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(b):null!==b&&"object"===typeof b&&void 0!==
b.castToText&&(a+=JSON.stringify(c)+":"+b.castToText())}return"{"+a+"}"};d.convertObjectToArcadeDictionary=function(a,c){void 0===c&&(c=!0);var b=new d;b.immutable=!1;for(var f in a){var g=a[f];void 0!==g&&b.setField(f.toString(),h(g))}b.immutable=c;return b};d.convertJsonToArcade=function(a,c){void 0===c&&(c=!1);return h(a,c)};return d}();return k});