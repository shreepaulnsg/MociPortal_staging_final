// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/layers/support/WebGLRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-style dojox/gfx/matrix ../../kernel ../../lang ../../sniff ../../urlUtils ../../geometry/scaleUtils ../vectorTiles/core/promiseUtils ../vectorTiles/views/2d/engine/StageGL ../vectorTiles/views/2d/engine/webgl/WGLFeatureView ../vectorTiles/views/2d/layers/features/processors/SymbolProcessor ../vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer ../vectorTiles/views/2d/support/HighlightOptions ../vectorTiles/layers/support/TileInfo ../vectorTiles/views/2d/tiling/TileInfoView ../vectorTiles/geometry/SpatialReference ../vectorTiles/geometry/support/spatialReferenceUtils ../vectorTiles/renderers/SimpleRenderer ../vectorTiles/renderers/ClassBreaksRenderer ../vectorTiles/renderers/UniqueValueRenderer".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a,c,f,q,t){function x(Q){Object.defineProperty(Q,"width",{get:function(){return this.size[0]}});Object.defineProperty(Q,"height",{get:function(){return this.size[1]}});Object.defineProperty(Q,"center",{get:function(){var J=this.viewpoint.targetGeometry;return[J.x,J.y]}})}var z=u.default,D=v.SymbolProcessor,F=w.default,G=e("esri-will-change"),E=void 0===e("ie")&&7<=e("trident"),H=e("safari"),O=E||e("edge"),K=function(){var Q=window.performance||{},J=Q.now||
Q.webkitNow||Q.msNow||Q.oNow||Q.mozNow;if(void 0!==J)return function(){return J.call(Q)};var R=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-R}}();u=e("ff");v=e("ie");w=e("webkit");var L=e("opera"),T=(new Date).getTime(),P=window.requestAnimationFrame;P||(P=window[(w&&"webkit"||u&&"moz"||L&&"o"||v&&"ms")+"RequestAnimationFrame"])||(P=function(Q){var J=
K(),R=Math.max(0,16-(J-T)),I=window.setTimeout(function(){Q(K())},R);T=J+R;return I});A=A(null,{surfaceType:"webgl",surface:null,map:null,layer:null,updateOnPan:!1,renderOnNav:!1,_canvas:null,_mapSR4:null,_dprWatchDelay:2E3,_dprTimer:null,_rendererEvalTimer:null,_redrawPromises:null,_defaultTileSize:512,_tileInfo:null,_tileInfoView:null,_wglContainer:null,_wglView:null,_tileRenderer:null,_tileRendererProps:null,_layerListenerHandles:null,_mapListenerHandles:null,_symbolProcessor:null,_returnCentroid:null,
_started:!1,_renderRequested:!1,_updateRequested:!1,_frameRequested:!1,_frameHandle:null,_viewState:null,_renderParameters:null,_updateParameters:null,_zooming:!1,_panning:!1,_scaleMatrix:null,_defaultTransition:"transform 500ms ease",_panDx:0,_panDy:0,_clipRect:null,constructor:function(Q){this._frame=this._frame.bind(this);this._evalRendererChange=this._evalRendererChange.bind(this);this._redrawPromises=new Map;n.mixin(this,Q);this._setup()},destroy:function(){this._teardown()},getNode:function(){return this._canvas},
getEventSource:function(){return this.getNode()},setClip:function(Q){this._clipRect=null;var J=O&&E?"rect(auto,auto,auto,auto)":null;if(Q){J=Q.x;var R=Q.y,I=Q.width;Q=Q.height;this._clipRect={x:J,y:R,width:I,height:Q};var S=this.layer.getNavigationTransform();J+=S.dx;R+=S.dy;J=O?this._getClipRect(J,R,I,Q):this._getClipPath(J,R,I,Q)}d.set(this.getNode(),O?"clip":"clip-path",J);H&&d.set(this.getNode(),"-webkit-clip-path",J)},start:function(){this._started=!0;this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._watchDPR();this._updateMapView(this.map.extent)},stop:function(){this._started=!1;this._unwatchDPR();this._stopFrame()},redraw:function(){this._handleRendererChange()},hitTest:function(Q,J){return this.layer.suspended?m.resolve(null):this._wglView.hitTest(Q,J).then(function(R){return 0===R.length?null:this.layer._mode._featureMap[R[0]]}.bind(this))},syncHitTest:function(Q,J){var R=this._wglContainer.prepareChildrenRenderParameters(this._renderParameters);R=this._wglView.prepareChildrenRenderParameters(R);
Q=this._wglView._hitTest(R,Q,J);this._scheduleRender();return this.layer._mode._featureMap[Q[0]]},_setup:function(){this._initState();this._createWGLContainer();this._createTileRenderer();this._applyLayerSettings();this._createMapListeners();this._setViewState();this._initRendering()},_teardown:function(){this._destroyRendering();this._destroyMapListeners();this._destroyLayerListeners();this._destroyTileRenderer();this._destroyWGLContainer();this.stop();this.surface.getEventSource().removeChild(this.getNode())},
_createWGLContainer:function(){this._wglContainer=new r;this._canvas=this._wglContainer.createElement();G&&d.set(this._canvas,"will-change","transform");this._wglContainer.setElement(this._canvas);this.surface.getEventSource().appendChild(this._canvas);this._wglContainer.parent={requestChildRender:this._scheduleRender.bind(this)};this._wglContainer.attach(this._renderParameters)},_destroyWGLContainer:function(){this._wglContainer.detach(this._renderParameters);this._wglContainer=null},_createTileRenderer:function(){var Q=
this.layer;this._tileRendererProps={layerView:{requestUpdate:function(){this._scheduleUpdate()}.bind(this)},highlightOptions:new B,layer:{objectIdField:Q.objectIdField,geometryType:this._getNormalizedGeometryType(Q),spatialReference:new a(Q.spatialReference.toJson()),fields:Q.fields,typeIdField:Q.typeIdField,types:b.map(Q.types,function(J){return J.toJson()}),outFields:Q.getOutFields(),definitionExpression:null,renderer:this._getRenderer4(),gdbVersion:null,historicMoment:null},tileInfoView:this._tileInfoView};
this._tileRenderer=new F(this._tileRendererProps);this._installTileRenderer(this._tileRenderer)},_installTileRenderer:function(Q){this._wglView=new z({highlightOptions:Q.highlightOptions,tileInfoView:Q.tileInfoView,layer:this.layer});Q._featuresView=this._wglView;this._wglContainer.addChild(this._wglView);this._wglView._container=this._wglContainer},_getNormalizedGeometryType:function(Q){return Q.hasXYFootprint()?"esriGeometryPolygon":Q.geometryType},_destroyTileRenderer:function(){this._wglContainer.removeChild(this._wglView);
this._wglView.dispose();this._tileRendererProps=this._tileRenderer=this._wglView=this._wglView._container=null},_applyLayerSettings:function(){this._wglContainer.opacity=this.layer.opacity;this._wglContainer.visible=!this.layer.suspended;this._createLayerListeners()},_createLayerListeners:function(){this._destroyLayerListeners();var Q=this.layer;this._layerListenerHandles=[Q.on("opacity-change",function(){this._wglContainer.opacity=this.layer.opacity}.bind(this)),Q.on("suspend",function(){this._wglContainer.visible=
!1}.bind(this)),Q.on("resume",function(){this._wglContainer.visible=!0}.bind(this)),Q.on("renderer-change",function(){this._handleRendererChange()}.bind(this))]},_destroyLayerListeners:function(){b.forEach(this._layerListenerHandles,function(Q){Q.remove()});this._layerListenerHandles=null},_createMapListeners:function(){this._destroyMapListeners();var Q=this.map;this._mapListenerHandles=[Q.on("pan-start",function(J){this._panning=!0;this.updateOnPan||this.renderOnNav||this._stopFrame()}.bind(this)),
Q.on("pan",function(J){this._applyPanEvent(J)}.bind(this)),Q.on("pan-end",function(J){this._panning=!1;this._applyPanEvent(J)}.bind(this)),Q.on("extent-change",function(J){d.set(this.getNode(),p._css.names.transition,"none");this._updateMapView(J.extent)}.bind(this)),Q.on("zoom-start",function(J){this._zooming=!0;this._stopFrame()}.bind(this)),Q.on("zoom-end",function(J){this._zooming=!1}.bind(this)),Q.on("scale",function(J){if(!this.renderOnNav){d.set(this.getNode(),p._css.names.transition,J.immediate?
"none":this._defaultTransition);var R=this.map.__visibleDelta;R=g.translate(-R.x,-R.y);this._scaleMatrix=J=g.multiply(g.invert(R),J.matrix,R);this._applyTransform(J)}}.bind(this))]},_destroyMapListeners:function(){b.forEach(this._mapListenerHandles,function(Q){Q.remove()});this._mapListenerHandles=null},_getRenderer4:function(Q){if(Q=Q||this.layer._getRenderer()){Q=this._fixImageUrl(Q.toJson());var J;"simple"===Q.type?J=f.fromJSON(Q):"classBreaks"===Q.type?J=q.fromJSON(Q):"uniqueValue"===Q.type?J=
t.fromJSON(Q):console.error("WebGLRenderer: unsupported layer.renderer!");return J}},_fixImageUrl:function(Q){var J=[];switch(Q.type){case "simple":J.push(Q.symbol);break;case "uniqueValue":J.push(Q.defaultSymbol);J=J.concat(b.map(Q.uniqueValueInfos,function(U){return U.symbol}));break;case "classBreaks":J.push(Q.defaultSymbol),J=J.concat(b.map(Q.classBreakInfos,function(U){return U.symbol}))}J=b.filter(J,function(U){return!!U});var R=this.layer,I=R._url.path+"/images/",S=R._getToken();b.forEach(J,
function(U){var V=U.url;V&&(-1===V.search(/https?:/)&&-1===V.indexOf("data:")&&(U.url=I+V),S&&-1!==U.url.search(/https?:/)&&k.hasSameOrigin(U.url,R._url.path)&&(U.url+="?token\x3d"+S))});return Q},_setRenderer:function(Q){this._tileRendererProps.layer.renderer=Q;Q=this._tileRenderer.getProcessorConfiguration();var J=this._symbolProcessor;J.setConfiguration(Q);this._returnCentroid=J._getReturnCentroid(J.getRendererInfo().renderer);return Q},_handleRendererChange:function(){this._rendererEvalTimer||
(this._rendererEvalTimer=setTimeout(this._evalRendererChange,0))},_cancelRendererEval:function(){clearTimeout(this._rendererEvalTimer);this._rendererEvalTimer=null},_evalRendererChange:function(){this._cancelRendererEval();var Q=this._returnCentroid,J=this._setRenderer(this._getRenderer4());this._cancelRedraw();this._tileRenderer.needsProcessorReconfiguration(J)?(this._tileRenderer.applyConfiguration(J,!0),Q!==this._returnCentroid&&this._returnCentroid?this.layer._mode.refresh():this._redrawView()):
(this._tileRenderer.applyConfiguration(J,!1),this._scheduleUpdate())},_redrawView:function(){this._wglView.children.slice(0).forEach(function(Q,J){J=Q.key.id;var R=this.layer._mode._tileRequests.get(J);R&&(Q=this._redrawTile(R.tsTile,Q,R.featureSet),Q.isFulfilled()||this._redrawPromises.set(J,Q))}.bind(this))},_redrawTile:function(Q,J,R){return this._symbolProcessor.getMeshData(Q,R).then(function(I){var S=J.key.id;this._redrawPromises["delete"](S);this.layer._mode._tileRequests.get(S)&&this._repaintTile(J,
I.data)}.bind(this)).otherwise(function(I){this._redrawPromises["delete"](J.key.id)}.bind(this))},_repaintTile:function(Q,J){this._wglView.removeChild(Q);Q.attached=!1;this._tileRenderer.onTileData({tileKey:Q.key.id,data:J});this._wglView.addChild(Q)},_cancelRedraw:function(Q){Q?(Q=this._redrawPromises.get(Q))&&Q.cancel():this._redrawPromises.forEach(function(J,R){J.cancel()})},_initState:function(){this._mapSR4=new a(this.map.spatialReference.toJson());var Q={};x(Q);this._viewState=n.mixin(Q,{scale:0,
size:[0,0],rotation:0,resolution:1,worldScreenWidth:0,spatialReference:this._mapSR4,viewpoint:{rotation:0,scale:0,targetGeometry:{x:0,y:0},camera:null,clone:function(){var J=n.mixin({},this);J.targetGeometry&&(J.targetGeometry=n.mixin({},J.targetGeometry));return J}},toScreen:function(J,R){var I=this.center[1]+this.resolution*this.height*.5;J[0]=(R[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;J[1]=(I-R[1])/this.resolution;return J},toMap:function(J,R){var I=this.center[1]+this.resolution*
this.height*.5;J[0]=this.center[0]-this.resolution*this.width*.5+R[0]*this.resolution;J[1]=I-R[1]*this.resolution;return J},clone:function(){var J=n.mixin({},this);x(J);J.size&&(J.size=J.size.slice(0));J.viewpoint&&(J.viewpoint=J.viewpoint.clone());return J}});this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._tileInfo=C.create({spatialReference:this._mapSR4,
size:this._defaultTileSize});this._tileInfoView=new y(this._tileInfo)},_initRendering:function(){var Q=this._tileRendererProps.layer;this._symbolProcessor=new D({configuration:null,service:{fields:Q.fields,geometryType:Q.geometryType,objectIdField:Q.objectIdField,typeIdField:Q.typeIdField,types:Q.types},spatialReference:this._mapSR4,tileRenderer:this._tileRenderer});Q=this._setRenderer(this._getRenderer4());this._tileRenderer.applyConfiguration(Q,!0)},_destroyRendering:function(){this._symbolProcessor&&
this._symbolProcessor.destroy();this._cancelRendererEval();this._cancelRedraw()},_updateMapView:function(Q){this._setViewState(Q);this._scheduleUpdate();this._scheduleRender()},_setViewState:function(Q){var J=this.map;if(J.loaded){Q=Q?Q.getCenter():J.extent.getCenter();var R=this._viewState;R.viewpoint.targetGeometry=Q.toJson();R.scale=R.viewpoint.scale=J.getScale();R.size=[J.width,J.height]}},_updateViewState:function(){var Q=this._viewState;Q.resolution=Q.scale/(39.37*l.getUnitValueForSR(this.map.spatialReference)*
96);var J=0;Q.spatialReference.isWrappable&&(J=c.getInfo(Q.spatialReference),J=J.valid[1]-J.valid[0]);Q.worldScreenWidth=Math.round(J/Q.resolution)},_getClipPath:function(Q,J,R,I){return"inset("+(J?J-this._panDy:J)+"px "+(this.map.width-(Q+R)+this._panDx)+"px "+(this.map.height-(J+I)+this._panDy)+"px "+(Q?Q-this._panDx:Q)+"px)"},_getClipRect:function(Q,J,R,I){J-=this._panDy;Q-=this._panDx;return"rect("+J+"px, "+(Q+R)+"px, "+(J+I)+"px, "+Q+"px)"},_stopFrame:function(){this._frameRequested=this._updateRequested=
this._renderRequested=!1;cancelAnimationFrame(this._frameHandle);this._frameHandle=null},_canRender:function(){return this.renderOnNav||!this._zooming&&!this._panning},_canUpdate:function(){return this.updateOnPan||!this._zooming&&!this._panning},_watchDPR:function(){this._unwatchDPR();this._dprTimer=setTimeout(function(){this._renderParameters.pixelRatio!==window.devicePixelRatio&&this._scheduleRender();this._watchDPR()}.bind(this),this._dprWatchDelay)},_unwatchDPR:function(){clearTimeout(this._dprTimer);
this._dprTimer=null},_scheduleRender:function(){this._started&&this._canRender()&&(this._renderRequested=!0,this._scheduleFrame())},_scheduleUpdate:function(){this._started&&this._canUpdate()&&(this._updateRequested=!0,this._scheduleFrame())},_scheduleFrame:function(){this._frameRequested||(this._frameRequested=!0,this._frameHandle=P(this._frame))},_frame:function(){this._frameRequested&&(this._frameRequested=!1,this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=
this._updateParameters.pixelRatio=window.devicePixelRatio),this._updateParameters.stationary=this._renderParameters.stationary=!0,this._updateViewState(),this._renderRequested&&this._canRender()&&(this._renderRequested=!1,d.set(this._canvas,p._css.names.transition,"none"),this._applyTransform(),this._scaleMatrix=null,this._wglContainer.doRender(this._renderParameters)),this._updateRequested&&this._canUpdate()&&(this._updateRequested=!1,this.layer._mode.update(this._updateParameters)))},_applyPanEvent:function(Q){if(!this.renderOnNav){this._panDx=
Q.delta.x;this._panDy=Q.delta.y;var J=g.translate(Q.delta.x,Q.delta.y);J=this._scaleMatrix?g.multiply(J,this._scaleMatrix):J;this._applyTransform(J)}(this.updateOnPan||this.renderOnNav)&&this._updateMapView(Q.extent)},_applyTransform:function(Q){Q=Q?p._css.matrix(Q):"";d.set(this._canvas,p._css.names.transform,Q);Q||(this._panDx=this._panDy=0,this.setClip(this._clipRect))}});e("extend-esri")&&h.setObject("layers.support.WebGLRenderer",A,p);return A})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),
function(A,h,b,d,g,p){function n(e){if(e){if("function"!==typeof e.forEach){var k=Object.keys(e),l=k.map(function(v){return e[v]});return n(l).then(function(v){var w={};k.forEach(function(B,C){return w[B]=v[C]});return w})}var m=new b,r=[],u=e.length;0===u&&m.resolve(r);e.forEach(function(v){var w={promise:v};r.push(w);v.then(function(B){w.value=B}).catch(function(B){w.error=B}).then(function(){--u;0===u&&m.resolve(r)})});return m.promise}}Object.defineProperty(h,"__esModule",{value:!0});h.all=function(e){return g(e)};
h.filter=function(e,k){var l=e.slice();return g(e.map(function(m,r){return k(m,r)})).then(function(m){return l.filter(function(r,u){return m[u]})})};h.eachAlways=n;h.create=function(e,k){var l=new b(k);e(function(m){void 0===m&&(m=null);return d(m).then(l.resolve)},l.reject);return l.promise};h.reject=function(e){var k=new b;k.reject(e);return k.promise};h.resolve=function(e){void 0===e&&(e=null);var k=new b;k.resolve(e);return k.promise};h.after=function(e,k){void 0===k&&(k=null);var l=0,m=new b(function(){l&&
(clearTimeout(l),l=0)});l=setTimeout(function(){m.resolve(k)},e);return m.promise};h.timeout=function(e,k,l){var m=0,r=new b(e.cancel);e.then(function(u){r.isFulfilled()||(r.resolve(u),m&&(clearTimeout(m),m=0))});e.catch(function(u){r.isFulfilled()||(r.reject(u),m&&(clearTimeout(m),m=0))});m=setTimeout(function(){var u=l||new p("promiseUtils:timeout","The wrapped promise did not resolve within "+k+" ms");r.reject(u)},k);return r.promise};h.wrapCallback=function(e){var k=!1,l=new b(function(){return k=
!0});e(function(m){k||l.resolve(m)});return l.promise};h.isThenable=function(e){return e&&"function"===typeof e.then};h.when=function(e){return d(e)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(A,h,b,d,g){A=function(p){function n(e,k,l){var m=p.call(this,e,k,l)||this;return m instanceof n?m:new n(e,k,l)}b(n,p);n.prototype.toJSON=function(){return{name:this.name,message:this.message,details:d.clone(this.details),
dojoType:this.dojoType}};n.fromJSON=function(e){var k=new n(e.name,e.message,e.details);null!=e.dojoType&&(k.dojoType=e.dojoType);return k};return n}(g);A.prototype.type="error";return A})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,b){h.__proto__=b}||function(h,b){for(var d in b)b.hasOwnProperty(d)&&(h[d]=b[d])};return function(h,b){function d(){this.constructor=h}
A(h,b);h.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(A,h,b,d,g,p){function n(v){return void 0!==v&&null!==v}function e(v){return n(v)?v:""}function k(v,w,B){var C=B.match(/([^\(]+)(\([^\)]+\))?/i),y=h.trim(C[1]);B=w[v];C=JSON.parse((C[2]?h.trim(C[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,
'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var a=C.utcOffset;if(-1===r.indexOf(y))y=h.getObject(y),h.isFunction(y)&&(B=y(B,v,w,C));else if("number"===typeof B||"string"===typeof B&&B&&!isNaN(Number(B)))switch(B=Number(B),y){case "NumberFormat":v=h.mixin({},C);w=parseFloat(v.places);if(isNaN(w)||0>w)v.places=Infinity;return d.format(B,v);case "DateString":B=new Date(B);if(C.local||C.systemLocale)return C.systemLocale?B.toLocaleDateString()+(C.hideTime?"":" "+B.toLocaleTimeString()):
B.toDateString()+(C.hideTime?"":" "+B.toTimeString());B=B.toUTCString();C.hideTime&&(B=B.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return B;case "DateFormat":return B=new Date(B),n(a)&&(B=b.add(B,"minute",B.getTimezoneOffset()-a)),g.format(B,C)}return e(B)}function l(v,w){var B;if(w)for(B in v)v.hasOwnProperty(B)&&(void 0===v[B]?delete v[B]:v[B]instanceof Object&&l(v[B],!0));else for(B in v)v.hasOwnProperty(B)&&void 0===v[B]&&delete v[B];return v}function m(v){if(!v||"object"!=typeof v||h.isFunction(v))return v;
if(v instanceof Int8Array||v instanceof Uint8Array||v instanceof Uint8ClampedArray||v instanceof Int16Array||v instanceof Int32Array||v instanceof Uint16Array||v instanceof Uint32Array||v instanceof Float32Array||v instanceof Float64Array||v instanceof Date)return new v.constructor(v);if(v instanceof ArrayBuffer)return v.slice(0,v.byteLength);if("function"===typeof v.clone)v=v.clone();else if("function"===typeof v.map&&"function"===typeof v.forEach)v=v.map(m);else if("function"===typeof v.notifyChange&&
"function"===typeof v.watch)v=v.clone();else{var w={},B,C={};for(B in v){var y=v[B];var a=!(B in C)||C[B]!==y;if(!(B in w)||w[B]!==y&&a)w[B]=m?m(y):y}v=w}return v}var r=["NumberFormat","DateString","DateFormat"],u=/<\/?[^>]+>/g;return{equals:function(v,w){return v===w||"number"===typeof v&&isNaN(v)&&"number"===typeof w&&isNaN(w)||h.isFunction((v||{}).getTime)&&h.isFunction((w||{}).getTime)&&v.getTime()==w.getTime()||h.isFunction((v||{}).equals)&&v.equals(w)||h.isFunction((w||{}).equals)&&w.equals(v)||
!1},mixin:h.mixin,valueOf:function(v,w){for(var B in v)if(v[B]==w)return B;return null},stripTags:function(v){if(v){var w=typeof v;if("string"===w)v=v.replace(u,"");else if("object"===w)for(var B in v)(w=v[B])&&"string"===typeof w&&(w=w.replace(u,"")),v[B]=w}return v},substitute:function(v,w,B){if(n(B))if(h.isObject(B)){var C=B.first;var y=B.dateFormat;var a=B.numberFormat}else C=B;if(w&&"{*}"!==w)return h.replace(w,h.hitch({obj:v},function(f,q){f=q.split(":");return 1<f.length?(q=f[0],f.shift(),
k(q,this.obj,f.join(":"))):y&&-1!==(y.properties||[]).indexOf(q)?k(q,this.obj,y.formatter||"DateString"):a&&-1!==(a.properties||[]).indexOf(q)?k(q,this.obj,a.formatter||"NumberFormat"):e(this.obj[q])}));w=[];var c;w.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+p.fieldsSummary+'"\x3e\x3ctbody\x3e');for(c in v)if(B=v[c],y&&-1!==(y.properties||[]).indexOf(c)?B=k(c,v,y.formatter||"DateString"):a&&-1!==(a.properties||[]).indexOf(c)&&(B=k(c,v,a.formatter||"NumberFormat")),w.push("\x3ctr\x3e\x3cth\x3e"+
c+"\x3c/th\x3e\x3ctd\x3e"+e(B)+"\x3c/td\x3e\x3c/tr\x3e"),C)break;w.push("\x3c/tbody\x3e\x3c/table\x3e");return w.join("")},filter:function(v,w,B){w=[h.isString(v)?v.split(""):v,B||A.global,h.isString(w)?new Function("item","index","array",w):w];B={};var C;v=w[0];for(C in v)w[2].call(w[C],v[C],C,v)&&(B[C]=v[C]);return B},startsWith:function(v,w,B){B=B||0;return v.indexOf(w,B)===B},endsWith:function(v,w,B){if("number"!==typeof B||!isFinite(B)||Math.floor(B)!==B||B>v.length)B=v.length;B-=w.length;v=
v.indexOf(w,B);return-1!==v&&v===B},isDefined:n,fixJson:l,clone:m}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(A,h,b){return function(){function d(g,p,n){this instanceof d&&(this.name=g,this.message=p&&b.substitute(p,n,function(e){return null==e?"":e})||"",this.details=n)}d.prototype.toString=function(){return"["+this.name+"]: "+this.message};return d}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a,c,f){function q(x){return{state:x.state,pixelRatio:x.pixelRatio,stationary:x.stationary}}var t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(x){function z(){var D=null!==x&&x.apply(this,arguments)||this;D._clipData=new Float32Array(8);D._upperLeft=v.create();D._upperRight=v.create();D._lowerLeft=v.create();D._lowerRight=v.create();D._mat2=u.create();D._clipRendererInitialized=!1;D._contextVersion=null;D._labelFader=new n.default(D);
return D}b(z,x);Object.defineProperty(z.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});z.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};z.prototype.createElement=function(){var D=document.createElement("canvas");D.setAttribute("class","esri-display-object");return D};z.prototype.setElement=function(D){this.element=D};z.prototype.useContextVersion=function(D){this._renderingContext||(this._contextVersion=D)};z.prototype.attach=
function(D){if(this.attached)return!0;this._resizeCanvas(D);var F=C.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new c(F);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=q(D);this._painter||(this._painter=new l.default,this._painter.initialize(this._renderingContext));return x.prototype.attach.call(this,D)};z.prototype.detach=function(D){x.prototype.detach.call(this,
D);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};z.prototype.renderChildren=function(D){var F=this.children;D.drawPhase=k.WGLDrawPhase.FILL|k.WGLDrawPhase.LINE|k.WGLDrawPhase.MARKER|k.WGLDrawPhase.TEXT;for(var G=F.length,E=0;E<G;E++){var H=F[E];H.attached&&this.renderChild(H,D)}if(d("esri-featurelayer-webgl-labeling")){var O=D.context,K=O.getBoundFramebufferObject();O.bindFramebuffer(this._labelsFBO2);E=D.stationary;O.setClearColor(0,
0,0,E?0:1);O.clear(O.gl.COLOR_BUFFER_BIT);if(E)for(D.drawPhase=k.WGLDrawPhase.LABEL_ALPHA,D.labelFBO=this._labelsFBO1,D.labelStep=this._labelFader.step(),E=0;E<G;E++)H=F[E],H.attached&&this.renderChild(H,D);else this._labelFader.reset();O.bindFramebuffer(K);D.labelFBO=this._labelsFBO2;D.drawPhase=k.WGLDrawPhase.LABEL;for(E=0;E<G;E++)H=F[E],H.attached&&this.renderChild(H,D);D=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=D}};z.prototype.beforeRenderChildren=function(D,F){D=F.context;
var G=F.state,E=F.pixelRatio;if(F=this._painter){D.enforceState();F.update(G,E);var H=G.width;F=G.height;var O=G.rotation;H=Math.round(H*E);F=Math.round(F*E);this._boundFBO=D.getBoundFramebufferObject();!d("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===H&&this._labelsFBO1.height===F||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=y.createWithAttachments(D,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:H,height:F},{colorTarget:0,depthStencilTarget:0}),D.bindFramebuffer(this._labelsFBO1),D.setDepthWriteEnabled(!0),D.setStencilWriteMask(255),D.setClearColor(0,0,0,0),D.setClearDepth(1),D.setClearStencil(0),D.clear(D.gl.COLOR_BUFFER_BIT|D.gl.DEPTH_BUFFER_BIT|D.gl.STENCIL_BUFFER_BIT),D.setDepthWriteEnabled(!1),D.bindFramebuffer(this._boundFBO),this._labelsFBO2=y.createWithAttachments(D,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,
width:H,height:F},{colorTarget:0,depthStencilTarget:0}));if(G.spatialReference&&(G.spatialReference._isWrappable?G.spatialReference._isWrappable():G.spatialReference.isWrappable)){var K=r.toRadian(O),L=Math.abs(Math.cos(K)),T=Math.abs(Math.sin(K)),P=Math.round(G.worldScreenWidth);if(Math.round(H*L+F*T)<=P)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===H&&this._clipFBO.height===F||(this._clipFBO=new y(D,{colorTarget:0,depthStencilTarget:3,width:H,height:F}));var Q=.5*H,J=.5*F;G=1/H;var R=
1/F;E*=.5*P;var I=.5*(H*T+F*L);H=this._upperLeft;L=this._upperRight;T=this._lowerLeft;P=this._lowerRight;v.set(H,-E,-I);v.set(L,E,-I);v.set(T,-E,I);v.set(P,E,I);u.identity(this._mat2);u.translate(this._mat2,this._mat2,[Q,J]);0!==O&&u.rotate(this._mat2,this._mat2,K);v.transformMat2d(H,H,this._mat2);v.transformMat2d(L,L,this._mat2);v.transformMat2d(T,T,this._mat2);v.transformMat2d(P,P,this._mat2);O=this._clipData;O.set([2*T[0]*G-1,2*(F-T[1])*R-1,2*P[0]*G-1,2*(F-P[1])*R-1,2*H[0]*G-1,2*(F-H[1])*R-1,2*
L[0]*G-1,2*(F-L[1])*R-1]);this._clipRendererInitialized||this._initializeClipRenderer(D);this._clipVBO.setData(O);this._boundFBO=D.getBoundFramebufferObject();D.bindFramebuffer(this._clipFBO);D.setDepthWriteEnabled(!0);D.setStencilWriteMask(255);D.setClearColor(0,0,0,0);D.setClearDepth(1);D.setClearStencil(0);D.clear(D.gl.COLOR_BUFFER_BIT|D.gl.DEPTH_BUFFER_BIT|D.gl.STENCIL_BUFFER_BIT);D.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};z.prototype.afterRenderChildren=function(D,
F){this._clipFrame&&this._clipRendererInitialized&&(D=this._renderingContext,D.bindFramebuffer(this._boundFBO),this._boundFBO=null,D.bindVAO(this._clipVAO),D.bindProgram(this._clipStencilProgram),D.setDepthWriteEnabled(!1),D.setDepthTestEnabled(!1),D.setStencilTestEnabled(!0),D.setBlendingEnabled(!1),D.setColorMask(!1,!1,!1,!1),D.setStencilOp(7680,7680,7681),D.setStencilWriteMask(255),D.setStencilFunction(519,1,255),D.drawElements(4,6,5123,0),D.bindVAO(),D.setColorMask(!0,!0,!0,!0),D.setBlendingEnabled(!0),
D.setStencilFunction(514,1,255),this._blitRenderer.render(D,this._clipFBO.colorTexture,9728,1),D.setStencilTestEnabled(!1))};z.prototype.doRender=function(D){var F=this.element.style;this.visible?(F.display="block",F.opacity=""+this.opacity,this._resizeCanvas(D),x.prototype.doRender.call(this,D),this._cachedRenderParams=q(D)):F.display="none"};z.prototype.takeScreenshot=function(D){void 0===D&&(D={});var F=D.pixelRatio||1;this._cachedRenderParams.pixelRatio=F;var G=Math.round(F*this._cachedRenderParams.state.width),
E=Math.round(F*this._cachedRenderParams.state.height),H=0,O=0,K=G,L=E,T=G,P=E;if(T=D.area)H=Math.round(F*T.x),O=Math.round(F*T.y),K=Math.round(F*T.width),L=Math.round(F*T.height);void 0!==D.width&&void 0!==D.height?(T=D.width/D.height,L*T<K?(T*=L,H+=Math.floor((K-T)/2),K=Math.floor(T)):(T=K/T,O+=Math.floor((L-T)/2),L=Math.floor(T)),T=D.width,P=D.height):(T=K,P=L);F=document.createElement("canvas");F.width=T;F.height=P;var Q=F.getContext("2d"),J=new Uint8Array(K*L*4),R=this._renderingContext,I=y.create(R,
{colorTarget:1,depthStencilTarget:3,width:G,height:E});R.bindFramebuffer(I);R.setViewport(0,0,G,E);var S=this._cachedRenderParams,U=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(U.COLOR_BUFFER_BIT|U.DEPTH_BUFFER_BIT|U.STENCIL_BUFFER_BIT);S.context=this._renderingContext;S.painter=this._painter;this.beforeRenderChildren(S,S);if(void 0!==D.rotation&&null!==D.rotation){U=
S.state;var V=U.clone();V.viewpoint.rotation=D.rotation;S.state=V;this.renderChildren(S);S.state=U}else this.renderChildren(S);this.afterRenderChildren(S,S);I.readPixels(H,E-(O+L),K,L,6408,5121,J);R.bindFramebuffer();R=Q.getImageData(0,0,T,P);if(0!==H||0!==O||K!==G||L!==E||T!==G||P!==E)w.resampleHermite(J,K,L,R.data,T,P,!0);else{O=L-1;L=0;I=4*K;for(V=U=H=E=G=K=S=void 0;L<O;){U=L*I;V=O*I;for(S=0;S<I;S+=4)K=J[U+S],G=J[U+S+1],E=J[U+S+2],H=J[U+S+3],J[U+S]=J[V+S],J[U+S+1]=J[V+S+1],J[U+S+2]=J[V+S+2],J[U+
S+3]=J[V+S+3],J[V+S]=K,J[V+S+1]=G,J[V+S+2]=E,J[V+S+3]=H;L++;O--}K=R.data;G=J.length;for(O=0;O<G;O++)K[O]=J[O]}J=R.data;L=J.length;for(O=0;O<L;O+=4)H=J[O+3],0<H&&(E=H/255,K=Math.floor(J[O+0]/E),G=Math.floor(J[O+1]/E),E=Math.floor(J[O+2]/E),J[O+0]=255>=K?K:255,J[O+1]=255>=G?G:255,J[O+2]=255>=E?E:255);Q.putImageData(R,0,0);Q=t[D.format?D.format.toLowerCase():"png"];J=1;void 0!==D.quality&&(J=D.quality/100);D=F.toDataURL(Q,J);return g.resolve({dataURL:D,x:0,y:0,width:T,height:P})};z.prototype.prepareChildrenRenderParameters=
function(D){if(!this.attached||!this._renderingContext)return null;D=q(D);var F=this._renderingContext,G=F.gl;F.setDepthWriteEnabled(!0);F.setStencilWriteMask(255);F.setClearColor(0,0,0,0);F.setClearDepth(1);F.setClearStencil(0);F.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT|G.STENCIL_BUFFER_BIT);F.setViewport(0,0,this.element.width,this.element.height);F.setDepthWriteEnabled(!1);D.context=F;D.painter=this._painter;return D};z.prototype.attachChild=function(D,F){return D.attach(F)};z.prototype.detachChild=
function(D,F){return D.detach(F)};z.prototype.renderChild=function(D,F){return D.processRender(F)};z.prototype._resizeCanvas=function(D){var F=this.element,G=F.style,E=D.state,H=D.pixelRatio;D=Math.round(E.width*H);H=Math.round(E.height*H);if(F.width!==D||F.height!==H)F.width=D,F.height=H;G.width=E.width+"px";G.height=E.height+"px"};z.prototype._initializeClipRenderer=function(D){if(this._clipRendererInitialized)return!0;this._blitRenderer=new e;var F={a_pos:0},G=new a(D,m.stencilVS,m.stencilFS,F);
if(!G)return!1;var E=B.createVertex(D,35040,32),H=new Uint16Array([0,1,2,2,1,3]);H=B.createIndex(D,35044,H);D=new f(D,F,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:E},H);this._clipStencilProgram=G;this._clipVBO=E;this._clipVAO=D;return this._clipRendererInitialized=!0};return z}(p)})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(A,
h,b,d){var g;(function(p){p[p.BEFORE=0]="BEFORE";p[p.ATTACHING=1]="ATTACHING";p[p.DETACHING=2]="DETACHING";p[p.RENDERING=3]="RENDERING";p[p.AFTER=4]="AFTER";p[p.DONE=5]="DONE"})(g||(g={}));return function(p){function n(){var e=null!==p&&p.apply(this,arguments)||this;e._childrenSet=new Set;e._childrenToAttach=[];e._childrenToDetach=[];e._renderPhase=g.DONE;e.children=[];return e}b(n,p);Object.defineProperty(n.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});
n.prototype.detach=function(e){var k=this.children.concat(this._childrenToDetach);e=this.prepareChildrenRenderParameters(e);for(var l=0;l<k.length;l++){var m=k[l];m.attached&&(this.detachChild(m,e),m.attached=!1,m.parent=null)}};n.prototype.doRender=function(e){var k=this.prepareChildrenRenderParameters(e);this._renderPhase=g.BEFORE;this.beforeRenderChildren(e,k);this._renderPhase=g.ATTACHING;this.attachChildren(k);this._renderPhase=g.DETACHING;for(var l=this._childrenToDetach;0<l.length;){var m=
l.shift();this.detachChild(m,k);m.attached=!1;m.parent=null}this._renderPhase=g.RENDERING;this.renderChildren(k);this._renderPhase=g.AFTER;this.afterRenderChildren(e,k);this._renderPhase=g.DONE};n.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)};n.prototype.addChildAt=function(e,k){void 0===k&&(k=this.numChildren);if(!e||this.contains(e))return e;var l=e.parent;l&&l!==this&&l.removeChild(e);k>=this.numChildren?this.children.push(e):this.children.splice(k,0,e);this._childrenSet.add(e);
k=this._childrenToDetach.indexOf(e);-1<k&&this._childrenToDetach.splice(k,1);this._childrenToAttach.push(e);this._renderPhase>=g.RENDERING&&this.requestRender();return e};n.prototype.contains=function(e){return this._childrenSet.has(e)};n.prototype.getChildIndex=function(e){return this.children.indexOf(e)};n.prototype.getChildAt=function(e){return 0>e||e>this.children.length?null:this.children[e]};n.prototype.removeAllChildren=function(){for(var e=this.numChildren;e--;)this.removeChildAt(0)};n.prototype.removeChild=
function(e){return this.contains(e)?this.removeChildAt(this.getChildIndex(e)):e};n.prototype.removeChildAt=function(e){if(0>e||e>=this.children.length)return null;e=this.children.splice(e,1)[0];this._childrenSet["delete"](e);if(e.attached)this._childrenToDetach.push(e),this._renderPhase>=g.RENDERING&&this.requestRender();else{var k=this._childrenToAttach.indexOf(e);-1<k&&this._childrenToAttach.splice(k,1)}return e};n.prototype.requestChildRender=function(e){e&&e.parent===this&&this._renderPhase>=
g.RENDERING&&this.requestRender()};n.prototype.setChildIndex=function(e,k){var l=this.getChildIndex(e);-1<l&&(this.children.splice(l,1),this.children.splice(k,0,e),this._renderPhase>=g.RENDERING&&this.requestRender())};n.prototype.sortChildren=function(e){this._renderPhase>g.RENDERING&&this.requestRender();return this.children.sort(e)};n.prototype.attachChildren=function(e){var k=this._childrenToAttach;if(0!==k.length)for(var l=0,m=!1;!m;)m=k[l],this.attachChild(m,e)?(m.attached=!0,m.parent=this,
k.splice(l,1)):++l,m=k.length===l};n.prototype.renderChildren=function(e){for(var k=this.children,l=k.length,m=0;m<l;m++){var r=k[m];r.attached&&this.renderChild(r,e)}};n.prototype.beforeRenderChildren=function(e,k){};n.prototype.attachChild=function(e,k){return e.attach(k)};n.prototype.detachChild=function(e,k){e.detach(k)};n.prototype.renderChild=function(e,k){e.processRender(k)};n.prototype.afterRenderChildren=function(e,k){};return n}(d)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(A,h,b,d){return function(g){function p(){var n=null!==g&&g.apply(this,arguments)||this;n._renderRequestedCalled=!1;n._attached=!1;n._opacity=1;n.renderRequested=!1;n._visible=!0;return n}b(p,g);Object.defineProperty(p.prototype,"attached",{get:function(){return this._attached},set:function(n){this._attached!==n&&((this._attached=n)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"opacity",{get:function(){return this._opacity},set:function(n){this._opacity!==n&&(this._opacity=n,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"visible",{get:function(){return this._visible},set:function(n){this._visible!==n&&(this._visible=n,this.requestRender())},enumerable:!0,configurable:!0});p.prototype.attach=function(n){return!0};p.prototype.detach=function(n){};p.prototype.processRender=
function(n){this._renderRequestedCalled=!1;this.doRender(n);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};p.prototype.requestRender=function(){var n=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);n!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};p.prototype.dispose=function(){};return p}(d.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(A,h,b,d,g){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function p(){}p.prototype.on=function(n,e){return d.after(this,"on"+n,e,!0)};p.prototype.once=function(n,e){return g.once(this,n,e)};p.prototype.emit=function(n){g.emit(this,n,this)};p.prototype.hasEventListener=function(n){n="on"+n;return!(!this[n]||!this[n].after)};return p}();h.Evented=A;h.EventedMixin=function(p){return function(n){function e(){return null!==
n&&n.apply(this,arguments)||this}b(e,n);e.prototype.on=function(k,l){return d.after(this,"on"+k,l,!0)};e.prototype.once=function(k,l){return g.once(this,k,l)};e.prototype.emit=function(k,l){g.emit(this,k,l)};e.prototype.hasEventListener=function(k){k="on"+k;return!(!this[k]||!this[k].after)};return e}(p)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function b(d,g){void 0===
g&&(g=250);this.duration=g;this._startTime=this._lastTime=0;this._parent=d}b.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};b.prototype.step=function(){var d=performance.now();if(0===this._lastTime)return this._lastTime=d,this._parent.requestRender(),0;var g=d-this._lastTime;this._lastTime=d;d-this._startTime<2*this.duration&&this._parent.requestRender();return g/this.duration};return b}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),
function(A,h,b,d,g,p){return function(){function n(){this._initialized=!1}n.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};n.prototype.render=function(e,k,l,m){e&&(this._initialized||this._initialize(e),e.setBlendFunctionSeparate(1,771,1,771),e.bindVAO(this._vertexArrayObject),e.bindProgram(this._program),k.setSamplingMode(l),e.bindTexture(k,0),this._program.setUniform1i("u_tex",
0),this._program.setUniform1f("u_opacity",m),e.drawArrays(5,0,4),e.bindVAO())};n.prototype._initialize=function(e){if(this._initialized)return!0;var k={a_pos:0,a_tex:1},l=new g(e,b.bitblitVS,b.bitblitFS,k);if(!l)return!1;var m=new Int8Array(16);m[0]=-1;m[1]=-1;m[2]=0;m[3]=0;m[4]=1;m[5]=-1;m[6]=1;m[7]=0;m[8]=-1;m[9]=1;m[10]=0;m[11]=1;m[12]=1;m[13]=1;m[14]=1;m[15]=1;e=new p(e,k,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,
stride:4,normalized:!1,divisor:0}]},{geometry:d.createVertex(e,35044,m)});this._program=l;this._vertexArrayObject=e;return this._initialized=!0};return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(A,h,b,d,g,p,n){A=new n;n.parse(b,A);n.parse(d,A);n.parse(g,
A);n.parse(p,A);return A})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(A,h,b){return function(){function d(g){if(g)for(var p in g)this[p]=g[p]}d.parse=function(g,p){g=b.parse(g).getElementsByTagName("snippet");for(var n=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,e=/[\$\s]+/g,k=/\(([^\(\)]*)\)/,l=0;l<g.length;l++){for(var m=g[l].getAttribute("name"),r=g[l].textContent;;){var u=r.match(n);if(null==u)break;var v=u[0].replace(e,
""),w=v.match(k),B=void 0;w&&(B=w[1].split(",").map(function(C){return C.trim()}));v=v.replace(k,"");B=p._instantiate(v,B);r=r.replace(u[0],B)}p[m]=r}};d.prototype._instantiate=function(g,p){g=this[g];for(p||(p=[]);;){var n=g.match(/\$(\d+)/);if(null==n)break;var e=parseInt(n[1],10);g=g.replace(n[0],p[e])}return g};return d}()})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(A){A.getObject("xml.parser",
!0,dojox);dojox.xml.parser.parse=function(h,b){var d=A.doc;b=b||"text/xml";if(h&&A.trim(h)&&"DOMParser"in A.global){var g=(new DOMParser).parseFromString(h,b);h=g.documentElement;if("parsererror"==h.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==h.namespaceURI){if(d=h.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])d=d.firstChild.data;throw Error("Error parsing text "+h.firstChild.data+" \n"+d);}return g}if("ActiveXObject"in A.global){d=
function(n){return"MSXML"+n+".DOMDocument"};d=["Microsoft.XMLDOM",d(6),d(4),d(3),d(2)];A.some(d,function(n){try{g=new ActiveXObject(n)}catch(e){return!1}return!0});if(h&&g&&(g.async=!1,g.loadXML(h),h=g.parseError,0!==h.errorCode))throw Error("Line: "+h.line+"\nCol: "+h.linepos+"\nReason: "+h.reason+"\nError Code: "+h.errorCode+"\nSource: "+h.srcText);if(g)return g}else if(d.implementation&&d.implementation.createDocument){if(h&&A.trim(h)&&d.createElement){b=d.createElement("xml");b.innerHTML=h;var p=
d.implementation.createDocument("foo","",null);A.forEach(b.childNodes,function(n){p.importNode(n,!0)});return p}return d.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(h,b){if(1<arguments.length)return dojox.xml.parser.replaceChildren(h,(h.ownerDocument||A.doc).createTextNode(b)),b;if(void 0!==h.textContent)return h.textContent;var d="";h&&A.forEach(h.childNodes,function(g){switch(g.nodeType){case 1:case 5:d+=dojox.xml.parser.textContent(g);break;case 3:case 2:case 4:d+=
g.nodeValue}});return d};dojox.xml.parser.replaceChildren=function(h,b){var d=[];A.isIE&&A.forEach(h.childNodes,function(g){d.push(g)});dojox.xml.parser.removeChildren(h);A.forEach(d,A.destroy);A.isArray(b)?A.forEach(b,function(g){h.appendChild(g)}):h.appendChild(b)};dojox.xml.parser.removeChildren=function(h){for(var b=h.childNodes.length;h.hasChildNodes();)h.removeChild(h.firstChild);return b};dojox.xml.parser.innerXML=function(h){return h.innerXML?h.innerXML:h.xml?h.xml:"undefined"!=typeof XMLSerializer?
(new XMLSerializer).serializeToString(h):null};return dojox.xml.parser})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(A,h,b){return function(){function d(g,p,n,e,k){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=g;this._bufferType=p;this._usage=n;this._id=d._nextId++;this._glName=this._context.gl.createBuffer();b("esri-webgl-debug")&&g.instanceCounter.incrementCount(1);
e&&this.setData(e,k)}d.createIndex=function(g,p,n,e){return new d(g,34963,p,n,e)};d.createVertex=function(g,p,n){return new d(g,34962,p,n)};Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"usage",
{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});d.prototype.dispose=
function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};d.prototype.setData=function(g,p){if(g){if("number"===typeof g){if(0>g&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&p)switch(this._indexType=p,this._size=g,p){case 5123:g*=2;break;case 5125:g*=4}}else p=g.byteLength,g instanceof Uint16Array&&(p/=2,this._indexType=5123),g instanceof
Uint32Array&&(p/=4,this._indexType=5125),this._size=p,ArrayBuffer.isView(g)&&(g=g.buffer);p=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,g,this._usage);this._context.bindVAO(p)}};d.prototype.setSubData=function(g,p,n,e){void 0===p&&(p=0);void 0===n&&(n=0);if(g){(0>p||p>=this._size)&&console.error("offset is out of range!");var k=p,l=n,m=e,r=g.byteLength;g instanceof Uint16Array&&(r/=2,k*=2,l*=2,m*=2);g instanceof
Uint32Array&&(r/=4,k*=4,l*=4,m*=4);void 0===e&&(e=r-1);n>=e&&console.error("end must be bigger than start!");p+n-e>this._size&&console.error("An attempt to write beyond the end of the buffer!");p=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);n=this._context.gl;g=ArrayBuffer.isView(g)?g.buffer:g;n.bufferSubData(this._bufferType,k,g.slice(l,m));this._context.bindVAO(p)}};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require",
"exports","dojo/has","./ShaderTranspiler"],function(A,h,b,d){var g=b("dojo-debug-messages");return function(){function p(n,e,k,l,m){void 0===m&&(m={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4=
{};n||console.error("RenderingContext isn't initialized!");0===e.length&&console.error("Shaders source should not be empty!");this._context=n;this._vertexShaderSource=e;this._fragmentShaderSource=k;if(Array.isArray(m))for(e=0;e<m.length;e++)this._defines[m[e]]="1";else this._defines=m;this._id=p._nextId++;this._locations=l;b("esri-webgl-debug")&&n.instanceCounter.incrementCount(3)}Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});p.prototype.getDefine=function(n){return this._defines[n]};p.prototype.dispose=function(){if(this._context){var n=this._context.gl;this._vShader&&(n.deleteShader(this._vShader),this._vShader=null);this._fShader&&(n.deleteShader(this._fShader),this._fShader=null);this._glName&&(n.deleteProgram(this._glName),
this._glName=null);b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);this._context=null}};p.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var n=this._context.gl,e=n.createProgram();n.attachShader(e,this._vShader);n.attachShader(e,this._fShader);for(var k in this._locations)n.bindAttribLocation(e,this._locations[k],k);n.linkProgram(e);
n.getProgramParameter(e,n.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+n.getProgramParameter(e,n.VALIDATE_STATUS)+", gl error ["+n.getError()+"]infoLog: "+n.getProgramInfoLog(e));this._glName=e;this._initialized=!0}};p.prototype.getUniformLocation=function(n){this.initialize();void 0===this._nameToUniformLocation[n]&&(this._nameToUniformLocation[n]=this._context.gl.getUniformLocation(this._glName,n));return this._nameToUniformLocation[n]};p.prototype.hasUniform=function(n){return null!==
this.getUniformLocation(n)};p.prototype.getAttribLocation=function(n){this.initialize();void 0===this._nameToAttribLocation[n]&&(this._nameToAttribLocation[n]=this._context.gl.getAttribLocation(this._glName,n));return this._nameToAttribLocation[n]};p.prototype.setUniform1i=function(n,e){var k=this._nameToUniform1[n];if(void 0===k||e!==k)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(n),e),this._nameToUniform1[n]=e};p.prototype.setUniform1f=function(n,e){var k=this._nameToUniform1[n];
if(void 0===k||e!==k)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(n),e),this._nameToUniform1[n]=e};p.prototype.setUniform1fv=function(n,e){var k=this._nameToUniform2[n];void 0!==k&&p._arraysEqual(e,k)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(n),e),void 0===k?this._nameToUniform2[n]=new Float32Array(e):k.set(e))};p.prototype.setUniform2f=function(n,e,k){var l=this._nameToUniform2[n];if(void 0===l||e!==l[0]||k!==l[1])this._context.bindProgram(this),
this._context.gl.uniform2f(this.getUniformLocation(n),e,k),void 0===l?this._nameToUniform2[n]=new Float32Array([e,k]):(l[0]=e,l[1]=k)};p.prototype.setUniform2fv=function(n,e){g&&0!==e.length%2&&console.error("Value array must have even number of elements!");var k=this._nameToUniform2[n];void 0!==k&&p._arraysEqual(e,k)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(n),e),void 0===k?this._nameToUniform2[n]=new Float32Array(e):k.set(e))};p.prototype.setUniform3f=
function(n,e,k,l){var m=this._nameToUniform3[n];if(void 0===m||e!==m[0]||k!==m[1]||l!==m[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(n),e,k,l),void 0===m?this._nameToUniform3[n]=new Float32Array([e,k,l]):(m[0]=e,m[1]=k,m[2]=l)};p.prototype.setUniform3fv=function(n,e){g&&0!==e.length%3&&console.error("Value array must contain sets of three values!");var k=this._nameToUniform3[n];void 0!==k&&p._arraysEqual(e,k)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(n),
e),void 0===k?this._nameToUniform3[n]=new Float32Array(e):k.set(e))};p.prototype.setUniform4f=function(n,e,k,l,m){var r=this._nameToUniform4[n];if(void 0===r||e!==r[0]||k!==r[1]||l!==r[2]||m!==r[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(n),e,k,l,m),void 0===r?this._nameToUniform4[n]=new Float32Array([e,k,l,m]):(r[0]=e,r[1]=k,r[2]=l,r[3]=m)};p.prototype.setUniform4fv=function(n,e){g&&0!==e.length%4&&console.error("Value array must contain sets of four values!");
var k=this._nameToUniform4[n];void 0!==k&&p._arraysEqual(e,k)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(n),e),void 0===k?this._nameToUniform4[n]=new Float32Array(e):k.set(e))};p.prototype.setUniformMatrix3fv=function(n,e,k){void 0===k&&(k=!1);g&&0!==e.length%9&&console.error("Matrix array must contain sets ot 9 elements!");var l=this._nameToUniformMatrix3[n];void 0!==l&&(9===l.length?p._matrix3Equal(l,e):p._arraysEqual(e,l))||(this._context.bindProgram(this),
this._context.gl.uniformMatrix3fv(this.getUniformLocation(n),k,e),void 0===l?this._nameToUniformMatrix3[n]=new Float32Array(e):l.set(e))};p.prototype.setUniformMatrix4fv=function(n,e,k){void 0===k&&(k=!1);g&&0!==e.length%16&&console.error("Matrix array must contain sets ot 16 elements!");var l=this._nameToUniformMatrix4[n];void 0!==l&&(16===l.length?p._matrix4Equal(l,e):p._arraysEqual(e,l))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(n),k,e),void 0===
l?this._nameToUniformMatrix4[n]=new Float32Array(e):l.set(e))};p._padToThree=function(n){var e=n.toString();1E3>n&&(e=("  "+n).slice(-3));return e};p.prototype._addLineNumbers=function(n){var e=2;return n.replace(/\n/g,function(){return"\n"+p._padToThree(e++)+":"})};p.prototype._loadShader=function(n){var e=35633===n,k=e?this._vertexShaderSource:this._fragmentShaderSource;var l="";for(var m in this._defines)l+="#define "+m+" "+this._defines[m]+"\n";l+=k;"webgl2"===this._context.contextVersion&&(l=
d.transpileShader(l,e?"vertex":"fragment"));e=this._context.gl;n=e.createShader(n);e.shaderSource(n,l);e.compileShader(n);e.getShaderParameter(n,e.COMPILE_STATUS)||(console.error(e.getShaderInfoLog(n)),console.error(this._addLineNumbers(l)),"webgl2"===this._context.contextVersion&&(console.log("Shader source before transpilation:"),console.log(k)));return n};p._matrix4Equal=function(n,e){g&&(16!==n.length||16!==e.length)&&console.error("Matrix object must contain 16 elements!");return n[0]===e[0]&&
n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]&&n[9]===e[9]&&n[10]===e[10]&&n[11]===e[11]&&n[12]===e[12]&&n[13]===e[13]&&n[14]===e[14]&&n[15]===e[15]};p._matrix3Equal=function(n,e){g&&(9!==n.length||9!==e.length)&&console.error("Matrix object must contain 16 elements!");return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]};p._arraysEqual=function(n,e){if(n.length!==e.length)return!1;
for(var k=0;k<n.length;++k)if(n[k]!==e[k])return!1;return!0};p._nextId=0;return p}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(A,h,b,d){function g(k){return k.map(function(l){return"eof"!==l.type?l.data:""}).join("")}function p(k,l,m,r){r=r||m;for(var u=0;u<k.length;u++){var v=k[u];if("ident"===v.type&&v.data===m)return r in l?l[r]++:l[r]=0,p(k,l,r+"_"+l[r],r)}return m}function n(k,
l,m){void 0===m&&(m="afterVersion");var r={data:"\n",type:"whitespace"},u=function(C){return C<k.length?/[^\r\n]$/.test(k[C].data):!1},v=function(C){for(var y=-1,a=0,c=-1,f=0;f<C.length;f++){var q=C[f];"preprocessor"===q.type&&(q.data.match(/#(if|ifdef|ifndef)\s+.+/)?++a:q.data.match(/#endif\s*.*/)&&--a);("afterVersion"===m||"afterPrecision"===m)&&"preprocessor"===q.type&&/^#version/.test(q.data)&&(c=Math.max(c,f));if("afterPrecision"===m&&"keyword"===q.type&&"precision"===q.data){a:{for(q=f;q<C.length;q++){var t=
C[q];if("operator"===t.type&&";"===t.data)break a}q=null}if(null===q)throw Error("precision statement not followed by any semicolons!");c=Math.max(c,q)}y<c&&0===a&&(y=f)}return y+1}(k);u(v-1)&&k.splice(v++,0,r);for(var w=0;w<l.length;w++){var B=l[w];k.splice(v++,0,B)}u(v-1)&&u(v)&&k.splice(v,0,r)}Object.defineProperty(h,"__esModule",{value:!0});var e=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];h.transpileShader=function(k,l){k=d(k);a:{var m=
"100";var r="300 es";void 0===m&&(m="100");void 0===r&&(r="300 es");for(var u=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,v=0;v<k.length;v++){var w=k[v];if("preprocessor"===w.type){var B=u.exec(w.data);if(B)if(u=B[1].replace(/\s\s+/g," "),u===r){m=u;break a}else if(u===m){w.data="#version "+r;break a}else throw Error("unknown glsl version: "+u);}}k.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"});m=null}if("300 es"===m)throw Error("shader is already glsl 300 es");
u=w=null;v={};B={};for(m=0;m<k.length;++m)switch(r=k[m],r.type){case "keyword":"vertex"===l&&"attribute"===r.data?r.data="in":"varying"===r.data&&(r.data="vertex"===l?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(r.data.trim())&&(r.data=r.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===l&&"gl_FragColor"===r.data){if(!w){w=p(k,v,"fragColor");var C=void 0;void 0===C&&(C="lowp");n(k,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:C},
{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:w},{type:"operator",data:";"}],"afterPrecision")}r.data=w}else"fragment"===l&&"gl_FragDepthEXT"===r.data&&(u||(u=p(k,v,"gl_FragDepth")),r.data=u);break;case "ident":if(0<=b.indexOf(r.data)){if(C="vertex"===l)a:{for(C=m-1;0<=C;C--){var y=k[C];if("whitespace"!==y.type&&"block-comment"!==y.type)if("keyword"===y.type){if("attribute"===y.data||"in"===y.data){C=!0;break a}}else break}C=!1}if(C)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
r.data in B||(B[r.data]=p(k,v,r.data));r.data=B[r.data]}}for(m=k.length-1;0<=m;--m)r=k[m],"preprocessor"===r.type&&((l=r.data.match(/#extension\s+(.*):/))&&l[1]&&0<=e.indexOf(l[1].trim())&&(l=k[m+1],k.splice(m,l&&"whitespace"===l.type?2:1)),(l=r.data.match(/#ifdef\s+(.*)/))&&l[1]&&0<=e.indexOf(l[1].trim())&&(r.data="#if 1"),(l=r.data.match(/#ifndef\s+(.*)/))&&l[1]&&0<=e.indexOf(l[1].trim())&&(r.data="#if 0"));return g(k)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require",
"exports"],function(A,h){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(A){"use strict;";return function(h){var b=A(),d=[];d=d.concat(b(h));return d=d.concat(b(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(A,h,b){"use strict;";var d="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function g(D){D.length&&
y.push({type:d[v],data:D,position:f,line:a,column:c})}function p(){C=C.length?[]:C;if("/"===B&&"*"===w)return f=u+r-1,v=0,B=w,r+1;if("/"===B&&"/"===w)return f=u+r-1,v=1,B=w,r+1;if("#"===w)return v=2,f=u+r,r;if(/\s/.test(w))return v=9,f=u+r,r;q=/\d/.test(w);t=/[^\w_]/.test(w);f=u+r;v=q?4:t?3:9999;return r}function n(){if(("\r"===w||"\n"===w)&&"\\"!==B)return g(C.join("")),v=999,r;C.push(w);B=w;return r+1}function e(){if("."===B&&/\d/.test(w))return v=5,r;if("/"===B&&"*"===w)return v=0,r;if("/"===B&&
"/"===w)return v=1,r;if("."===w&&C.length){for(;k(C););v=5;return r}if(";"===w||")"===w||"("===w){if(C.length)for(;k(C););g(w);v=999;return r+1}var D=2===C.length&&"\x3d"!==w;if(/[\w_\d\s]/.test(w)||D){for(;k(C););v=999;return r}C.push(w);B=w;return r+1}function k(D){var F=0;do{var G=h.indexOf(D.slice(0,D.length+F).join(""));var E=h[G];if(-1===G){if(0<F--+D.length)continue;E=D.slice(0,1).join("")}g(E);f+=E.length;C=C.slice(E.length);return C.length}while(1)}function l(){if("."===w||/[eE]/.test(w))return C.push(w),
v=5,B=w,r+1;if("x"===w&&1===C.length&&"0"===C[0])return v=11,C.push(w),B=w,r+1;if(/[^\d]/.test(w))return g(C.join("")),v=999,r;C.push(w);B=w;return r+1}function m(){"f"===w&&(C.push(w),B=w,r+=1);if(/[eE]/.test(w)||"-"===w&&/[eE]/.test(B))return C.push(w),B=w,r+1;if(/[^\d]/.test(w))return g(C.join("")),v=999,r;C.push(w);B=w;return r+1}var r=0,u=0,v=999,w,B,C=[],y=[],a=1,c=0,f=0,q=!1,t=!1,x="",z;return function(D){y=[];if(null!==D){D=D.replace?D.replace(/\r\n/g,"\n"):D;r=0;x+=D;for(z=x.length;w=x[r],
r<z;){D=r;switch(v){case 0:"/"===w&&"*"===B?(C.push(w),g(C.join("")),v=999):(C.push(w),B=w);r+=1;break;case 1:r=n();break;case 2:r=n();break;case 3:r=e();break;case 4:r=l();break;case 11:/[^a-fA-F0-9]/.test(w)?(g(C.join("")),v=999):(C.push(w),B=w,r+=1);break;case 5:r=m();break;case 9999:if(/[^\d\w_]/.test(w)){var F=C.join("");v=-1<A.indexOf(F)?8:-1<b.indexOf(F)?7:6;g(C.join(""));v=999}else C.push(w),B=w,r+=1;break;case 9:/[^\s]/g.test(w)?(g(C.join("")),v=999):(C.push(w),B=w,r+=1);break;case 999:r=
p()}if(D!==r)switch(x[D]){case "\n":c=0;++a;break;default:++c}}u+=r;x=x.slice(r);return y}C.length&&g(C.join(""));v=10;g("(eof)");return y}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(A,h,b,d){return function(){function g(p,n,e,k,l){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=p;this._layout=e;this._buffers=k;this._locations=n;l&&(this._indexBuffer=l);this._id=g._nextId++;b("esri-webgl-debug")&&p.instanceCounter.incrementCount(2)}Object.defineProperty(g.prototype,"id",
{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{get:function(){var p=this;return Object.keys(this._buffers).reduce(function(n,
e){return n+p._buffers[e].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.dispose=function(p){void 0===p&&(p=!0);if(this._context){var n=this._context.capabilities.vao;n&&this._glName&&(n.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(p){for(var e in this._buffers)this._buffers[e].dispose(),delete this._buffers[e];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};g.prototype.initialize=function(){if(!this._initialized){var p=this._context.capabilities.vao;if(p){var n=p.createVertexArray();p.bindVertexArray(n);this._bindLayout();p.bindVertexArray(null);
this._glName=n}this._initialized=!0}};g.prototype.bind=function(){this.initialize();var p=this._context.capabilities.vao;p?p.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};g.prototype._bindLayout=function(){var p=this._buffers,n=!!this._context.capabilities.vao,e=this._layout,k=this._indexBuffer;p||console.error("Vertex buffer dictionary is empty!");var l=this._context.gl,m;for(m in p){var r=p[m];r||console.error("Vertex buffer is uninitialized!");var u=e[m];u||console.error("Vertex element descriptor is empty!");
d.bindVertexBufferLayout(this._context,this._locations,r,u)}k&&(n?l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,k.glName):this._context.bindBuffer(k))};g.prototype.unbind=function(){this.initialize();var p=this._context.capabilities.vao;p?p.bindVertexArray(null):this._unbindLayout()};g.prototype._unbindLayout=function(){var p=this._buffers,n=this._layout;p||console.error("Vertex buffer dictionary is empty!");for(var e in p){var k=p[e];k||console.error("Vertex buffer is uninitialized!");d.unbindVertexBufferLayout(this._context,
this._locations,k,n[e])}(p=this._indexBuffer)&&this._context.unbindBuffer(p.bufferType)};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],function(A,h,b,d){return function(){function g(){}g.vertexCount=function(p,n){return p.vertexBuffers[n].size/g.getStride(p.layout[n])};g.getStride=function(p){return p[0].stride};g.getBytesPerElement=function(p){switch(p){case 5126:return 4;case 5124:return 4;
case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};g.addDescriptor=function(p,n,e,k,l,m){var r=g.getBytesPerElement(k);if(0<p.length){var u=p[0].stride,v=u+r*e;p.forEach(function(w){return w.stride=v});p.push({name:n,count:e,type:k,offset:u,stride:v,normalized:l,divisor:m})}else p.push({name:n,count:e,type:k,offset:0,stride:r*e,normalized:l,divisor:m})};g.assertCompatibleVertexAttributeLocations=function(p,n){(p=
p.locations===n.locations)||console.error("VertexAttributeLocations are incompatible");return p};g.hasAttribute=function(p,n){for(var e=0;e<p.length;e++)if(p[e].name===n)return!0;return!1};g.findAttribute=function(p,n){for(var e=0;e<p.length;e++)if(p[e].name===n)return p[e];return null};g.copyFramebufferToTexture=function(p,n,e,k,l){void 0===l&&(l=0);var m=p.getBoundFramebufferObject(),r=p.getBoundTexture(0);p.bindFramebuffer(n);p.bindTexture(e,0);p.gl.copyTexImage2D(p.gl.TEXTURE_2D,l,e.descriptor.pixelFormat,
k[0],k[1],k[2],k[3],0);p.gl.flush();p.bindFramebuffer(m);p.bindTexture(r,0)};g.assert=function(p,n){if(!p)throw new d(n);};g.setBaseInstanceOffset=function(p,n){var e={},k;for(k in p)e[k]=p[k].map(function(l){return l.divisor?b({},l,{baseInstance:n}):l});return e};g.bindVertexBufferLayout=function(p,n,e,k,l){var m=p.gl,r=p.capabilities.instancing;p.bindBuffer(e);k.forEach(function(u){var v=n[u.name],w=(l?l:0+u.baseInstance?u.baseInstance:0)*u.stride;void 0===v&&console.error("There is no location for vertex attribute '"+
u.name+"' defined.");u.baseInstance&&!u.divisor&&console.error("Vertex attribute '"+u.name+"' uses baseInstanceOffset without divisor.");if(4>=u.count)m.vertexAttribPointer(v,u.count,u.type,u.normalized,u.stride,u.offset+w),m.enableVertexAttribArray(v),u.divisor&&0<u.divisor&&r&&r.vertexAttribDivisor(v,u.divisor);else if(9===u.count)for(var B=0;3>B;B++)m.vertexAttribPointer(v+B,3,u.type,u.normalized,u.stride,u.offset+12*B+w),m.enableVertexAttribArray(v+B),u.divisor&&0<u.divisor&&r&&r.vertexAttribDivisor(v+
B,u.divisor);else if(16===u.count)for(B=0;4>B;B++)m.vertexAttribPointer(v+B,4,u.type,u.normalized,u.stride,u.offset+16*B+w),m.enableVertexAttribArray(v+B),u.divisor&&0<u.divisor&&r&&r.vertexAttribDivisor(v+B,u.divisor);else console.error("Unsupported vertex attribute element count: "+u.count)})};g.unbindVertexBufferLayout=function(p,n,e,k){var l=p.gl;p.bindBuffer(e);k.forEach(function(m){var r=n[m.name];if(4>=m.count)l.disableVertexAttribArray(r);else if(9===m.count)for(m=0;3>m;m++)l.disableVertexAttribArray(r+
m);else if(16===m.count)for(m=0;4>m;m++)l.disableVertexAttribArray(r+m);else console.error("Unsupported vertex attribute element count: "+m.count)});p.unbindBuffer(34962)};return g}()})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(A){for(var h,b=1,d=arguments.length;b<d;b++){h=arguments[b];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(A[g]=h[g])}return A}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require",
"exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});(function(b){b[b.FILL=0]="FILL";b[b.LINE=1]="LINE";b[b.MARKER=2]="MARKER";b[b.TEXT=3]="TEXT";b[b.LABEL=4]="LABEL";b[b.NONE=5]="NONE";b[b.UNKNOWN=6]="UNKNOWN";b[b.COUNT=7]="COUNT"})(h.WGLGeometryType||(h.WGLGeometryType={}));(function(b){b[b.SUCCEEDED=0]="SUCCEEDED";b[b.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(h.WGLGeometryTransactionStatus||(h.WGLGeometryTransactionStatus={}));(function(b){b[b.NONE=0]="NONE";b[b.FILL=
1]="FILL";b[b.LINE=2]="LINE";b[b.MARKER=4]="MARKER";b[b.TEXT=8]="TEXT";b[b.LABEL=16]="LABEL";b[b.LABEL_ALPHA=32]="LABEL_ALPHA";b[b.HITTEST=64]="HITTEST";b[b.HIGHLIGHT=128]="HIGHLIGHT";b[b.CLIP=256]="CLIP";b[b.DEBUG=512]="DEBUG";b[b.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(h.WGLDrawPhase||(h.WGLDrawPhase={}));(function(b){b[b.SIZE=0]="SIZE";b[b.COLOR=1]="COLOR";b[b.OPACITY=2]="OPACITY";b[b.ROTATION=3]="ROTATION"})(h.VVType||(h.VVType={}));(function(b){b[b.NONE=0]="NONE";b[b.OPACITY=1]="OPACITY";b[b.COLOR=
2]="COLOR";b[b.ROTATION=4]="ROTATION";b[b.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";b[b.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";b[b.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";b[b.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(h.WGLVVFlag||(h.WGLVVFlag={}));(function(b){b[b.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";b[b.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";b[b.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";b[b.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(h.WGLVVTarget||(h.WGLVVTarget=
{}));(function(b){b[b.UNKNOWN=0]="UNKNOWN";b[b.BUTT=1]="BUTT";b[b.ROUND=2]="ROUND";b[b.SQUARE=3]="SQUARE"})(h.CapType||(h.CapType={}));(function(b){b[b.UNKNOWN=0]="UNKNOWN";b[b.MITER=1]="MITER";b[b.BEVEL=2]="BEVEL";b[b.ROUND=3]="ROUND"})(h.JoinType||(h.JoinType={}));(function(b){b.SIMPLE_MARKER="esriSMS";b.SIMPLE_LINE="esriSLS";b.SIMPLE_FILL="esriSFS";b.PICTURE_MARKER="esriPMS";b.PICTURE_FILL="esriPFS";b.TEXT="esriTS"})(h.EsriSymbolType||(h.EsriSymbolType={}));(function(b){b.SIMPLE_MARKER="simple-marker";
b.SIMPLE_LINE="simple-line";b.SIMPLE_FILL="simple-fill";b.PICTURE_MARKER="picture-marker";b.PICTURE_FILL="picture-fill";b.TEXT="text"})(h.EsriSymbolTypeKebab||(h.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function f(){this._initialized=!1}f.prototype.registerPass=function(q,t){this._initialize();for(var x=0;x<t.length;x++)this._passMap.set(t[x],q);return this};f.prototype.getPaintPassTs=function(q){this._initialize();return this._passMap.has(q)?[this._passMap.get(q)]:[]};f.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return f}();h.WGLPainterOptions=
A;var a=new Uint8Array(4*k.C_HITTEST_SEARCH_SIZE*k.C_HITTEST_SEARCH_SIZE),c=new Uint32Array(a.buffer);A=function(){function f(){this._hlPainter=new C;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new e}f.allGeometryPhases=function(){return[p.WGLDrawPhase.FILL,
p.WGLDrawPhase.LINE,p.WGLDrawPhase.MARKER,p.WGLDrawPhase.TEXT]};f.toWGLDrawPhases=function(q){for(var t=[],x,z=0;z<p.WGLDrawPhase.NUM_DRAW_PHASES;z++)x=1<<z,x&q&&t.push(x);return t};Object.defineProperty(f.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});f.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(q){return q.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(q){return q.forEach(function(t){return t.dispose()})}),this._brushes.clear())};f.prototype.initialize=function(q){this.materialManager.initialize(q)};f.prototype.update=function(q,t){this._state=q;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/q.width,this._extrudeScaleVector[1]=-2/q.height,g.identity(this._extrudeMatrix),g.rotate(this._extrudeMatrix,this._extrudeMatrix,-q.rotation*n.C_DEG_TO_RAD,this._extrudeRotateVector),g.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),g.transpose(this._extrudeMatrix,this._extrudeMatrix),g.identity(this._extrudeNoRotationMatrix),g.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),g.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};f.prototype.getBrushes=function(q){if(!this._brushes){var t=new r.default,x=new w.default,z=new v.default,D=new B.default,F=new u.default,G=new l.default,E=new m.default;this._brushes=new Map;this._brushes.set(p.WGLDrawPhase.FILL,[t]);this._brushes.set(p.WGLDrawPhase.MARKER,
[x]);this._brushes.set(p.WGLDrawPhase.LINE,[z]);this._brushes.set(p.WGLDrawPhase.TEXT,[D]);this._brushes.set(p.WGLDrawPhase.LABEL,[F]);this._brushes.set(p.WGLDrawPhase.LABEL_ALPHA,[F]);this._brushes.set(p.WGLDrawPhase.HITTEST,[t,x,z,D]);this._brushes.set(p.WGLDrawPhase.HIGHLIGHT,[t,x,z,D]);this._brushes.set(p.WGLDrawPhase.CLIP,[E]);this._brushes.set(p.WGLDrawPhase.DEBUG,[G])}if(!this._brushes.has(q))throw Error("WGLPainter: Tried to get brush for unknown phase: "+q);return this._brushes.get(q)};f.prototype.bindTextureManager=
function(q){this.textureManager=q};f.prototype.draw=function(q,t,x,z){x[0]===p.WGLDrawPhase.LABEL_ALPHA&&x[0]===p.WGLDrawPhase.LABEL||this._drawClippingRects(q,t);var D=q.context;D.setBlendingEnabled(!0);D.setStencilWriteMask(0);D.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(q,t,x,z);this._debugTiles(q,t)};f.prototype.setHighlightOptions=function(q){this._hlPainter.setHighlightOptions(q)};f.prototype.highlight=function(q,t){var x=q.context,z=x.getViewport();this._hlPainter.setup(x,z.width,
z.height);this._hlPainter.startMaskDraw(x);this._drawClippingRects(q,t);x.setBlendingEnabled(!0);x.setStencilWriteMask(0);x.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(q,t,[p.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(x)};f.prototype.hitTest=function(q,t){var x=k.C_HITTEST_SEARCH_SIZE,z=[0,0],D=[0,0],F=q.state;F.toMap(z,[0,0]);F.toMap(D,[x,x]);if(0===t.filter(function(K){return!(z[0]>K.bounds[2]||D[0]<K.bounds[0]||z[1]<K.bounds[1]||D[1]>K.bounds[3])}).length)return[];F=q.context;this._hittestFBO||
(this._hittestFBO=y.create(F,{colorTarget:0,depthStencilTarget:3,width:x,height:x}));var G=F.getViewport(),E=F.getBoundFramebufferObject();F.bindFramebuffer(this._hittestFBO);F.setViewport(0,0,x,x);this._drawClippingRects(q,t);var H=F.gl;F.setClearColor(1,1,1,1);F.clear(H.COLOR_BUFFER_BIT);F.setBlendingEnabled(!1);F.setStencilWriteMask(0);this._drawPhases(q,t,[p.WGLDrawPhase.HITTEST]);F.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,x,x,6408,5121,a);q=x*x;t=new Set;for(x=0;x<q;x++)H=c[x],
4294967295!==H&&t.add(H);F.bindFramebuffer(E);F.setViewport(G.x,G.y,G.width,G.height);var O=[];t.forEach(function(K){O.push(K)});return O};f.prototype._getPaintPass=function(q){this._passes||(this._passes=new Map);if(!this._passes.has(q))try{this._passes.set(q,new q)}catch(t){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+q+",\n"+t);}return this._passes.get(q)};f.prototype._getPaintPasses=function(q,t){var x=this;return t.getPaintPassTs(q).map(function(z){return x._getPaintPass(z)})};
f.prototype._drawPhases=function(q,t,x,z){q.context.setStencilTestEnabled(!0);for(var D=0;D<x.length;D++){var F=x[D],G=z?this._getPaintPasses(F,z):[];F=b({},q,{drawPhase:F});G.forEach(function(O){return O.preRender(q,q.rendererInfo)});for(var E=0,H=t;E<H.length;E++)H[E].doRender(F);G.reverse().forEach(function(O){return O.postRender(q,q.rendererInfo)})}q.context.setStencilTestEnabled(!1)};f.prototype._debugTiles=function(q,t){d("esri-feature-tiles-debug")&&this._drawPhases(q,t,[p.WGLDrawPhase.DEBUG])};
f.prototype._drawClippingRects=function(q,t){if(0!==t.length){var x=q.context;x.setDepthWriteEnabled(!1);x.setDepthTestEnabled(!1);x.setStencilTestEnabled(!0);x.setBlendingEnabled(!1);x.setColorMask(!1,!1,!1,!1);x.setStencilOp(7680,7680,7681);x.setClearStencil(0);x.clear(x.gl.STENCIL_BUFFER_BIT);x.setStencilWriteMask(255);x=0;for(var z=t.length;x<t.length;x++,z--){var D=t[x];D.attached&&(D.stencilRef=z)}this._drawPhases(q,t,[p.WGLDrawPhase.CLIP]);q.context.setColorMask(!0,!0,!0,!0)}};return f}();
h.default=A})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(A){var h={scalar:{},SIMD:{},create:function(){var b=new A.ARRAY_TYPE(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},clone:function(b){var d=new A.ARRAY_TYPE(16);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];d[6]=b[6];d[7]=b[7];d[8]=b[8];d[9]=b[9];d[10]=b[10];d[11]=b[11];d[12]=b[12];d[13]=b[13];d[14]=
b[14];d[15]=b[15];return d},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=d[6];b[7]=d[7];b[8]=d[8];b[9]=d[9];b[10]=d[10];b[11]=d[11];b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15];return b},fromValues:function(b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y){var a=new A.ARRAY_TYPE(16);a[0]=b;a[1]=d;a[2]=g;a[3]=p;a[4]=n;a[5]=e;a[6]=k;a[7]=l;a[8]=m;a[9]=r;a[10]=u;a[11]=v;a[12]=w;a[13]=B;a[14]=C;a[15]=y;return a},set:function(b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a){b[0]=d;b[1]=g;b[2]=
p;b[3]=n;b[4]=e;b[5]=k;b[6]=l;b[7]=m;b[8]=r;b[9]=u;b[10]=v;b[11]=w;b[12]=B;b[13]=C;b[14]=y;b[15]=a;return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}};h.scalar.transpose=function(b,d){if(b===d){var g=d[1],p=d[2],n=d[3],e=d[6],k=d[7],l=d[11];b[1]=d[4];b[2]=d[8];b[3]=d[12];b[4]=g;b[6]=d[9];b[7]=d[13];b[8]=p;b[9]=e;b[11]=d[14];b[12]=n;b[13]=k;b[14]=l}else b[0]=d[0],b[1]=d[4],b[2]=d[8],b[3]=d[12],
b[4]=d[1],b[5]=d[5],b[6]=d[9],b[7]=d[13],b[8]=d[2],b[9]=d[6],b[10]=d[10],b[11]=d[14],b[12]=d[3],b[13]=d[7],b[14]=d[11],b[15]=d[15];return b};h.SIMD.transpose=function(b,d){var g=SIMD.Float32x4.load(d,0);var p=SIMD.Float32x4.load(d,4);var n=SIMD.Float32x4.load(d,8);d=SIMD.Float32x4.load(d,12);var e=SIMD.Float32x4.shuffle(g,p,0,1,4,5);var k=SIMD.Float32x4.shuffle(n,d,0,1,4,5);var l=SIMD.Float32x4.shuffle(e,k,0,2,4,6);e=SIMD.Float32x4.shuffle(e,k,1,3,5,7);SIMD.Float32x4.store(b,0,l);SIMD.Float32x4.store(b,
4,e);e=SIMD.Float32x4.shuffle(g,p,2,3,6,7);k=SIMD.Float32x4.shuffle(n,d,2,3,6,7);g=SIMD.Float32x4.shuffle(e,k,0,2,4,6);p=SIMD.Float32x4.shuffle(e,k,1,3,5,7);SIMD.Float32x4.store(b,8,g);SIMD.Float32x4.store(b,12,p);return b};h.transpose=A.USE_SIMD?h.SIMD.transpose:h.scalar.transpose;h.scalar.invert=function(b,d){var g=d[0],p=d[1],n=d[2],e=d[3],k=d[4],l=d[5],m=d[6],r=d[7],u=d[8],v=d[9],w=d[10],B=d[11],C=d[12],y=d[13],a=d[14];d=d[15];var c=g*l-p*k,f=g*m-n*k,q=g*r-e*k,t=p*m-n*l,x=p*r-e*l,z=n*r-e*m,D=
u*y-v*C,F=u*a-w*C,G=u*d-B*C,E=v*a-w*y,H=v*d-B*y,O=w*d-B*a,K=c*O-f*H+q*E+t*G-x*F+z*D;if(!K)return null;K=1/K;b[0]=(l*O-m*H+r*E)*K;b[1]=(n*H-p*O-e*E)*K;b[2]=(y*z-a*x+d*t)*K;b[3]=(w*x-v*z-B*t)*K;b[4]=(m*G-k*O-r*F)*K;b[5]=(g*O-n*G+e*F)*K;b[6]=(a*q-C*z-d*f)*K;b[7]=(u*z-w*q+B*f)*K;b[8]=(k*H-l*G+r*D)*K;b[9]=(p*G-g*H-e*D)*K;b[10]=(C*x-y*q+d*c)*K;b[11]=(v*q-u*x-B*c)*K;b[12]=(l*F-k*E-m*D)*K;b[13]=(g*E-p*F+n*D)*K;b[14]=(y*f-C*t-a*c)*K;b[15]=(u*t-v*f+w*c)*K;return b};h.SIMD.invert=function(b,d){var g=SIMD.Float32x4.load(d,
0);var p=SIMD.Float32x4.load(d,4);var n=SIMD.Float32x4.load(d,8);var e=SIMD.Float32x4.load(d,12);d=SIMD.Float32x4.shuffle(g,p,0,1,4,5);var k=SIMD.Float32x4.shuffle(n,e,0,1,4,5);var l=SIMD.Float32x4.shuffle(d,k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,d,1,3,5,7);d=SIMD.Float32x4.shuffle(g,p,2,3,6,7);var m=SIMD.Float32x4.shuffle(n,e,2,3,6,7);var r=SIMD.Float32x4.shuffle(d,m,0,2,4,6);m=SIMD.Float32x4.shuffle(m,d,1,3,5,7);d=SIMD.Float32x4.mul(r,m);d=SIMD.Float32x4.swizzle(d,1,0,3,2);g=SIMD.Float32x4.mul(k,
d);p=SIMD.Float32x4.mul(l,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,d),g);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,d),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);d=SIMD.Float32x4.mul(k,r);d=SIMD.Float32x4.swizzle(d,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,d),g);e=SIMD.Float32x4.mul(l,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(m,d));e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,d),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);
d=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,3,0,1),m);d=SIMD.Float32x4.swizzle(d,1,0,3,2);r=SIMD.Float32x4.swizzle(r,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,d),g);n=SIMD.Float32x4.mul(l,d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(r,d));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,d),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);d=SIMD.Float32x4.mul(l,k);d=SIMD.Float32x4.swizzle(d,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,d),n);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,
d),e);d=SIMD.Float32x4.swizzle(d,2,3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,d),n);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(r,d));d=SIMD.Float32x4.mul(l,m);d=SIMD.Float32x4.swizzle(d,1,0,3,2);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(r,d));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,d),n);d=SIMD.Float32x4.swizzle(d,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,d),p);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(k,d));d=SIMD.Float32x4.mul(l,r);d=SIMD.Float32x4.swizzle(d,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,
d),p);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(k,d));d=SIMD.Float32x4.swizzle(d,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(m,d));e=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,d),e);l=SIMD.Float32x4.mul(l,g);l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,2,3,0,1),l);l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,1,0,3,2),l);d=SIMD.Float32x4.reciprocalApproximation(l);l=SIMD.Float32x4.sub(SIMD.Float32x4.add(d,d),SIMD.Float32x4.mul(l,SIMD.Float32x4.mul(d,d)));l=SIMD.Float32x4.swizzle(l,0,0,0,0);if(!l)return null;
SIMD.Float32x4.store(b,0,SIMD.Float32x4.mul(l,g));SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(l,p));SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(l,n));SIMD.Float32x4.store(b,12,SIMD.Float32x4.mul(l,e));return b};h.invert=A.USE_SIMD?h.SIMD.invert:h.scalar.invert;h.scalar.adjoint=function(b,d){var g=d[0],p=d[1],n=d[2],e=d[3],k=d[4],l=d[5],m=d[6],r=d[7],u=d[8],v=d[9],w=d[10],B=d[11],C=d[12],y=d[13],a=d[14];d=d[15];b[0]=l*(w*d-B*a)-v*(m*d-r*a)+y*(m*B-r*w);b[1]=-(p*(w*d-B*a)-v*(n*d-e*a)+y*(n*B-e*w));b[2]=
p*(m*d-r*a)-l*(n*d-e*a)+y*(n*r-e*m);b[3]=-(p*(m*B-r*w)-l*(n*B-e*w)+v*(n*r-e*m));b[4]=-(k*(w*d-B*a)-u*(m*d-r*a)+C*(m*B-r*w));b[5]=g*(w*d-B*a)-u*(n*d-e*a)+C*(n*B-e*w);b[6]=-(g*(m*d-r*a)-k*(n*d-e*a)+C*(n*r-e*m));b[7]=g*(m*B-r*w)-k*(n*B-e*w)+u*(n*r-e*m);b[8]=k*(v*d-B*y)-u*(l*d-r*y)+C*(l*B-r*v);b[9]=-(g*(v*d-B*y)-u*(p*d-e*y)+C*(p*B-e*v));b[10]=g*(l*d-r*y)-k*(p*d-e*y)+C*(p*r-e*l);b[11]=-(g*(l*B-r*v)-k*(p*B-e*v)+u*(p*r-e*l));b[12]=-(k*(v*a-w*y)-u*(l*a-m*y)+C*(l*w-m*v));b[13]=g*(v*a-w*y)-u*(p*a-n*y)+C*(p*
w-n*v);b[14]=-(g*(l*a-m*y)-k*(p*a-n*y)+C*(p*m-n*l));b[15]=g*(l*w-m*v)-k*(p*w-n*v)+u*(p*m-n*l);return b};h.SIMD.adjoint=function(b,d){var g=SIMD.Float32x4.load(d,0);var p=SIMD.Float32x4.load(d,4);var n=SIMD.Float32x4.load(d,8);var e=SIMD.Float32x4.load(d,12);var k=SIMD.Float32x4.shuffle(g,p,0,1,4,5);var l=SIMD.Float32x4.shuffle(n,e,0,1,4,5);d=SIMD.Float32x4.shuffle(k,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,k,1,3,5,7);k=SIMD.Float32x4.shuffle(g,p,2,3,6,7);p=SIMD.Float32x4.shuffle(n,e,2,3,6,7);g=SIMD.Float32x4.shuffle(k,
p,0,2,4,6);p=SIMD.Float32x4.shuffle(p,k,1,3,5,7);k=SIMD.Float32x4.mul(g,p);k=SIMD.Float32x4.swizzle(k,1,0,3,2);n=SIMD.Float32x4.mul(l,k);e=SIMD.Float32x4.mul(d,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,k),n);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,k),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);k=SIMD.Float32x4.mul(l,g);k=SIMD.Float32x4.swizzle(k,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,k),n);var m=SIMD.Float32x4.mul(d,k);k=SIMD.Float32x4.swizzle(k,2,3,
0,1);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(p,k));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,k),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),p);k=SIMD.Float32x4.swizzle(k,1,0,3,2);g=SIMD.Float32x4.swizzle(g,2,3,0,1);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,k),n);var r=SIMD.Float32x4.mul(d,k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(g,k));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,k),r);r=SIMD.Float32x4.swizzle(r,
2,3,0,1);k=SIMD.Float32x4.mul(d,l);k=SIMD.Float32x4.swizzle(k,1,0,3,2);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,k),r);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),m);k=SIMD.Float32x4.swizzle(k,2,3,0,1);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,k),r);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(g,k));k=SIMD.Float32x4.mul(d,p);k=SIMD.Float32x4.swizzle(k,1,0,3,2);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(g,k));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,k),r);k=SIMD.Float32x4.swizzle(k,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,
k),e);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(l,k));k=SIMD.Float32x4.mul(d,g);k=SIMD.Float32x4.swizzle(k,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,k),e);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(l,k));k=SIMD.Float32x4.swizzle(k,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(p,k));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,k),m);SIMD.Float32x4.store(b,0,n);SIMD.Float32x4.store(b,4,e);SIMD.Float32x4.store(b,8,r);SIMD.Float32x4.store(b,12,m);return b};h.adjoint=A.USE_SIMD?h.SIMD.adjoint:
h.scalar.adjoint;h.determinant=function(b){var d=b[0],g=b[1],p=b[2],n=b[3],e=b[4],k=b[5],l=b[6],m=b[7],r=b[8],u=b[9],v=b[10],w=b[11],B=b[12],C=b[13],y=b[14];b=b[15];return(d*k-g*e)*(v*b-w*y)-(d*l-p*e)*(u*b-w*C)+(d*m-n*e)*(u*y-v*C)+(g*l-p*k)*(r*b-w*B)-(g*m-n*k)*(r*y-v*B)+(p*m-n*l)*(r*C-u*B)};h.SIMD.multiply=function(b,d,g){var p=SIMD.Float32x4.load(d,0),n=SIMD.Float32x4.load(d,4),e=SIMD.Float32x4.load(d,8);d=SIMD.Float32x4.load(d,12);var k=SIMD.Float32x4.load(g,0);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,
0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),d))));SIMD.Float32x4.store(b,0,k);k=SIMD.Float32x4.load(g,4);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),e),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),d))));SIMD.Float32x4.store(b,4,k);k=SIMD.Float32x4.load(g,8);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),d))));SIMD.Float32x4.store(b,8,k);g=SIMD.Float32x4.load(g,12);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,
0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),d))));SIMD.Float32x4.store(b,12,p);return b};h.scalar.multiply=function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=d[4],m=d[5],r=d[6],u=d[7],v=d[8],w=d[9],B=d[10],C=d[11],y=d[12],a=d[13],c=d[14];d=d[15];var f=g[0],q=g[1],t=g[2],x=g[3];b[0]=f*p+q*l+t*v+x*y;b[1]=f*n+q*m+t*w+x*a;b[2]=f*e+q*
r+t*B+x*c;b[3]=f*k+q*u+t*C+x*d;f=g[4];q=g[5];t=g[6];x=g[7];b[4]=f*p+q*l+t*v+x*y;b[5]=f*n+q*m+t*w+x*a;b[6]=f*e+q*r+t*B+x*c;b[7]=f*k+q*u+t*C+x*d;f=g[8];q=g[9];t=g[10];x=g[11];b[8]=f*p+q*l+t*v+x*y;b[9]=f*n+q*m+t*w+x*a;b[10]=f*e+q*r+t*B+x*c;b[11]=f*k+q*u+t*C+x*d;f=g[12];q=g[13];t=g[14];x=g[15];b[12]=f*p+q*l+t*v+x*y;b[13]=f*n+q*m+t*w+x*a;b[14]=f*e+q*r+t*B+x*c;b[15]=f*k+q*u+t*C+x*d;return b};h.multiply=A.USE_SIMD?h.SIMD.multiply:h.scalar.multiply;h.mul=h.multiply;h.scalar.translate=function(b,d,g){var p=
g[0],n=g[1];g=g[2];if(d===b)b[12]=d[0]*p+d[4]*n+d[8]*g+d[12],b[13]=d[1]*p+d[5]*n+d[9]*g+d[13],b[14]=d[2]*p+d[6]*n+d[10]*g+d[14],b[15]=d[3]*p+d[7]*n+d[11]*g+d[15];else{var e=d[0];var k=d[1];var l=d[2];var m=d[3];var r=d[4];var u=d[5];var v=d[6];var w=d[7];var B=d[8];var C=d[9];var y=d[10];var a=d[11];b[0]=e;b[1]=k;b[2]=l;b[3]=m;b[4]=r;b[5]=u;b[6]=v;b[7]=w;b[8]=B;b[9]=C;b[10]=y;b[11]=a;b[12]=e*p+r*n+B*g+d[12];b[13]=k*p+u*n+C*g+d[13];b[14]=l*p+v*n+y*g+d[14];b[15]=m*p+w*n+a*g+d[15]}return b};h.SIMD.translate=
function(b,d,g){var p=SIMD.Float32x4.load(d,0),n=SIMD.Float32x4.load(d,4),e=SIMD.Float32x4.load(d,8),k=SIMD.Float32x4.load(d,12);g=SIMD.Float32x4(g[0],g[1],g[2],0);d!==b&&(b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3],b[4]=d[4],b[5]=d[5],b[6]=d[6],b[7]=d[7],b[8]=d[8],b[9]=d[9],b[10]=d[10],b[11]=d[11]);p=SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,0,0,0,0));n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(g,1,1,1,1));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(g,2,2,2,2));d=SIMD.Float32x4.add(p,SIMD.Float32x4.add(n,
SIMD.Float32x4.add(e,k)));SIMD.Float32x4.store(b,12,d);return b};h.translate=A.USE_SIMD?h.SIMD.translate:h.scalar.translate;h.scalar.scale=function(b,d,g){var p=g[0],n=g[1];g=g[2];b[0]=d[0]*p;b[1]=d[1]*p;b[2]=d[2]*p;b[3]=d[3]*p;b[4]=d[4]*n;b[5]=d[5]*n;b[6]=d[6]*n;b[7]=d[7]*n;b[8]=d[8]*g;b[9]=d[9]*g;b[10]=d[10]*g;b[11]=d[11]*g;b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15];return b};h.SIMD.scale=function(b,d,g){g=SIMD.Float32x4(g[0],g[1],g[2],0);var p=SIMD.Float32x4.load(d,0);SIMD.Float32x4.store(b,
0,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,0,0,0,0)));p=SIMD.Float32x4.load(d,4);SIMD.Float32x4.store(b,4,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,1,1,1,1)));p=SIMD.Float32x4.load(d,8);SIMD.Float32x4.store(b,8,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(g,2,2,2,2)));b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15];return b};h.scale=A.USE_SIMD?h.SIMD.scale:h.scalar.scale;h.rotate=function(b,d,g,p){var n=p[0],e=p[1];p=p[2];var k=Math.sqrt(n*n+e*e+p*p);if(Math.abs(k)<A.EPSILON)return null;k=
1/k;n*=k;e*=k;p*=k;var l=Math.sin(g);var m=Math.cos(g);var r=1-m;g=d[0];k=d[1];var u=d[2];var v=d[3];var w=d[4];var B=d[5];var C=d[6];var y=d[7];var a=d[8];var c=d[9];var f=d[10];var q=d[11];var t=n*n*r+m;var x=e*n*r+p*l;var z=p*n*r-e*l;var D=n*e*r-p*l;var F=e*e*r+m;var G=p*e*r+n*l;var E=n*p*r+e*l;n=e*p*r-n*l;e=p*p*r+m;b[0]=g*t+w*x+a*z;b[1]=k*t+B*x+c*z;b[2]=u*t+C*x+f*z;b[3]=v*t+y*x+q*z;b[4]=g*D+w*F+a*G;b[5]=k*D+B*F+c*G;b[6]=u*D+C*F+f*G;b[7]=v*D+y*F+q*G;b[8]=g*E+w*n+a*e;b[9]=k*E+B*n+c*e;b[10]=u*E+
C*n+f*e;b[11]=v*E+y*n+q*e;d!==b&&(b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]);return b};h.scalar.rotateX=function(b,d,g){var p=Math.sin(g);g=Math.cos(g);var n=d[4],e=d[5],k=d[6],l=d[7],m=d[8],r=d[9],u=d[10],v=d[11];d!==b&&(b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3],b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]);b[4]=n*g+m*p;b[5]=e*g+r*p;b[6]=k*g+u*p;b[7]=l*g+v*p;b[8]=m*g-n*p;b[9]=r*g-e*p;b[10]=u*g-k*p;b[11]=v*g-l*p;return b};h.SIMD.rotateX=function(b,d,g){var p=SIMD.Float32x4.splat(Math.sin(g));
g=SIMD.Float32x4.splat(Math.cos(g));d!==b&&(b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3],b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]);var n=SIMD.Float32x4.load(d,4);d=SIMD.Float32x4.load(d,8);SIMD.Float32x4.store(b,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,g),SIMD.Float32x4.mul(d,p)));SIMD.Float32x4.store(b,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),SIMD.Float32x4.mul(n,p)));return b};h.rotateX=A.USE_SIMD?h.SIMD.rotateX:h.scalar.rotateX;h.scalar.rotateY=function(b,d,g){var p=Math.sin(g);g=Math.cos(g);
var n=d[0],e=d[1],k=d[2],l=d[3],m=d[8],r=d[9],u=d[10],v=d[11];d!==b&&(b[4]=d[4],b[5]=d[5],b[6]=d[6],b[7]=d[7],b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]);b[0]=n*g-m*p;b[1]=e*g-r*p;b[2]=k*g-u*p;b[3]=l*g-v*p;b[8]=n*p+m*g;b[9]=e*p+r*g;b[10]=k*p+u*g;b[11]=l*p+v*g;return b};h.SIMD.rotateY=function(b,d,g){var p=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));d!==b&&(b[4]=d[4],b[5]=d[5],b[6]=d[6],b[7]=d[7],b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]);var n=SIMD.Float32x4.load(d,
0);d=SIMD.Float32x4.load(d,8);SIMD.Float32x4.store(b,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,g),SIMD.Float32x4.mul(d,p)));SIMD.Float32x4.store(b,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),SIMD.Float32x4.mul(d,g)));return b};h.rotateY=A.USE_SIMD?h.SIMD.rotateY:h.scalar.rotateY;h.scalar.rotateZ=function(b,d,g){var p=Math.sin(g);g=Math.cos(g);var n=d[0],e=d[1],k=d[2],l=d[3],m=d[4],r=d[5],u=d[6],v=d[7];d!==b&&(b[8]=d[8],b[9]=d[9],b[10]=d[10],b[11]=d[11],b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]);
b[0]=n*g+m*p;b[1]=e*g+r*p;b[2]=k*g+u*p;b[3]=l*g+v*p;b[4]=m*g-n*p;b[5]=r*g-e*p;b[6]=u*g-k*p;b[7]=v*g-l*p;return b};h.SIMD.rotateZ=function(b,d,g){var p=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));d!==b&&(b[8]=d[8],b[9]=d[9],b[10]=d[10],b[11]=d[11],b[12]=d[12],b[13]=d[13],b[14]=d[14],b[15]=d[15]);var n=SIMD.Float32x4.load(d,0);d=SIMD.Float32x4.load(d,4);SIMD.Float32x4.store(b,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,g),SIMD.Float32x4.mul(d,p)));SIMD.Float32x4.store(b,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,
g),SIMD.Float32x4.mul(n,p)));return b};h.rotateZ=A.USE_SIMD?h.SIMD.rotateZ:h.scalar.rotateZ;h.fromTranslation=function(b,d){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=d[0];b[13]=d[1];b[14]=d[2];b[15]=1;return b};h.fromScaling=function(b,d){b[0]=d[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=d[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=d[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};h.fromRotation=function(b,d,g){var p=g[0],n=g[1];g=g[2];var e=Math.sqrt(p*p+
n*n+g*g);if(Math.abs(e)<A.EPSILON)return null;e=1/e;p*=e;n*=e;g*=e;e=Math.sin(d);d=Math.cos(d);var k=1-d;b[0]=p*p*k+d;b[1]=n*p*k+g*e;b[2]=g*p*k-n*e;b[3]=0;b[4]=p*n*k-g*e;b[5]=n*n*k+d;b[6]=g*n*k+p*e;b[7]=0;b[8]=p*g*k+n*e;b[9]=n*g*k-p*e;b[10]=g*g*k+d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};h.fromXRotation=function(b,d){var g=Math.sin(d);d=Math.cos(d);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=d;b[6]=g;b[7]=0;b[8]=0;b[9]=-g;b[10]=d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};h.fromYRotation=
function(b,d){var g=Math.sin(d);d=Math.cos(d);b[0]=d;b[1]=0;b[2]=-g;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=g;b[9]=0;b[10]=d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};h.fromZRotation=function(b,d){var g=Math.sin(d);d=Math.cos(d);b[0]=d;b[1]=g;b[2]=0;b[3]=0;b[4]=-g;b[5]=d;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};h.fromRotationTranslation=function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=p+p,m=n+n,r=e+e;d=p*l;var u=p*m;p*=r;var v=n*m;n*=r;e*=r;l*=
k;m*=k;k*=r;b[0]=1-(v+e);b[1]=u+k;b[2]=p-m;b[3]=0;b[4]=u-k;b[5]=1-(d+e);b[6]=n+l;b[7]=0;b[8]=p+m;b[9]=n-l;b[10]=1-(d+v);b[11]=0;b[12]=g[0];b[13]=g[1];b[14]=g[2];b[15]=1;return b};h.getTranslation=function(b,d){b[0]=d[12];b[1]=d[13];b[2]=d[14];return b};h.getRotation=function(b,d){var g=d[0]+d[5]+d[10],p=0;0<g?(p=2*Math.sqrt(g+1),b[3]=.25*p,b[0]=(d[6]-d[9])/p,b[1]=(d[8]-d[2])/p,b[2]=(d[1]-d[4])/p):d[0]>d[5]&d[0]>d[10]?(p=2*Math.sqrt(1+d[0]-d[5]-d[10]),b[3]=(d[6]-d[9])/p,b[0]=.25*p,b[1]=(d[1]+d[4])/
p,b[2]=(d[8]+d[2])/p):d[5]>d[10]?(p=2*Math.sqrt(1+d[5]-d[0]-d[10]),b[3]=(d[8]-d[2])/p,b[0]=(d[1]+d[4])/p,b[1]=.25*p,b[2]=(d[6]+d[9])/p):(p=2*Math.sqrt(1+d[10]-d[0]-d[5]),b[3]=(d[1]-d[4])/p,b[0]=(d[8]+d[2])/p,b[1]=(d[6]+d[9])/p,b[2]=.25*p);return b};h.fromRotationTranslationScale=function(b,d,g,p){var n=d[0],e=d[1],k=d[2],l=d[3],m=n+n,r=e+e,u=k+k;d=n*m;var v=n*r;n*=u;var w=e*r;e*=u;k*=u;m*=l;r*=l;l*=u;u=p[0];var B=p[1];p=p[2];b[0]=(1-(w+k))*u;b[1]=(v+l)*u;b[2]=(n-r)*u;b[3]=0;b[4]=(v-l)*B;b[5]=(1-(d+
k))*B;b[6]=(e+m)*B;b[7]=0;b[8]=(n+r)*p;b[9]=(e-m)*p;b[10]=(1-(d+w))*p;b[11]=0;b[12]=g[0];b[13]=g[1];b[14]=g[2];b[15]=1;return b};h.fromRotationTranslationScaleOrigin=function(b,d,g,p,n){var e=d[0],k=d[1],l=d[2],m=d[3],r=e+e,u=k+k,v=l+l;d=e*r;var w=e*u;e*=v;var B=k*u;k*=v;l*=v;r*=m;u*=m;m*=v;v=p[0];var C=p[1];p=p[2];var y=n[0],a=n[1];n=n[2];b[0]=(1-(B+l))*v;b[1]=(w+m)*v;b[2]=(e-u)*v;b[3]=0;b[4]=(w-m)*C;b[5]=(1-(d+l))*C;b[6]=(k+r)*C;b[7]=0;b[8]=(e+u)*p;b[9]=(k-r)*p;b[10]=(1-(d+B))*p;b[11]=0;b[12]=g[0]+
y-(b[0]*y+b[4]*a+b[8]*n);b[13]=g[1]+a-(b[1]*y+b[5]*a+b[9]*n);b[14]=g[2]+n-(b[2]*y+b[6]*a+b[10]*n);b[15]=1;return b};h.fromQuat=function(b,d){var g=d[0],p=d[1],n=d[2];d=d[3];var e=g+g,k=p+p,l=n+n;g*=e;var m=p*e;p*=k;var r=n*e,u=n*k;n*=l;e*=d;k*=d;d*=l;b[0]=1-p-n;b[1]=m+d;b[2]=r-k;b[3]=0;b[4]=m-d;b[5]=1-g-n;b[6]=u+e;b[7]=0;b[8]=r+k;b[9]=u-e;b[10]=1-g-p;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};h.frustum=function(b,d,g,p,n,e,k){var l=1/(g-d),m=1/(n-p),r=1/(e-k);b[0]=2*e*l;b[1]=0;b[2]=0;b[3]=
0;b[4]=0;b[5]=2*e*m;b[6]=0;b[7]=0;b[8]=(g+d)*l;b[9]=(n+p)*m;b[10]=(k+e)*r;b[11]=-1;b[12]=0;b[13]=0;b[14]=k*e*2*r;b[15]=0;return b};h.perspective=function(b,d,g,p,n){d=1/Math.tan(d/2);var e=1/(p-n);b[0]=d/g;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=d;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(n+p)*e;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*n*p*e;b[15]=0;return b};h.perspectiveFromFieldOfView=function(b,d,g,p){var n=Math.tan(d.upDegrees*Math.PI/180),e=Math.tan(d.downDegrees*Math.PI/180),k=Math.tan(d.leftDegrees*Math.PI/180);
d=Math.tan(d.rightDegrees*Math.PI/180);var l=2/(k+d),m=2/(n+e);b[0]=l;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=m;b[6]=0;b[7]=0;b[8]=-((k-d)*l*.5);b[9]=(n-e)*m*.5;b[10]=p/(g-p);b[11]=-1;b[12]=0;b[13]=0;b[14]=p*g/(g-p);b[15]=0;return b};h.ortho=function(b,d,g,p,n,e,k){var l=1/(d-g),m=1/(p-n),r=1/(e-k);b[0]=-2*l;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*m;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*r;b[11]=0;b[12]=(d+g)*l;b[13]=(n+p)*m;b[14]=(k+e)*r;b[15]=1;return b};h.lookAt=function(b,d,g,p){var n=d[0],e=d[1];d=d[2];var k=
p[0];var l=p[1];var m=p[2];var r=g[0];p=g[1];var u=g[2];if(Math.abs(n-r)<A.EPSILON&&Math.abs(e-p)<A.EPSILON&&Math.abs(d-u)<A.EPSILON)return h.identity(b);g=n-r;p=e-p;r=d-u;var v=1/Math.sqrt(g*g+p*p+r*r);g*=v;p*=v;r*=v;u=l*r-m*p;m=m*g-k*r;k=k*p-l*g;(v=Math.sqrt(u*u+m*m+k*k))?(v=1/v,u*=v,m*=v,k*=v):k=m=u=0;l=p*k-r*m;var w=r*u-g*k;var B=g*m-p*u;(v=Math.sqrt(l*l+w*w+B*B))?(v=1/v,l*=v,w*=v,B*=v):B=w=l=0;b[0]=u;b[1]=l;b[2]=g;b[3]=0;b[4]=m;b[5]=w;b[6]=p;b[7]=0;b[8]=k;b[9]=B;b[10]=r;b[11]=0;b[12]=-(u*n+m*
e+k*d);b[13]=-(l*n+w*e+B*d);b[14]=-(g*n+p*e+r*d);b[15]=1;return b};h.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};h.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],
2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};h.add=function(b,d,g){b[0]=d[0]+g[0];b[1]=d[1]+g[1];b[2]=d[2]+g[2];b[3]=d[3]+g[3];b[4]=d[4]+g[4];b[5]=d[5]+g[5];b[6]=d[6]+g[6];b[7]=d[7]+g[7];b[8]=d[8]+g[8];b[9]=d[9]+g[9];b[10]=d[10]+g[10];b[11]=d[11]+g[11];b[12]=d[12]+g[12];b[13]=d[13]+g[13];b[14]=d[14]+g[14];b[15]=d[15]+g[15];return b};h.subtract=function(b,d,g){b[0]=d[0]-g[0];b[1]=d[1]-g[1];b[2]=d[2]-g[2];b[3]=d[3]-g[3];b[4]=d[4]-g[4];b[5]=d[5]-g[5];b[6]=d[6]-g[6];b[7]=
d[7]-g[7];b[8]=d[8]-g[8];b[9]=d[9]-g[9];b[10]=d[10]-g[10];b[11]=d[11]-g[11];b[12]=d[12]-g[12];b[13]=d[13]-g[13];b[14]=d[14]-g[14];b[15]=d[15]-g[15];return b};h.sub=h.subtract;h.multiplyScalar=function(b,d,g){b[0]=d[0]*g;b[1]=d[1]*g;b[2]=d[2]*g;b[3]=d[3]*g;b[4]=d[4]*g;b[5]=d[5]*g;b[6]=d[6]*g;b[7]=d[7]*g;b[8]=d[8]*g;b[9]=d[9]*g;b[10]=d[10]*g;b[11]=d[11]*g;b[12]=d[12]*g;b[13]=d[13]*g;b[14]=d[14]*g;b[15]=d[15]*g;return b};h.multiplyScalarAndAdd=function(b,d,g,p){b[0]=d[0]+g[0]*p;b[1]=d[1]+g[1]*p;b[2]=
d[2]+g[2]*p;b[3]=d[3]+g[3]*p;b[4]=d[4]+g[4]*p;b[5]=d[5]+g[5]*p;b[6]=d[6]+g[6]*p;b[7]=d[7]+g[7]*p;b[8]=d[8]+g[8]*p;b[9]=d[9]+g[9]*p;b[10]=d[10]+g[10]*p;b[11]=d[11]+g[11]*p;b[12]=d[12]+g[12]*p;b[13]=d[13]+g[13]*p;b[14]=d[14]+g[14]*p;b[15]=d[15]+g[15]*p;return b};h.exactEquals=function(b,d){return b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]&&b[3]===d[3]&&b[4]===d[4]&&b[5]===d[5]&&b[6]===d[6]&&b[7]===d[7]&&b[8]===d[8]&&b[9]===d[9]&&b[10]===d[10]&&b[11]===d[11]&&b[12]===d[12]&&b[13]===d[13]&&b[14]===d[14]&&
b[15]===d[15]};h.equals=function(b,d){var g=b[0],p=b[1],n=b[2],e=b[3],k=b[4],l=b[5],m=b[6],r=b[7],u=b[8],v=b[9],w=b[10],B=b[11],C=b[12],y=b[13],a=b[14];b=b[15];var c=d[0],f=d[1],q=d[2],t=d[3],x=d[4],z=d[5],D=d[6],F=d[7],G=d[8],E=d[9],H=d[10],O=d[11],K=d[12],L=d[13],T=d[14];d=d[15];return Math.abs(g-c)<=A.EPSILON*Math.max(1,Math.abs(g),Math.abs(c))&&Math.abs(p-f)<=A.EPSILON*Math.max(1,Math.abs(p),Math.abs(f))&&Math.abs(n-q)<=A.EPSILON*Math.max(1,Math.abs(n),Math.abs(q))&&Math.abs(e-t)<=A.EPSILON*Math.max(1,
Math.abs(e),Math.abs(t))&&Math.abs(k-x)<=A.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))&&Math.abs(l-z)<=A.EPSILON*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(m-D)<=A.EPSILON*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(r-F)<=A.EPSILON*Math.max(1,Math.abs(r),Math.abs(F))&&Math.abs(u-G)<=A.EPSILON*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(v-E)<=A.EPSILON*Math.max(1,Math.abs(v),Math.abs(E))&&Math.abs(w-H)<=A.EPSILON*Math.max(1,Math.abs(w),Math.abs(H))&&Math.abs(B-O)<=A.EPSILON*Math.max(1,Math.abs(B),
Math.abs(O))&&Math.abs(C-K)<=A.EPSILON*Math.max(1,Math.abs(C),Math.abs(K))&&Math.abs(y-L)<=A.EPSILON*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(a-T)<=A.EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(b-d)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))};return h})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var A={EPSILON:1E-6};A.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;A.RANDOM=Math.random;A.ENABLE_SIMD=!1;A.SIMD_AVAILABLE=
A.ARRAY_TYPE===Float32Array&&"SIMD"in this;A.USE_SIMD=A.ENABLE_SIMD&&A.SIMD_AVAILABLE;A.setMatrixArrayType=function(b){A.ARRAY_TYPE=b};var h=Math.PI/180;A.toRadian=function(b){return b*h};A.equals=function(b,d){return Math.abs(b-d)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))};return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(A,h){function b(g,p){g%=p;return 0<=g?g:g+p}Object.defineProperty(h,"__esModule",{value:!0});h.C_INFINITY=
Number.POSITIVE_INFINITY;h.C_PI=Math.PI;h.C_2PI=2*h.C_PI;h.C_PI_BY_2=h.C_PI/2;h.C_RAD_TO_256=128/h.C_PI;h.C_256_TO_RAD=h.C_PI/128;h.C_DEG_TO_256=256/360;h.C_DEG_TO_RAD=h.C_PI/180;h.C_SQRT2=1.414213562;h.C_SQRT2_INV=1/h.C_SQRT2;var d=1/Math.LN2;h.positiveMod=b;h.radToByte=function(g){return b(g*h.C_RAD_TO_256,256)};h.degToByte=function(g){return b(g*h.C_DEG_TO_256,256)};h.log2=function(g){return Math.log(g)*d};h.sqr=function(g){return g*g};h.clamp=function(g,p,n){return Math.min(Math.max(g,p),n)};
h.interpolate=function(g,p,n){return g*(1-n)+p*n};h.between=function(g,p,n){return g>=p&&g<=n||g>=n&&g<=p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),function(A,h,b,d,g,p,n,e,k,l){return function(){function m(){this._programRep=
new Map;this.isInitialize=!1}m.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(r){return r.dispose()}),
this._programRep.clear())};m.prototype.initialize=function(r){if(!this.isInitialize){var u=new l("label",["labelVS","labelFS"],[],n,r);u.addDefine("ID","ID",[!0,!0],"ID");u.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");u.addDefine("SDF","SDF",[!1,!1],"SDF");u.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");u.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");u.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",
[!1,!1],"VV_SIZE_FIELD_STOPS");u.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");u.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");u.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");u.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");u.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");u.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");u.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var v=new l("text",["textVS",
"textFS"],[],k,r);v.addDefine("ID","ID",[!0,!0],"ID");v.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");v.addDefine("SDF","SDF",[!1,!1],"SDF");v.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");v.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");v.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");v.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");
v.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");v.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");v.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");v.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");v.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");v.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var w=new l("icon",["iconVS","iconFS"],[],p,r);w.addDefine("ID","ID",[!0,!0],"ID");w.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");w.addDefine("SDF",
"SDF",[!0,!0],"SDF");w.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");w.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");w.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");w.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");w.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");w.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");w.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");w.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");w.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");w.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var B=new l("fill",["fillVS","fillFS"],[],g,r);B.addDefine("ID","ID",[!0,!0],"ID");B.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");B.addDefine("SDF","SDF",[!1,!1],"SDF");B.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");B.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");B.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");B.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");B.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");B.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");B.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");B.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");B.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");B.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");r=new l("line",["lineVS","lineFS"],[],e,r);r.addDefine("ID","ID",[!0,!0],"ID");r.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");r.addDefine("SDF","SDF",[!0,!0],"SDF");r.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");r.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");r.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");
r.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");r.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");r.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");r.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");r.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");r.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");r.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=u;this._textShaderVariations=
v;this._fillShaderVariations=B;this._iconShaderVariations=w;this._lineShaderVariations=r;this.isInitialize=!0}};m.prototype.getProgram=function(r,u,v){r|=u===b.WGLDrawPhase.HITTEST?8:0;r|=u===b.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[r])return this._programRep[r];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;u=d.getMaterialVariations(r);switch(u.geometryType){case b.WGLGeometryType.MARKER:var w=this._iconShaderVariations.getProgram(u.variations,
null,null,v);break;case b.WGLGeometryType.TEXT:w=this._textShaderVariations.getProgram(u.variations,null,null,v);break;case b.WGLGeometryType.LABEL:w=this._labelShaderVariations.getProgram(u.variations,null,null,v);break;case b.WGLGeometryType.FILL:w=this._fillShaderVariations.getProgram(u.variations,null,null,v);break;case b.WGLGeometryType.LINE:w=this._lineShaderVariations.getProgram(u.variations,null,null,v)}w&&(this._programRep[r]=w);return w};return m}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require",
"exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(A,h,b,d,g){function p(e){var k=[];k[0]=e.sdf?!0:!1;k[1]=e.vvSizeMinMaxValue?!0:!1;k[2]=e.vvSizeScaleStops?!0:!1;k[3]=e.vvSizeFieldStops?!0:!1;k[4]=e.vvSizeUnitValue?!0:!1;k[5]=e.vvColor?!0:!1;k[6]=e.vvRotation?!0:!1;k[7]=e.vvOpacity?!0:!1;k[8]=e.visibility?!0:!1;k[9]=e.pattern?!0:!1;k[10]=e.heatmap?!0:!1;return k.reduce(function(l,m,r){m&&(l|=1<<r+2);return l},0)}function n(e){if(e.geometryType===b.WGLGeometryType.UNKNOWN)return-1;
var k=p(e)<<3;return e.geometryType+k}Object.defineProperty(h,"__esModule",{value:!0});h.createTextMaterialInfo=function(e,k,l){var m=new d.default,r=new g;r.geometryType=l;r.sdf=!0;r.pattern=!1;r.visibility=!1;r.heatmap=!1;m.texBindingInfo.push(new d.TexBindingInfo(2,e.page,"u_texture"));0===k?r.vvOpacity=r.vvSizeMinMaxValue=r.vvSizeScaleStops=r.vvSizeFieldStops=r.vvSizeUnitValue=r.vvColor=r.vvRotation=!1:(r.vvOpacity=0!==(k&b.WGLVVFlag.OPACITY),r.vvSizeMinMaxValue=0!==(k&b.WGLVVFlag.SIZE_MINMAX_VALUE),
r.vvSizeScaleStops=0!==(k&b.WGLVVFlag.SIZE_SCALE_STOPS),r.vvSizeFieldStops=0!==(k&b.WGLVVFlag.SIZE_FIELD_STOPS),r.vvSizeUnitValue=0!==(k&b.WGLVVFlag.SIZE_UNIT_VALUE),r.vvColor=0!==(k&b.WGLVVFlag.COLOR),r.vvRotation=0!==(k&b.WGLVVFlag.ROTATION));m.materialKey=n(r);m.materialKeyInfo=r;return m};h.createMaterialInfo=function(e,k,l){var m=new d.default,r=new g;r.geometryType=k;e?(e=e.spriteMosaicItem,r.sdf=e.sdf,r.pattern=!0,m.texBindingInfo.push(new d.TexBindingInfo(1,e.page,"u_texture"))):(r.sdf=!1,
r.pattern=!1);0===l?r.vvOpacity=r.vvSizeMinMaxValue=r.vvSizeScaleStops=r.vvSizeFieldStops=r.vvSizeUnitValue=r.vvColor=r.vvRotation=!1:(r.vvOpacity=0!==(l&b.WGLVVFlag.OPACITY),r.vvSizeMinMaxValue=0!==(l&b.WGLVVFlag.SIZE_MINMAX_VALUE),r.vvSizeScaleStops=0!==(l&b.WGLVVFlag.SIZE_SCALE_STOPS),r.vvSizeFieldStops=0!==(l&b.WGLVVFlag.SIZE_FIELD_STOPS),r.vvSizeUnitValue=0!==(l&b.WGLVVFlag.SIZE_UNIT_VALUE),r.vvColor=0!==(l&b.WGLVVFlag.COLOR),r.vvRotation=0!==(l&b.WGLVVFlag.ROTATION));r.visibility=!1;m.materialKey=
n(r);m.materialKeyInfo=r;return m};h.getMaterialKey=n;h.getMaterialVariations=function(e){var k=e&7;e>>=3;return{geometryType:k,variations:[0!==(e&1),0!==(e&2),0!==(e&4),0!==(e&8),0!==(e&16),0!==(e&32),0!==(e&64),0!==(e&128),0!==(e&256),0!==(e&512),0!==(e&1024),0!==(e&2048),0!==(e&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(A,h,b,d,g,p,n){Object.defineProperty(h,"__esModule",{value:!0});var e=function(){function l(m,r,u){this.unit=m;this.pageId=r;this.semantic=u}l.prototype.clone=function(){return new l(this.unit,this.pageId,this.semantic)};l.prototype.serialize=function(m){m.writeInt32(this.unit);m.writeInt32(this.pageId);return m};l.deserialize=function(m){var r=m.readInt32();m=m.readInt32();return new l(r,m,"u_texture")};return l}();h.TexBindingInfo=e;var k=function(){function l(m,r){this.name=m;this.value=
r}l.prototype.clone=function(){return new l(this.name,this.value)};l.prototype.serialize=function(m){m.writeInt32(this.value);return m};l.deserialize=function(m){m=m.readInt32();return new l("u_my_param",m)};return l}();h.MaterialParam=k;A=function(){function l(){this.texBindingInfo=[];this.materialParams=[]}l.fromSprite=function(m,r,u){var v=new l,w=new p;w.geometryType=r;m?(w.sdf=m.sdf,w.pattern=!0,v.texBindingInfo.push(new e(1,m.page,"u_texture"))):(w.sdf=!1,w.pattern=!1);0===u?w.vvOpacity=w.vvSizeMinMaxValue=
w.vvSizeScaleStops=w.vvSizeFieldStops=w.vvSizeUnitValue=w.vvColor=w.vvRotation=!1:(w.vvOpacity=0!==(u&b.WGLVVFlag.OPACITY),w.vvSizeMinMaxValue=0!==(u&b.WGLVVFlag.SIZE_MINMAX_VALUE),w.vvSizeScaleStops=0!==(u&b.WGLVVFlag.SIZE_SCALE_STOPS),w.vvSizeFieldStops=0!==(u&b.WGLVVFlag.SIZE_FIELD_STOPS),w.vvSizeUnitValue=0!==(u&b.WGLVVFlag.SIZE_UNIT_VALUE),w.vvColor=0!==(u&b.WGLVVFlag.COLOR),w.vvRotation=0!==(u&b.WGLVVFlag.ROTATION));w.visibility=!1;v.materialKey=d.getMaterialKey(w);v.materialKeyInfo=w;return v};
l.fromGlyph=function(m,r,u){var v=new l,w=new p;w.geometryType=r;w.sdf=!0;w.pattern=!1;w.visibility=!1;w.heatmap=!1;v.texBindingInfo.push(new e(2,m.page,"u_texture"));0===u?w.vvOpacity=w.vvSizeMinMaxValue=w.vvSizeScaleStops=w.vvSizeFieldStops=w.vvSizeUnitValue=w.vvColor=w.vvRotation=!1:(w.vvOpacity=0!==(u&b.WGLVVFlag.OPACITY),w.vvSizeMinMaxValue=0!==(u&b.WGLVVFlag.SIZE_MINMAX_VALUE),w.vvSizeScaleStops=0!==(u&b.WGLVVFlag.SIZE_SCALE_STOPS),w.vvSizeFieldStops=0!==(u&b.WGLVVFlag.SIZE_FIELD_STOPS),w.vvSizeUnitValue=
0!==(u&b.WGLVVFlag.SIZE_UNIT_VALUE),w.vvColor=0!==(u&b.WGLVVFlag.COLOR),w.vvRotation=0!==(u&b.WGLVVFlag.ROTATION));v.materialKey=d.getMaterialKey(w);v.materialKeyInfo=w;return v};l.prototype.copy=function(m){this.materialParams=m.materialParams.map(function(r){return r.clone()});this.texBindingInfo=m.texBindingInfo.map(function(r){return r.clone()});m.materialKeyInfo&&(this.materialKeyInfo=new p,this.materialKeyInfo.copy(m.materialKeyInfo));this.materialKey=m.materialKey};l.prototype.serialize=function(m){m.writeInt32(this.materialKey);
n.serializeList(m,this.texBindingInfo);n.serializeList(m,this.materialParams);return m};l.deserialize=function(m){var r=new l;r.materialKey=m.readInt32();r.texBindingInfo=n.deserializeList(m,e);r.materialParams=n.deserializeList(m,k);r.materialKeyInfo=new p;g(r.materialKeyInfo,r.materialKey);return r};return l}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(A,h){return function(b,d){b.geometryType=
d&7;d>>=3;b.sdf=0!==(d&4);b.vvSizeMinMaxValue=0!==(d&8);b.vvSizeScaleStops=0!==(d&16);b.vvSizeFieldStops=0!==(d&32);b.vvSizeUnitValue=0!==(d&64);b.vvColor=0!==(d&128);b.vvRotation=0!==(d&256);b.vvOpacity=0!==(d&512);b.visibility=0!==(d&1024);b.pattern=0!==(d&2048);b.heatmap=0!==(d&4096);return b}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(A,h){return function(){function b(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}b.prototype.copy=function(d){this.geometryType=d.geometryType;this.sdf=d.sdf;this.vvSizeMinMaxValue=d.vvSizeMinMaxValue;this.vvSizeScaleStops=d.vvSizeScaleStops;this.vvSizeFieldStops=d.vvSizeFieldStops;this.vvSizeUnitValue=d.vvSizeUnitValue;this.vvColor=d.vvColor;this.vvRotation=d.vvRotation;this.vvOpacity=d.vvOpacity;this.visibility=d.visibility;this.pattern=d.pattern;
this.heatmap=d.heatmap};b.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};b.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};b.prototype.hasVVColor=function(){return this.vvColor};b.prototype.hasVVRotation=function(){return this.vvRotation};b.prototype.hasVVOpacity=
function(){return this.vvOpacity};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.serializeList=function(b,d){if(null===d)b.writeInt32(0);else{b.writeInt32(d.length);for(var g=0;g<d.length;g++)d[g].serialize(b);return b}};h.deserializeList=function(b,d,g){var p=b.readInt32();p=Array(p);for(var n=0;n<p.length;n++)p[n]=d.deserialize(b,g);return p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(A,h,b,d){A=new d;d.parse(b,A);return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require","exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(A,h,b,d){A=new d;d.parse(b,A);return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml",
"../../../../webgl/ShaderSnippets"],function(A,h,b,d){A=new d;d.parse(b,A);return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml","../../../../webgl/ShaderSnippets"],function(A,h,b,d){A=new d;d.parse(b,A);return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(A,
h,b,d){A=new d;d.parse(b,A);return A})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(A,h,b,d,g){function p(n){return n.reduce(function(e,k,l){k&&(e|=1<<l);return e},0)}return function(){function n(e,k,l,m,r,u){"string"===typeof e?this._initParams(e,k,l,m,r,u):this._initObject({programNamePrefix:e.programNamePrefix,shaderSnippetPrefixes:e.shaderSnippetPrefixes,baseDefines:e.baseDefines,snippets:e.snippets,
rctx:e.rctx,vertexAttribLocs:e.vertexAttribLocs})}n.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(e){return e.dispose()}),this._programCache.clear())};n.prototype._initObject=function(e){this._initParams(e.programNamePrefix,e.shaderSnippetPrefixes,e.baseDefines,e.snippets,e.rctx,e.vertexAttribLocs)};n.prototype._initParams=function(e,k,l,m,r,u){this._defaultSnippets=m;this._defaultRctx=r;this._defaultVertexAttribLocs=u;this._programCache=new Map;this._variationInfo=
new Map;this._shaderSourceVariator=new d(e,k,l)};n.prototype.addDefine=function(e,k,l,m){this._shaderSourceVariator.addDefine(e,k,l,m)};n.prototype.addBinaryShaderSnippetSuffix=function(e,k,l){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(e,k,l)};n.prototype.addNaryShaderSnippetSuffix=function(e,k){this._shaderSourceVariator.addNaryShaderSnippetSuffix(e,k)};n.prototype.getProgram=function(e,k,l,m){k=k||this._defaultSnippets;l=l||this._defaultRctx;m=m||this._defaultVertexAttribLocs;if(!k)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");
if(!l)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!m)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");var r=p(e);if(this._programCache.has(r))return this._programCache.get(r);e=this._shaderSourceVariator.getShaderVariation(e);var u=e.shaderSnippetNames[0];var v=k[u];g.assert(null!=v,"shader snippet '"+u+"' does not exist");u=e.shaderSnippetNames[1];k=k[u];g.assert(null!=k,"shader snippet '"+
u+"' does not exist");l=new b(l,v,k,m,e.defines);this._programCache.set(r,l);return l};n.prototype.getProgramByKey=function(e){if(this._programCache.has(e))return this._programCache.get(e);if(!this._variationInfo[e])return null;var k=this._variationInfo[e],l=this._defaultSnippets,m=this._defaultRctx,r=this._defaultVertexAttribLocs;var u=k.shaderSnippetNames[0];var v=l[u];g.assert(null!=v,"shader snippet '"+u+"' does not exist");u=k.shaderSnippetNames[1];l=l[u];g.assert(null!=l,"shader snippet '"+
u+"' does not exist");k=new b(m,v,l,r,k.defines);this._programCache.set(e,k);return k};n.prototype.getProgramInfo=function(e){var k=this._shaderSourceVariator.getShaderVariation(e);e=p(e);this._variationInfo[e]||(this._variationInfo[e]=k);return{name:k.programName,key:e}};return n}()})},"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(A,h,b,d){return function(){function g(p,n,e){if("string"===typeof p)var k=p;else k=
p.programNamePrefix,n=p.shaderSnippetPrefixes,e=p.baseDefines;d.assert(n,"you must specify shader snippet prefixes");d.assert(2===n.length,"you must specify shader snippet prefixes for vertex and fragment shaders");e&&0!==e.length||(e=[]);this.programNamePrefix=k;this.shaderSnippetPrefixes=n;this.baseDefines=e;this.variables=[];this.sealed=!1}g.prototype.addDefine=function(p,n,e,k){d.assert(!this.sealed,"you cannot add another variable after the first program has been generated");d.assert(p,"you must specify a program name suffix");
this.variables.push({programNameSuffixes:["",p],shaderNameSuffixes:k||p,defineStr:n,affectsShaderTypes:e||[!0,!0]})};g.prototype.addBinaryShaderSnippetSuffix=function(p,n,e){d.assert(!this.sealed,"you cannot add another variable after the first program has been generated");d.assert(p,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",p],shaderSnippetSuffixes:["",n],affectsShaderTypes:e||[!0,!0]})};g.prototype.addNaryShaderSnippetSuffix=function(p,n){d.assert(!this.sealed,
"you cannot add another variable after the first program has been generated");var e=p.map(function(k){d.assert(null!=k.value,"value must always be specified");return k.value});this.variables.push({values:e,programNameSuffixes:p.map(function(k,l){return null!=k.programNameSuffix?k.programNameSuffix:e[l]}),shaderSnippetSuffixes:p.map(function(k,l){return null!=k.shaderSnippetSuffix?k.shaderSnippetSuffix:e[l]}),affectsShaderTypes:n||[!0,!0]})};g.prototype.getShaderVariation=function(p){d.assert(p.length===
this.variables.length,"you must specify a value for each variable");for(var n=this.programNamePrefix,e=b.clone(this.shaderSnippetPrefixes),k=b.clone(this.shaderSnippetPrefixes),l=b.clone(this.baseDefines),m=0;m<this.variables.length;m++){var r=this.variables[m],u=p[m],v=void 0;r.values?(v=r.values.indexOf(u),d.assert(0<=v,"invalid value "+u+" for variable "+m)):v=u?1:0;n+=r.programNameSuffixes[v];for(u=0;2>u;u++)r.affectsShaderTypes[u]&&(r.shaderSnippetSuffixes&&(e[u]+=r.shaderSnippetSuffixes[v],
k[u]+=r.shaderSnippetSuffixes[v]),r.defineStr&&v&&(l.push(r.defineStr),k[u]+=r.shaderNameSuffixes))}return{programName:n,shaderSnippetNames:e,shaderNames:k,defines:l}};return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(A,h,b,d,g,p,n,e,k,l){function m(t){return t.map(function(x){return x.name})}
function r(t){for(var x={},z=0;z<t.length;z++){var D=t[z];x[D.name]=D.strideInBytes}return x}function u(t,x){switch(t){case k.WGLGeometryType.MARKER:return x?h.C_ICON_VERTEX_NAMES_VV:h.C_ICON_VERTEX_NAMES;case k.WGLGeometryType.FILL:return x?h.C_FILL_VERTEX_NAMES_VV:h.C_FILL_VERTEX_NAMES;case k.WGLGeometryType.LINE:return x?h.C_LINE_VERTEX_NAMES_VV:h.C_LINE_VERTEX_NAMES;case k.WGLGeometryType.TEXT:return x?h.C_TEXT_VERTEX_NAMES_VV:h.C_TEXT_VERTEX_NAMES;case k.WGLGeometryType.LABEL:return h.C_LABEL_VERTEX_NAMES}return null}
function v(t){switch(t){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return t}function w(t){if(t=v(t.type)){switch(t){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function B(t){if(t=v(t.type)){switch(t){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}
function C(t){if(t=v(t.type)){switch(t){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function y(t){if(t=v(t.type)){switch(t){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function a(t){return t&&t.length||0}function c(t){return"string"===typeof t}Object.defineProperty(h,"__esModule",{value:!0});var f=g.getLogger("esri.views.2d.engine.webgl.Utils");h.C_HITTEST_SEARCH_SIZE=4;h.C_VBO_GEOMETRY="geometry";h.C_VBO_PERINSTANCE="per_instance";h.C_VBO_PERINSTANCE_VV=
"per_instance_vv";h.C_VBO_VISIBILITY="visibility";h.C_VBO_VISIBILITY_RANGE="visibilityRange";h.C_ICON_VERTEX_DEF=[{name:h.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];h.C_ICON_VERTEX_DEF_VV=[{name:h.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];h.C_ICON_HEATMAP=[{name:h.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];h.C_FILL_VERTEX_DEF=[{name:h.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];h.C_FILL_VERTEX_DEF_VV=[{name:h.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];h.C_LINE_VERTEX_DEF=[{name:h.C_VBO_GEOMETRY,
strideInBytes:32,divisor:0}];h.C_LINE_VERTEX_DEF_VV=[{name:h.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];h.C_TEXT_VERTEX_DEF=[{name:h.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:h.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];h.C_TEXT_VERTEX_DEF_VV=[{name:h.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:h.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];h.C_LABEL_VERTEX_DEF=[{name:h.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:h.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:h.C_VBO_VISIBILITY_RANGE,
strideInBytes:2,divisor:0}];h.C_ICON_VERTEX_NAMES=m(h.C_ICON_VERTEX_DEF);h.C_ICON_VERTEX_NAMES_VV=m(h.C_ICON_VERTEX_DEF_VV);h.C_FILL_VERTEX_NAMES=m(h.C_FILL_VERTEX_DEF);h.C_FILL_VERTEX_NAMES_VV=m(h.C_FILL_VERTEX_DEF_VV);h.C_LINE_VERTEX_NAMES=m(h.C_LINE_VERTEX_DEF);h.C_LINE_VERTEX_NAMES_VV=m(h.C_LINE_VERTEX_DEF_VV);h.C_TEXT_VERTEX_NAMES=m(h.C_TEXT_VERTEX_DEF);h.C_TEXT_VERTEX_NAMES_VV=m(h.C_TEXT_VERTEX_DEF_VV);h.C_LABEL_VERTEX_NAMES=m(h.C_LABEL_VERTEX_DEF);h.C_ICON_STRIDE_SPEC=r(h.C_ICON_VERTEX_DEF);
h.C_ICON_STRIDE_SPEC_VV=r(h.C_ICON_VERTEX_DEF_VV);h.C_ICON_STRIDE_SPEC_HEATMAP=r(h.C_ICON_HEATMAP);h.C_FILL_STRIDE_SPEC=r(h.C_FILL_VERTEX_DEF);h.C_FILL_STRIDE_SPEC_VV=r(h.C_FILL_VERTEX_DEF_VV);h.C_LINE_STRIDE_SPEC=r(h.C_LINE_VERTEX_DEF);h.C_LINE_STRIDE_SPEC_VV=r(h.C_LINE_VERTEX_DEF_VV);h.C_TEXT_STRIDE_SPEC=r(h.C_TEXT_VERTEX_DEF);h.C_TEXT_STRIDE_SPEC_VV=r(h.C_TEXT_VERTEX_DEF_VV);h.C_LABEL_STRIDE_SPEC=r(h.C_LABEL_VERTEX_DEF);h.getStrides=function(t,x,z){void 0===z&&(z=!1);switch(t){case k.WGLGeometryType.MARKER:return x?
h.C_ICON_STRIDE_SPEC_VV:z?h.C_ICON_STRIDE_SPEC_HEATMAP:h.C_ICON_STRIDE_SPEC;case k.WGLGeometryType.FILL:return x?h.C_FILL_STRIDE_SPEC_VV:h.C_FILL_STRIDE_SPEC;case k.WGLGeometryType.LINE:return x?h.C_LINE_STRIDE_SPEC_VV:h.C_LINE_STRIDE_SPEC;case k.WGLGeometryType.TEXT:return x?h.C_TEXT_STRIDE_SPEC_VV:h.C_TEXT_STRIDE_SPEC;case k.WGLGeometryType.LABEL:return h.C_LABEL_STRIDE_SPEC}return null};h.getNamedBuffers=u;h.getSymbolGeometryType=function(t){return w(t)?k.WGLGeometryType.MARKER:C(t)?k.WGLGeometryType.LINE:
B(t)?k.WGLGeometryType.FILL:y(t)?k.WGLGeometryType.TEXT:k.WGLGeometryType.UNKNOWN};h.normalizeSymbolType=v;h.isMarkerSymbol=w;h.isFillSymbol=B;h.isLineSymbol=C;h.isPictureSymbol=function(t){if(t=v(t.type))switch(t){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};h.isTextSymbol=y;h.getTextProperties=function(t){return l.TextProperties.pool.acquire(t.color?e.copyAndPremultiply(t.color):[255,255,255,255],t.haloColor?e.copyAndPremultiply(t.haloColor):[255,255,255,255],
p.pt2px(t.haloSize),p.pt2px(t.font.size),t.angle*Math.PI/180,t.xoffset/t.font.size,t.yoffset/t.font.size,"left"===t.horizontalAlignment?0:"right"===t.horizontalAlignment?1:.5,"top"===t.verticalAlignment?0:"bottom"===t.verticalAlignment?1:.5)};h.isSameUniformValue=function(t,x){return!1};h.isSameMaterialInfo=function(t,x){if(t.materialKey!==x.materialKey||a(t.texBindingInfo)!==a(x.texBindingInfo)||a(t.materialParams)!==a(x.materialParams))return!1;for(var z=t.texBindingInfo.length,D=0;D<z;++D){var F=
t.texBindingInfo[D],G=x.texBindingInfo[D];if(F.unit!==G.unit||F.pageId!==G.pageId||F.semantic!==G.semantic)return!1}t=t.materialParams.length;for(D=0;D<t;)return!1;return!0};h.serializeString=function(t,x,z){for(var D=0,F=t.length,G=0;G<F;++G)x&&(x[z+D]=t.charCodeAt(G)),++D;x&&(x[z+D]=0);++D;return D};h.deserializeString=function(t,x,z){var D=0;t.s="";for(var F=!0;F;){var G=x[z+D];++D;0!==G?t.s+=String.fromCharCode(G):F=!1}return D};h.isDefined=function(t){return null!==t&&void 0!==t};h.isNumber=
function(t){return"number"===typeof t};h.isString=c;h.isStringOrNull=function(t){return null==t||c(t)};h.lerp=function(t,x,z){return t+(x-t)*z};A=function(){function t(){this._arr=[];this._push=this._push.bind(this)}t.prototype._push=function(x,z){this._arr.push(z)};t.prototype.getKeys=function(x){this._arr.length=0;x&&x.forEach(this._push);return this._arr};return t}();h.KeysGetter=A;A=function(){function t(){this._arr=[];this._push=this._push.bind(this)}t.prototype._push=function(x,z){this._arr.push(x)};
t.prototype.getValues=function(x){this._arr.length=0;x&&x.forEach(this._push);return this._arr};return t}();h.ValuesGetter=A;h.getCapType=function(t){switch(t){case "butt":return k.CapType.BUTT;case "round":return k.CapType.ROUND;case "square":return k.CapType.SQUARE;default:return f.error("Cannot interpret unknown cap: "+t),k.CapType.UNKNOWN}};h.getJoinType=function(t){switch(t){case "miter":return k.JoinType.MITER;case "bevel":return k.JoinType.BEVEL;case "round":return k.JoinType.ROUND;default:return f.error("Cannot interpret unknown join: "+
t),k.JoinType.UNKNOWN}};h.getVVType=function(t){switch(t){case "opacity":return k.VVType.OPACITY;case "color":return k.VVType.COLOR;case "rotation":return k.VVType.ROTATION;case "size":return k.VVType.SIZE;default:return f.error("Cannot interpret unknown vv: "+t),null}};h.createArcadeFunction=function(t,x){var z=t.spatialReference,D=t.layer,F=n.createFunction(t.valueExpression),G=new d;return function(E,H){G.repurposeFromGraphicLikeObject(E.geometry,E.attributes,D);E=H&&new b({viewingMode:H.viewingMode,
scale:H.scale});E=n.executeFunction(F,{vars:{$feature:G,$view:E||{}},spatialReference:z});return x?x(E):E}};h.copyMeshData=function(t,x,z,D,F,G,E){for(var H in G){var O=G[H].stride,K=G[H].data,L=z[H].data,T=O*F.vertexCount/4,P=O*t/4,Q=O*F.vertexFrom/4;for(O=0;O<T;++O)L[O+P]=K[O+Q]}z=F.indexCount;for(O=0;O<z;++O)D[O+x]=E[O+F.indexFrom]-F.vertexFrom+t};h.C_VBO_INFO=(q={},q[h.C_VBO_GEOMETRY]=35044,q[h.C_VBO_VISIBILITY]=35044,q[h.C_VBO_VISIBILITY_RANGE]=35048,q);h.createGeometryData=function(t,x,z){for(var D=
[],F=0;5>F;++F){for(var G={},E=0,H=u(F,t);E<H.length;E++){var O=H[E];G[O]={data:z(F,O)}}D.push({data:x(F),buffers:G})}return D};var q})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(A,h,b){return b})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(A,h,b){b.prototype.repurposeFromGraphicLikeObject=function(d,g,p){void 0===p&&(p=null);null===g&&(g={});this.attributes=
g;this.geometry=d;this._datesfixed=(this._layer=p)?!1:!0};return b})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(A,h,b){var d={info:0,warn:1,error:2};A=function(){function g(p){void 0===p&&(p={});this.module=p.module||"";this.writer=p.writer||null;this.level=p.level||null;null!=p.enabled&&(this.enabled=!!p.enabled);g._loggers[this.module]=this;p=this.module.lastIndexOf(".");-1!==p&&(this.parent=g.getLogger(this.module.slice(0,p)))}g.prototype.log=
function(p){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];this._isEnabled()&&this._matchLevel(p)&&(e=this._inheritedWriter())&&e.apply(void 0,[p,this.module].concat(n))};g.prototype.error=function(){for(var p=[],n=0;n<arguments.length;n++)p[n]=arguments[n];this.log.apply(this,["error"].concat(p))};g.prototype.warn=function(){for(var p=[],n=0;n<arguments.length;n++)p[n]=arguments[n];this.log.apply(this,["warn"].concat(p))};g.prototype.info=function(){for(var p=[],n=0;n<arguments.length;n++)p[n]=
arguments[n];this.log.apply(this,["info"].concat(p))};g.prototype.getLogger=function(p){return g.getLogger(this.module+"."+p)};g.getLogger=function(p){var n=g._loggers[p];n||(n=new g({module:p}));return n};g.prototype._parentWithMember=function(p,n){for(var e=this;e&&null==e[p];)e=e.parent;return e?e[p]:n};g.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};g.prototype._consoleWriter=function(p,n){for(var e=[],k=2;k<arguments.length;k++)e[k-2]=arguments[k];
console[p].apply(console,["["+n+"]"].concat(e))};g.prototype._matchLevel=function(p){return d[this._parentWithMember("level","error")]<=d[p]};g.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};g._loggers={};return g}();h=A.getLogger("esri");b("dojo-debug-messages")?h.level="info":h.level="warn";return A})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(A,h){function b(g){return g?72*g/h.DPI:0}Object.defineProperty(h,"__esModule",
{value:!0});var d=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;h.DPI=96;h.pt2px=function(g){return g?g/72*h.DPI:0};h.px2pt=b;h.toPt=function(g){if("string"===typeof g){if(d.test(g)){var p=g.match(d),n=Number(p[1]);p=p[3]&&p[3].toLowerCase();g="-"===g.charAt(0);n="px"===p?b(n):n;return g?-n:n}console.warn("screenUtils.toPt: input not recognized!");return null}return g}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],
function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});h.createSyntaxTree=function(g){return b.createSyntaxTree(g)};h.createFunction=function(g,p){return b.createFunction(g,p)};h.createExecContext=function(g,p){return b.createExecContext(g,p)};h.executeFunction=function(g,p){return b.executeFunction(g,p)};h.extractFieldNames=function(g){return b.extractFieldNames(g)};h.getViewInfo=function(g){if(g&&g.viewingMode&&null!=g.scale&&g.spatialReference)return{view:new d({viewingMode:g.viewingMode,
scale:g.scale}),sr:g.spatialReference}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(A,h,b){function d(n,e){Array.isArray(e)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):(n[0]=e.r,n[1]=e.g,n[2]=e.b,n[3]=e.a);return n}function g(n,e,k){void 0===e&&(e=0);void 0===k&&(k=!1);var l=n[e+3];n[e+0]*=l;n[e+1]*=l;n[e+2]*=l;k||(n[e+3]*=255);return n}Object.defineProperty(h,"__esModule",{value:!0});h.white=[255,255,255,1];var p=[0,0,0,0];h.premultiplyAlpha=
g;h.copyAndPremultiply=function(n){return g(d([],n))};h.premultiplyAlphaUint32=function(n){g(d(p,n));return b.i8888to32(p[0],p[1],p[2],p[3])};h.premultiplyAlphaRGBA=function(n){if(!n)return 0;var e=n.a;return b.i8888to32(n.r*e,n.g*e,n.b*e,255*e)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});var b=new Float32Array(1),d=new Uint32Array(b.buffer);h.nextHighestPowerOfTwo=function(g){g--;
g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;g|=g>>16;g++;return g};h.toUint32=function(g){b[0]=g;return d[0]};h.i1616to32=function(g,p){return 65535&g|p<<16};h.i8888to32=function(g,p,n,e){return g&255|(p&255)<<8|(n&255)<<16|e<<24};h.i8816to32=function(g,p,n){return g&255|(p&255)<<8|n<<16};h.numTo32=function(g){return g|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(A,h,b){Object.defineProperty(h,"__esModule",
{value:!0});A=function(){function d(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}d.prototype.acquire=function(g,p,n,e,k,l,m,r,u){this.color=g;this.haloColor=p;this.haloSize=n;this.size=e;this.angle=k;this.offsetX=l;this.offsetY=m;this.hAnchor=r;this.vAnchor=u};d.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=
this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};d.pool=new b(d);return d}();h.TextProperties=A})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(A,h){var b=function(){return function(){}}();return function(){function d(g,p,n,e,k){void 0===e&&(e=1);void 0===k&&(k=0);this.classConstructor=g;this.acquireFunctionOrWithConstructor=p;this.releaseFunction=n;this.growthSize=e;!0===p?this.acquireFunction=this._constructorAcquireFunction:
"function"===typeof p&&(this.acquireFunction=p);this._pool=Array(k);this._set=new Set;this._initialSize=k;for(g=0;g<k;g++)this._pool[g]=new this.classConstructor;this.growthSize=Math.max(e,1)}d.prototype.acquire=function(){for(var g=[],p=0;p<arguments.length;p++)g[p]=arguments[p];p=this.classConstructor||b;if(0===this._pool.length)for(var n=this.growthSize,e=0;e<n;e++)this._pool[e]=new p;p=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[p].concat(g)):p&&p.acquire&&"function"===
typeof p.acquire&&p.acquire.apply(p,g);this._set.delete(p);return p};d.prototype.release=function(g){g&&!this._set.has(g)&&(this.releaseFunction?this.releaseFunction(g):g&&g.release&&"function"===typeof g.release&&g.release(),this._pool.push(g),this._set.add(g))};d.prototype.prune=function(g){void 0===g&&(g=this._initialSize);if(!(this._pool.length<=g))for(var p;g>this._pool.length;)p=this._pool.shift(),this._set.delete(p),p.dispose&&"function"===typeof p.dispose&&p.dispose()};d.prototype._constructorAcquireFunction=
function(g){for(var p=[],n=1;n<arguments.length;n++)p[n-1]=arguments[n];(e=this.classConstructor).call.apply(e,[g].concat(p));var e};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m){Object.defineProperty(h,"__esModule",{value:!0});A=function(r){function u(){var v=r.call(this)||this;v._initialized=!1;v._maxWidth=0;v._color=new Float32Array([1,0,0,1]);return v}b(u,r);u.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};u.prototype.draw=function(v,w){v=v.context;if(w.status!==n.TileStatus.INITIALIZED){this._initialized||this._initialize(v);v.bindVAO(this._outlineVertexArrayObject);v.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",w.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",w.tileTransform.displayCoord);
this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);v.setLineWidth(2);v.drawArrays(3,0,4);v.bindVAO();var B=this._getTexture(v,w);B&&(v.bindVAO(this._tileInfoVertexArrayObject),v.bindProgram(this._tileInfoProgram),v.bindTexture(B,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",w.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",w.tileTransform.displayCoord),
this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",B.descriptor.width,B.descriptor.height),v.drawArrays(5,0,4),v.bindVAO())}};u.prototype._initialize=function(v){if(this._initialized)return!0;var w={a_pos:0},B=new k(v,p.backgroundVS,p.backgroundFS,w),C=new k(v,p.tileInfoVS,p.tileInfoFS,w),y={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,
normalized:!1,divisor:0}]},a=new Int8Array([0,0,1,0,1,1,0,1]);a=e.createVertex(v,35044,a);a=new m(v,w,y,{geometry:a});var c=new Int8Array([0,0,1,0,0,1,1,1]);c=e.createVertex(v,35044,c);v=new m(v,w,y,{geometry:c});this._outlineProgram=B;this._tileInfoProgram=C;this._outlineVertexArrayObject=a;this._tileInfoVertexArrayObject=v;return this._initialized=!0};u.prototype._getTexture=function(v,w){if(w.texture)return w.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",
"canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var B=w.key.id,C=this._canvas.getContext("2d");C.font="24px sans-serif";C.textAlign="left";C.textBaseline="middle";var y=C.measureText(B);y=Math.pow(2,Math.ceil(d.log2(y.width+2)));y>this._maxWidth&&(this._maxWidth=y);C.clearRect(0,0,this._maxWidth,32);C.fillStyle="blue";C.fillText(B,0,16);w.texture=new l(v,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},
this._canvas);return w.texture};return u}(g.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});A=function(){return function(){}}();h.default=A})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});A=h.TileStatus||(h.TileStatus={});A[A.INITIALIZED=0]="INITIALIZED";
A[A.NO_DATA=1]="NO_DATA";A[A.READY=2]="READY";A[A.MODIFIED=3]="MODIFIED";A[A.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(A,h,b){return function(){function d(g,p,n){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=g;this._desc={pixelFormat:p.pixelFormat,internalFormat:p.internalFormat,dataType:p.dataType,target:p.target?
p.target:3553,samplingMode:p.samplingMode?p.samplingMode:9729,wrapMode:p.wrapMode?p.wrapMode:10497,maxAnisotropy:p.maxAnisotropy,flipped:void 0!==p.flipped?p.flipped:!1,hasMipmap:void 0!==p.hasMipmap?p.hasMipmap:!1,level:void 0!==p.level?p.level:0,unpackAlignment:p.unpackAlignment?p.unpackAlignment:4,width:p.width,height:p.height,preMultiplyAlpha:void 0!==p.preMultiplyAlpha?p.preMultiplyAlpha:!1};this._id=++d._nextId;b("esri-webgl-debug")&&g.instanceCounter.incrementCount(0);this.setData(n)}Object.defineProperty(d.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});d.prototype.dispose=function(){var g=this;if(this._context){if(this._glName){var p=this._context.gl;this._boundToUnits.forEach(function(n){g._context.bindTexture(null,n)});p.deleteTexture(this._glName);this._glName=
null}b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);this._context=null}};d.prototype.resize=function(g,p){var n=this._desc;if(n.width!==g||n.height!==p)n.width=g,n.height=p,this.setData(null)};d.prototype.setData=function(g){var p=this._context.gl;this._glName||(this._glName=p.createTexture());void 0===g&&(g=null);null===g&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var n=this._context.getBoundTexture(0);this._context.bindTexture(this,0);
var e=this._desc;d._validateTexture(e);p.pixelStorei(p.UNPACK_ALIGNMENT,e.unpackAlignment);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,e.flipped?1:0);p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha);if(g instanceof ImageData||g instanceof HTMLImageElement||g instanceof HTMLCanvasElement||g instanceof HTMLVideoElement)e.width&&e.height&&console.assert(g.width===e.width&&g.height===e.height),p.texImage2D(p.TEXTURE_2D,e.level,e.internalFormat?e.internalFormat:e.pixelFormat,e.pixelFormat,e.dataType,
g),void 0===this._desc.width&&(this._desc.width=g.width),void 0===this._desc.height&&(this._desc.height=g.height);else{null!=e.width&&null!=e.height||console.error("Width and height must be specified!");var k=e.internalFormat?e.internalFormat:e.pixelFormat,l=e.pixelFormat;p.DEPTH24_STENCIL8&&k===p.DEPTH_STENCIL&&(k=p.DEPTH24_STENCIL8);p.texImage2D(p.TEXTURE_2D,e.level,k,e.width,e.height,0,l,e.dataType,g)}e.hasMipmap&&this.generateMipmap();d._applySamplingMode(p,this._desc);d._applyWrapMode(p,this._desc);
d._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(n,0)};d.prototype.updateData=function(g,p,n,e,k,l){l||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var m=this._context.gl,r=this._desc,u=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>p||0>n||e>r.width||k>r.height||p+e>r.width||n+k>r.height)&&console.error("An attempt to update out of bounds of the texture!");
l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?(console.assert(l.width===e&&l.height===k),m.texSubImage2D(m.TEXTURE_2D,g,p,n,r.pixelFormat,r.dataType,l)):m.texSubImage2D(m.TEXTURE_2D,g,p,n,e,k,r.pixelFormat,r.dataType,l);this._context.bindTexture(u,0)};d.prototype.generateMipmap=function(){var g=this._desc;g.hasMipmap||(g.hasMipmap=!0,d._validateTexture(g));9729===g.samplingMode?(this._samplingModeDirty=!0,g.samplingMode=9985):
9728===g.samplingMode&&(this._samplingModeDirty=!0,g.samplingMode=9984);g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var p=this._context.gl;p.generateMipmap(p.TEXTURE_2D);this._context.bindTexture(g,0)};d.prototype.setSamplingMode=function(g){g!==this._desc.samplingMode&&(this._desc.samplingMode=g,d._validateTexture(this._desc),this._samplingModeDirty=!0)};d.prototype.setWrapMode=function(g){g!==this._desc.wrapMode&&(this._desc.wrapMode=g,d._validateTexture(this._desc),this._wrapModeDirty=
!0)};d.prototype.applyChanges=function(){var g=this._context.gl,p=this._desc;this._samplingModeDirty&&(d._applySamplingMode(g,p),this._samplingModeDirty=!1);this._wrapModeDirty&&(d._applyWrapMode(g,p),this._wrapModeDirty=!1)};d.prototype.setBoundToUnit=function(g,p){p?this._boundToUnits.add(g):this._boundToUnits.delete(g)};d._isPowerOfTwo=function(g){return 0===(g&g-1)};d._validateTexture=function(g){(0>g.width||0>g.height)&&console.error("Negative dimension parameters are not allowed!");d._isPowerOfTwo(g.width)&&
d._isPowerOfTwo(g.height)||(33071!==g.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),g.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};d._applySamplingMode=function(g,p){var n=p.samplingMode;if(9985===n||9987===n)n=9729;else if(9984===n||9986===n)n=9728;g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,n);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,p.samplingMode)};d._applyWrapMode=function(g,p){g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_WRAP_S,p.wrapMode);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,p.wrapMode)};d._applyAnisotropicFilteringParameters=function(g,p){if(null!=p.maxAnisotropy){var n=g.capabilities.textureFilterAnisotropic;n&&(g=g.gl,g.texParameterf(g.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY,p.maxAnisotropy))}};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(A,h,b,d,g,p,n,e,k){Object.defineProperty(h,"__esModule",{value:!0});A=function(l){function m(){var r=l.call(this)||this;r._color=d.create();r._initialized=!1;r._color.set([1,0,0,1]);return r}b(m,l);m.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};m.prototype.draw=function(r,u){r=r.context;this._initialized||this._initialize(r);
r.setStencilFunctionSeparate(1032,519,u.stencilRef,255);r.bindVAO(this._solidVertexArrayObject);r.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",u.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",u.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);r.drawArrays(5,0,4);r.bindVAO()};m.prototype._initialize=
function(r){if(this._initialized)return!0;var u={a_pos:0},v=new e(r,p.backgroundVS,p.backgroundFS,u);if(!v)return!1;var w=new Int8Array([0,0,1,0,0,1,1,1]);w=n.createVertex(r,35044,w);r=new k(r,u,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:w});this._solidProgram=v;this._solidVertexArrayObject=r;return this._initialized=!0};return m}(g.default);h.default=A})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(A){var h=
{create:function(){var b=new A.ARRAY_TYPE(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0;return b},clone:function(b){var d=new A.ARRAY_TYPE(4);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];return d},fromValues:function(b,d,g,p){var n=new A.ARRAY_TYPE(4);n[0]=b;n[1]=d;n[2]=g;n[3]=p;return n},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];return b},set:function(b,d,g,p,n){b[0]=d;b[1]=g;b[2]=p;b[3]=n;return b},add:function(b,d,g){b[0]=d[0]+g[0];b[1]=d[1]+g[1];b[2]=d[2]+g[2];b[3]=d[3]+g[3];return b},subtract:function(b,
d,g){b[0]=d[0]-g[0];b[1]=d[1]-g[1];b[2]=d[2]-g[2];b[3]=d[3]-g[3];return b}};h.sub=h.subtract;h.multiply=function(b,d,g){b[0]=d[0]*g[0];b[1]=d[1]*g[1];b[2]=d[2]*g[2];b[3]=d[3]*g[3];return b};h.mul=h.multiply;h.divide=function(b,d,g){b[0]=d[0]/g[0];b[1]=d[1]/g[1];b[2]=d[2]/g[2];b[3]=d[3]/g[3];return b};h.div=h.divide;h.ceil=function(b,d){b[0]=Math.ceil(d[0]);b[1]=Math.ceil(d[1]);b[2]=Math.ceil(d[2]);b[3]=Math.ceil(d[3]);return b};h.floor=function(b,d){b[0]=Math.floor(d[0]);b[1]=Math.floor(d[1]);b[2]=
Math.floor(d[2]);b[3]=Math.floor(d[3]);return b};h.min=function(b,d,g){b[0]=Math.min(d[0],g[0]);b[1]=Math.min(d[1],g[1]);b[2]=Math.min(d[2],g[2]);b[3]=Math.min(d[3],g[3]);return b};h.max=function(b,d,g){b[0]=Math.max(d[0],g[0]);b[1]=Math.max(d[1],g[1]);b[2]=Math.max(d[2],g[2]);b[3]=Math.max(d[3],g[3]);return b};h.round=function(b,d){b[0]=Math.round(d[0]);b[1]=Math.round(d[1]);b[2]=Math.round(d[2]);b[3]=Math.round(d[3]);return b};h.scale=function(b,d,g){b[0]=d[0]*g;b[1]=d[1]*g;b[2]=d[2]*g;b[3]=d[3]*
g;return b};h.scaleAndAdd=function(b,d,g,p){b[0]=d[0]+g[0]*p;b[1]=d[1]+g[1]*p;b[2]=d[2]+g[2]*p;b[3]=d[3]+g[3]*p;return b};h.distance=function(b,d){var g=d[0]-b[0],p=d[1]-b[1],n=d[2]-b[2];b=d[3]-b[3];return Math.sqrt(g*g+p*p+n*n+b*b)};h.dist=h.distance;h.squaredDistance=function(b,d){var g=d[0]-b[0],p=d[1]-b[1],n=d[2]-b[2];b=d[3]-b[3];return g*g+p*p+n*n+b*b};h.sqrDist=h.squaredDistance;h.length=function(b){var d=b[0],g=b[1],p=b[2];b=b[3];return Math.sqrt(d*d+g*g+p*p+b*b)};h.len=h.length;h.squaredLength=
function(b){var d=b[0],g=b[1],p=b[2];b=b[3];return d*d+g*g+p*p+b*b};h.sqrLen=h.squaredLength;h.negate=function(b,d){b[0]=-d[0];b[1]=-d[1];b[2]=-d[2];b[3]=-d[3];return b};h.inverse=function(b,d){b[0]=1/d[0];b[1]=1/d[1];b[2]=1/d[2];b[3]=1/d[3];return b};h.normalize=function(b,d){var g=d[0],p=d[1],n=d[2];d=d[3];var e=g*g+p*p+n*n+d*d;0<e&&(e=1/Math.sqrt(e),b[0]=g*e,b[1]=p*e,b[2]=n*e,b[3]=d*e);return b};h.dot=function(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]};h.lerp=function(b,d,g,p){var n=
d[0],e=d[1],k=d[2];d=d[3];b[0]=n+p*(g[0]-n);b[1]=e+p*(g[1]-e);b[2]=k+p*(g[2]-k);b[3]=d+p*(g[3]-d);return b};h.random=function(b,d){d=d||1;b[0]=A.RANDOM();b[1]=A.RANDOM();b[2]=A.RANDOM();b[3]=A.RANDOM();h.normalize(b,b);h.scale(b,b,d);return b};h.transformMat4=function(b,d,g){var p=d[0],n=d[1],e=d[2];d=d[3];b[0]=g[0]*p+g[4]*n+g[8]*e+g[12]*d;b[1]=g[1]*p+g[5]*n+g[9]*e+g[13]*d;b[2]=g[2]*p+g[6]*n+g[10]*e+g[14]*d;b[3]=g[3]*p+g[7]*n+g[11]*e+g[15]*d;return b};h.transformQuat=function(b,d,g){var p=d[0],n=
d[1],e=d[2],k=g[0],l=g[1],m=g[2];g=g[3];var r=g*p+l*e-m*n,u=g*n+m*p-k*e,v=g*e+k*n-l*p;p=-k*p-l*n-m*e;b[0]=r*g+p*-k+u*-m-v*-l;b[1]=u*g+p*-l+v*-k-r*-m;b[2]=v*g+p*-m+r*-l-u*-k;b[3]=d[3];return b};h.forEach=function(){var b=h.create();return function(d,g,p,n,e,k){g||(g=4);p||(p=0);for(n=n?Math.min(n*g+p,d.length):d.length;p<n;p+=g)b[0]=d[p],b[1]=d[p+1],b[2]=d[p+2],b[3]=d[p+3],e(b,b,k),d[p]=b[0],d[p+1]=b[1],d[p+2]=b[2],d[p+3]=b[3];return d}}();h.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+
b[3]+")"};h.exactEquals=function(b,d){return b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]&&b[3]===d[3]};h.equals=function(b,d){var g=b[0],p=b[1],n=b[2];b=b[3];var e=d[0],k=d[1],l=d[2];d=d[3];return Math.abs(g-e)<=A.EPSILON*Math.max(1,Math.abs(g),Math.abs(e))&&Math.abs(p-k)<=A.EPSILON*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(n-l)<=A.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(b-d)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))};return h})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(A,h,b,d,g,p,n){Object.defineProperty(h,"__esModule",{value:!0});A=function(e){function k(){var l=null!==e&&e.apply(this,arguments)||this;l._isInitialized=!1;l._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};l._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};l._spritesTextureSize=new Float32Array(2);return l}b(k,e);k.prototype.dispose=function(){};k.prototype.getGeometryType=function(){return d.WGLGeometryType.FILL};k.prototype.drawGeometry=
function(l,m,r,u){u=l.context;var v=l.painter,w=l.rendererInfo,B=l.requiredLevel,C=l.stationary,y=r.indexCount,a=r.indexFrom;this._initialize();var c=r.materialInfo.materialKeyInfo,f=c.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(f=l.painter.materialManager.getProgram(r.materialInfo.materialKey,l.drawPhase,f)){u.bindProgram(f);var q=this._getVAO(u,m,c.hasVV());u.bindVAO(q);if(0<r.materialInfo.texBindingInfo.length){r=r.materialInfo.texBindingInfo[0];q=r.pageId;var t=l.painter.textureManager.sprites;
this._spritesTextureSize[0]=t.getWidth(q);this._spritesTextureSize[1]=t.getHeight(q);f.setUniform1f("u_zoomFactor",1/Math.pow(2,B-m.key.level)/l.pixelRatio);v.textureManager.bindSpritePage(u,q,r.unit,C?9728:9729);f.setUniform1i(r.semantic,r.unit);f.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}f.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform);f.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord);f.setUniform1f("u_opacity",1);c.vvColor&&(f.setUniform1fv("u_vvColorValues",
w.vvColorValues),f.setUniform4fv("u_vvColors",w.vvColors));c.vvOpacity&&(f.setUniform1fv("u_vvOpacityValues",w.vvOpacityValues),f.setUniform1fv("u_vvOpacities",w.vvOpacities));u.drawElements(4,y,5125,4*a);u.bindVAO(null)}};k.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};k.prototype._getVAO=function(l,m,r){if(m.fillGeometry.vao)return m.fillGeometry.vao;var u=m.fillGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],v=m.fillGeometry.indexBuffer;if(!u||!v)return null;m.fillGeometry.vao=r?new n(l,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:u},v):new n(l,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:u},v);return m.fillGeometry.vao};return k}(p.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(A,h,b,d,g){Object.defineProperty(h,"__esModule",{value:!0});A=function(p){function n(){return null!==p&&p.apply(this,arguments)||this}b(n,
p);n.prototype.draw=function(e,k){var l=this;if(k.canDisplay){var m=this.getGeometryType(),r=k.getDisplayList(e.drawPhase),u=k.getGeometry(m);u&&g.forEachIter(r.ofType(m),function(v){return l.drawGeometry(e,k,v,u)})}};return n}(d.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.forEachIter=function(b,d){for(;;){var g=b.next();if(g.done)break;d(g.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(A,h,b,d,g,p,n){Object.defineProperty(h,"__esModule",{value:!0});A=function(e){function k(){var l=null!==e&&e.apply(this,arguments)||this;l._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};l._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};l._glyphsTextureSize=new Float32Array(2);return l}b(k,e);k.prototype.dispose=function(){};k.prototype.drawGeometry=function(l,m,r,u){if(l.requiredLevel===m.key.level){u=l.context;var v=l.painter,w=l.drawPhase,B=r.materialInfo,C=r.indexCount;r=r.indexFrom;var y=this._attributeLocations,a=l.drawPhase===d.WGLDrawPhase.LABEL_ALPHA,c=B.materialKey;
a&&(c|=8);if(w=v.materialManager.getProgram(c,w,y))u.setStencilTestEnabled(!1),u.bindProgram(w),y=this._getVAO(u,m),u.bindVAO(y),a?(u.setBlendingEnabled(!1),w.setUniform1f("u_fadeStep",l.labelStep)):(B=B.texBindingInfo[0],v.textureManager.bindGlyphsPage(u,B.pageId,B.unit),w.setUniform1i(B.semantic,B.unit)),B=v.textureManager.glyphs,this._glyphsTextureSize[0]=B.width/4,this._glyphsTextureSize[1]=B.height/4,v=v.extrudeNoRotationMatrix,u.bindTexture(l.labelFBO.colorTexture,3),w.setUniform1i("u_referenceTex",
3),w.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform),w.setUniformMatrix4fv("u_extrudeMatrix",v),w.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord),w.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),w.setUniform1f("u_pixelRatio",l.pixelRatio),w.setUniform1f("u_opacity",1),w.setUniform1f("u_zoomLevel",10*l.displayLevel),w.setUniform1f("u_mapRotation",l.state.rotation),w.setUniform1f("u_mapAligned",0),w.setUniform2fv("u_screenSize",l.state.size),u.drawElements(4,
C,5125,4*r),u.bindVAO(null),u.setStencilTestEnabled(!0),u.setBlendingEnabled(!0)}};k.prototype.getGeometryType=function(){return d.WGLGeometryType.LABEL};k.prototype._getVAO=function(l,m){if((m=m.labelGeometry)&&m.vao)return m.vao;var r=m.vertexBufferMap[g.C_VBO_GEOMETRY],u=m.vertexBufferMap[g.C_VBO_VISIBILITY_RANGE],v=m.indexBuffer;if(!r||!v||!u)return null;m.vao=new n(l,this._attributeLocations,this._vertexAttributeLayout,{geometry:r,visibility:m.vertexBufferMap[g.C_VBO_VISIBILITY],visibilityRange:u},
v);return m.vao};return k}(p.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(A,h,b,d,g,p,n){Object.defineProperty(h,"__esModule",{value:!0});A=function(e){function k(){var l=null!==e&&e.apply(this,arguments)||this;l._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};l._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};l._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};l._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};l._spritesTextureSize=new Float32Array(2);return l}b(k,e);k.prototype.dispose=function(){};k.prototype.getGeometryType=function(){return d.WGLGeometryType.LINE};k.prototype.drawGeometry=function(l,m,r,u){u=l.context;var v=l.painter,w=l.rendererInfo,B=l.requiredLevel,C=l.drawPhase,y=r.indexFrom,a=r.indexCount,c=r.materialInfo;r=c.materialKeyInfo;var f=r.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(C=v.materialManager.getProgram(c.materialKey,
C,f)){u.bindProgram(C);f=this._getVAO(u,m,r.hasVV());u.bindVAO(f);f=1/l.pixelRatio;if(0<c.texBindingInfo.length){c=c.texBindingInfo[0];var q=c.pageId,t=v.textureManager.sprites;this._spritesTextureSize[0]=t.getWidth(q);this._spritesTextureSize[1]=t.getHeight(q);v.textureManager.bindSpritePage(u,q,c.unit);C.setUniform1i(c.semantic,c.unit);C.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}l=Math.pow(2,B-m.key.level)/l.pixelRatio;C.setUniform1f("u_zoomFactor",l);C.setUniformMatrix4fv("u_transformMatrix",
m.tileTransform.transform);C.setUniformMatrix4fv("u_extrudeMatrix",v.extrudeMatrix);C.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord);C.setUniform1f("u_opacity",1);C.setUniform1f("u_blur",0+f);C.setUniform1f("u_antialiasing",f);C.setUniform1f("u_zoomFactor",l);r.vvSizeMinMaxValue&&C.setUniform4fv("u_vvSizeMinMaxValue",w.vvSizeMinMaxValue);r.vvSizeScaleStops&&C.setUniform1f("u_vvSizeScaleStopsValue",w.vvSizeScaleStopsValue);r.vvSizeFieldStops&&(C.setUniform1fv("u_vvSizeFieldStopsValues",
w.vvSizeFieldStopsValues),C.setUniform1fv("u_vvSizeFieldStopsSizes",w.vvSizeFieldStopsSizes));r.vvSizeUnitValue&&C.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",w.vvSizeUnitValueToPixelsRatio);r.vvColor&&(C.setUniform1fv("u_vvColorValues",w.vvColorValues),C.setUniform4fv("u_vvColors",w.vvColors));r.vvOpacity&&(C.setUniform1fv("u_vvOpacityValues",w.vvOpacityValues),C.setUniform1fv("u_vvOpacities",w.vvOpacities));u.setFaceCullingEnabled(!0);u.setFrontFace(2305);u.setCullFace(1029);u.drawElements(4,
a,5125,4*y);u.setFaceCullingEnabled(!1);u.bindVAO(null)}};k.prototype._getVAO=function(l,m,r){if(m.lineGeometry.vao)return m.lineGeometry.vao;var u=m.lineGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],v=m.lineGeometry.indexBuffer;if(!u||!v)return null;m.lineGeometry.vao=r?new n(l,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:u},v):new n(l,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:u},v);return m.lineGeometry.vao};return k}(p.default);h.default=
A})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(A,h,b,d,g,p,n,e){Object.defineProperty(h,"__esModule",{value:!0});A=function(k){function l(){var m=null!==k&&k.apply(this,arguments)||this;m._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};m._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};m._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};m._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};m._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};m._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};m._spritesTextureSize=new Float32Array(2);return m}b(l,k);l.prototype.dispose=function(){};l.prototype.getGeometryType=function(){return d.WGLGeometryType.MARKER};l.prototype.drawGeometry=
function(m,r,u,v){v=m.context;var w=m.painter,B=m.rendererInfo,C=m.drawPhase;m=u.indexCount;var y=u.indexFrom,a=u.materialInfo;u=a.materialKeyInfo;var c=u.heatmap,f=u.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(C=w.materialManager.getProgram(a.materialKey,C,f))v.bindProgram(C),f=this._getVAO(v,r,u.hasVV(),c),v.bindVAO(f),c?(a=this._getIntensityTexture(v,B.heatmapParameters),v.bindTexture(a,1),C.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(B.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(B.heatmapParameters.radius)):(c=a.texBindingInfo[0],a=c.pageId,w.textureManager.bindSpritePage(v,a,c.unit),C.setUniform1i(c.semantic,c.unit),c=w.textureManager.sprites,this._spritesTextureSize[0]=c.getWidth(a)/4,this._spritesTextureSize[1]=c.getHeight(a)/4),w=B.vvMaterialParameters.vvRotationEnabled&&"geographic"===B.vvMaterialParameters.vvRotationType?w.extrudeMatrix:w.extrudeNoRotationMatrix,C.setUniformMatrix4fv("u_transformMatrix",r.tileTransform.transform),
C.setUniformMatrix4fv("u_extrudeMatrix",w),C.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord),C.setUniform2fv("u_mosaicSize",this._spritesTextureSize),C.setUniform1f("u_opacity",1),u.vvSizeMinMaxValue&&C.setUniform4fv("u_vvSizeMinMaxValue",B.vvSizeMinMaxValue),u.vvSizeScaleStops&&C.setUniform1f("u_vvSizeScaleStopsValue",B.vvSizeScaleStopsValue),u.vvSizeFieldStops&&(C.setUniform1fv("u_vvSizeFieldStopsValues",B.vvSizeFieldStopsValues),C.setUniform1fv("u_vvSizeFieldStopsSizes",B.vvSizeFieldStopsSizes)),
u.vvSizeUnitValue&&C.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",B.vvSizeUnitValueToPixelsRatio),u.vvColor&&(C.setUniform1fv("u_vvColorValues",B.vvColorValues),C.setUniform4fv("u_vvColors",B.vvColors)),u.vvOpacity&&(C.setUniform1fv("u_vvOpacityValues",B.vvOpacityValues),C.setUniform1fv("u_vvOpacities",B.vvOpacities)),u.vvRotation&&C.setUniform1f("u_vvRotationType","geographic"===B.vvMaterialParameters.vvRotationType?0:1),v.drawElements(4,m,5125,4*y),v.bindVAO(null)};l.prototype._getVAO=function(m,
r,u,v){if(r.iconGeometry.vao)return r.iconGeometry.vao;var w=r.iconGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],B=r.iconGeometry.indexBuffer;if(!w||!B)return null;r.iconGeometry.vao=u?new e(m,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:w},B):v?new e(m,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:w},B):new e(m,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:w},B);return r.iconGeometry.vao};l.prototype._getIntensityTexture=
function(m,r){if(r.intensityKernel&&!r.refreshIntensityKernel)return r.intensityKernel;r.intensityKernel&&(r.intensityKernel.dispose(),r.intensityKernel=null);for(var u=r.radius,v=r.kernelSize,w=r.blurRadius,B=u*u,C=[],y=-1;++y<v;)C[y]=Math.exp(-Math.pow(y-w,2)/(2*B))/(u/2*Math.sqrt(2*Math.PI));u=[];for(var a,c=0;c<v;c++)for(B=C[c],y=0;y<v;y++)a=c*v+y,w=C[y],u[4*a]=B*w,u[4*a+1]=0,u[4*a+2]=0,u[4*a+3]=1;m=new n(m,{target:3553,pixelFormat:6408,internalFormat:m.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:m.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:v,height:v},new Float32Array(u));r.intensityKernel=m;r.refreshIntensityKernel=!1;return m};return l}(p.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(A,h,b,d,g,p,n){Object.defineProperty(h,"__esModule",
{value:!0});A=function(e){function k(){var l=null!==e&&e.apply(this,arguments)||this;l._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};l._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};l._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};l._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};l._glyphsTextureSize=new Float32Array(2);return l}b(k,e);k.prototype.dispose=function(){};k.prototype.getGeometryType=
function(){return d.WGLGeometryType.TEXT};k.prototype.drawGeometry=function(l,m,r,u){u=l.context;var v=l.painter,w=l.rendererInfo,B=r.materialInfo,C=r.indexCount;r=r.indexFrom;var y=B.materialKeyInfo,a=y.vvSizeMinMaxValue||y.vvSizeScaleStops||y.vvSizeFieldStops||y.vvSizeUnitValue||y.vvColor||y.vvRotation||y.vvOpacity;if(l=v.materialManager.getProgram(B.materialKey,l.drawPhase,a?this._attributeLocationsVV:this._attributeLocations))u.bindProgram(l),a=this._getVAO(u,m,a,this.getGeometryType()),u.bindVAO(a),
B=B.texBindingInfo[0],v.textureManager.bindGlyphsPage(u,B.pageId,B.unit),l.setUniform1i(B.semantic,B.unit),B=v.textureManager.glyphs,this._glyphsTextureSize[0]=B.width/4,this._glyphsTextureSize[1]=B.height/4,v=w.vvMaterialParameters.vvRotationEnabled&&"geographic"===w.vvMaterialParameters.vvRotationType?v.extrudeMatrix:v.extrudeNoRotationMatrix,l.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform),l.setUniformMatrix4fv("u_extrudeMatrix",v),l.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord),
l.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),l.setUniform1f("u_pixelRatio",1),l.setUniform1f("u_opacity",1),y.vvSizeMinMaxValue&&l.setUniform4fv("u_vvSizeMinMaxValue",w.vvSizeMinMaxValue),y.vvSizeScaleStops&&l.setUniform1f("u_vvSizeScaleStopsValue",w.vvSizeScaleStopsValue),y.vvSizeFieldStops&&(l.setUniform1fv("u_vvSizeFieldStopsValues",w.vvSizeFieldStopsValues),l.setUniform1fv("u_vvSizeFieldStopsSizes",w.vvSizeFieldStopsSizes)),y.vvSizeUnitValue&&l.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
w.vvSizeUnitValueToPixelsRatio),y.vvColor&&(l.setUniform1fv("u_vvColorValues",w.vvColorValues),l.setUniform4fv("u_vvColors",w.vvColors)),y.vvOpacity&&(l.setUniform1fv("u_vvOpacityValues",w.vvOpacityValues),l.setUniform1fv("u_vvOpacities",w.vvOpacities)),y.vvRotation&&l.setUniform1f("u_vvRotationType","geographic"===w.vvMaterialParameters.vvRotationType?0:1),u.drawElements(4,C,5125,4*r),u.bindVAO(null)};k.prototype._getVAO=function(l,m,r,u){if((m=m.getGeometry(u))&&m.vao)return m.vao;u=m.vertexBufferMap[g.C_VBO_GEOMETRY];
var v=m.vertexBufferMap[g.C_VBO_VISIBILITY],w=m.indexBuffer;if(!u||!w)return null;m.vao=r?new n(l,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:u,visibility:v},w):new n(l,this._attributeLocations,this._vertexAttributeLayout,{geometry:u,visibility:v},w);return m.vao};return k}(p.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(A,h,b,d,g){return function(){function p(){this._hlRenderer=new d;this._hlSurfaces=new g;this._height=this._width=void 0}p.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};p.prototype.setup=function(n,e,k){var l=e%4,m=k%4;e+=2>l?-l:4-l;k+=2>m?-m:4-m;this._width=e;this._height=k;this._boundFBO=n.getBoundFramebufferObject();e=Math.round(.75*e);k=Math.round(.75*k);this._hlRenderer.setup(n,e,k);this._hlSurfaces.setup(n,
e,k)};p.prototype.setHighlightOptions=function(n){this._hlRenderer.setHighlightOptions({fillColor:n.fillColor,outlineColor:n.outlineColor,outlineWidth:.75*n.outlineWidth,outerHaloWidth:.75*n.outerHaloWidth,innerHaloWidth:.75*n.innerHaloWidth,outlinePosition:.75*n.outlinePosition})};p.prototype.startMaskDraw=function(n){n.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);n.setClearColor(0,0,0,0);n.setClearStencil(0);n.clear(n.gl.COLOR_BUFFER_BIT|n.gl.STENCIL_BUFFER_BIT);n.setViewport(0,0,.75*this._width,
.75*this._height)};p.prototype.draw=function(n){n.setStencilTestEnabled(!1);n.setBlendingEnabled(!1);n.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);n.setClearColor(0,0,0,0);n.clear(n.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(n,this._hlSurfaces.sharedBlur1Tex);b("esri-feature-highlight-debug")?(n.bindFramebuffer(null),n.clear(n.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(n,this._hlSurfaces.sharedBlur2Tex)):(n.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),n.setClearColor(0,0,0,0),n.clear(n.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(n,this._hlSurfaces.sharedBlur2Tex),n.bindFramebuffer(this._boundFBO),n.setBlendingEnabled(!0),n.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(n,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return p}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(A,h,b,d,g,p,n){var e=[void 0,void 0,void 0,1],k=[3,4],l=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function r(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}r.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};r.prototype.preBlur=function(u,v){u.bindTexture(v,k[0]);u.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",l);u.bindVAO(this._resources.quadVAO);u.drawArrays(5,0,4);u.bindVAO()};r.prototype.finalBlur=function(u,v){u.bindTexture(v,k[0]);u.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",m);u.bindVAO(this._resources.quadVAO);u.drawArrays(5,0,4);u.bindVAO()};r.prototype.renderHighlight=function(u,v){u.bindTexture(v,k[0]);u.bindTexture(this._resources.shadeTex,k[1]);u.bindProgram(this._resources.highlightProgram);u.bindVAO(this._resources.quadVAO);u.drawArrays(5,0,4);u.bindVAO()};r.prototype._initialize=function(u,v,w){this._width=v;this._height=
w;v=new d(u,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);w=new n(u,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:v});var B=(new g("hl",["texturedVS","highlightFS"],[],b,u,{a_position:0,a_texcoord:1})).getProgram([]),C=(new g("hl",["texturedVS","blurFS"],[],b,u,{a_position:0,a_texcoord:1})).getProgram([]);
B.setUniform1i("u_texture",k[0]);B.setUniform1i("u_shade",k[1]);B.setUniform4fv("u_sigmas",e);C.setUniform1i("u_texture",k[0]);C.setUniform4fv("u_sigmas",e);u=new p(u,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:v,quadVAO:w,highlightProgram:B,blurProgram:C,shadeTex:u}};r.prototype.setHighlightOptions=function(u){function v(t,x,z){f[0]=(1-z)*t[0]+z*x[0];f[1]=(1-z)*t[1]+z*x[1];f[2]=(1-z)*t[2]+z*x[2];f[3]=(1-z)*t[3]+z*
x[3]}this._highlightOptions=u;if(this._resources){var w=u.outlinePosition-u.outlineWidth/2-u.outerHaloWidth,B=u.outlinePosition-u.outlineWidth/2,C=u.outlinePosition+u.outlineWidth/2,y=u.outlinePosition+u.outlineWidth/2+u.innerHaloWidth,a=Math.sqrt(Math.PI/2)*e[3],c=Math.abs(w)>a?Math.round(10*(Math.abs(w)-a))/10:0;a=Math.abs(y)>a?Math.round(10*(Math.abs(y)-a))/10:0;c&&!a?console.warn("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):
!c&&a?console.warn("The inner rim of the highlight is "+a+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&a&&console.warn("The highlight is "+Math.max(c,a)+"px away from the edge of the feature; consider reducing some width values.");c=new Uint8Array(1024);for(var f=[void 0,void 0,void 0,void 0],q=0;256>q;++q)a=w+q/255*(y-w),a<w?(c[4*q]=0,c[4*q+1]=0,c[4*q+2]=0,c[4*q+3]=0):a<B?v([0,0,0,0],u.outlineColor,
(a-w)/(B-w)):a<C?(f[0]=u.outlineColor[0],f[1]=u.outlineColor[1],f[2]=u.outlineColor[2],f[3]=u.outlineColor[3]):a<y?v(u.outlineColor,u.fillColor,(a-C)/(y-C)):(c[4*q]=u.fillColor[0],c[4*q+1]=u.fillColor[1],c[4*q+2]=u.fillColor[2],c[4*q+3]=u.fillColor[3]),c[4*q]=255*f[0]*f[3],c[4*q+1]=255*f[1]*f[3],c[4*q+2]=255*f[2]*f[3],c[4*q+3]=255*f[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[w,y]);this._resources.shadeTex.updateData(0,0,0,256,1,c)}};r.prototype.setup=function(u,v,w){this._resources?
(this._width=v,this._height=w):(this._initialize(u,v,w),this.setHighlightOptions(this._highlightOptions))};return r}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(A,h,b,d){A=new d;d.parse(b,A);return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject",
"../../../../../webgl/Texture"],function(A,h,b,d){function g(p,n,e){n=new d(p,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:n,height:e,samplingMode:9729});p=b.createWithAttachments(p,n,{colorTarget:0,depthStencilTarget:2});return[n,p]}return function(){function p(){this._height=this._width=void 0;this._resources=null}p.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),
this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};p.prototype._initialize=function(n,e,k){this._width=e;this._height=k;var l=g(n,e,k),m=l[0];l=l[1];n=g(n,e,k);this._resources={sharedBlur1Tex:m,sharedBlur1Fbo:l,sharedBlur2Tex:n[0],sharedBlur2Fbo:n[1]}};p.prototype.setup=function(n,e,k){!this._resources||this._width===e&&this._height===k||this.dispose();this._resources||this._initialize(n,e,k)};Object.defineProperty(p.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return p}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require",
"exports","dojo/has","./Renderbuffer","./Texture"],function(A,h,b,d,g){return function(){function p(n,e,k,l){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=n;this._desc={colorTarget:e.colorTarget,depthStencilTarget:e.depthStencilTarget,width:e.width,height:e.height,multisampled:e.multisampled};this._id=p._nextId++;b("esri-webgl-debug")&&n.instanceCounter.incrementCount(4);k&&(n=void 0,k instanceof g?(this._colorAttachment=
k,n=k.descriptor):(n=k,this._colorAttachment=new g(this._context,n)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),p._validateTextureDimensions(n,this._desc));l instanceof d?(2===e.depthStencilTarget?this._stencilAttachment=l:1===e.depthStencilTarget||3===e.depthStencilTarget?this._depthAttachment=l:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),
p._validateBufferDimensions(l.descriptor,this._desc)):l&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),e=void 0,l instanceof g?(this._depthStencilTexture=l,e=this._depthStencilTexture.descriptor):(e=l,this._depthStencilTexture=new g(this._context,e)),p._validateTextureDimensions(e,this._desc))}p.create=function(n,e){return new p(n,e)};p.createWithAttachments=function(n,
e,k,l){return new p(n,k,e,l)};Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof g?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(p.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});p.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};p.prototype.attachColorTexture=function(n){if(n){p._validateTextureDimensions(n.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n.glName,0)}this._colorAttachment=n}};p.prototype.detachColorTexture=
function(){var n=void 0;if(this._colorAttachment instanceof g){n=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}this._colorAttachment=null}return n};p.prototype.attachDepthStencilTexture=function(n){if(n){var e=n.descriptor;34041!==e.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==e.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");
this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");p._validateTextureDimensions(e,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),e=this._context.gl,e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,n.glName,0));this._depthStencilTexture=
n}};p.prototype.detachDepthStencilTexture=function(){var n=this._depthStencilTexture;if(n&&this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return n};p.prototype.attachDepthStencilBuffer=function(n){if(n){var e=n.descriptor;34041!==e.internalFormat&&33189!==e.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");
p._validateBufferDimensions(e,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===e.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),e=this._context.gl,e.framebufferRenderbuffer(e.FRAMEBUFFER,1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n.glName));this._depthAttachment=n}};p.prototype.detachDepthStencilBuffer=function(){var n=this._context.gl,e=this._depthAttachment;e&&this._initialized&&
(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,1===this._desc.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,null));this._depthAttachment=null;return e};p.prototype.copyToTexture=function(n,e,k,l,m,r,u){(0>n||0>e||0>m||0>r)&&console.error("Offsets cannot be negative!");(0>=k||0>=l)&&console.error("Copy width and height must be greater than zero!");var v=this._desc,w=u.descriptor;3553!==u.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");
(n+k>v.width||e+l>v.height||m+k>w.width||r+l>w.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");v=this._context;v.bindTexture(u);v.bindFramebuffer(this);v.gl.copyTexSubImage2D(3553,0,m,r,n,e,k,l)};p.prototype.readPixels=function(n,e,k,l,m,r,u){(0>=k||0>=l)&&console.error("Copy width and height must be greater than zero!");u||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(n,
e,k,l,m,r,u)};p.prototype.resize=function(n,e){var k=this._desc;if(k.width!==n||k.height!==e)if(this._initialized)k.width=n,k.height=e,this._colorAttachment instanceof g?(l=this._colorAttachment,k=l.descriptor,k.width=n,k.height=e,this._colorAttachment.dispose(),this._colorAttachment=new g(this._context,k),p._validateTextureDimensions(l.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(k=this._depthStencilTexture.descriptor,k.width=n,k.height=
e,this._depthStencilTexture.dispose(),this._depthStencilTexture=new g(this._context,k)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{k.width=n;k.height=e;if(this._colorAttachment instanceof g){var l=this._colorAttachment;l.resize(n,e)}this._depthStencilTexture&&this._depthStencilTexture.resize(n,e)}};p.prototype.initialize=function(){if(this._initialized)return!1;
var n=this._context.gl;this._glName&&n.deleteFramebuffer(this._glName);var e=n.createFramebuffer(),k=this._desc;n.bindFramebuffer(n.FRAMEBUFFER,e);if(!this._colorAttachment)if(0===k.colorTarget)this._colorAttachment=new g(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:k.width,height:k.height});else{var l=new d(this._context,{internalFormat:32854,width:k.width,height:k.height});n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,
l.glName);this._colorAttachment=l}this._colorAttachment instanceof g&&n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this._colorAttachment.glName,0);switch(k.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new d(this._context,{internalFormat:1===k.depthStencilTarget?33189:34041,width:k.width,height:k.height}));n.framebufferRenderbuffer(n.FRAMEBUFFER,1===k.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new d(this._context,{internalFormat:36168,width:k.width,height:k.height}));n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new g(this._context,
{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:k.width,height:k.height})),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,this._depthStencilTexture.glName,0)}n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");this._glName=e;return this._initialized=!0};p.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof g){var n=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);
var e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}n.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(n=this._colorAttachment,e=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(n));this._colorAttachment=null};p.prototype._disposeDepthStencilAttachments=function(){var n=this._context.gl;this._depthAttachment&&
(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,1===this._desc.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&
(this._initialized&&(this._context.bindFramebuffer(this),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};p._validateBufferDimensions=function(n,e){console.assert(0<=n.width&&0<=n.height);void 0!==e.width&&0<=e.width&&void 0!==e.height&&0<=e.height?e.width===n.width&&e.height===n.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(e.width=n.width,e.height=n.height)};
p._validateTextureDimensions=function(n,e){console.assert(0<=n.width&&0<=n.height);3553!==n.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==e.width&&0<=e.width&&void 0!==e.height&&0<=e.height?e.width===n.width&&e.height===n.height||console.error("Color attachment texture must match the framebuffer's!"):(e.width=n.width,e.height=n.height)};p._nextId=0;return p}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(A,h,
b){return function(){function d(g,p){this._context=g;this._desc=p;this._glName=null;this._id=-1;g=this._context.gl;b("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++d._nextId;this._glName=g.createRenderbuffer();this._context.bindRenderbuffer(this);g.renderbufferStorage(g.RENDERBUFFER,p.internalFormat,p.width,p.height)}Object.defineProperty(d.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"id",
{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});d.prototype.resize=function(g,p){var n=this._context.gl,e=this._desc;if(e.width!==g||e.height!==p)e.width=g,e.height=p,this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,e.internalFormat,e.width,e.height)};d.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),
this._glName=null);b("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);this._context=null};d._nextId=0;return d}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!A)var A=1E-6;if(!h)var h="undefined"!==typeof Float32Array?Float32Array:Array;if(!b)var b=Math.random;var d={GLMAT_EPSILON:A,GLMAT_ARRAY_TYPE:h,GLMAT_RANDOM:b,setMatrixArrayType:function(n){d.GLMAT_ARRAY_TYPE=n}},g=Math.PI/180,p=180/Math.PI;d.toRadian=function(n){return n*
g};d.toDegree=function(n){return n*p};d.setMatrixArrayType(Array);return d})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(A){var h=A.GLMAT_ARRAY_TYPE;A={create:function(){var b=new h(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var d=new h(6);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];return d},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];return b},identity:function(b){b[0]=
1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},invert:function(b,d){var g=d[0],p=d[1],n=d[2],e=d[3],k=d[4];d=d[5];var l=g*e-p*n;if(!l)return null;l=1/l;b[0]=e*l;b[1]=-p*l;b[2]=-n*l;b[3]=g*l;b[4]=(n*d-e*k)*l;b[5]=(p*k-g*d)*l;return b},determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=d[4];d=d[5];var m=g[0],r=g[1],u=g[2],v=g[3],w=g[4];g=g[5];b[0]=p*m+e*r;b[1]=n*m+k*r;b[2]=p*u+e*v;b[3]=n*u+k*v;b[4]=p*w+e*g+l;b[5]=n*w+k*g+d;return b}};A.mul=
A.multiply;A.rotate=function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=d[4];d=d[5];var m=Math.sin(g);g=Math.cos(g);b[0]=p*g+e*m;b[1]=n*g+k*m;b[2]=p*-m+e*g;b[3]=n*-m+k*g;b[4]=l;b[5]=d;return b};A.scale=function(b,d,g){var p=d[1],n=d[2],e=d[3],k=d[4],l=d[5],m=g[0];g=g[1];b[0]=d[0]*m;b[1]=p*m;b[2]=n*g;b[3]=e*g;b[4]=k;b[5]=l;return b};A.translate=function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=d[4];d=d[5];var m=g[0];g=g[1];b[0]=p;b[1]=n;b[2]=e;b[3]=k;b[4]=p*m+e*g+l;b[5]=n*m+k*g+d;return b};A.fromRotation=
function(b,d){var g=Math.sin(d);d=Math.cos(d);b[0]=d;b[1]=g;b[2]=-g;b[3]=d;b[4]=0;b[5]=0;return b};A.fromScaling=function(b,d){b[0]=d[0];b[1]=0;b[2]=0;b[3]=d[1];b[4]=0;b[5]=0;return b};A.fromTranslation=function(b,d){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=d[0];b[5]=d[1];return b};A.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};A.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],
2)+1)};return A})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(A){var h=A.GLMAT_ARRAY_TYPE,b=A.GLMAT_RANDOM,d={create:function(){var g=new h(2);g[0]=0;g[1]=0;return g},clone:function(g){var p=new h(2);p[0]=g[0];p[1]=g[1];return p},fromValues:function(g,p){var n=new h(2);n[0]=g;n[1]=p;return n},copy:function(g,p){g[0]=p[0];g[1]=p[1];return g},set:function(g,p,n){g[0]=p;g[1]=n;return g},add:function(g,p,n){g[0]=p[0]+n[0];g[1]=p[1]+n[1];return g},subtract:function(g,
p,n){g[0]=p[0]-n[0];g[1]=p[1]-n[1];return g}};d.sub=d.subtract;d.multiply=function(g,p,n){g[0]=p[0]*n[0];g[1]=p[1]*n[1];return g};d.mul=d.multiply;d.divide=function(g,p,n){g[0]=p[0]/n[0];g[1]=p[1]/n[1];return g};d.div=d.divide;d.min=function(g,p,n){g[0]=Math.min(p[0],n[0]);g[1]=Math.min(p[1],n[1]);return g};d.max=function(g,p,n){g[0]=Math.max(p[0],n[0]);g[1]=Math.max(p[1],n[1]);return g};d.scale=function(g,p,n){g[0]=p[0]*n;g[1]=p[1]*n;return g};d.scaleAndAdd=function(g,p,n,e){g[0]=p[0]+n[0]*e;g[1]=
p[1]+n[1]*e;return g};d.distance=function(g,p){var n=p[0]-g[0];g=p[1]-g[1];return Math.sqrt(n*n+g*g)};d.dist=d.distance;d.squaredDistance=function(g,p){var n=p[0]-g[0];g=p[1]-g[1];return n*n+g*g};d.sqrDist=d.squaredDistance;d.length=function(g){var p=g[0];g=g[1];return Math.sqrt(p*p+g*g)};d.len=d.length;d.squaredLength=function(g){var p=g[0];g=g[1];return p*p+g*g};d.sqrLen=d.squaredLength;d.negate=function(g,p){g[0]=-p[0];g[1]=-p[1];return g};d.inverse=function(g,p){g[0]=1/p[0];g[1]=1/p[1];return g};
d.normalize=function(g,p){var n=p[0],e=p[1];n=n*n+e*e;0<n&&(n=1/Math.sqrt(n),g[0]=p[0]*n,g[1]=p[1]*n);return g};d.dot=function(g,p){return g[0]*p[0]+g[1]*p[1]};d.cross=function(g,p,n){p=p[0]*n[1]-p[1]*n[0];g[0]=g[1]=0;g[2]=p;return g};d.lerp=function(g,p,n,e){var k=p[0];p=p[1];g[0]=k+e*(n[0]-k);g[1]=p+e*(n[1]-p);return g};d.random=function(g,p){p=p||1;var n=2*b()*Math.PI;g[0]=Math.cos(n)*p;g[1]=Math.sin(n)*p;return g};d.transformMat2=function(g,p,n){var e=p[0];p=p[1];g[0]=n[0]*e+n[2]*p;g[1]=n[1]*
e+n[3]*p;return g};d.transformMat2d=function(g,p,n){var e=p[0];p=p[1];g[0]=n[0]*e+n[2]*p+n[4];g[1]=n[1]*e+n[3]*p+n[5];return g};d.transformMat3=function(g,p,n){var e=p[0];p=p[1];g[0]=n[0]*e+n[3]*p+n[6];g[1]=n[1]*e+n[4]*p+n[7];return g};d.transformMat4=function(g,p,n){var e=p[0];p=p[1];g[0]=n[0]*e+n[4]*p+n[12];g[1]=n[1]*e+n[5]*p+n[13];return g};d.forEach=function(){var g=d.create();return function(p,n,e,k,l,m){n||(n=2);e||(e=0);for(k=k?Math.min(k*n+e,p.length):p.length;e<k;e+=n)g[0]=p[e],g[1]=p[e+
1],l(g,g,m),p[e]=g[0],p[e+1]=g[1];return p}}();d.str=function(g){return"vec2("+g[0]+", "+g[1]+")"};return d})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.adjustScreenshotSettings=function(d,g){d=b({format:"png",quality:100},d);if(d.includePadding){var p=g.width;var n=g.height}else p=g.width-g.padding.left-g.padding.right,n=g.height-g.padding.top-
g.padding.bottom;var e=p/n;void 0!==d.width&&void 0===d.height?d.height=d.width/e:void 0!==d.height&&void 0===d.width&&(d.width=e*d.height);void 0!==d.height&&(d.height=Math.floor(d.height));void 0!==d.width&&(d.width=Math.floor(d.width));d.area||d.includePadding||(d.area={x:g.padding.left,y:g.padding.top,width:p,height:n});return d};h.resampleHermite=function(d,g,p,n,e,k,l){void 0===l&&(l=!0);var m=g/e;p/=k;for(var r=Math.ceil(m/2),u=Math.ceil(p/2),v=0;v<k;v++)for(var w=0;w<e;w++){for(var B=4*(w+
(l?k-v-1:v)*e),C=0,y=0,a=0,c=0,f=0,q=0,t=0,x=(v+.5)*p,z=Math.floor(v*p);z<(v+1)*p;z++){var D=Math.abs(x-(z+.5))/u,F=(w+.5)*m;D*=D;for(var G=Math.floor(w*m);G<(w+1)*m;G++){var E=Math.abs(F-(G+.5))/r;C=Math.sqrt(D+E*E);-1<=C&&1>=C&&(C=2*C*C*C-3*C*C+1,0<C&&(E=4*(G+z*g),t+=C*d[E+3],a+=C,255>d[E+3]&&(C=C*d[E+3]/250),c+=C*d[E],f+=C*d[E+1],q+=C*d[E+2],y+=C))}}n[B]=c/y;n[B+1]=f/y;n[B+2]=q/y;n[B+3]=t/a}}})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(A,
h){function b(n,e,k){void 0===e&&(e={});switch(k){case "webgl":var l=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":l=["webgl2"];break;default:l=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}k=null;for(var m=0;m<l.length;m++){var r=l[m];try{k=n.getContext(r,e)}catch(u){}if(k)break}return k}function d(n,e){(n=n.parentNode)&&(n.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
e+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(h,"__esModule",{value:!0});h.createContextOrErrorHTML=function(n,e,k){void 0===e&&(e={});if(!window.WebGLRenderingContext)return d(n,g),null;e=b(n,e,k);return e?e:(d(n,p),null)};h.createContext=b;var g='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',p='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(A,h,b,d,g,p,n){return function(){function e(k,l){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=
!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,
zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=p.default(k)?"webgl2":"webgl";this.gl=k;k instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=n.loadCapabilities(k,l);k=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:k[0],y:k[1],
width:k[2],height:k[3]};k=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:k?this.gl.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};b("esri-webgl-debug")&&(this.instanceCounter=new g);
this.enforceState()}Object.defineProperty(e.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});e.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};b("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};e.prototype.setBlendingEnabled=
function(k){this._blendEnabled!==k&&(!0===k?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=k)};e.prototype.setBlendColor=function(k,l,m,r){if(k!==this._blendColorState.r||l!==this._blendColorState.g||m!==this._blendColorState.b||r!==this._blendColorState.a)this.gl.blendColor(k,l,m,r),this._blendColorState.r=k,this._blendColorState.g=l,this._blendColorState.b=m,this._blendColorState.a=r};e.prototype.setBlendFunction=function(k,l){if(k!==this._blendFunctionState.srcRGB||
l!==this._blendFunctionState.dstRGB)this.gl.blendFunc(k,l),this._blendFunctionState.srcRGB=k,this._blendFunctionState.srcAlpha=k,this._blendFunctionState.dstRGB=l,this._blendFunctionState.dstAlpha=l};e.prototype.setBlendFunctionSeparate=function(k,l,m,r){if(this._blendFunctionState.srcRGB!==k||this._blendFunctionState.srcAlpha!==m||this._blendFunctionState.dstRGB!==l||this._blendFunctionState.dstAlpha!==r)this.gl.blendFuncSeparate(k,l,m,r),this._blendFunctionState.srcRGB=k,this._blendFunctionState.srcAlpha=
m,this._blendFunctionState.dstRGB=l,this._blendFunctionState.dstAlpha=r};e.prototype.setBlendEquation=function(k){this._blendEquationState.mode!==k&&(this.gl.blendEquation(k),this._blendEquationState.mode=k,this._blendEquationState.modeAlpha=k)};e.prototype.setBlendEquationSeparate=function(k,l){if(this._blendEquationState.mode!==k||this._blendEquationState.modeAlpha!==l)this.gl.blendEquationSeparate(k,l),this._blendEquationState.mode=k,this._blendEquationState.modeAlpha=l};e.prototype.setColorMask=
function(k,l,m,r){if(this._colorMaskState.r!==k||this._colorMaskState.g!==l||this._colorMaskState.b!==m||this._colorMaskState.a!==r)this.gl.colorMask(k,l,m,r),this._colorMaskState.r=k,this._colorMaskState.g=l,this._colorMaskState.b=m,this._colorMaskState.a=r};e.prototype.setClearColor=function(k,l,m,r){if(this._clearColor.r!==k||this._clearColor.g!==l||this._clearColor.b!==m||this._clearColor.a!==r)this.gl.clearColor(k,l,m,r),this._clearColor.r=k,this._clearColor.g=l,this._clearColor.b=m,this._clearColor.a=
r};e.prototype.setFaceCullingEnabled=function(k){this._polygonCullingEnabled!==k&&(!0===k?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=k)};e.prototype.setPolygonOffsetFillEnabled=function(k){this._polygonOffsetFillEnabled!==k&&(!0===k?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=k)};e.prototype.setPolygonOffset=function(k,l){if(this._polygonOffset[0]!==k||this._polygonOffset[1]!==
l)this._polygonOffset[0]=k,this._polygonOffset[1]=l,this.gl.polygonOffset(k,l)};e.prototype.setCullFace=function(k){this._cullFace!==k&&(this.gl.cullFace(k),this._cullFace=k)};e.prototype.setFrontFace=function(k){this._frontFace!==k&&(this.gl.frontFace(k),this._frontFace=k)};e.prototype.setScissorTestEnabled=function(k){this._scissorTestEnabled!==k&&(!0===k?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=k)};e.prototype.setScissorRect=function(k,
l,m,r){if(this._scissorRect.x!==k||this._scissorRect.y!==l||this._scissorRect.width!==m||this._scissorRect.height!==r)this.gl.scissor(k,l,m,r),this._scissorRect.x=k,this._scissorRect.y=l,this._scissorRect.width=m,this._scissorRect.height=r};e.prototype.setDepthTestEnabled=function(k){this._depthTestEnabled!==k&&(!0===k?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=k)};e.prototype.setClearDepth=function(k){this._clearDepth!==k&&(this.gl.clearDepth(k),
this._clearDepth=k)};e.prototype.setDepthFunction=function(k){this._depthFunction!==k&&(this.gl.depthFunc(k),this._depthFunction=k)};e.prototype.setDepthWriteEnabled=function(k){this._depthWriteEnabled!==k&&(this.gl.depthMask(k),this._depthWriteEnabled=k)};e.prototype.setDepthRange=function(k,l){if(this._depthRange.zNear!==k||this._depthRange.zFar!==l)this.gl.depthRange(k,l),this._depthRange.zNear=k,this._depthRange.zFar=l};e.prototype.setStencilTestEnabled=function(k){this._stencilTestEnabled!==
k&&(!0===k?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=k)};e.prototype.setClearStencil=function(k){k!==this._clearStencil&&(this.gl.clearStencil(k),this._clearStencil=k)};e.prototype.setStencilFunction=function(k,l,m){if(this._stencilFunction.func!==k||this._stencilFunction.ref!==l||this._stencilFunction.mask!==m)this.gl.stencilFunc(k,l,m),this._stencilFunction.face=1032,this._stencilFunction.func=k,this._stencilFunction.ref=l,this._stencilFunction.mask=
m};e.prototype.setStencilFunctionSeparate=function(k,l,m,r){if(this._stencilFunction.face!==k||this._stencilFunction.func!==l||this._stencilFunction.ref!==m||this._stencilFunction.mask!==r)this.gl.stencilFuncSeparate(k,l,m,r),this._stencilFunction.face=k,this._stencilFunction.func=l,this._stencilFunction.ref=m,this._stencilFunction.mask=r};e.prototype.setStencilWriteMask=function(k){this._stencilWriteMask!==k&&(this.gl.stencilMask(k),this._stencilWriteMask=k)};e.prototype.setStencilOp=function(k,
l,m){if(this._stencilOperation.fail!==k||this._stencilOperation.zFail!==l||this._stencilOperation.zPass!==m)this.gl.stencilOp(k,l,m),this._stencilOperation.face=1032,this._stencilOperation.fail=k,this._stencilOperation.zFail=l,this._stencilOperation.zPass=m};e.prototype.setStencilOpSeparate=function(k,l,m,r){if(this._stencilOperation.face!==k||this._stencilOperation.fail!==l||this._stencilOperation.zFail!==m||this._stencilOperation.zPass!==r)this.gl.stencilOpSeparate(k,l,m,r),this._stencilOperation.face=
k,this._stencilOperation.face=k,this._stencilOperation.fail=l,this._stencilOperation.zFail=m,this._stencilOperation.zPass=r};e.prototype.setLineWidth=function(k){var l=this._lineWidth;this._lineWidth!==k&&(this.gl.lineWidth(k),this._lineWidth=k);return l};e.prototype.setActiveTexture=function(k){var l=this._activeTextureUnit;0<=k&&k!==this._activeTextureUnit&&(this.gl.activeTexture(d.BASE_TEXTURE_UNIT+k),this._activeTextureUnit=k);return l};e.prototype.clear=function(k){k&&this.gl.clear(k)};e.prototype.drawArrays=
function(k,l,m){this.gl.drawArrays(k,l,m)};e.prototype.drawElements=function(k,l,m,r){5123===m?this.gl.drawElements(k,l,m,r):5125===m&&this.gl.drawElements(k,l,m,r)};Object.defineProperty(e.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});e.prototype.setViewport=function(k,l,m,r){var u=this._viewport;if(u.x!==k||u.y!==l||u.width!==m||u.height!==r)u.x=k,u.y=l,u.width=m,u.height=r,this.gl.viewport(k,l,m,r)};e.prototype.getViewport=function(){return{x:this._viewport.x,
y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};e.prototype.bindProgram=function(k){k?this._activeShaderProgram!==k&&(k.initialize(),this.gl.useProgram(k.glName),this._activeShaderProgram=k):(this.gl.useProgram(null),this._activeShaderProgram=null)};e.prototype.bindTexture=function(k,l){void 0===l&&(l=0);-1===e._MAX_TEXTURE_IMAGE_UNITS&&(e._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(l>=e._MAX_TEXTURE_IMAGE_UNITS||0>l)&&console.error("Input texture unit is out of range of available units!");
var m=this._textureUnitMap[l];this.setActiveTexture(l);null==k||null==k.glName?(null!=m&&(this.gl.bindTexture(m.descriptor.target,null),m.setBoundToUnit(l,!1)),this._textureUnitMap[l]=null):m&&m.id===k.id?k.applyChanges():(this.gl.bindTexture(k.descriptor.target,k.glName),k.setBoundToUnit(l,!0),k.applyChanges(),this._textureUnitMap[l]=k)};e.prototype.bindFramebuffer=function(k){k?this._activeFramebuffer!==k&&(k.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,k.glName),this._activeFramebuffer=
k):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};e.prototype.bindBuffer=function(k){k&&(34962===k.bufferType?this._activeVertexBuffer=e._bindBuffer(this.gl,k,k.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=e._bindBuffer(this.gl,k,k.bufferType,this._activeIndexBuffer))};e.prototype.bindRenderbuffer=function(k){var l=this.gl;k||(l.bindRenderbuffer(l.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==k&&(l.bindRenderbuffer(l.RENDERBUFFER,
k.glName),this._activeRenderbuffer=k)};e.prototype.unbindBuffer=function(k){34962===k?this._activeVertexBuffer=e._bindBuffer(this.gl,null,k,this._activeVertexBuffer):this._activeIndexBuffer=e._bindBuffer(this.gl,null,k,this._activeIndexBuffer)};e.prototype.bindVAO=function(k){k?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===k.id||(k.bind(),this._activeVertexArrayObject=k):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};
e.prototype.getBoundTexture=function(k){return this._textureUnitMap[k]};e.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};e.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};e.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var k=0;k<this.parameters.maxTextureImageUnits;k++)this.bindTexture(null,k);this.setBlendingEnabled(!1);this.setBlendFunction(1,
0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,
0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};e.prototype.enforceState=function(){var k=this.gl,l=this._capabilities.vao;l&&l.bindVertexArray(null);for(var m=0;m<this.parameters.maxVertexAttributes;m++)k.disableVertexAttribArray(m);this._activeVertexBuffer?k.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
k.bindBuffer(34962,null);this._activeIndexBuffer?k.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):k.bindBuffer(34963,null);if(l&&this._activeVertexArrayObject){if(l=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(l)}k.bindFramebuffer(k.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);k.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);k.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);k.bindRenderbuffer(k.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?k.enable(this.gl.BLEND):k.disable(this.gl.BLEND);k.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);k.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);k.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);k.clearDepth(this._clearDepth);k.clearStencil(this._clearStencil);k.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);k.cullFace(this._cullFace);k.depthFunc(this._depthFunction);k.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?k.enable(k.DEPTH_TEST):k.disable(k.DEPTH_TEST);k.depthMask(this._depthWriteEnabled);k.frontFace(this._frontFace);k.lineWidth(this._lineWidth);
!0===this._polygonCullingEnabled?k.enable(k.CULL_FACE):k.disable(k.CULL_FACE);k.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?k.enable(k.POLYGON_OFFSET_FILL):k.disable(k.POLYGON_OFFSET_FILL);k.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?k.enable(k.SCISSOR_TEST):k.disable(k.SCISSOR_TEST);k.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
k.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?k.enable(k.STENCIL_TEST):k.disable(k.STENCIL_TEST);k.stencilMask(this._stencilWriteMask);for(l=0;l<this.parameters.maxTextureImageUnits;l++)k.activeTexture(d.BASE_TEXTURE_UNIT+l),k.bindTexture(3553,null),(m=this._textureUnitMap[l])&&k.bindTexture(m.descriptor.target,m.glName);k.activeTexture(d.BASE_TEXTURE_UNIT+this._activeTextureUnit);
k.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};e._bindBuffer=function(k,l,m,r){if(!l)return k.bindBuffer(m,null),null;if(r===l)return r;k.bindBuffer(m,l.glName);return l};e._MAX_TEXTURE_IMAGE_UNITS=-1;return e}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require",
"exports"],function(A,h){return function(){function b(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}b.prototype.incrementCount=function(d){switch(d){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};
b.prototype.decrementCount=function(d){switch(d){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};b.prototype.printResourceCount=function(){console.log("Live objects:");console.log("Textures: "+this._instanceCount.textureCount);console.log("Buffers: "+this._instanceCount.bufferCount);
console.log("VAOs: "+this._instanceCount.vaoCount);console.log("Programs: "+this._instanceCount.programCount);console.log("Framebuffers: "+this._instanceCount.framebufferCount);console.log("Renderbuffers: "+this._instanceCount.renderBufferCount)};return b}()})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.default=function(b){return window.WebGL2RenderingContext&&b instanceof
window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(A,h,b,d,g,p){function n(e,k,l,m,r){if(m&&g.default(e))return!0;if(k[l])return!1;for(k=0;k<r.length;k++)if(e.getExtension(r[k]))return!0;return!1}Object.defineProperty(h,"__esModule",{value:!0});h.loadCapabilities=function(e,k){k=k&&k.disabledExtensions||{};var l=d.load(e,k),m=p.load(e,
k);var r=k.compressedTextureS3TC?null:(r=e.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var u=k.textureFilterAnisotropic?null:(u=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?
{MAX_TEXTURE_MAX_ANISOTROPY:u.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:u.TEXTURE_MAX_ANISOTROPY_EXT}:null;var v=b.load(e,k);if(g.default(e))var w=k.colorBufferFloat||!e.getExtension("EXT_color_buffer_float")?null:{R16F:e.R16F,RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F};else if(e instanceof WebGLRenderingContext){w=!k.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float");var B=!k.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float");
w=w||B?{RGBA16F:w?w.RGBA16F_EXT:void 0,RGBA32F:B?B.RGBA32F_EXT:void 0}:null}else w=void 0;B=g.default(e)?{MIN:e.MIN,MAX:e.MAX}:k.blendMinMax?null:(B=e.getExtension("EXT_blend_minmax"))?{MIN:B.MIN_EXT,MAX:B.MAX_EXT}:null;return{instancing:l,vao:m,compressedTextureS3TC:r,textureFilterAnisotropic:u,disjointTimerQuery:v,colorBufferFloat:w,blendMinMax:B,depthTexture:n(e,k,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:n(e,k,"standardDerivatives",
!0,["OES_standard_derivatives"]),shaderTextureLOD:n(e,k,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:n(e,k,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:n(e,k,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.load=function(d,g){if(g.disjointTimerQuery)return null;var p=d.getExtension("EXT_disjoint_timer_query")||
d.getExtension("EXT_disjoint_timer_query_webgl2");return p?b.default(d)?{createQuery:function(){return d.createQuery()},resultAvailable:function(n){return d.getQueryParameter(n,d.QUERY_RESULT_AVAILABLE)},getResult:function(n){return d.getQueryParameter(n,d.QUERY_RESULT)},disjoint:function(){return d.getParameter(p.GPU_DISJOINT_EXT)},beginTimeElapsed:function(n){return d.beginQuery(p.TIME_ELAPSED_EXT,n)},endTimeElapsed:function(){return d.endQuery(p.TIME_ELAPSED_EXT)},createTimestamp:function(n){return p.queryCounterEXT(n,
p.TIMESTAMP_EXT)},timestampBits:function(){return d.getQuery(p.TIMESTAMP_EXT,p.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return p.createQueryEXT()},resultAvailable:function(n){return p.getQueryObjectEXT(n,p.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(n){return p.getQueryObjectEXT(n,p.QUERY_RESULT_EXT)},disjoint:function(){return d.getParameter(p.GPU_DISJOINT_EXT)},beginTimeElapsed:function(n){return p.beginQueryEXT(p.TIME_ELAPSED_EXT,n)},endTimeElapsed:function(){return p.endQueryEXT(p.TIME_ELAPSED_EXT)},
createTimestamp:function(n){return p.queryCounterEXT(n,p.TIMESTAMP_EXT)},timestampBits:function(){return p.getQueryEXT(p.TIMESTAMP_EXT,p.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.load=function(d,g){return b.default(d)?{drawArraysInstanced:d.drawArraysInstanced.bind(d),drawElementsInstanced:d.drawElementsInstanced.bind(d),
vertexAttribDivisor:d.vertexAttribDivisor.bind(d)}:g.angleInstancedArrays?null:(d=d.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:d.drawArraysInstancedANGLE.bind(d),drawElementsInstanced:d.drawElementsInstancedANGLE.bind(d),vertexAttribDivisor:d.vertexAttribDivisorANGLE.bind(d)}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.load=
function(d,g){return b.default(d)?{createVertexArray:d.createVertexArray.bind(d),deleteVertexArray:d.deleteVertexArray.bind(d),bindVertexArray:d.bindVertexArray.bind(d)}:g.vao?null:(d=d.getExtension("OES_vertex_array_object")||d.getExtension("MOZ_OES_vertex_array_object")||d.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:d.createVertexArrayOES.bind(d),deleteVertexArray:d.deleteVertexArrayOES.bind(d),bindVertexArray:d.bindVertexArrayOES.bind(d)}:null}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLFeatureView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec3 ../../../../geometry/Point ../Container ../StageGL ../../engine/webgl/TileData ./enums ./GeometryUtils ./TextureManager ./Utils ./WGLPainter ./WGLRendererInfo".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y){Object.defineProperty(h,"__esModule",{value:!0});A=function(a){function c(f){var q=a.call(this)||this;q._rendererInfo=new y;q._stage=new m;q._container=null;q._tileCoordinateScale=e.create();q._orientationVec=e.fromValues(0,0,1);q._displayScale=e.create();q._defaultTransform=n.create();q._pointToCallbacks=new Map;q._highlightIDs=new Set;q._tileId=void 0;q._patches={};q._displayWidth=0;q._displayHeight=0;q._highlightOptionsUpToDate=!1;q.layer=null;q.textureManager=
new w;q.highlightOptions=f.highlightOptions;q.tileInfoView=f.tileInfoView;q._stage.useContextVersion("webgl");q.layer=f.layer;q._layerView=f.layerView;return q}d(c,a);c.prototype.dispose=function(){this.textureManager&&(this.textureManager.dispose(),this.textureManager=null);this.removeAllChildren();for(var f=0,q=this.children;f<q.length;f++)q[f].dispose()};c.prototype.disposeWebGLResources=function(){for(var f=0,q=this.children;f<q.length;f++)q[f].clear()};c.prototype.displayWidth=function(){return this._displayWidth};
Object.defineProperty(c.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"highlightOptions",{get:function(){return this._highlightOptions},set:function(f){this._highlightOptions=f;this._highlightOptionsUpToDate=!1},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visualVariablesInfo",{get:function(){return this._visualVariablesInfo},set:function(f){this._visualVariablesInfo=f;this.requestRender()},
enumerable:!0,configurable:!0});c.prototype.install=function(f){f.addChild(this._stage);this._stage.addChild(this);this._container=f};c.prototype.uninstall=function(f){f.removeChild(this._stage);this._stage.removeChild(this);this.dispose();this._container=null};c.prototype.hitTest=function(f,q){var t=this,x=[f,q];return g.create(function(z,D){t._pointToCallbacks.set(x,{resolve:z,reject:D});t.requestRender()},function(){t._pointToCallbacks.has(x)&&t._pointToCallbacks.delete(x)})};c.prototype.highlight=
function(f){var q=this;q.addHighlight(f);return{remove:function(){q.removeHighlight(f)}}};c.prototype.setHighlight=function(f){this._highlightIDs.clear();this.addHighlight(f)};c.prototype.setVisibility=function(f,q){for(var t=function(D){if(D.data){var F=D.data.tileDisplayData.displayObjectRegistry,G=f.filter(function(E){return F.has(E.id)});D.setVisibility(G,q)}},x=0,z=this.children;x<z.length;x++)t(z[x])};c.prototype.setVisibilityRange=function(f,q,t,x){for(var z=0,D=this.children;z<D.length;z++){var F=
D[z];F.data&&F.data.tileDisplayData.displayObjectRegistry.has(f)&&F.setVisibilityRange(f,q,t,x)}};c.prototype.addHighlight=function(f){for(var q=0;q<f.length;q++)this._highlightIDs.add(f[q]);this._buildHLList()};c.prototype.removeHighlight=function(f){for(var q=0;q<f.length;q++)this._highlightIDs.delete(f[q]);this._buildHLList()};c.prototype.getMaterialItems=function(f){if(f&&0!==f.length){for(var q=[],t=0;t<f.length;t++){var x=f[t];q.push(this.textureManager.rasterizeItem(x.symbol,x.glyphIds))}return p.all(q).then(function(z){return z.map(function(D,
F){return{id:F,mosaicItem:D}})})}};c.prototype.onTileData=function(f,q){var t=null;q&&(t=r.decode(q));f.setData(t,null!=this.visualVariablesInfo.vvFields,this.layer.labelsVisible);f.buildHLList(this._highlightIDs);this._layerView&&this._layerView.view.labelManager.requestUpdate();this.addChild(f);this._stage.fadeInLabels();this.requestRender()};c.prototype.onTileDataUpdate=function(f,q){this._patches[f.key.id]=this._patches[f.key.id]||[];this._patches[f.key.id].push({tile:f,patch:q});this._stage.fadeInLabels();
this.requestRender()};c.prototype.onTileError=function(f){f.clear();f.buildHLList(this._highlightIDs);this.addChild(f);this.requestRender()};c.prototype.addChild=function(f){var q=a.prototype.addChild.call(this,f);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.addTile(this.layer.uid,f);this._buildHLList();return q};c.prototype.removeChild=function(f){var q=a.prototype.removeChild.call(this,f);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.removeTile(this.layer.uid,
f.key.id);this._buildHLList();return q};c.prototype.prepareChildrenRenderParameters=function(f){this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,f.state);var q=this.tileInfoView.getClosestInfoForScale(f.state.scale).level,t=this.tileInfoView.tileInfo.scaleToZoom(f.state.scale);return b({},f,{rendererInfo:this._rendererInfo,requiredLevel:q,displayLevel:t})};c.prototype.renderChildren=function(f){for(var q=this,t=0;this._nextTile()&&4>t;){for(var x=0,z=this._patches[this._tileId];x<
z.length;x++){var D=z[x];this._patchTileVisuals(D.tile,D.patch)}delete this._patches[this._tileId];++t}t=f.painter;t.bindTextureManager(this.textureManager);this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,f.state);this.sortChildren(function(F,G){return 0!==F.key.level-G.key.level?F.key.level-G.key.level:0!==F.key.row-G.key.row?F.key.row-G.key.row:F.key.col-G.key.col});x=C.default.toWGLDrawPhases(f.drawPhase);if(0<x.length&&x[0]===u.WGLDrawPhase.LABEL||x[0]===u.WGLDrawPhase.LABEL_ALPHA){z=
this.layer;if(!(z.labelsVisible&&z.labelingInfo&&0<z.labelingInfo.length))return;this._updateTilesTransform(f.state,f.requiredLevel);t.update(f.state,f.pixelRatio)}t.draw(f,this.children,x,this._painterOptions);0<this._highlightIDs.size&&t.highlight(f,this.children);0!==this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(F,G){F.resolve(q._hitTest(f,G[0],G[1]))}),this._pointToCallbacks.clear())};c.prototype.attachChild=function(f,q){return f.attach(q)};c.prototype.detachChild=function(f,
q){f.detach(q)};c.prototype.renderChild=function(f,q){f.doRender(q)};c.prototype.beforeRenderChildren=function(f,q){this._updateTilesTransform(f.state,this.tileInfoView.getClosestInfoForScale(f.state.scale).level);this._updateHighlightOptions();this._stage.opacity=this._container.opacity};c.prototype._hitTest=function(f,q,t){var x=f.painter,z=f.requiredLevel,D=[0,0];f.state.toMap(D,[q,t]);q=f.state.clone();t=q.viewpoint.clone();t.targetGeometry=new k(D[0],D[1],f.state.spatialReference);q.viewpoint=
t;q.size=[B.C_HITTEST_SEARCH_SIZE,B.C_HITTEST_SEARCH_SIZE];this._updateTilesTransform(q,z);x.update(q,f.pixelRatio);return x.hitTest({context:f.context,drawPhase:u.WGLDrawPhase.HITTEST,painter:x,pixelRatio:f.pixelRatio,displayLevel:f.displayLevel,rendererInfo:this._rendererInfo,requiredLevel:z,state:q,stationary:f.stationary},this.children)};c.prototype._updateTilesTransform=function(f,q){var t=1/f.width,x=1/f.height,z=[0,0];this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[q].resolution,
f.resolution,f.rotation,this.tileInfoView.tileInfo.size[0],f.width,f.height,this._defaultTransform);for(var D=0,F=this.children;D<F.length;D++){var G=F[D];f.toScreen(z,G.coords);z[1]=f.height-z[1];G.tileTransform.displayCoord[0]=2*z[0]*t-1;G.tileTransform.displayCoord[1]=2*z[1]*x-1;G.key.level===q?G.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[G.key.level].resolution,f.resolution,f.rotation,this.tileInfoView.tileInfo.size[0],
f.width,f.height,G.tileTransform.transform)}};c.prototype._calculateRelativeViewProjMat=function(f,q,t,x,z,D,F){f/=q;this._tileCoordinateScale.set([f,f,1]);if(z!==this._displayWidth||D!==this._displayHeight)this._displayScale.set([2/z,-2/D,1]),this._displayWidth=z,this._displayHeight=D;n.identity(F);n.scale(F,F,this._tileCoordinateScale);n.rotate(F,F,-t*v.C_DEG_TO_RAD,this._orientationVec);n.scale(F,F,this._displayScale);n.transpose(F,F)};c.prototype._updateHighlightOptions=function(){if(!this._highlightOptionsUpToDate&&
this.parent){var f=this.parent.glPainter,q=this._highlightOptions;if(f){var t=q.color.toRgba();t[0]/=255;t[1]/=255;t[2]/=255;var x=t.slice();t[3]*=q.fillOpacity;x[3]*=q.haloOpacity;f.setHighlightOptions({fillColor:t,outlineColor:x,outlineWidth:2,outerHaloWidth:.3,innerHaloWidth:.3,outlinePosition:0})}}};c.prototype._buildHLList=function(){for(var f=0,q=this.children;f<q.length;f++)q[f].buildHLList(this._highlightIDs);this.requestRender()};c.prototype._nextTile=function(){var f=Object.keys(this._patches);
if(0===f.length)return this._tileId=void 0,!1;if(!this._tileId)return this._tileId=f[0],!0;var q=f.indexOf(this._tileId);q=(q+1)%f.length;this._tileId=f[q];return!0};c.prototype._patchTileVisuals=function(f,q){var t=q.addOrUpdate?r.decode(q.addOrUpdate):null;f.patchData({remove:q.remove||[],addOrUpdate:t},this.layer.labelsVisible);f.buildHLList(this._highlightIDs);this.contains(f)||this.addChild(f)};return c}(l);h.default=A})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],
function(A){var h={create:function(){var b=new A.ARRAY_TYPE(3);b[0]=0;b[1]=0;b[2]=0;return b},clone:function(b){var d=new A.ARRAY_TYPE(3);d[0]=b[0];d[1]=b[1];d[2]=b[2];return d},fromValues:function(b,d,g){var p=new A.ARRAY_TYPE(3);p[0]=b;p[1]=d;p[2]=g;return p},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];return b},set:function(b,d,g,p){b[0]=d;b[1]=g;b[2]=p;return b},add:function(b,d,g){b[0]=d[0]+g[0];b[1]=d[1]+g[1];b[2]=d[2]+g[2];return b},subtract:function(b,d,g){b[0]=d[0]-g[0];b[1]=d[1]-g[1];
b[2]=d[2]-g[2];return b}};h.sub=h.subtract;h.multiply=function(b,d,g){b[0]=d[0]*g[0];b[1]=d[1]*g[1];b[2]=d[2]*g[2];return b};h.mul=h.multiply;h.divide=function(b,d,g){b[0]=d[0]/g[0];b[1]=d[1]/g[1];b[2]=d[2]/g[2];return b};h.div=h.divide;h.ceil=function(b,d){b[0]=Math.ceil(d[0]);b[1]=Math.ceil(d[1]);b[2]=Math.ceil(d[2]);return b};h.floor=function(b,d){b[0]=Math.floor(d[0]);b[1]=Math.floor(d[1]);b[2]=Math.floor(d[2]);return b};h.min=function(b,d,g){b[0]=Math.min(d[0],g[0]);b[1]=Math.min(d[1],g[1]);
b[2]=Math.min(d[2],g[2]);return b};h.max=function(b,d,g){b[0]=Math.max(d[0],g[0]);b[1]=Math.max(d[1],g[1]);b[2]=Math.max(d[2],g[2]);return b};h.round=function(b,d){b[0]=Math.round(d[0]);b[1]=Math.round(d[1]);b[2]=Math.round(d[2]);return b};h.scale=function(b,d,g){b[0]=d[0]*g;b[1]=d[1]*g;b[2]=d[2]*g;return b};h.scaleAndAdd=function(b,d,g,p){b[0]=d[0]+g[0]*p;b[1]=d[1]+g[1]*p;b[2]=d[2]+g[2]*p;return b};h.distance=function(b,d){var g=d[0]-b[0],p=d[1]-b[1];b=d[2]-b[2];return Math.sqrt(g*g+p*p+b*b)};h.dist=
h.distance;h.squaredDistance=function(b,d){var g=d[0]-b[0],p=d[1]-b[1];b=d[2]-b[2];return g*g+p*p+b*b};h.sqrDist=h.squaredDistance;h.length=function(b){var d=b[0],g=b[1];b=b[2];return Math.sqrt(d*d+g*g+b*b)};h.len=h.length;h.squaredLength=function(b){var d=b[0],g=b[1];b=b[2];return d*d+g*g+b*b};h.sqrLen=h.squaredLength;h.negate=function(b,d){b[0]=-d[0];b[1]=-d[1];b[2]=-d[2];return b};h.inverse=function(b,d){b[0]=1/d[0];b[1]=1/d[1];b[2]=1/d[2];return b};h.normalize=function(b,d){var g=d[0],p=d[1],
n=d[2];g=g*g+p*p+n*n;0<g&&(g=1/Math.sqrt(g),b[0]=d[0]*g,b[1]=d[1]*g,b[2]=d[2]*g);return b};h.dot=function(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]};h.cross=function(b,d,g){var p=d[0],n=d[1];d=d[2];var e=g[0],k=g[1];g=g[2];b[0]=n*g-d*k;b[1]=d*e-p*g;b[2]=p*k-n*e;return b};h.lerp=function(b,d,g,p){var n=d[0],e=d[1];d=d[2];b[0]=n+p*(g[0]-n);b[1]=e+p*(g[1]-e);b[2]=d+p*(g[2]-d);return b};h.hermite=function(b,d,g,p,n,e){var k=e*e,l=k*(2*e-3)+1,m=k*(e-2)+e,r=k*(e-1);e=k*(3-2*e);b[0]=d[0]*l+g[0]*m+p[0]*r+
n[0]*e;b[1]=d[1]*l+g[1]*m+p[1]*r+n[1]*e;b[2]=d[2]*l+g[2]*m+p[2]*r+n[2]*e;return b};h.bezier=function(b,d,g,p,n,e){var k=1-e,l=k*k,m=e*e,r=l*k;l*=3*e;k*=3*m;e*=m;b[0]=d[0]*r+g[0]*l+p[0]*k+n[0]*e;b[1]=d[1]*r+g[1]*l+p[1]*k+n[1]*e;b[2]=d[2]*r+g[2]*l+p[2]*k+n[2]*e;return b};h.random=function(b,d){d=d||1;var g=2*A.RANDOM()*Math.PI,p=2*A.RANDOM()-1,n=Math.sqrt(1-p*p)*d;b[0]=Math.cos(g)*n;b[1]=Math.sin(g)*n;b[2]=p*d;return b};h.transformMat4=function(b,d,g){var p=d[0],n=d[1];d=d[2];var e=g[3]*p+g[7]*n+g[11]*
d+g[15];e=e||1;b[0]=(g[0]*p+g[4]*n+g[8]*d+g[12])/e;b[1]=(g[1]*p+g[5]*n+g[9]*d+g[13])/e;b[2]=(g[2]*p+g[6]*n+g[10]*d+g[14])/e;return b};h.transformMat3=function(b,d,g){var p=d[0],n=d[1];d=d[2];b[0]=p*g[0]+n*g[3]+d*g[6];b[1]=p*g[1]+n*g[4]+d*g[7];b[2]=p*g[2]+n*g[5]+d*g[8];return b};h.transformQuat=function(b,d,g){var p=d[0],n=d[1],e=d[2];d=g[0];var k=g[1],l=g[2];g=g[3];var m=g*p+k*e-l*n,r=g*n+l*p-d*e,u=g*e+d*n-k*p;p=-d*p-k*n-l*e;b[0]=m*g+p*-d+r*-l-u*-k;b[1]=r*g+p*-k+u*-d-m*-l;b[2]=u*g+p*-l+m*-k-r*-d;
return b};h.rotateX=function(b,d,g,p){var n=[],e=[];n[0]=d[0]-g[0];n[1]=d[1]-g[1];n[2]=d[2]-g[2];e[0]=n[0];e[1]=n[1]*Math.cos(p)-n[2]*Math.sin(p);e[2]=n[1]*Math.sin(p)+n[2]*Math.cos(p);b[0]=e[0]+g[0];b[1]=e[1]+g[1];b[2]=e[2]+g[2];return b};h.rotateY=function(b,d,g,p){var n=[],e=[];n[0]=d[0]-g[0];n[1]=d[1]-g[1];n[2]=d[2]-g[2];e[0]=n[2]*Math.sin(p)+n[0]*Math.cos(p);e[1]=n[1];e[2]=n[2]*Math.cos(p)-n[0]*Math.sin(p);b[0]=e[0]+g[0];b[1]=e[1]+g[1];b[2]=e[2]+g[2];return b};h.rotateZ=function(b,d,g,p){var n=
[],e=[];n[0]=d[0]-g[0];n[1]=d[1]-g[1];n[2]=d[2]-g[2];e[0]=n[0]*Math.cos(p)-n[1]*Math.sin(p);e[1]=n[0]*Math.sin(p)+n[1]*Math.cos(p);e[2]=n[2];b[0]=e[0]+g[0];b[1]=e[1]+g[1];b[2]=e[2]+g[2];return b};h.forEach=function(){var b=h.create();return function(d,g,p,n,e,k){g||(g=3);p||(p=0);for(n=n?Math.min(n*g+p,d.length):d.length;p<n;p+=g)b[0]=d[p],b[1]=d[p+1],b[2]=d[p+2],e(b,b,k),d[p]=b[0],d[p+1]=b[1],d[p+2]=b[2];return d}}();h.angle=function(b,d){b=h.fromValues(b[0],b[1],b[2]);d=h.fromValues(d[0],d[1],d[2]);
h.normalize(b,b);h.normalize(d,d);d=h.dot(b,d);return 1<d?0:Math.acos(d)};h.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"};h.exactEquals=function(b,d){return b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]};h.equals=function(b,d){var g=b[0],p=b[1];b=b[2];var n=d[0],e=d[1];d=d[2];return Math.abs(g-n)<=A.EPSILON*Math.max(1,Math.abs(g),Math.abs(n))&&Math.abs(p-e)<=A.EPSILON*Math.max(1,Math.abs(p),Math.abs(e))&&Math.abs(b-d)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))};return h})},"esri/layers/vectorTiles/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l){function m(v){return v&&("esri.geometry.SpatialReference"===v.declaredClass||null!=v.wkid)}var r=[0,0],u=g.getLogger("esri.geometry.Point");A=function(v){function w(C,y,a,c,f){C=v.call(this)||this;C.x=0;C.y=0;C.z=void 0;C.m=void 0;C.type="point";return C}b(w,v);var B=w;w.copy=function(C,y){y.x=C.x;y.y=C.y;y.z=C.z;y.m=C.m;y.spatialReference=Object.isFrozen(C.spatialReference)?C.spatialReference:C.spatialReference.clone()};w.distance=function(C,y){var a=C.x-y.x,c=C.y-y.y;
C=C.hasZ&&y.hasZ?C.z-y.z:0;return Math.sqrt(a*a+c*c+C*C)};w.prototype.normalizeCtorArgs=function(C,y,a,c,f){if(Array.isArray(C)){var q=C;f=y;C=q[0];y=q[1];a=q[2];c=q[3]}else if(C&&"object"===typeof C){if(q=C,C=null!=q.x?q.x:q.longitude,y=null!=q.y?q.y:q.latitude,a=null!=q.z?q.z:q.altitude,c=q.m,(f=q.spatialReference)&&"esri.geometry.SpatialReference"!==f.declaredClass&&(f=new e(f)),null!=q.longitude||null!=q.latitude)null==q.longitude?u.warn(".longitude\x3d","Latitude was defined without longitude"):
null==q.latitude?u.warn(".latitude\x3d","Longitude was defined without latitude"):!q.declaredClass&&f&&f.isWebMercator&&(y=l.lngLatToXY(q.longitude,q.latitude,r),C=y[0],y=y[1])}else m(a)?(f=a,a=null):m(c)&&(f=c,c=null);C={x:C,y:y};null!=f&&(C.spatialReference=f);null!=a&&(C.z=a);null!=c&&(C.m=c);return C};Object.defineProperty(w.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(C){var y=this._get("hasM");C!==y&&(this._set("m",C?0:void 0),this._set("hasM",C))},enumerable:!0,configurable:!0});
Object.defineProperty(w.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(C){var y=this._get("hasZ");C!==y&&(this._set("z",C?0:void 0),this._set("hasZ",C))},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"latitude",{get:function(){var C=this._get("spatialReference");if(C){if(C.isWebMercator)return l.xyToLngLat(this.x,this.y,r)[1];if(C.isWGS84)return this._get("y")}return null},set:function(C){var y=this._get("spatialReference");y&&(y.isWebMercator?this._set("y",
l.lngLatToXY(this.x,C,r)[1]):y.isWGS84&&this._set("y",C),this._set("latitude",C))},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"longitude",{get:function(){var C=this._get("spatialReference");if(C){if(C.isWebMercator)return l.xyToLngLat(this._get("x"),this._get("y"),r)[0];if(C.isWGS84)return this._get("x")}return null},set:function(C){var y=this._get("spatialReference");y&&(y.isWebMercator?this._set("x",l.lngLatToXY(C,this._get("y"),r)[0]):y.isWGS84&&this._set("x",C),this._set("longitude",
C))},enumerable:!0,configurable:!0});w.prototype.clone=function(){var C=new B;C.x=this.x;C.y=this.y;C.z=this.z;C.m=this.m;C.spatialReference=this.spatialReference;return C};w.prototype.copy=function(C){B.copy(C,this);return this};w.prototype.equals=function(C){if(!C)return!1;var y=this.x,a=this.y,c=this.z,f=this.m,q=this.spatialReference,t=C.z,x=C.m,z=C.x,D=C.y;C=C.spatialReference;if(!q.equals(C))if(q.isWebMercator&&C.isWGS84)D=l.lngLatToXY(z,D),z=D[0],D=D[1],C=q;else if(q.isWGS84&&C.isWebMercator)D=
l.xyToLngLat(z,D),z=D[0],D=D[1],C=q;else return!1;return y===z&&a===D&&c===t&&f===x&&q.wkid===C.wkid};w.prototype.offset=function(C,y,a){this.x+=C;this.y+=y;null!=a&&this.hasZ&&(this.z+=a);return this};w.prototype.normalize=function(){if(!this.spatialReference)return this;var C=k.getInfo(this.spatialReference);if(!C)return this;var y=this.x,a=C.valid;C=a[0];var c=a[1];a=2*c;y>c?(C=Math.ceil(Math.abs(y-c)/a),y-=C*a):y<C&&(C=Math.ceil(Math.abs(y-C)/a),y+=C*a);this._set("x",y);return this};w.prototype.distance=
function(C){return B.distance(this,C)};w.prototype.toArray=function(){var C=this.hasZ,y=this.hasM;return C&&y?[this.x,this.y,this.z,this.m]:C?[this.x,this.y,this.z]:y?[this.x,this.y,this.m]:[this.x,this.y]};w.prototype.toJSON=function(C){return this.write(null,C)};d([p.property({dependsOn:["x","y","z","m","spatialReference"]})],w.prototype,"cache",void 0);d([p.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],w.prototype,"hasM",null);d([p.property({type:Boolean,
dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],w.prototype,"hasZ",null);d([p.property({type:Number,dependsOn:["y"]})],w.prototype,"latitude",null);d([p.property({type:Number,dependsOn:["x"]})],w.prototype,"longitude",null);d([p.property({type:Number,json:{write:{isRequired:!0}}})],w.prototype,"x",void 0);d([p.property({type:Number,json:{write:!0}})],w.prototype,"y",void 0);d([p.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],w.prototype,
"z",void 0);d([p.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],w.prototype,"m",void 0);return w=B=d([p.subclass("esri.geometry.Point")],w)}(p.declared(n));A.prototype.toJSON.isDefaultToJSON=!0;return A})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(A,h){return function(b,d){b.__bases__=d.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(A,
h,b,d){var g=arguments.length,p=3>g?h:null===d?d=Object.getOwnPropertyDescriptor(h,b):d,n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)p=Reflect.decorate(A,h,b,d);else for(var e=A.length-1;0<=e;e--)if(n=A[e])p=(3>g?n(p):3<g?n(h,b,p):n(h,b))||p;return 3<g&&p&&Object.defineProperty(h,b,p),p}})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m){function r(u){for(var v in u)h.hasOwnProperty(v)||(h[v]=u[v])}Object.defineProperty(h,"__esModule",{value:!0});r(b);r(d);r(g);r(p);r(n);r(e);r(k);r(l);r(m)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.aliasOf=function(d){return function(g,p){b.getPropertyMetadata(g,p).aliasOf=d}}})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(A,h){function b(e){return null!=e.__accessorMetadata__}function d(e){return b(e)&&null!=g(e).properties}function g(e){e.__accessorMetadata__||Object.defineProperty(e,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return e.__accessorMetadata__}function p(e){e=g(e);var k=e.properties;k||(k=e.properties={});return k}function n(e,k){var l=g(e);e=l.parameters;e||(e=l.parameters={});l=e[k];l||(l=[],e[k]=l);return l}Object.defineProperty(h,"__esModule",{value:!0});
h.hasMetadata=b;h.hasPropertiesMetadata=d;h.hasPropertyMetadata=function(e,k){return d(e)&&null!=p(e)[k]};h.hasParametersMetadata=function(e,k){return b(e)&&null!=g(e).parameters&&null!=g(e).parameters[k]};h.getMetadata=g;h.getPropertiesMetadata=p;h.getPropertyMetadata=function(e,k){e=p(e);var l=e[k];l||(l=e[k]={});return l};h.setPropertyMetadata=function(e,k,l){p(e)[k]=l};h.getParametersMetadata=n;h.getParameterMetadata=function(e,k,l){var m=n(e,k)[l];m||(n(e,k)[l]=m={index:l});return m}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.autoDestroy=function(){return function(d,g,p){b.getMetadata(d).autoDestroy=!0;return d[g]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(A,h,b,d){function g(l){var m="_meta"in l?b.ensureType(l):l;return function(){for(var r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];r.push(m);return"number"===typeof r[2]?
n.apply(this,r):p.apply(this,r)}}function p(l,m,r,u){d.getPropertyMetadata(l,m).cast=u}function n(l,m,r,u){d.getParameterMetadata(l,m,r).cast=u}function e(l){return function(m,r,u){d.getPropertyMetadata(m,l).cast=m[r]}}Object.defineProperty(h,"__esModule",{value:!0});var k=Object.prototype.toString;h.autocastMethod=function(l,m,r){if(d.hasParametersMetadata(l,m)){var u=d.getParametersMetadata(l,m).filter(function(w){return null!=w.cast});if(u.length){var v=r.value;r.value=function(){for(var w=[],
B=0;B<arguments.length;B++)w[B]=arguments[B];for(B=0;B<u.length;B++){var C=u[B];w[C.index]=C.cast(w[C.index])}return v.apply(this,w)};return r}console.warn("Method "+l.declaredClass+"::"+m+" is decorated with @cast but no parameters are decorated")}};h.cast=function(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];if(3!==l.length||"string"!==typeof l[1]){if(1===l.length&&"[object Function]"===k.call(l[0]))return g(l[0]);if(1===l.length&&"string"===typeof l[0])return e(l[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require",
"exports","../Logger"],function(A,h,b){function d(f,q){return q.isInstanceOf?q.isInstanceOf(f):q instanceof f}function g(f){return null==f?f:new Date(f)}function p(f){return null==f?f:!!f}function n(f){return null==f?f:f.toString()}function e(f){return null==f?f:parseFloat(f)}function k(f){return null==f?f:Math.round(parseFloat(f))}function l(f){return f&&f.constructor&&void 0!==f.constructor._meta}function m(f,q){return null!=q&&f&&!d(f,q)}function r(f,q){m(f,q)&&(l(q)?a.error("Accessor#set","Assigning an instance of '"+
(q.declaredClass||"unknown")+"' which is not a subclass of '"+(f&&f.prototype&&f.prototype.declaredClass||"unknown")+"'"):q=new f(q));return q}function u(f){switch(f){case Number:return e;case c:return k;case Boolean:return p;case String:return n;case Date:return g;default:return r.bind(null,f)}}function v(f,q){var t=u(f);return 1===arguments.length?t:t(q)}function w(f,q){return 1===arguments.length?w.bind(null,f):q?Array.isArray(q)?q.map(f):[f(q)]:q}function B(f,q,t){return 0!==q&&Array.isArray(t)?
t.map(function(x){return B(f,q-1,x)}):f(t)}function C(f,q,t){if(2===arguments.length)return C.bind(null,f,q);if(!t)return t;t=B(f,q,t);for(var x=q,z=t;0<x&&Array.isArray(z);)x--,z=z[0];if(void 0!==z)for(z=0;z<x;z++)t=[t];return t}function y(f,q){if(2===arguments.length)return y(f).call(null,q);var t={},x=[],z=[],D;for(D in f.typeMap){var F=f.typeMap[D];t[D]=v(F);x.push(F&&F.prototype&&F.prototype.declaredClass||"unknown");z.push(D)}var G="string"===typeof f.key?function(E){return E[f.key]}:f.key;
return function(E){if(f.base&&!m(f.base,E))return E;var H=G(E)||f.defaultKeyValue,O=t[H];if(!O)return a.error("Accessor#set","Invalid property value, value needs to be one of '"+(x.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(z.join("', '")+"')")),null;if(!m(f.typeMap[H],E))return E;if("string"!==typeof f.key||l(E))return O(E);H={};for(var K in E)K!==f.key&&(H[K]=E[K]);return O(H)}}Object.defineProperty(h,"__esModule",{value:!0});var a=b.getLogger("esri.core.Accessor");
h.isInstanceOf=d;h.ensureDate=g;h.ensureBoolean=p;h.ensureString=n;h.ensureNumber=e;h.ensureInteger=k;h.isClassedType=l;h.requiresType=m;h.ensureClass=r;h.ensureType=v;h.ensureArrayTyped=w;h.ensureArray=function(f,q){return 1===arguments.length?w(v.bind(null,f)):w(v.bind(null,f),q)};h.ensureNArrayTyped=C;h.ensureNArray=function(f,q,t){return 2===arguments.length?C(v.bind(null,f),q):C(v.bind(null,f),q,t)};h.ensureOneOfType=y;var c=function(){return function(){}}();h.Integer=c;h.default=v})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.declared=function(b){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];g=function(){return this||{}};g.__bases__=[b].concat(d);return g}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(A,h,b,d,g,p){Object.defineProperty(h,"__esModule",{value:!0});var n=g.getLogger("esri.core.accessorSupport.decorators.property");
h.property=function(e){void 0===e&&(e={});return function(k,l){var m=k.constructor.prototype;if(m===Function.prototype)b("dojo-debug-messages")&&n.error("Inappropriate use of @property() on a static field: "+k.name+"."+l+". Accessor does not support static properties.");else{var r=Object.getOwnPropertyDescriptor(k,l);r&&(r.get||r.set)?(e=d.clone(e),r.set&&(e.set=r.set),r.get&&(e.get=r.get)):r&&r.hasOwnProperty("value")&&(e=d.clone(e),b("dojo-debug-messages")&&e.hasOwnProperty("value")&&n.warn('@property() will redefine the value of "'+
l+'" on "'+k.constructor.name+'" already defined in the metadata',e),e.value=r.value);k=p.getPropertyMetadata(m,l);for(var u in e)l=e[u],Array.isArray(l)?k[u]=(k[u]||[]).concat(l):k[u]=l}}};h.propertyJSONMeta=function(e,k,l){e=p.getPropertyMetadata(e.constructor.prototype,l);e.json||(e.json={});e=e.json;void 0!==k&&(e.origins||(e.origins={}),e.origins[k]||(e.origins[k]={}),e=e.origins[k]);return e}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports",
"../../object","./property"],function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});h.reader=function(g,p,n){if(void 0===p||Array.isArray(p)){var e=g;n=p;var k=[void 0]}else e=p,k=Array.isArray(g)?g:[g];return function(l,m,r){var u=l.constructor.prototype;k.forEach(function(v){v=d.propertyJSONMeta(l,v,e);v.read&&"object"!==typeof v.read&&(v.read={});b.setDeepValue("read.reader",u[m],v);n&&(v.read.source=(v.read.source||[]).concat(n))})}}})},"esri/layers/vectorTiles/core/object":function(){define(["require",
"exports"],function(A,h){function b(d,g,p){for(var n=0;n<d.length;n++){var e=d[n];if(!(e in p))if(g)p[e]={};else return;p=p[e]}return p}Object.defineProperty(h,"__esModule",{value:!0});h.getDeepValue=function(d,g){return b(d.split("."),!1,g)};h.setDeepValue=function(d,g,p){var n=d.split(".");d=n.pop();(p=b(n,!0,p))&&d&&(p[d]=g)}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});
h.shared=function(b){return function(d,g){d[g]=b}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(A,h,b,d){function g(m,r){m.read&&("function"===typeof m.read?r.push(m.read):"object"===typeof m.read&&m.read.reader&&r.push(m.read.reader))}function p(m,r){m.write&&("function"===typeof m.write?r.push(m.write):"object"===typeof m.write&&m.write.writer&&r.push(m.write.writer))}function n(m){var r=[];m=
d.getPropertiesMetadata(m.prototype);if(!m)return r;for(var u in m){var v=m[u];v.cast&&r.push(v.cast);v.copy&&r.push(v.copy);if(v=v.json)if(g(v,r),p(v,r),v=v.origins)for(var w in v){var B=v[w];g(B,r);p(B,r)}}return r}function e(m){var r={values:{},descriptors:{}},u=["__bases__"],v=d.getPropertiesMetadata(m.prototype),w=n(m);Object.getOwnPropertyNames(m.prototype).filter(function(B){return-1!==u.indexOf(B)||v&&v.hasOwnProperty(B)||!l(Object.getOwnPropertyDescriptor(m.prototype,B))&&-1!==w.indexOf(m.prototype[B])?
!1:!0}).forEach(function(B){var C=Object.getOwnPropertyDescriptor(m.prototype,B);l(C)?r.descriptors[B]=C:r.values[B]=m.prototype[B]});return r}function k(m){var r=Object.getOwnPropertyNames(m),u=Object.getPrototypeOf(m.prototype).constructor,v=Object.getOwnPropertyNames(Function);v.push("__bases__");var w=Object.getOwnPropertyNames(u),B={values:{},descriptors:{}};r.filter(function(C){return-1!==v.indexOf(C)?!1:-1===w.indexOf(C)||u[C]!==m[C]?!0:!1}).forEach(function(C){var y=Object.getOwnPropertyDescriptor(m,
C);l(y)?B.descriptors[C]=y:B.values[C]=m[C]});return B}function l(m){return m&&!(!m.get&&!m.set)}Object.defineProperty(h,"__esModule",{value:!0});h.subclass=function(m){return function(r){var u=e(r),v=k(r);null!=m&&(u.values.declaredClass=m);r=b(r.__bases__,u.values);Object.defineProperties(r.prototype,u.descriptors);for(var w in v.values)r[w]=v.values[w];Object.defineProperties(r,v.descriptors);return r}}})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],
function(A,h,b){function d(e,k){e&&!Array.isArray(e)&&"function"!==typeof e&&(k=e,e=null);e=e||[];k=k||{};return g([this].concat(e),k)}function g(e,k){e&&!Array.isArray(e)&&"function"!==typeof e&&(k=e,e=null);"function"===typeof e?e=[e]:e||(e=[]);k=k||{};var l;var m=0;for(l=p.length;m<l;m++)p[m](e,k);e=b(e,k);e.createSubclass=d;m=0;for(l=n.length;m<l;m++)n[m](e);return e}var p=[],n=[];(function(e){e.hasMixin=function(k,l){k=Array.isArray(k)?k.reduce(function(r,u){return u._meta?r.concat(u._meta.bases):
r},[]):k._meta?k._meta.bases:k;if(!k)return!1;if("string"===typeof l)for(var m=k.length-1;0<=m;m--)if(k[m].prototype.declaredClass===l)return!0;return-1!==k.indexOf(l)};e.safeMixin=function(k,l){return b.safeMixin(k,l)};e.before=function(k){p.push(k)};e.after=function(k){n.push(k)}})(g||(g={}));return g})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});
h.writer=function(g,p,n){if(void 0===p){var e=g;var k=[void 0]}else"string"!==typeof p?(e=g,k=[void 0],n=p):(e=p,k=Array.isArray(g)?g:[g]);return function(l,m,r){var u=l.constructor.prototype;k.forEach(function(v){v=d.propertyJSONMeta(l,v,e);v.write&&"object"!==typeof v.write&&(v.write={});n&&b.setDeepValue("write.target",n,v);b.setDeepValue("write.writer",u[m],v)})}}})},"esri/layers/vectorTiles/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),
function(A,h,b,d,g,p,n){return function(e){function k(){var l=e.call(this)||this;l.type=null;l.extent=null;l.hasM=!1;l.hasZ=!1;l.spatialReference=n.WGS84;return l}b(k,e);Object.defineProperty(k.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});k.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};k.prototype.clearCache=function(){this.notifyChange("cache")};k.prototype.getCacheValue=function(l){return this.cache[l]};
k.prototype.setCacheValue=function(l,m){this.cache[l]=m};d([p.property()],k.prototype,"type",void 0);d([p.property({readOnly:!0,dependsOn:["spatialReference"]})],k.prototype,"cache",null);d([p.property({readOnly:!0,dependsOn:["spatialReference"]})],k.prototype,"extent",void 0);d([p.property({type:Boolean,json:{write:{overridePolicy:function(l){return{enabled:l}}}}})],k.prototype,"hasM",void 0);d([p.property({type:Boolean,json:{write:{overridePolicy:function(l){return{enabled:l}}}}})],k.prototype,
"hasZ",void 0);d([p.property({type:n,json:{write:!0}})],k.prototype,"spatialReference",void 0);return k=d([p.subclass("esri.geometry.Geometry")],k)}(p.declared(g))})},"esri/layers/vectorTiles/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(A,h,b,d,g,p,n,e,k){function l(r,u){if(!r)return null;if(r.declaredClass)throw Error("JSON object is already hydrated");
var v=new this;v.read(r,u);return v}var m=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}b(u,r);u.prototype.read=function(v,w){e.default(this,v,w);return this};u.prototype.write=function(v,w){return k.default(this,v||{},w)};u.prototype.toJSON=function(v){return this.write(null,v)};u.fromJSON=function(v,w){return l.call(this,v,w)};return u=d([n.subclass("esri.core.JSONSupport")],u)}(n.declared(g));m.prototype.toJSON.isDefaultToJSON=!0;p.after(function(r){p.hasMixin(r,m)&&(r.fromJSON=
l.bind(r))});return m})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(A,h,b,d,g,p){h=h.default;A.before(function(e,k){A.hasMixin(e,n)&&d.processPrototype(k)});A.after(function(e){A.hasMixin(e,n)&&(d.processClass(e),Object.defineProperties(e.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||
!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var n=A(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===n)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new h(this)});
if(0<arguments.length&&this.normalizeCtorArgs){for(var e=[],k=0;k<arguments.length;k++)e.push(arguments[k]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e)}},__accessor__:null,postscript:function(e){var k=this.__accessor__;e=k.ctorArgs||e;if(null!=this.getDefaults){var l=this.getDefaults(e||{});this.set(l)}k.initialize();e&&(this.set(e),k.ctorArgs=null);k.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(e){console.warn(e.stack)}else p.removeTarget(this),this.__accessor__.destroy()},get:function(e){return b.get(this,e)},hasOwnProperty:function(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(e,k){g.set(this,e,k);return this},watch:function(e,k,l){return p.watch(this,e,k,l)},_clearOverride:function(e){return this.__accessor__.clearOverride(e)},_override:function(e,
k){return this.__accessor__.override(e,k)},_isOverridden:function(e){return this.__accessor__.isOverridden(e)},notifyChange:function(e){this.__accessor__.propertyInvalidated(e)},_get:function(e){return this.__accessor__.internalGet(e)},_set:function(e,k){return this.__accessor__.internalSet(e,k)}});return n})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(A,h,b,d,g,p,n){function e(m,
r){return r.metadatas[m]?!0:(b("dojo-debug-messages")&&l.warn("cannot access unknown property '"+m+"' on instance of "+r.host.declaredClass+"."),!1)}function k(m,r,u,v){return m.nonNullable&&null==u?(b("dojo-debug-messages")&&l.warn("cannot set non-nullable property '"+r+"' to null on "+v.host.declaredClass+"."),!1):!0}Object.defineProperty(h,"__esModule",{value:!0});var l=d.getLogger("esri.core.accessorSupport.Properties");A=function(){function m(r){this.host=r;this._origin=p.OriginId.USER;this.ctorArgs=
this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new n.default;r=this.host.constructor.__accessorMetadata__;this.metadatas=r.properties;this.autoDestroy=r.autoDestroy}m.prototype.initialize=function(){this.lifecycle=1;g.instanceCreated(this.host,this.metadatas)};m.prototype.constructed=function(){this.lifecycle=2};m.prototype.destroy=function(){this.destroyed=!0;var r=this.cursors;if(this.cursors)for(var u=0,v=Object.getOwnPropertyNames(r);u<v.length;u++){var w=
v[u],B=r[w];if(B){for(;0<B.length;)B.pop().propertyDestroyed(this,w);r[w]=null}}if(this.autoDestroy)for(w in this.metadatas)(r=this.internalGet(w))&&r&&"function"===typeof r.destroy&&(r.destroy(),this.metadatas[w].nonNullable||this.internalSet(w,null))};Object.defineProperty(m.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});m.prototype.clearOverride=function(r){this.isOverridden(r)&&(this.overridden[r]=!1,this.propertyInvalidated(r))};m.prototype.get=
function(r){e(r,this);var u=this.metadatas[r];if(this.store.has(r)&&!this.dirties[r])return this.store.get(r);var v=u.get;return v?(u=v.call(this.host),this.store.set(r,u,p.OriginId.COMPUTED),this.propertyCommitted(r),u):u.value};m.prototype.originOf=function(r){var u=this.store.originOf(r);return void 0===u&&(r=this.metadatas[r])&&r.hasOwnProperty("value")?"defaults":p.idToName(u)};m.prototype.has=function(r){return this.metadatas[r]?this.store.has(r):!1};m.prototype.internalGet=function(r){if(e(r,
this)){var u=this.store;return u.has(r)?u.get(r):this.metadatas[r].value}};m.prototype.internalSet=function(r,u){e(r,this)&&(this.propertyInvalidated(r),this.initialized?this.store.set(r,u,this._origin):this.store.set(r,u,p.OriginId.DEFAULTS),this.propertyCommitted(r))};m.prototype.isOverridden=function(r){return null!=this.overridden&&!0===this.overridden[r]};m.prototype.keys=function(){return this.store.keys()};m.prototype.override=function(r,u){if(e(r,this)){this.overridden||(this.overridden={});
var v=this.metadatas[r];k(v,r,u,this)&&((v=v.cast)&&(u=v.call(this.host,u)),this.overridden[r]=!0,this.internalSet(r,u))}};m.prototype.set=function(r,u){if(e(r,this)){var v=this.metadatas[r];if(k(v,r,u,this)){var w=v.set;(v=v.cast)&&(u=v.call(this.host,u));w?w.call(this.host,u):this.internalSet(r,u)}}};m.prototype.setDefaultOrigin=function(r){this._origin=p.nameToId(r)};m.prototype.propertyInvalidated=function(r){var u=this.dirties,v=this.isOverridden(r),w=this.cursors&&this.cursors[r],B=this.metadatas[r].computes;
if(w)for(var C=0;C<w.length;C++)w[C].propertyInvalidated(this,r);v||(u[r]=!0);if(B)for(r=0;r<B.length;r++)this.propertyInvalidated(B[r])};m.prototype.propertyCommitted=function(r){var u=this.cursors&&this.cursors[r];this.dirties[r]=!1;if(u)for(var v=0;v<u.length;v++)u[v].propertyCommitted(this,r)};m.prototype.addCursor=function(r,u){this.cursors||(this.cursors={});var v=this.cursors[r];v||(this.cursors[r]=v=[]);v.push(u)};m.prototype.removeCursor=function(r,u){var v=this.cursors[r];this.cursors[r]&&
(v.splice(v.indexOf(u),1),0===v.length&&(this.cursors[r]=null))};return m}();h.default=A})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(A,h,b,d,g){Object.defineProperty(h,"__esModule",{value:!0});var p=[b.default,d.default,g.default];h.processPrototypeMetadatas=function(n,e){for(var k=Object.getOwnPropertyNames(n),l=0;l<p.length;l++){var m=
p[l];if(m.processPrototypePropertyMetadata)for(var r=0,u=k;r<u.length;r++){var v=u[r];m.processPrototypePropertyMetadata(v,n[v],n,e)}}};h.processClassMetadatas=function(n,e){for(var k=Object.getOwnPropertyNames(n),l=0;l<p.length;l++){var m=p[l];if(m.processClassPropertyMetadata)for(var r=0,u=k;r<u.length;r++){var v=u[r];m.processClassPropertyMetadata(v,n[v],n,e)}}};h.instanceCreated=function(n,e){for(var k=Object.getOwnPropertyNames(e),l=0;l<p.length;l++){var m=p[l];m.instanceCreated&&m.instanceCreated(n,
e,k)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(A,h,b,d,g,p,n){function e(l,m,r){var u=p.getProperties(l);return n.wire(l,r.aliasOf,function(){u.propertyInvalidated(m)})}Object.defineProperty(h,"__esModule",{value:!0});var k=b("dojo-debug-messages");h.AliasedPropertyExtension={processClassPropertyMetadata:function(l,m,r,u){var v=m.aliasOf;if(v){var w=v.split(".")[0];
if(null==r[w])k&&console.error("[accessor] class '"+u+"' - property '"+l+"' is alias of aliased of '"+v+"', but '"+w+"' isn't declared as property. This can be fix by adding '"+w+"' to the metadata for example.");else if(m.set)k&&console.error("[accessor] class '"+u+"' - property '"+l+"' is alias of aliased of '"+v+"', so it cannot have a setter defined");else if(m.get)k&&console.error("[accessor] class '"+u+"' - property '"+l+"' is alias of aliased of '"+v+"', so it cannot have a getter defined");
else{var B;m.get=function(){var C=d.default(this,v);if("function"===typeof C){B||(B=v.split(".").slice(0,-1).join("."));var y=d.default(this,B);y&&(C=C.bind(y))}return C};m.readOnly||(m.set=function(C){return g.default(this,v,C)})}}},instanceCreated:function(l,m,r){for(var u=0;u<r.length;u++){var v=r[u],w=m[v];w.aliasOf&&e(l,v,w)}}};h.default=h.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(A,h,b){function d(e,
k,l){if(null!=l.getItemAt||Array.isArray(l)){var m=parseInt(e,10);if(!isNaN(m))return Array.isArray(l)?l[m]:l.getItemAt(m)}m=b.getProperties(l);return k?b.isPropertyDeclared(m,e)?m.get(e):l[e]:b.isPropertyDeclared(m,e)?m.internalGet(e):l[e]}function g(e,k,l,m){if(null==e)return e;if((e=d(k[m],l,e))||!(m<k.length-1))return m===k.length-1?e:g(e,k,l,m+1)}function p(e,k,l,m){void 0===l&&(l=!1);void 0===m&&(m=0);return"string"===typeof k&&-1===k.indexOf(".")?d(k,l,e):g(e,b.pathToArray(k),l,m)}function n(e,
k){return p(e,k,!0)}Object.defineProperty(h,"__esModule",{value:!0});h.valueOf=p;h.get=n;h.exists=function(e,k){return void 0!==p(k,e,!0)};h.default=n})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(A,h,b){function d(e,k){return k?Object.keys(k).reduce(function(l,m){if("value"===m)return l[m]=k[m],l;if(void 0===l[m])return l[m]=b.clone(k[m]),l;var r=l[m],u=k[m];if(r===u)return l;if(Array.isArray(u)||Array.isArray(l))r=r?Array.isArray(r)?
l[m]=r.concat():l[m]=[r]:l[m]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(function(v){-1===r.indexOf(v)&&r.push(v)}));else if(u&&"object"===typeof u)l[m]=d(r,u);else if(!l.hasOwnProperty(m)||k.hasOwnProperty(m))l[m]=u;return l},e||{}):e}function g(e){return Array.isArray(e)?e:e.split(".")}function p(e){if(Array.isArray(e)||-1<e.indexOf(",")){e=Array.isArray(e)?e:e.split(",");for(var k=0;k<e.length;k++)e[k]=e[k].trim();return 1===e.length?e[0]:e}return e.trim()}function n(e){var k=!1;return function(){k||
(k=!0,e())}}Object.defineProperty(h,"__esModule",{value:!0});h.getProperties=function(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null};h.isPropertyDeclared=function(e,k){return e&&e.metadatas&&null!=e.metadatas[k]};h.merge=d;h.pathToStringOrArray=function(e){return e?"string"===typeof e&&-1===e.indexOf(".")?e:g(e):e};h.pathToArray=g;h.splitPath=p;h.parse=function(e,k,l,m){k=p(k);if(Array.isArray(k)){var r=k.map(function(u){return m(e,u.trim(),l)});return{remove:n(function(){return r.forEach(function(u){return u.remove()})})}}return m(e,
k.trim(),l)};h.once=n})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(A,h,b,d,g){function p(e,k,l){if(e&&k)if("object"===typeof k){l=0;for(var m=Object.getOwnPropertyNames(k);l<m.length;l++){var r=m[l];p(e,r,k[r])}}else"_"!==k[0]&&(-1!==k.indexOf(".")?(k=k.split("."),r=k.splice(k.length-1,1)[0],p(g.default(e,k),r,l)):(b("dojo-debug-messages")&&(r=e.__accessor__,null==r||r.metadatas[k]||n.warn("setting unknown property '"+
k+"' on instance of "+r.host.declaredClass)),e[k]=l))}Object.defineProperty(h,"__esModule",{value:!0});var n=d.getLogger("esri.core.accessorSupport.set");h.set=p;h.default=p})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(A,h,b){function d(l,m,r){m=b.splitPath(m);if(Array.isArray(m)){for(var u=[],v=0;v<m.length;v++)u.push((new g(m[v],r)).install(l));return new e(u)}l=(new g(m,r)).install(l);return new k(l)}Object.defineProperty(h,"__esModule",
{value:!0});var g=function(){function l(m,r){this.path=m;this.callback=r;this.chain=null;this.path=m;-1<m.indexOf(".")&&(this.chain=b.pathToArray(m));this.callback=r;return this}l.prototype.install=function(m){m=this.chain?new n(this,m):new p(this,m);return m};l.prototype.notify=function(m){this.callback(m,this.path)};return l}(),p=function(){function l(m,r){this.binding=m;this.target=r;b.getProperties(r).addCursor(this.binding.path,this)}l.prototype.destroy=function(){this.target&&(b.getProperties(this.target).removeCursor(this.binding.path,
this),this.target=this.binding=null)};l.prototype.propertyDestroyed=function(m,r){b.getProperties(this.target).removeCursor(r,this)};l.prototype.propertyInvalidated=function(m,r){this.binding&&this.binding.notify(this.target)};l.prototype.propertyCommitted=function(m,r){this.binding&&this.binding.notify(this.target)};return l}(),n=function(){function l(m,r){this.binding=m;this.target=r;this.stack=[];this.properties=b.getProperties(r);this.stack.push({properties:this.properties,propertyName:m.chain[0]});
this.properties.addCursor(m.chain[0],this);this.moveForward();return this}l.prototype.destroy=function(){for(;;){var m=this.stack.pop();if(null==m)break;m.properties.removeCursor(m.propertyName,this)}this.target=this.binding=null};l.prototype.propertyDestroyed=function(m,r){this.moveBackward(m,r)};l.prototype.propertyInvalidated=function(m,r){this.binding&&this.binding.notify(this.target)};l.prototype.propertyCommitted=function(m,r){this.binding&&(this.moveBackward(m,r),this.moveForward(),this.binding.notify(this.target))};
l.prototype.moveBackward=function(m,r){for(var u=this.stack,v=u[u.length-1];v.properties!==m&&v.propertyName!==r;)v.properties.removeCursor(v.propertyName,this),u.pop(),v=u[u.length-1]};l.prototype.moveForward=function(){var m=this.stack,r=m[m.length-1];r=r.properties.internalGet(r.propertyName);(r=b.getProperties(r))&&m.length<this.binding.chain.length&&(m=this.binding.chain[m.length],this.stack.push({properties:r,propertyName:m}),r.addCursor(m,this),this.moveForward())};return l}(),e=function(){function l(m){this.cursors=
m}l.prototype.remove=function(){for(var m=this.cursors;0<m.length;)m.pop().destroy();this.cursors=null};return l}(),k=function(){function l(m){this.cursor=m}l.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return l}();h.create=function(l,m){l=b.splitPath(l);if(Array.isArray(l)){for(var r=[],u=0;u<l.length;u++)r.push(new g(l[u],m));return function(w){for(var B=[],C=0;C<r.length;C++)B[C]=r[C].install(w);return new e(B)}}var v=new g(l,m);return function(w){return new k(v.install(w))}};
h.wire=d;h.default=d})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(A,h,b,d,g,p){Object.defineProperty(h,"__esModule",{value:!0});var n=b("dojo-debug-messages"),e=d.getLogger("esri.core.accessorSupport.extensions.computedProperty");h.ComputedPropertyExtension={processClassPropertyMetadata:function(k,l,m,r){if(n){var u=l.dependsOn;u&&u.length&&u.map(function(v){return v.split(".")[0]}).forEach(function(v){null==
m[v]&&e.error("[accessor] class '"+r+"' - property '"+k+"' depends on unknown property '"+v+"' which hasn't been found during introspection. This can be fix by adding '"+v+"' to the metadata for example.")})}l.dependsOn&&(u=void 0,u=l.dependsOn.slice())&&(l.wire=p.create(u,function(v){return g.getProperties(v).propertyInvalidated(k)}))},instanceCreated:function(k,l,m){for(var r=0;r<m.length;r++){var u=l[m[r]];u.wire&&u.wire(k)}}};h.default=h.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(A,h,b,d,g,p){function n(e,k,l){var m=e&&e.json;e&&e.json&&e.json.origins&&l&&(e=e.json.origins[l.origin])&&k in e&&(m=e);return m}Object.defineProperty(h,"__esModule",{value:!0});h.originSpecificReadPropertyDefinition=function(e,k){return n(e,"read",k)};h.originSpecificWritePropertyDefinition=function(e,k){return n(e,"write",k)};h.SerializablePropertyExtension={processPrototypePropertyMetadata:function(e,k,l,m){if(g.process(k)){b.process(k);l=k.type;for(m=0;Array.isArray(l);)l=l[0],m++;if(k.json.origins)for(var r in k.json.origins){var u=
k.json.origins[r];d.create(l,m,e,u);p.create(l,m,e,u)}d.create(l,m,e,k.json);p.create(l,m,e,k.json)}}};h.default=h.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.process=function(b){if(b.json&&b.json.origins){var d=b.json.origins,g={"web-document":["web-scene","web-map"]};b=function(n){if(d[n]){var e=d[n];g[n].forEach(function(k){d[k]=
e});delete d[n]}};for(var p in g)b(p)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(A,h,b,d){function g(r,u,v,w){if(1<u)return e(r,u);if(1===u)return k(r);if(l(r)){var B=k(r.prototype.itemType.Type);return function(C,y,a){return(C=B(C,y,a))?new r(C):C}}return p(r)}function p(r){return r.prototype.read?function(u,v,w){return null==u?u:(new r).read(u,w)}:r.fromJSON}function n(r,u,
v,w){return 0!==w&&Array.isArray(u)?u.map(function(B){return n(r,B,v,w-1)}):r(u,null,v)}function e(r,u){r=p(r);var v=n.bind(null,r);return function(w,B,C){if(null==w)return w;w=v(w,C,u);B=u;for(C=w;0<B&&Array.isArray(C);)B--,C=C[0];if(void 0!==C)for(C=0;C<B;C++)w=[w];return w}}function k(r){var u=p(r);return function(v,w,B){return null==v?v:Array.isArray(v)?v.map(function(C){return u(C,null,B)}):[u(v,null,B)]}}function l(r){return d.isCollection(r)?(r=r.prototype.itemType)&&r.Type&&"function"===typeof r.Type?
m(r.Type):!1:!1}function m(r){return!!r&&(!!r.prototype.read||!!r.fromJSON||l(r))}Object.defineProperty(h,"__esModule",{value:!0});h.create=function(r,u,v,w){(!w.read||!w.read.reader&&!1!==w.read.enabled)&&m(r)&&b.setDeepValue("read.reader",g(r,u,v,w),w)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.isCollection=function(b){return!!b&&!!b.prototype.declaredClass&&
0===b.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(A,h){function b(g){"boolean"===typeof g.read?g.read={enabled:g.read}:"function"===typeof g.read?g.read={enabled:!0,reader:g.read}:g.read&&"object"===typeof g.read&&void 0===g.read.enabled&&(g.read.enabled=!0)}function d(g){"boolean"===typeof g.write?g.write={enabled:g.write}:"function"===typeof g.write?
g.write={enabled:!0,writer:g.write}:g.write&&"object"===typeof g.write&&void 0===g.write.enabled&&(g.write.enabled=!0)}Object.defineProperty(h,"__esModule",{value:!0});h.process=function(g){g.json||(g.json={});b(g.json);d(g.json);if(g.json.origins)for(var p in g.json.origins)b(g.json.origins[p]),d(g.json.origins[p]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(A,h,b,d){function g(l,
m,r,u){b.setDeepValue(r,p(l,u),m)}function p(l,m){return l=l&&"function"===typeof l.write?l.write({},m):l&&"function"===typeof l.toJSON?l.toJSON():"number"===typeof l?-Infinity===l?-Number.MAX_VALUE:Infinity===l?Number.MAX_VALUE:isNaN(l)?null:l:l}function n(l,m,r,u){null===l?l=null:l&&"function"===typeof l.map?(l=l.map(function(v){return p(v,u)}),"function"===typeof l.toArray&&(l=l.toArray())):l=[p(l,u)];b.setDeepValue(r,l,m)}function e(l,m,r){return 0!==r&&Array.isArray(l)?l.map(function(u){return e(u,
m,r-1)}):p(l,m)}function k(l){return function(m,r,u,v){if(null===m)m=null;else{m=e(m,v,l);v=l;for(var w=m;0<v&&Array.isArray(w);)v--,w=w[0];if(void 0!==w)for(w=0;w<v;w++)m=[m]}b.setDeepValue(u,m,r)}}Object.defineProperty(h,"__esModule",{value:!0});h.create=function(l,m,r,u){u.write&&!u.write.writer&&!1!==u.write.enabled&&(1===m||d.isCollection(l)?u.write.writer=n:u.write.writer=1<m?k(m):g)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(A,
h){function b(p){switch(p){case "defaults":return g.DEFAULTS;case "service":return g.SERVICE;case "portal-item":return g.PORTAL_ITEM;case "web-scene":return g.WEB_SCENE;case "web-map":return g.WEB_MAP;case "user":return g.USER}}function d(p){switch(p){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.USER:return"user"}}Object.defineProperty(h,"__esModule",{value:!0});var g;
(function(p){p[p.DEFAULTS=0]="DEFAULTS";p[p.COMPUTED=1]="COMPUTED";p[p.SERVICE=2]="SERVICE";p[p.PORTAL_ITEM=3]="PORTAL_ITEM";p[p.WEB_SCENE=4]="WEB_SCENE";p[p.WEB_MAP=5]="WEB_MAP";p[p.USER=6]="USER";p[p.NUM=7]="NUM"})(g=h.OriginId||(h.OriginId={}));h.nameToId=b;h.idToName=d;h.readableNameToId=function(p){return b(p)};h.idToReadableName=function(p){return d(p)};h.writableNameToId=function(p){return b(p)};h.idToWritableName=function(p){return d(p)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function d(){this._values={}}d.prototype.get=function(g){return this._values[g]};d.prototype.originOf=function(g){return b.OriginId.USER};d.prototype.keys=function(){return Object.keys(this._values)};d.prototype.set=function(g,p){this._values[g]=p};d.prototype.clear=function(g){delete this._values[g]};d.prototype.has=function(g){return g in this._values};return d}();h.default=A})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(A,h,b,d,g,p,n,e){Object.defineProperty(h,"__esModule",{value:!0});var k=Object.prototype.hasOwnProperty,l=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,m={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},r=/^_(set|get)([a-zA-Z0-9]+)Attr$/;h.processPrototype=function(u){for(var v=u.declaredClass,w=u.properties||{},B=0,C=Object.getOwnPropertyNames(w);B<C.length;B++){var y=C[B],a=w[y],c=typeof a;null==a?p.setPropertyMetadata(u,y,{value:a}):
Array.isArray(a)?p.setPropertyMetadata(u,y,{type:[a[0]],value:null}):"object"===c?n.getProperties(a)||a instanceof Date?p.setPropertyMetadata(u,y,{type:a.constructor,value:a}):p.setPropertyMetadata(u,y,a):"boolean"===c?p.setPropertyMetadata(u,y,{type:Boolean,value:a}):"string"===c?p.setPropertyMetadata(u,y,{type:String,value:a}):"number"===c?p.setPropertyMetadata(u,y,{type:Number,value:a}):"function"===c&&p.setPropertyMetadata(u,y,{type:a,value:null})}B=0;for(C=Object.getOwnPropertyNames(u);B<C.length;B++){c=
C[B];a=u[c];w=y=void 0;var f=l.exec(c);if(f)y=f[1],w=m[f[2]];else if(f=r.exec(c))y=f[2][0].toLowerCase()+f[2].substr(1),w=f[1].toLowerCase();y&&w&&(y=p.getPropertyMetadata(u,y),b.setDeepValue(w,a,y))}B=0;for(C=Object.getOwnPropertyNames(p.getPropertiesMetadata(u));B<C.length;B++)if(y=C[B],a=p.getPropertyMetadata(u,y),w=a.type,c=a.types,void 0===a.value&&k.call(u,y)&&(a.value=u[y]),!a.cast&&w){y=a;a=0;for(c=w;Array.isArray(c);)c=c[0],a++;w=1===a?d.ensureArray(c):1<a?d.ensureNArray(c,a):d.ensureType(w);
y.cast=w}else!a.cast&&c&&(Array.isArray(c)?a.cast=d.ensureArrayTyped(d.ensureOneOfType(c[0])):a.cast=d.ensureOneOfType(c));g.processPrototypeMetadatas(p.getPropertiesMetadata(u),v);return p.getPropertiesMetadata(u)};h.processClass=function(u){for(var v=u.prototype,w=v.declaredClass,B=u._meta.bases,C={},y=B.length-1;0<=y;y--)n.merge(C,p.getMetadata(B[y].prototype));var a=C.properties;g.processClassMetadatas(a,w);Object.defineProperty(u,"__accessorMetadata__",{value:{properties:a,autoDestroy:!!C.autoDestroy}});
var c={};w=function(f){var q=a[f];c[f]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(f):q.value},set:function(t){var x=this.__accessor__;if(!x)Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:t});else if(!Object.isFrozen(this)){if(x.initialized&&q.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+f+"' of "+this.declaredClass);if(2===x.lifecycle&&q.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
f+"' of "+this.declaredClass);x.set(f,t)}}}};B=0;for(y=Object.getOwnPropertyNames(a);B<y.length;B++)w(y[B]);Object.defineProperties(u.prototype,c);if(C.parameters)for(u=0,w=Object.getOwnPropertyNames(C.parameters);u<w.length;u++)B=w[u],y=Object.getOwnPropertyDescriptor(v,B)||{value:v[B]},(y=e.autocastMethod(v,B,y))&&Object.defineProperty(v,B,y);return C}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(A,h,b,d,g,p,n,e,k){function l(q){y.has(q)?a.splice(a.indexOf(q),1):y.add(q);a.push(q);c||(c=p.schedule(r))}function m(q){if(!q.removed){var t=q.callback,x=q.path,z=q.oldValue,D=q.target,F=n.valueOf(D,q.propertyPath,!0);d.equals(z,F)||(q.oldValue=F,t.call(D,F,z,x,D))}}function r(){if(c){c=null;var q=a;a=C.acquire();y.clear();for(var t=C.acquire(),x=0;x<q.length;x++){var z=q[x];m(z);z.removed&&t.push(z)}for(x=0;x<a.length;x++)z=a[x],z.removed&&(t.push(z),y.delete(z),a.splice(x,1),--x);for(x=
0;x<t.length;x++)B.pool.release(t[x]);C.release(q);C.release(t);f.forEach(function(D){return D()})}}function u(q,t,x){var z=e.parse(q,t,x,function(D,F,G){var E=n.valueOf(D,F,!0),H,O=k.wire(D,F,function(K,L){K.__accessor__.destroyed?z.remove():(H||(H=B.pool.acquire(K,L,E,G),E=null),l(H))});return{remove:e.once(function(){O.remove();H&&(H.removed=!0,l(H),H=null);z=O=E=null})}});return z}function v(q,t,x){var z=e.parse(q,t,x,function(D,F,G){var E=n.valueOf(D,F,!0),H=!1;return k.wire(D,F,function(O,K){if(O.__accessor__.destroyed)z.remove();
else if(!H){H=!0;var L=n.valueOf(O,K,!0);d.equals(E,L)||G.call(O,L,E,K,O);E=n.valueOf(O,K,!0);H=!1}})});return z}function w(q,t,x,z){void 0===z&&(z=!1);return!q.__accessor__||q.__accessor__.destroyed?{remove:function(){}}:z?v(q,t,x):u(q,t,x)}Object.defineProperty(h,"__esModule",{value:!0});var B=function(){function q(t,x,z,D){this.target=t;this.path=x;this.oldValue=z;this.callback=D;this.removed=!1;this.propertyPath=e.pathToStringOrArray(x)}q.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};q.pool=new g(q,!0);return q}(),C=new b,y=new Set,a=C.acquire(),c;h.dispatchTarget=function(q){for(var t=C.copy(a),x=0;x<t.length;x++){var z=t[x];z.target===q&&(m(z),y.delete(z),a.splice(a.indexOf(z),1))}};h.removeTarget=function(q){for(var t=0;t<a.length;t++){var x=a[t];x.target===q&&(x.removed=!0)}};h.dispatch=r;var f=new Set;h.afterDispatch=function(q){f.add(q);return{remove:function(){f.delete(q)}}};h.watch=w;h.isValueInUse=function(q){return a.some(function(t){return t.oldValue===
q})};h.default=w})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(A,h,b){function d(n){n.length=0}var g=Array.prototype.splice;A=function(){function n(e,k){void 0===e&&(e=50);void 0===k&&(k=50);this._pool=new b(Array,!1,d,k,e)}n.prototype.acquire=function(){return this._pool.acquire()};n.prototype.copy=function(e){var k=this.acquire();e.unshift(0,0);g.apply(k,e);e.splice(0,2);return k};n.prototype.release=function(e){this._pool.release(e)};
n.acquire=function(){return p.acquire()};n.copy=function(e){return p.copy(e)};n.release=function(e){return p.release(e)};return n}();var p=new A(100);return A})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(A,h,b,d,g){function p(t){void 0===t&&(t=h.now());h.debug.rafId=null;0<c.length&&(h.debug.rafId=n());if(0<u){var x=t-u;B=Math.min(x,B);if(x<v)return}h.debug.executeFrameTasks(t)}function n(){return h.debug.requestNextFrame?
h.debug.requestNextFrame(l):l()}function e(){for(var t=0;t<c.length;){var x=c[t];t++;if(x.removed){c.splice(t-1,1);for(var z=0;z<y.length;z++){var D=y[z];if(x.phases[D]){D=f[D];var F=D.indexOf(x);-1!==F&&D.splice(F,1)}}}}}function k(){for(;a.length;){var t=a.shift();t.isActive&&(t.isActive=!1,t.callback())}h.debug.willDispatch=!1}function l(){return g(p)}Object.defineProperty(h,"__esModule",{value:!0});h.now=d;var m=function(){return function(t){this.phases=t;this.paused=!1;this.pausedAt=0;this.epoch=
-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),r=function(){function t(x){this.callback=x;this.isActive=!0}t.prototype.remove=function(){this.isActive=!1};return t}(),u=-1,v=0,w=0,B=Number.POSITIVE_INFINITY,C={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},y=["prepare","preRender","render","postRender","update"],a=[],c=[],f={prepare:[],preRender:[],render:[],postRender:[],update:[]},q=function(){function t(x){this._task=x}t.prototype.remove=function(){this._task.removed=!0};
t.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=h.now())};t.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=h.now()-this._task.pausedAt))};return t}();h.FrameTaskHandle=q;h.debug={frameTasks:c,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(t){void 0===t&&(t=!1);for(var x=0;x<c.length;x++)c[x].removed=!0;t&&e()},dispatch:k,executeFrameTasks:function(t){void 0===t&&(t=
h.now());0>u&&(u=t);var x=t-u;u=t;for(var z=0;z<c.length;z++){var D=c[z];-1!==D.epoch&&(D.dt=x)}for(z=0;z<y.length;z++){x=y[z];for(var F=f[x],G=0;G<F.length;G++)D=F[G],D.paused||D.removed||(0===z&&D.ticks++,-1===D.epoch&&(D.epoch=t),C.time=t,C.deltaTime=D.dt,C.elapsedFrameTime=h.now()-t,C.frameDuration=0<w?w:B,C.spendInTask=t-D.epoch,D.phases[x].call(D,C))}e()}};h.schedule=function(t){t=new r(t);a.push(t);h.debug.willDispatch||(h.debug.willDispatch=!0,b(k));return t};h.addFrameTask=function(t){var x=
new m(t);c.push(x);for(var z=0,D=y;z<D.length;z++){var F=D[z];t[F]&&f[F].push(x)}h.debug.rafId||(u=-1,h.debug.rafId=n());return new q(x)};h.setFrameRate=function(t){if(0>=t)w=v=0;else{var x=1.05*B;t=Math.ceil(1E3/t/x);v=(t-1)*x;w=t*B}};h.requestNextFrame=n})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(A,h,b){function d(){if(b.postMessage&&!b.importScripts){var p=b.onmessage,n=!0;b.onmessage=function(){n=!1};b.postMessage("","*");b.onmessage=
p;return n}return!1}var g=b.MutationObserver||b.WebKitMutationObserver;return function(){if(b.process&&b.process.nextTick)var p=function(l){b.process.nextTick(l)};else if(b.Promise)p=function(l){b.Promise.resolve().then(l)};else if(g){var n=[],e=document.createElement("div");(new g(function(){for(;0<n.length;)n.shift()()})).observe(e,{attributes:!0});p=function(l){n.push(l);e.setAttribute("queueStatus","1")}}else if(d()){var k=[];b.addEventListener("message",function(l){if(l.source===b&&"esri-nexttick-message"===
l.data)for(l.stopPropagation();k.length;)k.shift()()},!0);p=function(l){k.push(l);b.postMessage("esri-nexttick-message","*")}}else p=b.setImmediate?function(l){return b.setImmediate(l)}:function(l){return b.setTimeout(l,0)};return p}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(A,h){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require",
"exports","./global"],function(A,h,b){return function(){var d=b.performance||{};if(d.now)return function(){return d.now()};if(d.webkitNow)return function(){return d.webkitNow()};if(d.mozNow)return function(){return d.mozNow()};if(d.msNow)return function(){return d.msNow()};if(d.oNow)return function(){return d.oNow()};var g=d.timing&&d.timing.navigationStart?d.timing.navigationStart:Date.now();return function(){return Date.now()-g}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require",
"exports","./global","./now"],function(A,h,b,d){var g=d();A=b.requestAnimationFrame;if(!A){h=["ms","moz","webkit","o"];for(var p=0;p<h.length&&!A;++p)A=b[h[p]+"RequestAnimationFrame"];A||(A=function(n){var e=d(),k=Math.max(0,16-(e-g)),l=b.setTimeout(function(){n(d())},k);g=e+k;return l})}return A})},"esri/layers/vectorTiles/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(A,h,b,d,g,p){function n(k,
l,m){void 0===m&&(m=e);for(var r=g.getProperties(k),u=r.metadatas,v={},w=0,B=Object.getOwnPropertyNames(l);w<B.length;w++){var C=v,y=u,a=B[w],c=l,f=m,q=p.originSpecificReadPropertyDefinition(y[a],f);q&&(!q.read||!1!==q.read.enabled&&!q.read.source)&&(C[a]=!0);for(var t=0,x=Object.getOwnPropertyNames(y);t<x.length;t++){var z=x[t];q=p.originSpecificReadPropertyDefinition(y[z],f);a:{var D=a;var F=c;if(q&&q.read&&!1!==q.read.enabled&&q.read.source)if(q=q.read.source,"string"===typeof q){if(q===D||-1<
q.indexOf(".")&&0===q.indexOf(D)&&d.exists(q,F)){D=!0;break a}}else for(var G=0;G<q.length;G++){var E=q[G];if(E===D||-1<E.indexOf(".")&&0===E.indexOf(D)&&d.exists(E,F)){D=!0;break a}}D=!1}D&&(C[z]=!0)}}r.setDefaultOrigin(m.origin);B=0;for(C=Object.getOwnPropertyNames(v);B<C.length;B++)w=C[B],a=(y=p.originSpecificReadPropertyDefinition(u[w],m).read)&&y.source,c=void 0,c=a&&"string"===typeof a?d.valueOf(l,a):l[w],y&&y.reader&&(c=y.reader.call(k,c,l,m)),void 0!==c&&r.set(w,c);l=0;for(u=Object.getOwnPropertyNames(u);l<
u.length;l++)w=u[l],v[w]||(B=k,C=r,y=m,a=(a=p.originSpecificReadPropertyDefinition(C.metadatas[w],y))&&a.read&&a.read.default,void 0!==a&&(B="function"===typeof a?a.call(B,w,y):a,void 0!==B&&C.set(w,B)));r.setDefaultOrigin("user")}Object.defineProperty(h,"__esModule",{value:!0});var e={origin:"service"};h.read=n;h.readLoadable=function(k,l,m,r){void 0===r&&(r=e);l=b({},r,{messages:[]});m(l);l.messages.forEach(function(u){"warning"!==u.type||k.loaded?r&&r.messages.push(u):k.loadWarnings.push(u)})};
h.default=n})},"esri/layers/vectorTiles/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(A,h,b,d,g,p,n){function e(m,r,u,v,w,B){if(!v||!v.write)return!1;var C=m.get(u);if(void 0===C)return!1;if(!w&&v.write.overridePolicy){var y=v.write.overridePolicy.call(m,C,u,B);void 0!==y&&(w=y)}w||(w=v.write);if(!w||!1===w.enabled)return!1;if(null===C){if(w.allowNull)return!0;w.isRequired&&((m=new b("web-document-write:property-required",
"Missing value for required property '"+u+"' on '"+m.declaredClass+"'",{propertyName:u,target:m}),B)&&B.messages?B.messages.push(m):m&&!B&&l.error(m.name,m.message));return!1}return!w.ignoreOrigin&&B&&B.origin&&r.store.originOf(u)<g.nameToId(B.origin)?!1:!0}function k(m,r,u){if(m&&"function"===typeof m.toJSON&&(!m.toJSON.isDefaultToJSON||!m.write))return p.merge(r,m.toJSON());var v=p.getProperties(m),w=v.metadatas,B;for(B in w){var C=n.originSpecificWritePropertyDefinition(w[B],u);if(e(m,v,B,C,null,
u)){var y=m.get(B),a={};C.write.writer.call(m,y,a,"string"===typeof C.write.target?C.write.target:B,u);C=a;0<Object.keys(C).length&&(r=p.merge(r,C),u&&u.writtenProperties&&u.writtenProperties.push({target:m,propName:B,oldOrigin:g.idToReadableName(v.store.originOf(B)),newOrigin:u.origin}))}}return r}Object.defineProperty(h,"__esModule",{value:!0});var l=d.getLogger("esri.core.accessorSupport.write");h.willPropertyWrite=function(m,r,u,v){var w=p.getProperties(m),B=n.originSpecificWritePropertyDefinition(w.metadatas[r],
v);return B?e(m,w,r,B,u,v):!1};h.write=k;h.disableWriteDefaultPolicy=function(m){return function(r){return{enabled:r!==m}}};h.default=k})},"esri/layers/vectorTiles/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(A,h,b,d,g,p,n,e){A=function(k){function l(r){r=k.call(this)||this;r.latestWkid=null;
r.wkid=null;r.wkt=null;return r}b(l,k);var m=l;l.fromJSON=function(r){if(!r)return null;if(r.wkid){if(102100===r.wkid)return m.WebMercator;if(4326===r.wkid)return m.WGS84}var u=new m;u.read(r);return u};l.prototype.normalizeCtorArgs=function(r){return r&&"object"===typeof r?r:(u={},u["string"===typeof r?"wkt":"wkid"]=r,u);var u};Object.defineProperty(l.prototype,"isWGS84",{get:function(){return e.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"isWebMercator",{get:function(){return e.isWebMercator(this)},
enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"isGeographic",{get:function(){return e.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"isWrappable",{get:function(){return e.isWrappable(this)},enumerable:!0,configurable:!0});l.prototype.writeWkt=function(r,u){this.wkid||(u.wkt=r)};l.prototype.clone=function(){if(this===m.WGS84)return m.WGS84;if(this===m.WebMercator)return m.WebMercator;var r=new m;null!=this.wkid?(r.wkid=this.wkid,null!=this.latestWkid&&
(r.latestWkid=this.latestWkid),null!=this.vcsWkid&&(r.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(r.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(r.wkt=this.wkt);return r};l.prototype.equals=function(r){return e.equals(this,r)};l.prototype.toJSON=function(r){return this.write(null,r)};l.GCS_NAD_1927=null;l.WGS84=null;l.WebMercator=null;d([n.property({dependsOn:["wkid"],readOnly:!0})],l.prototype,"isWGS84",null);d([n.property({dependsOn:["wkid"],readOnly:!0})],l.prototype,"isWebMercator",
null);d([n.property({dependsOn:["wkid","wkt"],readOnly:!0})],l.prototype,"isGeographic",null);d([n.property({dependsOn:["wkid"],readOnly:!0})],l.prototype,"isWrappable",null);d([n.property({type:Number,json:{write:!0}})],l.prototype,"latestWkid",void 0);d([n.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],l.prototype,"wkid",void 0);d([n.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===
this.wkid?!0:!1}}}}}}})],l.prototype,"wkt",void 0);d([n.writer("wkt"),n.writer("web-scene","wkt")],l.prototype,"writeWkt",null);d([n.property({type:Number,json:{write:!0}})],l.prototype,"vcsWkid",void 0);d([n.property({type:Number,json:{write:!0}})],l.prototype,"latestVcsWkid",void 0);return l=m=d([n.subclass("esri.geometry.SpatialReference")],l)}(n.declared(g));A.prototype.toJSON.isDefaultToJSON=!0;A.GCS_NAD_1927=new A({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
A.WGS84=new A(4326);A.WGS84.wkt=p.substitute({Central_Meridian:"0.0"},e.getInfo(A.WGS84).wkTemplate);A.WebMercator=new A({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(A.GCS_NAD_1927),Object.freeze(A.WGS84),Object.freeze(A.WebMercator));return A})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(A,h,b){function d(k){return k.wkid&&!0===g[k.wkid]}Object.defineProperty(h,"__esModule",{value:!0});var g=
{102113:!0,102100:!0,3857:!0,3785:!0},p={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};A=[-2.0037508342788905E7,2.0037508342788905E7];var n=[-2.0037508342787E7,2.0037508342787E7],e={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:A,origin:n,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:A,origin:n,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:A,origin:n,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:A,origin:n,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};h.equals=function(k,l){if(l){if(k===l)return!0;if(null!=k.wkid||null!=l.wkid)return k.wkid===l.wkid||d(k)&&d(l)||null!=l.latestWkid&&k.wkid===l.latestWkid||null!=k.latestWkid&&l.wkid===k.latestWkid;if(k.wkt&&l.wkt)return k.wkt.toUpperCase()===l.wkt.toUpperCase()}return!1};h.getInfo=function(k){return k.wkid?e[k.wkid]:null};h.isGeographic=function(k){return k.wkid?null==b[k.wkid]:k.wkt?!!/^\s*GEOGCS/i.test(k.wkt):!1};h.isWGS84=function(k){return 4326===
k.wkid};h.isWebMercator=d;h.isWrappable=function(k){return k.wkid&&!0===p[k.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(A){return A})},"esri/layers/vectorTiles/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(A,h,b,d){function g(l,m,r,u,v){if("point"===l.type&&"point"===v.type)m=m(l.x,l.y,k,0,u),v.x=m[0],v.y=m[1];else if("extent"===l.type&&
"extent"===v.type){var w=m(l.xmin,l.ymin,k,0,u);v.xmin=w[0];v.ymin=w[1];m=m(l.xmax,l.ymax,k,0,u);v.xmax=m[0];v.ymax=m[1]}else if("polyline"===l.type&&"polyline"===v.type||"polygon"===l.type&&"polygon"===v.type){w="polyline"===l.type?l.paths:l.rings;var B=[],C=void 0;for(l=0;l<w.length;l++){var y=w[l];C=[];B.push(C);for(var a=0;a<y.length;a++)C.push(m(y[a][0],y[a][1],[0,0],0,u)),2<y[a].length&&C[a].push(y[a][2]),3<y[a].length&&C[a].push(y[a][3])}"polyline"===v.type?v.paths=B:v.rings=B}else if("multipoint"===
l.type&&"multipoint"===v.type){w=l.points;B=[];for(l=0;l<w.length;l++)B[l]=m(w[l][0],w[l][1],[0,0],0,u),2<w[l].length&&B[l].push(w[l][2]),3<w[l].length&&B[l].push(w[l][3]);v.points=B}else if("mesh"===l.type&&"mesh"===v.type&&(w=l.vertexAttributes&&l.vertexAttributes.position,B=v.vertexAttributes&&v.vertexAttributes.position,w))for(C=[0,0],l=0;l<w.length;l+=3)m(w[l],w[l+1],C,0,u),B[l]=C[0],B[l+1]=C[1];v.spatialReference=r;return v}function p(l,m){l=l&&(null!=l.wkid||null!=l.wkt?l:l.spatialReference);
m=m&&(null!=m.wkid||null!=m.wkt?m:m.spatialReference);return l&&m?d.equals(m,l)?!0:d.isWebMercator(m)&&d.isWGS84(l)||d.isWebMercator(l)&&d.isWGS84(m):!1}function n(l,m,r,u){void 0===r&&(r=[0,0]);void 0===u&&(u=0);89.99999<m?m=89.99999:-89.99999>m&&(m=-89.99999);m*=.017453292519943;r[u]=111319.49079327169*l;r[u+1]=3189068.5*Math.log((1+Math.sin(m))/(1-Math.sin(m)));return r}function e(l,m,r,u,v){void 0===r&&(r=[0,0]);void 0===u&&(u=0);void 0===v&&(v=!1);l=l/6378137*57.29577951308232;r[u]=v?l:l-360*
Math.floor((l+180)/360);r[u+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*m/6378137)));return r}Object.defineProperty(h,"__esModule",{value:!0});var k=[0,0];h.canProject=p;h.project=function(l,m){var r=l&&l.spatialReference;m=m&&(null!=m.wkid||null!=m.wkt?m:m.spatialReference);return p(r,m)?d.equals(r,m)?l.clone():d.isWebMercator(m)?g(l,n,b.WebMercator,!1,l.clone()):d.isWGS84(m)?g(l,e,b.WGS84,!1,l.clone()):null:null};h.lngLatToXY=n;h.xyToLngLat=e;h.geographicToWebMercator=function(l,
m,r){void 0===m&&(m=!1);void 0===r&&(r=l.clone());return g(l,n,b.WebMercator,m,r)};h.webMercatorToGeographic=function(l,m,r){void 0===m&&(m=!1);void 0===r&&(r=l.clone());return g(l,e,b.WGS84,m,r)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileData":function(){define("require exports ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./WGLDisplayList ./WGLDisplayObject ./WGLDisplayRecord ./mesh/VertexBuffer ./mesh/factories/WGLMeshFactory ./util/Reader ./util/serializationUtils ./util/Writer".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v){var w=new b.default,B=new b.default;return function(){function C(){this.tileBufferData=this.tileDisplayData=null}C.prototype.reshuffle=function(){w.reset();var y=this._collectDisplayRecords(),a;for(a in y)for(var c=y[a],f=0,q=c;f<q.length;f++){var t=q[f];w.needMore(t.geometryType,t.meshData?t.meshData.vertexCount:t.vertexCount,t.meshData?t.meshData.indexData.length:t.indexCount)}f=y.length;q=new d;for(a=0;a<f;++a){q.geometries[a].indexBuffer=new Uint32Array(Math.round(1.15*
w.indicesFor(a)));t=[];for(var x in this.tileBufferData.geometries[a].vertexBuffer)t.push(this.tileBufferData.geometries[a].vertexBuffer[x].stride);t=C._computeVertexAlignment(t);c=Math.round(1.15*w.verticesFor(a));t=C._align(c,t);for(var z in this.tileBufferData.geometries[a].vertexBuffer)c=this.tileBufferData.geometries[a].vertexBuffer[z].stride,q.geometries[a].vertexBuffer[z]={stride:c,data:new Uint32Array(Math.round(t*c/4))}}B.reset();this.tileDisplayData.displayList=new n;for(a=0;a<f;++a){c=
y[a];x=0;for(z=c;x<z.length;x++){t=z[x];if(t.meshData)t.writeMeshDataToBuffers(B.verticesFor(a),q.geometries[a].vertexBuffer,B.indicesFor(a),q.geometries[a].indexBuffer),t.meshData=null;else{var D=this.tileBufferData.geometries[a].vertexBuffer,F=this.tileBufferData.geometries[a].indexBuffer,G=q.geometries[a].vertexBuffer,E=q.geometries[a].indexBuffer,H=B.verticesFor(a),O=B.indicesFor(a);p.copyMeshData(H,O,G,E,t,D,F);t.vertexFrom=H;t.indexFrom=O}B.needMore(a,t.vertexCount,t.indexCount)}this.tileDisplayData.displayList.addToList(c)}this.tileBufferData=
q};C.prototype.getStrides=function(){for(var y=[],a=0;a<this.tileBufferData.geometries.length;++a){var c=this.tileBufferData.geometries[a];y[a]={};for(var f in c.vertexBuffer)y[a][f]=c.vertexBuffer[f].stride}return y};C.prototype._guessSize=function(){for(var y=this.tileDisplayData.displayObjects,a=Math.min(y.length,4),c=0,f=0;f<a;f++)c=Math.max(c,y[f].displayRecords.length);return 2*(12*y.length+y.length*c*40)};C.prototype.serialize=function(){var y=this.tileBufferData.serialize(),a=this.tileBufferData.getBuffers(),
c=this.tileDisplayData.serialize(new v.default(Int32Array,this._guessSize())).buffer();a.push(c);return{result:{displayData:c,bufferData:y},transferList:a}};C.decode=function(y){var a=m.MaterialStore.deserialize(new r.default(y.materialStore)),c=u.deserializeList(new r.default(y.displayObjects),e,{store:a});a={};for(var f in y.vertexBuffersMap)a[f]=l.VertexBuffers.decode(y.vertexBuffersMap[f]);y=new C;f=new g;var q=new d;f.displayObjects=c;for(var t in a)c=a[t],q.geometries[t].indexBuffer=c.indexBuffer,
q.geometries[t].vertexBuffer=c.namedBuffers;y.tileDisplayData=f;y.tileBufferData=q;return y};C.bind=function(y,a){var c=new C;c.tileDisplayData=y;c.tileBufferData=a;return c};C.create=function(y,a){var c=new C;c.tileDisplayData=new g;c.tileDisplayData.displayObjects=y;for(var f=[0,0,0,0,0],q=[0,0,0,0,0],t=[[],[],[],[],[]],x=0;x<y.length;x++)for(var z=0,D=y[x].displayRecords;z<D.length;z++){var F=D[z];t[F.geometryType].push(F);f[F.geometryType]+=F.meshData.vertexCount;q[F.geometryType]+=F.meshData.indexData.length}y=
new d;a=[a.fill||{},a.line||{},a.icon||{},a.text||{},a.label||{}];for(x=0;5>x;x++){z=new Uint32Array(q[x]);D=void 0;F=a[x];var G=f[x],E={};for(D in F){var H={data:new Uint32Array(G*F[D]/4),stride:F[D]};E[D]=H}D=E;k.writeAllMeshDataToBuffers(t[x],D,z);y.geometries[x]={indexBuffer:z,vertexBuffer:D}}c.tileBufferData=y;return c};C._align=function(y,a){var c=y%a;return 0===c?y:y+(a-c)};C._computeVertexAlignment=function(y){for(var a=!1,c=!1,f=0;f<y.length;f++){var q=y[f];2===q%4?a=!0:0!==q%4&&(c=!0)}return c?
4:a?2:1};C.prototype._collectDisplayRecords=function(){for(var y=[[],[],[],[],[]],a=0,c=this.tileDisplayData.displayObjects;a<c.length;a++)for(var f=0,q=c[a].displayRecords;f<q.length;f++){var t=q[f];y[t.geometryType].push(t)}return y};return C}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MemoryRequirements":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function b(){this._byGeometryType=null}Object.defineProperty(b.prototype,
"satisfied",{get:function(){return!this._byGeometryType},enumerable:!0,configurable:!0});b.prototype.reset=function(){this._byGeometryType=null};b.prototype.verticesFor=function(d){return this._byGeometryType?this._byGeometryType[d].vertices:0};b.prototype.indicesFor=function(d){return this._byGeometryType?this._byGeometryType[d].indices:0};b.prototype.needMore=function(d,g,p){if(g||p)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},
{vertices:0,indices:0},{vertices:0,indices:0}]),d=this._byGeometryType[d],d.vertices+=g,d.indices+=p};return b}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileBufferData":function(){define(["require","exports"],function(A,h){return function(){function b(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}b.deserialize=function(d){for(var g=
new b,p=0;5>p;++p){g.geometries[p].indexBuffer=new Uint32Array(d.geometries[p].indexBuffer);g.geometries[p].vertexBuffer={};for(var n in d.geometries[p].vertexBuffer)g.geometries[p].vertexBuffer[n]={data:new Uint32Array(d.geometries[p].vertexBuffer[n].data),stride:d.geometries[p].vertexBuffer[n].stride}}return g};b.prototype.serialize=function(){for(var d={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},
{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]},g=0;5>g;++g)for(var p in this.geometries[g].vertexBuffer)d.geometries[g].vertexBuffer[p]={data:this.geometries[g].vertexBuffer[p].data.buffer,stride:this.geometries[g].vertexBuffer[p].stride};return d};b.prototype.getBuffers=function(){for(var d=[],g=0;5>g;++g){d.push(this.geometries[g].indexBuffer.buffer);
for(var p in this.geometries[g].vertexBuffer)d.push(this.geometries[g].vertexBuffer[p].data.buffer)}return d};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileDisplayData":function(){define("require exports ./WGLDisplayList ./WGLDisplayObject ./mesh/factories/WGLMeshFactory ./util/serializationUtils".split(" "),function(A,h,b,d,g,p){return function(){function n(){}Object.defineProperty(n.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=
new Map;for(var e=0,k=this.displayObjects;e<k.length;e++){var l=k[e];this._displayObjectRegistry.set(l.id,l)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"displayList",{get:function(){if(!this._displayList){this._displayList=new b;for(var e=0,k=this.displayObjects;e<k.length;e++)for(var l=0,m=k[e].displayRecords;l<m.length;l++)this._displayList.addToList(m[l])}return this._displayList},set:function(e){this._displayList=e},enumerable:!0,configurable:!0});
n.prototype.serialize=function(e){this.materialStore.serialize(e);p.serializeList(e,this.displayObjects);return e};n.prototype._deserializeObjects=function(e){var k=e.readInt32();k=Array(k);for(var l=new b,m=new Map,r={store:this.materialStore},u=0;u<k.length;++u){var v=d.deserialize(e,r);k[u]=v;m.set(v.id,v);var w=0;for(v=v.displayRecords;w<v.length;w++)l.addToList(v[w])}this.displayObjects=k;this._displayList=l;this._displayObjectRegistry=m};n.deserialize=function(e){var k=new n;k.materialStore=
g.MaterialStore.deserialize(e);k._deserializeObjects(e);return k};return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayList":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/Logger ./enums ./MaterialInfo ./Utils ./util/serializationUtils".split(" "),function(A,h,b,d,g,p,n,e){var k=d.getLogger("esri.views.2d.engine.webgl.WGLDisplayList");A=function(){function v(){this.symbolLevels=[]}Object.defineProperty(v.prototype,"empty",{get:function(){return!this.symbolLevels||
0===this.symbolLevels.length},enumerable:!0,configurable:!0});v.prototype.addToList=function(w){var B=this;Array.isArray(w)?w.forEach(function(C){B._addToList(C)}):this._addToList(w)};v.prototype.removeFromList=function(w){var B=this;Array.isArray(w)||(w=[w]);w.forEach(function(C){B._removeFromList(C)})};v.prototype.ofType=function(w){var B,C,y,a,c,f,q,t,x,z,D;return b(this,function(F){switch(F.label){case 0:B=0,C=this.symbolLevels,F.label=1;case 1:if(!(B<C.length))return[3,8];y=C[B];a=0;c=y.zLevels;
F.label=2;case 2:if(!(a<c.length))return[3,7];f=c[a];q=f.geometryDPInfo;t=this._getDPInfoType(w);if(!q[t])return[3,6];x=0;z=q[t];F.label=3;case 3:if(!(x<z.length))return[3,6];D=z[x];return[4,D];case 4:F.sent(),F.label=5;case 5:return x++,[3,3];case 6:return a++,[3,2];case 7:return B++,[3,1];case 8:return[2]}})};v.prototype._addToList=function(w){var B=this._getDisplayList(w.symbolLevel,w.zOrder,w.geometryType),C=0<B.length?B[B.length-1]:null;null!==C&&n.isSameMaterialInfo(C.materialInfo,w.materialInfo)&&
C.indexFrom+C.indexCount===w.indexFrom?C.indexCount+=w.indexCount:(C=new l,C.indexFrom=w.indexFrom,C.indexCount=w.indexCount,C.materialInfo=w.materialInfo,C.geometryType=w.geometryType,B.push(C))};v.prototype._removeFromList=function(w){for(var B=this._getDisplayList(w.symbolLevel,w.zOrder,w.geometryType),C=B.length,y=void 0,a=0;a<C;++a){var c=B[a];w.indexFrom+w.indexCount>c.indexFrom&&w.indexFrom<c.indexFrom+c.indexCount&&(y=a)}if(void 0!==y)if(c=B[y],w.indexFrom===c.indexFrom)c.indexCount-=w.indexCount,
c.indexFrom+=w.indexCount;else if(w.indexFrom+w.indexCount===c.indexFrom+c.indexCount)c.indexCount-=w.indexCount;else{C=c.indexFrom;a=w.indexFrom-c.indexFrom;var f=w.indexCount;w=c.indexFrom+c.indexCount-(w.indexFrom+w.indexCount);c.indexCount=a;var q=new l;q.geometryType=c.geometryType;q.materialInfo=new p.default;q.materialInfo.copy(c.materialInfo);q.indexFrom=C+a+f;q.indexCount=w;B.splice(y+1,0,q)}};v.prototype._getDisplayList=function(w,B,C){for(var y,a=this.symbolLevels.length,c=0;c<a;c++)if(this.symbolLevels[c].symbolLevel===
w){y=this.symbolLevels[c];break}y||(y=new u,y.symbolLevel=w,this.symbolLevels.push(y));w=y.zLevels.length;for(a=0;a<w;a++)if(y.zLevels[a].zLevel===B){var f=y.zLevels[a];break}f||(f=new r,f.geometryDPInfo=new m,f.zLevel=B,y.zLevels.push(f));switch(C){case g.WGLGeometryType.FILL:f.geometryDPInfo.fill||(f.geometryDPInfo.fill=[]);var q=f.geometryDPInfo.fill;break;case g.WGLGeometryType.LINE:f.geometryDPInfo.line||(f.geometryDPInfo.line=[]);q=f.geometryDPInfo.line;break;case g.WGLGeometryType.MARKER:f.geometryDPInfo.marker||
(f.geometryDPInfo.marker=[]);q=f.geometryDPInfo.marker;break;case g.WGLGeometryType.TEXT:f.geometryDPInfo.text||(f.geometryDPInfo.text=[]);q=f.geometryDPInfo.text;break;case g.WGLGeometryType.LABEL:f.geometryDPInfo.label||(f.geometryDPInfo.label=[]);q=f.geometryDPInfo.label;break;default:console.error("Trying to add a record with geometry type '"+C+"'.")}return q};v.prototype.serialize=function(w){e.serializeList(w,this.symbolLevels);return w};v.deserialize=function(w){var B=new v;B.symbolLevels=
e.deserializeList(w,u);return B};v.prototype._getDPInfoType=function(w){switch(w){case g.WGLGeometryType.FILL:return"fill";case g.WGLGeometryType.LINE:return"line";case g.WGLGeometryType.MARKER:return"marker";case g.WGLGeometryType.TEXT:return"text";case g.WGLGeometryType.LABEL:return"label";default:k.error("DisplayList: Tried to convert unknown geometryType: "+w)}};return v}();var l=function(){function v(){this.materialInfo=null;this.indexCount=this.indexFrom=0}v.prototype.serialize=function(w){this.materialInfo.serialize(w);
w.writeInt32(this.indexFrom);w.writeInt32(this.indexCount);return w};v.deserialize=function(w,B){var C=new v;C.geometryType=B.geometryType;C.materialInfo=p.default.deserialize(w);C.indexFrom=w.readInt32();C.indexCount=w.readInt32();return C};return v}(),m=function(){function v(){this.label=this.text=this.marker=this.line=this.fill=null}v.prototype.serialize=function(w){e.serializeList(w,this.fill);e.serializeList(w,this.line);e.serializeList(w,this.marker);e.serializeList(w,this.text);e.serializeList(w,
this.label);return w};v.deserialize=function(w){var B=new v,C={geometryType:g.WGLGeometryType.FILL},y=e.deserializeList(w,l,C);y.length&&(B.fill=y);C.geometryType=g.WGLGeometryType.LINE;y=e.deserializeList(w,l,C);y.length&&(B.line=y);C.geometryType=g.WGLGeometryType.MARKER;y=e.deserializeList(w,l,C);y.length&&(B.marker=y);C.geometryType=g.WGLGeometryType.TEXT;y=e.deserializeList(w,l,C);y.length&&(B.text=y);C.geometryType=g.WGLGeometryType.LABEL;w=e.deserializeList(w,l,C);w.length&&(B.label=w);return B};
return v}(),r=function(){function v(){this.geometryDPInfo=new m}v.prototype.serialize=function(w){w.writeInt32(this.zLevel);this.geometryDPInfo.serialize(w);return w};v.deserialize=function(w){var B=new v;B.zLevel=w.readInt32();B.geometryDPInfo=m.deserialize(w);return B};return v}(),u=function(){function v(){this.zLevels=[]}v.prototype.serialize=function(w){w.writeInt32(this.symbolLevel);e.serializeList(w,this.zLevels);return w};v.deserialize=function(w){var B=new v;B.symbolLevel=w.readInt32();B.zLevels=
e.deserializeList(w,r);return B};return v}();return A})},"esri/layers/vectorTiles/core/tsSupport/generatorHelper":function(){define([],function(){return function(A,h){function b(l){return function(m){return d([l,m])}}function d(l){if(p)throw new TypeError("Generator is already executing.");for(;g;)try{if(p=1,n&&(e=l[0]&2?n["return"]:l[0]?n["throw"]||((e=n["return"])&&e.call(n),0):n.next)&&!(e=e.call(n,l[1])).done)return e;if(n=0,e)l=[l[0]&2,e.value];switch(l[0]){case 0:case 1:e=l;break;case 4:return g.label++,
{value:l[1],done:!1};case 5:g.label++;n=l[1];l=[0];continue;case 7:l=g.ops.pop();g.trys.pop();continue;default:if(!(e=g.trys,e=0<e.length&&e[e.length-1])&&(6===l[0]||2===l[0])){g=0;continue}if(3===l[0]&&(!e||l[1]>e[0]&&l[1]<e[3]))g.label=l[1];else if(6===l[0]&&g.label<e[1])g.label=e[1],e=l;else if(e&&g.label<e[2])g.label=e[2],g.ops.push(l);else{e[2]&&g.ops.pop();g.trys.pop();continue}}l=h.call(A,g)}catch(m){l=[6,m],n=0}finally{p=e=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}var g=
{label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},p,n,e,k;return k={next:b(0),"throw":b(1),"return":b(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayObject":function(){define("require exports ../../../../core/libs/gl-matrix/vec2 ./WGLDisplayRecord ./collisions/Metric ./util/serializationUtils".split(" "),function(A,h,b,d,g,p){return function(){function n(e){this.yOverflow=this.xOverflow=
this.yBucket=this.xBucket=-1;this.id=e;this.displayRecords=[];this.metrics=[];this.anchor=null}n.prototype.addMetric=function(e,k,l,m){this.metrics.push(new g.default(e,{from:k,count:l},m))};n.prototype.serialize=function(e){e.writeInt32(this.id);p.serializeList(e,this.metrics);p.serializeList(e,this.displayRecords);this.anchor?(e.writeF32(this.anchor[0]),e.writeF32(this.anchor[1]),e.writeInt32(this.xBucket),e.writeInt32(this.yBucket),e.writeInt32(this.xOverflow),e.writeInt32(this.yOverflow)):(e.writeF32(0),
e.writeF32(0));return e};n.deserialize=function(e,k){var l=k.store,m=e.readInt32();k=new n(m);l={id:m,store:l};m=p.deserializeList(e,g.default);m.length&&(k.metrics=m);k.displayRecords=p.deserializeList(e,d,l);l=e.readF32();m=e.readF32();if(l||m)k.anchor=b.fromValues(l,m),k.xBucket=e.readInt32(),k.yBucket=e.readInt32(),k.xOverflow=e.readInt32(),k.yOverflow=e.readInt32();return k};return n}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(A){var h={create:function(){var b=
new A.ARRAY_TYPE(2);b[0]=0;b[1]=0;return b},clone:function(b){var d=new A.ARRAY_TYPE(2);d[0]=b[0];d[1]=b[1];return d},fromValues:function(b,d){var g=new A.ARRAY_TYPE(2);g[0]=b;g[1]=d;return g},copy:function(b,d){b[0]=d[0];b[1]=d[1];return b},set:function(b,d,g){b[0]=d;b[1]=g;return b},add:function(b,d,g){b[0]=d[0]+g[0];b[1]=d[1]+g[1];return b},subtract:function(b,d,g){b[0]=d[0]-g[0];b[1]=d[1]-g[1];return b}};h.sub=h.subtract;h.multiply=function(b,d,g){b[0]=d[0]*g[0];b[1]=d[1]*g[1];return b};h.mul=
h.multiply;h.divide=function(b,d,g){b[0]=d[0]/g[0];b[1]=d[1]/g[1];return b};h.div=h.divide;h.ceil=function(b,d){b[0]=Math.ceil(d[0]);b[1]=Math.ceil(d[1]);return b};h.floor=function(b,d){b[0]=Math.floor(d[0]);b[1]=Math.floor(d[1]);return b};h.min=function(b,d,g){b[0]=Math.min(d[0],g[0]);b[1]=Math.min(d[1],g[1]);return b};h.max=function(b,d,g){b[0]=Math.max(d[0],g[0]);b[1]=Math.max(d[1],g[1]);return b};h.round=function(b,d){b[0]=Math.round(d[0]);b[1]=Math.round(d[1]);return b};h.scale=function(b,d,
g){b[0]=d[0]*g;b[1]=d[1]*g;return b};h.scaleAndAdd=function(b,d,g,p){b[0]=d[0]+g[0]*p;b[1]=d[1]+g[1]*p;return b};h.distance=function(b,d){var g=d[0]-b[0];b=d[1]-b[1];return Math.sqrt(g*g+b*b)};h.dist=h.distance;h.squaredDistance=function(b,d){var g=d[0]-b[0];b=d[1]-b[1];return g*g+b*b};h.sqrDist=h.squaredDistance;h.length=function(b){var d=b[0];b=b[1];return Math.sqrt(d*d+b*b)};h.len=h.length;h.squaredLength=function(b){var d=b[0];b=b[1];return d*d+b*b};h.sqrLen=h.squaredLength;h.negate=function(b,
d){b[0]=-d[0];b[1]=-d[1];return b};h.inverse=function(b,d){b[0]=1/d[0];b[1]=1/d[1];return b};h.normalize=function(b,d){var g=d[0],p=d[1];g=g*g+p*p;0<g&&(g=1/Math.sqrt(g),b[0]=d[0]*g,b[1]=d[1]*g);return b};h.dot=function(b,d){return b[0]*d[0]+b[1]*d[1]};h.cross=function(b,d,g){d=d[0]*g[1]-d[1]*g[0];b[0]=b[1]=0;b[2]=d;return b};h.lerp=function(b,d,g,p){var n=d[0];d=d[1];b[0]=n+p*(g[0]-n);b[1]=d+p*(g[1]-d);return b};h.random=function(b,d){d=d||1;var g=2*A.RANDOM()*Math.PI;b[0]=Math.cos(g)*d;b[1]=Math.sin(g)*
d;return b};h.transformMat2=function(b,d,g){var p=d[0];d=d[1];b[0]=g[0]*p+g[2]*d;b[1]=g[1]*p+g[3]*d;return b};h.transformMat2d=function(b,d,g){var p=d[0];d=d[1];b[0]=g[0]*p+g[2]*d+g[4];b[1]=g[1]*p+g[3]*d+g[5];return b};h.transformMat3=function(b,d,g){var p=d[0];d=d[1];b[0]=g[0]*p+g[3]*d+g[6];b[1]=g[1]*p+g[4]*d+g[7];return b};h.transformMat4=function(b,d,g){var p=d[0];d=d[1];b[0]=g[0]*p+g[4]*d+g[12];b[1]=g[1]*p+g[5]*d+g[13];return b};h.forEach=function(){var b=h.create();return function(d,g,p,n,e,
k){g||(g=2);p||(p=0);for(n=n?Math.min(n*g+p,d.length):d.length;p<n;p+=g)b[0]=d[p],b[1]=d[p+1],e(b,b,k),d[p]=b[0],d[p+1]=b[1];return d}}();h.str=function(b){return"vec2("+b[0]+", "+b[1]+")"};h.exactEquals=function(b,d){return b[0]===d[0]&&b[1]===d[1]};h.equals=function(b,d){var g=b[0];b=b[1];var p=d[0];d=d[1];return Math.abs(g-p)<=A.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(b-d)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))};return h})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require",
"exports","../../../../core/Logger","./MeshData"],function(A,h,b,d){var g=b.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");return function(){function p(n,e,k){this.id=n;this.geometryType=e;this._materialInfo=k;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(p.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"materialInfo",{get:function(){return"number"===typeof this._materialInfo?(g.warn("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),null):this._materialInfo},set:function(n){this._materialInfo=n},enumerable:!0,configurable:!0});p.prototype.copy=function(){var n=new p(this.id,this.geometryType,this._materialInfo);n.vertexFrom=this.vertexFrom;n.vertexCount=this.vertexCount;n.indexFrom=this.indexFrom;n.indexCount=this.indexCount;n.zOrder=this.zOrder;n.symbolLevel=
this.symbolLevel;n.meshData=this.meshData;return n};p.prototype.setMeshDataFromBuffers=function(n,e,k){var l=new d,m;for(m in e){for(var r=e[m].stride,u=e[m].data,v=[],w=0;w<r*n.vertexCount/4;++w)v[w]=u[w+r*n.vertexFrom/4];l.vertexData.set(m,v)}for(w=l.indexData.length=0;w<n.indexCount;++w)l.indexData[w]=k[w+n.indexFrom]-n.vertexFrom;l.vertexCount=n.vertexCount;this.meshData=l};p.prototype.readMeshDataFromBuffers=function(n,e){this.meshData?this.meshData.clear():this.meshData=new d;for(var k in n){for(var l=
n[k].stride,m=n[k].data,r=[],u=0;u<l*this.vertexCount/4;++u)r[u]=m[u+l*this.vertexFrom/4];this.meshData.vertexData.set(k,r)}for(u=this.meshData.indexData.length=0;u<this.indexCount;++u)this.meshData.indexData[u]=e[u+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};p.prototype.writeMeshDataToBuffers=function(n,e,k,l){for(var m in e)for(var r=e[m].stride,u=this.meshData.vertexData.get(m),v=e[m].data,w=0;w<r*this.meshData.vertexCount/4;++w)v[w+r*n/4]=u[w];for(w=0;w<this.meshData.indexData.length;++w)l[w+
k]=this.meshData.indexData[w]+n;this.vertexFrom=n;this.vertexCount=this.meshData.vertexCount;this.indexFrom=k;this.indexCount=this.meshData.indexData.length};p.writeAllMeshDataToBuffers=function(n,e,k){for(var l=0,m=0,r=0;r<n.length;r++){var u=n[r];u.writeMeshDataToBuffers(l,e,m,k);l+=u.vertexCount;m+=u.indexCount}};p.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};p.prototype.serialize=function(n){n.writeInt32(this.geometryType);
n.writeInt32(this._materialInfo);n.writeInt32(this.symbolLevel);n.writeInt32(this.zOrder);n.writeInt32(this.vertexFrom);n.writeInt32(this.vertexCount);n.writeInt32(this.indexFrom);n.writeInt32(this.indexCount);return n};p.deserialize=function(n,e){var k=n.readInt32(),l=e.store&&e.store.get(n.readInt32())||n.readInt32();e=new p(e.id,k,l);e.symbolLevel=n.readInt32();e.zOrder=n.readInt32();e.vertexFrom=n.readInt32();e.vertexCount=n.readInt32();e.indexFrom=n.readInt32();e.indexCount=n.readInt32();return e};
return p}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(A,h){return function(){function b(){this.vertexData=new Map;this.vertexCount=0;this.indexData=[]}b.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};b.prototype.update=function(d,g,p){for(var n in d)this.vertexData.set(n,d[n]);for(n in this.vertexData)null===d[n]&&this.vertexData.delete(n);this.vertexCount=g;this.indexData=p};return b}()})},
"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/Metric":function(){define(["require","exports","./BoundingBox"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function d(g,p,n,e,k){void 0===e&&(e=255);void 0===k&&(k=0);this.bounds=g;this.range=p;this.index=n;this.minZoom=e;this.maxZoom=k}d.prototype.serialize=function(g){this.bounds.serialize(g);g.writeInt32(this.range.from);g.writeInt32(this.range.count);g.writeInt32(this.index);return g};d.deserialize=function(g){var p=
b.default.deserialize(g),n=g.readInt32(),e=g.readInt32();n={from:n,count:e};g=g.readInt32();return new d(p,n,g)};return d}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require","exports","../../../../../core/libs/gl-matrix/vec2"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function d(g,p,n,e){this.width=n;this.height=e;this.center=b.fromValues(g,p)}Object.defineProperty(d.prototype,"x",{get:function(){return this.center[0]},
set:function(g){this.center[0]=g},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"y",{get:function(){return this.center[1]},set:function(g){this.center[1]=g},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0});d.prototype.serialize=function(g){g.writeF32(this.center[0]);
g.writeF32(this.center[1]);g.writeInt32(this.width);g.writeInt32(this.height);return g};d.deserialize=function(g){var p=g.readF32(),n=g.readF32(),e=g.readInt32();g=g.readInt32();return new d(p,n,e,g)};return d}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../MaterialInfo ../../Utils ../../visualVariablesUtils ../../WGLDisplayObject ../VertexVector ../templates/meshTemplateUtils ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../../util/Matcher ../../util/serializationUtils ../../util/vvFlagUtils ../../util/Writer".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a,c,f){Object.defineProperty(h,"__esModule",{value:!0});var q=g.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),t={esriGeometryPoint:"above-center above-left above-right center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:null,esriGeometryMultipoint:null,esriGeometryEnvelope:null},x=function(){function G(){this._materials=[];this._materialsIndex=new Map}
G.prototype.insert=function(E){var H=this._materials.length;this._materials.push(E);return H};G.prototype._hashGlyph=function(E,H,O){return"G-"+H+"-"+O+"-"+E.page};G.prototype._hashSprite=function(E,H,O){return"S-"+H+"-"+O+"-"+(E?E.page:-1)+"-"+(E?E.sdf:!1)};G.prototype.createSpriteMaterial=function(E,H,O){var K=this._hashSprite(E,H,O);if(this._materialsIndex.has(K))return this._materialsIndex.get(K);var L=this._materials.length;E=k.default.fromSprite(E,H,O);this._materials.push(E);this._materialsIndex.set(K,
L);return L};G.prototype.createGlyphMaterial=function(E,H,O){var K=this._hashGlyph(E,H,O);if(this._materialsIndex.has(K))return this._materialsIndex.get(K);var L=this._materials.length;E=k.default.fromGlyph(E,H,O);this._materials.push(E);this._materialsIndex.set(K,L);return L};G.prototype.get=function(E){return this._materials[E]};G.prototype.serialize=function(E){a.serializeList(E,this._materials);return E};G.deserialize=function(E){var H=new G;H._materials=a.deserializeList(E,k.default);return H};
return G}();h.MaterialStore=x;var z=function(){function G(E){this._bucketSize=E;this._rowsLength=n.TILE_SIZE/E;this._colsLength=n.TILE_SIZE/E;this._grid=this._initGrid()}G.prototype.checkOverlap=function(E,H){E=Math.floor(E/this._bucketSize);H=Math.floor(H/this._bucketSize);if(0>E||E>=this._rowsLength||0>H||H>=this._colsLength||this._grid[H][E])return!0;this._grid[H][E]=!0;return!1};G.prototype.reset=function(){this._grid=this._initGrid()};G.prototype._initGrid=function(){for(var E=[],H=0;H<this._rowsLength;H++)E.push(Array(this._colsLength));
return E};return G}(),D=function(){function G(E,H,O){this.displayObjects=E;this.vertexVectorsMap=H;this._materials=O;this.grid=new z(n.COLLISION_EARLY_REJECT_BUCKET_SIZE)}G.prototype.get=function(E){return this.vertexVectorsMap[E]};G.prototype.pushDisplayObject=function(E){this.displayObjects.push(E)};G.prototype.encode=function(E,H){var O=a.serializeList(new f.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),K=this._materials.serialize(new f.default(Uint32Array)).buffer(),L={};
H.push(O);H.push(K);for(var T=0;T<this.vertexVectorsMap.length;T++){var P=this.vertexVectorsMap[T];L[T]={};P.transfer(L[T],H)}E.displayObjects=O;E.materialStore=K;E.vertexBuffersMap=L;this.destroy()};G.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};G.prototype._guessSize=function(){for(var E=this.displayObjects,H=Math.min(E.length,4),O=0,K=0;K<H;K++)O=Math.max(O,E[K].displayRecords.length);return 2*(12*E.length+E.length*O*40)};return G}(),F=function(){function G(){this._vvMap=
new Map}G.prototype.set=function(E,H){this._vvMap.set(E,H)};G.prototype.getValue=function(E,H,O){return this._vvMap.has(E)?this._vvMap.get(E)(H,O):0};return G}();A=function(){function G(E,H,O,K,L,T,P,Q,J,R){var I=this;this._labelsDebugTemplate=null;this._matcher=E;this._materials=O;this._geometryType=K;this._idField=L;this._pixelRatio=J;this._vvMap=null;this._vvFlags=P;this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._createVVFunctionMap(T,
H,Q);R&&(this._validateLabelingInfo(R)?this._labelTemplates=R.map(function(S){return w.default.fromText(I._materials,0,S.symbol,J,S.labelPlacement)}):q.error(new d("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer.")))}G.from=function(E,H,O,K,L,T,P,Q){switch(E.type){case "simple":return G._fromSimpleRenderer(E,H,O,K,L,T,P,Q);case "unique-value":case "uniqueValue":return G._fromUniqueValueRenderer(E,H,O,K,L,T,P,Q);case "class-breaks":case "classBreaks":return G._fromClassBreaksRenderer(E,
H,O,K,L,T,P,Q);default:return q.error(new d("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}};Object.defineProperty(G.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});G.prototype.createMeshData=function(E){var H=Array(5),O=this._matcher.getDefault(),K=!!c.getMarkerVVFlags(this._vvFlags),L=!!c.getFillVVFlags(this._vvFlags),T=!!c.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),P=!!c.getTextVVFlags(this._vvFlags);
!this._labelTemplates&&O&&1===O.length&&O[0]instanceof C.default?(H[e.WGLGeometryType.MARKER]=new u.VertexVectors(e.WGLGeometryType.MARKER,K,E),H[e.WGLGeometryType.FILL]=new u.VertexVectors(e.WGLGeometryType.FILL,L,0),H[e.WGLGeometryType.LINE]=new u.VertexVectors(e.WGLGeometryType.LINE,T,0),H[e.WGLGeometryType.TEXT]=new u.VertexVectors(e.WGLGeometryType.TEXT,P,0),H[e.WGLGeometryType.LABEL]=new u.VertexVectors(e.WGLGeometryType.LABEL,!1,0)):(H[e.WGLGeometryType.MARKER]=new u.VertexVectors(e.WGLGeometryType.MARKER,
K,E),H[e.WGLGeometryType.FILL]=new u.VertexVectors(e.WGLGeometryType.FILL,L,E),H[e.WGLGeometryType.LINE]=new u.VertexVectors(e.WGLGeometryType.LINE,T,E),H[e.WGLGeometryType.TEXT]=new u.VertexVectors(e.WGLGeometryType.TEXT,P,E),H[e.WGLGeometryType.LABEL]=new u.VertexVectors(e.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?E:0));return new D([],H,this._materials)};G.prototype.write=function(E,H,O,K,L){var T=1===this._matcher.size()&&this._matcher.getDefault()||this._matcher.match(H,
O),P=H.attributes[this._idField],Q=new r(P),J=!!K&&!!this._labelTemplates;this._computeVV(H,O);if(T&&(H.geometry||H.centroid)){O=Q.displayRecords;for(var R=0;R<T.length;R++){var I=T[R],S=E.get(I.geometryType);I.writeMesh(O,S,this._geometryType,P,H,this._pixelRatio,this._vvBufU32)}J&&(T=this._getLabelReference(T),this._writeLabelMesh(Q,E,P,H,L,K.get(P),T));E.pushDisplayObject(Q)}};G.prototype._hasBadLabelClass=function(E,H){var O=E.labelPlacement,K=t[H];if(!K)return q.error(new d("mapview-labeling:unsupported-geometry-type",
"Unable to create labels for WebGL Feature Layer, "+H+" is not supported")),!0;K.some(function(L){return L===O})||(K=K[0],q.warn("Found invalid label placement type "+O+" for "+H+". Defaulting to "+K),E.labelPlacement=K);return!1};G.prototype._validateLabelingInfo=function(E){var H=this;return!E.some(function(O){return H._hasBadLabelClass(O,H._geometryType)})};G.prototype._getLabelReference=function(E){for(var H=0;H<E.length;H++){var O=E[H];if(O instanceof C.default)return O}return null};G.prototype._writeLabelMesh=
function(E,H,O,K,L,T,P){for(var Q=E.displayRecords,J=0,R=0,I=-1,S=-1,U=0;U<T.labelingInfo.length;U++){var V=T.labelingInfo[U],W=T.text[U],X=this._labelTemplates[V],Y=H.get(X.geometryType),da=L.get(X.symbolId).glyphMosaicItems,aa=Q.length;X.bindReferenceTemplate(P);if(!X.computeGlyphs(da,W)){da=X.computeAnchor(this._geometryType,K);W=X.bounds;if(-1===I&&(I=Math.floor(da[0]/n.COLLISION_BUCKET_SIZE),S=Math.floor(da[1]/n.COLLISION_BUCKET_SIZE),H.grid.checkOverlap(da[0],da[1])))return;X.writeMesh(Q,Y,
this._geometryType,O,K,this._pixelRatio,this._vvBufU32);E.anchor=da;E.addMetric(W,aa,Q.length-aa,V);V=W.center;J=Math.max(W.halfWidth+Math.abs(V[0]),J);R=Math.max(W.halfHeight+Math.abs(V[1]),R)}}-1!==I&&(O=2.5*Math.max(J,R),H=Math.ceil(Math.abs((O-E.anchor[0]%n.COLLISION_BUCKET_SIZE)/n.COLLISION_BUCKET_SIZE)),O=Math.ceil(Math.abs((O-E.anchor[1]%n.COLLISION_BUCKET_SIZE)/n.COLLISION_BUCKET_SIZE)),E.xBucket=I,E.yBucket=S,E.xOverflow=H,E.yOverflow=O)};G.prototype._debugLabels=function(E,H,O,K,L){K={geometry:{paths:[[[K[0]+
L.center[0]-L.width/2,K[1]+L.center[1]+L.height/2],[0,-L.height],[L.width,0],[0,L.height],[-L.width,0]]]},attributes:{}};L=this._getLabelDebugTemplate();H=H.get(L.geometryType);L.writeMesh(E,H,"esriGeometryPolyline",O,K,this._pixelRatio,this._vvBufU32)};G.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};G.prototype._createLabelsDebugTemplate=function(){var E=new p({style:"solid",width:1,
color:[255,0,0,1]});return B.default.fromSimpleLine(this._materials,0,E,null,this._pixelRatio)};G.prototype._isErrorVV=function(E){return null===E||isNaN(E)||Infinity===E};G.prototype._computeVV=function(E,H){if(!this._vvMap)return 0;var O=this._vvMap.getValue(e.VVType.SIZE,E,H),K=this._vvMap.getValue(e.VVType.COLOR,E,H),L=this._vvMap.getValue(e.VVType.OPACITY,E,H);E=this._vvMap.getValue(e.VVType.ROTATION,E,H);this._vvBufF32[e.VVType.SIZE]=this._isErrorVV(O)?NaN:O;this._vvBufF32[e.VVType.COLOR]=this._isErrorVV(K)?
NaN:K;this._vvBufF32[e.VVType.OPACITY]=this._isErrorVV(L)?NaN:L;this._vvBufF32[e.VVType.ROTATION]=this._isErrorVV(E)?NaN:E;return 0};G.prototype._createVVFunctionMap=function(E,H,O){if(E&&E.length)for(var K=0;K<E.length;K++){var L=E[K],T=l.getVVType(L.type);if(L=this._createGetValueFunction(L,H,O))this._vvMap||(this._vvMap=new F),this._vvMap.set(T,L)}};G.prototype._createGetValueFunction=function(E,H,O){if(l.getVVType(E.type)===e.VVType.SIZE){var K=m.getTypeOfSizeVisualVariable(E);return K===e.WGLVVFlag.SIZE_SCALE_STOPS?
null:this._createNormalizedFunction(E,H,O,K===e.WGLVVFlag.SIZE_UNIT_VALUE&&function(L){return m.getVisualVariableSizeValueRepresentationRatio(L,E.valueRepresentation)})}return this._createNormalizedFunction(E,H,O)};G.prototype._createNormalizedFunction=function(E,H,O,K){var L=E.field;if(L){if("string"===typeof L){var T=E.normalizationField;return T?function(P){if(P.attributes[L]&&P.attributes[T])return P=P.attributes[L]/P.attributes[T],K?K(P):P}:K?function(P){return K(P.attributes[L])}:function(P){return P.attributes[L]}}if("function"===
typeof L)return q.error(new d("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(P){};q.error(new d("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof L));return function(P){}}if(E.valueExpression&&"$view.scale"!==E.valueExpression)return l.createArcadeFunction({valueExpression:E.valueExpression,spatialReference:O,layer:H},K);q.error("Unable to create a normalized function for visual variable: "+
E);return function(P){}};G._fromSimpleRenderer=function(E,H,O,K,L,T,P,Q){var J=E.getSymbols();E=E.visualVariables;var R=c.getVVFlags(E),I=new y.default,S=new x;J.length&&I.setDefault(v.createMeshTemplates([],S,J[0],O,R,P));return new G(I,H,S,K,L,E,R,T,P,Q)};G._fromUniqueValueRenderer=function(E,H,O,K,L,T,P,Q){var J=E.uniqueValueInfos,R=E.visualVariables,I=c.getVVFlags(R),S=[E.field];E.field2&&S.push(E.field2);E.field3&&S.push(E.field3);var U=E.valueExpression;S=new y.MapMatcher(S,E.fieldDelimiter,
U?{valueExpression:U,spatialReference:T,layer:H}:null);U=new x;var V=E.backgroundFillSymbol;V=V&&v.createMeshTemplates([],U,V,O,I,P);for(var W=0;W<J.length;W++){var X=J[W],Y=v.createMeshTemplates([],U,X.symbol,O,I,P);S.add(X.value,V?V.concat(Y):Y)}if(E=E.defaultSymbol)O=v.createMeshTemplates([],U,E,O,I,P),S.setDefault(V?V.concat(O):O);return new G(S,H,U,K,L,R,I,T,P,Q)};G._fromClassBreaksRenderer=function(E,H,O,K,L,T,P,Q){var J=E.isMaxInclusive,R=E.visualVariables,I=E.valueExpression,S=E.normalizationField,
U=E.normalizationTotal,V=E.normalizationType,W=c.getVVFlags(R);J=new y.IntervalMatcher(E.field,J,I?{valueExpression:I,spatialReference:T,layer:H}:null,{normalizationField:S,normalizationTotal:U,normalizationType:V});I=new x;S=(S=E.backgroundFillSymbol)&&v.createMeshTemplates([],I,S,O,W,P,!0);U=0;for(V=E.classBreakInfos;U<V.length;U++){var X=V[U],Y=v.createMeshTemplates([],I,X.symbol,O,W,P);J.add({min:X.minValue,max:X.maxValue},S?S.concat(Y):Y)}if(E=E.defaultSymbol)O=v.createMeshTemplates([],I,E,O,
W,P),J.setDefault(S?S.concat(O):O);return new G(J,H,I,K,L,R,W,T,P,Q)};return G}();h.default=A})},"esri/layers/vectorTiles/symbols/SimpleLineSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./LineSymbol"],function(A,h,b,d){var g={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",
STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},p={color:[0,0,0,1],style:g.STYLE_SOLID,width:.75,cap:g.CAP_BUTT,join:g.JOIN_MITER,miterLimit:7.5},n=A(d,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:g.STYLE_SOLID,json:{read:function(e,k){return h.valueOf(this._jsonStyles,e)||void 0},write:function(e,k){k.style=this._jsonStyles[e]}}},
cap:{value:g.CAP_BUTT,json:{read:!1,write:!1}},join:{value:g.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:b.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash",
"long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return h.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,k,l,m,r,u){if(e&&"string"!==typeof e)return e;var v={};null!=e&&(v.style=e);null!=k&&(v.color=k);null!=l&&(v.width=b.toPt(l));null!=m&&(v.cap=m);null!=r&&(v.join=r);null!=u&&(v.miterLimit=b.toPt(u));return v},clone:function(){return new n({color:h.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});h.mixin(n,
g);n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(A,h,b){return A(b,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:h.toPt,json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(A,h,b,d){var g=h({esriSMS:"simple-marker",esriPMS:"picture-marker",
esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),p=0;return b.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+p++},properties:{type:{type:String,value:null,json:{read:g.fromJSON,write:{ignoreOrigin:!0,writer:function(n,e){e.type=g.toJSON(this.type)}}}},color:{type:d,value:new d([0,
0,0,1]),json:{read:function(n){return n&&A.isDefined(n[0])?[n[0],n[1],n[2],n[3]/255]:n},write:{allowNull:!0}}}}})})},"esri/layers/vectorTiles/core/kebabDictionary":function(){define(["require","exports"],function(A,h){return function(b,d){void 0===d&&(d={});var g=d.ignoreUnknown||!1,p={},n;for(n in b)p[b[n]]=n;var e=function(l){return p.hasOwnProperty(l)?p[l]:g?void 0:l},k=function(l){return b.hasOwnProperty(l)?b[l]:g?void 0:l};return{toJSON:e,fromJSON:k,read:function(l){return k(l)},write:function(l,
m,r){l=e(l);void 0!==l&&(m[r]=l)}}}})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(A,h,b){function d(n){return Math.max(0,Math.min(h.ensureInteger(n),255))}var g=A([b],{declaredClass:"esri.Color",toJSON:function(){return[d(this.r),d(this.g),d(this.b),1<this.a?this.a:d(255*this.a)]},clone:function(){return new g(this.toRgba())}});g.toJSON=function(n){return n&&[d(n.r),d(n.g),d(n.b),1<n.a?n.a:d(255*n.a)]};g.fromJSON=
function(n){return n&&new g([n[0],n[1],n[2],n[3]/255])};g.toUnitRGB=function(n){return[n.r/255,n.g/255,n.b/255]};g.toUnitRGBA=function(n){return[n.r/255,n.g/255,n.b/255,null!=n.a?n.a:1]};var p="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(A=0;A<p.length;A++)g[p[A]]=b[p[A]];g.named.rebeccapurple=[102,51,153];return g})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(A,h,b,d){var g={};h.setObject("dojo.colors",g);
var p=function(e,k,l){0>l&&++l;1<l&&--l;var m=6*l;return 1>m?e+(k-e)*m:1>2*l?k:2>3*l?e+(k-e)*(2/3-l)*6:e};A.colorFromRgb=b.fromRgb=function(e,k){var l=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(l){e=l[2].split(/\s*,\s*/);var m=e.length;l=l[1];if("rgb"==l&&3==m||"rgba"==l&&4==m)return l=e[0],"%"==l.charAt(l.length-1)?(l=d.map(e,function(v){return 2.56*parseFloat(v)}),4==m&&(l[3]=e[3]),b.fromArray(l,k)):b.fromArray(e,k);if("hsl"==l&&3==m||"hsla"==l&&4==m){l=(parseFloat(e[0])%360+
360)%360/360;var r=parseFloat(e[1])/100,u=parseFloat(e[2])/100;r=.5>=u?u*(r+1):u+r-u*r;u=2*u-r;l=[256*p(u,r,l+1/3),256*p(u,r,l),256*p(u,r,l-1/3),1];4==m&&(l[3]=e[3]);return b.fromArray(l,k)}}return null};var n=function(e,k,l){e=Number(e);return isNaN(e)?l:e<k?k:e>l?l:e};b.prototype.sanitize=function(){this.r=Math.round(n(this.r,0,255));this.g=Math.round(n(this.g,0,255));this.b=Math.round(n(this.b,0,255));this.a=n(this.a,0,1);return this};g.makeGrey=b.makeGrey=function(e,k){return b.fromArray([e,e,
e,k])};h.mixin(b.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,
169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,
34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,
250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,
104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,
192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,
222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.EXTRUDE_SCALE=64;h.PICTURE_FILL_COLOR=4294967295;h.TILE_SIZE=512;h.ANGLE_FACTOR_256=256/360;h.COLLISION_BUCKET_SIZE=128;h.COLLISION_MAX_ZOOM_DELTA=4;h.COLLISION_EARLY_REJECT_BUCKET_SIZE=32})},"esri/layers/vectorTiles/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),
function(A,h,b,d,g,p,n){function e(u){return p.isNumber(u.minDataValue)&&p.isNumber(u.maxDataValue)&&null!=u.minSize&&null!=u.maxSize?g.WGLVVFlag.SIZE_MINMAX_VALUE:(u.expression&&"view.scale"===u.expression||u.valueExpression&&"$view.scale"===u.valueExpression)&&Array.isArray(u.stops)?g.WGLVVFlag.SIZE_SCALE_STOPS:(null!=u.field||u.expression&&"view.scale"!==u.expression||u.valueExpression&&"$view.scale"!==u.valueExpression)&&Array.isArray(u.stops)?g.WGLVVFlag.SIZE_FIELD_STOPS:(null!=u.field||u.expression&&
"view.scale"!==u.expression||u.valueExpression&&"$view.scale"!==u.valueExpression)&&null!=u.valueUnit?g.WGLVVFlag.SIZE_UNIT_VALUE:g.WGLVVFlag.NONE}function k(u){return{value:u.value,size:b.toPt(u.size)}}function l(u){return u.map(function(v){return k(v)})}function m(u){return"string"===typeof u||"number"===typeof u?b.toPt(u):{type:"size",expression:u.expression,stops:l(u.stops)}}function r(u){var v={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(p.isString(u.field))if(u.stops){if(8<u.stops.length)return null;
u=u.stops;for(var w=0;8>w;++w){var B=u[Math.min(w,u.length-1)];v.values[w]=B.value;v.opacities[w]=B.opacity}}else if(u.opacityValues){if(!p.isDefined(u.minDataValue)||!p.isDefined(u.maxDataValue)||2!==u.opacityValues.length)return null;v.values[0]=u.minDataValue;v.opacities[0]=u.opacityValues[0];v.values[1]=u.maxDataValue;v.opacities[1]=u.opacityValues[1];for(w=2;8>w;++w)v.values[w]=u.maxDataValue,v.opacities[w]=u.opacityValues[1]}else return null;else if(u.stops&&0<=u.stops.length||u.opacityValues&&
0<=u.opacityValues.length)for(u=u.stops&&0<=u.stops.length?u.stops[0].opacity:u.opacityValues[0],w=0;8>w;w++)v.values[w]=Infinity,v.opacities[w]=u;else return null;return v}Object.defineProperty(h,"__esModule",{value:!0});h.getTypeOfSizeVisualVariable=e;h.getVisualVariableSizeValueRepresentationRatio=function(u,v){if(!u||!v)return u;switch(v){case "radius":case "distance":return 2*u;case "area":return Math.sqrt(u)}return u};h.stopToSizeStop=k;h.normalizeSizeStops=l;h.normalizeSizeElement=m;h.getVisualVariablesFields=
function(u){var v=u&&0<u.length?{}:null;v&&u.forEach(function(w){var B=w.type;w.field&&(v[B]=w.field)});return v};h.convertVisualVariables=function(u){var v=u&&0<u.length?{}:null,w=v?{}:null;if(!v)return{vvFields:v,vvRanges:w};for(var B=0;B<u.length;B++){var C=u[B],y=C.type;C.field&&(v[y]=C.field);if("size"===y){w.size||(w.size={});var a=C;switch(e(a)){case g.WGLVVFlag.SIZE_MINMAX_VALUE:w.size.minMaxValue={minDataValue:a.minDataValue,maxDataValue:a.maxDataValue,minSize:m(a.minSize),maxSize:m(a.maxSize)};
break;case g.WGLVVFlag.SIZE_SCALE_STOPS:w.size.scaleStops={stops:l(a.stops)};break;case g.WGLVVFlag.SIZE_FIELD_STOPS:C=[];y=[];a=l(a.stops);for(var c=a.length,f=0;6>f;f++){var q=a[Math.min(f,c-1)];C.push(q.value);y.push(b.pt2px(q.size))}w.size.fieldStops={values:C,sizes:y};break;case g.WGLVVFlag.SIZE_UNIT_VALUE:w.size.unitValue={unit:a.valueUnit,valueRepresentation:a.valueRepresentation}}}else if("color"===y)for(C=n.convertVisualVariables([C],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),
w.color=C.color,f=0;32>f;f+=4)d.premultiplyAlpha(w.color.colors,f,!0);else"opacity"===y?w.opacity=r(C):"rotation"===y&&(w.rotation={type:C.rotationType})}return{vvFields:v,vvRanges:w}}})},"esri/layers/vectorTiles/views/3d/layers/support/FastSymbolUpdates":function(){define(["require","exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(A,h,b,d,g){function p(f){return null!==f&&void 0!==f}function n(f){return"number"===typeof f}function e(f,q){f&&
f.push(q)}function k(f,q,t,x,z){var D=f.minSize,F=f.maxSize;if(f.expression)return e(z,"Could not convert size info: expression not supported"),!1;if(f.useSymbolValue)return f=x.symbolSize[t],q.minSize[t]=f,q.maxSize[t]=f,q.offset[t]=q.minSize[t],q.factor[t]=0,q.type[t]=1,!0;if(p(f.field)){if(p(f.stops)){if(2===f.stops.length&&n(f.stops[0].size)&&n(f.stops[1].size))return l(f.stops[0].size,f.stops[1].size,f.stops[0].value,f.stops[1].value,q,t),q.type[t]=1,!0;e(z,"Could not convert size info: stops only supported with 2 elements");
return!1}if(n(D)&&n(F)&&p(f.minDataValue)&&p(f.maxDataValue))return l(D,F,f.minDataValue,f.maxDataValue,q,t),q.type[t]=1,!0;if(null!=b.meterIn[f.valueUnit])return q.minSize[t]=-Infinity,q.maxSize[t]=Infinity,q.offset[t]=0,q.factor[t]=1/b.meterIn[f.valueUnit],q.type[t]=1,!0;"unknown"===f.valueUnit?e(z,"Could not convert size info: proportional size not supported"):e(z,"Could not convert size info: scale-dependent size not supported");return!1}if(!p(f.field)){if(f.stops&&f.stops[0]&&n(f.stops[0].size))return q.minSize[t]=
f.stops[0].size,q.maxSize[t]=f.stops[0].size,q.offset[t]=q.minSize[t],q.factor[t]=0,q.type[t]=1,!0;if(n(D))return q.minSize[t]=D,q.maxSize[t]=D,q.offset[t]=D,q.factor[t]=0,q.type[t]=1,!0}e(z,"Could not convert size info: unsupported variant of sizeInfo");return!1}function l(f,q,t,x,z,D){x=0<Math.abs(x-t)?(q-f)/(x-t):0;z.minSize[D]=0<x?f:q;z.maxSize[D]=0<x?q:f;z.offset[D]=f-t*x;z.factor[D]=x}function m(f,q,t,x){if(f.normalizationField||f.valueRepresentation)return e(x,"Could not convert size info: unsupported property"),
null;var z=f.field;if(null!=z&&"string"!==typeof z)return e(x,"Could not convert size info: field is not a string"),null;if(!q.size)q.size={field:f.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(f.field)if(!q.size.field)q.size.field=f.field;else if(f.field!==q.size.field)return e(x,"Could not convert size info: multiple fields in use"),null;switch(f.axis){case "width":return(z=k(f,q.size,0,t,x))?q:null;case "height":return(z=k(f,q.size,2,t,x))?q:null;case "depth":return(z=
k(f,q.size,1,t,x))?q:null;case "width-and-depth":return(z=k(f,q.size,0,t,x))&&k(f,q.size,1,t,x),z?q:null;case null:case void 0:case "all":return(z=(z=(z=k(f,q.size,0,t,x))&&k(f,q.size,1,t,x))&&k(f,q.size,2,t,x))?q:null;default:return e(x,'Could not convert size info: unknown axis "'+f.axis+'""'),null}}function r(f,q,t){for(var x=0;3>x;++x){var z=q.unitInMeters;1===f.type[x]&&(z*=q.modelSize[x],f.type[x]=2);f.minSize[x]/=z;f.maxSize[x]/=z;f.offset[x]/=z;f.factor[x]/=z}if(0!==f.type[0])q=0;else if(0!==
f.type[1])q=1;else if(0!==f.type[2])q=2;else return e(t,"No size axis contains a valid size or scale"),!1;for(x=0;3>x;++x)0===f.type[x]&&(f.minSize[x]=f.minSize[q],f.maxSize[x]=f.maxSize[q],f.offset[x]=f.offset[q],f.factor[x]=f.factor[q],f.type[x]=f.type[q]);return!0}function u(f,q,t){f[4*q]=t.r/255;f[4*q+1]=t.g/255;f[4*q+2]=t.b/255;f[4*q+3]=t.a}function v(f,q,t){if(f.normalizationField)return e(t,"Could not convert color info: unsupported property"),null;if("string"===typeof f.field)if(f.stops){if(8<
f.stops.length)return e(t,"Could not convert color info: too many color stops"),null;q.color={field:f.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};f=f.stops;for(t=0;8>t;++t){var x=f[Math.min(t,f.length-1)];q.color.values[t]=x.value;u(q.color.colors,t,x.color)}}else if(f.colors){if(!p(f.minDataValue)||!p(f.maxDataValue))return e(t,"Could not convert color info: missing data values"),null;if(2!==f.colors.length)return e(t,"Could not convert color info: invalid colors array"),
null;q.color={field:f.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};q.color.values[0]=f.minDataValue;u(q.color.colors,0,f.colors[0]);q.color.values[1]=f.maxDataValue;u(q.color.colors,1,f.colors[1]);for(t=2;8>t;++t)q.color.values[t]=f.maxDataValue,u(q.color.colors,t,f.colors[1])}else return e(t,"Could not convert color info: missing stops or colors"),null;else if(f.stops&&0<=f.stops.length||f.colors&&0<=f.colors.length)for(f=f.stops&&0<=f.stops.length?
f.stops[0].color:f.colors[0],q.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},t=0;8>t;t++)q.color.values[t]=Infinity,u(q.color.colors,t,f);else return e(t,"Could not convert color info: no field and no colors/stops"),null;return q}function w(f,q,t,x){f=2===t&&"arithmetic"===f.rotationType;q.offset[t]=f?90:0;q.factor[t]=f?-1:1;q.type[t]=1}function B(f,q,t){if("string"!==typeof f.field)return e(t,"Could not convert rotation info: field is not a string"),
null;if(!q.rotation)q.rotation={field:f.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(f.field)if(!q.rotation.field)q.rotation.field=f.field;else if(f.field!==q.rotation.field)return e(t,"Could not convert rotation info: multiple fields in use"),null;switch(f.axis){case "tilt":return w(f,q.rotation,0,t),q;case "roll":return w(f,q.rotation,1,t),q;case null:case void 0:case "heading":return w(f,q.rotation,2,t),q;default:return e(t,'Could not convert rotation info: unknown axis "'+f.axis+
'""'),null}}function C(f,q,t){if(!f)return null;var x=!q.supportedTypes||!!q.supportedTypes.size,z=!q.supportedTypes||!!q.supportedTypes.color,D=!q.supportedTypes||!!q.supportedTypes.rotation;return(f=f.reduce(function(F,G){if(!F)return F;if(G.valueExpression)return e(t,"Could not convert visual variables: arcade expressions not supported"),null;switch(G.type){case "size":return x?m(G,F,q,t):F;case "color":return z?v(G,F,t):F;case "rotation":return D?B(G,F,t):F;default:return e(t,"Could not convert visual variables: unsupported type "+
G.type),null}},{size:null,color:null,rotation:null}))&&f.size&&!r(f.size,q,t)?null:f}function y(f,q,t){if(!!f!==!!q||f&&f.field!==q.field)return!1;if(f&&"rotation"===t)for(t=0;3>t;t++)if(f.type[t]!==q.type[t]||f.offset[t]!==q.offset[t]||f.factor[t]!==q.factor[t])return!1;return!0}function a(f,q){var t={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},
x=f&&null!=f.size;f&&f.size?(t.vvSizeEnabled=!0,t.vvSizeMinSize=f.size.minSize,t.vvSizeMaxSize=f.size.maxSize,t.vvSizeOffset=f.size.offset,t.vvSizeFactor=f.size.factor):f&&x&&(t.vvSizeValue=q.transformation.scale);f&&x&&(t.vvSymbolAnchor=q.transformation.anchor,t.vvSymbolRotation=q.transformation.rotation);f&&f.color&&(t.vvColorEnabled=!0,t.vvColorValues=f.color.values,t.vvColorColors=f.color.colors);return t}Object.defineProperty(h,"__esModule",{value:!0});h.convertVisualVariables=C;h.initFastSymbolUpdatesState=
function(f,q,t){return q&&f&&!f.disableFastUpdates?(f=C(f.visualVariables,t))?{enabled:!0,visualVariables:f,materialParameters:a(f,t),customTransformation:f&&null!=f.size}:{enabled:!1}:{enabled:!1}};h.updateFastSymbolUpdatesState=function(f,q,t){if(!q||!f.enabled)return!1;var x=f.visualVariables;q=C(q.visualVariables,t);if(!(q&&y(x.size,q.size,"size")&&y(x.color,q.color,"color")&&y(x.rotation,q.rotation,"rotation")))return!1;f.visualVariables=q;f.materialParameters=a(q,t);f.customTransformation=q&&
null!=q.size;return!0};h.getMaterialParams=a;var c;(function(f){var q=g.mat4d,t=g.vec3,x=q.create(),z=t.create();f.evaluateModelTransform=function(D,F,G){if(!D.vvSizeEnabled)return G;q.set(G,x);d.computeObjectRotation(D.vvSymbolRotation[2],D.vvSymbolRotation[0],D.vvSymbolRotation[1],x);if(D.vvSizeEnabled){for(G=0;3>G;++G){var E=D.vvSizeOffset[G]+F[0]*D.vvSizeFactor[G],H=G;var O=D.vvSizeMinSize[G],K=D.vvSizeMaxSize[G];E=E<O?O:E>K?K:E;z[H]=E}q.scale(x,z,x)}else q.scale(x,D.vvSizeValue,x);q.translate(x,
D.vvSymbolAnchor,x);return x}})(c||(c={}));h.evaluateModelTransform=c.evaluateModelTransform})},"esri/layers/vectorTiles/renderers/support/utils":function(){define(["dojo/date/locale","../../Color","../../core/lang","../../core/numberUtils","dojo/i18n!dojo/cldr/nls/gregorian"],function(A,h,b,d,g){function p(v){return v&&v.map(function(w){return new h(w)})}function n(v,w,B){var C="";0===w?C=k.lt+" ":w===B&&(C=k.gt+" ");return C+v}var e={},k={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",
ld:"\u2013"},l={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},m={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},
year:{selector:"date",dateOptions:{selector:"year"}}},r={formatLength:"short",fullYear:!0},u={formatLength:"short"};b.mixin(e,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(v,w){var B=[];null==v||v instanceof Date||(v=new Date(v));
w=w||{};w=b.mixin({},w);var C=w.selector?w.selector.toLowerCase():null,y=!C||-1<C.indexOf("time");C=!C||-1<C.indexOf("date");y&&(w.timeOptions=w.timeOptions||u,w.timeOptions&&(w.timeOptions=b.mixin({},w.timeOptions),w.timeOptions.selector=w.timeOptions.selector||"time",B.push(w.timeOptions)));C&&(w.dateOptions=w.dateOptions||r,w.dateOptions&&(w.dateOptions=b.mixin({},w.dateOptions),w.dateOptions.selector=w.dateOptions.selector||"date",B.push(w.dateOptions)));B&&B.length?(B=B.map(function(a){return A.format(v,
a)}),w=1==B.length?B[0]:g["dateTimeFormat-medium"].replace(/'/g,"").replace(/\{(\d+)\}/g,function(a,c){return B[c]})):w=A.format(v);return w},createColorStops:function(v){var w=v.values,B=v.colors,C=v.labelIndexes,y=v.isDate,a=v.dateFormatOptions;v=[];return v=w.map(function(c,f){var q=null;if(!C||-1<C.indexOf(f)){var t;(t=y?e.formatDate(c,a):d.format(c))&&(q=n(t,f,w.length-1))}return{value:c,color:B[f],label:q}})},updateColorStops:function(v){var w=v.stops,B=v.changes,C=v.isDate,y=v.dateFormatOptions,
a=[],c=w.map(function(q){return q.value});B.forEach(function(q){a.push(q.index);c[q.index]=q.value});var f=d.round(c,{indexes:a});w.forEach(function(q,t){q.value=c[t];if(null!=q.label){var x,z=null;(x=C?e.formatDate(f[t],y):d.format(f[t]))&&(z=n(x,t,w.length-1));q.label=z}})},createClassBreakLabel:function(v){var w=v.minValue,B=v.maxValue,C=v.isFirstBreak?"":k.gt+" ";v="percent-of-total"===v.normalizationType?k.pct:"";w=null==w?"":d.format(w);B=null==B?"":d.format(B);return C+w+v+" "+k.ld+" "+B+v},
setLabelsForClassBreaks:function(v){var w=v.classBreakInfos,B=v.classificationMethod,C=v.normalizationType,y=[];w&&w.length&&("standard-deviation"===B?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):v.round?(y.push(w[0].minValue),w.forEach(function(a){y.push(a.maxValue)}),y=d.round(y),w.forEach(function(a,c){a.label=e.createClassBreakLabel({minValue:0===c?y[0]:y[c],maxValue:y[c+1],isFirstBreak:0===c,normalizationType:C})})):w.forEach(function(a,
c){a.label=e.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===c,normalizationType:C})}))},updateClassBreak:function(v){var w=v.classBreaks,B=v.normalizationType,C=v.change,y=C.index;C=C.value;var a=-1,c=-1,f=w.length;"standard-deviation"===v.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===y?a=y:y===f?c=y-1:(c=y-1,a=y),-1<a&&a<f&&(v=w[a],v.minValue=C,v.label=e.createClassBreakLabel({minValue:v.minValue,
maxValue:v.maxValue,isFirstBreak:0===a,normalizationType:B})),-1<c&&c<f&&(v=w[c],v.maxValue=C,v.label=e.createClassBreakLabel({minValue:v.minValue,maxValue:v.maxValue,isFirstBreak:0===c,normalizationType:B})))},calculateDateFormatInterval:function(v){var w,B,C=v.length,y=Infinity;v=v.map(function(D){return new Date(D)});for(w=0;w<C-1;w++){var a=v[w];var c=[];var f=Infinity;var q="";for(B=w+1;B<C;B++){var t=v[B];t=a.getFullYear()!==t.getFullYear()&&"year"||a.getMonth()!==t.getMonth()&&"month"||a.getDate()!==
t.getDate()&&"day"||a.getHours()!==t.getHours()&&"hour"||a.getMinutes()!==t.getMinutes()&&"minute"||a.getSeconds()!==t.getSeconds()&&"second"||"millisecond";var x=l[t];x<f&&(f=x,q=t);c.push(t)}if(f<y){y=f;var z=q}}return z},createUniqueValueLabel:function(v){var w=v.value,B=v.fieldInfo,C=v.domain;v=v.dateFormatInterval;var y=String(w);(C=C&&C.codedValues?C.getName(w):null)?y=C:"number"===typeof w&&(y=B&&"date"===B.type?e.formatDate(w,v&&m[v]):d.format(w));return y},cloneColorVariable:function(v){if(v){var w=
b.mixin({},v);w.colors=p(w.colors);w.stops=w.stops&&w.stops.map(function(B){B=b.mixin({},B);B.color&&(B.color=new h(B.color));return B});w.legendOptions&&(w.legendOptions=b.mixin({},w.legendOptions))}return w},cloneOpacityVariable:function(v){if(v){var w=b.mixin({},v);if(v=w.opacityValues)w.opacityValues=v.slice(0);if(v=w.stops)w.stops=v.map(function(B){return b.mixin({},B)});if(v=w.legendOptions)w.legendOptions=b.mixin({},v)}return w},cloneSizeVariable:function(v){if(v){var w=b.mixin({},v);w.stops&&
(w.stops=w.stops.map(function(B){return b.mixin({},B)}));(v=w.minSize)&&"object"===typeof v&&(w.minSize=e.cloneSizeVariable(v));(v=w.maxSize)&&"object"===typeof v&&(w.maxSize=e.cloneSizeVariable(v));if(v=w.legendOptions)if(w.legendOptions=b.mixin({},v),v=v.customValues)w.legendOptions.customValues=v.slice(0)}return w}});return e})},"esri/layers/vectorTiles/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(A,h){function b(e,k){return e-k}var d=/^-?(\d+)(\.(\d+))?$/i,
g=new RegExp("\\"+h.decimal+"0+$","g"),p=/(\d)0*$/g,n={numDigits:function(e){var k=String(e),l=k.match(d);e={integer:0,fractional:0};l&&l[1]?(e.integer=l[1].split("").length,e.fractional=l[3]?l[3].split("").length:0):-1<k.toLowerCase().indexOf("e")&&(l=k.split("e"),k=l[0],l=l[1],k&&l&&(k=Number(k),l=Number(l),(e=0<l)||(l=Math.abs(l)),k=n.numDigits(k),e?(k.integer+=l,k.fractional=l>k.fractional?0:k.fractional-l):(k.fractional+=l,k.integer=l>k.integer?1:k.integer-l),e=k));return e},percentChange:function(e,
k,l,m){var r={previous:null,next:null};if(null!=l){var u=e-l;r.previous=Math.floor(Math.abs(100*(k-l-u)/u))}null!=m&&(u=m-e,r.next=Math.floor(Math.abs(100*(m-k-u)/u)));return r},round:function(e,k){e=e.slice(0);var l,m,r=k&&null!=k.tolerance?k.tolerance:2,u=k&&k.indexes,v=k&&null!=k.strictBounds?k.strictBounds:!1;if(u)u.sort(b);else for(u=[],l=0;l<e.length;l++)u.push(l);for(l=0;l<u.length;l++){var w=u[l];k=e[w];var B=0===w?null:e[w-1];var C=w===e.length-1?null:e[w+1];var y=n.numDigits(k);if(y=y.fractional){var a=
0;for(m=!1;a<=y&&!m;){var c=void 0;var f=void 0;c=k;m=a;f=Number(c.toFixed(m));f<c?c=f+1/Math.pow(10,m):(c=f,f-=1/Math.pow(10,m));f=Number(f.toFixed(m));c=Number(c.toFixed(m));f=[f,c];f=v&&0===l?f[1]:f[0];c=m=m=void 0;var q=r,t=n.percentChange(k,f,B,C);c=null==t.previous||t.previous<=q;m=null==t.next||t.next<=q;m=c&&m||t.previous+t.next<=2*q;a++}m&&(e[w]=f)}}return e},format:function(e,k){k=k||{places:20,round:-1};(e=A.format(e,k))&&(e=e.replace(p,"$1").replace(g,""));return e}};return n})},"esri/layers/vectorTiles/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/glMatrix ../../support/mathUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m){function r(B){var C=B.paths[0];if(!C||0===C.length)return null;C=n.getPointOnPath(C,n.getPathLength(C)/2);return k.makeDehydratedPoint(C[0],C[1],C[2],B.spatialReference)}function u(B){if(Array.isArray(B)){for(var C=0;C<B.length;C++)if(!u(B[C]))return!1;return!0}return null==B||0<=B}Object.defineProperty(h,"__esModule",{value:!0});var v=[1,1,1];h.computeCentroid=function(B){if("point"===B.type)return B;if(k.isHydratedGeometry(B))switch(B.type){case "extent":return B.center;
case "polygon":return B.centroid;case "polyline":return r(B);case "mesh":return B.extent.center}else switch(B.type){case "extent":var C=m.isFinite(B.zmin);return k.makeDehydratedPoint(.5*(B.xmax+B.xmin),.5*(B.ymax+B.ymin),C?.5*(B.zmax+B.zmin):void 0,B.spatialReference);case "polygon":return C=p.ringsCentroid(B.rings,k.hasZ(B)),k.makeDehydratedPoint(C[0],C[1],C[2],B.spatialReference);case "polyline":return r(B)}};h.convertPointSR=function(B,C){var y=B.spatialReference;y.isWebMercator&&C.isWGS84?(e.xyToLngLat(B.x,
B.y,w),B.x=w[0],B.y=w[1],B.spatialReference=b.SpatialReference.WGS84):C.isWebMercator&&y.isWGS84&&(e.lngLatToXY(B.x,B.y,w),B.x=w[0],B.y=w[1],B.spatialReference=b.SpatialReference.WebMercator)};h.enlargeExtent=function(B,C,y){if(B){C||(C=g.create());var a=.5*B.width*(y-1);y=.5*B.height*(y-1);B.width<1E-7*B.height?a+=y/20:B.height<1E-7*B.width&&(y+=a/20);l.vec4d.set4(B.xmin-a,B.ymin-y,B.xmax+a,B.ymax+y,C);return C}return null};h.updateVertexAttributeAuxpos1w=function(B,C){for(var y=0;y<B.geometries.length;++y){var a=
B.geometries[y].data.vertexAttributes.auxpos1;a&&a.data[3]!==C&&(a.data[3]=C,B.geometryVertexAttrsUpdated(y))}};h.mixinColorAndOpacity=function(B,C){var y=[1,1,1,1];null!=B&&(y[0]=B[0],y[1]=B[1],y[2]=B[2]);null!==C&&void 0!==C?y[3]=C:null!=B&&3<B.length&&(y[3]=B[3]);return y};h.overrideColor=function(B,C,y,a,c,f){void 0===f&&(f=[0,0,0,0]);for(var q=0;3>q;++q)f[q]=B&&null!=B[q]?B[q]:y&&null!=y[q]?y[q]:c[q];f[3]=null!=C?C:null!=a?a:c[3];return f};h.computeObjectScale=function(B,C,y,a){void 0===B&&(B=
v);void 0===a&&(a=1);var c=Array(3);if(null==C||null==y)c[0]=1,c[1]=1,c[2]=1;else{for(var f=void 0,q=0,t=2;0<=t;t--){var x=B[t],z=void 0,D=null!=x,F=0===t&&!f&&!D,G=y[t];"symbolValue"===x||F?z=0!==G?C[t]/G:1:D&&"proportional"!==x&&isFinite(x)&&(z=0!==G?x/G:1);null!=z&&(f=c[t]=z,q=Math.max(q,Math.abs(z)))}for(t=2;0<=t;t--)null==c[t]?c[t]=f:0===c[t]&&(c[t]=.001*q)}for(t=2;0<=t;t--)c[t]/=a;return c};h.computeSizeWithResourceSize=function(B,C){var y=C.width,a=C.depth,c=C.height;C=C.isPrimitive?10:1;if(null==
y&&null==c&&null==a)return[C*B[0],C*B[1],C*B[2]];y=[y,a,c];for(a=0;3>a;a++)if(c=y[a],null!=c){var f=c/B[a];break}for(a=0;3>a;a++)null==y[a]&&(y[a]=B[a]*f);return y};h.validateSymbolLayerSize=function(B){null!=B.isPrimitive&&(B=[B.width,B.depth,B.height]);return u(B)?null:"Symbol sizes may not be negative values"};h.computeObjectRotation=function(B,C,y,a){void 0===a&&(a=l.mat4d.identity());B=B||0;C=C||0;y=y||0;0!==B&&l.mat4d.rotateZ(a,-B/180*Math.PI,a);0!==C&&l.mat4d.rotateX(a,C/180*Math.PI,a);0!==
y&&l.mat4d.rotateY(a,y/180*Math.PI,a);return a};h.demResolutionForBoundingBox=function(B,C){return null!=C.minDemResolution?C.minDemResolution:d.isPoint(B)?C.minDemResolutionForPoints:.01*d.maximumDimension(B)};var w=[0,0]})},"esri/layers/vectorTiles/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r){Object.defineProperty(h,"__esModule",{value:!0});h.Extent=b;h.BaseGeometry=d;h.Mesh=g;h.Multipoint=p;h.Point=n;h.Polygon=e;h.Polyline=k;h.ScreenPoint=l;h.SpatialReference=m;h.isGeometry=function(u){return u instanceof h.BaseGeometry};h.fromJSON=r.fromJSON})},"esri/layers/vectorTiles/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u){function v(w,B,C){return null==B?C:null==C?B:w(B,C)}A=function(w){function B(){for(var y=0;y<arguments.length;y++);y=w.call(this)||this;y.type="extent";y.xmin=0;y.ymin=0;y.mmin=void 0;y.zmin=void 0;y.xmax=0;y.ymax=0;y.mmax=void 0;y.zmax=void 0;return y}b(B,w);var C=B;B.prototype.normalizeCtorArgs=function(y,a,c,f,q){return!y||"esri.geometry.SpatialReference"!==y.declaredClass&&null==y.wkid?"object"===typeof y?(y.spatialReference=null!=y.spatialReference?y.spatialReference:
k.WGS84,y):{xmin:y,ymin:a,xmax:c,ymax:f,spatialReference:null!=q?q:k.WGS84}:{spatialReference:y,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(B.prototype,"center",{get:function(){var y=new e({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(y.z=.5*(this.zmin+this.zmax));this.hasM&&(y.m=.5*(this.mmin+this.mmax));return y},enumerable:!0,configurable:!0});Object.defineProperty(B.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(B.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(B.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(B.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(B.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});B.prototype.centerAt=function(y){var a=this.center;return null!=y.z&&this.hasZ?this.offset(y.x-a.x,y.y-a.y,y.z-a.z):this.offset(y.x-a.x,y.y-a.y)};B.prototype.clone=function(){var y=new C;y.xmin=this.xmin;y.ymin=this.ymin;y.xmax=this.xmax;y.ymax=this.ymax;y.spatialReference=this.spatialReference;null!=this.zmin&&(y.zmin=this.zmin,y.zmax=this.zmax);null!=this.mmin&&(y.mmin=this.mmin,y.mmax=this.mmax);return y};B.prototype.contains=function(y){if(!y)return!1;var a=this.spatialReference,
c=y.spatialReference;a&&c&&!a.equals(c)&&u.canProject(a,c)&&(y=a.isWebMercator?u.geographicToWebMercator(y):u.webMercatorToGeographic(y,!0));return"point"===y.type?l.extentContainsPoint(this,y):"extent"===y.type?l.extentContainsExtent(this,y):!1};B.prototype.equals=function(y){if(!y)return!1;var a=this.spatialReference,c=y.spatialReference;a&&c&&!a.equals(c)&&u.canProject(a,c)&&(y=a.isWebMercator?u.geographicToWebMercator(y):u.webMercatorToGeographic(y,!0));return this.xmin===y.xmin&&this.ymin===
y.ymin&&this.zmin===y.zmin&&this.mmin===y.mmin&&this.xmax===y.xmax&&this.ymax===y.ymax&&this.zmax===y.zmax&&this.mmax===y.mmax};B.prototype.expand=function(y){y=.5*(1-y);var a=this.width*y,c=this.height*y;this.xmin+=a;this.ymin+=c;this.xmax-=a;this.ymax-=c;this.hasZ&&(a=(this.zmax-this.zmin)*y,this.zmin+=a,this.zmax-=a);this.hasM&&(y*=this.mmax-this.mmin,this.mmin+=y,this.mmax-=y);return this};B.prototype.intersects=function(y){if(!y)return!1;var a=this.spatialReference,c=y.spatialReference;a&&c&&
!a.equals(c)&&u.canProject(a,c)&&(y=a.isWebMercator?u.geographicToWebMercator(y):u.webMercatorToGeographic(y,!0));a=m.getExtentIntersector(y.type);return"mesh"!==y.type?a(this,y):a(this,y.extent)};B.prototype.normalize=function(){var y=this._normalize(!1,!0);return Array.isArray(y)?y:[y]};B.prototype.offset=function(y,a,c){this.xmin+=y;this.ymin+=a;this.xmax+=y;this.ymax+=a;null!=c&&(this.zmin+=c,this.zmax+=c);return this};B.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};B.prototype.union=
function(y){this.xmin=Math.min(this.xmin,y.xmin);this.ymin=Math.min(this.ymin,y.ymin);this.xmax=Math.max(this.xmax,y.xmax);this.ymax=Math.max(this.ymax,y.ymax);if(this.hasZ||y.hasZ)this.zmin=v(Math.min,this.zmin,y.zmin),this.zmax=v(Math.max,this.zmax,y.zmax);if(this.hasM||y.hasM)this.mmin=v(Math.min,this.mmin,y.mmin),this.mmax=v(Math.max,this.mmax,y.mmax);return this};B.prototype.intersection=function(y){if(!this.intersects(y))return null;this.xmin=Math.max(this.xmin,y.xmin);this.ymin=Math.max(this.ymin,
y.ymin);this.xmax=Math.min(this.xmax,y.xmax);this.ymax=Math.min(this.ymax,y.ymax);if(this.hasZ||y.hasZ)this.zmin=v(Math.max,this.zmin,y.zmin),this.zmax=v(Math.min,this.zmax,y.zmax);if(this.hasM||y.hasM)this.mmin=v(Math.max,this.mmin,y.mmin),this.mmax=v(Math.min,this.mmax,y.mmax);return this};B.prototype.toJSON=function(y){return this.write(null,y)};B.prototype._shiftCM=function(y){void 0===y&&(y=r.getInfo(this.spatialReference));if(!y||!this.spatialReference)return this;var a=this.spatialReference,
c=this._getCM(y);if(c){var f=a.isWebMercator?u.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;a.isWebMercator||(f.x=this._normalizeX(f.x,y).x);this.spatialReference=new k(g.substitute({Central_Meridian:f.x},a.isWGS84?y.altTemplate:y.wkTemplate))}return this};B.prototype._getCM=function(y){var a=null,c=y.valid;y=c[0];c=c[1];var f=this.xmin,q=this.xmax;f>=y&&f<=c&&q>=y&&q<=c||(a=this.center);return a};B.prototype._normalize=function(y,a,c){var f=this.spatialReference;if(!f)return this;c=
c||r.getInfo(f);if(!c)return this;var q=this._getParts(c).map(function(z){return z.extent});if(2>q.length)return q[0]||this;if(2<q.length)return y?this._shiftCM(c):this.set({xmin:c.valid[0],xmax:c.valid[1]});if(y)return this._shiftCM(c);if(a)return q;var t=!0,x=!0;q.forEach(function(z){z.hasZ||(t=!1);z.hasM||(x=!1)});return{rings:q.map(function(z){var D=[[z.xmin,z.ymin],[z.xmin,z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]];if(t)for(var F=(z.zmax-z.zmin)/2,G=0;G<D.length;G++)D[G].push(F);
if(x)for(z=(z.mmax-z.mmin)/2,G=0;G<D.length;G++)D[G].push(z);return D}),hasZ:t,hasM:x,spatialReference:f}};B.prototype._getParts=function(y){var a=this.cache._parts;if(!a){a=[];var c=this.ymin,f=this.ymax,q=this.spatialReference,t=this.width,x=this.xmin,z=this.xmax,D=void 0;y=y||r.getInfo(q);var F=y.valid,G=F[0],E=F[1];D=this._normalizeX(this.xmin,y);var H=D.x;F=D.frameId;D=this._normalizeX(this.xmax,y);var O=D.x;y=D.frameId;D=H===O&&0<t;if(t>2*E){t=new C(x<z?H:O,c,E,f,q);x=new C(G,c,x<z?O:H,f,q);
z=new C(0,c,E,f,q);c=new C(G,c,0,f,q);f=[];q=[];t.contains(z)&&f.push(F);t.contains(c)&&q.push(F);x.contains(z)&&f.push(y);x.contains(c)&&q.push(y);for(G=F+1;G<y;G++)f.push(G),q.push(G);a.push({extent:t,frameIds:[F]},{extent:x,frameIds:[y]},{extent:z,frameIds:f},{extent:c,frameIds:q})}else H>O||D?a.push({extent:new C(H,c,E,f,q),frameIds:[F]},{extent:new C(G,c,O,f,q),frameIds:[y]}):a.push({extent:new C(H,c,O,f,q),frameIds:[F]});this.cache._parts=a}y=this.hasZ;c=this.hasM;if(y||c)for(F={},y&&(F.zmin=
this.zmin,F.zmax=this.zmax),c&&(F.mmin=this.mmin,F.mmax=this.mmax),y=0;y<a.length;y++)a[y].extent.set(F);return a};B.prototype._normalizeX=function(y,a){var c=a.valid;a=c[0];var f=c[1];c=2*f;var q=0;y>f?(a=Math.ceil(Math.abs(y-f)/c),y-=a*c,q=a):y<a&&(a=Math.ceil(Math.abs(y-a)/c),y+=a*c,q=-a);return{x:y,frameId:q}};d([p.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],B.prototype,"cache",void 0);d([p.property({readOnly:!0,dependsOn:["cache"]})],B.prototype,
"center",null);d([p.property({readOnly:!0,dependsOn:["cache"]})],B.prototype,"extent",null);d([p.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],B.prototype,"hasM",null);d([p.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],B.prototype,"hasZ",null);d([p.property({readOnly:!0,dependsOn:["ymin","ymax"]})],B.prototype,"height",null);d([p.property({readOnly:!0,dependsOn:["xmin","xmax"]})],B.prototype,"width",
null);d([p.property({type:Number,json:{write:!0}})],B.prototype,"xmin",void 0);d([p.property({type:Number,json:{write:!0}})],B.prototype,"ymin",void 0);d([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],B.prototype,"mmin",void 0);d([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],B.prototype,"zmin",void 0);d([p.property({type:Number,json:{write:!0}})],
B.prototype,"xmax",void 0);d([p.property({type:Number,json:{write:!0}})],B.prototype,"ymax",void 0);d([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],B.prototype,"mmax",void 0);d([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],B.prototype,"zmax",void 0);return B=C=d([p.subclass("esri.geometry.Extent")],B)}(p.declared(n));A.prototype.toJSON.isDefaultToJSON=
!0;return A})},"esri/layers/vectorTiles/geometry/support/contains":function(){define(["require","exports"],function(A,h){function b(p,n,e,k){return n>=p.xmin&&n<=p.xmax&&e>=p.ymin&&e<=p.ymax?null!=k&&p.hasZ?k>=p.zmin&&k<=p.zmax:!0:!1}function d(p,n){if(p=p.rings)if(Array.isArray(p[0][0])){for(var e=!1,k=0,l=p.length;k<l;k++)e=g(e,p[k],n);n=e}else n=g(!1,p,n);else n=!1;return n}function g(p,n,e){var k=e[0];e=e[1];for(var l=0,m=0,r=n.length;m<r;m++){l++;l===r&&(l=0);var u=n[m],v=u[0];u=u[1];var w=n[l],
B=w[0];w=w[1];(u<e&&w>=e||w<e&&u>=e)&&v+(e-u)/(w-u)*(B-v)<k&&(p=!p)}return p}Object.defineProperty(h,"__esModule",{value:!0});h.extentContainsPoint=function(p,n){return b(p,n.x,n.y,n.z)};h.extentContainsExtent=function(p,n){var e=n.xmin,k=n.ymin,l=n.zmin,m=n.xmax,r=n.ymax,u=n.zmax;return p.hasZ&&n.hasZ?b(p,e,k,l)&&b(p,e,r,l)&&b(p,m,r,l)&&b(p,m,k,l)&&b(p,e,k,u)&&b(p,e,r,u)&&b(p,m,r,u)&&b(p,m,k,u):b(p,e,k)&&b(p,e,r)&&b(p,m,r)&&b(p,m,k)};h.extentContainsCoords2D=function(p,n){return b(p,n[0],n[1])};
h.extentContainsCoords3D=function(p,n){return b(p,n[0],n[1],n[2])};h.polygonContainsPoint=function(p,n){return d(p,[n.x,n.y])};h.polygonContainsCoords=d})},"esri/layers/vectorTiles/geometry/support/intersects":function(){define(["require","exports","./contains"],function(A,h,b){function d(y,a){return b.extentContainsPoint(y,a)}function g(y,a){var c=y.hasZ&&a.hasZ;if(y.xmin<=a.xmin){var f=a.xmin;if(y.xmax<f)return!1}else if(f=y.xmin,a.xmax<f)return!1;if(y.ymin<=a.ymin){if(f=a.ymin,y.ymax<f)return!1}else if(f=
y.ymin,a.ymax<f)return!1;if(c&&a.hasZ)if(y.zmin<=a.zmin){if(c=a.zmin,y.zmax<c)return!1}else if(c=y.zmin,a.zmax<c)return!1;return!0}function p(y,a){var c=a.hasZ?b.extentContainsCoords3D:b.extentContainsCoords2D,f=0;for(a=a.points;f<a.length;f++)if(c(y,a[f]))return!0;return!1}function n(y,a){m[0]=y.xmin;m[1]=y.ymax;r[0]=y.xmax;r[1]=y.ymax;u[0]=y.xmin;u[1]=y.ymin;v[0]=y.xmax;v[1]=y.ymin;for(var c=0,f=w;c<f.length;c++)if(b.polygonContainsCoords(a,f[c]))return!0;c=0;for(a=a.rings;c<a.length;c++)if(f=a[c],
f.length){var q=f[0];if(b.extentContainsCoords2D(y,q))return!0;for(var t=1;t<f.length;t++){var x=f[t];if(b.extentContainsCoords2D(y,x)||k(q,x,B))return!0;q=x}}return!1}function e(y,a){m[0]=y.xmin;m[1]=y.ymax;r[0]=y.xmax;r[1]=y.ymax;u[0]=y.xmin;u[1]=y.ymin;v[0]=y.xmax;v[1]=y.ymin;a=a.paths;for(var c=0;c<a.length;c++){var f=a[c];if(a.length){var q=f[0];if(b.extentContainsCoords2D(y,q))return!0;for(var t=1;t<f.length;t++){var x=f[t];if(b.extentContainsCoords2D(y,x)||k(q,x,B))return!0;q=x}}}return!1}
function k(y,a,c){for(var f=0;f<c.length;f++)if(l(y,a,c[f][0],c[f][1]))return!0;return!1}function l(y,a,c,f,q){var t=y[0];y=y[1];var x=a[0];a=a[1];var z=c[0],D=c[1];c=f[0]-z;z=t-z;var F=x-t;f=f[1]-D;D=y-D;var G=a-y,E=f*F-c*G;if(0===E)return!1;c=(c*D-f*z)/E;z=(F*D-G*z)/E;return 0<=c&&1>=c&&0<=z&&1>=z?(q&&(q[0]=t+c*(x-t),q[1]=y+c*(a-y)),!0):!1}Object.defineProperty(h,"__esModule",{value:!0});h.extentIntersectsPoint=d;h.extentIntersectsExtent=g;h.extentIntersectsMultipoint=p;var m=[0,0],r=[0,0],u=[0,
0],v=[0,0],w=[m,r,u,v],B=[[u,m],[m,r],[r,v],[v,u]];h.extentIntersectsPolygon=n;h.extentIntersectsPolyline=e;var C=[0,0];h.isSelfIntersecting=function(y){for(var a=0;a<y.length;a++){for(var c=y[a],f=0;f<c.length-1;f++)for(var q=c[f],t=c[f+1],x=a+1;x<y.length;x++)for(var z=0;z<y[x].length-1;z++){var D=y[x][z],F=y[x][z+1],G=l(q,t,D,F,C);if(G&&!(C[0]===q[0]&&C[1]===q[1]||C[0]===D[0]&&C[1]===D[1]||C[0]===t[0]&&C[1]===t[1]||C[0]===F[0]&&C[1]===F[1]))return!0}z=c.length;if(!(4>=z))for(f=0;f<z-3;f++){var E=
z-1;0===f&&(E=z-2);q=c[f];t=c[f+1];for(x=f+2;x<E;x++)if(D=c[x],F=c[x+1],(G=l(q,t,D,F,C))&&!(C[0]===q[0]&&C[1]===q[1]||C[0]===D[0]&&C[1]===D[1]||C[0]===t[0]&&C[1]===t[1]||C[0]===F[0]&&C[1]===F[1]))return!0}}return!1};h.segmentIntersects=l;h.getExtentIntersector=function(y){switch(y){case "esriGeometryEnvelope":case "extent":return g;case "esriGeometryMultipoint":case "multipoint":return p;case "esriGeometryPoint":case "point":return d;case "esriGeometryPolygon":case "polygon":return n;case "esriGeometryPolyline":case "polyline":return e;
case "mesh":return g}}})},"esri/layers/vectorTiles/geometry/Mesh":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Geometry"],function(A,h,b,d){return function(g){function p(n){return g.call(this)||this}b(p,g);p.prototype.clone=function(){return new p};return p}(d)})},"esri/layers/vectorTiles/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l){function m(r){return function(u,v){return null==u?v:null==v?u:r(u,v)}}A=function(r){function u(){for(var w=0;w<arguments.length;w++);w=r.call(this)||this;w.points=[];w.type="multipoint";return w}b(u,r);var v=u;u.prototype.normalizeCtorArgs=function(w,B){if(!w&&!B)return null;var C={};Array.isArray(w)?(C.points=w,C.spatialReference=B):!w||"esri.geometry.SpatialReference"!==w.declaredClass&&null==w.wkid?(w.points&&(C.points=w.points),w.spatialReference&&(C.spatialReference=
w.spatialReference),w.hasZ&&(C.hasZ=w.hasZ),w.hasM&&(C.hasM=w.hasM)):C.spatialReference=w;if(w=C.points&&C.points[0])void 0===C.hasZ&&void 0===C.hasM?(C.hasZ=2<w.length,C.hasM=!1):void 0===C.hasZ?C.hasZ=3<w.length:void 0===C.hasM&&(C.hasM=3<w.length);return C};Object.defineProperty(u.prototype,"extent",{get:function(){var w=this.points;if(!w.length)return null;var B=new n,C=this.hasZ,y=this.hasM,a=C?3:2,c=w[0],f=m(Math.min),q=m(Math.max),t=c[0],x=c[1],z=c[0];c=c[1];for(var D,F,G,E,H=0,O=w.length;H<
O;H++){var K=w[H],L=K[0],T=K[1];t=f(t,L);x=f(x,T);z=q(z,L);c=q(c,T);C&&2<K.length&&(L=K[2],D=f(D,L),G=q(G,L));y&&K.length>a&&(K=K[a],F=f(F,K),E=q(E,K))}B.xmin=t;B.ymin=x;B.xmax=z;B.ymax=c;B.spatialReference=this.spatialReference;C?(B.zmin=D,B.zmax=G):(B.zmin=null,B.zmax=null);y?(B.mmin=F,B.mmax=E):(B.mmin=null,B.mmax=null);return B},enumerable:!0,configurable:!0});u.prototype.writePoints=function(w,B,C,y){B.points=g.clone(this.points)};u.prototype.addPoint=function(w){this.clearCache();l.updateSupportFromPoint(this,
w);Array.isArray(w)?this.points.push(w):this.points.push(w.toArray());return this};u.prototype.clone=function(){var w={points:g.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(w.hasZ=!0);this.hasM&&(w.hasM=!0);return new v(w)};u.prototype.getPoint=function(w){if(!this._validateInputs(w))return null;w=this.points[w];var B={x:w[0],y:w[1],spatialReference:this.spatialReference},C=2;this.hasZ&&(B.z=w[2],C=3);this.hasM&&(B.m=w[C]);return new k(B)};u.prototype.removePoint=function(w){if(!this._validateInputs(w))return null;
this.clearCache();return new k(this.points.splice(w,1)[0],this.spatialReference)};u.prototype.setPoint=function(w,B){if(!this._validateInputs(w))return this;this.clearCache();l.updateSupportFromPoint(B);this.points[w]=B.toArray();return this};u.prototype.toJSON=function(w){return this.write(null,w)};u.prototype._validateInputs=function(w){return null!=w&&0<=w&&w<this.points.length};d([p.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],u.prototype,"cache",void 0);d([p.property({dependsOn:["cache"]})],
u.prototype,"extent",null);d([p.property({type:[[Number]],json:{write:{isRequired:!0}}})],u.prototype,"points",void 0);d([p.writer("points")],u.prototype,"writePoints",null);return u=v=d([p.subclass("esri.geometry.Multipoint")],u)}(p.declared(e));A.prototype.toJSON.isDefaultToJSON=!0;return A})},"esri/layers/vectorTiles/geometry/support/zmUtils":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});h.updateSupportFromPoint=function(b,d,g){void 0===
g&&(g=!1);var p=b.hasM,n=b.hasZ;Array.isArray(d)?4!==d.length||p||n?3===d.length&&g&&!p?(n=!0,p=!1):3===d.length&&p&&n&&(n=p=!1):n=p=!0:(n=!n&&d.hasZ&&(!p||d.hasM),p=!p&&d.hasM&&(!n||d.hasZ));b.hasZ=n;b.hasM=p}})},"esri/layers/vectorTiles/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B){function C(c){return function(f,q){return null==f?q:null==q?f:c(f,q)}}var y=C(Math.min),a=C(Math.max);A=function(c){function f(){for(var t=0;t<arguments.length;t++);t=c.call(this)||this;t.rings=[];t.type="polygon";return t}b(f,c);var q=f;f.createEllipse=function(t){var x=t.center.x,z=t.center.y,D=t.center.z,F=t.center.m,G=t.center.hasZ,E=t.center.hasM,H=t.longAxis,O=t.shortAxis,K=t.numberOfPoints;t=t.view;for(var L=[],T=2*Math.PI/K,P=G?3:2,Q=0;Q<K;Q++){var J=
t.toMap(H*Math.cos(Q*T)+x,O*Math.sin(Q*T)+z);J=[J.x,J.y];G&&(J[2]=D);E&&(J[P]=F);L.push(J)}L.push(L[0]);return new q({rings:[L],spatialReference:t.spatialReference})};f.createCircle=function(t){return q.createEllipse({center:t.center,longAxis:t.r,shortAxis:t.r,numberOfPoints:t.numberOfPoints,view:t.view})};f.fromExtent=function(t){var x=t.clone().normalize();t=t.spatialReference;var z=!1,D=!1;x.map(function(F){F.hasZ&&(z=!0);F.hasM&&(D=!0)});x={rings:x.map(function(F){var G=[[F.xmin,F.ymin],[F.xmin,
F.ymax],[F.xmax,F.ymax],[F.xmax,F.ymin],[F.xmin,F.ymin]];if(z&&F.hasZ)for(var E=F.zmin+.5*(F.zmax-F.zmin),H=0;H<G.length;H++)G[H].push(E);if(D&&F.hasM)for(F=F.mmin+.5*(F.mmax-F.mmin),H=0;H<G.length;H++)G[H].push(F);return G}),spatialReference:t};z&&(x.hasZ=!0);D&&(x.hasM=!0);return new q(x)};f.prototype.normalizeCtorArgs=function(t,x){var z=null,D=null;if(t&&!Array.isArray(t)){z=t.rings?t.rings:null;x||(t.spatialReference?x=t.spatialReference:t.rings||(x=t));var F=t.hasZ;var G=t.hasM}else z=t;z=z||
[];x=x||l.WGS84;z.length&&z[0]&&null!=z[0][0]&&"number"===typeof z[0][0]&&(z=[z]);if(D=z[0]&&z[0][0])void 0===F&&void 0===G?(F=2<D.length,G=!1):void 0===F?F=!G&&3<D.length:void 0===G&&(G=!F&&3<D.length);return{rings:z,spatialReference:x,hasZ:F,hasM:G}};Object.defineProperty(f.prototype,"centroid",{get:function(){var t=m.polygonCentroid(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;var x=new k;x.x=t[0];x.y=t[1];x.spatialReference=this.spatialReference;this.hasZ&&(x.z=t[2]);
return x},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"extent",{get:function(){var t=this.hasZ,x=this.hasM,z=this.spatialReference,D=this.rings,F=t?3:2;if(!D.length||!D[0].length)return null;var G=D[0][0],E=G[0];G=G[1];var H=D[0][0],O=H[0];H=H[1];for(var K=void 0,L=void 0,T=void 0,P=void 0,Q=[],J=0;J<D.length;J++){var R=D[J],I=R[0],S=I[0];I=I[1];var U=R[0],V=U[0];U=U[1];for(var W=void 0,X=void 0,Y=void 0,da=void 0,aa=0;aa<R.length;aa++){var ba=R[aa],fa=ba[0],ka=ba[1];E=y(E,fa);
G=y(G,ka);O=a(O,fa);H=a(H,ka);S=y(S,fa);I=y(I,ka);V=a(V,fa);U=a(U,ka);t&&2<ba.length&&(fa=ba[2],K=y(K,fa),L=a(L,fa),W=y(W,fa),X=a(X,fa));x&&ba.length>F&&(da=ba[F],T=y(K,da),P=a(L,da),Y=y(W,da),da=a(X,da))}Q.push(new n({xmin:S,ymin:I,zmin:W,mmin:Y,xmax:V,ymax:U,zmax:X,mmax:da,spatialReference:z}))}D=new n;D.xmin=E;D.ymin=G;D.xmax=O;D.ymax=H;D.spatialReference=z;t&&(D.zmin=K,D.zmax=L);x&&(D.mmin=T,D.mmax=P);D.cache._partwise=1<Q.length?Q:null;return D},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"isSelfIntersecting",{get:function(){return v.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});f.prototype.writePaths=function(t,x,z,D){x.rings=g.clone(this.rings)};f.prototype.addRing=function(t){if(t){this.clearCache();var x=this.rings,z=x.length;if(Array.isArray(t[0]))x[z]=t.concat();else{for(var D=[],F=0,G=t.length;F<G;F++)D[F]=t[F].toArray();x[z]=D}return this}};f.prototype.clone=function(){var t=new q;t.spatialReference=this.spatialReference;t.rings=g.clone(this.rings);t.hasZ=
this.hasZ;t.hasM=this.hasM;return t};f.prototype.contains=function(t){if(!t)return!1;w.canProject(t,this.spatialReference)&&(t=w.project(t,this.spatialReference));return r.polygonContainsPoint(this,t)};f.prototype.isClockwise=function(t){var x=this;t=Array.isArray(t[0])?t:t.map(function(z){return x.hasZ?x.hasM?[z.x,z.y,z.z,z.m]:[z.x,z.y,z.z]:[z.x,z.y]});return u.isClockwise(t,this.hasM,this.hasZ)};f.prototype.getPoint=function(t,x){if(!this._validateInputs(t,x))return null;t=this.rings[t][x];x=this.hasZ;
var z=this.hasM;return x&&!z?new k(t[0],t[1],t[2],void 0,this.spatialReference):z&&!x?new k(t[0],t[1],void 0,t[2],this.spatialReference):x&&z?new k(t[0],t[1],t[2],t[3],this.spatialReference):new k(t[0],t[1],this.spatialReference)};f.prototype.insertPoint=function(t,x,z){if(!this._validateInputs(t,x,!0))return this;this.clearCache();B.updateSupportFromPoint(this,z);Array.isArray(z)||(z=z.toArray());this.rings[t].splice(x,0,z);return this};f.prototype.removePoint=function(t,x){if(!this._validateInputs(t,
x))return null;this.clearCache();return new k(this.rings[t].splice(x,1)[0],this.spatialReference)};f.prototype.removeRing=function(t){if(!this._validateInputs(t,null))return null;this.clearCache();t=this.rings.splice(t,1)[0];var x=this.spatialReference;return t.map(function(z){return new k(z,x)})};f.prototype.setPoint=function(t,x,z){if(!this._validateInputs(t,x))return this;this.clearCache();B.updateSupportFromPoint(this,z);Array.isArray(z)||(z=z.toArray());this.rings[t][x]=z;return this};f.prototype._validateInputs=
function(t,x,z){void 0===z&&(z=!1);return null==t||0>t||t>=this.rings.length||null!=x&&(t=this.rings[t],z&&(0>x||x>t.length)||!z&&(0>x||x>=t.length))?!1:!0};f.prototype.toJSON=function(t){return this.write(null,t)};d([p.property({dependsOn:["hasM","hasZ","rings"]})],f.prototype,"cache",void 0);d([p.property({readOnly:!0,dependsOn:["cache"]})],f.prototype,"centroid",null);d([p.property({dependsOn:["cache"],readOnly:!0})],f.prototype,"extent",null);d([p.property({dependsOn:["cache"],readOnly:!0})],
f.prototype,"isSelfIntersecting",null);d([p.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],f.prototype,"rings",void 0);d([p.writer("rings")],f.prototype,"writePaths",null);return f=q=d([p.subclass("esri.geometry.Polygon")],f)}(p.declared(e));A.prototype.toJSON.isDefaultToJSON=!0;return A})},"esri/layers/vectorTiles/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(A,h,b){function d(n,e){if(!n||!n.length)return null;for(var k=[],l=[],
m=e?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],r=0,u=n.length;r<u;r++){var v=g(n[r],e,m);v&&l.push(v)}l.sort(function(w,B){var C=w[2]-B[2];0===C&&e&&(C=w[4]-B[4]);return C});l.length&&(r=6*l[0][2],k[0]=l[0][0]/r,k[1]=l[0][1]/r,e&&(r=6*l[0][4],k[2]=0!==r?l[0][3]/r:0),k[0]<m[0]||k[0]>m[1]||k[1]<m[2]||k[1]>m[3]||e&&(k[2]<m[4]||k[2]>m[5]))&&(k.length=0);if(!k.length)if(n=n[0]&&n[0].length?p(n[0],e):null)k[0]=n[0],k[1]=n[1],e&&2<n.length&&(k[2]=n[2]);
else return null;return k}function g(n,e,k){for(var l=0,m=0,r=0,u=0,v=0,w=0,B=n.length-1;w<B;w++){var C=n[w],y=C[0],a=C[1],c=C[2],f=n[w+1],q=f[0],t=f[1],x=f[2],z=y*t-q*a;u+=z;l+=(y+q)*z;m+=(a+t)*z;e&&2<C.length&&2<f.length&&(z=y*x-q*c,r+=(c+x)*z,v+=z);y<k[0]&&(k[0]=y);y>k[1]&&(k[1]=y);a<k[2]&&(k[2]=a);a>k[3]&&(k[3]=a);e&&(c<k[4]&&(k[4]=c),c>k[5]&&(k[5]=c))}0<u&&(u*=-1);0<v&&(v*=-1);if(!u)return null;n=[l,m,.5*u];e&&(n[3]=r,n[4]=.5*v);return n}function p(n,e){for(var k=e?[0,0,0]:[0,0],l=e?[0,0,0]:
[0,0],m=0,r=0,u=0,v=0,w=0,B=n.length;w<B-1;w++){var C=n[w],y=n[w+1];if(C&&y){k[0]=C[0];k[1]=C[1];l[0]=y[0];l[1]=y[1];e&&2<C.length&&2<y.length&&(k[2]=C[2],l[2]=y[2]);var a=b.getLength(k,l);a&&(m+=a,C=b.getMidpoint(C,y),r+=a*C[0],u+=a*C[1],e&&2<C.length&&(v+=a*C[2]))}}return 0<m?e?[r/m,u/m,v/m]:[r/m,u/m]:n.length?n[0]:null}Object.defineProperty(h,"__esModule",{value:!0});h.extentCentroid=function(n){return n?n.hasZ?[n.xmax-n.xmin/2,n.ymax-n.ymin/2,n.zmax-n.zmin/2]:[n.xmax-n.xmin/2,n.ymax-n.ymin/2]:
null};h.polygonCentroid=function(n){return n?d(n.rings,n.hasZ):null};h.ringsCentroid=d;h.lineCentroid=p})},"esri/layers/vectorTiles/geometry/support/coordsUtils":function(){define(["require","exports"],function(A,h){function b(g,p){var n=p[0]-g[0],e=p[1]-g[1];return 2<g.length&&2<p.length?(g=g[2]-p[2],Math.sqrt(n*n+e*e+g*g)):Math.sqrt(n*n+e*e)}function d(g,p,n){var e=g[0]+n*(p[0]-g[0]),k=g[1]+n*(p[1]-g[1]);return 2<g.length&&2<p.length?[e,k,g[2]+n*(p[2]-g[2])]:[e,k]}Object.defineProperty(h,"__esModule",
{value:!0});h.geometryToCoordinates=function(g){if(!g)return null;if(Array.isArray(g))return g;var p=g.hasZ,n=g.hasM;if("point"===g.type)return n&&p?[g.x,g.y,g.z,g.m]:p?[g.x,g.y,g.z]:n?[g.x,g.y,g.m]:[g.x,g.y];if("polygon"===g.type)return g.rings.slice(0);if("polyline"===g.type)return g.paths.slice(0);if("multipoint"===g.type)return g.points.slice(0);if("extent"===g.type){g=g.clone().normalize();if(!g)return null;var e=!1,k=!1;g.forEach(function(l){l.hasZ&&(e=!0);l.hasM&&(k=!0)});return g.map(function(l){var m=
[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(e&&l.hasZ)for(var r=.5*(l.zmax-l.zmin),u=0;u<m.length;u++)m[u].push(r);if(k&&l.hasM)for(l=.5*(l.mmax-l.mmin),u=0;u<m.length;u++)m[u].push(l);return m})}return null};h.getLength=b;h.getMidpoint=function(g,p){return d(g,p,.5)};h.getPathLength=function(g){for(var p=g.length,n=0,e=0;e<p-1;++e)n+=b(g[e],g[e+1]);return n};h.getPointOnPath=function(g,p){if(0>=p)return g[0];for(var n=g.length,e=0,k=0;k<n-1;++k){var l=b(g[k],
g[k+1]);if(p-e<l)return d(g[k],g[k+1],(p-e)/l);e+=l}return g[n-1]};h.isClockwise=function(g,p,n){for(var e=g.length,k=0,l=0,m=0,r=0;r<e;r++){var u=g[r],v=g[(r+1)%e],w=2;k+=u[0]*v[1]-v[0]*u[1];2<u.length&&2<v.length&&n&&(l+=u[0]*v[2]-v[0]*u[2],w=3);u.length>w&&v.length>w&&p&&(m+=u[0]*v[w]-v[0]*u[w])}return 0>=k&&0>=l&&0>=m}})},"esri/layers/vectorTiles/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m){function r(w){return function(B,C){return null==B?C:null==C?B:w(B,C)}}var u=r(Math.min),v=r(Math.max);A=function(w){function B(){for(var y=0;y<arguments.length;y++);y=w.call(this)||this;y.paths=[];y.type="polyline";return y}b(B,w);var C=B;B.prototype.normalizeCtorArgs=function(y,a){var c=null,f=null;if(y&&!Array.isArray(y)){c=y.paths?y.paths:null;a||(y.spatialReference?a=y.spatialReference:y.paths||(a=y));var q=y.hasZ;var t=y.hasM}else c=y;c=c||[];a=a||l.WGS84;c.length&&
c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(f=c[0]&&c[0][0])void 0===q&&void 0===t?(q=2<f.length,t=!1):void 0===q?q=!t&&3<f.length:void 0===t&&(t=!q&&3<f.length);return{paths:c,spatialReference:a,hasZ:q,hasM:t}};Object.defineProperty(B.prototype,"extent",{get:function(){var y=this.hasZ,a=this.hasM,c=this.spatialReference,f=this.paths,q=y?3:2;if(!f.length||!f[0].length)return null;var t=f[0][0],x=t[0];t=t[1];var z=f[0][0],D=z[0];z=z[1];for(var F=void 0,G=void 0,E=void 0,H=void 0,O=[],
K=0;K<f.length;K++){var L=f[K],T=L[0],P=T[0];T=T[1];var Q=L[0],J=Q[0];Q=Q[1];for(var R=void 0,I=void 0,S=void 0,U=void 0,V=0;V<L.length;V++){var W=L[V],X=W[0],Y=W[1];x=u(x,X);t=u(t,Y);D=v(D,X);z=v(z,Y);P=u(P,X);T=u(T,Y);J=v(J,X);Q=v(Q,Y);y&&2<W.length&&(X=W[2],F=u(F,X),G=v(G,X),R=u(R,X),I=v(I,X));a&&W.length>q&&(U=W[q],E=u(F,U),H=v(G,U),S=u(R,U),U=v(I,U))}O.push(new n({xmin:P,ymin:T,zmin:R,mmin:S,xmax:J,ymax:Q,zmax:I,mmax:U,spatialReference:c}))}f=new n;f.xmin=x;f.ymin=t;f.xmax=D;f.ymax=z;f.spatialReference=
c;y&&(f.zmin=F,f.zmax=G);a&&(f.mmin=E,f.mmax=H);f.cache._partwise=1<O.length?O:null;return f},enumerable:!0,configurable:!0});B.prototype.writePaths=function(y,a,c,f){a.paths=g.clone(this.paths)};B.prototype.addPath=function(y){if(y){this.clearCache();var a=this.paths,c=a.length;if(Array.isArray(y[0]))a[c]=y.concat();else{for(var f=[],q=0,t=y.length;q<t;q++)f[q]=y[q].toArray();a[c]=f}return this}};B.prototype.clone=function(){var y=new C;y.spatialReference=this.spatialReference;y.paths=g.clone(this.paths);
y.hasZ=this.hasZ;y.hasM=this.hasM;return y};B.prototype.getPoint=function(y,a){if(!this._validateInputs(y,a))return null;y=this.paths[y][a];a=this.hasZ;var c=this.hasM;return a&&!c?new k(y[0],y[1],y[2],void 0,this.spatialReference):c&&!a?new k(y[0],y[1],void 0,y[2],this.spatialReference):a&&c?new k(y[0],y[1],y[2],y[3],this.spatialReference):new k(y[0],y[1],this.spatialReference)};B.prototype.insertPoint=function(y,a,c){if(!this._validateInputs(y,a,!0))return this;this.clearCache();m.updateSupportFromPoint(this,
c);Array.isArray(c)||(c=c.toArray());this.paths[y].splice(a,0,c);return this};B.prototype.removePath=function(y){if(!this._validateInputs(y,null))return null;this.clearCache();y=this.paths.splice(y,1)[0];var a=this.spatialReference;return y.map(function(c){return new k(c,a)})};B.prototype.removePoint=function(y,a){if(!this._validateInputs(y,a))return null;this.clearCache();return new k(this.paths[y].splice(a,1)[0],this.spatialReference)};B.prototype.setPoint=function(y,a,c){if(!this._validateInputs(y,
a))return this;this.clearCache();m.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[y][a]=c;return this};B.prototype._validateInputs=function(y,a,c){void 0===c&&(c=!1);return null==y||0>y||y>=this.paths.length||null!=a&&(y=this.paths[y],c&&(0>a||a>y.length)||!c&&(0>a||a>=y.length))?!1:!0};B.prototype.toJSON=function(y){return this.write(null,y)};d([p.property({dependsOn:["hasM","hasZ","paths"]})],B.prototype,"cache",void 0);d([p.property({dependsOn:["cache"],readOnly:!0})],
B.prototype,"extent",null);d([p.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],B.prototype,"paths",void 0);d([p.writer("paths")],B.prototype,"writePaths",null);return B=C=d([p.subclass("esri.geometry.Polyline")],B)}(p.declared(e));A.prototype.toJSON.isDefaultToJSON=!0;return A})},"esri/layers/vectorTiles/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),
function(A,h,b,d,g,p){return function(n){function e(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];l=n.apply(this,l)||this;l.x=0;l.y=0;l.z=void 0;return l}b(e,n);var k=e;e.prototype.normalizeCtorArgs=function(l,m){return"number"===typeof l?{x:l,y:m}:Array.isArray(l)?{x:l[0],y:l[1]}:l};e.prototype.clone=function(){return new k({x:this.x,y:this.y,z:this.z})};e.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};d([p.property({type:Number})],e.prototype,
"x",void 0);d([p.property({type:Number})],e.prototype,"y",void 0);d([p.property({type:Number})],e.prototype,"z",void 0);return e=k=d([p.subclass("esri.geometry.ScreenPoint")],e)}(p.declared(g))})},"esri/layers/vectorTiles/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(A,h,b,d,g,p,n){function e(v){return void 0!==v.points}function k(v){return void 0!==v.x&&void 0!==v.y}function l(v){return void 0!==v.paths}
function m(v){return void 0!==v.rings}function r(v){if(v){if(k(v))return g.fromJSON(v);if(l(v))return n.fromJSON(v);if(m(v))return p.fromJSON(v);if(e(v))return d.fromJSON(v);if(void 0!==v.xmin&&void 0!==v.ymin&&void 0!==v.xmax&&void 0!==v.ymax)return b.fromJSON(v)}return null}Object.defineProperty(h,"__esModule",{value:!0});h.fromJson=function(v){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(w){console.warn(w.stack)}return r(v)};h.isMultipoint=e;h.isPoint=k;h.isPolyline=l;
h.isPolygon=m;h.fromJSON=r;h.getJsonType=function(v){return v instanceof g?"esriGeometryPoint":v instanceof n?"esriGeometryPolyline":v instanceof p?"esriGeometryPolygon":v instanceof b?"esriGeometryEnvelope":v instanceof d?"esriGeometryMultipoint":null};var u={esriGeometryPoint:g,esriGeometryPolyline:n,esriGeometryPolygon:p,esriGeometryEnvelope:b,esriGeometryMultipoint:d};h.getGeometryType=function(v){return v&&u[v]||null}})},"esri/layers/vectorTiles/geometry/support/aaBoundingBox":function(){define(["require",
"exports","../Extent","./aaBoundingRect"],function(A,h,b,d){function g(m){void 0===m&&(m=h.ZERO);return[m[0],m[1],m[2],m[3],m[4],m[5]]}function p(m){return m[0]>=m[3]?0:m[3]-m[0]}function n(m){return m[1]>=m[4]?0:m[4]-m[1]}function e(m){return m[2]>=m[5]?0:m[5]-m[2]}function k(m,r){m[0]=r[0];m[1]=r[1];m[2]=r[2];m[3]=r[3];m[4]=r[4];m[5]=r[5];return m}function l(m){return 6===m.length}Object.defineProperty(h,"__esModule",{value:!0});h.create=g;h.fromValues=function(m,r,u,v,w,B){return[m,r,u,v,w,B]};
h.fromExtent=function(m,r){void 0===r&&(r=g());r[0]=m.xmin;r[1]=m.ymin;r[2]=m.zmin;r[3]=m.xmax;r[4]=m.ymax;r[5]=m.zmax;return r};h.toExtent=function(m,r){return isFinite(m[2])||isFinite(m[5])?new b({xmin:m[0],xmax:m[3],ymin:m[1],ymax:m[4],zmin:m[2],zmax:m[5],spatialReference:r}):new b({xmin:m[0],xmax:m[3],ymin:m[1],ymax:m[4],spatialReference:r})};h.fromMinMax=function(m,r,u){void 0===u&&(u=g());u[0]=m[0];u[1]=m[1];u[2]=m[2];u[3]=r[0];u[4]=r[1];u[5]=r[2];return u};h.expandPointInPlace=function(m,r){r[0]<
m[0]&&(m[0]=r[0]);r[0]>m[3]&&(m[3]=r[0]);r[1]<m[1]&&(m[1]=r[1]);r[1]>m[4]&&(m[4]=r[1]);r[2]<m[2]&&(m[2]=r[2]);r[2]>m[5]&&(m[5]=r[2])};h.expand=function(m,r,u){void 0===u&&(u=m);l(r)?(u[0]=Math.min(m[0],r[0]),u[1]=Math.min(m[1],r[1]),u[2]=Math.min(m[2],r[2]),u[3]=Math.max(m[3],r[3]),u[4]=Math.max(m[4],r[4]),u[5]=Math.max(m[5],r[5])):d.is(r)?(u[0]=Math.min(m[0],r[0]),u[1]=Math.min(m[1],r[1]),u[3]=Math.max(m[3],r[2]),u[4]=Math.max(m[4],r[3])):2===r.length?(u[0]=Math.min(m[0],r[0]),u[1]=Math.min(m[1],
r[1]),u[3]=Math.max(m[3],r[0]),u[4]=Math.max(m[4],r[1])):3===r.length&&(u[0]=Math.min(m[0],r[0]),u[1]=Math.min(m[1],r[1]),u[2]=Math.min(m[2],r[2]),u[3]=Math.max(m[3],r[0]),u[4]=Math.max(m[4],r[1]),u[5]=Math.max(m[5],r[2]));return u};h.expandWithBuffer=function(m,r,u,v,w){void 0===w&&(w=m);var B=m[0],C=m[1],y=m[2],a=m[3],c=m[4];m=m[5];for(var f=0;f<v;f++)B=Math.min(B,r[u+3*f]),C=Math.min(C,r[u+3*f+1]),y=Math.min(y,r[u+3*f+2]),a=Math.max(a,r[u+3*f]),c=Math.max(c,r[u+3*f+1]),m=Math.max(m,r[u+3*f+2]);
w[0]=B;w[1]=C;w[2]=y;w[3]=a;w[4]=c;w[5]=m;return w};h.expandWithNestedArray=function(m,r,u,v){void 0===v&&(v=m);var w=r.length,B=m[0],C=m[1],y=m[2],a=m[3],c=m[4];m=m[5];if(u)for(u=0;u<w;u++){var f=r[u];B=Math.min(B,f[0]);C=Math.min(C,f[1]);y=Math.min(y,f[2]);a=Math.max(a,f[0]);c=Math.max(c,f[1]);m=Math.max(m,f[2])}else for(u=0;u<w;u++)f=r[u],B=Math.min(B,f[0]),C=Math.min(C,f[1]),a=Math.max(a,f[0]),c=Math.max(c,f[1]);v[0]=B;v[1]=C;v[2]=y;v[3]=a;v[4]=c;v[5]=m;return v};h.allFinite=function(m){for(var r=
0;6>r;r++)if(!isFinite(m[r]))return!1;return!0};h.width=p;h.depth=n;h.height=e;h.diameter=function(m){var r=p(m),u=e(m);m=n(m);return Math.sqrt(r*r+u*u+m*m)};h.center=function(m,r){void 0===r&&(r=[0,0,0]);r[0]=m[0]+p(m)/2;r[1]=m[1]+n(m)/2;r[2]=m[2]+e(m)/2;return r};h.size=function(m,r){void 0===r&&(r=[0,0,0]);r[0]=p(m);r[1]=n(m);r[2]=e(m);return r};h.maximumDimension=function(m){return Math.max(p(m),e(m),n(m))};h.containsPoint=function(m,r){return r[0]>=m[0]&&r[1]>=m[1]&&r[2]>=m[2]&&r[0]<=m[3]&&r[1]<=
m[4]&&r[2]<=m[5]};h.containsPointWithMargin=function(m,r,u){return r[0]>=m[0]-u&&r[1]>=m[1]-u&&r[2]>=m[2]-u&&r[0]<=m[3]+u&&r[1]<=m[4]+u&&r[2]<=m[5]+u};h.contains=function(m,r){return r[0]>=m[0]&&r[1]>=m[1]&&r[2]>=m[2]&&r[3]<=m[3]&&r[4]<=m[4]&&r[5]<=m[5]};h.intersects=function(m,r){return Math.max(r[0],m[0])<=Math.min(r[3],m[3])&&Math.max(r[1],m[1])<=Math.min(r[4],m[4])&&Math.max(r[2],m[2])<=Math.min(r[5],m[5])};h.offset=function(m,r,u,v,w){void 0===w&&(w=m);w[0]=m[0]+r;w[1]=m[1]+u;w[2]=m[2]+v;w[3]=
m[3]+r;w[4]=m[4]+u;w[5]=m[5]+v;return w};h.setMin=function(m,r,u){void 0===u&&(u=m);u[0]=r[0];u[1]=r[1];u[2]=r[2];u!==m&&(u[3]=m[3],u[4]=m[4],u[5]=m[5]);return u};h.setMax=function(m,r,u){void 0===u&&(u=m);u[3]=r[0];u[4]=r[1];u[5]=r[2];u!==m&&(u[0]=m[0],u[1]=m[1],u[2]=m[2]);return m};h.set=k;h.empty=function(m){return m?k(m,h.NEGATIVE_INFINITY):g(h.NEGATIVE_INFINITY)};h.toRect=function(m,r){r||(r=d.create());r[0]=m[0];r[1]=m[1];r[2]=m[3];r[3]=m[4];return r};h.fromRect=function(m,r){m[0]=r[0];m[1]=
r[1];m[3]=r[2];m[4]=r[3];return m};h.is=l;h.isPoint=function(m){return 0===p(m)&&0===n(m)&&0===e(m)};h.equals=function(m,r,u){if(null==m||null==r)return m===r;if(!l(m)||!l(r))return!1;if(u)for(var v=0;v<m.length;v++){if(!u(m[v],r[v]))return!1}else for(v=0;v<m.length;v++)if(m[v]!==r[v])return!1;return!0};h.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];h.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];h.ZERO=[0,0,0,0,0,0]})},"esri/layers/vectorTiles/geometry/support/aaBoundingRect":function(){define(["require",
"exports","../../geometry"],function(A,h,b){function d(l){void 0===l&&(l=h.ZERO);return[l[0],l[1],l[2],l[3]]}function g(l){return l[0]>=l[2]?0:l[2]-l[0]}function p(l){return l[1]>=l[3]?0:l[3]-l[1]}function n(l,m){l[0]=m[0];l[1]=m[1];l[2]=m[2];l[3]=m[3];return l}function e(l){return 4===l.length}function k(l,m,r){return l<m?m:l>r?r:l}Object.defineProperty(h,"__esModule",{value:!0});h.create=d;h.clone=function(l){return[l[0],l[1],l[2],l[3]]};h.fromValues=function(l,m,r,u,v){void 0===v&&(v=d());v[0]=
l;v[1]=m;v[2]=r;v[3]=u;return v};h.fromExtent=function(l,m){void 0===m&&(m=d());m[0]=l.xmin;m[1]=l.ymin;m[2]=l.xmax;m[3]=l.ymax;return m};h.toExtent=function(l,m){return new b.Extent({xmin:l[0],ymin:l[1],xmax:l[2],ymax:l[3],spatialReference:m})};h.expandPointInPlace=function(l,m){m[0]<l[0]&&(l[0]=m[0]);m[0]>l[2]&&(l[2]=m[0]);m[1]<l[1]&&(l[1]=m[1]);m[1]>l[3]&&(l[3]=m[1])};h.expand=function(l,m,r){void 0===r&&(r=l);if("length"in m)if(e(m))r[0]=Math.min(l[0],m[0]),r[1]=Math.min(l[1],m[1]),r[2]=Math.max(l[2],
m[2]),r[3]=Math.max(l[3],m[3]);else{if(2===m.length||3===m.length)r[0]=Math.min(l[0],m[0]),r[1]=Math.min(l[1],m[1]),r[2]=Math.max(l[2],m[0]),r[3]=Math.max(l[3],m[1])}else switch(m.type){case "extent":r[0]=Math.min(l[0],m.xmin);r[1]=Math.min(l[1],m.ymin);r[2]=Math.max(l[2],m.xmax);r[3]=Math.max(l[3],m.ymax);break;case "point":r[0]=Math.min(l[0],m.x),r[1]=Math.min(l[1],m.y),r[2]=Math.max(l[2],m.x),r[3]=Math.max(l[3],m.y)}return r};h.expandWithNestedArray=function(l,m,r){void 0===r&&(r=l);var u=m.length,
v=l[0],w=l[1],B=l[2];l=l[3];for(var C=0;C<u;C++){var y=m[C];v=Math.min(v,y[0]);w=Math.min(w,y[1]);B=Math.max(B,y[0]);l=Math.max(l,y[1])}r[0]=v;r[1]=w;r[2]=B;r[3]=l;return r};h.allFinite=function(l){for(var m=0;4>m;m++)if(!isFinite(l[m]))return!1;return!0};h.width=g;h.height=p;h.diameter=function(l){var m=g(l);l=p(l);return Math.sqrt(m*m+l*l)};h.area=function(l){return g(l)*p(l)};h.center=function(l,m){void 0===m&&(m=[0,0]);m[0]=l[0]+g(l)/2;m[1]=l[1]+p(l)/2;return m};h.containsPoint=function(l,m){return m[0]>=
l[0]&&m[1]>=l[1]&&m[0]<=l[2]&&m[1]<=l[3]};h.containsPointWithMargin=function(l,m,r){return m[0]>=l[0]-r&&m[1]>=l[1]-r&&m[0]<=l[2]+r&&m[1]<=l[3]+r};h.intersects=function(l,m){return Math.max(m[0],l[0])<=Math.min(m[2],l[2])&&Math.max(m[1],l[1])<=Math.min(m[3],l[3])};h.contains=function(l,m){return m[0]>=l[0]&&m[2]<=l[2]&&m[1]>=l[1]&&m[3]<=l[3]};h.intersection=function(l,m,r){void 0===r&&(r=l);var u=m[0],v=m[1],w=m[2];m=m[3];r[0]=k(l[0],u,w);r[1]=k(l[1],v,m);r[2]=k(l[2],u,w);r[3]=k(l[3],v,m);return r};
h.offset=function(l,m,r,u){void 0===u&&(u=l);u[0]=l[0]+m;u[1]=l[1]+r;u[2]=l[2]+m;u[3]=l[3]+r;return u};h.pad=function(l,m,r){void 0===r&&(r=l);r[0]=l[0]-m;r[1]=l[1]-m;r[2]=l[2]+m;r[3]=l[3]+m;return r};h.setMin=function(l,m,r){void 0===r&&(r=l);r[0]=m[0];r[1]=m[1];r!==l&&(r[2]=l[2],r[3]=l[3]);return r};h.setMax=function(l,m,r){void 0===r&&(r=l);r[2]=m[0];r[3]=m[1];r!==l&&(r[0]=l[0],r[1]=l[1]);return l};h.set=n;h.empty=function(l){return l?n(l,h.NEGATIVE_INFINITY):d(h.NEGATIVE_INFINITY)};h.is=e;h.isPoint=
function(l){return(0===g(l)||!isFinite(l[0]))&&(0===p(l)||!isFinite(l[1]))};h.equals=function(l,m,r){if(null==l||null==m)return l===m;if(!e(l)||!e(m))return!1;if(r)for(var u=0;u<l.length;u++){if(!r(l[u],m[u]))return!1}else for(u=0;u<l.length;u++)if(l[u]!==m[u])return!1;return!0};h.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];h.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];h.ZERO=[0,0,0,0]})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ./dehydratedFeatureComparison".split(" "),
function(A,h,b,d,g,p,n){function e(C){switch(C){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function k(C,y,a,c){return{uid:b.generateUID(),objectId:c&&C.attributes?C.attributes[c]:null,attributes:C.attributes,geometry:l(C.geometry,y,a),visible:!0}}function l(C,y,a){if(!C)return null;switch(y){case "point":return{x:C.x,y:C.y,
z:C.z,type:y,spatialReference:a};case "polyline":var c=C;return{paths:c.paths,hasZ:c.hasZ,hasM:c.hasM,type:y,spatialReference:a};case "polygon":return{rings:C.rings,hasZ:c.hasZ,hasM:c.hasM,type:y,spatialReference:a};case "multipoint":return{points:C.points,hasZ:c.hasZ,hasM:c.hasM,type:y,spatialReference:a};case "extent":return{xmin:C.xmin,ymin:C.ymin,zmin:C.zmin,mmin:C.mmin,xmax:C.xmax,ymax:C.ymax,zmax:C.zmax,mmax:C.mmax,hasZ:C.hasZ,hasM:C.hasM,type:y,spatialReference:a}}}function m(C){return"point"===
C.type?null!=C.z:"extent"===C.type?null!=C.zmin:C.hasZ}function r(C){return"declaredClass"in C}function u(C,y){g.empty(y);"mesh"===C.type&&(C=C.extent);switch(C.type){case "point":y[0]=y[3]=C.x;y[1]=y[4]=C.y;m(C)&&(y[2]=y[5]=C.z);break;case "polyline":for(var a=0;a<C.paths.length;a++)g.expandWithNestedArray(y,C.paths[a],m(C));break;case "polygon":for(a=0;a<C.rings.length;a++)g.expandWithNestedArray(y,C.rings[a],m(C));break;case "multipoint":g.expandWithNestedArray(y,C.points,m(C));break;case "extent":y[0]=
C.xmin,y[1]=C.ymin,y[3]=C.xmax,y[4]=C.ymax,null!=C.zmin&&(y[2]=C.zmin),null!=C.zmax&&(y[5]=C.zmax)}}function v(C,y){p.empty(y);"mesh"===C.type&&(C=C.extent);switch(C.type){case "point":y[0]=y[2]=C.x;y[1]=y[3]=C.y;break;case "polyline":for(var a=0;a<C.paths.length;a++)p.expandWithNestedArray(y,C.paths[a]);break;case "polygon":for(a=0;a<C.rings.length;a++)p.expandWithNestedArray(y,C.rings[a]);break;case "multipoint":p.expandWithNestedArray(y,C.points);break;case "extent":y[0]=C.xmin,y[1]=C.ymin,y[2]=
C.xmax,y[3]=C.ymax}}Object.defineProperty(h,"__esModule",{value:!0});h.equals=n.equals;h.isPoint=function(C){return"point"===C.type};h.mapJSONGeometryType=e;h.fromFeatureSetJSON=function(C){var y=e(C.geometryType),a=d.fromJSON(C.spatialReference);return C.features.map(function(c){return k(c,y,a,C.objectIdFieldName)})};h.fromJSON=k;h.fromJSONGeometry=l;h.makeDehydratedPoint=function(C,y,a,c){return{x:C,y:y,z:a,spatialReference:c,type:"point"}};h.hasZ=m;h.isHydratedGeometry=function(C){return"declaredClass"in
C};h.isHydratedGraphic=r;h.hydrateGraphic=function(C,y){if(!C||r(C))return C;y=new b({layer:y,sourceLayer:y});y.read(C);return y};h.computeAABB=u;h.expandAABB=function(C,y){u(C,w);g.expand(y,w)};h.computeAABR=v;h.expandAABR=function(C,y){v(C,B);p.expand(y,B)};var w=g.create(),B=p.create()})},"esri/layers/vectorTiles/Graphic":function(){define(["require","exports","esri/graphic","./core/tsSupport/declareExtendsHelper","./core/JSONSupport"],function(A,h,b,d,g){A=function(n){function e(k){return n.call(this)||
this}d(e,n);e.fromJSON=function(k){return new b(k)};return e}(g);var p=0;(function(n){n.generateUID=function(){return p++}})(A||(A={}));return A})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports"],function(A,h){function b(e,k){if(e===k)return!0;if(null==e||null==k||e.length!==k.length)return!1;for(var l=0;l<e.length;l++){var m=e[l],r=k[l];if(m.length!==r.length)return!1;for(var u=0;u<m.length;u++)if(m[u]!==r[u])return!1}return!0}function d(e,
k){if(e===k)return!0;if(null==e||null==k||e.length!==k.length)return!1;for(var l=0;l<e.length;l++)if(!b(e[l],k[l]))return!1;return!0}function g(e,k){return e===k||e&&k&&e.equals(k)}function p(e,k){if(e===k)return!0;if(!e||!k||e.type!==k.type)return!1;switch(e.type){case "point":return g(e.spatialReference,k.spatialReference)?e.x===k.x&&e.y===k.y&&e.z===k.z&&e.m===k.m:!1;case "extent":return e.hasZ===k.hasZ&&e.hasM===k.hasM&&g(e.spatialReference,k.spatialReference)?e.xmin===k.xmin&&e.ymin===k.ymin&&
e.zmin===k.zmin&&e.xmax===k.xmax&&e.ymax===k.ymax&&e.zmax===k.zmax:!1;case "polyline":return e.hasZ===k.hasZ&&e.hasM===k.hasM&&g(e.spatialReference,k.spatialReference)?d(e.paths,k.paths):!1;case "polygon":return e.hasZ===k.hasZ&&e.hasM===k.hasM&&g(e.spatialReference,k.spatialReference)?d(e.rings,k.rings):!1;case "multipoint":return e.hasZ===k.hasZ&&e.hasM===k.hasM&&g(e.spatialReference,k.spatialReference)?b(e.points,k.points):!1;case "mesh":return!1}}function n(e,k){if(e===k)return!0;if(!e||!k)return!1;
for(var l in e)if(!(l in k)||e[l]!==k[l])return!1;for(l in k)if(!(l in e))return!1;return!0}Object.defineProperty(h,"__esModule",{value:!0});h.equals=function(e,k){return e===k?!0:null!=e&&null!=k&&e.objectId===k.objectId&&p(e.geometry,k.geometry)&&n(e.attributes,k.attributes)?!0:!1}})},"esri/layers/vectorTiles/views/3d/lib/glMatrix":function(){define([],function(){var A={};(function(h,b){b(h,!0);b(h,!1)})(A,function(h,b){var d={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),
c=new Int32Array(a.buffer);d.invsqrt=function(f){a[0]=f;c[0]=1597463007-(c[0]>>1);var q=a[0];return q*(1.5-.5*f*q*q)}}else d.invsqrt=function(f){return 1/Math.sqrt(f)}})();var g=Array;"undefined"!=typeof Float32Array&&(g=b?Float32Array:Array);var p={create:function(a){var c=new g(3);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2]):c[0]=c[1]=c[2]=0;return c},createFrom:function(a,c,f){var q=new g(3);q[0]=a;q[1]=c;q[2]=f;return q},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];return c},set3:function(a,c,f,q){q[0]=
a;q[1]=c;q[2]=f;return q},add:function(a,c,f){if(!f||a===f)return a[0]+=c[0],a[1]+=c[1],a[2]+=c[2],a;f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];return f},subtract:function(a,c,f){if(!f||a===f)return a[0]-=c[0],a[1]-=c[1],a[2]-=c[2],a;f[0]=a[0]-c[0];f[1]=a[1]-c[1];f[2]=a[2]-c[2];return f},multiply:function(a,c,f){if(!f||a===f)return a[0]*=c[0],a[1]*=c[1],a[2]*=c[2],a;f[0]=a[0]*c[0];f[1]=a[1]*c[1];f[2]=a[2]*c[2];return f},max:function(a,c,f){f[0]=Math.max(a[0],c[0]);f[1]=Math.max(a[1],c[1]);f[2]=
Math.max(a[2],c[2]);return f},min:function(a,c,f){f[0]=Math.min(a[0],c[0]);f[1]=Math.min(a[1],c[1]);f[2]=Math.min(a[2],c[2]);return f},negate:function(a,c){c||(c=a);c[0]=-a[0];c[1]=-a[1];c[2]=-a[2];return c},scale:function(a,c,f){if(!f||a===f)return a[0]*=c,a[1]*=c,a[2]*=c,a;f[0]=a[0]*c;f[1]=a[1]*c;f[2]=a[2]*c;return f},normalize:function(a,c){c||(c=a);var f=a[0],q=a[1];a=a[2];var t=Math.sqrt(f*f+q*q+a*a);if(!t)return c[0]=0,c[1]=0,c[2]=0,c;if(1===t)return c[0]=f,c[1]=q,c[2]=a,c;t=1/t;c[0]=f*t;c[1]=
q*t;c[2]=a*t;return c},cross:function(a,c,f){f||(f=a);var q=a[0],t=a[1];a=a[2];var x=c[0],z=c[1];c=c[2];f[0]=t*c-a*z;f[1]=a*x-q*c;f[2]=q*z-t*x;return f},length:function(a){var c=a[0],f=a[1];a=a[2];return Math.sqrt(c*c+f*f+a*a)},length2:function(a){var c=a[0],f=a[1];a=a[2];return c*c+f*f+a*a},dot:function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]},direction:function(a,c,f){f||(f=a);var q=a[0]-c[0],t=a[1]-c[1];a=a[2]-c[2];c=Math.sqrt(q*q+t*t+a*a);if(!c)return f[0]=0,f[1]=0,f[2]=0,f;c=1/c;f[0]=q*c;f[1]=
t*c;f[2]=a*c;return f},lerp:function(a,c,f,q){q||(q=a);q[0]=a[0]+f*(c[0]-a[0]);q[1]=a[1]+f*(c[1]-a[1]);q[2]=a[2]+f*(c[2]-a[2]);return q},dist:function(a,c){var f=c[0]-a[0],q=c[1]-a[1];a=c[2]-a[2];return Math.sqrt(f*f+q*q+a*a)},dist2:function(a,c){var f=c[0]-a[0],q=c[1]-a[1];a=c[2]-a[2];return f*f+q*q+a*a}},n=null,e=new g(4);p.unproject=function(a,c,f,q,t){t||(t=a);n||(n=w.create());var x=n;e[0]=2*(a[0]-q[0])/q[2]-1;e[1]=2*(a[1]-q[1])/q[3]-1;e[2]=2*a[2]-1;e[3]=1;w.multiply(f,c,x);if(!w.inverse(x))return null;
w.multiplyVec4(x,e);if(0===e[3])return null;t[0]=e[0]/e[3];t[1]=e[1]/e[3];t[2]=e[2]/e[3];return t};var k=p.createFrom(1,0,0),l=p.createFrom(0,1,0),m=p.createFrom(0,0,1);p.rotationTo=function(a,c,f){f||(f=B.create());var q=p.dot(a,c),t=p.create();if(1<=q)B.set(C,f);else if(-.999999>q)p.cross(k,a,t),1E-6>t.length&&p.cross(l,a,t),1E-6>t.length&&p.cross(m,a,t),p.normalize(t),B.fromAxisAngle(t,Math.PI,f);else{q=Math.sqrt(2*(1+q));var x=1/q;p.cross(a,c,t);f[0]=t[0]*x;f[1]=t[1]*x;f[2]=t[2]*x;f[3]=.5*q;B.normalize(f)}1<
f[3]?f[3]=1:-1>f[3]&&(f[3]=-1);return f};var r=p.create(),u=p.create();p.project=function(a,c,f,q){q||(q=a);p.direction(c,f,r);p.subtract(a,c,u);a=p.dot(r,u);p.scale(r,a,q);p.add(q,c,q)};p.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var c=new g(9);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8]):c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=0;return c},createFrom:function(a,c,f,q,t,x,z,D,F){var G=new g(9);G[0]=a;G[1]=
c;G[2]=f;G[3]=q;G[4]=t;G[5]=x;G[6]=z;G[7]=D;G[8]=F;return G},determinant:function(a){var c=a[3],f=a[4],q=a[5],t=a[6],x=a[7],z=a[8];return a[0]*(z*f-q*x)+a[1]*(-z*c+q*t)+a[2]*(x*c-f*t)},inverse:function(a,c){var f=a[0],q=a[1],t=a[2],x=a[3],z=a[4],D=a[5],F=a[6],G=a[7];a=a[8];var E=a*z-D*G,H=-a*x+D*F,O=G*x-z*F,K=f*E+q*H+t*O;if(!K)return null;K=1/K;c||(c=v.create());c[0]=E*K;c[1]=(-a*q+t*G)*K;c[2]=(D*q-t*z)*K;c[3]=H*K;c[4]=(a*f-t*F)*K;c[5]=(-D*f+t*x)*K;c[6]=O*K;c[7]=(-G*f+q*F)*K;c[8]=(z*f-q*x)*K;return c},
multiply:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2],z=a[3],D=a[4],F=a[5],G=a[6],E=a[7];a=a[8];var H=c[0],O=c[1],K=c[2],L=c[3],T=c[4],P=c[5],Q=c[6],J=c[7];c=c[8];f[0]=H*q+O*z+K*G;f[1]=H*t+O*D+K*E;f[2]=H*x+O*F+K*a;f[3]=L*q+T*z+P*G;f[4]=L*t+T*D+P*E;f[5]=L*x+T*F+P*a;f[6]=Q*q+J*z+c*G;f[7]=Q*t+J*D+c*E;f[8]=Q*x+J*F+c*a;return f},add:function(a,c,f){f||(f=a);f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];f[3]=a[3]+c[3];f[4]=a[4]+c[4];f[5]=a[5]+c[5];f[6]=a[6]+c[6];f[7]=a[7]+c[7];f[8]=a[8]+c[8];return f},
subtract:function(a,c,f){f||(f=a);f[0]=a[0]-c[0];f[1]=a[1]-c[1];f[2]=a[2]-c[2];f[3]=a[3]-c[3];f[4]=a[4]-c[4];f[5]=a[5]-c[5];f[6]=a[6]-c[6];f[7]=a[7]-c[7];f[8]=a[8]-c[8];return f},multiplyVec2:function(a,c,f){f||(f=c);var q=c[0];c=c[1];f[0]=q*a[0]+c*a[3]+a[6];f[1]=q*a[1]+c*a[4]+a[7];return f},multiplyVec3:function(a,c,f){f||(f=c);var q=c[0],t=c[1];c=c[2];f[0]=q*a[0]+t*a[3]+c*a[6];f[1]=q*a[1]+t*a[4]+c*a[7];f[2]=q*a[2]+t*a[5]+c*a[8];return f},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];
c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,c){if(!c||a===c){c=a[1];var f=a[2],q=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=f;a[7]=q;return a}c[0]=a[0];c[1]=a[3];c[2]=a[6];c[3]=a[1];c[4]=a[4];c[5]=a[7];c[6]=a[2];c[7]=a[5];c[8]=a[8];return c},toMat4:function(a,c){c||(c=w.create());c[15]=1;c[14]=0;c[13]=0;c[12]=0;c[11]=0;c[10]=a[8];c[9]=a[7];c[8]=a[6];
c[7]=0;c[6]=a[5];c[5]=a[4];c[4]=a[3];c[3]=0;c[2]=a[2];c[1]=a[1];c[0]=a[0];return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},w={create:function(a){var c=new g(16);4===arguments.length?(c[0]=arguments[0],c[1]=arguments[1],c[2]=arguments[2],c[3]=arguments[3],c[4]=arguments[4],c[5]=arguments[5],c[6]=arguments[6],c[7]=arguments[7],c[8]=arguments[8],c[9]=arguments[9],c[10]=arguments[10],c[11]=arguments[11],c[12]=arguments[12],
c[13]=arguments[13],c[14]=arguments[14],c[15]=arguments[15]):a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},createFrom:function(a,c,f,q,t,x,z,D,F,G,E,H,O,K,L,T){var P=new g(16);P[0]=a;P[1]=c;P[2]=f;P[3]=q;P[4]=t;P[5]=x;P[6]=z;P[7]=D;P[8]=F;P[9]=G;P[10]=E;P[11]=H;P[12]=O;P[13]=K;P[14]=L;P[15]=T;return P},createFromMatrixRowMajor:function(a){var c=new g(16);c[0]=
a[0];c[4]=a[1];c[8]=a[2];c[12]=a[3];c[1]=a[4];c[5]=a[5];c[9]=a[6];c[13]=a[7];c[2]=a[8];c[6]=a[9];c[10]=a[10];c[14]=a[11];c[3]=a[12];c[7]=a[13];c[11]=a[14];c[15]=a[15];return c},createFromMatrix:function(a){var c=new g(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];
c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},setRowMajor:function(a,c){c[0]=a[0];c[4]=a[1];c[8]=a[2];c[12]=a[3];c[1]=a[4];c[5]=a[5];c[9]=a[6];c[13]=a[7];c[2]=a[8];c[6]=a[9];c[10]=a[10];c[14]=a[11];c[3]=a[12];c[7]=a[13];c[11]=a[14];c[15]=a[15];return c},identity:function(a){a||(a=w.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,c){if(!c||
a===c){c=a[1];var f=a[2],q=a[3],t=a[6],x=a[7],z=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=f;a[9]=t;a[11]=a[14];a[12]=q;a[13]=x;a[14]=z;return a}c[0]=a[0];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=a[1];c[5]=a[5];c[6]=a[9];c[7]=a[13];c[8]=a[2];c[9]=a[6];c[10]=a[10];c[11]=a[14];c[12]=a[3];c[13]=a[7];c[14]=a[11];c[15]=a[15];return c},determinant:function(a){var c=a[0],f=a[1],q=a[2],t=a[3],x=a[4],z=a[5],D=a[6],F=a[7],G=a[8],E=a[9],H=a[10],O=a[11],K=a[12],L=a[13],T=a[14];a=a[15];return K*
E*D*t-G*L*D*t-K*z*H*t+x*L*H*t+G*z*T*t-x*E*T*t-K*E*q*F+G*L*q*F+K*f*H*F-c*L*H*F-G*f*T*F+c*E*T*F+K*z*q*O-x*L*q*O-K*f*D*O+c*L*D*O+x*f*T*O-c*z*T*O-G*z*q*a+x*E*q*a+G*f*D*a-c*E*D*a-x*f*H*a+c*z*H*a},inverse:function(a,c){c||(c=a);var f=a[0],q=a[1],t=a[2],x=a[3],z=a[4],D=a[5],F=a[6],G=a[7],E=a[8],H=a[9],O=a[10],K=a[11],L=a[12],T=a[13],P=a[14];a=a[15];var Q=f*D-q*z,J=f*F-t*z,R=f*G-x*z,I=q*F-t*D,S=q*G-x*D,U=t*G-x*F,V=E*T-H*L,W=E*P-O*L,X=E*a-K*L,Y=H*P-O*T,da=H*a-K*T,aa=O*a-K*P,ba=Q*aa-J*da+R*Y+I*X-S*W+U*V;if(!ba)return null;
ba=1/ba;c[0]=(D*aa-F*da+G*Y)*ba;c[1]=(-q*aa+t*da-x*Y)*ba;c[2]=(T*U-P*S+a*I)*ba;c[3]=(-H*U+O*S-K*I)*ba;c[4]=(-z*aa+F*X-G*W)*ba;c[5]=(f*aa-t*X+x*W)*ba;c[6]=(-L*U+P*R-a*J)*ba;c[7]=(E*U-O*R+K*J)*ba;c[8]=(z*da-D*X+G*V)*ba;c[9]=(-f*da+q*X-x*V)*ba;c[10]=(L*S-T*R+a*Q)*ba;c[11]=(-E*S+H*R-K*Q)*ba;c[12]=(-z*Y+D*W-F*V)*ba;c[13]=(f*Y-q*W+t*V)*ba;c[14]=(-L*I+T*J-P*Q)*ba;c[15]=(E*I-H*J+O*Q)*ba;return c},toRotationMat:function(a,c){c||(c=w.create());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=
a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c},toMat3:function(a,c){c||(c=v.create());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c},toInverseMat3:function(a,c){var f=a[0],q=a[1],t=a[2],x=a[4],z=a[5],D=a[6],F=a[8],G=a[9];a=a[10];var E=a*z-D*G,H=-a*x+D*F,O=G*x-z*F,K=f*E+q*H+t*O;if(!K)return null;K=1/K;c||(c=v.create());c[0]=E*K;c[1]=(-a*q+t*G)*K;c[2]=(D*q-t*z)*K;c[3]=H*K;c[4]=(a*f-t*F)*K;c[5]=
(-D*f+t*x)*K;c[6]=O*K;c[7]=(-G*f+q*F)*K;c[8]=(z*f-q*x)*K;return c},multiply:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2],z=a[3],D=a[4],F=a[5],G=a[6],E=a[7],H=a[8],O=a[9],K=a[10],L=a[11],T=a[12],P=a[13],Q=a[14];a=a[15];var J=c[0],R=c[1],I=c[2],S=c[3],U=c[4],V=c[5],W=c[6],X=c[7],Y=c[8],da=c[9],aa=c[10],ba=c[11],fa=c[12],ka=c[13],oa=c[14];c=c[15];f[0]=J*q+R*D+I*H+S*T;f[1]=J*t+R*F+I*O+S*P;f[2]=J*x+R*G+I*K+S*Q;f[3]=J*z+R*E+I*L+S*a;f[4]=U*q+V*D+W*H+X*T;f[5]=U*t+V*F+W*O+X*P;f[6]=U*x+V*G+W*K+X*Q;f[7]=
U*z+V*E+W*L+X*a;f[8]=Y*q+da*D+aa*H+ba*T;f[9]=Y*t+da*F+aa*O+ba*P;f[10]=Y*x+da*G+aa*K+ba*Q;f[11]=Y*z+da*E+aa*L+ba*a;f[12]=fa*q+ka*D+oa*H+c*T;f[13]=fa*t+ka*F+oa*O+c*P;f[14]=fa*x+ka*G+oa*K+c*Q;f[15]=fa*z+ka*E+oa*L+c*a;return f},multiplyVec3:function(a,c,f){f||(f=c);var q=c[0],t=c[1];c=c[2];f[0]=a[0]*q+a[4]*t+a[8]*c+a[12];f[1]=a[1]*q+a[5]*t+a[9]*c+a[13];f[2]=a[2]*q+a[6]*t+a[10]*c+a[14];return f},multiplyVec4:function(a,c,f){f||(f=c);var q=c[0],t=c[1],x=c[2];c=c[3];f[0]=a[0]*q+a[4]*t+a[8]*x+a[12]*c;f[1]=
a[1]*q+a[5]*t+a[9]*x+a[13]*c;f[2]=a[2]*q+a[6]*t+a[10]*x+a[14]*c;f[3]=a[3]*q+a[7]*t+a[11]*x+a[15]*c;return f},translate:function(a,c,f){var q=c[0],t=c[1];c=c[2];if(!f||a===f)return a[12]=a[0]*q+a[4]*t+a[8]*c+a[12],a[13]=a[1]*q+a[5]*t+a[9]*c+a[13],a[14]=a[2]*q+a[6]*t+a[10]*c+a[14],a[15]=a[3]*q+a[7]*t+a[11]*c+a[15],a;var x=a[0];var z=a[1];var D=a[2];var F=a[3];var G=a[4];var E=a[5];var H=a[6];var O=a[7];var K=a[8];var L=a[9];var T=a[10];var P=a[11];f[0]=x;f[1]=z;f[2]=D;f[3]=F;f[4]=G;f[5]=E;f[6]=H;f[7]=
O;f[8]=K;f[9]=L;f[10]=T;f[11]=P;f[12]=x*q+G*t+K*c+a[12];f[13]=z*q+E*t+L*c+a[13];f[14]=D*q+H*t+T*c+a[14];f[15]=F*q+O*t+P*c+a[15];return f},scale:function(a,c,f){var q=c[0],t=c[1];c=c[2];if(!f||a===f)return a[0]*=q,a[1]*=q,a[2]*=q,a[3]*=q,a[4]*=t,a[5]*=t,a[6]*=t,a[7]*=t,a[8]*=c,a[9]*=c,a[10]*=c,a[11]*=c,a;f[0]=a[0]*q;f[1]=a[1]*q;f[2]=a[2]*q;f[3]=a[3]*q;f[4]=a[4]*t;f[5]=a[5]*t;f[6]=a[6]*t;f[7]=a[7]*t;f[8]=a[8]*c;f[9]=a[9]*c;f[10]=a[10]*c;f[11]=a[11]*c;f[12]=a[12];f[13]=a[13];f[14]=a[14];f[15]=a[15];
return f},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,c,f,q){var t=f[0],x=f[1];f=f[2];var z=Math.sqrt(t*t+x*x+f*f);if(!z)return null;1!==z&&(z=1/z,t*=z,x*=z,f*=z);var D=Math.sin(c);var F=Math.cos(c);var G=1-F;c=a[0];z=a[1];var E=a[2];var H=a[3];var O=a[4];var K=a[5];var L=a[6];var T=a[7];var P=a[8];var Q=a[9];var J=a[10];var R=a[11];var I=t*t*G+F;var S=
x*t*G+f*D;var U=f*t*G-x*D;var V=t*x*G-f*D;var W=x*x*G+F;var X=f*x*G+t*D;var Y=t*f*G+x*D;t=x*f*G-t*D;x=f*f*G+F;q?a!==q&&(q[12]=a[12],q[13]=a[13],q[14]=a[14],q[15]=a[15]):q=a;q[0]=c*I+O*S+P*U;q[1]=z*I+K*S+Q*U;q[2]=E*I+L*S+J*U;q[3]=H*I+T*S+R*U;q[4]=c*V+O*W+P*X;q[5]=z*V+K*W+Q*X;q[6]=E*V+L*W+J*X;q[7]=H*V+T*W+R*X;q[8]=c*Y+O*t+P*x;q[9]=z*Y+K*t+Q*x;q[10]=E*Y+L*t+J*x;q[11]=H*Y+T*t+R*x;return q},rotateX:function(a,c,f){var q=Math.sin(c);c=Math.cos(c);var t=a[4],x=a[5],z=a[6],D=a[7],F=a[8],G=a[9],E=a[10],H=
a[11];f?a!==f&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]):f=a;f[4]=t*c+F*q;f[5]=x*c+G*q;f[6]=z*c+E*q;f[7]=D*c+H*q;f[8]=t*-q+F*c;f[9]=x*-q+G*c;f[10]=z*-q+E*c;f[11]=D*-q+H*c;return f},rotateY:function(a,c,f){var q=Math.sin(c);c=Math.cos(c);var t=a[0],x=a[1],z=a[2],D=a[3],F=a[8],G=a[9],E=a[10],H=a[11];f?a!==f&&(f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]):f=a;f[0]=t*c+F*-q;f[1]=x*c+G*-q;f[2]=z*c+E*-q;f[3]=D*c+
H*-q;f[8]=t*q+F*c;f[9]=x*q+G*c;f[10]=z*q+E*c;f[11]=D*q+H*c;return f},rotateZ:function(a,c,f){var q=Math.sin(c);c=Math.cos(c);var t=a[0],x=a[1],z=a[2],D=a[3],F=a[4],G=a[5],E=a[6],H=a[7];f?a!==f&&(f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]):f=a;f[0]=t*c+F*q;f[1]=x*c+G*q;f[2]=z*c+E*q;f[3]=D*c+H*q;f[4]=t*-q+F*c;f[5]=x*-q+G*c;f[6]=z*-q+E*c;f[7]=D*-q+H*c;return f},frustum:function(a,c,f,q,t,x,z){z||(z=w.create());var D=c-a,F=q-f,G=x-t;z[0]=2*t/D;z[1]=0;z[2]=
0;z[3]=0;z[4]=0;z[5]=2*t/F;z[6]=0;z[7]=0;z[8]=(c+a)/D;z[9]=(q+f)/F;z[10]=-(x+t)/G;z[11]=-1;z[12]=0;z[13]=0;z[14]=-(x*t*2)/G;z[15]=0;return z},perspective:function(a,c,f,q,t){a=f*Math.tan(a*Math.PI/360);c*=a;return w.frustum(-c,c,-a,a,f,q,t)},ortho:function(a,c,f,q,t,x,z){z||(z=w.create());var D=c-a,F=q-f,G=x-t;z[0]=2/D;z[1]=0;z[2]=0;z[3]=0;z[4]=0;z[5]=2/F;z[6]=0;z[7]=0;z[8]=0;z[9]=0;z[10]=-2/G;z[11]=0;z[12]=-(a+c)/D;z[13]=-(q+f)/F;z[14]=-(x+t)/G;z[15]=1;return z},lookAt:function(a,c,f,q){q||(q=w.create());
var t=a[0],x=a[1];a=a[2];var z=f[0];var D=f[1];var F=f[2];var G=c[0];f=c[1];var E=c[2];if(t===G&&x===f&&a===E)return w.identity(q);c=t-G;f=x-f;G=a-E;var H=1/Math.sqrt(c*c+f*f+G*G);c*=H;f*=H;G*=H;E=D*G-F*f;F=F*c-z*G;z=z*f-D*c;(H=Math.sqrt(E*E+F*F+z*z))?(H=1/H,E*=H,F*=H,z*=H):z=F=E=0;D=f*z-G*F;var O=G*E-c*z;var K=c*F-f*E;(H=Math.sqrt(D*D+O*O+K*K))?(H=1/H,D*=H,O*=H,K*=H):K=O=D=0;q[0]=E;q[1]=D;q[2]=c;q[3]=0;q[4]=F;q[5]=O;q[6]=f;q[7]=0;q[8]=z;q[9]=K;q[10]=G;q[11]=0;q[12]=-(E*t+F*x+z*a);q[13]=-(D*t+O*x+
K*a);q[14]=-(c*t+f*x+G*a);q[15]=1;return q},fromRotationTranslation:function(a,c,f){f||(f=w.create());var q=a[0],t=a[1],x=a[2],z=a[3],D=q+q,F=t+t,G=x+x;a=q*D;var E=q*F;q*=G;var H=t*F;t*=G;x*=G;D*=z;F*=z;z*=G;f[0]=1-(H+x);f[1]=E+z;f[2]=q-F;f[3]=0;f[4]=E-z;f[5]=1-(a+x);f[6]=t+D;f[7]=0;f[8]=q+F;f[9]=t-D;f[10]=1-(a+H);f[11]=0;f[12]=c[0];f[13]=c[1];f[14]=c[2];f[15]=1;return f},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+
a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},B={create:function(a){var c=new g(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(a,c,f,q){var t=new g(4);t[0]=a;t[1]=c;t[2]=f;t[3]=q;return t},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},identity:function(a){a||(a=B.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},C=B.identity();B.calculateW=function(a,c){var f=a[0],q=a[1],t=a[2];if(!c||a===c)return a[3]=-Math.sqrt(Math.abs(1-
f*f-q*q-t*t)),a;c[0]=f;c[1]=q;c[2]=t;c[3]=-Math.sqrt(Math.abs(1-f*f-q*q-t*t));return c};B.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};B.inverse=function(a,c){var f=a[0],q=a[1],t=a[2],x=a[3];f=(f=f*f+q*q+t*t+x*x)?1/f:0;if(!c||a===c)return a[0]*=-f,a[1]*=-f,a[2]*=-f,a[3]*=f,a;c[0]=-a[0]*f;c[1]=-a[1]*f;c[2]=-a[2]*f;c[3]=a[3]*f;return c};B.conjugate=function(a,c){if(!c||a===c)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;c[0]=-a[0];c[1]=-a[1];c[2]=-a[2];c[3]=a[3];return c};B.length=function(a){var c=
a[0],f=a[1],q=a[2];a=a[3];return Math.sqrt(c*c+f*f+q*q+a*a)};B.normalize=function(a,c){c||(c=a);var f=a[0],q=a[1],t=a[2];a=a[3];var x=Math.sqrt(f*f+q*q+t*t+a*a);if(0===x)return c[0]=0,c[1]=0,c[2]=0,c[3]=0,c;x=1/x;c[0]=f*x;c[1]=q*x;c[2]=t*x;c[3]=a*x;return c};B.add=function(a,c,f){if(!f||a===f)return a[0]+=c[0],a[1]+=c[1],a[2]+=c[2],a[3]+=c[3],a;f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];f[3]=a[3]+c[3];return f};B.multiply=function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2];a=a[3];var z=c[0],D=c[1],
F=c[2];c=c[3];f[0]=q*c+a*z+t*F-x*D;f[1]=t*c+a*D+x*z-q*F;f[2]=x*c+a*F+q*D-t*z;f[3]=a*c-q*z-t*D-x*F;return f};B.multiplyVec3=function(a,c,f){f||(f=c);var q=c[0],t=c[1],x=c[2];c=a[0];var z=a[1],D=a[2];a=a[3];var F=a*q+z*x-D*t,G=a*t+D*q-c*x,E=a*x+c*t-z*q;q=-c*q-z*t-D*x;f[0]=F*a+q*-c+G*-D-E*-z;f[1]=G*a+q*-z+E*-c-F*-D;f[2]=E*a+q*-D+F*-z-G*-c;return f};B.scale=function(a,c,f){if(!f||a===f)return a[0]*=c,a[1]*=c,a[2]*=c,a[3]*=c,a;f[0]=a[0]*c;f[1]=a[1]*c;f[2]=a[2]*c;f[3]=a[3]*c;return f};B.toMat3=function(a,
c){c||(c=v.create());var f=a[0],q=a[1],t=a[2],x=a[3],z=f+f,D=q+q,F=t+t;a=f*z;var G=f*D;f*=F;var E=q*D;q*=F;t*=F;z*=x;D*=x;x*=F;c[0]=1-(E+t);c[1]=G+x;c[2]=f-D;c[3]=G-x;c[4]=1-(a+t);c[5]=q+z;c[6]=f+D;c[7]=q-z;c[8]=1-(a+E);return c};B.toMat4=function(a,c){c||(c=w.create());var f=a[0],q=a[1],t=a[2],x=a[3],z=f+f,D=q+q,F=t+t;a=f*z;var G=f*D;f*=F;var E=q*D;q*=F;t*=F;z*=x;D*=x;x*=F;c[0]=1-(E+t);c[1]=G+x;c[2]=f-D;c[3]=0;c[4]=G-x;c[5]=1-(a+t);c[6]=q+z;c[7]=0;c[8]=f+D;c[9]=q-z;c[10]=1-(a+E);c[11]=0;c[12]=0;
c[13]=0;c[14]=0;c[15]=1;return c};B.slerp=function(a,c,f,q){q||(q=a);var t=a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3];if(1<=Math.abs(t))return q!==a&&(q[0]=a[0],q[1]=a[1],q[2]=a[2],q[3]=a[3]),q;var x=Math.acos(t);var z=Math.sqrt(1-t*t);if(.001>Math.abs(z))return q[0]=.5*a[0]+.5*c[0],q[1]=.5*a[1]+.5*c[1],q[2]=.5*a[2]+.5*c[2],q[3]=.5*a[3]+.5*c[3],q;t=Math.sin((1-f)*x)/z;f=Math.sin(f*x)/z;q[0]=a[0]*t+c[0]*f;q[1]=a[1]*t+c[1]*f;q[2]=a[2]*t+c[2]*f;q[3]=a[3]*t+c[3]*f;return q};B.fromRotationMatrix=function(a,
c){c||(c=B.create());var f=a[0]+a[4]+a[8];if(0<f){var q=Math.sqrt(f+1);c[3]=.5*q;q=.5/q;c[0]=(a[7]-a[5])*q;c[1]=(a[2]-a[6])*q;c[2]=(a[3]-a[1])*q}else{q=B.fromRotationMatrix.s_iNext=B.fromRotationMatrix.s_iNext||[1,2,0];f=0;a[4]>a[0]&&(f=1);a[8]>a[3*f+f]&&(f=2);var t=q[f],x=q[t];q=Math.sqrt(a[3*f+f]-a[3*t+t]-a[3*x+x]+1);c[f]=.5*q;q=.5/q;c[3]=(a[3*x+t]-a[3*t+x])*q;c[t]=(a[3*t+f]+a[3*f+t])*q;c[x]=(a[3*x+f]+a[3*f+x])*q}return c};v.toQuat4=B.fromRotationMatrix;(function(){var a=v.create();B.fromAxes=function(c,
f,q,t){a[0]=f[0];a[3]=f[1];a[6]=f[2];a[1]=q[0];a[4]=q[1];a[7]=q[2];a[2]=c[0];a[5]=c[1];a[8]=c[2];return B.fromRotationMatrix(a,t)}})();B.identity=function(a){a||(a=B.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};B.fromAngleAxis=function(a,c,f){f||(f=B.create());a*=.5;var q=Math.sin(a);f[3]=Math.cos(a);f[0]=q*c[0];f[1]=q*c[1];f[2]=q*c[2];return f};B.toAngleAxis=function(a,c){c||(c=a);var f=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<f?(c[3]=2*Math.acos(a[3]),f=d.invsqrt(f),c[0]=a[0]*f,c[1]=a[1]*f,c[2]=a[2]*
f):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};B.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var y={create:function(a){var c=new g(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(a,c,f,q){var t=new g(4);t[0]=a;t[1]=c;t[2]=f;t[3]=q;return t},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},identity:function(a){a||(a=y.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,c){if(!c||a===c)return c=
a[1],a[1]=a[2],a[2]=c,a;c[0]=a[0];c[1]=a[2];c[2]=a[1];c[3]=a[3];return c},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,c){c||(c=a);var f=a[0],q=a[1],t=a[2];a=a[3];var x=f*a-t*q;if(!x)return null;x=1/x;c[0]=a*x;c[1]=-q*x;c[2]=-t*x;c[3]=f*x;return c},multiply:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2];a=a[3];f[0]=q*c[0]+t*c[2];f[1]=q*c[1]+t*c[3];f[2]=x*c[0]+a*c[2];f[3]=x*c[1]+a*c[3];return f},rotate:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2];a=a[3];var z=Math.sin(c);
c=Math.cos(c);f[0]=q*c+t*z;f[1]=q*-z+t*c;f[2]=x*c+a*z;f[3]=x*-z+a*c;return f},multiplyVec2:function(a,c,f){f||(f=c);var q=c[0];c=c[1];f[0]=q*a[0]+c*a[1];f[1]=q*a[2]+c*a[3];return f},scale:function(a,c,f){f||(f=a);var q=a[1],t=a[2],x=a[3],z=c[0];c=c[1];f[0]=a[0]*z;f[1]=q*c;f[2]=t*z;f[3]=x*c;return f},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};b=b?"":"d";h["glMath"+b]=d;h["vec2"+b]={create:function(a){var c=new g(2);a?(c[0]=a[0],c[1]=a[1]):(c[0]=0,c[1]=0);return c},createFrom:function(a,
c){var f=new g(2);f[0]=a;f[1]=c;return f},add:function(a,c,f){f||(f=c);f[0]=a[0]+c[0];f[1]=a[1]+c[1];return f},subtract:function(a,c,f){f||(f=c);f[0]=a[0]-c[0];f[1]=a[1]-c[1];return f},multiply:function(a,c,f){f||(f=c);f[0]=a[0]*c[0];f[1]=a[1]*c[1];return f},divide:function(a,c,f){f||(f=c);f[0]=a[0]/c[0];f[1]=a[1]/c[1];return f},scale:function(a,c,f){f||(f=a);f[0]=a[0]*c;f[1]=a[1]*c;return f},dist:function(a,c){var f=c[0]-a[0];a=c[1]-a[1];return Math.sqrt(f*f+a*a)},dist2:function(a,c){var f=c[0]-
a[0];a=c[1]-a[1];return f*f+a*a},set:function(a,c){c[0]=a[0];c[1]=a[1];return c},set2:function(a,c,f){f[0]=a;f[1]=c;return f},negate:function(a,c){c||(c=a);c[0]=-a[0];c[1]=-a[1];return c},normalize:function(a,c){c||(c=a);var f=a[0]*a[0]+a[1]*a[1];0<f?(f=Math.sqrt(f),c[0]=a[0]/f,c[1]=a[1]/f):c[0]=c[1]=0;return c},cross:function(a,c,f){a=a[0]*c[1]-a[1]*c[0];if(!f)return a;f[0]=f[1]=0;f[2]=a;return f},length:function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)},dot:function(a,c){return a[0]*c[0]+
a[1]*c[1]},direction:function(a,c,f){f||(f=a);var q=a[0]-c[0];a=a[1]-c[1];c=q*q+a*a;if(!c)return f[0]=0,f[1]=0,f[2]=0,f;c=1/Math.sqrt(c);f[0]=q*c;f[1]=a*c;return f},lerp:function(a,c,f,q){q||(q=a);q[0]=a[0]+f*(c[0]-a[0]);q[1]=a[1]+f*(c[1]-a[1]);return q},str:function(a){return"["+a[0]+", "+a[1]+"]"}};h["vec3"+b]=p;h["vec4"+b]={create:function(a){var c=new g(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):(c[0]=0,c[1]=0,c[2]=0,c[3]=0);return c},createFrom:function(a,c,f,q){var t=new g(4);t[0]=a;t[1]=
c;t[2]=f;t[3]=q;return t},add:function(a,c,f){f||(f=c);f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];f[3]=a[3]+c[3];return f},subtract:function(a,c,f){f||(f=c);f[0]=a[0]-c[0];f[1]=a[1]-c[1];f[2]=a[2]-c[2];f[3]=a[3]-c[3];return f},multiply:function(a,c,f){f||(f=c);f[0]=a[0]*c[0];f[1]=a[1]*c[1];f[2]=a[2]*c[2];f[3]=a[3]*c[3];return f},divide:function(a,c,f){f||(f=c);f[0]=a[0]/c[0];f[1]=a[1]/c[1];f[2]=a[2]/c[2];f[3]=a[3]/c[3];return f},scale:function(a,c,f){f||(f=a);f[0]=a[0]*c;f[1]=a[1]*c;f[2]=a[2]*c;
f[3]=a[3]*c;return f},dot:function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},set4:function(a,c,f,q,t){t[0]=a;t[1]=c;t[2]=f;t[3]=q;return t},negate:function(a,c){c||(c=a);c[0]=-a[0];c[1]=-a[1];c[2]=-a[2];c[3]=-a[3];return c},lerp:function(a,c,f,q){q||(q=a);q[0]=a[0]+f*(c[0]-a[0]);q[1]=a[1]+f*(c[1]-a[1]);q[2]=a[2]+f*(c[2]-a[2]);q[3]=a[3]+f*(c[3]-a[3]);return q},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+
"]"}};h["mat2"+b]=y;h["mat3"+b]=v;h["mat4"+b]=w;h["quat4"+b]=B});return A})},"esri/layers/vectorTiles/views/3d/support/mathUtils":function(){define(["require","exports","../lib/glMatrix"],function(A,h,b){function d(m){return Math.asin(1<m?1:-1>m?-1:m)}function g(m){return Math.acos(1<m?1:-1>m?-1:m)}function p(m,r,u){return m<r?r:m>u?u:m}function n(m){for(var r in m){var u=m[r];u instanceof Function&&(m[r]=u.bind(m))}return m}Object.defineProperty(h,"__esModule",{value:!0});h.deg2rad=function(m){return m*
Math.PI/180};h.rad2deg=function(m){return 180*m/Math.PI};h.asin=d;h.acos=g;h.sign=Math.sign||function(m){return+(0<m)-+(0>m)||+m};h.log2=Math.log2||function(m){return Math.log(m)/Math.LN2};h.fovx2fovy=function(m,r,u){return 2*Math.atan(u*Math.tan(.5*m)/r)};h.fovy2fovx=function(m,r,u){return 2*Math.atan(r*Math.tan(.5*m)/u)};h.makeOrthonormal=function(m,r,u){u=u||m;var v=b.vec3d.dot(m,r);b.vec3d.set3(m[0]-v*r[0],m[1]-v*r[1],m[2]-v*r[2],u);b.vec3d.normalize(u)};h.tangentFrame=function(m,r,u){Math.abs(m[0])>
Math.abs(m[1])?b.vec3d.set3(0,1,0,r):b.vec3d.set3(1,0,0,r);b.vec3d.cross(m,r,u);b.vec3d.normalize(r);b.vec3d.cross(u,m,r);b.vec3d.normalize(u)};h.cartesianToSpherical=function(m,r){var u=b.vec3d.length(m),v=d(m[2]/u);b.vec3d.set3(u,v,Math.atan2(m[1]/u,m[0]/u),r)};h.sphericalToCartesian=function(m,r){var u=m[0],v=m[1];m=m[2];var w=Math.cos(v);b.vec3d.set3(u*w*Math.cos(m),u*w*Math.sin(m),u*Math.sin(v),r)};h.lerp=function(m,r,u){return m+(r-m)*u};h.bilerp=function(m,r,u,v,w,B){m+=(r-m)*w;return m+(u+
(v-u)*w-m)*B};h.slerp=function(m,r,u,v){void 0===v&&(v=m);var w=b.vec3d.length(m),B=b.vec3d.length(r),C=b.vec3d.dot(m,r)/(w*B);if(.9999999999999999>C){C=Math.acos(C);var y=((1-u)*w+u*B)/Math.sin(C);B=y/B*Math.sin(u*C);b.vec3d.scale(m,y/w*Math.sin((1-u)*C),k);b.vec3d.scale(r,B,l);return b.vec3d.add(k,l,v)}return b.vec3d.lerp(m,r,u,v)};h.angle=function(m,r,u){m=b.vec3d.normalize(m,k);r=b.vec3d.normalize(r,l);var v=g(b.vec3d.dot(m,r));return u&&(m=b.vec3d.cross(m,r,e),0>b.vec3d.dot(m,u))?-v:v};h.clamp=
p;h.isFinite=Number.isFinite||function(m){return"number"===typeof m&&window.isFinite(m)};h.isNaN=Number.isNaN||function(m){return m!==m};h.makePiecewiseLinearFunction=function(m){var r=m.length;return function(u){var v=0;if(u<=m[0][0])return m[0][1];if(u>=m[r-1][0])return m[r-1][1];for(;u>m[v][0];)v++;var w=m[v][0];u=(w-u)/(w-m[v-1][0]);return u*m[v-1][1]+(1-u)*m[v][1]}};h.vectorEquals=function(m,r){if(null==m||null==r)return m!==r;if(m.length!==r.length)return!1;for(var u=0;u<m.length;u++)if(m[u]!==
r[u])return!1;return!0};h.floatEqualRelative=function(m,r,u){void 0===u&&(u=1E-6);if(h.isNaN(m)||h.isNaN(r))return!1;if(m===r)return!0;var v=Math.abs(m-r),w=Math.abs(m),B=Math.abs(r);if(0===m||0===r||1E-12>w&&1E-12>B){if(v>.01*u)return!1}else if(v/(w+B)>u)return!1;return!0};h.floatEqualAbsolute=function(m,r,u){void 0===u&&(u=1E-6);return h.isNaN(m)||h.isNaN(r)?!1:(m>r?m-r:r-m)<=u};A=function(){function m(r,u){this.min=r;this.max=u;this.range=u-r}m.prototype.ndiff=function(r,u){void 0===u&&(u=0);return Math.ceil((r-
u)/this.range)*this.range+u};m.prototype._normalize=function(r,u,v,w){void 0===w&&(w=0);v-=w;v<r?v+=this.ndiff(r-v):v>u&&(v-=this.ndiff(v-u));return v+w};m.prototype.normalize=function(r,u){return this._normalize(this.min,this.max,r,u)};m.prototype.clamp=function(r,u){void 0===u&&(u=0);return p(r-u,this.min,this.max)+u};m.prototype.monotonic=function(r,u,v){return r<u?u:u+this.ndiff(r-u,v)};m.prototype.minimalMonotonic=function(r,u,v){return this._normalize(r,r+this.range,u,v)};m.prototype.center=
function(r,u,v){u=this.monotonic(r,u,v);return this.normalize((r+u)/2,v)};m.prototype.diff=function(r,u,v){return this.monotonic(r,u,v)-r};m.prototype.contains=function(r,u,v){u=this.minimalMonotonic(r,u);v=this.minimalMonotonic(r,v);return v>r&&v<u};return m}();h.Cyclical=A;h.cyclical2PI=n(new A(0,2*Math.PI));h.cyclicalPI=n(new A(-Math.PI,Math.PI));h.cyclicalDeg=n(new A(0,360));var e=b.vec3d.create(),k=b.vec3d.create(),l=b.vec3d.create()})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require",
"exports","../Utils","../util/Writer"],function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});var g=function(){function p(n,e){this.data=n;this.stride=e;this.vertexCount=0}p.prototype.transfer=function(n,e){var k=this.data.buffer();n.vertexCount=this.vertexCount;n.data=k;n.stride=this.stride;e.push(k)};return p}();h.default=g;A=function(){function p(n,e,k){this.geometryType=n;this.indexVector=new d.default(Uint32Array,k);this.namedVectors={};n=b.getStrides(n,e);for(var l in n){e=n[l];
var m=new d.default(Uint32Array,e/4*k);this.namedVectors[l]=new g(m,e)}}p.prototype.get=function(n){return this.namedVectors[n].data};p.prototype.transfer=function(n,e){var k=this.indexVector.buffer(),l={};e.push(k);for(var m in this.namedVectors){var r=this.namedVectors[m];l[m]={};r.transfer(l[m],e)}n.geometryType=this.geometryType;n.indexBuffer=k;n.namedBuffers=l;this.destroy()};p.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return p}();h.VertexVectors=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Writer":function(){define(["require",
"exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function b(d,g){this._pos=0;g=g?this._roundToNearest4(g):40;this._array=new ArrayBuffer(g);this._buffer=new d(this._array);this._ctor=d}Object.defineProperty(b.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});b.prototype._roundToNearest4=function(d){d=Math.round(d);return d+(4-d%4)};b.prototype._ensureSize=function(d){if(this._pos+d>=this._buffer.length){d=this._roundToNearest4(1.5*
(this._array.byteLength+4*d));d=new ArrayBuffer(d);var g=new this._ctor(d);g.set(this._buffer,0);this._array=d;this._buffer=g}};b.prototype.writeInt32=function(d){this._ensureSize(1);var g=this._pos;this._buffer[this._pos++]=d;return g};b.prototype.writeF32=function(d){this._ensureSize(1);var g=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=d;this._pos++;return g};b.prototype.writeUint32=function(d){this._ensureSize(1);var g=this._pos;this._buffer[this._pos++]=d;return g};b.prototype.push=
function(d){this._ensureSize(1);var g=this._pos;this._buffer[this._pos++]=d;return g};b.prototype.writeRegion=function(d){this._ensureSize(d.length);var g=this._pos;this._buffer.set(d,this._pos);this._pos+=d.length;return g};b.prototype.buffer=function(){var d=this._array.slice(0,4*this._pos);this.destroy();return d};b.prototype.destroy=function(){this._buffer=this._array=null};return b}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/meshTemplateUtils":function(){define("require exports ../../../../../../core/Logger ../../enums ../templates/WGLFillTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTextTemplate ../../util/vvFlagUtils".split(" "),
function(A,h,b,d,g,p,n,e,k){Object.defineProperty(h,"__esModule",{value:!0});var l=b.getLogger("esri.views.2d.engine.webgl.mesh.templates.meshTemplateUtils");h.createMeshTemplates=function(m,r,u,v,w,B,C){void 0===C&&(C=!1);if(-1!==u.type.indexOf("3d"))return l.error("3D symbols are not supported with MapView"),m;var y=v.get(u.id);y||l.error("Couldn't find texture resources for symbol: "+u.id+"!");switch(u.type){case d.EsriSymbolTypeKebab.SIMPLE_MARKER:return m.push(n.default.fromSimpleMarker(r,k.getMarkerVVFlags(w),
u,y.spriteMosaicItem,B)),m;case d.EsriSymbolTypeKebab.PICTURE_MARKER:return m.push(n.default.fromPictureMarker(r,k.getMarkerVVFlags(w),u,y.spriteMosaicItem,B)),m;case d.EsriSymbolTypeKebab.SIMPLE_FILL:return m.push(g.default.fromSimpleFill(r,k.getFillVVFlags(w),u,y.spriteMosaicItem,B,C)),u.outline&&(v=v.get(u.outline.id),m.push(p.default.fromSimpleLine(r,k.getLineVVFlags(w,!0),u.outline,v&&v.spriteMosaicItem,B))),m;case d.EsriSymbolTypeKebab.PICTURE_FILL:return m.push(g.default.fromPictureFill(r,
k.getFillVVFlags(w),u,y.spriteMosaicItem,B,C)),u.outline&&(v=v.get(u.outline.id),m.push(p.default.fromSimpleLine(r,k.getLineVVFlags(w,!0),u.outline,v&&v.spriteMosaicItem,B))),m;case d.EsriSymbolTypeKebab.SIMPLE_LINE:return m.push(p.default.fromSimpleLine(r,k.getLineVVFlags(w,!1),u,y.spriteMosaicItem,B)),m;case d.EsriSymbolTypeKebab.TEXT:return m.push(e.default.fromText(r,k.getTextVVFlags(w),u,B,y.glyphMosaicItems)),m;default:return l.error("Unable to create mesh template for unknown symbol type: "+
u.type),m}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper dojo/has ../../../../../../core/Logger ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w){Object.defineProperty(h,"__esModule",{value:!0});var B=
g.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),C=[],y=[];A=function(a){function c(f,q,t,x,z,D,F,G){var E=a.call(this)||this;E.fillColor=x;E.tl=z;E.br=D;E.aux=F;E.isBFS=G;E.geometryType=k.WGLGeometryType.FILL;E.useLibtess=!1;x=d("esri-featurelayer-webgl");E.useLibtess="libtess"===((x||{}).tesselator||"libtess");E.useLibtess&&(E._tesselator=new v.default);E.vvFlags=q;E._materialStore=f;E.materialId=E._materialStore.createSpriteMaterial(t,E.geometryType,q);E._tileClipper=new r.TileClipper(0,
0,0,1,8);E._tileClipper.setExtent(512);return E}b(c,a);c.fromSimpleFill=function(f,q,t,x,z,D){void 0===D&&(D=!1);t=(z=t.color)&&"none"!==t.style&&n.premultiplyAlphaRGBA(z)||0;if(!x)return new c(f,q,null,t,0,0,0,D);var F=x.rect;z=F.x+1;var G=F.y+1,E=F.x+1+x.width,H=F.y+1+x.height;F=m.i1616to32(z,G);var O=m.i1616to32(E,H);z=m.i8888to32(m.nextHighestPowerOfTwo(E-z),m.nextHighestPowerOfTwo(H-G),0,0);return new c(f,q,x,t,F,O,z,D)};c.fromPictureFill=function(f,q,t,x,z,D){void 0===D&&(D=!1);z=e.PICTURE_FILL_COLOR;
var F=x.rect,G=F.x+1+x.width,E=F.y+1+x.height;F=m.i1616to32(F.x+1,F.y+1);G=m.i1616to32(G,E);t=m.i8888to32(m.nextHighestPowerOfTwo(t.width),m.nextHighestPowerOfTwo(t.height),0,0);return new c(f,q,x,z,F,G,t,D)};c.prototype.writeMesh=function(f,q,t,x,z,D,F){C.length=0;if(this.vvFlags&l.WGLVVFlag.COLOR||0!==this.fillColor)if("esriGeometryPolygon"!==t)B.error("Unable to handle geometryType: "+t);else{var G=z.geometry;G=(z=this._isClippingRequired(G))?this._clip(G,!this.useLibtess):G.rings;return this.useLibtess?
this._writeMeshLibtess(f,q,t,x,G,z,D,F):this._writeMeshEarcut(f,q,t,x,G,z,D,F)}};c.prototype._isClippingRequired=function(f){var q=0;for(f=f.rings;q<f.length;q++){var t=f[q],x=t.length;if(!(3>x)){var z=t[0][0],D=t[0][1];if(-8>z||520<z||-8>D||520<D)return!0;for(var F=1;F<x;++F)if(z+=t[F][0],D+=t[F][1],-8>z||520<z||-8>D||520<D)return!0}}return!1};c.prototype._clip=function(f,q){this._tileClipper.reset(3);for(var t=0,x=f.rings;t<x.length;t++){var z=x[t],D=z.length;if(!(3>D)){f=z[0][0];var F=z[0][1];
this._tileClipper.moveTo(f,F);for(var G=1;G<D;++G)f+=z[G][0],F+=z[G][1],this._tileClipper.lineTo(f,F);this._tileClipper.close()}}return this._tileClipper.result(q)};c.prototype._writeMeshLibtess=function(f,q,t,x,z,D,F,G){if(z&&z.length){t=this._materialStore.get(this.materialId);F=[];var E=q.indexVector;q=q.get("geometry");var H=new u(x,this.geometryType,this.materialId),O=this._getOffset(q,t);H.vertexFrom=O;H.indexFrom=E.length;f.push(H);this._tesselator.beginPolygon(C,F);for(f=0;f<z.length;f++){var K=
z[f];if(!(3>K.length)){this._tesselator.beginContour();var L=void 0,T=void 0;D?(L=K[0].x,T=K[0].y):(L=K[0][0],T=K[0][1]);var P=[L,T,0];this._tesselator.addVertex(P,P);for(P=1;P<K.length-1;P++){var Q=void 0,J=void 0;D?(L=K[P].x,T=K[P].y):(Q=K[P][0],J=K[P][1],L+=Q,T+=J);Q=[L,T,0];this._tesselator.addVertex(Q,Q)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(H,q,x,C,t,G);this._writeIndicesLibTess(H,E,O,F)}};c.prototype._writeMeshEarcut=function(f,q,t,x,z,D,F,
G){if(z&&z.length){t=this._materialStore.get(this.materialId);F=q.indexVector;q=q.get("geometry");var E=new u(x,this.geometryType,this.materialId),H=this._getOffset(q,t);E.vertexFrom=H;E.indexFrom=F.length;f.push(E);for(var O=f=0,K=0;K<z.length;K++){var L=z[K],T=O,P=void 0,Q=void 0;D?(P=L[0].x,Q=L[0].y):(P=L[0][0],Q=L[0][1]);C[O++]=P;C[O++]=Q;for(var J=0,R=1;R<L.length;++R){var I=void 0,S=void 0;D?(I=P,S=Q,P=L[R].x,Q=L[R].y,I=P-I,S=Q-S):(I=L[R][0],S=L[R][1],P+=I,Q+=S);J-=I*(Q+Q+S);C[O++]=P;C[O++]=
Q}0<J?(0<T-f&&(this._write(E,F,q,H,x,C,y,f,T,t,G),f=T),y.length=0):0>J?0<T-f?y.push(.5*(T-f)):O=T:O=T}0<O-f&&this._write(E,F,q,H,x,C,y,f,O,t,G);C.length=y.length=0}};c.prototype._write=function(f,q,t,x,z,D,F,G,E,H,O){x=p(D.slice(G,E),F,2);x.length&&(G=this._getOffset(t,H),this._writeVertices(f,t,z,D,F,H,O),this._writeIndices(f,q,G,x))};c.prototype._getOffset=function(f,q){q=q.materialKeyInfo.hasVV()?8:6;return f.length/q};c.prototype._writeVertices=function(f,q,t,x,z,D,F){for(z=0;z<x.length;z+=2){var G=
m.i1616to32(x[z],x[z+1]);q.push(G);q.push(t);q.push(this.fillColor);q.push(this.tl);q.push(this.br);q.push(this.aux);this._writeVV(q,F,D);f.vertexCount++}};c.prototype._writeIndices=function(f,q,t,x){for(var z=0;z<x.length;z+=3)q.push(t+x[z]),q.push(t+x[z+1]),q.push(t+x[z+2]),f.indexCount+=3};c.prototype._writeVerticesLibTess=function(f,q,t,x,z,D){for(var F=0;F<x.length;F+=2){var G=m.i1616to32(x[F],x[F+1]);q.push(G);q.push(t);q.push(this.fillColor);q.push(this.tl);q.push(this.br);q.push(this.aux);
this._writeVV(q,D,z);f.vertexCount++}};c.prototype._writeIndicesLibTess=function(f,q,t,x){for(var z=0;z<x.length;z++)q.push(t+x[z]),f.indexCount++};c.prototype._writeVV=function(f,q,t){t.materialKeyInfo.hasVV()&&(this.isBFS?(f.push(4294967295),f.push(4294967295)):(f.push(q[k.VVType.COLOR]),f.push(q[k.VVType.OPACITY])))};return c}(w.default);h.default=A})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function A(q,t,x){x=x||2;c=q.length/x+(t?2*t.length:0);f=!1;var z=
t&&t.length,D=z?t[0]*x:q.length,F=h(q,0,D,x,!0),G=[];if(!F)return G;var E;if(z)a:{var H=x;z=[];var O;var K=0;for(O=t.length;K<O;K++){var L=t[K]*H;var T=K<O-1?t[K+1]*H:q.length;L=h(q,L,T,H,!1);L===L.next&&(L.steiner=!0);z.push(k(L))}z.sort(p);for(K=0;K<z.length;K++){if(!F){F=null;break a}t=z[K];H=F;if(H=n(t,H))t=w(H,t),b(t,t.next);F=b(F,F.next)}}if(f)return G;if(q.length>80*x){var P=E=q[0];var Q=z=q[1];for(H=x;H<D;H+=x)K=q[H],t=q[H+1],K<P&&(P=K),t<Q&&(Q=t),K>E&&(E=K),t>z&&(z=t);E=Math.max(E-P,z-Q)}d(F,
G,x,P,Q,E);return G}function h(q,t,x,z,D){if(D===0<a(q,t,x,z))for(D=t;D<x;D+=z)var F=B(D,q[D],q[D+1],F);else for(D=x-z;D>=t;D-=z)F=B(D,q[D],q[D+1],F);F&&r(F,F.next)&&(C(F),F=F.next);return F}function b(q,t){if(!q)return q;t||(t=q);var x=0,z=c*c/2;do{var D=!1;if(q.steiner||!r(q,q.next)&&0!==m(q.prev,q,q.next))q=q.next;else{C(q);q=t=q.prev;if(q===q.next)return null;D=!0}if(x++>z)return f=!0,null}while(D||q!==t);return t}function d(q,t,x,z,D,F,G){if(q){if(!G&&F){var E=q,H=E;do null===H.z&&(H.z=e(H.x,
H.y,z,D,F)),H.prevZ=H.prev,H=H.nextZ=H.next;while(H!==E);H.prevZ.nextZ=null;H.prevZ=null;E=H;var O,K,L,T,P=1;do{H=E;var Q=E=null;for(K=0;H;){K++;var J=H;for(O=L=0;O<P&&(L++,J=J.nextZ,J);O++);for(T=P;0<L||0<T&&J;)0===L?(O=J,J=J.nextZ,T--):0!==T&&J?H.z<=J.z?(O=H,H=H.nextZ,L--):(O=J,J=J.nextZ,T--):(O=H,H=H.nextZ,L--),Q?Q.nextZ=O:E=O,O.prevZ=Q,Q=O;H=J}Q.nextZ=null;P*=2}while(1<K)}for(E=q;q.prev!==q.next;){H=q.prev;J=q.next;if(F)a:{Q=q;T=z;var R=D,I=F;K=Q.prev;L=Q;P=Q.next;if(0<=m(K,L,P))Q=!1;else{var S=
K.x>L.x?K.x>P.x?K.x:P.x:L.x>P.x?L.x:P.x,U=K.y>L.y?K.y>P.y?K.y:P.y:L.y>P.y?L.y:P.y;O=e(K.x<L.x?K.x<P.x?K.x:P.x:L.x<P.x?L.x:P.x,K.y<L.y?K.y<P.y?K.y:P.y:L.y<P.y?L.y:P.y,T,R,I);T=e(S,U,T,R,I);for(R=Q.nextZ;R&&R.z<=T;){if(R!==Q.prev&&R!==Q.next&&l(K.x,K.y,L.x,L.y,P.x,P.y,R.x,R.y)&&0<=m(R.prev,R,R.next)){Q=!1;break a}R=R.nextZ}for(R=Q.prevZ;R&&R.z>=O;){if(R!==Q.prev&&R!==Q.next&&l(K.x,K.y,L.x,L.y,P.x,P.y,R.x,R.y)&&0<=m(R.prev,R,R.next)){Q=!1;break a}R=R.prevZ}Q=!0}}else Q=g(q);if(Q)t.push(H.i/x),t.push(q.i/
x),t.push(J.i/x),C(q),E=q=J.next;else{if(f)break;q=J;if(q===E){if(!G)d(b(q),t,x,z,D,F,1);else if(1===G){G=t;E=x;H=q;do J=H.prev,Q=H.next.next,!r(J,Q)&&u(J,H,H.next,Q)&&v(J,Q)&&v(Q,J)&&(G.push(J.i/E),G.push(H.i/E),G.push(Q.i/E),C(H),C(H.next),H=q=Q),H=H.next;while(H!==q);q=H;d(q,t,x,z,D,F,2)}else if(2===G)a:{G=q;do{for(E=G.next.next;E!==G.prev;){if(H=G.i!==E.i){Q=Q=Q=void 0;H=G;J=E;if(Q=H.next.i!==J.i&&H.prev.i!==J.i){b:{Q=H;do{if(Q.i!==H.i&&Q.next.i!==H.i&&Q.i!==J.i&&Q.next.i!==J.i&&u(Q,Q.next,H,
J)){Q=!0;break b}Q=Q.next}while(Q!==H);Q=!1}Q=!Q}if(Q=Q&&v(H,J)&&v(J,H)){Q=H;K=!1;L=(H.x+J.x)/2;J=(H.y+J.y)/2;do Q.y>J!==Q.next.y>J&&L<(Q.next.x-Q.x)*(J-Q.y)/(Q.next.y-Q.y)+Q.x&&(K=!K),Q=Q.next;while(Q!==H);Q=K}H=Q}if(H){q=w(G,E);G=b(G,G.next);q=b(q,q.next);d(G,t,x,z,D,F);d(q,t,x,z,D,F);break a}E=E.next}G=G.next}while(G!==q)}break}}}}}function g(q){var t=q.prev,x=q.next;if(0<=m(t,q,x))return!1;for(var z=q.next.next,D=0;z!==q.prev;){if(l(t.x,t.y,q.x,q.y,x.x,x.y,z.x,z.y)&&0<=m(z.prev,z,z.next))return!1;
z=z.next;if(D++>c)return f=!0,!1}return!0}function p(q,t){return q.x-t.x}function n(q,t){var x=t,z=q.x,D=q.y,F=-Infinity;do{if(!x)return null;if(D<=x.y&&D>=x.next.y){var G=x.x+(D-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(G<=z&&G>F){F=G;if(G===z){if(D===x.y)return x;if(D===x.next.y)return x.next}var E=x.x<x.next.x?x:x.next}}x=x.next}while(x!==t);if(!E)return null;if(z===F)return E.prev;t=E;G=E.x;var H=E.y,O=Infinity;for(x=E.next;x!==t;){if(z>=x.x&&x.x>=G&&l(D<H?z:F,D,G,H,D<H?F:z,D,x.x,x.y)){var K=Math.abs(D-
x.y)/(z-x.x);(K<O||K===O&&x.x>E.x)&&v(x,q)&&(E=x,O=K)}x=x.next}return E}function e(q,t,x,z,D){q=32767*(q-x)/D;t=32767*(t-z)/D;q=(q|q<<8)&16711935;q=(q|q<<4)&252645135;q=(q|q<<2)&858993459;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;return(q|q<<1)&1431655765|((t|t<<1)&1431655765)<<1}function k(q){var t=q,x=q;do t.x<x.x&&(x=t),t=t.next;while(t!==q);return x}function l(q,t,x,z,D,F,G,E){return 0<=(D-G)*(t-E)-(q-G)*(F-E)&&0<=(q-G)*(z-E)-(x-G)*(t-E)&&0<=(x-G)*(F-E)-(D-G)*(z-E)}function m(q,
t,x){return(t.y-q.y)*(x.x-t.x)-(t.x-q.x)*(x.y-t.y)}function r(q,t){return q.x===t.x&&q.y===t.y}function u(q,t,x,z){return r(q,t)&&r(x,z)||r(q,z)&&r(x,t)?!0:0<m(q,t,x)!==0<m(q,t,z)&&0<m(x,z,q)!==0<m(x,z,t)}function v(q,t){return 0>m(q.prev,q,q.next)?0<=m(q,t,q.next)&&0<=m(q,q.prev,t):0>m(q,t,q.prev)||0>m(q,q.next,t)}function w(q,t){var x=new y(q.i,q.x,q.y),z=new y(t.i,t.x,t.y),D=q.next,F=t.prev;q.next=t;t.prev=q;x.next=D;D.prev=x;z.next=x;x.prev=z;F.next=z;z.prev=F;return z}function B(q,t,x,z){q=new y(q,
t,x);z?(q.next=z.next,q.prev=z,z.next.prev=q,z.next=q):(q.prev=q,q.next=q);return q}function C(q){q.next.prev=q.prev;q.prev.next=q.next;q.prevZ&&(q.prevZ.nextZ=q.nextZ);q.nextZ&&(q.nextZ.prevZ=q.prevZ)}function y(q,t,x){this.i=q;this.x=t;this.y=x;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function a(q,t,x,z){for(var D=0,F=x-z;t<x;t+=z)D+=(q[F]-q[t])*(q[t+1]+q[F+1]),F=t;return D}var c,f;A.deviation=function(q,t,x,z){var D=t&&t.length,F=Math.abs(a(q,0,D?t[0]*x:q.length,x));
if(D){D=0;for(var G=t.length;D<G;D++)F-=Math.abs(a(q,t[D]*x,D<G-1?t[D+1]*x:q.length,x))}for(D=t=0;D<z.length;D+=3){G=z[D]*x;var E=z[D+1]*x,H=z[D+2]*x;t+=Math.abs((q[G]-q[H])*(q[E+1]-q[G+1])-(q[G]-q[E])*(q[H+1]-q[G+1]))}return 0===F&&0===t?0:Math.abs((t-F)/F)};A.flatten=function(q){for(var t=q[0][0].length,x={vertices:[],holes:[],dimensions:t},z=0,D=0;D<q.length;D++){for(var F=0;F<q[D].length;F++)for(var G=0;G<t;G++)x.vertices.push(q[D][F][G]);0<D&&(z+=q[D-1].length,x.holes.push(z))}return x};return A})},
"esri/layers/vectorTiles/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});var g=function(){return function(n,e,k){this.ratio=n;this.x=e;this.y=k}}();A=function(){function n(e,k,l,m,r){void 0===m&&(m=8);void 0===r&&(r=8);this.lines=[];this.starts=[];this.pixelRatio=m;this.pixelMargin=r;this.tileSize=512*m;this.dz=e;this.yPos=k;this.xPos=l}n.prototype.setExtent=function(e){this.finalRatio=
this.tileSize/e*(1<<this.dz);var k=this.pixelRatio*this.pixelMargin;k/=this.finalRatio;e>>=this.dz;k>e&&(k=e);this.margin=k;this.xmin=e*this.xPos-k;this.ymin=e*this.yPos-k;this.xmax=this.xmin+e+2*k;this.ymax=this.ymin+e+2*k};n.prototype.reset=function(e){this.type=e;this.lines=[];this.starts=[];this.line=null;this.start=0};n.prototype.moveTo=function(e,k){this._pushLine();this._prevIsIn=this._isIn(e,k);this._moveTo(e,k,this._prevIsIn);this._prevPt=new b.Point(e,k);this._firstPt=new b.Point(e,k);this._dist=
0};n.prototype.lineTo=function(e,k){var l=this._isIn(e,k),m=new b.Point(e,k),r=b.Point.distance(this._prevPt,m);if(l)if(this._prevIsIn)this._lineTo(e,k,!0);else{var u=this._prevPt;var v=m;e=this._intersect(v,u);this.start=this._dist+r*(1-this._r);this._lineTo(e.x,e.y,!0);this._lineTo(v.x,v.y,!0)}else if(this._prevIsIn)v=this._prevPt,u=m,e=this._intersect(v,u),this._lineTo(e.x,e.y,!0),this._lineTo(u.x,u.y,!1);else{var w=this._prevPt;if(!(w.x<=this.xmin&&m.x<=this.xmin||w.x>=this.xmax&&m.x>=this.xmax||
w.y<=this.ymin&&m.y<=this.ymin||w.y>=this.ymax&&m.y>=this.ymax)){e=[];if(w.x<this.xmin&&m.x>this.xmin||w.x>this.xmin&&m.x<this.xmin){k=(this.xmin-w.x)/(m.x-w.x);var B=w.y+k*(m.y-w.y);B<=this.ymin?v=!1:B>=this.ymax?v=!0:e.push(new g(k,this.xmin,B))}if(w.x<this.xmax&&m.x>this.xmax||w.x>this.xmax&&m.x<this.xmax)k=(this.xmax-w.x)/(m.x-w.x),B=w.y+k*(m.y-w.y),B<=this.ymin?v=!1:B>=this.ymax?v=!0:e.push(new g(k,this.xmax,B));if(w.y<this.ymin&&m.y>this.ymin||w.y>this.ymin&&m.y<this.ymin)k=(this.ymin-w.y)/
(m.y-w.y),B=w.x+k*(m.x-w.x),B<=this.xmin?u=!1:B>=this.xmax?u=!0:e.push(new g(k,B,this.ymin));if(w.y<this.ymax&&m.y>this.ymax||w.y>this.ymax&&m.y<this.ymax)k=(this.ymax-w.y)/(m.y-w.y),B=w.x+k*(m.x-w.x),B<=this.xmin?u=!1:B>=this.xmax?u=!0:e.push(new g(k,B,this.ymax));if(0===e.length)u?v?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):v?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<e.length&&e[0].ratio>e[1].ratio)this.start=this._dist+r*
e[1].ratio,this._lineTo(e[1].x,e[1].y,!0),this._lineTo(e[0].x,e[0].y,!0);else for(this.start=this._dist+r*e[0].ratio,u=0;u<e.length;u++)this._lineTo(e[u].x,e[u].y,!0)}this._lineTo(m.x,m.y,!1)}this._dist+=r;this._prevIsIn=l;this._prevPt=m};n.prototype.close=function(){if(2<this.line.length){var e=this._firstPt,k=this._prevPt;e.x===k.x&&e.y===k.y||this.lineTo(e.x,e.y);e=this.line;for(k=e.length;4<=k;)if(e[0].x===e[1].x&&e[0].x===e[k-2].x||e[0].y===e[1].y&&e[0].y===e[k-2].y)e.pop(),e[0].x=e[k-2].x,e[0].y=
e[k-2].y,--k;else break}};n.prototype.result=function(e){void 0===e&&(e=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&e&&p.simplify(this.tileSize,this.margin*this.finalRatio,this.lines);return this.lines};n.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var e=this.lines,k=e.length;if(0===k)return null;for(var l=[],m=0;m<k;m++)l.push({line:e[m],start:this.starts[m]||0});return l};n.prototype._isIn=function(e,k){return e>=
this.xmin&&e<=this.xmax&&k>=this.ymin&&k<=this.ymax};n.prototype._intersect=function(e,k){if(k.x>=this.xmin&&k.x<=this.xmax){var l=k.y<=this.ymin?this.ymin:this.ymax;var m=(l-e.y)/(k.y-e.y);var r=e.x+m*(k.x-e.x)}else if(k.y>=this.ymin&&k.y<=this.ymax)r=k.x<=this.xmin?this.xmin:this.xmax,m=(r-e.x)/(k.x-e.x),l=e.y+m*(k.y-e.y);else{l=k.y<=this.ymin?this.ymin:this.ymax;r=k.x<=this.xmin?this.xmin:this.xmax;var u=(r-e.x)/(k.x-e.x),v=(l-e.y)/(k.y-e.y);u<v?(m=u,l=e.y+u*(k.y-e.y)):(m=v,r=e.x+v*(k.x-e.x))}this._r=
m;return new b.Point(r,l)};n.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};n.prototype._moveTo=function(e,k,l){3!==this.type?l&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),k=Math.round((k-
(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(e,k))):(l||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),k<this.ymin&&(k=this.ymin),k>this.ymax&&(k=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),k=Math.round((k-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(e,k)),this._is_v=this._is_h=!1)};n.prototype._lineTo=function(e,k,l){if(3!==this.type)if(l){e=Math.round((e-(this.xmin+this.margin))*this.finalRatio);k=Math.round((k-(this.ymin+
this.margin))*this.finalRatio);if(0<this.line.length&&(l=this.line[this.line.length-1],l.equals(e,k)))return;this.line.push(new b.Point(e,k))}else this.line&&0<this.line.length&&this._pushLine();else if(l||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),k<this.ymin&&(k=this.ymin),k>this.ymax&&(k=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),k=Math.round((k-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){l=this.line[this.line.length-1];var m=
l.x===e,r=l.y===k;m&&r||(this._is_h&&m?(l.x=e,l.y=k,l=this.line[this.line.length-2],l.x===e&&l.y===k?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(l=this.line[this.line.length-2],this._is_h=l.x===e,this._is_v=l.y===k)):(this._is_h=l.x===e,this._is_v=l.y===k)):this._is_v&&r?(l.x=e,l.y=k,l=this.line[this.line.length-2],l.x===e&&l.y===k?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(l=this.line[this.line.length-2],this._is_h=l.x===e,this._is_v=l.y===k)):(this._is_h=l.x===
e,this._is_v=l.y===k)):(this.line.push(new b.Point(e,k)),this._is_h=m,this._is_v=r))}else this.line.push(new b.Point(e,k))};return n}();h.TileClipper=A;A=function(){function n(){}n.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e};n.prototype.reset=function(e){this.type=e;this.lines=[];this.line=null};n.prototype.moveTo=function(e,k){this.line&&this.lines.push(this.line);this.line=[];var l=this._ratio;this.line.push(new b.Point(e*l,k*l))};n.prototype.lineTo=function(e,k){var l=this._ratio;
this.line.push(new b.Point(e*l,k*l))};n.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])};n.prototype.result=function(){this.line&&this.lines.push(this.line);return 0===this.lines.length?null:this.lines};return n}();h.SimpleBuilder=A;var p=function(){function n(){}n.simplify=function(e,k,l){if(l){var m=-k,r=e+k,u=-k,v=e+k;e=[];k=[];for(var w=l.length,B=0;B<w;++B){var C=l[B];if(C&&!(2>C.length))for(var y=C[0],a=void 0,c=C.length,f=1;f<c;++f)a=C[f],y.x===a.x&&
(y.x<=m&&(y.y>a.y?(e.push(B),e.push(f),e.push(0),e.push(-1)):(k.push(B),k.push(f),k.push(0),k.push(-1))),y.x>=r&&(y.y<a.y?(e.push(B),e.push(f),e.push(1),e.push(-1)):(k.push(B),k.push(f),k.push(1),k.push(-1)))),y.y===a.y&&(y.y<=u&&(y.x<a.x?(e.push(B),e.push(f),e.push(2),e.push(-1)):(k.push(B),k.push(f),k.push(2),k.push(-1))),y.y>=v&&(y.x>a.x?(e.push(B),e.push(f),e.push(3),e.push(-1)):(k.push(B),k.push(f),k.push(3),k.push(-1)))),y=a}0!==e.length&&0!==k.length&&(n.fillParent(l,k,e),n.fillParent(l,e,
k),m=[],n.calcDeltas(m,k,e),n.calcDeltas(m,e,k),n.addDeltas(m,l))}};n.fillParent=function(e,k,l){for(var m=l.length,r=k.length,u=0;u<r;u+=4){var v=k[u],w=k[u+1],B=k[u+2],C=e[v][w-1];v=e[v][w];w=8092;for(var y=-1,a=0;a<m;a+=4)if(l[a+2]===B){var c=l[a],f=l[a+1],q=e[c][f-1];c=e[c][f];switch(B){case 0:case 1:d.between(C.y,q.y,c.y)&&d.between(v.y,q.y,c.y)&&(q=Math.abs(c.y-q.y),q<w&&(w=q,y=a));break;case 2:case 3:d.between(C.x,q.x,c.x)&&d.between(v.x,q.x,c.x)&&(q=Math.abs(c.x-q.x),q<w&&(w=q,y=a))}}k[u+
3]=y}};n.calcDeltas=function(e,k,l){for(var m=k.length,r=0;r<m;r+=4){var u=n.calcDelta(r,k,l,[]);e.push(k[r]);e.push(k[r+1]);e.push(k[r+2]);e.push(u)}};n.calcDelta=function(e,k,l,m){e=k[e+3];if(-1===e)return 0;var r=m.length;if(1<r&&m[r-2]===e)return 0;m.push(e);return n.calcDelta(e,l,k,m)+1};n.addDeltas=function(e,k){for(var l=e.length,m=0,r=0;r<l;r+=4){var u=e[r+3];u>m&&(m=u)}for(r=0;r<l;r+=4){var v=k[e[r]],w=e[r+1];u=m-e[r+3];switch(e[r+2]){case 0:v[w-1].x-=u;v[w].x-=u;1===w&&(v[v.length-1].x-=
u);w===v.length-1&&(v[0].x-=u);break;case 1:v[w-1].x+=u;v[w].x+=u;1===w&&(v[v.length-1].x+=u);w===v.length-1&&(v[0].x+=u);break;case 2:v[w-1].y-=u;v[w].y-=u;1===w&&(v[v.length-1].y-=u);w===v.length-1&&(v[0].y-=u);break;case 3:v[w-1].y+=u,v[w].y+=u,1===w&&(v[v.length-1].y+=u),w===v.length-1&&(v[0].y+=u)}}};return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function b(d,
g){this.x=d;this.y=g}b.prototype.clone=function(){return new b(this.x,this.y)};b.prototype.equals=function(d,g){return d===this.x&&g===this.y};b.prototype.isEqual=function(d){return d.x===this.x&&d.y===this.y};b.prototype.setCoords=function(d,g){this.x=d;this.y=g};b.prototype.normalize=function(){var d=this.x,g=this.y;d=Math.sqrt(d*d+g*g);this.x/=d;this.y/=d};b.prototype.rightPerpendicular=function(){var d=this.x;this.x=this.y;this.y=-d};b.prototype.move=function(d,g){this.x+=d;this.y+=g};b.prototype.assign=
function(d){this.x=d.x;this.y=d.y};b.prototype.assignAdd=function(d,g){this.x=d.x+g.x;this.y=d.y+g.y};b.prototype.assignSub=function(d,g){this.x=d.x-g.x;this.y=d.y-g.y};b.prototype.rotate=function(d,g){var p=this.x,n=this.y;this.x=p*d-n*g;this.y=p*g+n*d};b.prototype.scale=function(d){this.x*=d;this.y*=d};b.prototype.length=function(){var d=this.x,g=this.y;return Math.sqrt(d*d+g*g)};b.distance=function(d,g){var p=g.x-d.x;d=g.y-d.y;return Math.sqrt(p*p+d*d)};b.add=function(d,g){return new b(d.x+g.x,
d.y+g.y)};b.sub=function(d,g){return new b(d.x-g.x,d.y-g.y)};return b}();h.Point=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});var g=b.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");A=function(){function p(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,
-1,-1];this.glu=new d.GluTesselator;this.glu.gluTessCallback(d.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(d.gluEnum.GLU_TESS_EDGE_FLAG,
this._edgeCallback.bind(this));this.glu.gluTessProperty(d.gluEnum.GLU_TESS_WINDING_RULE,d.windingRule.GLU_TESS_WINDING_ODD)}p.prototype.beginPolygon=function(n,e){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(n);this._indices=e};p.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};p.prototype.beginContour=function(){this.glu.gluTessBeginContour()};p.prototype.endContour=function(){this.glu.gluTessEndContour()};
p.prototype.addVertex=function(n,e){this.glu.gluTessVertex(n,e)};p.prototype._vertexCallback=function(n,e){e[e.length]=n[0];e[e.length]=n[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(n=0;3>n;n++)-1===this._triangleIndices[n]&&(this._triangleIndices[n]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[n];this._currentVertexIndex=0}else this._currentVertexIndex++};p.prototype._begincallback=function(n){this._triangleIndices[0]=
-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};p.prototype._endcallback=function(){this._currentVertexIndex=0};p.prototype._errorcallback=function(n){g.error("Encountered error during tesselation: "+n)};p.prototype._combinecallback=function(n,e,k){return[n[0],n[1],n[2]]};p.prototype._edgeCallback=function(n){};return p}();h.default=A})},"esri/layers/vectorTiles/core/libs/libtess/libtess":function(){define([],function(){var A={DEBUG:!1,assert:function(h,b){if(A.DEBUG&&
!h)throw Error("Assertion failed"+(b?": "+b:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,
GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,
GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};A.geom.vertEq=function(h,b){return h.s===b.s&&h.t===b.t};A.geom.vertLeq=function(h,b){return h.s<b.s||h.s===b.s&&h.t<=b.t};A.geom.edgeEval=function(h,b,d){A.assert(A.geom.vertLeq(h,b)&&A.geom.vertLeq(b,d));var g=b.s-h.s,p=d.s-b.s;return 0<g+p?g<p?b.t-h.t+g/(g+p)*(h.t-d.t):b.t-d.t+p/(g+p)*(d.t-h.t):0};A.geom.edgeSign=function(h,b,d){A.assert(A.geom.vertLeq(h,b)&&A.geom.vertLeq(b,d));var g=b.s-h.s,p=d.s-b.s;return 0<g+p?(b.t-d.t)*g+(b.t-h.t)*
p:0};A.geom.transLeq=function(h,b){return h.t<b.t||h.t===b.t&&h.s<=b.s};A.geom.transEval=function(h,b,d){A.assert(A.geom.transLeq(h,b)&&A.geom.transLeq(b,d));var g=b.t-h.t,p=d.t-b.t;return 0<g+p?g<p?b.s-h.s+g/(g+p)*(h.s-d.s):b.s-d.s+p/(g+p)*(d.s-h.s):0};A.geom.transSign=function(h,b,d){A.assert(A.geom.transLeq(h,b)&&A.geom.transLeq(b,d));var g=b.t-h.t,p=d.t-b.t;return 0<g+p?(b.s-d.s)*g+(b.s-h.s)*p:0};A.geom.edgeGoesLeft=function(h){return A.geom.vertLeq(h.dst(),h.org)};A.geom.edgeGoesRight=function(h){return A.geom.vertLeq(h.org,
h.dst())};A.geom.vertL1dist=function(h,b){return Math.abs(h.s-b.s)+Math.abs(h.t-b.t)};A.geom.vertCCW=function(h,b,d){return 0<=h.s*(b.t-d.t)+b.s*(d.t-h.t)+d.s*(h.t-b.t)};A.geom.interpolate_=function(h,b,d,g){h=0>h?0:h;d=0>d?0:d;return h<=d?0===d?(b+g)/2:b+h/(h+d)*(g-b):g+d/(h+d)*(b-g)};A.geom.edgeIntersect=function(h,b,d,g,p){if(!A.geom.vertLeq(h,b)){var n=h;h=b;b=n}A.geom.vertLeq(d,g)||(n=d,d=g,g=n);A.geom.vertLeq(h,d)||(n=h,h=d,d=n,n=b,b=g,g=n);if(A.geom.vertLeq(d,b))if(A.geom.vertLeq(b,g)){n=A.geom.edgeEval(h,
d,b);var e=A.geom.edgeEval(d,b,g);0>n+e&&(n=-n,e=-e);p.s=A.geom.interpolate_(n,d.s,e,b.s)}else n=A.geom.edgeSign(h,d,b),e=-A.geom.edgeSign(h,g,b),0>n+e&&(n=-n,e=-e),p.s=A.geom.interpolate_(n,d.s,e,g.s);else p.s=(d.s+b.s)/2;A.geom.transLeq(h,b)||(n=h,h=b,b=n);A.geom.transLeq(d,g)||(n=d,d=g,g=n);A.geom.transLeq(h,d)||(n=h,h=d,d=n,n=b,b=g,g=n);A.geom.transLeq(d,b)?A.geom.transLeq(b,g)?(n=A.geom.transEval(h,d,b),e=A.geom.transEval(d,b,g),0>n+e&&(n=-n,e=-e),p.t=A.geom.interpolate_(n,d.t,e,b.t)):(n=A.geom.transSign(h,
d,b),e=-A.geom.transSign(h,g,b),0>n+e&&(n=-n,e=-e),p.t=A.geom.interpolate_(n,d.t,e,g.t)):p.t=(d.t+b.t)/2};A.mesh={};A.mesh.makeEdge=function(h){var b=A.mesh.makeEdgePair_(h.eHead);A.mesh.makeVertex_(b,h.vHead);A.mesh.makeVertex_(b.sym,h.vHead);A.mesh.makeFace_(b,h.fHead);return b};A.mesh.meshSplice=function(h,b){var d=!1,g=!1;h!==b&&(b.org!==h.org&&(g=!0,A.mesh.killVertex_(b.org,h.org)),b.lFace!==h.lFace&&(d=!0,A.mesh.killFace_(b.lFace,h.lFace)),A.mesh.splice_(b,h),g||(A.mesh.makeVertex_(b,h.org),
h.org.anEdge=h),d||(A.mesh.makeFace_(b,h.lFace),h.lFace.anEdge=h))};A.mesh.deleteEdge=function(h){var b=h.sym,d=!1;h.lFace!==h.rFace()&&(d=!0,A.mesh.killFace_(h.lFace,h.rFace()));h.oNext===h?A.mesh.killVertex_(h.org,null):(h.rFace().anEdge=h.oPrev(),h.org.anEdge=h.oNext,A.mesh.splice_(h,h.oPrev()),d||A.mesh.makeFace_(h,h.lFace));b.oNext===b?(A.mesh.killVertex_(b.org,null),A.mesh.killFace_(b.lFace,null)):(h.lFace.anEdge=b.oPrev(),b.org.anEdge=b.oNext,A.mesh.splice_(b,b.oPrev()));A.mesh.killEdge_(h)};
A.mesh.addEdgeVertex=function(h){var b=A.mesh.makeEdgePair_(h),d=b.sym;A.mesh.splice_(b,h.lNext);b.org=h.dst();A.mesh.makeVertex_(d,b.org);b.lFace=d.lFace=h.lFace;return b};A.mesh.splitEdge=function(h){var b=A.mesh.addEdgeVertex(h).sym;A.mesh.splice_(h.sym,h.sym.oPrev());A.mesh.splice_(h.sym,b);h.sym.org=b.org;b.dst().anEdge=b.sym;b.sym.lFace=h.rFace();b.winding=h.winding;b.sym.winding=h.sym.winding;return b};A.mesh.connect=function(h,b){var d=!1,g=A.mesh.makeEdgePair_(h),p=g.sym;b.lFace!==h.lFace&&
(d=!0,A.mesh.killFace_(b.lFace,h.lFace));A.mesh.splice_(g,h.lNext);A.mesh.splice_(p,b);g.org=h.dst();p.org=b.org;g.lFace=p.lFace=h.lFace;h.lFace.anEdge=p;d||A.mesh.makeFace_(g,h.lFace);return g};A.mesh.zapFace=function(h){var b=h.anEdge,d=b.lNext;do{var g=d;d=g.lNext;g.lFace=null;if(null===g.rFace()){g.oNext===g?A.mesh.killVertex_(g.org,null):(g.org.anEdge=g.oNext,A.mesh.splice_(g,g.oPrev()));var p=g.sym;p.oNext===p?A.mesh.killVertex_(p.org,null):(p.org.anEdge=p.oNext,A.mesh.splice_(p,p.oPrev()));
A.mesh.killEdge_(g)}}while(g!==b);b=h.prev;h=h.next;h.prev=b;b.next=h};A.mesh.meshUnion=function(h,b){var d=h.fHead,g=h.vHead,p=h.eHead,n=b.fHead,e=b.vHead;b=b.eHead;n.next!==n&&(d.prev.next=n.next,n.next.prev=d.prev,n.prev.next=d,d.prev=n.prev);e.next!==e&&(g.prev.next=e.next,e.next.prev=g.prev,e.prev.next=g,g.prev=e.prev);b.next!==b&&(p.sym.next.sym.next=b.next,b.next.sym.next=p.sym.next,b.sym.next.sym.next=p,p.sym.next=b.sym.next);return h};A.mesh.deleteMesh=function(h){};A.mesh.makeEdgePair_=
function(h){var b=new A.GluHalfEdge,d=new A.GluHalfEdge,g=h.sym.next;d.next=g;g.sym.next=b;b.next=h;h.sym.next=d;b.sym=d;b.oNext=b;b.lNext=d;d.sym=b;d.oNext=d;return d.lNext=b};A.mesh.splice_=function(h,b){var d=h.oNext,g=b.oNext;d.sym.lNext=b;g.sym.lNext=h;h.oNext=g;b.oNext=d};A.mesh.makeVertex_=function(h,b){var d=b.prev,g=new A.GluVertex(b,d);d.next=g;b.prev=g;b=g.anEdge=h;do b.org=g,b=b.oNext;while(b!==h)};A.mesh.makeFace_=function(h,b){var d=b.prev,g=new A.GluFace(b,d);d.next=g;b.prev=g;g.anEdge=
h;g.inside=b.inside;b=h;do b.lFace=g,b=b.lNext;while(b!==h)};A.mesh.killEdge_=function(h){var b=h.next;h=h.sym.next;b.sym.next=h;h.sym.next=b};A.mesh.killVertex_=function(h,b){var d=h.anEdge,g=d;do g.org=b,g=g.oNext;while(g!==d);b=h.prev;h=h.next;h.prev=b;b.next=h};A.mesh.killFace_=function(h,b){var d=h.anEdge,g=d;do g.lFace=b,g=g.lNext;while(g!==d);b=h.prev;h=h.next;h.prev=b;b.next=h};A.normal={};A.normal.S_UNIT_X_=1;A.normal.S_UNIT_Y_=0;A.normal.projectPolygon=function(h,b,d,g){var p=!1,n=[b,d,
g];0===b&&0===d&&0===g&&(A.normal.computeNormal_(h,n),p=!0);d=A.normal.longAxis_(n);b=h.mesh.vHead;if(A.TRUE_PROJECT){A.normal.normalize_(n);g=[0,0,0];var e=[0,0,0];g[d]=0;g[(d+1)%3]=A.normal.S_UNIT_X_;g[(d+2)%3]=A.normal.S_UNIT_Y_;d=A.normal.dot_(g,n);g[0]-=d*n[0];g[1]-=d*n[1];g[2]-=d*n[2];A.normal.normalize_(g);e[0]=n[1]*g[2]-n[2]*g[1];e[1]=n[2]*g[0]-n[0]*g[2];e[2]=n[0]*g[1]-n[1]*g[0];A.normal.normalize_(e);for(n=b.next;n!==b;n=n.next)n.s=A.normal.dot_(n.coords,g),n.t=A.normal.dot_(n.coords,e)}else for(g=
(d+1)%3,e=(d+2)%3,d=0<n[d]?1:-1,n=b.next;n!==b;n=n.next)n.s=n.coords[g],n.t=d*n.coords[e];p&&A.normal.checkOrientation_(h)};A.normal.dot_=function(h,b){return h[0]*b[0]+h[1]*b[1]+h[2]*b[2]};A.normal.normalize_=function(h){var b=h[0]*h[0]+h[1]*h[1]+h[2]*h[2];A.assert(0<b);b=Math.sqrt(b);h[0]/=b;h[1]/=b;h[2]/=b};A.normal.longAxis_=function(h){var b=0;Math.abs(h[1])>Math.abs(h[0])&&(b=1);Math.abs(h[2])>Math.abs(h[b])&&(b=2);return b};A.normal.computeNormal_=function(h,b){var d=[-2*A.GLU_TESS_MAX_COORD,
-2*A.GLU_TESS_MAX_COORD,-2*A.GLU_TESS_MAX_COORD],g=[2*A.GLU_TESS_MAX_COORD,2*A.GLU_TESS_MAX_COORD,2*A.GLU_TESS_MAX_COORD],p=[],n=[],e;h=h.mesh.vHead;for(e=h.next;e!==h;e=e.next)for(var k=0;3>k;++k){var l=e.coords[k];l<g[k]&&(g[k]=l,n[k]=e);l>d[k]&&(d[k]=l,p[k]=e)}e=0;d[1]-g[1]>d[0]-g[0]&&(e=1);d[2]-g[2]>d[e]-g[e]&&(e=2);if(g[e]>=d[e])b[0]=0,b[1]=0,b[2]=1;else{d=0;g=n[e];p=p[e];n=[0,0,0];g=[g.coords[0]-p.coords[0],g.coords[1]-p.coords[1],g.coords[2]-p.coords[2]];k=[0,0,0];for(e=h.next;e!==h;e=e.next)k[0]=
e.coords[0]-p.coords[0],k[1]=e.coords[1]-p.coords[1],k[2]=e.coords[2]-p.coords[2],n[0]=g[1]*k[2]-g[2]*k[1],n[1]=g[2]*k[0]-g[0]*k[2],n[2]=g[0]*k[1]-g[1]*k[0],l=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],l>d&&(d=l,b[0]=n[0],b[1]=n[1],b[2]=n[2]);0>=d&&(b[0]=b[1]=b[2]=0,b[A.normal.longAxis_(g)]=1)}};A.normal.checkOrientation_=function(h){for(var b=0,d=h.mesh.fHead,g=d.next;g!==d;g=g.next){var p=g.anEdge;if(!(0>=p.winding)){do b+=(p.org.s-p.dst().s)*(p.org.t+p.dst().t),p=p.lNext;while(p!==g.anEdge)}}if(0>b)for(h=h.mesh.vHead,
b=h.next;b!==h;b=b.next)b.t=-b.t};A.render={};A.render.renderMesh=function(h,b,d){for(var g=!1,p=-1,n=b.fHead.prev;n!==b.fHead;n=n.prev)if(n.inside){g||(h.callBeginCallback(A.primitiveType.GL_TRIANGLES),g=!0);var e=n.anEdge;A.assert(e.lNext.lNext.lNext===e,"renderMesh called with non-triangulated mesh");do{if(d){var k=e.rFace().inside?0:1;p!==k&&(p=k,h.callEdgeFlagCallback(!!p))}h.callVertexCallback(e.org.data);e=e.lNext}while(e!==n.anEdge)}g&&h.callEndCallback()};A.render.renderBoundary=function(h,
b){for(var d=b.fHead.next;d!==b.fHead;d=d.next)if(d.inside){h.callBeginCallback(A.primitiveType.GL_LINE_LOOP);var g=d.anEdge;do h.callVertexCallback(g.org.data),g=g.lNext;while(g!==d.anEdge);h.callEndCallback()}};A.sweep={};A.sweep.SENTINEL_COORD_=4*A.GLU_TESS_MAX_COORD;A.sweep.TOLERANCE_NONZERO_=!1;A.sweep.computeInterior=function(h){h.fatalError=!1;A.sweep.removeDegenerateEdges_(h);A.sweep.initPriorityQ_(h);A.sweep.initEdgeDict_(h);for(var b;null!==(b=h.pq.extractMin());){for(;;){var d=h.pq.minimum();
if(null===d||!A.geom.vertEq(d,b))break;d=h.pq.extractMin();A.sweep.spliceMergeVertices_(h,b.anEdge,d.anEdge)}A.sweep.sweepEvent_(h,b)}b=h.dict.getMin().getKey();h.event=b.eUp.org;A.sweep.doneEdgeDict_(h);A.sweep.donePriorityQ_(h);A.sweep.removeDegenerateFaces_(h.mesh);h.mesh.checkMesh()};A.sweep.addWinding_=function(h,b){h.winding+=b.winding;h.sym.winding+=b.sym.winding};A.sweep.edgeLeq_=function(h,b,d){h=h.event;b=b.eUp;d=d.eUp;if(b.dst()===h)return d.dst()===h?A.geom.vertLeq(b.org,d.org)?0>=A.geom.edgeSign(d.dst(),
b.org,d.org):0<=A.geom.edgeSign(b.dst(),d.org,b.org):0>=A.geom.edgeSign(d.dst(),h,d.org);if(d.dst()===h)return 0<=A.geom.edgeSign(b.dst(),h,b.org);b=A.geom.edgeEval(b.dst(),h,b.org);h=A.geom.edgeEval(d.dst(),h,d.org);return b>=h};A.sweep.deleteRegion_=function(h,b){b.fixUpperEdge&&A.assert(0===b.eUp.winding);b.eUp.activeRegion=null;h.dict.deleteNode(b.nodeUp);b.nodeUp=null};A.sweep.fixUpperEdge_=function(h,b){A.assert(h.fixUpperEdge);A.mesh.deleteEdge(h.eUp);h.fixUpperEdge=!1;h.eUp=b;b.activeRegion=
h};A.sweep.topLeftRegion_=function(h){var b=h.eUp.org;do h=h.regionAbove();while(h.eUp.org===b);h.fixUpperEdge&&(b=A.mesh.connect(h.regionBelow().eUp.sym,h.eUp.lNext),A.sweep.fixUpperEdge_(h,b),h=h.regionAbove());return h};A.sweep.topRightRegion_=function(h){var b=h.eUp.dst();do h=h.regionAbove();while(h.eUp.dst()===b);return h};A.sweep.addRegionBelow_=function(h,b,d){var g=new A.ActiveRegion;g.eUp=d;g.nodeUp=h.dict.insertBefore(b.nodeUp,g);return d.activeRegion=g};A.sweep.isWindingInside_=function(h,
b){switch(h.windingRule){case A.windingRule.GLU_TESS_WINDING_ODD:return 0!==(b&1);case A.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==b;case A.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<b;case A.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>b;case A.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=b||-2>=b}A.assert(!1);return!1};A.sweep.computeWinding_=function(h,b){b.windingNumber=b.regionAbove().windingNumber+b.eUp.winding;b.inside=A.sweep.isWindingInside_(h,b.windingNumber)};A.sweep.finishRegion_=
function(h,b){var d=b.eUp,g=d.lFace;g.inside=b.inside;g.anEdge=d;A.sweep.deleteRegion_(h,b)};A.sweep.finishLeftRegions_=function(h,b,d){var g=b;for(b=b.eUp;g!==d;){g.fixUpperEdge=!1;var p=g.regionBelow(),n=p.eUp;if(n.org!==b.org){if(!p.fixUpperEdge){A.sweep.finishRegion_(h,g);break}n=A.mesh.connect(b.lPrev(),n.sym);A.sweep.fixUpperEdge_(p,n)}b.oNext!==n&&(A.mesh.meshSplice(n.oPrev(),n),A.mesh.meshSplice(b,n));A.sweep.finishRegion_(h,g);b=p.eUp;g=p}return b};A.sweep.addRightEdges_=function(h,b,d,g,
p,n){var e=!0;do A.assert(A.geom.vertLeq(d.org,d.dst())),A.sweep.addRegionBelow_(h,b,d.sym),d=d.oNext;while(d!==g);for(null===p&&(p=b.regionBelow().eUp.rPrev());;){g=b.regionBelow();d=g.eUp.sym;if(d.org!==p.org)break;d.oNext!==p&&(A.mesh.meshSplice(d.oPrev(),d),A.mesh.meshSplice(p.oPrev(),d));g.windingNumber=b.windingNumber-d.winding;g.inside=A.sweep.isWindingInside_(h,g.windingNumber);b.dirty=!0;!e&&A.sweep.checkForRightSplice_(h,b)&&(A.sweep.addWinding_(d,p),A.sweep.deleteRegion_(h,b),A.mesh.deleteEdge(p));
e=!1;b=g;p=d}b.dirty=!0;A.assert(b.windingNumber-d.winding===g.windingNumber);n&&A.sweep.walkDirtyRegions_(h,b)};A.sweep.callCombine_=function(h,b,d,g,p){var n=[b.coords[0],b.coords[1],b.coords[2]];b.data=null;b.data=h.callCombineCallback(n,d,g);null===b.data&&(p?h.fatalError||(h.callErrorCallback(A.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),h.fatalError=!0):b.data=d[0])};A.sweep.spliceMergeVertices_=function(h,b,d){var g=[null,null,null,null];g[0]=b.org.data;g[1]=d.org.data;A.sweep.callCombine_(h,
b.org,g,[.5,.5,0,0],!1);A.mesh.meshSplice(b,d)};A.sweep.vertexWeights_=function(h,b,d,g,p){var n=A.geom.vertL1dist(b,h),e=A.geom.vertL1dist(d,h),k=p+1;g[p]=.5*e/(n+e);g[k]=.5*n/(n+e);h.coords[0]+=g[p]*b.coords[0]+g[k]*d.coords[0];h.coords[1]+=g[p]*b.coords[1]+g[k]*d.coords[1];h.coords[2]+=g[p]*b.coords[2]+g[k]*d.coords[2]};A.sweep.getIntersectData_=function(h,b,d,g,p,n){var e=[0,0,0,0],k=[d.data,g.data,p.data,n.data];b.coords[0]=b.coords[1]=b.coords[2]=0;A.sweep.vertexWeights_(b,d,g,e,0);A.sweep.vertexWeights_(b,
p,n,e,2);A.sweep.callCombine_(h,b,k,e,!0)};A.sweep.checkForRightSplice_=function(h,b){var d=b.regionBelow(),g=b.eUp,p=d.eUp;if(A.geom.vertLeq(g.org,p.org)){if(0<A.geom.edgeSign(p.dst(),g.org,p.org))return!1;A.geom.vertEq(g.org,p.org)?g.org!==p.org&&(h.pq.remove(g.org.pqHandle),A.sweep.spliceMergeVertices_(h,p.oPrev(),g)):(A.mesh.splitEdge(p.sym),A.mesh.meshSplice(g,p.oPrev()),b.dirty=d.dirty=!0)}else{if(0>A.geom.edgeSign(g.dst(),p.org,g.org))return!1;b.regionAbove().dirty=b.dirty=!0;A.mesh.splitEdge(g.sym);
A.mesh.meshSplice(p.oPrev(),g)}return!0};A.sweep.checkForLeftSplice_=function(h,b){var d=b.regionBelow();h=b.eUp;var g=d.eUp;A.assert(!A.geom.vertEq(h.dst(),g.dst()));if(A.geom.vertLeq(h.dst(),g.dst())){if(0>A.geom.edgeSign(h.dst(),g.dst(),h.org))return!1;b.regionAbove().dirty=b.dirty=!0;d=A.mesh.splitEdge(h);A.mesh.meshSplice(g.sym,d);d.lFace.inside=b.inside}else{if(0<A.geom.edgeSign(g.dst(),h.dst(),g.org))return!1;b.dirty=d.dirty=!0;d=A.mesh.splitEdge(g);A.mesh.meshSplice(h.lNext,g.sym);d.rFace().inside=
b.inside}return!0};A.sweep.checkForIntersect_=function(h,b){var d=b.regionBelow(),g=b.eUp,p=d.eUp,n=g.org,e=p.org,k=g.dst(),l=p.dst(),m=new A.GluVertex;A.assert(!A.geom.vertEq(l,k));A.assert(0>=A.geom.edgeSign(k,h.event,n));A.assert(0<=A.geom.edgeSign(l,h.event,e));A.assert(n!==h.event&&e!==h.event);A.assert(!b.fixUpperEdge&&!d.fixUpperEdge);if(n===e||Math.min(n.t,k.t)>Math.max(e.t,l.t))return!1;if(A.geom.vertLeq(n,e)){if(0<A.geom.edgeSign(l,n,e))return!1}else if(0>A.geom.edgeSign(k,e,n))return!1;
A.geom.edgeIntersect(k,n,l,e,m);A.assert(Math.min(n.t,k.t)<=m.t);A.assert(m.t<=Math.max(e.t,l.t));A.assert(Math.min(l.s,k.s)<=m.s);A.assert(m.s<=Math.max(e.s,n.s));A.geom.vertLeq(m,h.event)&&(m.s=h.event.s,m.t=h.event.t);var r=A.geom.vertLeq(n,e)?n:e;A.geom.vertLeq(r,m)&&(m.s=r.s,m.t=r.t);if(A.geom.vertEq(m,n)||A.geom.vertEq(m,e))return A.sweep.checkForRightSplice_(h,b),!1;if(!A.geom.vertEq(k,h.event)&&0<=A.geom.edgeSign(k,h.event,m)||!A.geom.vertEq(l,h.event)&&0>=A.geom.edgeSign(l,h.event,m)){if(l===
h.event)return A.mesh.splitEdge(g.sym),A.mesh.meshSplice(p.sym,g),b=A.sweep.topLeftRegion_(b),g=b.regionBelow().eUp,A.sweep.finishLeftRegions_(h,b.regionBelow(),d),A.sweep.addRightEdges_(h,b,g.oPrev(),g,g,!0),!0;if(k===h.event)return A.mesh.splitEdge(p.sym),A.mesh.meshSplice(g.lNext,p.oPrev()),d=b,b=A.sweep.topRightRegion_(b),n=b.regionBelow().eUp.rPrev(),d.eUp=p.oPrev(),p=A.sweep.finishLeftRegions_(h,d,null),A.sweep.addRightEdges_(h,b,p.oNext,g.rPrev(),n,!0),!0;0<=A.geom.edgeSign(k,h.event,m)&&(b.regionAbove().dirty=
b.dirty=!0,A.mesh.splitEdge(g.sym),g.org.s=h.event.s,g.org.t=h.event.t);0>=A.geom.edgeSign(l,h.event,m)&&(b.dirty=d.dirty=!0,A.mesh.splitEdge(p.sym),p.org.s=h.event.s,p.org.t=h.event.t);return!1}A.mesh.splitEdge(g.sym);A.mesh.splitEdge(p.sym);A.mesh.meshSplice(p.oPrev(),g);g.org.s=m.s;g.org.t=m.t;g.org.pqHandle=h.pq.insert(g.org);A.sweep.getIntersectData_(h,g.org,n,k,e,l);b.regionAbove().dirty=b.dirty=d.dirty=!0;return!1};A.sweep.walkDirtyRegions_=function(h,b){for(var d=b.regionBelow();;){for(;d.dirty;)b=
d,d=d.regionBelow();if(!b.dirty&&(d=b,b=b.regionAbove(),null===b||!b.dirty))break;b.dirty=!1;var g=b.eUp,p=d.eUp;g.dst()!==p.dst()&&A.sweep.checkForLeftSplice_(h,b)&&(d.fixUpperEdge?(A.sweep.deleteRegion_(h,d),A.mesh.deleteEdge(p),d=b.regionBelow(),p=d.eUp):b.fixUpperEdge&&(A.sweep.deleteRegion_(h,b),A.mesh.deleteEdge(g),b=d.regionAbove(),g=b.eUp));if(g.org!==p.org)if(g.dst()===p.dst()||b.fixUpperEdge||d.fixUpperEdge||g.dst()!==h.event&&p.dst()!==h.event)A.sweep.checkForRightSplice_(h,b);else if(A.sweep.checkForIntersect_(h,
b))break;g.org===p.org&&g.dst()===p.dst()&&(A.sweep.addWinding_(p,g),A.sweep.deleteRegion_(h,b),A.mesh.deleteEdge(g),b=d.regionAbove())}};A.sweep.connectRightVertex_=function(h,b,d){var g=d.oNext,p=b.regionBelow(),n=b.eUp,e=p.eUp,k=!1;n.dst()!==e.dst()&&A.sweep.checkForIntersect_(h,b);A.geom.vertEq(n.org,h.event)&&(A.mesh.meshSplice(g.oPrev(),n),b=A.sweep.topLeftRegion_(b),g=b.regionBelow().eUp,A.sweep.finishLeftRegions_(h,b.regionBelow(),p),k=!0);A.geom.vertEq(e.org,h.event)&&(A.mesh.meshSplice(d,
e.oPrev()),d=A.sweep.finishLeftRegions_(h,p,null),k=!0);k?A.sweep.addRightEdges_(h,b,d.oNext,g,g,!0):(g=A.geom.vertLeq(e.org,n.org)?e.oPrev():n,g=A.mesh.connect(d.lPrev(),g),A.sweep.addRightEdges_(h,b,g,g.oNext,g.oNext,!1),g.sym.activeRegion.fixUpperEdge=!0,A.sweep.walkDirtyRegions_(h,b))};A.sweep.connectLeftDegenerate_=function(h,b,d){var g=b.eUp;if(A.geom.vertEq(g.org,d))A.assert(A.sweep.TOLERANCE_NONZERO_),A.sweep.TOLERANCE_NONZERO_&&A.sweep.spliceMergeVertices_(h,g,d.anEdge);else if(A.geom.vertEq(g.dst(),
d)){if(A.assert(A.sweep.TOLERANCE_NONZERO_),A.sweep.TOLERANCE_NONZERO_){b=A.sweep.topRightRegion_(b);g=b.regionBelow();var p=g.eUp.sym,n=p.oNext,e=n;g.fixUpperEdge&&(A.assert(n!==p),A.sweep.deleteRegion_(h,g),A.mesh.deleteEdge(p),p=n.oPrev());A.mesh.meshSplice(d.anEdge,p);A.geom.edgeGoesLeft(n)||(n=null);A.sweep.addRightEdges_(h,b,p.oNext,e,n,!0)}}else A.mesh.splitEdge(g.sym),b.fixUpperEdge&&(A.mesh.deleteEdge(g.oNext),b.fixUpperEdge=!1),A.mesh.meshSplice(d.anEdge,g),A.sweep.sweepEvent_(h,d)};A.sweep.connectLeftVertex_=
function(h,b){var d=new A.ActiveRegion;d.eUp=b.anEdge.sym;d=h.dict.search(d).getKey();var g=d.regionBelow(),p=d.eUp,n=g.eUp;0===A.geom.edgeSign(p.dst(),b,p.org)?A.sweep.connectLeftDegenerate_(h,d,b):(g=A.geom.vertLeq(n.dst(),p.dst())?d:g,d.inside||g.fixUpperEdge?(p=g===d?A.mesh.connect(b.anEdge.sym,p.lNext):A.mesh.connect(n.dNext(),b.anEdge).sym,g.fixUpperEdge?A.sweep.fixUpperEdge_(g,p):A.sweep.computeWinding_(h,A.sweep.addRegionBelow_(h,d,p)),A.sweep.sweepEvent_(h,b)):A.sweep.addRightEdges_(h,d,
b.anEdge,b.anEdge,null,!0))};A.sweep.sweepEvent_=function(h,b){h.event=b;for(var d=b.anEdge;null===d.activeRegion;)if(d=d.oNext,d===b.anEdge){A.sweep.connectLeftVertex_(h,b);return}b=A.sweep.topLeftRegion_(d.activeRegion);var g=b.regionBelow();d=g.eUp;g=A.sweep.finishLeftRegions_(h,g,null);g.oNext===d?A.sweep.connectRightVertex_(h,b,g):A.sweep.addRightEdges_(h,b,g.oNext,d,d,!0)};A.sweep.addSentinel_=function(h,b){var d=new A.ActiveRegion,g=A.mesh.makeEdge(h.mesh);g.org.s=A.sweep.SENTINEL_COORD_;g.org.t=
b;g.dst().s=-A.sweep.SENTINEL_COORD_;g.dst().t=b;h.event=g.dst();d.eUp=g;d.windingNumber=0;d.inside=!1;d.fixUpperEdge=!1;d.sentinel=!0;d.dirty=!1;d.nodeUp=h.dict.insert(d)};A.sweep.initEdgeDict_=function(h){h.dict=new A.Dict(h,A.sweep.edgeLeq_);A.sweep.addSentinel_(h,-A.sweep.SENTINEL_COORD_);A.sweep.addSentinel_(h,A.sweep.SENTINEL_COORD_)};A.sweep.doneEdgeDict_=function(h){for(var b=0,d;null!==(d=h.dict.getMin().getKey());)d.sentinel||(A.assert(d.fixUpperEdge),A.assert(1===++b)),A.assert(0===d.windingNumber),
A.sweep.deleteRegion_(h,d);h.dict=null};A.sweep.removeDegenerateEdges_=function(h){for(var b=h.mesh.eHead,d,g=b.next;g!==b;g=d){d=g.next;var p=g.lNext;A.geom.vertEq(g.org,g.dst())&&g.lNext.lNext!==g&&(A.sweep.spliceMergeVertices_(h,p,g),A.mesh.deleteEdge(g),g=p,p=g.lNext);if(p.lNext===g){if(p!==g){if(p===d||p===d.sym)d=d.next;A.mesh.deleteEdge(p)}if(g===d||g===d.sym)d=d.next;A.mesh.deleteEdge(g)}}};A.sweep.initPriorityQ_=function(h){var b=new A.PriorityQ;h.pq=b;h=h.mesh.vHead;var d;for(d=h.next;d!==
h;d=d.next)d.pqHandle=b.insert(d);b.init()};A.sweep.donePriorityQ_=function(h){h.pq.deleteQ();h.pq=null};A.sweep.removeDegenerateFaces_=function(h){for(var b,d=h.fHead.next;d!==h.fHead;d=b)b=d.next,d=d.anEdge,A.assert(d.lNext!==d),d.lNext.lNext===d&&(A.sweep.addWinding_(d.oNext,d),A.mesh.deleteEdge(d))};A.tessmono={};A.tessmono.tessellateMonoRegion_=function(h){h=h.anEdge;for(A.assert(h.lNext!==h&&h.lNext.lNext!==h);A.geom.vertLeq(h.dst(),h.org);h=h.lPrev());for(;A.geom.vertLeq(h.org,h.dst());h=h.lNext);
for(var b=h.lPrev(),d;h.lNext!==b;)if(A.geom.vertLeq(h.dst(),b.org)){for(;b.lNext!==h&&(A.geom.edgeGoesLeft(b.lNext)||0>=A.geom.edgeSign(b.org,b.dst(),b.lNext.dst()));)d=A.mesh.connect(b.lNext,b),b=d.sym;b=b.lPrev()}else{for(;b.lNext!==h&&(A.geom.edgeGoesRight(h.lPrev())||0<=A.geom.edgeSign(h.dst(),h.org,h.lPrev().org));)d=A.mesh.connect(h,h.lPrev()),h=d.sym;h=h.lNext}for(A.assert(b.lNext!==h);b.lNext.lNext!==h;)d=A.mesh.connect(b.lNext,b),b=d.sym};A.tessmono.tessellateInterior=function(h){for(var b,
d=h.fHead.next;d!==h.fHead;d=b)b=d.next,d.inside&&A.tessmono.tessellateMonoRegion_(d)};A.tessmono.discardExterior=function(h){for(var b,d=h.fHead.next;d!==h.fHead;d=b)b=d.next,d.inside||A.mesh.zapFace(d)};A.tessmono.setWindingNumber=function(h,b,d){for(var g,p=h.eHead.next;p!==h.eHead;p=g)g=p.next,p.rFace().inside!==p.lFace.inside?p.winding=p.lFace.inside?b:-b:d?A.mesh.deleteEdge(p):p.winding=0};A.Dict=function(h,b){this.head_=new A.DictNode;this.frame_=h;this.leq_=b};A.Dict.prototype.deleteDict_=
function(){};A.Dict.prototype.insertBefore=function(h,b){do h=h.prev;while(null!==h.key&&!this.leq_(this.frame_,h.key,b));b=new A.DictNode(b,h.next,h);h.next.prev=b;return h.next=b};A.Dict.prototype.insert=function(h){return this.insertBefore(this.head_,h)};A.Dict.prototype.deleteNode=function(h){h.next.prev=h.prev;h.prev.next=h.next};A.Dict.prototype.search=function(h){var b=this.head_;do b=b.next;while(null!==b.key&&!this.leq_(this.frame_,h,b.key));return b};A.Dict.prototype.getMin=function(){return this.head_.next};
A.Dict.prototype.getMax=function(){return this.head_.prev};A.DictNode=function(h,b,d){this.key=h||null;this.next=b||this;this.prev=d||this};A.DictNode.prototype.getKey=function(){return this.key};A.DictNode.prototype.getSuccessor=function(){return this.next};A.DictNode.prototype.getPredecessor=function(){return this.prev};A.GluTesselator=function(){this.state_=A.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=A.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};A.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};A.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(A.GluTesselator.tessState_.T_DORMANT)};A.GluTesselator.prototype.gluTessProperty=function(h,b){switch(h){case A.gluEnum.GLU_TESS_TOLERANCE:return;
case A.gluEnum.GLU_TESS_WINDING_RULE:switch(b){case A.windingRule.GLU_TESS_WINDING_ODD:case A.windingRule.GLU_TESS_WINDING_NONZERO:case A.windingRule.GLU_TESS_WINDING_POSITIVE:case A.windingRule.GLU_TESS_WINDING_NEGATIVE:case A.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=b;return}break;case A.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!b;return;default:this.callErrorCallback(A.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(A.gluEnum.GLU_INVALID_VALUE)};A.GluTesselator.prototype.gluGetTessProperty=
function(h){switch(h){case A.gluEnum.GLU_TESS_TOLERANCE:return 0;case A.gluEnum.GLU_TESS_WINDING_RULE:return h=this.windingRule,A.assert(h===A.windingRule.GLU_TESS_WINDING_ODD||h===A.windingRule.GLU_TESS_WINDING_NONZERO||h===A.windingRule.GLU_TESS_WINDING_POSITIVE||h===A.windingRule.GLU_TESS_WINDING_NEGATIVE||h===A.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),h;case A.gluEnum.GLU_TESS_BOUNDARY_ONLY:return A.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(A.gluEnum.GLU_INVALID_ENUM)}return!1};
A.GluTesselator.prototype.gluTessNormal=function(h,b,d){this.normal_[0]=h;this.normal_[1]=b;this.normal_[2]=d};A.GluTesselator.prototype.gluTessCallback=function(h,b){b=b?b:null;switch(h){case A.gluEnum.GLU_TESS_BEGIN:case A.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=b;break;case A.gluEnum.GLU_TESS_EDGE_FLAG:case A.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=b;break;case A.gluEnum.GLU_TESS_VERTEX:case A.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=b;break;case A.gluEnum.GLU_TESS_END:case A.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
b;break;case A.gluEnum.GLU_TESS_ERROR:case A.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=b;break;case A.gluEnum.GLU_TESS_COMBINE:case A.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=b;break;case A.gluEnum.GLU_TESS_MESH:this.meshCallback_=b;break;default:this.callErrorCallback(A.gluEnum.GLU_INVALID_ENUM)}};A.GluTesselator.prototype.gluTessVertex=function(h,b){var d=!1,g=[0,0,0];this.requireState_(A.GluTesselator.tessState_.T_IN_CONTOUR);for(var p=0;3>p;++p){var n=h[p];n<-A.GLU_TESS_MAX_COORD&&
(n=-A.GLU_TESS_MAX_COORD,d=!0);n>A.GLU_TESS_MAX_COORD&&(n=A.GLU_TESS_MAX_COORD,d=!0);g[p]=n}d&&this.callErrorCallback(A.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(g,b)};A.GluTesselator.prototype.gluTessBeginPolygon=function(h){this.requireState_(A.GluTesselator.tessState_.T_DORMANT);this.state_=A.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new A.GluMesh;this.polygonData_=h};A.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(A.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=A.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};A.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(A.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=A.GluTesselator.tessState_.T_IN_POLYGON};A.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(A.GluTesselator.tessState_.T_IN_POLYGON);this.state_=A.GluTesselator.tessState_.T_DORMANT;A.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);A.sweep.computeInterior(this);
if(!this.fatalError){var h=this.mesh;this.boundaryOnly_?A.tessmono.setWindingNumber(h,1,!0):A.tessmono.tessellateInterior(h);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?A.render.renderBoundary(this,this.mesh):A.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){A.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}A.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};A.GluTesselator.prototype.requireState_=function(h){this.state_!==h&&this.gotoState_(h)};A.GluTesselator.prototype.gotoState_=function(h){for(;this.state_!==h;)if(this.state_<h)switch(this.state_){case A.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(A.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case A.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(A.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case A.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(A.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case A.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(A.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};A.GluTesselator.prototype.addVertex_=function(h,b){var d=this.lastEdge_;null===d?(d=A.mesh.makeEdge(this.mesh),A.mesh.meshSplice(d,d.sym)):(A.mesh.splitEdge(d),d=d.lNext);d.org.data=b;d.org.coords[0]=h[0];d.org.coords[1]=h[1];d.org.coords[2]=h[2];d.winding=1;d.sym.winding=-1;this.lastEdge_=d};A.GluTesselator.prototype.callBeginCallback=
function(h){this.beginCallback_&&this.beginCallback_(h,this.polygonData_)};A.GluTesselator.prototype.callVertexCallback=function(h){this.vertexCallback_&&this.vertexCallback_(h,this.polygonData_)};A.GluTesselator.prototype.callEdgeFlagCallback=function(h){this.edgeFlagCallback_&&this.edgeFlagCallback_(h,this.polygonData_)};A.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};A.GluTesselator.prototype.callCombineCallback=function(h,b,d){return this.combineCallback_?
this.combineCallback_(h,b,d,this.polygonData_)||null:null};A.GluTesselator.prototype.callErrorCallback=function(h){this.errorCallback_&&this.errorCallback_(h,this.polygonData_)};A.GluFace=function(h,b){this.next=h||this;this.prev=b||this;this.anEdge=null;this.inside=!1};A.GluHalfEdge=function(h){this.next=h||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};A.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};A.GluHalfEdge.prototype.dst=function(){return this.sym.org};
A.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};A.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};A.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};A.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};A.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};A.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};A.GluMesh=function(){this.vHead=new A.GluVertex;this.fHead=new A.GluFace;this.eHead=new A.GluHalfEdge;this.eHeadSym=
new A.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};A.GluMesh.prototype.checkMesh=function(){if(A.DEBUG){var h=this.fHead,b=this.vHead,d=this.eHead,g,p;for(g=g=h;(p=g.next)!==h;g=p){A.assert(p.prev===g);g=p.anEdge;do A.assert(g.sym!==g),A.assert(g.sym.sym===g),A.assert(g.lNext.oNext.sym===g),A.assert(g.oNext.sym.lNext===g),A.assert(g.lFace===p),g=g.lNext;while(g!==p.anEdge)}A.assert(p.prev===g&&null===p.anEdge);for(g=g=b;(h=g.next)!==b;g=h){A.assert(h.prev===g);g=h.anEdge;
do A.assert(g.sym!==g),A.assert(g.sym.sym===g),A.assert(g.lNext.oNext.sym===g),A.assert(g.oNext.sym.lNext===g),A.assert(g.org===h),g=g.oNext;while(g!==h.anEdge)}A.assert(h.prev===g&&null===h.anEdge&&null===h.data);for(b=b=d;(g=b.next)!==d;b=g)A.assert(g.sym.next===b.sym),A.assert(g.sym!==g),A.assert(g.sym.sym===g),A.assert(null!==g.org),A.assert(null!==g.dst()),A.assert(g.lNext.oNext.sym===g),A.assert(g.oNext.sym.lNext===g);A.assert(g.sym.next===b.sym&&g.sym===this.eHeadSym&&g.sym.sym===g&&null===
g.org&&null===g.dst()&&null===g.lFace&&null===g.rFace())}};A.GluVertex=function(h,b){this.next=h||this;this.prev=b||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};A.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new A.PriorityQHeap};A.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};A.PriorityQ.prototype.init=function(){this.order_=[];for(var h=0;h<this.size_;h++)this.order_[h]=h;
h=function(d){return function(g,p){return A.geom.vertLeq(d[g],d[p])?1:-1}}(this.verts_);this.order_.sort(h);this.initialized_=!0;this.heap_.init();if(A.DEBUG){var b=0+this.size_-1;for(h=0;h<b;++h)A.assert(A.geom.vertLeq(this.verts_[this.order_[h+1]],this.verts_[this.order_[h]]))}};A.PriorityQ.prototype.insert=function(h){if(this.initialized_)return this.heap_.insert(h);var b=this.size_++;this.verts_[b]=h;return-(b+1)};A.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var h=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var b=this.heap_.minimum();if(A.geom.vertLeq(b,h))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return h};A.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var h=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var b=this.heap_.minimum();if(A.geom.vertLeq(b,h))return b}return h};A.PriorityQ.prototype.remove=function(h){if(0<=
h)this.heap_.remove(h);else for(h=-(h+1),A.assert(h<this.verts_.length&&null!==this.verts_[h]),this.verts_[h]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};A.PriorityQHeap=function(){this.heap_=A.PriorityQHeap.reallocNumeric_([0],A.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=A.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};A.PriorityQHeap.INIT_SIZE_=32;A.PriorityQHeap.reallocNumeric_=
function(h,b){for(var d=Array(b),g=0;g<h.length;g++)d[g]=h[g];for(;g<b;g++)d[g]=0;return d};A.PriorityQHeap.prototype.init=function(){for(var h=this.size_;1<=h;--h)this.floatDown_(h);this.initialized_=!0};A.PriorityQHeap.prototype.insert=function(h){var b=++this.size_;2*b>this.max_&&(this.max_*=2,this.handles_=A.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));if(0===this.freeList_)var d=b;else d=this.freeList_,this.freeList_=this.handles_[this.freeList_];this.verts_[d]=h;this.handles_[d]=
b;this.heap_[b]=d;this.initialized_&&this.floatUp_(b);return d};A.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};A.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};A.PriorityQHeap.prototype.extractMin=function(){var h=this.heap_,b=this.verts_,d=this.handles_,g=h[1],p=b[g];0<this.size_&&(h[1]=h[this.size_],d[h[1]]=1,b[g]=null,d[g]=this.freeList_,this.freeList_=g,0<--this.size_&&this.floatDown_(1));return p};A.PriorityQHeap.prototype.remove=function(h){var b=
this.heap_,d=this.verts_,g=this.handles_;A.assert(1<=h&&h<=this.max_&&null!==d[h]);var p=g[h];b[p]=b[this.size_];g[b[p]]=p;p<=--this.size_&&(1>=p?this.floatDown_(p):A.geom.vertLeq(d[b[p>>1]],d[b[p]])?this.floatDown_(p):this.floatUp_(p));d[h]=null;g[h]=this.freeList_;this.freeList_=h};A.PriorityQHeap.prototype.floatDown_=function(h){for(var b=this.heap_,d=this.verts_,g=this.handles_,p=b[h];;){var n=h<<1;n<this.size_&&A.geom.vertLeq(d[b[n+1]],d[b[n]])&&(n+=1);A.assert(n<=this.max_);var e=b[n];if(n>
this.size_||A.geom.vertLeq(d[p],d[e])){b[h]=p;g[p]=h;break}b[h]=e;g[e]=h;h=n}};A.PriorityQHeap.prototype.floatUp_=function(h){for(var b=this.heap_,d=this.verts_,g=this.handles_,p=b[h];;){var n=h>>1,e=b[n];if(0===n||A.geom.vertLeq(d[e],d[p])){b[h]=p;g[p]=h;break}b[h]=e;g[e]=h;h=n}};A.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};A.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
A.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});A=function(){return function(){}}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../color ../../definitions ../../enums ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v){Object.defineProperty(h,"__esModule",{value:!0});var w=d.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),B=k.allocTriangles(20),C=k.allocTriangles(20),y=[k.allocExtrudeVectors(),k.allocExtrudeVectors()],a=k.allocExtrudeVectors(),c=p.TILE_SIZE+8,f=new k.Tessellator({distanceAlongCorrection:!0}),q=new m.TileClipper(0,0,0,1,8);q.setExtent(512);A=function(t){function x(z,D,F,G,E,H,O,K,L,T,P){var Q=t.call(this)||this;Q.capType=H;Q.joinType=O;Q.fillColor=K;
Q.tl=L;Q.br=T;Q.hasPattern=P;Q.geometryType=n.WGLGeometryType.LINE;Q.halfWidth=0<G?.5*(G+1/E):0;Q._materialStore=z;Q.vvFlags=D;Q.materialId=Q._materialStore.createSpriteMaterial(F,Q.geometryType,D);return Q}b(x,t);x.fromSimpleLine=function(z,D,F,G,E){var H=F.color,O=r.getCapType("round"),K=r.getJoinType("round");H=H&&"none"!==F.style&&g.premultiplyAlphaRGBA(H)||0;"none"===F.style&&(H=0);if(!G)return new x(z,D,G,F.width,E,O,K,H,0,0,!1);var L=G.rect,T=L.x+1+G.width,P=L.y+1+G.height;L=l.i1616to32(L.x+
1,L.y+1);T=l.i1616to32(T,P);return new x(z,D,G,F.width,E,O,K,H,L,T,!0)};x.fromPictureLineSymbol=function(z,D,F,G){w.error("PictureLineSymbol support does not exist!");return null};x.prototype.writeMesh=function(z,D,F,G,E,H,O){if(this.vvFlags&e.WGLVVFlag.COLOR||0!==this.fillColor){H=this._materialStore.get(this.materialId);var K=D.indexVector;D=D.get("geometry");var L=this.halfWidth,T=new u(G,this.geometryType,this.materialId),P=this._getOffset(D,H);T.vertexFrom=P;T.indexFrom=K.length;z.push(T);switch(F){case "esriGeometryPolyline":z=
this._clipLines(E.geometry.paths);this._write(T,K,D,P,G,L,z,H,O);break;case "esriGeometryPolygon":z=this._clipLines(E.geometry.rings);this._write(T,K,D,P,G,L,z,H,O);break;default:w.error("Unable to handle geometryType: "+F)}}};x.prototype._clipLines=function(z){for(var D=[],F=!1,G=0;G<z.length;){var E=[],H=z[G];q.reset(2);var O=H[0],K=O[0];O=O[1];if(F)q.moveTo(K,O);else{if(-8>K||K>c||-8>O||O>c){F=!0;continue}E.push({x:K,y:O})}for(var L=!1,T=H.length,P=1;P<T;++P)if(K+=H[P][0],O+=H[P][1],F)q.lineTo(K,
O);else{if(-8>K||K>c||-8>O||O>c){L=!0;break}E.push({x:K,y:O})}if(L)F=!0;else{if(F){if(E=q.resultWithStarts())for(F=0;F<E.length;F++)D.push(E[F])}else D.push({line:E,start:0});G++;F=!1}}return D};x.prototype._getOffset=function(z,D){D=D.materialKeyInfo.hasVV()?11:8;return z.length/D};x.prototype._write=function(z,D,F,G,E,H,O,K,L){for(var T=0,P=0;P<O.length;P++){var Q=O[P],J=Q.line;if(!(2>J.length)){var R=J[0],I=J[J.length-1],S=I.x-R.x;R=I.y-R.y;S=1E-6>S*S+R*R;var U=Q.start%65535;Q=y[1];for(R=0;R<J.length;R++){var V=
J[R];I=Q===y[R%2]?y[(R+1)%2]:y[R%2];var W=0===R,X=R===J.length-1;X&&S&&!this.hasPattern?k.copyExtrudeVectors(I,a):(this._computeExtrudeVectors(I,R,J,S),T+=this._writeVertices(F,E,H,V.x,V.y,I,U,T,K,L),!I.capCenter||S&&X||this._writePieIndices(z,D,G,I),S&&W&&!this.hasPattern&&k.copyExtrudeVectors(a,I));W||this._writeBridgeIndices(z,D,G,Q,I);if(!X){X=J[R+1];W=[X.x-V.x,X.y-V.y];var Y=k.length(W);W=[W[0]/Y,W[1]/Y];Y=U+Y;if(65535<Y){var da=(65535-U)/(Y-U);U=V.x+(X.x-V.x)*da;V=V.y+(X.y-V.y)*da;X=Q;f.buttCap(X,
W,W);T+=this._writeVertices(F,E,H,U,V,X,65535,T,K,L);f.bridge(B,I,X);this._writeBridgeIndices(z,D,G,I,X);f.buttCap(X,W,W);U=Y-65535}else U=Y,Q=I}}}}z.vertexCount=T};x.prototype._writeVertices=function(z,D,F,G,E,H,O,K,L,T){var P=0,Q=l.i1616to32(G,E),J=H.vectors;H=J.items;for(J=J.count;P<J;++P){var R=H[P].vector,I=R[0];R=R[1];var S=H[P].texCoords,U=S[0],V=S[1],W=H[P].direction;S=W[0];var X=W[1];W=l.i1616to32(O,31*F);I=l.i8888to32(Math.round(31*I),Math.round(31*R),Math.round(31*U),Math.round(31*V));
R=l.i8888to32(Math.round(31*S),Math.round(31*X),0,0);z.push(Q);z.push(D);z.push(this.fillColor);z.push(I);z.push(W);z.push(this.tl);z.push(this.br);z.push(R);this._writeVV(z,T,L);H[P].base={index:K+P,point:[G,E]}}return P};x.prototype._writeVV=function(z,D,F){F.materialKeyInfo.hasVV()&&(z.push(D[n.VVType.SIZE]),z.push(D[n.VVType.COLOR]),z.push(D[n.VVType.OPACITY]))};x.prototype._writeBridgeIndices=function(z,D,F,G,E){f.bridge(B,G,E);for(G=0;G<B.count;++G)E=B.items[G],D.push(F+E.v1.base.index),D.push(F+
E.v2.base.index),D.push(F+E.v3.base.index),z.indexCount+=3};x.prototype._writePieIndices=function(z,D,F,G){f.pie(C,G);for(G=0;G<C.count;++G){var E=C.items[G];D.push(F+E.v1.base.index);D.push(F+E.v2.base.index);D.push(F+E.v3.base.index);z.indexCount+=3}};x.prototype._computeExtrudeVectors=function(z,D,F,G){var E=F[D],H=[void 0,void 0],O=[void 0,void 0];if(0<D&&D<F.length-1){var K=F[(D+F.length-1)%F.length],L=F[(D+1)%F.length];k.normalize(H,[E.x-K.x,E.y-K.y]);k.normalize(O,[L.x-E.x,L.y-E.y])}else if(0===
D)L=F[(D+1)%F.length],k.normalize(O,[L.x-E.x,L.y-E.y]),G?(K=F[F.length-2],k.normalize(H,[E.x-K.x,E.y-K.y])):H=O;else if(D===F.length-1)K=F[(D+F.length-1)%F.length],k.normalize(H,[E.x-K.x,E.y-K.y]),G?(K=F[1],k.normalize(O,[K.x-E.x,K.y-E.y])):O=H;else{console.error("Vertex index 'i' out of range.");return}G||0!==D?G||D!==F.length-1?this._computeJoinExtrudeVectors(z,H,O):this._computeCapExtrudeVectors(z,H,O,k.CapPosition.END):this._computeCapExtrudeVectors(z,H,O,k.CapPosition.START)};x.prototype._computeCapExtrudeVectors=
function(z,D,F,G){switch(this.capType){case n.CapType.BUTT:f.buttCap(z,D,F);break;case n.CapType.ROUND:var E=k.getNumberOfSlices(Math.PI);f.roundCap(z,D,F,G,E,G===k.CapPosition.START?-1:1);break;case n.CapType.SQUARE:f.squareCap(z,D,F,G);break;default:w.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),f.buttCap(z,D,F)}};x.prototype._computeJoinExtrudeVectors=function(z,D,F){var G=k.getRads(D,F);if(G>Math.PI-.05)f.rectJoin(z,D,F);else if(this.joinType===n.JoinType.MITER||
.1>G).05>G?f.fastMiterJoin(z,D,F):G<k.MITER_SAFE_RADS?f.miterJoin(z,D,F):f.bevelJoin(z,D,F,k.SYSTEM_MAG_LIMIT);else if(this.joinType===n.JoinType.BEVEL)f.bevelJoin(z,D,F,1);else if(this.joinType===n.JoinType.ROUND){var E=k.getNumberOfSlices(G);2.3>G?2>E||.5>G?f.bevelJoin(z,D,F,1):f.roundJoin(z,D,F,E):f.unitRoundJoin(z,D,F,E)}};return x}(v.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(A,h){function b(K){var L={items:[],
count:0},T;for(T=0;T<K;++T)L.items.push(void 0);return L}function d(K,L){c.vector[0]=K.vector[0];c.vector[1]=K.vector[1];c.texCoords[0]=K.texCoords[0];c.texCoords[1]=K.texCoords[1];c.direction[0]=K.direction[0];c.direction[1]=K.direction[1];c.base=K.base;K.vector[0]=L.vector[0];K.vector[1]=L.vector[1];K.texCoords[0]=L.texCoords[0];K.texCoords[1]=L.texCoords[1];K.direction[0]=L.direction[0];K.direction[1]=L.direction[1];K.base=L.base;L.vector[0]=c.vector[0];L.vector[1]=c.vector[1];L.texCoords[0]=c.texCoords[0];
L.texCoords[1]=c.texCoords[1];L.direction[0]=c.direction[0];L.direction[1]=c.direction[1];L.base=c.base}function g(K,L){return K[0]*L[0]+K[1]*L[1]}function p(K){return Math.sqrt(g(K,K))}function n(K,L){var T=p(L);K[0]=L[0]/T;K[1]=L[1]/T;return K}function e(K,L){K[0]=-L[1];K[1]=L[0];return K}function k(K,L){return K[0]*L[1]-K[1]*L[0]}function l(K,L){K[0]=-L[0];K[1]=-L[1];return K}function m(K,L,T){K[0]=L[0]*T;K[1]=L[1]*T;return K}function r(K,L,T){K[0]=L[0]+T[0];K[1]=L[1]+T[1];return K}function u(K,
L){K=g(K,L);return.999<K?0:-.999>K?Math.PI:Math.acos(K)}function v(K,L,T,P,Q){if(0===P)K.count=0;else{var J=p(L),R=m(f[0],L,1/J);T=m(f[1],T,1/J);R=u(R,T);R=(Q?-1:1)*R/P;Q=Math.cos(R);R=Math.sin(R);T=L[0];var I=L[1];for(L=0;L<P-1;++L)J=T,T=Q*J-R*I,I=R*J+Q*I,K.items[L][0]=T,K.items[L][1]=I;K.count=P-1}}function w(K){var L=K.count,T=Math.floor(L/2),P;for(P=0;P<T;++P){var Q=K.items[P];K.items[P]=K.items[L-P-1];K.items[L-P-1]=Q}}Object.defineProperty(h,"__esModule",{value:!0});var B;(function(K){K[K.ENTRY=
1]="ENTRY";K[K.EXIT=2]="EXIT";K[K.CAP=3]="CAP"})(B=h.VectorRole||(h.VectorRole={}));var C;(function(K){K[K.START=1]="START";K[K.END=2]="END"})(C=h.CapPosition||(h.CapPosition={}));h.SYSTEM_MAG_LIMIT=3.8;h.MITER_SAFE_RADS=2*Math.acos(1/h.SYSTEM_MAG_LIMIT);var y=h.SYSTEM_MAG_LIMIT*h.SYSTEM_MAG_LIMIT,a=16/(2*Math.PI);h.allocTriangles=function(K){var L={items:[],count:0},T;for(T=0;T<K;++T)L.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,
void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return L};h.allocExtrudeVectors=function(){var K={items:[],count:0},L;for(L=0;30>L;++L)K.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});L={};L[B.ENTRY]=b(20);L[B.EXIT]=b(20);L[B.CAP]=b(20);return{vectors:K,lists:L}};h.copyExtrudeVectors=function(K,L){var T;for(T=0;T<L.vectors.count;++T)K.vectors.items[T].vector[0]=
L.vectors.items[T].vector[0],K.vectors.items[T].vector[1]=L.vectors.items[T].vector[1],K.vectors.items[T].texCoords[0]=L.vectors.items[T].texCoords[0],K.vectors.items[T].texCoords[1]=L.vectors.items[T].texCoords[1],K.vectors.items[T].direction[0]=L.vectors.items[T].direction[0],K.vectors.items[T].direction[1]=L.vectors.items[T].direction[1],K.vectors.items[T].base=L.vectors.items[T].base;K.vectors.count=L.vectors.count;var P=L.lists[B.ENTRY],Q=K.lists[B.ENTRY],J=L.lists[B.EXIT],R=K.lists[B.EXIT],
I=L.lists[B.CAP],S=K.lists[B.CAP];for(T=0;T<P.count;++T)Q.items[T]=P.items[T];Q.count=P.count;for(T=0;T<J.count;++T)R.items[T]=J.items[T];R.count=J.count;for(T=0;T<I.count;++T)S.items[T]=I.items[T];S.count=I.count;K.capCenter=L.capCenter};var c={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};h.swapExtrudeVectors=d;var f=[];for(A=0;32>A;++A)f.push([void 0,void 0]);var q=function(K){var L={items:[],count:0},T;for(T=0;T<K;++T)L.items.push([void 0,void 0]);return L}(16);
h.length=p;h.normalize=n;h.getNumberOfSlices=function(K){return Math.max(Math.round(K*a),1)};h.getRads=u;h.reverse=w;var t=[void 0,void 0],x=[void 0,void 0],z=[0,0],D=[0,0],F=[0,0],G=[0,0],E=Math.cos(Math.PI/4),H=Math.sin(Math.PI/4),O=Math.sqrt(2);A=function(){function K(L){this._distanceAlongCorrection=L.distanceAlongCorrection}K.prototype.bridge=function(L,T,P){var Q=T.vectors;T=T.lists[B.EXIT];var J=P.vectors,R=P.lists[B.ENTRY];if(T.count===R.count+1){P=T.items;var I=Q.items;var S=R.items;J=J.items}else if(R.count===
T.count+1)P=R.items,I=J.items,S=T.items,J=Q.items;else if(T.count===R.count)P=R.items,I=J.items,S=T.items,J=Q.items;else{console.error("Cannot bridge "+T.count+" to "+R.count+".");L.count=0;return}Q=T.count+R.count-2;L.count=Q;t[0]=P;t[1]=S;x[0]=I;x[1]=J;for(T=0;T<Q;++T)P=L.items[T],I=(T+0)%2,I=x[I][t[I][Math.floor((T+0)/2)]],P.v1.vector[0]=I.vector[0],P.v1.vector[1]=I.vector[1],P.v1.texCoords[0]=I.texCoords[0],P.v1.texCoords[1]=I.texCoords[1],P.v1.direction[0]=I.direction[0],P.v1.direction[1]=I.direction[1],
P.v1.base=I.base,I=(T+1)%2,I=x[I][t[I][Math.floor((T+1)/2)]],P.v2.vector[0]=I.vector[0],P.v2.vector[1]=I.vector[1],P.v2.texCoords[0]=I.texCoords[0],P.v2.texCoords[1]=I.texCoords[1],P.v2.direction[0]=I.direction[0],P.v2.direction[1]=I.direction[1],P.v2.base=I.base,I=(T+2)%2,I=x[I][t[I][Math.floor((T+2)/2)]],P.v3.vector[0]=I.vector[0],P.v3.vector[1]=I.vector[1],P.v3.texCoords[0]=I.texCoords[0],P.v3.texCoords[1]=I.texCoords[1],P.v3.direction[0]=I.direction[0],P.v3.direction[1]=I.direction[1],P.v3.base=
I.base,I=P.v1.base&&P.v1.base.point||z,S=P.v2.base&&P.v2.base.point||z,J=P.v3.base&&P.v3.base.point||z,D[0]=I[0]+P.v1.vector[0],D[1]=I[1]+P.v1.vector[1],F[0]=S[0]+P.v2.vector[0],F[1]=S[1]+P.v2.vector[1],G[0]=J[0]+P.v3.vector[0],G[1]=J[1]+P.v3.vector[1],0>(F[0]-D[0])*(G[1]-D[1])-(G[0]-D[0])*(F[1]-D[1])||d(P.v2,P.v3)};K.prototype.pie=function(L,T){if(0===T.lists[B.CAP].count)L.count=0;else if(1===T.lists[B.CAP].count)console.error("A single vector is not enough to define a pie."),L.count=0;else{L.count=
T.lists[B.CAP].count-1;var P;for(P=0;P<L.count;++P){var Q=L.items[P],J=T.vectors.items[T.lists[B.CAP].items[P]];Q.v1.vector[0]=J.vector[0];Q.v1.vector[1]=J.vector[1];Q.v1.texCoords[0]=J.texCoords[0];Q.v1.texCoords[1]=J.texCoords[1];Q.v1.direction[0]=J.direction[0];Q.v1.direction[1]=J.direction[1];Q.v1.base=J.base;J=T.vectors.items[T.lists[B.CAP].items[P+1]];Q.v2.vector[0]=J.vector[0];Q.v2.vector[1]=J.vector[1];Q.v2.texCoords[0]=J.texCoords[0];Q.v2.texCoords[1]=J.texCoords[1];Q.v2.direction[0]=J.direction[0];
Q.v2.direction[1]=J.direction[1];Q.v2.base=J.base;J=T.vectors.items[T.capCenter];Q.v3.vector[0]=J.vector[0];Q.v3.vector[1]=J.vector[1];Q.v3.texCoords[0]=J.texCoords[0];Q.v3.texCoords[1]=J.texCoords[1];Q.v3.direction[0]=J.direction[0];Q.v3.direction[1]=J.direction[1];Q.v3.base=J.base;J=Q.v1.base&&Q.v1.base.point||z;var R=Q.v2.base&&Q.v2.base.point||z,I=Q.v3.base&&Q.v3.base.point||z;D[0]=J[0]+Q.v1.vector[0];D[1]=J[1]+Q.v1.vector[1];F[0]=R[0]+Q.v2.vector[0];F[1]=R[1]+Q.v2.vector[1];G[0]=I[0]+Q.v3.vector[0];
G[1]=I[1]+Q.v3.vector[1];0>(F[0]-D[0])*(G[1]-D[1])-(G[0]-D[0])*(F[1]-D[1])||d(Q.v2,Q.v3)}}};K.prototype.buttCap=function(L,T,P){this.fastMiterJoin(L,T,P)};K.prototype.roundCap=function(L,T,P,Q,J,R){void 0===R&&(R=0);this.fastMiterJoin(L,T,P);P=Q===C.START?0:1;Q=Q===C.START?1:0;L.capCenter=L.vectors.count;T=L.vectors.items[L.capCenter];T.vector[0]=0;T.vector[1]=0;T.texCoords[0]=0;T.texCoords[1]=0;T.direction[0]=0;T.direction[1]=0;++L.vectors.count;v(q,L.vectors.items[P].vector,L.vectors.items[Q].vector,
J,!1);J=L.vectors.count;T=L.lists[B.CAP];T.items[0]=P;P=L.vectors.items[P].texCoords[1];var I=L.vectors.items[Q].texCoords[1],S;for(S=0;S<q.count;++S){var U=R*(1-Math.abs(q.count/2-S)/(q.count/2)),V=P+S/(q.count-1)*(I-P),W=q.items[S],X=L.vectors.items[J+S];X.vector[0]=W[0];X.vector[1]=W[1];X.texCoords[0]=U;X.texCoords[1]=V;X.direction[0]=0;X.direction[1]=0;T.items[S+1]=J+S}T.items[q.count+1]=Q;T.count=q.count+2;L.vectors.count=J+q.count};K.prototype.squareCap=function(L,T,P,Q){this.fastMiterJoin(L,
T,P);T=Q===C.START?0:1;P=Q===C.START?1:0;var J=f[0],R=f[1],I=f[2],S=f[3];Q=f[4];var U=L.vectors.items[T].vector;J[0]=E*U[0]-H*U[1];J[1]=H*U[0]+E*U[1];m(S,J,O);R[0]=E*J[0]-H*J[1];R[1]=H*J[0]+E*J[1];I[0]=E*R[0]-H*R[1];I[1]=H*R[0]+E*R[1];m(Q,I,O);T=L.vectors.items[T];T.vector[0]=S[0];T.vector[1]=S[1];L=L.vectors.items[P];L.vector[0]=Q[0];L.vector[1]=Q[1]};K.prototype.fastMiterJoin=function(L,T,P){P=e(f[0],P);T=l(f[1],P);var Q=L.vectors.items[0];Q.vector[0]=P[0];Q.vector[1]=P[1];Q.texCoords[0]=0;Q.texCoords[1]=
-1;Q.direction[0]=0;Q.direction[1]=0;P=L.vectors.items[1];P.vector[0]=T[0];P.vector[1]=T[1];P.texCoords[0]=0;P.texCoords[1]=1;P.direction[0]=0;P.direction[1]=0;L.vectors.count=2;T=L.lists[B.ENTRY];T.items[0]=0;T.items[1]=1;T.count=2;T=L.lists[B.EXIT];T.items[0]=0;T.items[1]=1;T.count=2;L.lists[B.CAP].count=0;L.capCenter=void 0};K.prototype.miterJoin=function(L,T,P){var Q=e(f[0],T),J=e(f[1],P),R=f[2];R[0]=Q[0]+J[0];R[1]=Q[1]+J[1];J=n(f[3],R);Q=g(J,Q);J=m(f[4],J,1/Q);Q=l(f[5],J);this._distanceAlongCorrection?
(R=L.vectors.items[0],R.vector[0]=J[0],R.vector[1]=J[1],R.texCoords[0]=0,R.texCoords[1]=-1,R.direction[0]=T[0],R.direction[1]=T[1],R=L.vectors.items[1],R.vector[0]=Q[0],R.vector[1]=Q[1],R.texCoords[0]=0,R.texCoords[1]=1,R.direction[0]=T[0],R.direction[1]=T[1],T=L.vectors.items[2],T.vector[0]=J[0],T.vector[1]=J[1],T.texCoords[0]=0,T.texCoords[1]=-1,T.direction[0]=P[0],T.direction[1]=P[1],T=L.vectors.items[3],T.vector[0]=Q[0],T.vector[1]=Q[1],T.texCoords[0]=0,T.texCoords[1]=1,T.direction[0]=P[0],T.direction[1]=
P[1],L.vectors.count=4,P=L.lists[B.ENTRY],P.items[0]=0,P.items[1]=1,P.count=2,P=L.lists[B.EXIT],P.items[0]=2,P.items[1]=3):(R=L.vectors.items[0],R.vector[0]=J[0],R.vector[1]=J[1],R.texCoords[0]=0,R.texCoords[1]=-1,R.direction[0]=0,R.direction[1]=0,R=L.vectors.items[1],R.vector[0]=Q[0],R.vector[1]=Q[1],R.texCoords[0]=0,R.texCoords[1]=1,R.direction[0]=0,R.direction[1]=0,L.vectors.count=2,P=L.lists[B.ENTRY],P.items[0]=0,P.items[1]=1,P.count=2,P=L.lists[B.EXIT],P.items[0]=0,P.items[1]=1);P.count=2;L.lists[B.CAP].count=
0;L.capCenter=void 0};K.prototype.bevelJoin=function(L,T,P,Q){var J=Q*Q;Q=k(T,P);var R=0<Q?[-1,1]:[1,-1],I=R[0];R=R[1];var S=0<Q?l(f[0],e(f[1],T)):e(f[2],T),U=0<Q?l(f[3],e(f[4],P)):e(f[5],P),V=f[6];V[0]=S[0]+U[0];V[1]=S[1]+U[1];var W=n(f[7],V),X=l(f[8],W),Y=g(W,S);V=k(W,S);var da=Math.abs(V/Y);V=1+da*da;var aa=V<y?[da,this._distanceAlongCorrection]:[Math.sqrt(y-1),!0],ba=aa[0];aa=aa[1];var fa=V<J?[da,this._distanceAlongCorrection]:[Math.sqrt(J-1),!0];da=fa[0];(fa=fa[1])&&aa?(aa=L.vectors.items[0],
r(aa.vector,l(f[9],S),m(f[10],l(f[11],T),ba)),aa.texCoords[0]=0,aa.texCoords[1]=I,aa.direction[0]=this._distanceAlongCorrection?T[0]:0,aa.direction[1]=this._distanceAlongCorrection?T[1]:0,X=L.vectors.items[1],r(X.vector,l(f[12],U),m(f[13],P,ba)),X.texCoords[0]=0,X.texCoords[1]=I,X.direction[0]=this._distanceAlongCorrection?P[0]:0,X.direction[1]=this._distanceAlongCorrection?P[1]:0,I=L.vectors.items[2],I.vector[0]=0,I.vector[1]=0,I.texCoords[0]=0,I.texCoords[1]=0,I.direction[0]=0,I.direction[1]=0,
I=L.vectors.items[3],r(I.vector,S,m(f[14],T,da)),I.texCoords[0]=0,I.texCoords[1]=R,I.direction[0]=this._distanceAlongCorrection?T[0]:0,I.direction[1]=this._distanceAlongCorrection?T[1]:0,T=L.vectors.items[4],r(T.vector,U,m(f[15],l(f[16],P),da)),T.texCoords[0]=0,T.texCoords[1]=R,T.direction[0]=this._distanceAlongCorrection?P[0]:0,T.direction[1]=this._distanceAlongCorrection?P[1]:0,L.vectors.count=5,P=L.lists[B.ENTRY],P.items[0]=0,P.items[1]=2,P.items[2]=3,P.count=3,P=L.lists[B.EXIT],P.items[0]=1,P.items[1]=
2,P.items[2]=4,P.count=3,V<J?(J=L.lists[B.CAP],J.count=0,L.capCenter=void 0):(J=L.lists[B.CAP],J.items[0]=3,J.items[1]=4,J.count=2,L.capCenter=2)):!fa&&aa?(aa=L.vectors.items[0],r(aa.vector,l(f[9],S),m(f[10],l(f[11],T),ba)),aa.texCoords[0]=0,aa.texCoords[1]=I,aa.direction[0]=this._distanceAlongCorrection?T[0]:0,aa.direction[1]=this._distanceAlongCorrection?T[1]:0,X=L.vectors.items[1],r(X.vector,l(f[12],U),m(f[13],P,ba)),X.texCoords[0]=0,X.texCoords[1]=I,X.direction[0]=this._distanceAlongCorrection?
P[0]:0,X.direction[1]=this._distanceAlongCorrection?P[1]:0,I=L.vectors.items[2],I.vector[0]=0,I.vector[1]=0,I.texCoords[0]=0,I.texCoords[1]=0,I.direction[0]=0,I.direction[1]=0,I=L.vectors.items[3],m(I.vector,W,1/Y),I.texCoords[0]=0,I.texCoords[1]=R,I.direction[0]=0,I.direction[1]=0,L.vectors.count=4,P=L.lists[B.ENTRY],P.items[0]=0,P.items[1]=2,P.items[2]=3,P.count=3,P=L.lists[B.EXIT],P.items[0]=1,P.items[1]=2,P.items[2]=3,P.count=3,L.lists[B.CAP].count=0,L.capCenter=void 0):fa&&!aa?(aa=L.vectors.items[0],
m(aa.vector,X,1/Y),aa.texCoords[0]=0,aa.texCoords[1]=I,aa.direction[0]=0,aa.direction[1]=0,X=L.vectors.items[1],X.vector[0]=0,X.vector[1]=0,X.texCoords[0]=0,X.texCoords[1]=0,X.direction[0]=0,X.direction[1]=0,I=L.vectors.items[2],r(I.vector,S,m(f[9],T,da)),I.texCoords[0]=0,I.texCoords[1]=R,I.direction[0]=this._distanceAlongCorrection?T[0]:0,I.direction[1]=this._distanceAlongCorrection?T[1]:0,I=L.vectors.items[3],r(I.vector,U,m(f[10],l(f[11],P),da)),I.texCoords[0]=0,I.texCoords[1]=R,I.direction[0]=
this._distanceAlongCorrection?P[0]:0,I.direction[1]=this._distanceAlongCorrection?P[1]:0,L.vectors.count=4,P=L.lists[B.ENTRY],P.items[0]=0,P.items[1]=1,P.items[2]=2,P.count=3,P=L.lists[B.EXIT],P.items[0]=0,P.items[1]=1,P.items[2]=3,P.count=3,V<J?(J=L.lists[B.CAP],J.count=0,L.capCenter=void 0):(J=L.lists[B.CAP],J.items[0]=2,J.items[1]=3,J.count=2,L.capCenter=1)):fa||aa||(aa=L.vectors.items[0],m(aa.vector,X,1/Y),aa.texCoords[0]=0,aa.texCoords[1]=I,aa.direction[0]=0,aa.direction[1]=0,X=L.vectors.items[1],
m(X.vector,W,1/Y),X.texCoords[0]=0,X.texCoords[1]=R,X.direction[0]=0,X.direction[1]=0,L.vectors.count=2,P=L.lists[B.ENTRY],P.items[0]=0,P.items[1]=1,P.count=2,P=L.lists[B.EXIT],P.items[0]=0,P.items[1]=1,P.count=2,L.lists[B.CAP].count=0,L.capCenter=void 0);0>Q&&(w(L.lists[B.ENTRY]),w(L.lists[B.EXIT]))};K.prototype.roundJoin=function(L,T,P,Q){var J=k(T,P),R=0<J?[-1,1]:[1,-1],I=R[0];R=R[1];var S=0<J?l(f[0],e(f[1],T)):e(f[2],T),U=0<J?l(f[3],e(f[4],P)):e(f[5],P),V=f[6];V[0]=S[0]+U[0];V[1]=S[1]+U[1];var W=
n(f[7],V);V=l(f[8],W);var X=g(W,S);W=k(W,S);W=Math.abs(W/X);var Y=1+W*W<y?[W,this._distanceAlongCorrection]:[Math.sqrt(y-1),!0];W=Y[0];Y[1]?(Y=L.vectors.items[0],Y.vector[0]=S[0],Y.vector[1]=S[1],Y.texCoords[0]=0,Y.texCoords[1]=R,Y.direction[0]=0,Y.direction[1]=0,Y=L.vectors.items[1],Y.vector[0]=U[0],Y.vector[1]=U[1],Y.texCoords[0]=0,Y.texCoords[1]=R,Y.direction[0]=0,Y.direction[1]=0,Y=L.vectors.items[2],r(Y.vector,l(f[9],S),m(f[10],l(f[11],T),W)),Y.texCoords[0]=0,Y.texCoords[1]=I,Y.direction[0]=
this._distanceAlongCorrection?T[0]:0,Y.direction[1]=this._distanceAlongCorrection?T[1]:0,T=L.vectors.items[3],r(T.vector,l(f[12],U),m(f[13],P,W)),T.texCoords[0]=0,T.texCoords[1]=I,T.direction[0]=this._distanceAlongCorrection?P[0]:0,T.direction[1]=this._distanceAlongCorrection?P[1]:0,P=L.vectors.items[4],P.vector[0]=0,P.vector[1]=0,P.texCoords[0]=0,P.texCoords[1]=0,P.direction[0]=0,P.direction[1]=0,L.vectors.count=5,P=L.lists[B.ENTRY],P.items[0]=2,P.items[1]=4,P.items[2]=0,P.count=3,P=L.lists[B.EXIT],
P.items[0]=3,P.items[1]=4,P.items[2]=1,P.count=3,L.capCenter=4):(Y=L.vectors.items[0],Y.vector[0]=S[0],Y.vector[1]=S[1],Y.texCoords[0]=0,Y.texCoords[1]=R,Y.direction[0]=0,Y.direction[1]=0,Y=L.vectors.items[1],Y.vector[0]=U[0],Y.vector[1]=U[1],Y.texCoords[0]=0,Y.texCoords[1]=R,Y.direction[0]=0,Y.direction[1]=0,Y=L.vectors.items[2],m(Y.vector,V,1/X),Y.texCoords[0]=0,Y.texCoords[1]=I,Y.direction[0]=0,Y.direction[1]=0,T=L.vectors.items[3],T.vector[0]=0,T.vector[1]=0,T.texCoords[0]=0,T.texCoords[1]=0,
T.direction[0]=0,T.direction[1]=0,L.vectors.count=4,P=L.lists[B.ENTRY],P.items[0]=2,P.items[1]=3,P.items[2]=0,P.count=3,P=L.lists[B.EXIT],P.items[0]=2,P.items[1]=3,P.items[2]=1,P.count=3,L.capCenter=3);v(q,S,U,Q,0>J);Q=L.vectors.count;S=L.lists[B.CAP];for(U=S.items[0]=0;U<q.count;++U)P=q.items[U],I=L.vectors.items[Q+U],I.vector[0]=P[0],I.vector[1]=P[1],I.texCoords[0]=0,I.texCoords[1]=R,I.direction[0]=0,I.direction[1]=0,S.items[U+1]=Q+U;S.items[q.count+1]=1;S.count=q.count+2;L.vectors.count=Q+q.count;
0>J&&(w(L.lists[B.ENTRY]),w(L.lists[B.EXIT]))};K.prototype.unitRoundJoin=function(L,T,P,Q){var J=k(T,P),R=0<J?[-1,1]:[1,-1],I=R[0];R=R[1];T=0<J?l(f[0],e(f[1],T)):e(f[2],T);P=0<J?l(f[3],e(f[4],P)):e(f[5],P);var S=L.vectors.items[0];S.vector[0]=T[0];S.vector[1]=T[1];S.texCoords[0]=0;S.texCoords[1]=R;S.direction[0]=0;S.direction[1]=0;S=L.vectors.items[1];S.vector[0]=P[0];S.vector[1]=P[1];S.texCoords[0]=0;S.texCoords[1]=R;S.direction[0]=0;S.direction[1]=0;S=L.vectors.items[2];l(S.vector,T);S.texCoords[0]=
0;S.texCoords[1]=I;S.direction[0]=0;S.direction[1]=0;S=L.vectors.items[3];l(S.vector,P);S.texCoords[0]=0;S.texCoords[1]=I;S.direction[0]=0;S.direction[1]=0;I=L.vectors.items[4];I.vector[0]=0;I.vector[1]=0;I.texCoords[0]=0;I.texCoords[1]=0;I.direction[0]=0;I.direction[1]=0;L.vectors.count=5;I=L.lists[B.ENTRY];I.items[0]=2;I.items[1]=0;I.count=2;I=L.lists[B.EXIT];I.items[0]=3;I.items[1]=1;I.count=2;L.capCenter=4;v(q,T,P,Q,0>J);Q=L.vectors.count;T=L.lists[B.CAP];for(I=T.items[0]=0;I<q.count;++I)P=q.items[I],
S=L.vectors.items[Q+I],S.vector[0]=P[0],S.vector[1]=P[1],S.texCoords[0]=0,S.texCoords[1]=R,S.direction[0]=0,S.direction[1]=0,T.items[I+1]=Q+I;T.items[q.count+1]=1;T.count=q.count+2;L.vectors.count=Q+q.count;0>J&&(w(L.lists[B.ENTRY]),w(L.lists[B.EXIT]))};K.prototype.rectJoin=function(L,T,P){T=e(f[0],T);P=e(f[1],P);var Q=L.vectors.items[0];Q.vector[0]=T[0];Q.vector[1]=T[1];Q.texCoords[0]=0;Q.texCoords[1]=-1;Q.direction[0]=0;Q.direction[1]=0;Q=L.vectors.items[1];Q.vector[0]=P[0];Q.vector[1]=P[1];Q.texCoords[0]=
0;Q.texCoords[1]=-1;Q.direction[0]=0;Q.direction[1]=0;Q=L.vectors.items[2];l(Q.vector,T);Q.texCoords[0]=0;Q.texCoords[1]=1;Q.direction[0]=0;Q.direction[1]=0;T=L.vectors.items[3];l(T.vector,P);T.texCoords[0]=0;T.texCoords[1]=1;T.direction[0]=0;T.direction[1]=0;L.vectors.count=4;T=L.lists[B.ENTRY];T.items[0]=0;T.items[1]=2;T.count=2;T=L.lists[B.EXIT];T.items[0]=1;T.items[1]=3;T.count=2;L.capCenter=void 0};return K}();h.Tessellator=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u){Object.defineProperty(h,"__esModule",{value:!0});var v=d.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");A=function(w){function B(C,y,a,c,f,q,t,x,z,D,F){if(255<t||255<x)v.error("mapview-oversized-resource","Marker size was clamped to the maximum allowed value of 200x200 pixels"),t>x?(x*=255/t,t=255):(t*=255/x,x=255);var G=w.call(this)||this;G.geometryType=l.WGLGeometryType.MARKER;var E=n.create(),H=p.create(),O=F.sdf?.5:1;p.translate(H,H,new Float32Array([O*
a,O*-c]));f&&p.rotate(H,H,3.14159265359/180*f);G._materialStore=C;G.vvFlags=y;G._materialId=C.createSpriteMaterial(F,G.geometryType,y);G._fillColor=q;G._outlineColor=z;G._sizeOutlineWidth=m.i8888to32(t,x,D,0);C=Math.round(F.rect.x/4);y=Math.round(F.rect.y/4);f=C+Math.round(F.rect.width/4);F=y+Math.round(F.rect.height/4);E.set([-.5*t,-.5*x]);n.transformMat2d(E,E,H);G._offsetUpperLeft=m.i1616to32(E[0],E[1]);G._texUpperLeft=m.i8888to32(C,y,0,0);E.set([.5*t,-.5*x]);n.transformMat2d(E,E,H);G._offsetUpperRight=
m.i1616to32(E[0],E[1]);G._texUpperRight=m.i8888to32(f,y,0,0);E.set([-.5*t,.5*x]);n.transformMat2d(E,E,H);G._offsetBottomLeft=m.i1616to32(E[0],E[1]);G._texBottomLeft=m.i8888to32(C,F,0,0);E.set([.5*t,.5*x]);n.transformMat2d(E,E,H);G._offsetBottomRight=m.i1616to32(E[0],E[1]);G._texBottomRight=m.i8888to32(f,F,0,0);G.height=x;G.width=t;G.xOffset=a;G.yOffset=c;return G}b(B,w);B.fromPictureMarker=function(C,y,a,c,f){f=Math.round(g.pt2px(a.width));var q=Math.round(g.pt2px(a.height)),t=k.PICTURE_FILL_COLOR,
x=Math.round(g.pt2px(a.xoffset||0)),z=Math.round(g.pt2px(a.yoffset||0));return new B(C,y,x,z,a.angle,t,f,q,0,0,c)};B.fromSimpleMarker=function(C,y,a,c,f){f=e.premultiplyAlphaRGBA(a.color);var q=Math.round(g.pt2px(a.size)),t=Math.round(g.pt2px(a.xoffset||0)),x=Math.round(g.pt2px(a.yoffset||0)),z=a.outline,D=(z&&z.color&&e.premultiplyAlphaRGBA(z.color))|0;z=(z&&z.width&&Math.round(g.pt2px(z.width)))|0;return new B(C,y,t,x,a.angle,f,q,q,D,z,c)};B.prototype.writeMesh=function(C,y,a,c,f,q,t){q=this._materialStore.get(this._materialId);
var x=y.indexVector;y=y.get("geometry");var z=new r(c,this.geometryType,this._materialId),D=this._getOffset(y,q);C.push(z);z.vertexFrom=D;z.indexFrom=x.length;switch(a){case "esriGeometryPoint":a=f.geometry;C=a.x;a=a.y;this._writeVertices(z,y,c,this._getPos(C,a),q,t);this._writeIndices(z,x,D);break;case "esriGeometryPolyline":this._writeMany(z,x,y,D,c,f.geometry.paths[0],q,t);break;case "esriGeometryPolygon":(a=f.centroid)?(C=a.x,a=a.y,this._writeVertices(z,y,c,this._getPos(C,a),q,t),this._writeIndices(z,
x,D)):v.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(z,x,y,D,c,f.geometry.points,q,t);break;default:v.error("Unable to handle geometryType: "+a)}};B.prototype._getPos=function(C,y){return m.i1616to32(C,y)};B.prototype._writeMany=function(C,y,a,c,f,q,t,x){for(var z=0,D=0,F=0,G=0;G<q.length;G++){var E=q[G],H=E[0];E=E[1];this._writeVertices(C,a,f,this._getPos(H+z,E+D),t,x);this._writeIndices(C,y,c+F);z+=H;D+=E;F+=4}};
B.prototype._getOffset=function(C,y){y=y.materialKeyInfo.hasVV()?11:7;return C.length/y};B.prototype._writeVertices=function(C,y,a,c,f,q){y.push(c);y.push(this._offsetUpperLeft);y.push(this._texUpperLeft);y.push(a);y.push(this._fillColor);y.push(this._outlineColor);y.push(this._sizeOutlineWidth);this._writeVV(y,q,f);y.push(c);y.push(this._offsetUpperRight);y.push(this._texUpperRight);y.push(a);y.push(this._fillColor);y.push(this._outlineColor);y.push(this._sizeOutlineWidth);this._writeVV(y,q,f);y.push(c);
y.push(this._offsetBottomLeft);y.push(this._texBottomLeft);y.push(a);y.push(this._fillColor);y.push(this._outlineColor);y.push(this._sizeOutlineWidth);this._writeVV(y,q,f);y.push(c);y.push(this._offsetBottomRight);y.push(this._texBottomRight);y.push(a);y.push(this._fillColor);y.push(this._outlineColor);y.push(this._sizeOutlineWidth);this._writeVV(y,q,f);C.vertexCount+=4};B.prototype._writeVV=function(C,y,a){a.materialKeyInfo.hasVV()&&(C.push(y[l.VVType.SIZE]),C.push(y[l.VVType.COLOR]),C.push(y[l.VVType.OPACITY]),
C.push(y[l.VVType.ROTATION]))};B.prototype._writeIndices=function(C,y,a){y.push(a+0);y.push(a+1);y.push(a+2);y.push(a+1);y.push(a+3);y.push(a+2);C.indexCount+=6};return B}(u.default);h.default=A})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat2d":function(){define(["./common"],function(A){var h={create:function(){var b=new A.ARRAY_TYPE(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var d=new A.ARRAY_TYPE(6);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];return d},
copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},fromValues:function(b,d,g,p,n,e){var k=new A.ARRAY_TYPE(6);k[0]=b;k[1]=d;k[2]=g;k[3]=p;k[4]=n;k[5]=e;return k},set:function(b,d,g,p,n,e,k){b[0]=d;b[1]=g;b[2]=p;b[3]=n;b[4]=e;b[5]=k;return b},invert:function(b,d){var g=d[0],p=d[1],n=d[2],e=d[3],k=d[4];d=d[5];var l=g*e-p*n;if(!l)return null;l=1/l;b[0]=e*l;b[1]=-p*l;b[2]=-n*l;b[3]=g*l;b[4]=
(n*d-e*k)*l;b[5]=(p*k-g*d)*l;return b},determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=d[4];d=d[5];var m=g[0],r=g[1],u=g[2],v=g[3],w=g[4];g=g[5];b[0]=p*m+e*r;b[1]=n*m+k*r;b[2]=p*u+e*v;b[3]=n*u+k*v;b[4]=p*w+e*g+l;b[5]=n*w+k*g+d;return b}};h.mul=h.multiply;h.rotate=function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=d[4];d=d[5];var m=Math.sin(g);g=Math.cos(g);b[0]=p*g+e*m;b[1]=n*g+k*m;b[2]=p*-m+e*g;b[3]=n*-m+k*g;b[4]=l;b[5]=d;return b};h.scale=
function(b,d,g){var p=d[1],n=d[2],e=d[3],k=d[4],l=d[5],m=g[0];g=g[1];b[0]=d[0]*m;b[1]=p*m;b[2]=n*g;b[3]=e*g;b[4]=k;b[5]=l;return b};h.translate=function(b,d,g){var p=d[0],n=d[1],e=d[2],k=d[3],l=d[4];d=d[5];var m=g[0];g=g[1];b[0]=p;b[1]=n;b[2]=e;b[3]=k;b[4]=p*m+e*g+l;b[5]=n*m+k*g+d;return b};h.fromRotation=function(b,d){var g=Math.sin(d);d=Math.cos(d);b[0]=d;b[1]=g;b[2]=-g;b[3]=d;b[4]=0;b[5]=0;return b};h.fromScaling=function(b,d){b[0]=d[0];b[1]=0;b[2]=0;b[3]=d[1];b[4]=0;b[5]=0;return b};h.fromTranslation=
function(b,d){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=d[0];b[5]=d[1];return b};h.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};h.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};h.add=function(b,d,g){b[0]=d[0]+g[0];b[1]=d[1]+g[1];b[2]=d[2]+g[2];b[3]=d[3]+g[3];b[4]=d[4]+g[4];b[5]=d[5]+g[5];return b};h.subtract=function(b,d,g){b[0]=d[0]-g[0];b[1]=d[1]-g[1];b[2]=d[2]-g[2];
b[3]=d[3]-g[3];b[4]=d[4]-g[4];b[5]=d[5]-g[5];return b};h.sub=h.subtract;h.multiplyScalar=function(b,d,g){b[0]=d[0]*g;b[1]=d[1]*g;b[2]=d[2]*g;b[3]=d[3]*g;b[4]=d[4]*g;b[5]=d[5]*g;return b};h.multiplyScalarAndAdd=function(b,d,g,p){b[0]=d[0]+g[0]*p;b[1]=d[1]+g[1]*p;b[2]=d[2]+g[2]*p;b[3]=d[3]+g[3]*p;b[4]=d[4]+g[4]*p;b[5]=d[5]+g[5]*p;return b};h.exactEquals=function(b,d){return b[0]===d[0]&&b[1]===d[1]&&b[2]===d[2]&&b[3]===d[3]&&b[4]===d[4]&&b[5]===d[5]};h.equals=function(b,d){var g=b[0],p=b[1],n=b[2],
e=b[3],k=b[4];b=b[5];var l=d[0],m=d[1],r=d[2],u=d[3],v=d[4];d=d[5];return Math.abs(g-l)<=A.EPSILON*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(p-m)<=A.EPSILON*Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(n-r)<=A.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(e-u)<=A.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(k-v)<=A.EPSILON*Math.max(1,Math.abs(k),Math.abs(v))&&Math.abs(b-d)<=A.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))};return h})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../Geometry ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ../../util/BidiText".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w){Object.defineProperty(h,"__esModule",{value:!0});var B=d.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),C=24*1.2,y=function(){function a(c,f,q,t,x,z,D,F,G){this.materialId=c;this.vertexOffsetUpperLeft=f;this.vertexOffsetUpperRight=q;this.vertexOffsetLowerLeft=t;this.vertexOffsetLowerRight=x;this.texFontSizeUpperLeft=z;this.texFontSizeUpperRight=D;this.texFontSizeLowerLeft=F;this.texFontSizeLowerRight=G}a.from=function(c,f,q,t,x){var z=c.glyphMosaicItem,
D=z.rect,F=z.metrics,G=Math.round(D.x/4),E=Math.round(D.y/4);z=G+Math.round(D.width/4);var H=E+Math.round(D.height/4);if(c.codePoint){var O=c.x+0+F.left;c=c.y+-17-F.top;c=new k.Point(O-4,c-4);D=new k.Point(c.x+D.width,c.y+D.height)}else O=c.x,c=c.y,c=new k.Point(O,c),D=new k.Point(c.x+F.width,c.y+F.height);F=new k.Point(c.x,D.y);O=new k.Point(D.x,c.y);if(q){var K=Math.cos(q);q=Math.sin(q);c.rotate(K,q);D.rotate(K,q);F.rotate(K,q);O.rotate(K,q)}q=l.i1616to32(8*c.x,8*c.y);c=l.i1616to32(8*O.x,8*O.y);
F=l.i1616to32(8*F.x,8*F.y);D=l.i1616to32(8*D.x,8*D.y);O=l.i8888to32(G,E,t,x);E=l.i8888to32(z,E,t,x);G=l.i8888to32(G,H,t,x);t=l.i8888to32(z,H,t,x);return new a(f,q,c,F,D,O,E,G,t)};return a}();h.ComputedGlyph=y;A=function(a){function c(f,q,t){var x=a.call(this)||this;x.geometryType=e.WGLGeometryType.TEXT;var z=t.haloColor;x.color=(t.color&&p.premultiplyAlphaRGBA(t.color))|0;x.textSize=g.pt2px(t.font.size);var D=t.yoffset/t.font.size;x.shapingXOffset=t.xoffset/t.font.size*24;x.shapingYOffset=24*D;x.haloColor=
(z&&p.premultiplyAlphaRGBA(z))|0;x.haloSize=10*g.pt2px(g.toPt(t.haloSize||0));x.textPropColor=x.color||n.PICTURE_FILL_COLOR;x.textPropSize=g.pt2px(t.font.size);x.textPropAngle=t.angle*Math.PI/180;x.xOffset=g.pt2px(t.xoffset);x.yOffset=g.pt2px(t.yoffset);x.textPropHAnchor="left"===t.horizontalAlignment?0:"right"===t.horizontalAlignment?1:.5;x.textPropVAnchor="top"===t.verticalAlignment?0:"bottom"===t.verticalAlignment?1:.5;x.textPropHaloColor=x.haloColor||4294967295;x.textPropHaloSize=g.pt2px(g.toPt(t.haloSize||
0));x._materialStore=f;x.vvFlags=q;return x}b(c,a);c.fromText=function(f,q,t,x,z){f=new c(f,q,t);f.computeGlyphs(z,t.text,!1);return f};c.prototype.writeMesh=function(f,q,t,x,z,D,F){D=q.indexVector;var G=q.get("geometry");q=q.get("visibility");var E=this._getOffset(G);switch(t){case "esriGeometryPoint":z=z.geometry;t=z.x;z=z.y;this._writeVertices(f,D,G,q,E,x,t,z,F);break;case "esriGeometryPolygon":if(z.centroid){z=z.centroid;t=z.x;z=z.y;this._writeVertices(f,D,G,q,E,x,t,z,F);break}default:B.error("Unable to handle geometryType: "+
t)}};c.prototype.computeGlyphs=function(f,q,t){if(!q||!q.length)return this._computedGlyphs=[],null;f=this._computeShaping(f,240,C,0,this.shapingXOffset,this.shapingYOffset,this.textPropHAnchor,this.textPropVAnchor,.5);q=w.bidiText(q);q=f.getShaping(q[0],q[1]);f=Array(q.length);for(var x=0;x<q.length;x++){var z=this.textPropAngle,D=this.textSize,F=this.haloSize,G=this._materialStore.createGlyphMaterial(q[x].glyphMosaicItem,e.WGLGeometryType.TEXT,this.vvFlags);f[x]=y.from(q[x],G,z,D,F)}this._computedGlyphs=
f;if(!t)return null;t=m.getBox(q);t.width*=this.textSize/24;t.height*=this.textSize/24;return new u.default(t.x,t.y,t.width,t.height)};c.prototype._computeShaping=function(f,q,t,x,z,D,F,G,E){return this._shaping=new m([f],240,C,0,[z,D],F,G,.5)};c.prototype._getOffset=function(f){return f.length/(this.vvFlags?9:5)};c.prototype._writeVertices=function(f,q,t,x,z,D,F,G,E){var H=this._computedGlyphs,O=l.i1616to32(2*F,2*G);F=l.i1616to32(2*F+1,2*G);G=0;if(this.haloSize)for(var K=0;K<H.length;K++,G+=4){var L=
H[K].materialId,T=this._materialStore.get(L);L=new r(D,this.geometryType,L);L.vertexFrom=z;L.indexFrom=q.length;this._writeVertex(L,t,x,D,F,this.haloColor,H[K],T,E);this._writeIndices(L,q,z+G);f.push(L)}for(K=0;K<H.length;K++,G+=4)L=H[K].materialId,T=this._materialStore.get(L),L=new r(D,this.geometryType,L),L.vertexFrom=z,L.indexFrom=q.length,this._writeVertex(L,t,x,D,O,this.color,H[K],T,E),this._writeIndices(L,q,z+G),f.push(L)};c.prototype._writeVertex=function(f,q,t,x,z,D,F,G,E){q.push(z);q.push(x);
q.push(D);q.push(F.vertexOffsetUpperLeft);q.push(F.texFontSizeUpperLeft);this._writeVV(q,E,G);q.push(z);q.push(x);q.push(D);q.push(F.vertexOffsetUpperRight);q.push(F.texFontSizeUpperRight);this._writeVV(q,E,G);q.push(z);q.push(x);q.push(D);q.push(F.vertexOffsetLowerLeft);q.push(F.texFontSizeLowerLeft);this._writeVV(q,E,G);q.push(z);q.push(x);q.push(D);q.push(F.vertexOffsetLowerRight);q.push(F.texFontSizeLowerRight);this._writeVV(q,E,G);t.push(4294967295);f.vertexCount+=4};c.prototype._writeVV=function(f,
q,t){t.materialKeyInfo.hasVV()&&(f.push(q[e.VVType.SIZE]),f.push(q[e.VVType.COLOR]),f.push(q[e.VVType.OPACITY]),f.push(q[e.VVType.ROTATION]))};c.prototype._writeIndices=function(f,q,t){q.push(t+0);q.push(t+1);q.push(t+2);q.push(t+1);q.push(t+3);q.push(t+2);f.indexCount+=6};return c}(v.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(A,h,b){return function(){function d(g,p,n,e,k,l,m,r){this._glyphItems=g;this._maxWidth=
p;this._lineHeight=n;this._letterSpacing=e;this._offset=k;this._hAnchor=l;this._vAnchor=m;this._justify=r}d.prototype.getShaping=function(g,p){for(var n=this._letterSpacing,e=this._lineHeight,k=this._justify,l=this._maxWidth,m=[],r=0,u=0,v=0,w=0,B=-1,C=0,y=-1,a=g.length,c=0;c<a;c++){var f=g.charCodeAt(c);if(10===f){if(c!==a-1){if(B>=w){r=m[B];var q=r.x+r.glyphMosaicItem.metrics.advance;C=Math.max(q,C);k&&this._applyJustification(m,w,B);w=m.length}u=p?u-e:u+e;r=0;++v}}else{q=void 0;for(var t=0,x=this._glyphItems;t<
x.length&&!(q=x[t][f]);t++);if(q){m.push({codePoint:f,x:r,y:u,glyphMosaicItem:q});r+=q.metrics.advance+n;if(0<l&&r>l&&0<=y){t=y+1;q=m[t].x;C=Math.max(q,C);for(x=t;x<m.length;x++)m[x].y=p?m[x].y-e:m[x].y+e,m[x].x-=q;k&&this._applyJustification(m,w,y);u=p?u-e:u+e;r-=q;++v;w=t;y=-1}++B;32===f&&(y=m.length-1)}}}B>=w&&(r=m[B],C=Math.max(C,r.x+r.glyphMosaicItem.metrics.advance),k&&this._applyJustification(m,w,B));if(0<m.length)for(g=(k-this._hAnchor)*C,n=(-this._vAnchor*(v+1)+.5)*e,p&&v&&(n+=v*e),g+=this._offset[0],
n+=this._offset[1],p=0;p<m.length;p++)e=m[p],e.x+=g,e.y+=n;return m};d.getBox=function(g){var p=g.length;if(0!==p){for(var n=g[0].x+g[0].glyphMosaicItem.metrics.left,e=n,k=g[0].y,l=k,m=k,r=1;r<p;r++){var u=g[r],v=u.x+u.glyphMosaicItem.metrics.left;v<n&&(n=v);v>e&&(e=v);u=u.y;u<k&&(k=u);u>l&&(l=u);u!==m&&(e=Math.max(e,g[r-1].x+g[r-1].glyphMosaicItem.metrics.left+g[r-1].glyphMosaicItem.metrics.width),m=u)}e=Math.max(e,g[p-1].x+g[p-1].glyphMosaicItem.metrics.left+g[p-1].glyphMosaicItem.metrics.width);
l+=12;return{x:n,y:l,width:e-n,height:l-(k-12)}}};d.addDecoration=function(g,p){var n=g.length;if(0!==n){for(var e=g[0].x+g[0].glyphMosaicItem.metrics.left,k=g[0].y,l=1;l<n;l++){var m=g[l];if(m.y!==k){var r=g[l-1].x+g[l-1].glyphMosaicItem.metrics.left+g[l-1].glyphMosaicItem.metrics.width;g.push({codePoint:0,x:e,y:k+p-3,glyphMosaicItem:{rect:new b(4,0,4,8),metrics:{width:r-e,height:8,left:0,top:0,advance:0},page:0}});k=m.y;e=m.x+m.glyphMosaicItem.metrics.left}}n=g[n-1].x+g[n-1].glyphMosaicItem.metrics.left+
g[n-1].glyphMosaicItem.metrics.width;g.push({codePoint:0,x:e,y:k+p-3,glyphMosaicItem:{rect:new b(4,0,4,8),metrics:{width:n-e,height:8,left:0,top:0,advance:0},page:0}})}};d.prototype._applyJustification=function(g,p,n){var e=g[n];for(e=(e.x+e.glyphMosaicItem.metrics.advance)*this._justify;p<=n;p++)g[p].x-=e};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(A,h){return function(){function b(d,g,p,n){void 0===d&&(d=0);void 0===g&&(g=
0);void 0===p&&(p=0);void 0===n&&(n=0);this.x=d;this.y=g;this.width=p;this.height=n}Object.defineProperty(b.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});var d=new b;h.bidiText=function(g){if(!d.hasBidiChar(g))return[g,!1];var p="rtl"===
d.checkContextual(g)?"IDNNN":"ICNNN";return[d.bidiTransform(g,p,"VLYSN"),!0]}})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(A,h,b){function d(ca,ha,la,ma,ea){var ia=ca;void 0===ha&&(ha=ea.defInFormat);void 0===la&&(la=ea.defOutFormat);void 0===ma&&(ma=ea.defSwap);if(ha!==la){var ja=ha.substring(0,1);var ra=ha.substring(1,4);var qa=la.substring(0,1),ua=la.substring(1,4);"C"===ra.charAt(0)&&(ra=g(ia),ra="ltr"===ra||"rtl"===ra?ra.toUpperCase():
"L"===ha.charAt(2)?"LTR":"RTL",ha=ja+ra);"C"===ua.charAt(0)&&(ra=g(ia),"rtl"===ra?ua="RTL":"ltr"===ra?(ia=ia.split(""),ia.reverse(),ra=g(ia.join("")),ua=ra.toUpperCase()):ua="L"===la.charAt(2)?"LTR":"RTL",la=qa+ua)}if(ha===la)return ca;qa=ha.substring(0,1);ia=ha.substring(1,4);ja=la.substring(0,1);ua=la.substring(1,4);ea.inFormat=ha;ea.outFormat=la;ea.swap=ma;if("L"===qa&&"VLTR"===la){if("LTR"===ia)return ea.dir=x,p(ca,ea);if("RTL"===ia)return ea.dir=z,p(ca,ea)}if("V"===qa&&"V"===ja)return ea.dir=
"RTL"===ia?z:x,e(ca,ea);if("L"===qa&&"VRTL"===la)return ea.dir="LTR"===ia?x:z,ca=p(ca,ea),e(ca);if("VLTR"===ha&&"LLTR"===la)return ea.dir=x,p(ca,ea);if("V"===qa&&"L"===ja&&ia!==ua)return ca=e(ca),"RTL"===ia?d(ca,"LLTR","VLTR",ma,ea):d(ca,"LRTL","VRTL",ma,ea);if("VRTL"===ha&&"LRTL"===la)return d(ca,"LRTL","VRTL",ma,ea);if("L"===qa&&"L"===ja)return ha=ea.swap,ea.swap=ha.substr(0,1)+"N","RTL"===ia?(ea.dir=z,ca=p(ca,ea),ea.swap="N"+ha.substr(1,2),ea.dir=x,ca=p(ca,ea)):(ea.dir=x,ca=p(ca,ea),ea.swap="N"+
ha.substr(1,2),ca=d(ca,"VLTR","LRTL",ea.swap,ea)),ca}function g(ca){return(ca=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(ca))?"z">=ca[0]?"ltr":"rtl":""}function p(ca,ha){ca=ca.split("");var la=[];n(ca,la,ha);if(0!==ha.hiLevel&&ha.swap.substr(0,1)!==ha.swap.substr(1,2))for(var ma=0;ma<ca.length;ma++)if(1===la[ma]){var ea=ma;b:{var ia=void 0;for(var ja=ca[ma],ra=0,qa=G.length-1;ra<=qa;)if(ia=Math.floor((ra+qa)/2),ja<G[ia][0])qa=ia-1;else if(ja>G[ia][0])ra=ia+1;
else{ia=G[ia][1];break b}ia=ja}ca[ea]=ia}m(2,ca,la,ha);m(1,ca,la,ha);c=la;return ca.join("")}function n(ca,ha,la){var ma=ca.length,ea=la.dir?V:U,ia=null,ja=null,ra=null;ia=0;ja=ja=null;var qa=-1,ua=ja=null,wa=[],za=[];la.hiLevel=la.dir;la.lastArabic=!1;la.hasUbatAl=!1;la.hasUbatB=!1;la.hasUbatS=!1;for(ja=0;ja<ma;ja++){ua=ja;ra=ca[ja].charCodeAt(0);var Aa=Ga[ra>>8];wa[ua]=Aa<va?Aa:Ha[Aa-va][ra&255]}for(ua=0;ua<ma;ua++){za[ua]=ja=r(ca,wa,za,ua,la);ia=ea[ia][ja];ja=ia&240;ia&=15;ha[ua]=ra=ea[ia][q];
if(0<ja){if(16===ja)for(ja=qa;ja<ua;ja++)ha[ja]=1;qa=-1}if(ja=ea[ia][t])-1===qa&&(qa=ua);else if(-1<qa){for(ja=qa;ja<ua;ja++)ha[ja]=ra;qa=-1}wa[ua]===ba&&(ha[ua]=0);la.hiLevel|=ra}if(la.hasUbatS)for(ca=0;ca<ma;ca++)if(wa[ca]===fa)for(ha[ca]=la.dir,ea=ca-1;0<=ea;ea--)if(wa[ea]===oa)ha[ea]=la.dir;else break}function e(ca,ha){ca=ca.split("");if(ha){var la=[];n(ca,la,ha);c=la}ca.reverse();y.reverse();return ca.join("")}function k(ca){for(var ha=0;ha<I.length;ha++)if(ca>=I[ha]&&ca<=S[ha])return!0;return!1}
function l(ca,ha,la,ma){for(;ha*la<ma&&v(ca[ha]);)ha+=la;return ha*la<ma&&k(ca[ha])?!0:!1}function m(ca,ha,la,ma){if(!(ma.hiLevel<ca))if(1!==ca||ma.dir!==z||ma.hasUbatB){ma=ha.length;for(var ea=0,ia,ja,ra;ea<ma;){if(la[ea]>=ca){for(ia=ea+1;ia<ma&&la[ia]>=ca;)ia++;for(ja=ia-1;ea<ja;ea++,ja--)ra=ha[ea],ha[ea]=ha[ja],ha[ja]=ra,ra=y[ea],y[ea]=y[ja],y[ja]=ra;ea=ia}ea++}}else ha.reverse(),y.reverse()}function r(ca,ha,la,ma,ea){return{UBAT_L:function(){ea.lastArabic=!1;return W},UBAT_R:function(){ea.lastArabic=
!1;return X},UBAT_ON:function(){return aa},UBAT_AN:function(){return da},UBAT_EN:function(){return ea.lastArabic?da:Y},UBAT_AL:function(){ea.lastArabic=!0;ea.hasUbatAl=!0;return X},UBAT_WS:function(){return aa},UBAT_CS:function(){var ia,ja;if(1>ma||ma+1>=ha.length||(ia=la[ma-1])!==Y&&ia!==da||(ja=ha[ma+1])!==Y&&ja!==da)return aa;ea.lastArabic&&(ja=da);return ja===ia?ja:aa},UBAT_ES:function(){return(0<ma?la[ma-1]:ba)===Y&&ma+1<ha.length&&ha[ma+1]===Y?Y:aa},UBAT_ET:function(){if(0<ma&&la[ma-1]===Y)return Y;
if(ea.lastArabic)return aa;for(var ia=ma+1,ja=ha.length;ia<ja&&ha[ia]===sa;)ia++;return ia<ja&&ha[ia]===Y?Y:aa},UBAT_NSM:function(){if("VLTR"===ea.inFormat){for(var ia=ha.length,ja=ma+1;ja<ia&&ha[ja]===ta;)ja++;if(ja<ia&&(ia=ca[ma],ja=ha[ja],(1425<=ia&&2303>=ia||64286===ia)&&(ja===X||ja===ka)))return X}return 1>ma||ha[ma-1]===ba?aa:la[ma-1]},UBAT_B:function(){ea.lastArabic=!0;ea.hasUbatB=!0;return ea.dir},UBAT_S:function(){ea.hasUbatS=!0;return aa},UBAT_LRE:function(){ea.lastArabic=!1;return aa},
UBAT_RLE:function(){ea.lastArabic=!1;return aa},UBAT_LRO:function(){ea.lastArabic=!1;return aa},UBAT_RLO:function(){ea.lastArabic=!1;return aa},UBAT_PDF:function(){ea.lastArabic=!1;return aa},UBAT_BN:function(){return aa}}[xa[ha[ma]]]()}function u(ca,ha){for(var la=0;la<K.length;la++)if(ca===K[la])return ha[la];return ca}function v(ca){return"\u064b"<=ca&&"\u0655">=ca?!0:!1}function w(ca){if("L"===ca)return"LTR";if("R"===ca)return"RTL";if("C"===ca)return"CLR";if("D"===ca)return"CRL"}function B(ca,
ha){for(var la=0;la<E.length;la++)if(ca===E[la])return ha[la];return ca}function C(ca,ha,la,ma){for(var ea=0;ea<ca.length;ea++)if(ca[ea]>ha||!la&&ca[ea]===ha)ca[ea]+=ma}A.getObject("string",!0,dojox);A=h("dojox.string.BidiEngine",b,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(ca,ha,la){this.sourceToTarget=[];this.targetToSource=[];if(!ca)return"";var ma=this.sourceToTarget,ea=this.targetToSource,ia=ca.length;y=[];c=[];for(var ja=0;ja<
ia;ja++)ma[ja]=ja,ea[ja]=ja,y[ja]=ja;if(!this.checkParameters(ha,la))return ca;ha=this.inputFormat;la=this.outputFormat;ma=ca;ma=f;ja=w(ha.charAt(1));ea=w(la.charAt(1));var ra="I"===ha.charAt(0)?"L":ha.charAt(0);ia="I"===la.charAt(0)?"L":la.charAt(0);ja=ra+ja;ea=ia+ea;ia=ha.charAt(2)+la.charAt(2);ma.defInFormat=ja;ma.defOutFormat=ea;ma.defSwap=ia;ca=d(ca,ja,ea,ia,ma);ma=!1;if("R"===la.charAt(1))ma=!0;else if("C"===la.charAt(1)||"D"===la.charAt(1))ma=this.checkContextual(ca);ea=this.sourceToTarget=
y;ia=Array(ea.length);for(ja=0;ja<ea.length;ja++)ia[ea[ja]]=ja;a=this.targetToSource=ia;if(ha.charAt(3)===la.charAt(3))ma=ca;else if("S"===la.charAt(3))if(ha=ma,la=!0,0===ca.length)ma=void 0;else{void 0===ha&&(ha=!0);void 0===la&&(la=!0);ca=String(ca);ca=ca.split("");var qa=0;ea=1;ma=ca.length;ha||(qa=ca.length-1,ea=-1,ma=1);ia=ma;ja=la;var ua=0;ma=[];for(ra=0;qa*ea<ia;qa+=ea)if(k(ca[qa])||v(ca[qa])){var wa;if(wa="\u0644"===ca[qa])b:{for(var za=ca,Aa=qa+ea,Ca=ea,Fa=ia;Aa*Ca<Fa&&v(za[Aa]);)Aa+=Ca;
wa=" ";if(Aa*Ca<Fa)for(wa=za[Aa],za=0;za<E.length;za++)if(E[za]===wa){wa=!0;break b}wa=!1}if(wa){ca[qa]=0===ua?B(ca[qa+ea],H):B(ca[qa+ea],O);qa+=ea;ua=ca;wa=qa;za=ea;for(Aa=ia;wa*za<Aa&&v(ua[wa]);)wa+=za;wa*za<Aa&&(ua[wa]=" ");ja&&(ma[ra]=qa,ra++);ua=0}else{wa=ca[qa];if(1===ua){za=qa;if(l(ca,qa+ea,ea,ia))b:for(Aa=ca[qa],Ca=0;Ca<K.length;Ca++){if(Aa===K[Ca]){Aa=P[Ca];break b}}else Aa=u(ca[qa],T);ca[za]=Aa}else!0===l(ca,qa+ea,ea,ia)?ca[qa]=u(ca[qa],Q):ca[qa]=u(ca[qa],L);v(wa)||(ua=1);b:{for(za=0;za<
J.length;za++)if(J[za]===wa){wa=!0;break b}wa=!1}!0===wa&&(ua=0)}}else ua=0;ea="";for(ia=0;ia<ca.length;ia++){if(ja=la){b:{for(ja=0;ja<ma.length;ja++)if(ma[ja]===ia)break b;ja=-1}ja=-1<ja}ja?(C(a,ia,!ha,-1),y.splice(ia,1)):ea+=ca[ia]}ma=ea}else if(ha=ca,la=ma,ca=!0,0===ha.length)ma=void 0;else for(void 0===ca&&(ca=!0),void 0===la&&(la=!0),ha=String(ha),ma="",ea=[],ea=ha.split(""),ia=0;ia<ha.length;ia++)ja=!1,"\ufe70"<=ea[ia]&&"\ufeff">ea[ia]?(ra=ha.charCodeAt(ia),"\ufef5"<=ea[ia]&&"\ufefc">=ea[ia]?
(la?(0<ia&&ca&&" "===ea[ia-1]?ma=ma.substring(0,ma.length-1)+"\u0644":(ma+="\u0644",ja=!0),ma+=E[(ra-65269)/2]):(ma+=E[(ra-65269)/2],ma+="\u0644",ia+1<ha.length&&ca&&" "===ea[ia+1]?ia++:ja=!0),ja&&(C(a,ia,!0,1),y.splice(ia,0,y[ia]))):ma+=R[ra-65136]):ma+=ea[ia];this.sourceToTarget=y;this.targetToSource=a;this.levels=c;return ma},_inputFormatSetter:function(ca){if(!D.test(ca))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=ca},_outputFormatSetter:function(ca){if(!D.test(ca))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.outputFormat=ca},checkParameters:function(ca,ha){ca?this.set("inputFormat",ca):ca=this.inputFormat;ha?this.set("outputFormat",ha):ha=this.outputFormat;return ca===ha?!1:!0},checkContextual:function(ca){ca=g(ca);if("ltr"!==ca&&"rtl"!==ca){try{ca=document.dir.toLowerCase()}catch(ha){}"ltr"!==ca&&"rtl"!==ca&&(ca="ltr")}return ca},hasBidiChar:function(ca){return F.test(ca)}});var y=[],a=[],c=[],f={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",
hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},q=5,t=6,x=0,z=1,D=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,F=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59",
"\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],E=["\u0622","\u0623","\u0625","\u0627"],H=["\ufef5","\ufef7","\ufef9","\ufefb"],O=["\ufef6","\ufef8","\ufefa","\ufefc"],K="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
L="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),T="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
P="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),Q="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
J="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),R="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
I=["\u0621","\u0641"],S=["\u063a","\u064a"],U=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],V=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],W=0,X=1,Y=2,da=3,aa=4,ba=5,fa=6,ka=7,oa=8,sa=11,ta=12,xa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),va=100;h=W;b=X;var na=Y,ya=da,M=aa,Da=ba,Ea=fa,N=ka,Ba=oa,pa=
sa,Z=ta,Ga=[va+0,h,h,h,h,va+1,va+2,va+3,b,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,va+4,M,M,M,h,M,h,M,h,M,M,M,h,h,M,M,h,h,h,h,h,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,h,h,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,h,h,M,M,h,h,M,M,h,h,M,M,M,M,M,M,M,M,M,M,M,M,
M,M,M,M,M,M,M,M,M,M,M,h,h,h,va+5,N,N,va+6,va+7],Ha=[[18,18,18,18,18,18,18,18,18,Ea,Da,Ea,Ba,Da,18,18,18,18,18,18,18,18,18,18,18,18,18,18,Da,Da,Da,Ea,Ba,M,M,pa,pa,pa,M,M,M,M,M,10,9,10,9,9,na,na,na,na,na,na,na,na,na,na,9,M,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,M,18,18,18,18,18,18,Da,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,M,pa,pa,pa,pa,M,M,M,M,h,M,M,18,M,M,pa,pa,na,na,
M,h,M,M,M,na,h,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,h,h,h,h,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,M,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,h,h,h,h,h,h,h,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,h,M,M,M,M,M,M,M,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,
Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,b,Z,b,Z,Z,b,Z,Z,b,Z,M,M,M,M,M,M,M,M,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,M,M,M,M,M,b,b,b,b,b,M,M,M,M,M,M,M,M,M,M,M],[ya,ya,ya,ya,M,M,M,M,N,pa,pa,N,9,N,M,M,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,N,M,M,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,ya,ya,ya,ya,ya,ya,ya,ya,ya,ya,pa,ya,ya,N,N,N,Z,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,
N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,Z,Z,Z,Z,Z,Z,Z,ya,M,Z,Z,Z,Z,Z,Z,N,N,Z,Z,M,Z,Z,Z,Z,N,N,na,na,na,na,na,na,na,na,na,na,N,N,N,N,N,N],[N,N,N,N,N,N,N,N,N,N,N,N,N,N,M,N,N,Z,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,M,M,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,
N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,N,M,M,M,M,M,M,M,M,M,M,M,M,M,M,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,Z,Z,Z,Z,Z,Z,Z,Z,Z,b,b,M,M,M,M,b,M,M,M,M,M],[Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,18,18,18,h,b,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,Ba,Da,13,14,15,16,17,9,pa,pa,pa,pa,pa,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,9,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,Ba,18,18,18,18,18,M,M,M,M,M,18,18,18,18,18,18,na,h,M,M,na,na,
na,na,na,na,10,10,M,M,M,h,na,na,na,na,na,na,na,na,na,na,10,10,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,pa,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M],[h,h,h,h,h,h,h,M,M,M,M,M,M,M,M,M,M,M,M,h,h,h,h,h,M,M,M,M,M,b,Z,b,b,b,b,b,b,b,b,b,b,10,b,b,b,b,b,b,b,b,b,b,b,b,b,M,b,b,b,b,b,M,b,M,b,b,M,b,b,M,b,b,b,b,b,b,b,b,b,b,N,N,N,N,N,N,N,N,N,
N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N],[Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,Z,Z,Z,Z,Z,Z,Z,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,9,M,9,
M,M,9,M,M,M,M,M,M,M,M,M,pa,M,M,10,10,M,M,M,M,M,pa,pa,M,M,M,M,M,N,N,N,N,N,M,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,N,M,M,18],[M,M,M,pa,pa,pa,M,M,M,M,M,10,9,10,9,9,na,na,na,na,na,na,na,na,na,na,9,M,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,M,M,M,h,
h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,M,M,M,M,M,M,M,M,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,M,M,M,h,h,h,h,h,h,M,M,h,h,h,h,h,h,M,M,h,h,h,h,h,h,M,M,h,h,h,M,M,M,pa,pa,M,M,M,pa,pa,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M]];return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require","exports",
"../enums","../visualVariablesUtils"],function(A,h,b,d){function g(n,e){void 0===e&&(e=!1);var k=b.WGLVVFlag.SIZE_FIELD_STOPS|b.WGLVVFlag.SIZE_MINMAX_VALUE|b.WGLVVFlag.SIZE_SCALE_STOPS|b.WGLVVFlag.SIZE_UNIT_VALUE;n=(n&(b.WGLVVTarget.FIELD_TARGETS_OUTLINE|b.WGLVVTarget.MINMAX_TARGETS_OUTLINE|b.WGLVVTarget.SCALE_TARGETS_OUTLINE|b.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e?k&n:k&~n}function p(n){var e=g(n,!1);return n&(b.WGLVVFlag.COLOR|b.WGLVVFlag.OPACITY|b.WGLVVFlag.ROTATION|e)}Object.defineProperty(h,
"__esModule",{value:!0});h.getVVFlags=function(n){if(!n)return b.WGLVVFlag.NONE;for(var e=0,k=0;k<n.length;k++){var l=n[k];if("size"===l.type){var m=d.getTypeOfSizeVisualVariable(l);e|=m;"outline"===l.target&&(e|=m<<4)}else"color"===l.type?e|=b.WGLVVFlag.COLOR:"opacity"===l.type?e|=b.WGLVVFlag.OPACITY:"rotation"===l.type&&(e|=b.WGLVVFlag.ROTATION)}return e};h.getSizeFlagsMask=g;h.getMarkerVVFlags=p;h.getFillVVFlags=function(n){return n&(b.WGLVVFlag.COLOR|b.WGLVVFlag.OPACITY)};h.getLineVVFlags=function(n,
e){if(e)return e=g(n,!0),n&e;e=g(n,!1);return n&(b.WGLVVFlag.COLOR|b.WGLVVFlag.OPACITY|e)};h.getTextVVFlags=function(n){return p(n)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../../../../../geometry/support/centroid ../../color ../../enums ../../fontUtils ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ./WGLTextTemplate".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C){Object.defineProperty(h,"__esModule",{value:!0});var y=d.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),a=24*1.2,c=r.i8888to32(255,255,255,255),f={xOffset:0,yOffset:0,width:0,height:0};A=function(q){function t(x,z,D){var F=q.call(this)||this;F.geometryType=l.WGLGeometryType.LABEL;F.vvFlags=0;F._textBoxVerticalOffset=0;F._textBoxHorizontalOffset=0;F._refTemplate=f;F._xOffset=z.xoffset;F._yOffset=-z.yoffset;F._decorationOffset=m.getFontDecorationOffset(z.font);
var G=z.haloColor;F._color=(z.color&&k.premultiplyAlphaRGBA(z.color))|0;var E=z.yoffset/z.font.size;F._shapingXOffset=z.xoffset/z.font.size*24;F._shapingYOffset=24*E;F._haloColor=(G&&k.premultiplyAlphaRGBA(G))|0;F._haloSize=10*g.pt2px(g.toPt(z.haloSize||0));F._textPropSize=g.pt2px(z.font.size);F._textPropAngle=z.angle*Math.PI/180;F._textPropHJustification="left"===z.horizontalAlignment?0:"right"===z.horizontalAlignment?1:.5;G=0;E=.5;switch(D){case "above-center":case "above-left":case "above-right":G=
-.5;E=0;break;case "below-center":case "below-left":case "below-right":G=.5,E=1}var H=0,O=.5;switch(D){case "above-left":case "center-left":case "below-left":H=-.5;O=1;break;case "above-right":case "center-right":case "below-right":H=.5,O=0}F._textPropHAnchorPlacement=O;F._textPropVAnchorPlacement=E;F._placementDirection=[H,G];F._materialStore=x;F.symbolId=z.id;F.anchor=n.create();return F}b(t,q);t.fromText=function(x,z,D,F,G,E){return new t(x,D,G)};Object.defineProperty(t.prototype,"bounds",{get:function(){return this._bounds},
enumerable:!0,configurable:!0});t.prototype.computeGlyphs=function(x,z){var D=z.text;if(!D||!D.length)return this._computedGlyphs=[],1;x=this._computeShaping(x,240,a,0,this._shapingXOffset,this._shapingYOffset,this._textPropHAnchorPlacement,this._textPropVAnchorPlacement,this._textPropHJustification).getShaping(D,z.rtl);isNaN(this._decorationOffset)||u.addDecoration(x,this._decorationOffset);z=Array(x.length);for(D=0;D<x.length;D++){var F=this._textPropAngle,G=this._textPropSize,E=this._haloSize,
H=this._materialStore.createGlyphMaterial(x[D].glyphMosaicItem,l.WGLGeometryType.LABEL,this.vvFlags);z[D]=C.ComputedGlyph.from(x[D],H,F,G,E)}this._computedGlyphs=z;if(!x||0===x.length)return 2;x=u.getBox(x);z=this._textPropSize/24;x.width*=z;x.height*=z;x.x*=z;x.y*=z;0>this._placementDirection[0]?this._textBoxHorizontalOffset=-x.x-x.width:0<this._placementDirection[0]&&(this._textBoxHorizontalOffset=-x.x);0>this._placementDirection[1]?this._textBoxVerticalOffset=-x.y:0<this._placementDirection[1]&&
(this._textBoxVerticalOffset=-x.y+x.height);D=x.width/2;F=x.height/2;this._textPropAngle&&(z=n.fromValues(-D,-F),D=n.fromValues(D,F),F=p.create(),p.rotate(F,F,this._textPropAngle),n.transformMat2d(z,z,F),n.transformMat2d(D,D,F),F=Math.abs(D[1]-z[1]),x.width=Math.abs(D[0]-z[0]),x.height=F);this._bounds=new w.default(x.x,x.y,x.width+10,x.height+10);x=this._placementDirection[1]*(this._refTemplate.height+this._bounds.height);this._bounds.center[0]=this._placementDirection[0]*(this._refTemplate.width+
this._bounds.width)+this._xOffset;this._bounds.center[1]=x+this._yOffset;return 0};t.prototype.bindReferenceTemplate=function(x){this._refTemplate=x?x:f};t.prototype.computeAnchor=function(x,z){var D=this._refTemplate.xOffset,F=this._refTemplate.yOffset;switch(x){case "esriGeometryPoint":z=z.geometry;x=z.x;z=z.y;this._setAnchor(x,z);break;case "esriGeometryMultipoint":x=z.geometry;z=this._computeAnchorMultipoint(x.points);x=z.x;z=z.y;this._setAnchor(x,z);break;case "esriGeometryPolygon":if(z.centroid){x=
z.centroid;this._setAnchor(x.x,x.y);break}x=z.geometry;z=this._computeAnchorRings(x.rings);if(!z)break;x=z.x;z=z.y;this._setAnchor(x,z);break;case "esriGeometryPolyline":x=z.geometry;z=this._computeAnchorRings(x.paths);if(!z)break;x=z.x;z=z.y;this._setAnchor(x,z);break;default:y.error("Unable to handle geometryType: "+x)}return n.fromValues(this.anchor[0]+D,this.anchor[1]+F)};t.prototype.writeMesh=function(x,z,D,F,G,E,H){D=z.indexVector;G=z.get("geometry");E=z.get("visibility");z=z.get("visibilityRange");
H=this._getOffset(G);var O=r.i8888to32(this._refTemplate.xOffset,-this._refTemplate.yOffset,this._placementDirection[0]*(this._refTemplate.width+10)+this._textBoxHorizontalOffset,this._placementDirection[1]*(this._refTemplate.height+10)+this._textBoxVerticalOffset);this._writeVertices(x,D,G,E,z,F,H,O,this.anchor[0],this.anchor[1])};t.prototype._setAnchor=function(x,z){this.anchor[0]=x;this.anchor[1]=z};t.prototype._computeAnchorMultipoint=function(x){return x.length&&x[0].length?{x:x[0][0],y:x[0][1]}:
null};t.prototype._computeAnchorRings=function(x){if(!x.length||!x[0].length||!x[0][0].length)return null;x=e.ringsCentroid(x,!1);return{x:x[0],y:x[1]}};t.prototype._computeShaping=function(x,z,D,F,G,E,H,O,K){return this._shaping=new u([x],240,a,0,[G,E],H,O,K)};t.prototype._getOffset=function(x){return x.length/5};t.prototype._writeVertices=function(x,z,D,F,G,E,H,O,K,L){var T=this._computedGlyphs,P=r.i1616to32(2*K,2*L);K=r.i1616to32(2*K+1,2*L);L=0;var Q=r.i8888to32(0,(E&16711680)>>16,(E&65280)>>8,
E&255);if(this._haloSize)for(var J=0;J<T.length;J++,L+=4){var R=T[J].materialId,I=this._materialStore.get(R);R=new v(E,this.geometryType,R);R.vertexFrom=H+L;R.indexFrom=z.length;this._writeGlyph(R,D,F,G,Q,K,this._haloColor,O,T[J],I);this._writeIndices(R,z,H+L);x.push(R)}for(J=0;J<T.length;J++,L+=4)R=T[J].materialId,I=this._materialStore.get(R),R=new v(E,this.geometryType,R),R.vertexFrom=H+L,R.indexFrom=z.length,this._writeGlyph(R,D,F,G,Q,P,this._color,O,T[J],I),this._writeIndices(R,z,H+L),x.push(R)};
t.prototype._writeGlyph=function(x,z,D,F,G,E,H,O,K,L){z.push(E);z.push(H);z.push(K.vertexOffsetUpperLeft);z.push(K.texFontSizeUpperLeft);z.push(O);z.push(E);z.push(H);z.push(K.vertexOffsetUpperRight);z.push(K.texFontSizeUpperRight);z.push(O);z.push(E);z.push(H);z.push(K.vertexOffsetLowerLeft);z.push(K.texFontSizeLowerLeft);z.push(O);z.push(E);z.push(H);z.push(K.vertexOffsetLowerRight);z.push(K.texFontSizeLowerRight);z.push(O);D.push(4294967295);F.push(c);F.push(c);x.vertexCount+=4};t.prototype._writeIndices=
function(x,z,D){z.push(D+0);z.push(D+1);z.push(D+2);z.push(D+1);z.push(D+3);z.push(D+2);x.indexCount+=6};return t}(B.default);h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(A,h){function b(d){d=d.toLowerCase().split(" ").join("-");switch(d){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return d}}
Object.defineProperty(h,"__esModule",{value:!0});h.getFullyQualifiedFontName=function(d){a:{if(d.weight)switch(d.weight.toLowerCase()){case "bold":case "bolder":var g="-bold";break a}g=""}a:{if(d.style)switch(d.style.toLowerCase()){case "italic":case "oblic":var p="-italic";break a}p=""}g+=p;return b(d.family)+(0<g.length?g:"-regular")};h.getFontDecorationOffset=function(d){switch(d.decoration.toLowerCase()){case "underline":return 8;case "line-through":return-3}return NaN}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Matcher":function(){define(["require",
"exports","../../../../../core/tsSupport/extendsHelper","../../../../../core/Logger","../Utils"],function(A,h,b,d,g){Object.defineProperty(h,"__esModule",{value:!0});var p=d.getLogger("esri/views/2d/engine/webgl/util/Matcher");A=function(){function n(){this._defaultResult=null}n.prototype.size=function(){return 1};n.prototype.getDefault=function(){return this._defaultResult};n.prototype.setDefault=function(e){this._defaultResult=e};n.prototype.match=function(e,k){return this.getDefault()};return n}();
h.default=A;d=function(n){function e(k,l,m,r){var u=n.call(this)||this;u._intervals=[];u._isMaxInclusive=l;m?u._getValue=g.createArcadeFunction(m):k&&k.length?"function"===typeof k?(u._field=null,u._getValue=k):(u._field=k,u._normalizationInfo=r,u._getValue=u._getValueFromField.bind(u)):u._field=null;return u}b(e,n);e.prototype.add=function(k,l){this._intervals.push({interval:k,result:l});this._intervals.sort(function(m,r){return m.interval.min-r.interval.min})};e.prototype.size=function(){return n.prototype.size.call(this)+
this._intervals.length};e.prototype.match=function(k,l){if(!this._getValue)return this.getDefault();k=this._getValue(k,l);if(!k&&(null===k||void 0===k||isNaN(k)))return this.getDefault();for(l=0;l<this._intervals.length;l++){var m=this._intervals[l],r=m.interval;m=m.result;var u=this._isMaxInclusive?k<=r.max:k<r.max;if(k>=r.min&&u)return m}return this.getDefault()};e.prototype._needsNormalization=function(){var k=this._normalizationInfo;return k&&(k.normalizationField||k.normalizationTotal||k.normalizationType)};
e.prototype._getValueFromField=function(k){var l=k.attributes[this._field];if(!this._needsNormalization())return l;var m=this._normalizationInfo,r=m.normalizationField,u=m.normalizationTotal;m=m.normalizationType;k=!!r&&k.attributes[r];if(m)switch(m){case "field":return(k||void 0)&&l/k;case "log":return Math.log(l)*Math.LOG10E;case "percent-of-total":return l/u*100;default:p.error("Found unknown normalization type: "+m)}else p.error("Normalization is required, but no type was set!")};return e}(A);
h.IntervalMatcher=d;A=function(n){function e(k,l,m){var r=n.call(this)||this;r._resultsMap=new Map;m?r._getValue=g.createArcadeFunction(m):k&&k.length?"function"===typeof k[0]?(r._fields=null,r._getValue=k[0]):(r._fields=k,r._seperator=l||"",r._getValue=r._getValueFromFields.bind(r)):r._fields=null;return r}b(e,n);e.prototype.add=function(k,l){this._resultsMap.set(k.toString(),l)};e.prototype.size=function(){return n.prototype.size.call(this)+this._resultsMap.size};e.prototype.match=function(k,l){if(!this._getValue)return this.getDefault();
k=this._getValue(k,l);if(!k&&(null===k||void 0===k))return this.getDefault();k=k.toString();return this._resultsMap.has(k)?this._resultsMap.get(k):this.getDefault()};e.prototype._getValueFromFields=function(k){for(var l=[],m=0,r=this._fields;m<r.length;m++)l.push(k.attributes[r[m]]);return l.join(this._seperator)};return e}(A);h.MapMatcher=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require","exports"],function(A,h){Object.defineProperty(h,"__esModule",
{value:!0});var b=function(){function d(g,p,n){this.data=g;this.stride=p;this.vertexCount=n}d.decode=function(g){var p=new Uint32Array(g.data);return new d(p,g.stride,g.vertexCount)};return d}();h.default=b;A=function(){function d(g,p,n){this.geometryType=g;this.indexBuffer=new Uint32Array(p);this.namedBuffers=n}d.decode=function(g){var p=g.geometryType,n=g.indexBuffer,e={},k;for(k in g.namedBuffers)e[k]=b.decode(g.namedBuffers[k]);return new d(p,n,e)};return d}();h.VertexBuffers=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Reader":function(){define(["require",
"exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function b(d){this._pos=0;this._buffer=d;this._i32View=new Int32Array(this._buffer);this._f32View=new Float32Array(this._buffer)}b.prototype.readInt32=function(){return this._i32View[this._pos++]};b.prototype.readF32=function(){return this._f32View[this._pos++]};return b}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextureManager":function(){define("require exports ../../../../config ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ./CIMSymbolHelper ./fontUtils ./GlyphMosaic ./GlyphSource ./SDFHelper ./SpriteMosaic ./Utils ../../../3d/support/imageUtils ../../../support/screenshotUtils ./SDFConverter".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B){function C(a){if(a.type){switch(u.normalizeSymbolType(a.type)){case "simple-marker":return a.path?"simple-marker"+a.style+a.path:"simple-marker"+a.style;case "simple-line":return"simple-line"+a.style}if(u.isPictureSymbol(a))return a.url?a.url:a.imageData+(""+a.width+a.height)}return JSON.stringify(a)}var y=g.getLogger("esri.views.2d.engine.webgl.TextureManager");return function(){function a(){this._invalidFontsMap=new Map;this._spriteMosaic=new r(1024,1024,
500);this._glyphSource=new l(b.fontsUrl+"/{fontstack}/{range}.pbf");this._glyphMosaic=new k(1024,1024,this._glyphSource);this._sdfConverter=new B.default(126)}Object.defineProperty(a.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._spriteMosaic.dispose();this._glyphMosaic.dispose();this._rasterizationCanvas=
null};a.prototype.rasterizeItem=function(c,f){void 0===f&&(f=null);return c?c.type&&-1!==c.type.toLowerCase().indexOf("3d")?(y.error(new d("mapview-invalid-type","Mapviewer does not support 3d symbol type: "+c.type,c)),p.resolve({glyphMosaicItems:[],spriteMosaicItem:null})):!c.type||"text"!==c.type&&"esriTS"!==c.type?this._rasterizeSpriteSymbol(c).then(function(q){return{spriteMosaicItem:q}}):this._rasterizeTextSymbol(c,f).then(function(q){return{glyphMosaicItems:q}}):(y.error(new d("mapview-null-resource",
"Unable to rasterize null resource")),p.resolve(null))};a.prototype.bindSpritePage=function(c,f,q,t){t||(t=9729);this._spriteMosaic.bind(c,t,f,q)};a.prototype.bindGlyphsPage=function(c,f,q){this._glyphMosaic.bind(c,9729,f,q)};a.prototype._rasterizeTextSymbol=function(c,f){var q=this,t=e.getFullyQualifiedFontName(c.font);c=this._invalidFontsMap.has(t);return this._glyphMosaic.getGlyphItems(c?"arial-unicode-ms-regular":t,f).catch(function(x){y.error(new d("mapview-invalid-resource","Couldn't find font "+
t+". Falling back to Arial Unicode MS Regular"));q._invalidFontsMap.set(t,!0);return q._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",f)})};a.prototype._rasterizeSpriteSymbol=function(c){var f=this;if(c&&(u.isFillSymbol(c)||u.isLineSymbol(c))&&"style"in c&&("solid"===c.style||"esriSFSSolid"===c.style||"esriSLSSolid"===c.style||"none"===c.style||"esriSFSNull"===c.style||"esriSLSNull"===c.style))return p.resolve(null);var q=C(c);if(this._spriteMosaic.has(q))return p.resolve(this._spriteMosaic.getSpriteItem(q));
if("simple-marker"!==c.type&&"esriSMS"!==c.type||!c.path){if(c.url||c.imageData)return v.requestImage(c.imageData?"data:"+c.contentType+";base64,"+c.imageData:c.url).then(function(D){D=f._rasterizeResource(D);return f._addItemToMosaic(q,D.size,D.anchor,D.image,!u.isMarkerSymbol(c),D.sdf)});var t=this._rasterizeResource(c);return p.resolve(this._addItemToMosaic(q,t.size,t.anchor,t.image,!u.isMarkerSymbol(c),t.sdf))}var x=[126,126],z=this;return this._sdfConverter.draw(c.path).then(function(D){return z._addItemToMosaic(q,
x,[0,0],new Uint32Array(D.buffer),!1,!0)})};a.prototype._rasterizeResource=function(c){if(c instanceof HTMLImageElement){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=c.width;this._rasterizationCanvas.height=c.height;var f=this._rasterizationCanvas.getContext("2d");f.drawImage(c,0,0,c.width,c.height);f=f.getImageData(0,0,c.width,c.height);f=new Uint8Array(f.data);for(var q=void 0,t=0;t<f.length;t+=4)q=f[t+3]/255,f[t]*=q,f[t+
1]*=q,f[t+2]*=q;q=c.width;t=c.height;var x=f;if(500<=q||500<=t)x=c.width/c.height,1<x?(q=500,t=Math.round(500/x)):(t=500,q=Math.round(500*x)),x=new Uint8Array(4*q*t),w.resampleHermite(f,c.width,c.height,new Uint8ClampedArray(x.buffer),q,t,!1);return{size:[q,t],anchor:[0,0],image:new Uint32Array(x.buffer),sdf:!1}}return this._rasterizeJSON(c)};a.prototype._addItemToMosaic=function(c,f,q,t,x,z){return this._spriteMosaic.addSpriteItem(c,f,q,t,x,z)};a.prototype._rasterizeJSON=function(c){this._rasterizationCanvas||
(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===c.type||"esriSFS"===c.type){var f=n.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,c.style);c=f[0];var q=f[1];f=f[2];return{size:[q,f],anchor:[0,0],image:new Uint32Array(c.buffer),sdf:!1}}if("simple-line"===c.type||"esriSLS"===c.type)return f=n.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,c.style),c=f[0],q=f[1],f=f[2],{size:[q,f],anchor:[0,0],image:new Uint32Array(c.buffer),sdf:!0};"simple-marker"===
c.type||"esriSMS"===c.type?(c=n.CIMSymbolHelper.fromSimpleMarker(c),q=!0):q=m.SDFHelper.checkSDF(c);if(q)return q=(new m.SDFHelper).buildSDF(c),c=q[0],{size:[q[1],q[2]],anchor:[0,0],image:new Uint32Array(c.buffer),sdf:!0};var t=n.CIMSymbolHelper.rasterize(this._rasterizationCanvas,c);c=t[0];q=t[1];f=t[2];return{size:[q,f],anchor:[t[3],t[4]],image:new Uint32Array(c.buffer),sdf:!1}};return a}()})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(A,h,b){Object.defineProperty(b,
"workers",{get:function(){return b.defaults.workers},set:function(d){return b.defaults.workers=d}});return b})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolHelper":function(){define("require exports ../../../../core/Logger ./CIMSymbolDrawHelper ./SDFHelper ../../../vectorTiles/GeometryUtils".split(" "),function(A,h,b,d,g,p){Object.defineProperty(h,"__esModule",{value:!0});var n=b.getLogger("esri/views/2d/engine/webgl/CIMSymbolHelper");A=function(){function e(){}e.getEnvelope=function(k){if("CIMPointSymbol"!==
k.type)return null;var l=new d.EnvDrawHelper;l.drawSymbol(k,{type:"point",x:0,y:0});return l.envelope()};e.rasterize=function(k,l){var m=this.getEnvelope(l);if(!m||0>=m.width||0>=m.height)return[null,0,0,0,0];var r=96/72,u=(m.x+.5*m.width)*r,v=-(m.y+.5*m.height)*r;k.width=m.width*r+2;k.height=m.height*r+2;m=k.getContext("2d");r=d.Transformation.createScale(r,-r);r.translate(.5*k.width-u,.5*k.height-v);(new d.CanvasDrawHelper(m,r)).drawSymbol(l,{type:"point",x:0,y:0});l=m.getImageData(0,0,k.width,
k.height);l=new Uint8Array(l.data);for(m=0;m<l.length;m+=4)r=l[m+3]/255,l[m]*=r,l[m+1]*=r,l[m+2]*=r;return[l,k.width,k.height,u/k.width,v/k.height]};e.fromSimpleMarker=function(k){var l=k.style;if("circle"===l||"esriSMSCircle"===l){var m=Math.acos(.995);var r=Math.ceil(p.C_PI/m/4);0===r&&(r=1);m=p.C_PI_BY_2/r;r*=4;l=[];l.push([50,0]);for(var u=1;u<r;u++)l.push([50*Math.cos(u*m),-50*Math.sin(u*m)]);l.push([50,0]);m={rings:[l]};r={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===l||"esriSMSCross"===
l)m=0,m={rings:[[[m,50],[m,m],[50,m],[50,-m],[m,-m],[m,-50],[-m,-50],[-m,-m],[-50,-m],[-50,m],[-m,m],[-m,50],[m,50]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===l||"esriSMSDiamond"===l)m={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===l||"esriSMSSquare"===l)m={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===l||"esriSMSX"===l)m=0,m={rings:[[[0,m],[50-m,50],[50,50-
m],[m,0],[50,m-50],[50-m,-50],[0,-m],[m-50,-50],[-50,m-50],[-m,0],[-50,50-m],[m-50,50],[0,m]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===l||"esriSMSTriangle"===l)r=2/3*100,l=r-100,m={rings:[[[-57.735026918962575,l],[0,r],[57.735026918962575,l],[-57.735026918962575,l]]]},r={xmin:-57.735026918962575,ymin:l,xmax:57.735026918962575,ymax:r};if(m&&r){var v=[{type:"CIMSolidFill",enable:!0,color:k.color}];k.outline&&v.push({type:"CIMSolidStroke",enable:!0,width:k.outline.width,color:k.outline.color});
v={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:k.angle,size:k.size,offsetX:k.xoffset,offsetY:k.yoffset,frame:r,markerGraphics:[{type:"CIMMarkerGraphic",geometry:m,symbol:{type:"CIMPolygonSymbol",symbolLayers:v}}]}]}}return v};return e}();h.CIMSymbolHelper=A;A=function(){function e(){}e.rasterizeSimpleFill=function(k,l){"solid"!==l&&"none"!==l&&"esriSFSSolid"!==l&&"esriSFSNull"!==l||console.error("Unexpected: style does not require rasterization");k.width=8;k.height=
8;var m=k.getContext("2d");m.strokeStyle="#FFFFFF";m.beginPath();if("vertical"===l||"cross"===l||"esriSFSCross"===l||"esriSFSVertical"===l)m.moveTo(0,0),m.lineTo(0,8);if("horizontal"===l||"cross"===l||"esriSFSCross"===l||"esriSFSHorizontal"===l)m.moveTo(0,0),m.lineTo(8,0);if("forward-diagonal"===l||"diagonal-cross"===l||"esriSFSDiagonalCross"===l||"esriSFSForwardDiagonal"===l)m.moveTo(0,0),m.lineTo(8,8);if("backward-diagonal"===l||"diagonal-cross"===l||"esriSFSBackwardDiagonal"===l||"esriSFSDiagonalCross"===
l)m.moveTo(8,0),m.lineTo(0,8);m.stroke();l=m.getImageData(0,0,k.width,k.height);l=new Uint8Array(l.data);for(var r=0;r<l.length;r+=4)m=l[r+3]/255,l[r]*=m,l[r+1]*=m,l[r+2]*=m;return[l,k.width,k.height]};e.rasterizeSimpleLine=function(k,l){switch(l){case "dash":case "esriSLSDash":var m=[3,2];break;case "dash-dot":case "esriSLSDashDot":m=[2,2,0,2];break;case "dot":case "esriSLSDot":m=[0,3];break;case "long-dash":case "esriSLSLongDash":m=[6,3];break;case "long-dash-dot":case "esriSLSLongDashDot":m=[6,
3,0,3];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":m=[2,2,0,2,0,2];break;case "short-dash":case "esriSLSShortDash":m=[2,2];break;case "short-dash-dot":case "esriSLSShortDashDot":m=[2,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":m=[2,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":m=[0,2];break;case "solid":case "esriSLSSolid":case "none":n.error("Unexpected: style does not require rasterization");m=[0,0];break;default:n.error("Tried to rasterize SLS, but found an unexpected style: "+
l+"!"),m=[0,0]}l=k=0;for(var r=m;l<r.length;l++){var u=r[l];k+=u}k*=16;r=31*k;l=new Float32Array(r);for(u=0;u<r;++u)l[u]=257;for(var v=r=.5,w=!0,B=0;B<m.length;B++){u=m[B];r=v;v+=16*u;for(var C=r;C<v;){for(var y=.5;31>y;){u=(31-y+1.5)*k+C-.5;var a=(y-15.5)*(y-15.5);l[u]=w?a:Math.min((C-r)*(C-r)+a,(C-v)*(C-v)+a);y++}C++}w=!w}m=l.length;r=new Uint8Array(4*m);for(u=0;u<m;++u)g.packFloat(Math.sqrt(l[u])/15,r,4*u);return[r,k,31]};return e}();h.SymbolHelper=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ./GeometryUtils ./Rect".split(" "),
function(A,h,b,d,g,p){Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function e(k){this._t=k}e.createIdentity=function(){return new e([1,0,0,0,1,0])};e.prototype.clone=function(){return new e(this._t.slice())};e.prototype.transform=function(k){var l=this._t;return[l[0]*k[0]+l[1]*k[1]+l[2],l[3]*k[0]+l[4]*k[1]+l[5]]};e.createScale=function(k,l){return new e([k,0,0,0,l,0])};e.prototype.scale=function(k,l){var m=this._t;m[0]*=k;m[1]*=k;m[2]*=k;m[3]*=l;m[4]*=l;m[5]*=l;return this};e.prototype.scaleRatio=
function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};e.createTranslate=function(k,l){return new e([0,0,k,0,0,l])};e.prototype.translate=function(k,l){var m=this._t;m[2]+=k;m[5]+=l;return this};e.createRotate=function(k){var l=Math.cos(k);k=Math.sin(k);return new e([l,-k,0,k,l,0])};e.prototype.rotate=function(k){return this.multiply(e.createRotate(k))};e.prototype.multiply=function(k){var l=this._t;k=k._t;var m=l[1]*k[0]+l[4]*k[1],r=l[2]*k[0]+l[5]*k[1]+k[2],u=l[0]*k[3]+l[3]*k[4],
v=l[1]*k[3]+l[4]*k[4],w=l[2]*k[3]+l[5]*k[4]+k[5];l[0]=l[0]*k[0]+l[3]*k[1];l[1]=m;l[2]=r;l[3]=u;l[4]=v;l[5]=w;return this};return e}();h.Transformation=n;A=function(){function e(k){this._transfos=[];this._sizeTransfos=[];this._transfos.push(k||n.createIdentity());this._sizeTransfos.push(k?k.scaleRatio():1)}e.prototype.transformPt=function(k){return this._transfos[this._transfos.length-1].transform(k)};e.prototype.transformSize=function(k){return k*this._sizeTransfos[this._sizeTransfos.length-1]};e.prototype.back=
function(){return this._transfos[this._transfos.length-1]};e.prototype.push=function(k){var l=k.scaleRatio();k.multiply(this.back());this._transfos.push(k);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*l)};e.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};e.prototype.drawSolidFill=function(k,l){};e.prototype.drawSolidStroke=function(k,l,m){};e.prototype.drawSymbol=function(k,l){if(k)switch(k.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(k,
l)}};e.prototype.drawMultiLayerSymbol=function(k,l){if(k&&(k=k.symbolLayers))for(var m=k.length;m--;){var r=k[m];if(r&&r.enable)switch(r.type){case "CIMSolidFill":this.drawSolidFill(l,r.color);break;case "CIMSolidStroke":this.drawSolidStroke(l,r.color,r.width);break;case "CIMVectorMarker":this.drawVectorMarker(r,l)}}};e.prototype.drawVectorMarker=function(k,l){if(k){var m=k.markerGraphics;if(m){var r=k.size,u=k.frame,v=u?u.ymax-u.ymin:0;v=r&&v?r/v:1;var w=n.createIdentity();u&&w.translate(.5*-(u.xmax+
u.xmin),.5*-(u.ymax+u.ymin));var B=k.anchorPt;if(B){var C=B.x;B=B.y;"relative"===k.anchorPtUnits&&u&&(C*=(u.xmax-u.xmin)*v,B*=r);w.translate(-C,-B)}1!==v&&w.scale(v,v);k.rotation&&w.rotate(k.rotation*g.C_DEG_TO_RAD);w.translate(k.offsetX||0,k.offsetY||0);w.translate(l.x,l.y);this.push(w);for(k=0;k<m.length;k++)(l=m[k])&&this.drawSymbol(l.symbol,l.geometry);this.pop()}}};return e}();h.CIMSymbolDrawHelper=A;d=function(e){function k(){var l=e.call(this)||this;l._xmin=l._ymin=Infinity;l._xmax=l._ymax=
-Infinity;return l}b(k,e);k.prototype.envelope=function(){return new p(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};k.prototype._merge=function(l,m){l[0]-m<this._xmin&&(this._xmin=l[0]-m);l[0]+m>this._xmax&&(this._xmax=l[0]+m);l[1]-m<this._ymin&&(this._ymin=l[1]-m);l[1]+m>this._ymax&&(this._ymax=l[1]+m)};k.prototype.drawSolidFill=function(l,m){m=0;for(l=l.rings;m<l.length;m++){var r=l[m],u=r?r.length:0;if(2<u){this._merge(this.transformPt(r[0]),0);for(var v=1;v<u;++v)this._merge(this.transformPt(r[v]),
0)}}};k.prototype.drawSolidStroke=function(l,m,r){m=.5*this.transformSize(r);r=0;for(l=l.rings||l.paths;r<l.length;r++){var u=l[r],v=u?u.length:0;if(1<v){this._merge(this.transformPt(u[0]),m);for(var w=1;w<v;++w)this._merge(this.transformPt(u[w]),m)}}};return k}(A);h.EnvDrawHelper=d;A=function(e){function k(l,m){m=e.call(this,m)||this;m._ctx=l;return m}b(k,e);k.prototype.drawSolidFill=function(l,m){var r=this._ctx;r.fillStyle="rgba("+Math.round(m[0])+","+Math.round(m[1])+","+Math.round(m[2])+","+
m[3]/255+")";r.beginPath();m=0;for(l=l.rings;m<l.length;m++){var u=l[m],v=u?u.length:0;if(2<v){var w=this.transformPt(u[0]);r.moveTo(w[0],w[1]);for(var B=1;B<v;++B)w=this.transformPt(u[B]),r.lineTo(w[0],w[1]);r.closePath()}}r.fill("evenodd")};k.prototype.drawSolidStroke=function(l,m,r){var u=this._ctx;u.strokeStyle="rgba("+Math.round(m[0])+","+Math.round(m[1])+","+Math.round(m[2])+","+m[3]/255+")";u.lineWidth=this.transformSize(r)+.5;u.beginPath();m=!!l.rings;r=0;for(l=l.rings||l.paths;r<l.length;r++){var v=
l[r],w=v?v.length:0;if(1<w){var B=this.transformPt(v[0]);u.moveTo(B[0],B[1]);for(var C=1;C<w;++C)B=this.transformPt(v[C]),u.lineTo(B[0],B[1]);m&&u.closePath()}}u.stroke()};return k}(A);h.CanvasDrawHelper=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect","../../../3d/webgl-engine/lib/Util"],function(A,h,b,d,g){function p(n,e,k){g.packFloatRGBA(n,e,k)}Object.defineProperty(h,"__esModule",{value:!0});h.packFloat=p;A=function(){function n(){}
n.checkSDF=function(e){return!0};n.prototype._extractGeometry=function(e){if(!e)return null;e=e.symbolLayers;if(!e||1!==e.length)return null;e=e[0];if(!e)return null;e=e.markerGraphics;if(!e||1!==e.length)return null;e=e[0];if(!e)return null;var k=e.geometry;if(!k||!k.rings)return null;e=[];var l=0;for(k=k.rings;l<k.length;l++){for(var m=[],r=0,u=k[l];r<u.length;r++){var v=u[r];m.push(new b.Point(v[0],v[1]))}e.push(m)}return e};n.prototype._getEnvelope=function(e){for(var k=Infinity,l=-Infinity,m=
Infinity,r=-Infinity,u=0;u<e.length;u++)for(var v=0,w=e[u];v<w.length;v++){var B=w[v];B.x<k&&(k=B.x);B.x>l&&(l=B.x);B.y<m&&(m=B.y);B.y>r&&(r=B.y)}return new d(k,m,l-k,r-m)};n.prototype.buildSDF=function(e){e=this._extractGeometry(e);if(!e)return null;var k=this._getEnvelope(e);if(0>=k.width||0>=k.height)return null;for(var l=64/Math.max(k.width,k.height),m=Math.round(k.width*l),r=Math.round(k.height*l),u=m+62,v=r+62,w=0;w<e.length;w++)for(var B=0,C=e[w];B<C.length;B++){var y=C[B];y.x-=k.x;y.y-=k.y;
y.x*=l;y.y*=l;y.x+=30.5;y.y+=30.5}k=this._dist_map(e,u,v,31);this._sign_dist_map(e,u,v,31,k);return[this._encodeDistMap(k,31),u,v,m,r,l]};n.prototype._dist_map=function(e,k,l,m){for(var r=k*l,u=new Float32Array(r),v=m*m+1,w=0;w<r;++w)u[w]=v;for(v=0;v<e.length;v++){var B=e[v],C=B.length;for(w=1;w<C;++w){var y=B[w-1],a=B[w],c=void 0,f=void 0;y.x<a.x?(c=y.x,f=a.x):(c=a.x,f=y.x);var q=void 0,t=void 0;y.y<a.y?(q=y.y,t=a.y):(q=a.y,t=y.y);var x=Math.floor(c)-m;f=Math.floor(f)+m;q=Math.floor(q)-m;t=Math.floor(t)+
m;0>x&&(x=0);f>k&&(f=k);0>q&&(q=0);t>l&&(t=l);c=a.x-y.x;for(var z=a.y-y.y,D=c*c+z*z;x<f;x++)for(var F=q;F<t;F++){var G=(x-y.x)*c+(F-y.y)*z,E=void 0,H=void 0;0>G?(E=y.x,H=y.y):G>D?(E=a.x,H=a.y):(G/=D,E=y.x+G*c,H=y.y+G*z);G=(x-E)*(x-E)+(F-H)*(F-H);E=(l-F-1)*k+x;G<u[E]&&(u[E]=G)}}}for(w=0;w<r;++w)u[w]=Math.sqrt(u[w]);return u};n.prototype._sign_dist_map=function(e,k,l,m,r){for(var u=0;u<e.length;u++)for(var v=e[u],w=v.length,B=1;B<w;++B){var C=v[B-1],y=v[B],a=void 0,c=void 0;C.x<y.x?(a=C.x,c=y.x):(a=
y.x,c=C.x);var f=void 0,q=void 0;C.y<y.y?(f=C.y,q=y.y):(f=y.y,q=C.y);a=Math.floor(a);c=Math.floor(c)+1;f=Math.floor(f);q=Math.floor(q)+1;a<m&&(a=m);c>k-m&&(c=k-m);f<m&&(f=m);for(q>l-m&&(q=l-m);f<q;++f)if(C.y>f!==y.y>f){for(var t=(l-f-1)*k,x=a;x<c;++x)x<(y.x-C.x)*(f-C.y)/(y.y-C.y)+C.x&&(r[t+x]=-r[t+x]);for(x=m;x<a;++x)r[t+x]=-r[t+x]}}};n.prototype._encodeDistMap=function(e,k){k*=2;for(var l=e.length,m=new Uint8Array(4*l),r=0;r<l;++r)p(.5-e[r]/k,m,4*r);return m};return n}();h.SDFHelper=A})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/Util":function(){define(["require",
"exports","../../support/geometryUtils","./gl-matrix"],function(A,h,b,d){function g(I,S){if(!I)throw I=Error("dummy"),I.stack&&console.log(I.stack),new T(S);}function p(I,S,U){return I<S?S:I>U?U:I}function n(I){return I/180*Math.PI}function e(I){return 180*I/Math.PI}function k(I,S,U){d.mat4d.multiply(S,I,B);d.mat4d.inverse(B);for(I=0;8>I;++I)d.mat4d.multiplyVec4(B,C[I],y),d.vec3d.set3(y[0]/y[3],y[1]/y[3],y[2]/y[3],U[I])}function l(I,S){b.plane.fromPoints(I[4],I[0],I[3],S[0]);b.plane.fromPoints(I[1],
I[5],I[6],S[1]);b.plane.fromPoints(I[4],I[5],I[1],S[2]);b.plane.fromPoints(I[3],I[2],I[6],S[3]);b.plane.fromPoints(I[0],I[1],I[2],S[4]);b.plane.fromPoints(I[5],I[4],I[7],S[5])}function m(I,S,U,V){var W=6378137/Math.sqrt(1-h.ECCENTRICITY_SQUARED*Math.pow(Math.sin(I),2)),X=Math.cos(I);V[0]=(W+U)*Math.cos(S)*X;V[1]=(W*(1-h.ECCENTRICITY_SQUARED)+U)*Math.sin(I);V[2]=-(W+U)*Math.sin(S)*X}function r(I){for(var S in I)return S}function u(I,S){I[12]=S[0];I[13]=S[1];I[14]=S[2]}function v(I,S){void 0===S&&(S=
0);for(var U=0,V=0;4>V;V++)U+=I[S+V]*J[V];return U}function w(I){return I-Math.floor(I)}Object.defineProperty(h,"__esModule",{value:!0});var B=d.mat4d.create(),C=[d.vec4d.createFrom(-1,-1,-1,1),d.vec4d.createFrom(1,-1,-1,1),d.vec4d.createFrom(1,1,-1,1),d.vec4d.createFrom(-1,1,-1,1),d.vec4d.createFrom(-1,-1,1,1),d.vec4d.createFrom(1,-1,1,1),d.vec4d.createFrom(1,1,1,1),d.vec4d.createFrom(-1,1,1,1)],y=d.vec4d.create(),a=[d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),d.vec3d.create(),
d.vec3d.create(),d.vec3d.create(),d.vec3d.create()],c=d.vec3d.create(),f=d.vec3d.create(),q=d.vec3d.create(),t=d.vec3d.create(),x=d.vec3d.create(),z=d.vec3d.create(),D=d.vec3d.create(),F=d.vec3d.create(),G=d.vec3d.create(),E=d.vec3d.create(),H=d.vec3d.create(),O=d.vec3d.create(),K=d.vec3d.create(),L=d.vec3d.createFrom(0,0,0),T=function(){function I(S){this.message=S}I.prototype.toString=function(){return"AssertException: "+this.message};return I}();h.AssertException=T;h.EARTH_RADIUS=6378137;h.METER2FEET=
3.28084;h.ECCENTRICITY_SQUARED=.0066943799901414;h.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};h.assert=g;h.verify=function(I,S){I||(console.log("Verify failed: "+S),console.log(Error("dummy").stack))};h.isPowerOfTwo=function(I){return 0===(I&I-1)};h.lerp=function(I,S,U){return I+(S-I)*U};h.clamp=p;h.encodeInt16=
function(I){return p(Math.round(32767*I),-32767,32767)};h.encodeNormal=function(I,S){var U=Math.abs(I[0]),V=Math.abs(I[1]),W=1/(U+V+Math.abs(I[2]));U*=W;V*=W;W=Math.min(I[2]*W,0);S[0]=P(I[0])*(U-W);S[1]=P(I[1])*(V-W)};var P="function"===typeof Math.sign?Math.sign:function(I){return+(0<I)-+(0>I)||0};h.fallbackIfUndefined=function(I,S){return void 0===I?S:I};h.hex2rgb=function(I){I=Math.floor(I);return[(I>>16&255)/255,(I>>8&255)/255,(I&255)/255]};h.rgb2hex=function(I){var S=p(Math.round(255*I[0]),0,
255),U=p(Math.round(255*I[1]),0,255);I=p(Math.round(255*I[2]),0,255);return"0x"+((S<<16)+(U<<8)+I).toString(16)};h.dec2hex=function(I){I=I.toString(16);return"00000000".substr(0,8-I.length)+I};h.deg2rad=n;h.rad2deg=e;h.azimuthElevationAngle2Direction=function(I,S){I=1.5*Math.PI-I;S=.5*Math.PI-S;return[Math.cos(I)*Math.sin(S),Math.cos(S),Math.sin(I)*Math.sin(S)]};h.raySphere=function(I,S,U,V,W){U=U||L;var X=d.vec3d.subtract(I,U,c);U=d.vec3d.dot(S,S);var Y=2*d.vec3d.dot(S,X);V=d.vec3d.dot(X,X)-V*V;
V=Y*Y-4*U*V;if(0>V)return!1;X=Math.sqrt(V);V=(-Y-X)/(2*U);U=(-Y+X)/(2*U);if(0>V||U<V&&0<U)V=U;return 0<V?(W&&d.vec3d.add(I,d.vec3d.scale(S,V,K),W),!0):!1};h.rayTriangle3D=function(I,S,U,V,W,X,Y,da,aa){void 0===aa&&(aa=d.vec3d.create());var ba=V[Y]-U[X],fa=V[Y+1]-U[X+1],ka=V[Y+2]-U[X+2];V=W[da]-U[X];Y=W[da+1]-U[X+1];W=W[da+2]-U[X+2];var oa=S[1]*W-Y*S[2],sa=S[2]*V-W*S[0],ta=S[0]*Y-V*S[1];da=ba*oa+fa*sa+ka*ta;if(-1E-5<da&&1E-5>da)return!1;da=1/da;var xa=I[0]-U[X],va=I[1]-U[X+1];I=I[2]-U[X+2];aa[1]=da*
(xa*oa+va*sa+I*ta);if(0>aa[1]||1<aa[1])return!1;U=va*ka-fa*I;I=I*ba-ka*xa;ba=xa*fa-ba*va;aa[2]=da*(S[0]*U+S[1]*I+S[2]*ba);if(0>aa[2]||1<aa[1]+aa[2])return!1;aa[0]=da*(V*U+Y*I+W*ba);return!0};h.rayBoxTest=function(I,S,U,V){var W=(U[0]-I[0])/S[0],X=(V[0]-I[0])/S[0];if(W>X){var Y=W;W=X;X=Y}var da=(U[1]-I[1])/S[1],aa=(V[1]-I[1])/S[1];da>aa&&(Y=da,da=aa,aa=Y);if(W>aa||da>X)return!1;da>W&&(W=da);aa<X&&(X=aa);U=(U[2]-I[2])/S[2];I=(V[2]-I[2])/S[2];U>I&&(Y=U,U=I,I=Y);if(W>I||U>X)return!1;I<X&&(X=I);return 0>
X?!1:!0};h.rayRay2D=function(I,S,U,V,W,X){void 0===X&&(X=d.vec2d.create());var Y=(V[W]-U[W])*(S[0]-I[0])-(V[0]-U[0])*(S[W]-I[W]);if(0===Y)return!1;U=((V[0]-U[0])*(I[W]-U[W])-(V[W]-U[W])*(I[0]-U[0]))/Y;X[0]=I[0]+U*(S[0]-I[0]);X[1]=I[W]+U*(S[W]-I[W]);return!0};h.matrixToFrustumPoints=k;h.matrixToFrustumPlanes=function(I,S,U,V){void 0===V&&(V=U,U=a);k(I,S,U);l(U,V)};h.frustumPointsToPlanes=l;h.project=function(I,S,U,V,W){W||(W=I);y[0]=I[0];y[1]=I[1];y[2]=I[2];y[3]=1;d.mat4d.multiplyVec4(S,y);2<W.length&&
(W[2]=-y[2]);d.mat4d.multiplyVec4(U,y);g(0!==y[3]);W[0]=y[0]/y[3];W[1]=y[1]/y[3];W[2]=y[2]/y[3];W[0]=(.5*W[0]+.5)*V[2]+V[0];W[1]=(.5*W[1]+.5)*V[3]+V[1]};h.geodeticToGeocentricLatidude=function(I){return Math.atan((1-h.ECCENTRICITY_SQUARED)*Math.tan(I))};h.latLon2positionWGS84Ellipsoid=m;h.pos2latLon=function(I,S){var U=d.vec3d.length(I);S[0]=Math.asin(p(I[1]/U,-1,1));S[1]=(0>I[2]?1:-1)*Math.acos(p(I[0]/(Math.cos(S[0])*U),-1,1));S[0]=e(S[0]);S[1]=e(S[1]);S[2]=U};h.pos2latLonWGS84Ellipsoid=function(I,
S){var U=I[0],V=-I[2],W=I[1],X=Math.sqrt(Math.pow(6378137,2)*(1-h.ECCENTRICITY_SQUARED));I=Math.sqrt(Math.pow(U,2)+Math.pow(V,2));var Y=Math.atan2(6378137*W,X*I);U=Math.atan2(V,U);V=Math.atan2(W+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(X,2))/Math.pow(X,2)),2)*X*Math.pow(Math.sin(Y),3),I-6378137*h.ECCENTRICITY_SQUARED*Math.pow(Math.cos(Y),3));I=I/Math.cos(V)-6378137/Math.sqrt(1-h.ECCENTRICITY_SQUARED*Math.pow(Math.sin(V),2))+h.EARTH_RADIUS;S[0]=V;S[1]=U;S[2]=I};h.computeGlobeTransformation=
function(I,S,U){var V=n(I[0]);I=n(I[1]);m(V,I,S,f);d.mat4d.translate(U,f);d.mat4d.rotateY(U,.5*Math.PI+I);d.mat4d.rotateX(U,.5*Math.PI-V);return U};h.readUInt16=function(I,S){return I[S]+(I[S+1]<<8)};h.readUInt32=function(I,S){return I[S]+(I[S+1]<<8)+(I[S+2]<<16)+(I[S+3]<<24)};h.setIfDefined=function(I,S,U){void 0!==S[I]&&(U[I]=S[I])};h.array2object=function(I,S){var U={};if(void 0!==S)for(var V=0;V<I.length;V++){var W=I[V];U[S(W)]=W}else for(S=0;S<I.length;S++)W=I[S],U[W]=W;return U};h.object2array=
function(I){var S=[],U;for(U in I)S.push(I[U]);return S};h.mergeObjects=function(I,S,U){void 0===U&&(U={});if(U!==I)for(var V in I)U[V]=I[V];if(U!==S)for(var W in S)U[W]=S[W];return U};h.subtractObjects=function(I,S){var U={},V;for(V in I)void 0===S[V]&&(U[V]=I[V]);return U};h.intersectObjects=function(I,S){var U={},V;for(V in I)void 0!==S[V]&&(U[V]=I[V]);return U};h.getFirstObjectKey=r;h.getFirstObjectValue=function(I){return I[r(I)]};h.objectEmpty=function(I){for(var S in I)return!1;return!0};h.byteBuffer2base64image=
function(I,S,U,V,W){var X=4*S;g(I.length===X*U,"buffer length must match image resolution");var Y=document.createElement("canvas");Y.width=S;Y.height=U;var da=Y.getContext("2d");S=da.getImageData(0,0,S,U);for(var aa=S.data,ba=0;ba<U;++ba)for(var fa=ba*X,ka=(U-1-ba)*X,oa=0;oa<X;++oa)aa[fa++]=I[ka++];da.putImageData(S,0,0);return Y.toDataURL(V,W)};h.cround=function(I){return Math.round(100*I)/100};h.logWithBase=function(I,S){return Math.log(I)/Math.log(S)};h.setMatrixTranslation=u;h.setMatrixTranslation3=
function(I,S,U,V){I[12]=S;I[13]=U;I[14]=V};h.getMatrixTranslation=function(I,S){void 0===S&&(S=d.vec3d.create());S[0]=I[12];S[1]=I[13];S[2]=I[14];return S};h.createTranslationMatrix=function(I,S){I=d.mat4d.identity(I);u(I,S);return I};h.isTranslationMatrix=function(I){return 1===I[0]&&0===I[1]&&0===I[2]&&0===I[3]&&0===I[4]&&1===I[5]&&0===I[6]&&0===I[7]&&0===I[8]&&0===I[9]&&1===I[10]&&0===I[11]&&1===I[15]};h.fovx2fovy=function(I,S,U){return 2*Math.atan(U*Math.tan(.5*I)/S)};h.fovy2fovx=function(I,S,
U){return 2*Math.atan(S*Math.tan(.5*I)/U)};h.fovx2fovd=function(I,S,U){return 2*Math.atan(Math.sqrt(S*S+U*U)*Math.tan(.5*I)/S)};h.fovy2fovd=function(I,S,U){return 2*Math.atan(Math.sqrt(S*S+U*U)*Math.tan(.5*I)/U)};h.fovd2fovx=function(I,S,U){return 2*Math.atan(S*Math.tan(.5*I)/Math.sqrt(S*S+U*U))};h.fovd2fovy=function(I,S,U){return 2*Math.atan(U*Math.tan(.5*I)/Math.sqrt(S*S+U*U))};h.nextHighestPowerOfTwo=function(I){--I;for(var S=1;32>S;S<<=1)I|=I>>S;return I+1};h.nextHighestPowerOfTen=function(I){return Math.pow(10,
Math.ceil(Math.LOG10E*Math.log(I)))};h.lineLineDistanceSquared3D=function(I,S,U,V,W){q[0]=I[0]-U[0];q[1]=I[1]-U[1];q[2]=I[2]-U[2];t[0]=V[0]-U[0];t[1]=V[1]-U[1];t[2]=V[2]-U[2];if(1E-4>Math.abs(t[0])&&1E-4>Math.abs(t[1])&&1E-4>Math.abs(t[2]))return W.success=!1,W;x[0]=S[0]-I[0];x[1]=S[1]-I[1];x[2]=S[2]-I[2];if(1E-4>Math.abs(x[0])&&1E-4>Math.abs(x[1])&&1E-4>Math.abs(x[2]))return W.success=!1,W;S=q[0]*t[0]+q[1]*t[1]+q[2]*t[2];V=t[0]*x[0]+t[1]*x[1]+t[2]*x[2];var X=q[0]*x[0]+q[1]*x[1]+q[2]*x[2],Y=t[0]*
t[0]+t[1]*t[1]+t[2]*t[2],da=(x[0]*x[0]+x[1]*x[1]+x[2]*x[2])*Y-V*V;if(1E-4>Math.abs(da))return W.success=!1,W;X=p((S*V-X*Y)/da,0,1);S=p((S+V*X)/Y,0,1);z[0]=I[0]+X*x[0];z[1]=I[1]+X*x[1];z[2]=I[2]+X*x[2];D[0]=U[0]+S*t[0];D[1]=U[1]+S*t[1];D[2]=U[2]+S*t[2];I=d.vec3d.dist2(z,D);W.success=!0;W.dist2=I;W.pa=z;W.pb=D;return W};h.pointLineSegmentDistanceSquared2D=function(I,S,U){H[0]=S[0]-I[0];H[1]=S[1]-I[1];H[2]=0;O[0]=U[0]-I[0];O[1]=U[1]-I[1];O[2]=0;K[0]=U[0];K[1]=U[1];K[2]=0;S=d.vec2d.dot(O,H);U=d.vec2d.dot(H,
H);S=p(S/U,0,1);E[0]=H[0]*S;E[1]=H[1]*S;F[0]=I[0]+E[0];F[1]=I[1]+E[1];d.vec2d.subtract(K,F,G);I=d.vec2d.dot(G,G);S=d.vec2d.dot(O,O);U=d.vec2d.dot(H,H);var V=d.vec2d.dot(E,E);if(V>S||V>U)I=Number.MAX_VALUE;return I};h.packFloatRGBA=function(I,S,U){void 0===U&&(U=0);I=p(I,0,R);for(var V=0;4>V;V++)S[U+V]=Math.floor(256*w(I*Q[V]))};h.unpackFloatRGBA=v;var Q=[1,256,65536,16777216],J=[1/256,1/65536,1/16777216,1/4294967296],R=v(new Uint8ClampedArray([255,255,255,255]));h.inverseProjectionInfo=function(I,
S,U,V,W){0===I[11]?(V[0]=2/(S*I[0]),V[1]=2/(U*I[5]),V[2]=(1+I[12])/I[0],V[3]=(1+I[13])/I[5],d.vec2d.set2(0,1,W)):(V[0]=-2/(S*I[0]),V[1]=-2/(U*I[5]),V[2]=(1-I[8])/I[0],V[3]=(1-I[9])/I[5],d.vec2d.set2(1,0,W))}})},"esri/layers/vectorTiles/views/3d/support/geometryUtils":function(){define(["require","exports","./geometryUtils/lineSegment","./geometryUtils/plane","./geometryUtils/triangle"],function(A,h,b,d,g){Object.defineProperty(h,"__esModule",{value:!0});h.plane=d;h.triangle=g;h.lineSegment=b})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/lineSegment":function(){define(["require",
"exports","../../lib/glMatrix","../mathUtils"],function(A,h,b,d){function g(n,e){void 0===n&&(n=b.vec3d.create());void 0===e&&(e=b.vec3d.create());return{origin:n,vector:e}}Object.defineProperty(h,"__esModule",{value:!0});h.create=g;h.fromOriginAndVector=function(n,e,k){void 0===k&&(k=g());b.vec3d.set(n,k.origin);b.vec3d.set(e,k.vector);return k};h.distance2=function(n,e){e=b.vec3d.subtract(e,n.origin);var k=b.vec3d.dot(n.vector,e),l=b.vec3d.dot(n.vector,n.vector);k=d.clamp(k/l,0,1);n=b.vec3d.subtract(b.vec3d.scale(n.vector,
k,p),e,p);return b.vec3d.dot(n,n)};var p=b.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../lib/glMatrix"],function(A,h,b){function d(l){void 0===l&&(l=h.UP);return[l[0],l[1],l[2],l[3]]}function g(l,m,r){void 0===r&&(r=d());b.vec3d.set(m,r);r[3]=-b.vec3d.dot(m,l);return r}function p(l,m,r,u){void 0===u&&(u=d());b.vec3d.cross(m,l,k);return g(r,b.vec3d.normalize(k),u)}Object.defineProperty(h,"__esModule",{value:!0});h.create=
d;h.fromValues=function(l,m,r,u,v){void 0===v&&(v=d());v[0]=l;v[1]=m;v[2]=r;v[3]=u;return v};h.fromNormalAndOffset=function(l,m,r){void 0===r&&(r=d());b.vec3d.set(l,r);r[3]=m;return r};h.fromPositionAndNormal=g;h.projectVector=function(l,m,r){void 0===r&&(r=m);return b.vec3d.cross(l,b.vec3d.cross(m,l,e),r)};h.distance=function(l,m){return b.vec3d.dot(l,m)+l[3]};h.fromPoints=function(l,m,r,u){void 0===u&&(u=d());return p(b.vec3d.subtract(l,m,n),b.vec3d.subtract(r,m,e),l,u)};h.set=function(l,m){l[0]=
m[0];l[1]=m[1];l[2]=m[2];l[3]=m[3];return l};h.negate=function(l,m){void 0===m&&(m=l);m[0]=-l[0];m[1]=-l[1];m[2]=-l[2];m[3]=-l[3];return m};h.fromVectorsAndPoint=p;h.intersectRay=function(l,m,r,u){var v=b.vec3d.dot(l,r);if(0===v)return!1;l=-(b.vec3d.dot(l,m)+l[3])/v;b.vec3d.add(m,b.vec3d.scale(r,l,u),u);return!0};h.UP=[0,0,1,0];var n=b.vec3d.create(),e=b.vec3d.create(),k=b.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/triangle":function(){define(["require","exports","../../lib/glMatrix",
"./lineSegment"],function(A,h,b,d){function g(v,w,B){var C=b.vec2d.dist(v,w);w=b.vec2d.dist(w,B);v=b.vec2d.dist(B,v);B=(C+w+v)/2;return Math.sqrt(B*(B-C)*(B-w)*(B-v))}Object.defineProperty(h,"__esModule",{value:!0});h.create=function(v,w,B){void 0===v&&(v=b.vec3d.create());void 0===w&&(w=b.vec3d.create());void 0===B&&(B=b.vec3d.create());return{p0:v,p1:w,p2:B}};h.distance2=function(v,w){var B=v.p0,C=v.p1;v=v.p2;var y=b.vec3d.subtract(C,B,p),a=b.vec3d.subtract(v,C,n),c=b.vec3d.subtract(B,v,e),f=b.vec3d.subtract(w,
B,k),q=b.vec3d.subtract(w,C,l),t=b.vec3d.subtract(w,v,m),x=b.vec3d.cross(y,c),z=b.vec3d.dot(b.vec3d.cross(y,x,r),f);q=b.vec3d.dot(b.vec3d.cross(a,x,r),q);t=b.vec3d.dot(b.vec3d.cross(c,x,r),t);if(0<z&&0<q&&0<t)return w=b.vec3d.dot(x,f),w*w/b.vec3d.dot(x,x);B=d.distance2(d.fromOriginAndVector(B,y,u),w);C=d.distance2(d.fromOriginAndVector(C,a,u),w);w=d.distance2(d.fromOriginAndVector(v,c,u),w);return Math.min(B,C,w)};h.areaPoints2d=g;h.area2d=function(v){return g(v.p0,v.p1,v.p2)};var p=b.vec3d.create(),
n=b.vec3d.create(),e=b.vec3d.create(),k=b.vec3d.create(),l=b.vec3d.create(),m=b.vec3d.create(),r=b.vec3d.create(),u=d.create()})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var A={};(function(h,b){b(h,!0);b(h,!1)})(A,function(h,b){var d={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),c=new Int32Array(a.buffer);d.invsqrt=function(f){a[0]=f;c[0]=1597463007-(c[0]>>1);var q=a[0];return q*(1.5-.5*f*q*q)}}else d.invsqrt=function(f){return 1/
Math.sqrt(f)}})();var g=Array;"undefined"!=typeof Float32Array&&(g=b?Float32Array:Array);var p={create:function(a){var c=new g(3);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2]):c[0]=c[1]=c[2]=0;return c},createFrom:function(a,c,f){var q=new g(3);q[0]=a;q[1]=c;q[2]=f;return q},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];return c},set3:function(a,c,f,q){q[0]=a;q[1]=c;q[2]=f;return q},add:function(a,c,f){if(!f||a===f)return a[0]+=c[0],a[1]+=c[1],a[2]+=c[2],a;f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];return f},
subtract:function(a,c,f){if(!f||a===f)return a[0]-=c[0],a[1]-=c[1],a[2]-=c[2],a;f[0]=a[0]-c[0];f[1]=a[1]-c[1];f[2]=a[2]-c[2];return f},multiply:function(a,c,f){if(!f||a===f)return a[0]*=c[0],a[1]*=c[1],a[2]*=c[2],a;f[0]=a[0]*c[0];f[1]=a[1]*c[1];f[2]=a[2]*c[2];return f},max:function(a,c,f){f[0]=Math.max(a[0],c[0]);f[1]=Math.max(a[1],c[1]);f[2]=Math.max(a[2],c[2]);return f},min:function(a,c,f){f[0]=Math.min(a[0],c[0]);f[1]=Math.min(a[1],c[1]);f[2]=Math.min(a[2],c[2]);return f},negate:function(a,c){c||
(c=a);c[0]=-a[0];c[1]=-a[1];c[2]=-a[2];return c},scale:function(a,c,f){if(!f||a===f)return a[0]*=c,a[1]*=c,a[2]*=c,a;f[0]=a[0]*c;f[1]=a[1]*c;f[2]=a[2]*c;return f},normalize:function(a,c){c||(c=a);var f=a[0],q=a[1];a=a[2];var t=Math.sqrt(f*f+q*q+a*a);if(!t)return c[0]=0,c[1]=0,c[2]=0,c;if(1===t)return c[0]=f,c[1]=q,c[2]=a,c;t=1/t;c[0]=f*t;c[1]=q*t;c[2]=a*t;return c},cross:function(a,c,f){f||(f=a);var q=a[0],t=a[1];a=a[2];var x=c[0],z=c[1];c=c[2];f[0]=t*c-a*z;f[1]=a*x-q*c;f[2]=q*z-t*x;return f},length:function(a){var c=
a[0],f=a[1];a=a[2];return Math.sqrt(c*c+f*f+a*a)},length2:function(a){var c=a[0],f=a[1];a=a[2];return c*c+f*f+a*a},dot:function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]},direction:function(a,c,f){f||(f=a);var q=a[0]-c[0],t=a[1]-c[1];a=a[2]-c[2];c=Math.sqrt(q*q+t*t+a*a);if(!c)return f[0]=0,f[1]=0,f[2]=0,f;c=1/c;f[0]=q*c;f[1]=t*c;f[2]=a*c;return f},lerp:function(a,c,f,q){q||(q=a);q[0]=a[0]+f*(c[0]-a[0]);q[1]=a[1]+f*(c[1]-a[1]);q[2]=a[2]+f*(c[2]-a[2]);return q},dist:function(a,c){var f=c[0]-a[0],q=
c[1]-a[1];a=c[2]-a[2];return Math.sqrt(f*f+q*q+a*a)},dist2:function(a,c){var f=c[0]-a[0],q=c[1]-a[1];a=c[2]-a[2];return f*f+q*q+a*a}},n=null,e=new g(4);p.unproject=function(a,c,f,q,t){t||(t=a);n||(n=w.create());var x=n;e[0]=2*(a[0]-q[0])/q[2]-1;e[1]=2*(a[1]-q[1])/q[3]-1;e[2]=2*a[2]-1;e[3]=1;w.multiply(f,c,x);if(!w.inverse(x))return null;w.multiplyVec4(x,e);if(0===e[3])return null;t[0]=e[0]/e[3];t[1]=e[1]/e[3];t[2]=e[2]/e[3];return t};var k=p.createFrom(1,0,0),l=p.createFrom(0,1,0),m=p.createFrom(0,
0,1);p.rotationTo=function(a,c,f){f||(f=B.create());var q=p.dot(a,c),t=p.create();if(1<=q)B.set(C,f);else if(-.999999>q)p.cross(k,a,t),1E-6>t.length&&p.cross(l,a,t),1E-6>t.length&&p.cross(m,a,t),p.normalize(t),B.fromAxisAngle(t,Math.PI,f);else{q=Math.sqrt(2*(1+q));var x=1/q;p.cross(a,c,t);f[0]=t[0]*x;f[1]=t[1]*x;f[2]=t[2]*x;f[3]=.5*q;B.normalize(f)}1<f[3]?f[3]=1:-1>f[3]&&(f[3]=-1);return f};var r=p.create(),u=p.create();p.project=function(a,c,f,q){q||(q=a);p.direction(c,f,r);p.subtract(a,c,u);a=p.dot(r,
u);p.scale(r,a,q);p.add(q,c,q)};p.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var c=new g(9);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8]):c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=0;return c},createFrom:function(a,c,f,q,t,x,z,D,F){var G=new g(9);G[0]=a;G[1]=c;G[2]=f;G[3]=q;G[4]=t;G[5]=x;G[6]=z;G[7]=D;G[8]=F;return G},determinant:function(a){var c=a[3],f=a[4],q=a[5],t=a[6],x=a[7],z=a[8];return a[0]*(z*f-q*x)+
a[1]*(-z*c+q*t)+a[2]*(x*c-f*t)},inverse:function(a,c){var f=a[0],q=a[1],t=a[2],x=a[3],z=a[4],D=a[5],F=a[6],G=a[7];a=a[8];var E=a*z-D*G,H=-a*x+D*F,O=G*x-z*F,K=f*E+q*H+t*O;if(!K)return null;K=1/K;c||(c=v.create());c[0]=E*K;c[1]=(-a*q+t*G)*K;c[2]=(D*q-t*z)*K;c[3]=H*K;c[4]=(a*f-t*F)*K;c[5]=(-D*f+t*x)*K;c[6]=O*K;c[7]=(-G*f+q*F)*K;c[8]=(z*f-q*x)*K;return c},multiply:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2],z=a[3],D=a[4],F=a[5],G=a[6],E=a[7];a=a[8];var H=c[0],O=c[1],K=c[2],L=c[3],T=c[4],P=c[5],
Q=c[6],J=c[7];c=c[8];f[0]=H*q+O*z+K*G;f[1]=H*t+O*D+K*E;f[2]=H*x+O*F+K*a;f[3]=L*q+T*z+P*G;f[4]=L*t+T*D+P*E;f[5]=L*x+T*F+P*a;f[6]=Q*q+J*z+c*G;f[7]=Q*t+J*D+c*E;f[8]=Q*x+J*F+c*a;return f},multiplyVec2:function(a,c,f){f||(f=c);var q=c[0];c=c[1];f[0]=q*a[0]+c*a[3]+a[6];f[1]=q*a[1]+c*a[4]+a[7];return f},multiplyVec3:function(a,c,f){f||(f=c);var q=c[0],t=c[1];c=c[2];f[0]=q*a[0]+t*a[3]+c*a[6];f[1]=q*a[1]+t*a[4]+c*a[7];f[2]=q*a[2]+t*a[5]+c*a[8];return f},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=
a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,c){if(!c||a===c){c=a[1];var f=a[2],q=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=f;a[7]=q;return a}c[0]=a[0];c[1]=a[3];c[2]=a[6];c[3]=a[1];c[4]=a[4];c[5]=a[7];c[6]=a[2];c[7]=a[5];c[8]=a[8];return c},toMat4:function(a,c){c||(c=w.create());c[15]=1;c[14]=0;c[13]=0;c[12]=0;c[11]=0;c[10]=a[8];c[9]=a[7];c[8]=
a[6];c[7]=0;c[6]=a[5];c[5]=a[4];c[4]=a[3];c[3]=0;c[2]=a[2];c[1]=a[1];c[0]=a[0];return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},w={create:function(a){var c=new g(16);4===arguments.length?(c[0]=arguments[0],c[1]=arguments[1],c[2]=arguments[2],c[3]=arguments[3],c[4]=arguments[4],c[5]=arguments[5],c[6]=arguments[6],c[7]=arguments[7],c[8]=arguments[8],c[9]=arguments[9],c[10]=arguments[10],c[11]=arguments[11],c[12]=arguments[12],
c[13]=arguments[13],c[14]=arguments[14],c[15]=arguments[15]):a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},createFrom:function(a,c,f,q,t,x,z,D,F,G,E,H,O,K,L,T){var P=new g(16);P[0]=a;P[1]=c;P[2]=f;P[3]=q;P[4]=t;P[5]=x;P[6]=z;P[7]=D;P[8]=F;P[9]=G;P[10]=E;P[11]=H;P[12]=O;P[13]=K;P[14]=L;P[15]=T;return P},createFromMatrixRowMajor:function(a){var c=new g(16);c[0]=
a[0];c[4]=a[1];c[8]=a[2];c[12]=a[3];c[1]=a[4];c[5]=a[5];c[9]=a[6];c[13]=a[7];c[2]=a[8];c[6]=a[9];c[10]=a[10];c[14]=a[11];c[3]=a[12];c[7]=a[13];c[11]=a[14];c[15]=a[15];return c},createFromMatrix:function(a){var c=new g(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];
c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},setRowMajor:function(a,c){c[0]=a[0];c[4]=a[1];c[8]=a[2];c[12]=a[3];c[1]=a[4];c[5]=a[5];c[9]=a[6];c[13]=a[7];c[2]=a[8];c[6]=a[9];c[10]=a[10];c[14]=a[11];c[3]=a[12];c[7]=a[13];c[11]=a[14];c[15]=a[15];return c},identity:function(a){a||(a=w.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,c){if(!c||
a===c){c=a[1];var f=a[2],q=a[3],t=a[6],x=a[7],z=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=f;a[9]=t;a[11]=a[14];a[12]=q;a[13]=x;a[14]=z;return a}c[0]=a[0];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=a[1];c[5]=a[5];c[6]=a[9];c[7]=a[13];c[8]=a[2];c[9]=a[6];c[10]=a[10];c[11]=a[14];c[12]=a[3];c[13]=a[7];c[14]=a[11];c[15]=a[15];return c},determinant:function(a){var c=a[0],f=a[1],q=a[2],t=a[3],x=a[4],z=a[5],D=a[6],F=a[7],G=a[8],E=a[9],H=a[10],O=a[11],K=a[12],L=a[13],T=a[14];a=a[15];return K*
E*D*t-G*L*D*t-K*z*H*t+x*L*H*t+G*z*T*t-x*E*T*t-K*E*q*F+G*L*q*F+K*f*H*F-c*L*H*F-G*f*T*F+c*E*T*F+K*z*q*O-x*L*q*O-K*f*D*O+c*L*D*O+x*f*T*O-c*z*T*O-G*z*q*a+x*E*q*a+G*f*D*a-c*E*D*a-x*f*H*a+c*z*H*a},inverse:function(a,c){c||(c=a);var f=a[0],q=a[1],t=a[2],x=a[3],z=a[4],D=a[5],F=a[6],G=a[7],E=a[8],H=a[9],O=a[10],K=a[11],L=a[12],T=a[13],P=a[14];a=a[15];var Q=f*D-q*z,J=f*F-t*z,R=f*G-x*z,I=q*F-t*D,S=q*G-x*D,U=t*G-x*F,V=E*T-H*L,W=E*P-O*L,X=E*a-K*L,Y=H*P-O*T,da=H*a-K*T,aa=O*a-K*P,ba=Q*aa-J*da+R*Y+I*X-S*W+U*V;if(!ba)return null;
ba=1/ba;c[0]=(D*aa-F*da+G*Y)*ba;c[1]=(-q*aa+t*da-x*Y)*ba;c[2]=(T*U-P*S+a*I)*ba;c[3]=(-H*U+O*S-K*I)*ba;c[4]=(-z*aa+F*X-G*W)*ba;c[5]=(f*aa-t*X+x*W)*ba;c[6]=(-L*U+P*R-a*J)*ba;c[7]=(E*U-O*R+K*J)*ba;c[8]=(z*da-D*X+G*V)*ba;c[9]=(-f*da+q*X-x*V)*ba;c[10]=(L*S-T*R+a*Q)*ba;c[11]=(-E*S+H*R-K*Q)*ba;c[12]=(-z*Y+D*W-F*V)*ba;c[13]=(f*Y-q*W+t*V)*ba;c[14]=(-L*I+T*J-P*Q)*ba;c[15]=(E*I-H*J+O*Q)*ba;return c},toRotationMat:function(a,c){c||(c=w.create());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=
a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c},toMat3:function(a,c){c||(c=v.create());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c},toInverseMat3:function(a,c){var f=a[0],q=a[1],t=a[2],x=a[4],z=a[5],D=a[6],F=a[8],G=a[9];a=a[10];var E=a*z-D*G,H=-a*x+D*F,O=G*x-z*F,K=f*E+q*H+t*O;if(!K)return null;K=1/K;c||(c=v.create());c[0]=E*K;c[1]=(-a*q+t*G)*K;c[2]=(D*q-t*z)*K;c[3]=H*K;c[4]=(a*f-t*F)*K;c[5]=
(-D*f+t*x)*K;c[6]=O*K;c[7]=(-G*f+q*F)*K;c[8]=(z*f-q*x)*K;return c},multiply:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2],z=a[3],D=a[4],F=a[5],G=a[6],E=a[7],H=a[8],O=a[9],K=a[10],L=a[11],T=a[12],P=a[13],Q=a[14];a=a[15];var J=c[0],R=c[1],I=c[2],S=c[3],U=c[4],V=c[5],W=c[6],X=c[7],Y=c[8],da=c[9],aa=c[10],ba=c[11],fa=c[12],ka=c[13],oa=c[14];c=c[15];f[0]=J*q+R*D+I*H+S*T;f[1]=J*t+R*F+I*O+S*P;f[2]=J*x+R*G+I*K+S*Q;f[3]=J*z+R*E+I*L+S*a;f[4]=U*q+V*D+W*H+X*T;f[5]=U*t+V*F+W*O+X*P;f[6]=U*x+V*G+W*K+X*Q;f[7]=
U*z+V*E+W*L+X*a;f[8]=Y*q+da*D+aa*H+ba*T;f[9]=Y*t+da*F+aa*O+ba*P;f[10]=Y*x+da*G+aa*K+ba*Q;f[11]=Y*z+da*E+aa*L+ba*a;f[12]=fa*q+ka*D+oa*H+c*T;f[13]=fa*t+ka*F+oa*O+c*P;f[14]=fa*x+ka*G+oa*K+c*Q;f[15]=fa*z+ka*E+oa*L+c*a;return f},multiplyVec3:function(a,c,f){f||(f=c);var q=c[0],t=c[1];c=c[2];f[0]=a[0]*q+a[4]*t+a[8]*c+a[12];f[1]=a[1]*q+a[5]*t+a[9]*c+a[13];f[2]=a[2]*q+a[6]*t+a[10]*c+a[14];return f},multiplyVec4:function(a,c,f){f||(f=c);var q=c[0],t=c[1],x=c[2];c=c[3];f[0]=a[0]*q+a[4]*t+a[8]*x+a[12]*c;f[1]=
a[1]*q+a[5]*t+a[9]*x+a[13]*c;f[2]=a[2]*q+a[6]*t+a[10]*x+a[14]*c;f[3]=a[3]*q+a[7]*t+a[11]*x+a[15]*c;return f},translate:function(a,c,f){var q=c[0],t=c[1];c=c[2];if(!f||a===f)return a[12]=a[0]*q+a[4]*t+a[8]*c+a[12],a[13]=a[1]*q+a[5]*t+a[9]*c+a[13],a[14]=a[2]*q+a[6]*t+a[10]*c+a[14],a[15]=a[3]*q+a[7]*t+a[11]*c+a[15],a;var x=a[0];var z=a[1];var D=a[2];var F=a[3];var G=a[4];var E=a[5];var H=a[6];var O=a[7];var K=a[8];var L=a[9];var T=a[10];var P=a[11];f[0]=x;f[1]=z;f[2]=D;f[3]=F;f[4]=G;f[5]=E;f[6]=H;f[7]=
O;f[8]=K;f[9]=L;f[10]=T;f[11]=P;f[12]=x*q+G*t+K*c+a[12];f[13]=z*q+E*t+L*c+a[13];f[14]=D*q+H*t+T*c+a[14];f[15]=F*q+O*t+P*c+a[15];return f},scale:function(a,c,f){var q=c[0],t=c[1];c=c[2];if(!f||a===f)return a[0]*=q,a[1]*=q,a[2]*=q,a[3]*=q,a[4]*=t,a[5]*=t,a[6]*=t,a[7]*=t,a[8]*=c,a[9]*=c,a[10]*=c,a[11]*=c,a;f[0]=a[0]*q;f[1]=a[1]*q;f[2]=a[2]*q;f[3]=a[3]*q;f[4]=a[4]*t;f[5]=a[5]*t;f[6]=a[6]*t;f[7]=a[7]*t;f[8]=a[8]*c;f[9]=a[9]*c;f[10]=a[10]*c;f[11]=a[11]*c;f[12]=a[12];f[13]=a[13];f[14]=a[14];f[15]=a[15];
return f},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,c,f,q){var t=f[0],x=f[1];f=f[2];var z=Math.sqrt(t*t+x*x+f*f);if(!z)return null;1!==z&&(z=1/z,t*=z,x*=z,f*=z);var D=Math.sin(c);var F=Math.cos(c);var G=1-F;c=a[0];z=a[1];var E=a[2];var H=a[3];var O=a[4];var K=a[5];var L=a[6];var T=a[7];var P=a[8];var Q=a[9];var J=a[10];var R=a[11];var I=t*t*G+F;var S=
x*t*G+f*D;var U=f*t*G-x*D;var V=t*x*G-f*D;var W=x*x*G+F;var X=f*x*G+t*D;var Y=t*f*G+x*D;t=x*f*G-t*D;x=f*f*G+F;q?a!==q&&(q[12]=a[12],q[13]=a[13],q[14]=a[14],q[15]=a[15]):q=a;q[0]=c*I+O*S+P*U;q[1]=z*I+K*S+Q*U;q[2]=E*I+L*S+J*U;q[3]=H*I+T*S+R*U;q[4]=c*V+O*W+P*X;q[5]=z*V+K*W+Q*X;q[6]=E*V+L*W+J*X;q[7]=H*V+T*W+R*X;q[8]=c*Y+O*t+P*x;q[9]=z*Y+K*t+Q*x;q[10]=E*Y+L*t+J*x;q[11]=H*Y+T*t+R*x;return q},rotateX:function(a,c,f){var q=Math.sin(c);c=Math.cos(c);var t=a[4],x=a[5],z=a[6],D=a[7],F=a[8],G=a[9],E=a[10],H=
a[11];f?a!==f&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]):f=a;f[4]=t*c+F*q;f[5]=x*c+G*q;f[6]=z*c+E*q;f[7]=D*c+H*q;f[8]=t*-q+F*c;f[9]=x*-q+G*c;f[10]=z*-q+E*c;f[11]=D*-q+H*c;return f},rotateY:function(a,c,f){var q=Math.sin(c);c=Math.cos(c);var t=a[0],x=a[1],z=a[2],D=a[3],F=a[8],G=a[9],E=a[10],H=a[11];f?a!==f&&(f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]):f=a;f[0]=t*c+F*-q;f[1]=x*c+G*-q;f[2]=z*c+E*-q;f[3]=D*c+
H*-q;f[8]=t*q+F*c;f[9]=x*q+G*c;f[10]=z*q+E*c;f[11]=D*q+H*c;return f},rotateZ:function(a,c,f){var q=Math.sin(c);c=Math.cos(c);var t=a[0],x=a[1],z=a[2],D=a[3],F=a[4],G=a[5],E=a[6],H=a[7];f?a!==f&&(f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]):f=a;f[0]=t*c+F*q;f[1]=x*c+G*q;f[2]=z*c+E*q;f[3]=D*c+H*q;f[4]=t*-q+F*c;f[5]=x*-q+G*c;f[6]=z*-q+E*c;f[7]=D*-q+H*c;return f},frustum:function(a,c,f,q,t,x,z){z||(z=w.create());var D=c-a,F=q-f,G=x-t;z[0]=2*t/D;z[1]=0;z[2]=
0;z[3]=0;z[4]=0;z[5]=2*t/F;z[6]=0;z[7]=0;z[8]=(c+a)/D;z[9]=(q+f)/F;z[10]=-(x+t)/G;z[11]=-1;z[12]=0;z[13]=0;z[14]=-(x*t*2)/G;z[15]=0;return z},perspective:function(a,c,f,q,t){a=f*Math.tan(a*Math.PI/360);c*=a;return w.frustum(-c,c,-a,a,f,q,t)},ortho:function(a,c,f,q,t,x,z){z||(z=w.create());var D=c-a,F=q-f,G=x-t;z[0]=2/D;z[1]=0;z[2]=0;z[3]=0;z[4]=0;z[5]=2/F;z[6]=0;z[7]=0;z[8]=0;z[9]=0;z[10]=-2/G;z[11]=0;z[12]=-(a+c)/D;z[13]=-(q+f)/F;z[14]=-(x+t)/G;z[15]=1;return z},lookAt:function(a,c,f,q){q||(q=w.create());
var t=a[0],x=a[1];a=a[2];var z=f[0];var D=f[1];var F=f[2];var G=c[0];f=c[1];var E=c[2];if(t===G&&x===f&&a===E)return w.identity(q);c=t-G;f=x-f;G=a-E;var H=1/Math.sqrt(c*c+f*f+G*G);c*=H;f*=H;G*=H;E=D*G-F*f;F=F*c-z*G;z=z*f-D*c;(H=Math.sqrt(E*E+F*F+z*z))?(H=1/H,E*=H,F*=H,z*=H):z=F=E=0;D=f*z-G*F;var O=G*E-c*z;var K=c*F-f*E;(H=Math.sqrt(D*D+O*O+K*K))?(H=1/H,D*=H,O*=H,K*=H):K=O=D=0;q[0]=E;q[1]=D;q[2]=c;q[3]=0;q[4]=F;q[5]=O;q[6]=f;q[7]=0;q[8]=z;q[9]=K;q[10]=G;q[11]=0;q[12]=-(E*t+F*x+z*a);q[13]=-(D*t+O*x+
K*a);q[14]=-(c*t+f*x+G*a);q[15]=1;return q},fromRotationTranslation:function(a,c,f){f||(f=w.create());var q=a[0],t=a[1],x=a[2],z=a[3],D=q+q,F=t+t,G=x+x;a=q*D;var E=q*F;q*=G;var H=t*F;t*=G;x*=G;D*=z;F*=z;z*=G;f[0]=1-(H+x);f[1]=E+z;f[2]=q-F;f[3]=0;f[4]=E-z;f[5]=1-(a+x);f[6]=t+D;f[7]=0;f[8]=q+F;f[9]=t-D;f[10]=1-(a+H);f[11]=0;f[12]=c[0];f[13]=c[1];f[14]=c[2];f[15]=1;return f},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+
a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},B={create:function(a){var c=new g(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(a,c,f,q){var t=new g(4);t[0]=a;t[1]=c;t[2]=f;t[3]=q;return t},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},identity:function(a){a||(a=B.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},C=B.identity();B.calculateW=function(a,c){var f=a[0],q=a[1],t=a[2];if(!c||a===c)return a[3]=-Math.sqrt(Math.abs(1-
f*f-q*q-t*t)),a;c[0]=f;c[1]=q;c[2]=t;c[3]=-Math.sqrt(Math.abs(1-f*f-q*q-t*t));return c};B.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};B.inverse=function(a,c){var f=a[0],q=a[1],t=a[2],x=a[3];f=(f=f*f+q*q+t*t+x*x)?1/f:0;if(!c||a===c)return a[0]*=-f,a[1]*=-f,a[2]*=-f,a[3]*=f,a;c[0]=-a[0]*f;c[1]=-a[1]*f;c[2]=-a[2]*f;c[3]=a[3]*f;return c};B.conjugate=function(a,c){if(!c||a===c)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;c[0]=-a[0];c[1]=-a[1];c[2]=-a[2];c[3]=a[3];return c};B.length=function(a){var c=
a[0],f=a[1],q=a[2];a=a[3];return Math.sqrt(c*c+f*f+q*q+a*a)};B.normalize=function(a,c){c||(c=a);var f=a[0],q=a[1],t=a[2];a=a[3];var x=Math.sqrt(f*f+q*q+t*t+a*a);if(0===x)return c[0]=0,c[1]=0,c[2]=0,c[3]=0,c;x=1/x;c[0]=f*x;c[1]=q*x;c[2]=t*x;c[3]=a*x;return c};B.add=function(a,c,f){if(!f||a===f)return a[0]+=c[0],a[1]+=c[1],a[2]+=c[2],a[3]+=c[3],a;f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];f[3]=a[3]+c[3];return f};B.multiply=function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2];a=a[3];var z=c[0],D=c[1],
F=c[2];c=c[3];f[0]=q*c+a*z+t*F-x*D;f[1]=t*c+a*D+x*z-q*F;f[2]=x*c+a*F+q*D-t*z;f[3]=a*c-q*z-t*D-x*F;return f};B.multiplyVec3=function(a,c,f){f||(f=c);var q=c[0],t=c[1],x=c[2];c=a[0];var z=a[1],D=a[2];a=a[3];var F=a*q+z*x-D*t,G=a*t+D*q-c*x,E=a*x+c*t-z*q;q=-c*q-z*t-D*x;f[0]=F*a+q*-c+G*-D-E*-z;f[1]=G*a+q*-z+E*-c-F*-D;f[2]=E*a+q*-D+F*-z-G*-c;return f};B.scale=function(a,c,f){if(!f||a===f)return a[0]*=c,a[1]*=c,a[2]*=c,a[3]*=c,a;f[0]=a[0]*c;f[1]=a[1]*c;f[2]=a[2]*c;f[3]=a[3]*c;return f};B.toMat3=function(a,
c){c||(c=v.create());var f=a[0],q=a[1],t=a[2],x=a[3],z=f+f,D=q+q,F=t+t;a=f*z;var G=f*D;f*=F;var E=q*D;q*=F;t*=F;z*=x;D*=x;x*=F;c[0]=1-(E+t);c[1]=G+x;c[2]=f-D;c[3]=G-x;c[4]=1-(a+t);c[5]=q+z;c[6]=f+D;c[7]=q-z;c[8]=1-(a+E);return c};B.toMat4=function(a,c){c||(c=w.create());var f=a[0],q=a[1],t=a[2],x=a[3],z=f+f,D=q+q,F=t+t;a=f*z;var G=f*D;f*=F;var E=q*D;q*=F;t*=F;z*=x;D*=x;x*=F;c[0]=1-(E+t);c[1]=G+x;c[2]=f-D;c[3]=0;c[4]=G-x;c[5]=1-(a+t);c[6]=q+z;c[7]=0;c[8]=f+D;c[9]=q-z;c[10]=1-(a+E);c[11]=0;c[12]=0;
c[13]=0;c[14]=0;c[15]=1;return c};B.slerp=function(a,c,f,q){q||(q=a);var t=a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3];if(1<=Math.abs(t))return q!==a&&(q[0]=a[0],q[1]=a[1],q[2]=a[2],q[3]=a[3]),q;var x=Math.acos(t);var z=Math.sqrt(1-t*t);if(.001>Math.abs(z))return q[0]=.5*a[0]+.5*c[0],q[1]=.5*a[1]+.5*c[1],q[2]=.5*a[2]+.5*c[2],q[3]=.5*a[3]+.5*c[3],q;t=Math.sin((1-f)*x)/z;f=Math.sin(f*x)/z;q[0]=a[0]*t+c[0]*f;q[1]=a[1]*t+c[1]*f;q[2]=a[2]*t+c[2]*f;q[3]=a[3]*t+c[3]*f;return q};B.fromRotationMatrix=function(a,
c){c||(c=B.create());var f=a[0]+a[4]+a[8];if(0<f){var q=Math.sqrt(f+1);c[3]=.5*q;q=.5/q;c[0]=(a[7]-a[5])*q;c[1]=(a[2]-a[6])*q;c[2]=(a[3]-a[1])*q}else{q=B.fromRotationMatrix.s_iNext=B.fromRotationMatrix.s_iNext||[1,2,0];f=0;a[4]>a[0]&&(f=1);a[8]>a[3*f+f]&&(f=2);var t=q[f],x=q[t];q=Math.sqrt(a[3*f+f]-a[3*t+t]-a[3*x+x]+1);c[f]=.5*q;q=.5/q;c[3]=(a[3*x+t]-a[3*t+x])*q;c[t]=(a[3*t+f]+a[3*f+t])*q;c[x]=(a[3*x+f]+a[3*f+x])*q}return c};v.toQuat4=B.fromRotationMatrix;(function(){var a=v.create();B.fromAxes=function(c,
f,q,t){a[0]=f[0];a[3]=f[1];a[6]=f[2];a[1]=q[0];a[4]=q[1];a[7]=q[2];a[2]=c[0];a[5]=c[1];a[8]=c[2];return B.fromRotationMatrix(a,t)}})();B.identity=function(a){a||(a=B.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};B.fromAngleAxis=function(a,c,f){f||(f=B.create());a*=.5;var q=Math.sin(a);f[3]=Math.cos(a);f[0]=q*c[0];f[1]=q*c[1];f[2]=q*c[2];return f};B.toAngleAxis=function(a,c){c||(c=a);var f=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<f?(c[3]=2*Math.acos(a[3]),f=d.invsqrt(f),c[0]=a[0]*f,c[1]=a[1]*f,c[2]=a[2]*
f):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};B.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var y={create:function(a){var c=new g(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(a,c,f,q){var t=new g(4);t[0]=a;t[1]=c;t[2]=f;t[3]=q;return t},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},identity:function(a){a||(a=y.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,c){if(!c||a===c)return c=
a[1],a[1]=a[2],a[2]=c,a;c[0]=a[0];c[1]=a[2];c[2]=a[1];c[3]=a[3];return c},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,c){c||(c=a);var f=a[0],q=a[1],t=a[2];a=a[3];var x=f*a-t*q;if(!x)return null;x=1/x;c[0]=a*x;c[1]=-q*x;c[2]=-t*x;c[3]=f*x;return c},multiply:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2];a=a[3];f[0]=q*c[0]+t*c[2];f[1]=q*c[1]+t*c[3];f[2]=x*c[0]+a*c[2];f[3]=x*c[1]+a*c[3];return f},rotate:function(a,c,f){f||(f=a);var q=a[0],t=a[1],x=a[2];a=a[3];var z=Math.sin(c);
c=Math.cos(c);f[0]=q*c+t*z;f[1]=q*-z+t*c;f[2]=x*c+a*z;f[3]=x*-z+a*c;return f},multiplyVec2:function(a,c,f){f||(f=c);var q=c[0];c=c[1];f[0]=q*a[0]+c*a[1];f[1]=q*a[2]+c*a[3];return f},scale:function(a,c,f){f||(f=a);var q=a[1],t=a[2],x=a[3],z=c[0];c=c[1];f[0]=a[0]*z;f[1]=q*c;f[2]=t*z;f[3]=x*c;return f},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};b=b?"":"d";h["glMath"+b]=d;h["vec2"+b]={create:function(a){var c=new g(2);a?(c[0]=a[0],c[1]=a[1]):(c[0]=0,c[1]=0);return c},createFrom:function(a,
c){var f=new g(2);f[0]=a;f[1]=c;return f},add:function(a,c,f){f||(f=c);f[0]=a[0]+c[0];f[1]=a[1]+c[1];return f},subtract:function(a,c,f){f||(f=c);f[0]=a[0]-c[0];f[1]=a[1]-c[1];return f},multiply:function(a,c,f){f||(f=c);f[0]=a[0]*c[0];f[1]=a[1]*c[1];return f},divide:function(a,c,f){f||(f=c);f[0]=a[0]/c[0];f[1]=a[1]/c[1];return f},scale:function(a,c,f){f||(f=a);f[0]=a[0]*c;f[1]=a[1]*c;return f},dist:function(a,c){var f=c[0]-a[0];a=c[1]-a[1];return Math.sqrt(f*f+a*a)},dist2:function(a,c){var f=c[0]-
a[0];a=c[1]-a[1];return f*f+a*a},set:function(a,c){c[0]=a[0];c[1]=a[1];return c},set2:function(a,c,f){f[0]=a;f[1]=c;return f},negate:function(a,c){c||(c=a);c[0]=-a[0];c[1]=-a[1];return c},normalize:function(a,c){c||(c=a);var f=a[0]*a[0]+a[1]*a[1];0<f?(f=Math.sqrt(f),c[0]=a[0]/f,c[1]=a[1]/f):c[0]=c[1]=0;return c},cross:function(a,c,f){a=a[0]*c[1]-a[1]*c[0];if(!f)return a;f[0]=f[1]=0;f[2]=a;return f},length:function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)},dot:function(a,c){return a[0]*c[0]+
a[1]*c[1]},direction:function(a,c,f){f||(f=a);var q=a[0]-c[0];a=a[1]-c[1];c=q*q+a*a;if(!c)return f[0]=0,f[1]=0,f[2]=0,f;c=1/Math.sqrt(c);f[0]=q*c;f[1]=a*c;return f},lerp:function(a,c,f,q){q||(q=a);q[0]=a[0]+f*(c[0]-a[0]);q[1]=a[1]+f*(c[1]-a[1]);return q},str:function(a){return"["+a[0]+", "+a[1]+"]"}};h["vec3"+b]=p;h["vec4"+b]={create:function(a){var c=new g(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):(c[0]=0,c[1]=0,c[2]=0,c[3]=0);return c},createFrom:function(a,c,f,q){var t=new g(4);t[0]=a;t[1]=
c;t[2]=f;t[3]=q;return t},add:function(a,c,f){f||(f=c);f[0]=a[0]+c[0];f[1]=a[1]+c[1];f[2]=a[2]+c[2];f[3]=a[3]+c[3];return f},subtract:function(a,c,f){f||(f=c);f[0]=a[0]-c[0];f[1]=a[1]-c[1];f[2]=a[2]-c[2];f[3]=a[3]-c[3];return f},multiply:function(a,c,f){f||(f=c);f[0]=a[0]*c[0];f[1]=a[1]*c[1];f[2]=a[2]*c[2];f[3]=a[3]*c[3];return f},divide:function(a,c,f){f||(f=c);f[0]=a[0]/c[0];f[1]=a[1]/c[1];f[2]=a[2]/c[2];f[3]=a[3]/c[3];return f},scale:function(a,c,f){f||(f=a);f[0]=a[0]*c;f[1]=a[1]*c;f[2]=a[2]*c;
f[3]=a[3]*c;return f},dot:function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]},set:function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},set4:function(a,c,f,q,t){t[0]=a;t[1]=c;t[2]=f;t[3]=q;return t},negate:function(a,c){c||(c=a);c[0]=-a[0];c[1]=-a[1];c[2]=-a[2];c[3]=-a[3];return c},lerp:function(a,c,f,q){q||(q=a);q[0]=a[0]+f*(c[0]-a[0]);q[1]=a[1]+f*(c[1]-a[1]);q[2]=a[2]+f*(c[2]-a[2]);q[3]=a[3]+f*(c[3]-a[3]);return q},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+
"]"}};h["mat2"+b]=y;h["mat3"+b]=v;h["mat4"+b]=w;h["quat4"+b]=B});return A})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(A,h){function b(g,p){g%=p;return 0<=g?g:g+p}Object.defineProperty(h,"__esModule",{value:!0});h.C_INFINITY=Number.POSITIVE_INFINITY;h.C_PI=Math.PI;h.C_2PI=2*h.C_PI;h.C_PI_BY_2=h.C_PI/2;h.C_RAD_TO_256=128/h.C_PI;h.C_256_TO_RAD=h.C_PI/128;h.C_DEG_TO_256=256/360;h.C_DEG_TO_RAD=h.C_PI/180;h.C_SQRT2=1.414213562;h.C_SQRT2_INV=
1/h.C_SQRT2;var d=1/Math.LN2;h.positiveMod=b;h.radToByte=function(g){return b(g*h.C_RAD_TO_256,256)};h.degToByte=function(g){return b(g*h.C_DEG_TO_256,256)};h.log2=function(g){return Math.log(g)*d};h.sqr=function(g){return g*g};h.clamp=function(g,p,n){return Math.min(Math.max(g,p),n)};h.interpolate=function(g,p,n){return g*(1-n)+p*n};h.between=function(g,p,n){return g>=p&&g<=n||g>=n&&g<=p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports dojo/has dojo/promise/all ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),
function(A,h,b,d,g,p,n){var e;b("stable-symbol-rendering")&&(e=new Set);return function(){function k(l,m,r){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;(0>=l||0>=m)&&console.error("Glyph mosaic width and height must be greater than zero!");this.width=l;this.height=m;this._glyphSource=r;this._binPack=new p(l-4,m-4);this._glyphData.push(new Uint8Array(l*m));this._dirties.push(!0);this._textures.push(void 0);
this._addDecorationGlyph()}k.prototype.getGlyphItems=function(l,m){for(var r=this,u=[],v=this._glyphSource,w=new Set,B=1/256,C=0;C<m.length;C++)w.add(Math.floor(m[C]*B));var y=[];w.forEach(function(a){if(256>=a){var c=l+a;r._rangePromises.has(c)?y.push(r._rangePromises.get(c)):(a=v.getRange(l,a).then(function(){r._rangePromises["delete"](c)}).catch(function(){r._rangePromises["delete"](c);throw Error("Unable to query resource");}),r._rangePromises.set(c,a),y.push(a))}});return d(y).then(function(a){a=
r._glyphIndex[l];a||(a={},r._glyphIndex[l]=a);if(b("stable-symbol-rendering")){e.clear();for(var c=0;c<m.length;c++){var f=m[c];e.add(f)}var q=[];w.forEach(function(D){q.push(D)});q.sort();f=[];for(c=0;c<q.length;c++)for(var t=q[c],x=0;256>x;++x)f.push(256*t+x)}else f=m;c=0;for(t=f;c<t.length;c++)if(f=t[c],x=a[f]){if(!b("stable-symbol-rendering")||e.has(f))u[f]={rect:x.rect,metrics:x.metrics,page:x.page}}else if((x=v.getGlyph(l,f))&&x.metrics){var z=r._recordGlyph(x,f);a[f]={rect:z,metrics:x.metrics,
tileIDs:null,page:r._currentPage};if(!b("stable-symbol-rendering")||e.has(f))u[f]={rect:z,metrics:x.metrics,page:r._currentPage};r._dirties[r._currentPage]=!0}return u})};k.prototype._recordGlyph=function(l,m){var r=l.metrics;if(0===r.width)r=new g(0,0,0,0);else{m=r.width+6;var u=r.height+6,v=m%4?4-m%4:4,w=u%4?4-u%4:4;1===v&&(v=5);1===w&&(w=5);r=this._binPack.allocate(m+v,u+w);r.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,
this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new p(this.width-4,this.height-4),r=this._binPack.allocate(m+v,u+w));v=this._glyphData[this._currentPage];l=l.bitmap;var B=w=void 0;if(l)for(var C=0;C<u;C++){w=m*C;B=this.width*(r.y+C+1)+r.x;for(var y=0;y<m;y++)v[B+y+1]=l[w+y]}}return r};k.prototype._addDecorationGlyph=function(){for(var l=[117,149,181,207,207,181,149,117],m=[],r=0;r<l.length;r++)for(var u=l[r],v=0;11>v;v++)m.push(u);
l={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(m)};this._recordGlyph(l,0)};k.prototype.bind=function(l,m,r,u){this._textures[r]||(this._textures[r]=new n(l,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var v=this._textures[r];v.setSamplingMode(m);this._dirties[r]&&v.setData(this._glyphData[r]);l.bindTexture(v,u);this._dirties[r]=!1};k.prototype.dispose=function(){this._binPack=null;for(var l=0,m=this._textures;l<
m.length;l++){var r=m[l];r&&r.dispose()}this._textures.length=0;this._glyphData.length=0};return k}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/RectangleBinPack":function(){define(["require","exports","./Rect"],function(A,h,b){return function(){function d(g,p){this._height=this._width=0;this._free=[];this._width=g;this._height=p;this._free.push(new b(0,0,g,p))}Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"height",{get:function(){return this._height},enumerable:!0,configurable:!0});d.prototype.allocate=function(g,p){if(g>this._width||p>this._height)return new b;for(var n=null,e=-1,k=0;k<this._free.length;++k){var l=this._free[k];g<=l.width&&p<=l.height&&(null===n||l.y<=n.y&&l.x<=n.x)&&(n=l,e=k)}if(null===n)return new b;this._free.splice(e,1);n.width<n.height?(n.width>g&&this._free.push(new b(n.x+g,n.y,n.width-g,p)),n.height>p&&this._free.push(new b(n.x,n.y+p,n.width,n.height-p))):(n.width>g&&this._free.push(new b(n.x+
g,n.y,n.width-g,n.height)),n.height>p&&this._free.push(new b(n.x,n.y+p,g,n.height-p)));return new b(n.x,n.y,g,p)};d.prototype.release=function(g){for(var p=0;p<this._free.length;++p){var n=this._free[p];if(n.y===g.y&&n.height===g.height&&n.x+n.width===g.x)n.width+=g.width;else if(n.x===g.x&&n.width===g.width&&n.y+n.height===g.y)n.height+=g.height;else if(g.y===n.y&&g.height===n.height&&g.x+g.width===n.x)n.x=g.x,n.width+=g.width;else if(g.x===n.x&&g.width===n.width&&g.y+g.height===n.y)n.y=g.y,n.height+=
g.height;else continue;this._free.splice(p,1);this.release(g)}this._free.push(g)};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphSource":function(){define(["require","exports","../../../../request","../../../../core/pbf","../../../../core/promiseUtils"],function(A,h,b,d,g){var p=function(){function e(k){this._metrics=[];for(this._bitmaps=[];k.next();)switch(k.tag()){case 1:for(var l=k.getMessage();l.next();)switch(l.tag()){case 3:for(var m=l.getMessage(),r=void 0,u=void 0,v=void 0,
w=void 0,B=void 0,C=void 0,y=void 0;m.next();)switch(m.tag()){case 1:r=m.getUInt32();break;case 2:u=m.getBytes();break;case 3:v=m.getUInt32();break;case 4:w=m.getUInt32();break;case 5:B=m.getSInt32();break;case 6:C=m.getSInt32();break;case 7:y=m.getUInt32();break;default:m.skip()}r&&(this._metrics[r]={width:v,height:w,left:B,top:C,advance:y},this._bitmaps[r]=u);break;default:l.skip()}break;default:k.skip()}}e.prototype.getMetrics=function(k){return this._metrics[k]};e.prototype.getBitmap=function(k){return this._bitmaps[k]};
return e}(),n=function(){function e(){this._ranges=[]}e.prototype.getRange=function(k){return this._ranges[k]};e.prototype.addRange=function(k,l){this._ranges[k]=l};return e}();return function(){function e(k){this._glyphInfo={};this._baseURL=k}e.prototype.getRange=function(k,l){var m=this._getFontStack(k);if(m.getRange(l))return g.resolve();var r=256*l,u=r+255;k=this._baseURL.replace("{fontstack}",k).replace("{range}",r+"-"+u);return b(k,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(v){m.addRange(l,
new p(new d(new Uint8Array(v.data),new DataView(v.data))))})};e.prototype.getGlyph=function(k,l){if(k=this._getFontStack(k)){var m=Math.floor(l/256);if(!(256<m)&&(k=k.getRange(m)))return{metrics:k.getMetrics(l),bitmap:k.getBitmap(l)}}};e.prototype._getFontStack=function(k){var l=this._glyphInfo[k];l||(l=this._glyphInfo[k]=new n);return l};return e}()})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(A,h,b,d,g){return function(p,
n){p=d.mixin({},{url:p,failOk:!0},n);"array-buffer"===n.responseType?(p.handleAs="arraybuffer",delete p.responseType):n.responseType&&(p.handleAs=n.responseType,delete p.responseType);null!==n.query&&(p.content=p.query,delete p.query);if(n.hasOwnProperty("allowImageDataAccess")){var e={allowImageDataAccess:n.allowImageDataAccess};delete p.allowImageDataAccess}var k=new g(function(){l.isFulfilled()||l.cancel()});var l=b(p,e).then(function(m){k.resolve({data:m})}).catch(function(m){m&&null!=m.httpCode&&
(m.details=m.details||{},m.details.httpStatus=m.httpCode);k.reject(m)});return k.promise}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(A,h){return function(){function b(d,g,p,n){this._tag=0;this._dataType=99;this._data=d;this._dataView=g;this._pos=p||0;this._end=n||d.byteLength}b.prototype.clone=function(){return new b(this._data,this._dataView,this._pos,this._end)};b.prototype.pos=function(){return this._pos};b.prototype.next=function(d){for(;;){if(this._pos===
this._end)return!1;var g=this._decodeVarint();this._tag=g>>3;this._dataType=g&7;if(!d||d===this._tag)break;this.skip()}return!0};b.prototype.empty=function(){return this._pos>=this._end};b.prototype.tag=function(){return this._tag};b.prototype.getInt32=function(){return this._decodeVarint()};b.prototype.getInt64=function(){return this._decodeVarint()};b.prototype.getUInt32=function(){var d=4294967295;d=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&
127)<<7)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return d;d=(d|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return d};b.prototype.getUInt64=function(){return this._decodeVarint()};b.prototype.getSInt32=function(){var d=this.getUInt32();return d>>>1^-(d&1)|0};b.prototype.getSInt64=function(){return this._decodeSVarint()};
b.prototype.getBool=function(){var d=0!==this._data[this._pos];this._skip(1);return d};b.prototype.getEnum=function(){return this._decodeVarint()};b.prototype.getFixed64=function(){var d=this._dataView,g=this._pos;d=d.getUint32(g,!0)+4294967296*d.getUint32(g+4,!0);this._skip(8);return d};b.prototype.getSFixed64=function(){var d=this._dataView,g=this._pos;d=d.getUint32(g,!0)+4294967296*d.getInt32(g+4,!0);this._skip(8);return d};b.prototype.getDouble=function(){var d=this._dataView.getFloat64(this._pos,
!0);this._skip(8);return d};b.prototype.getFixed32=function(){var d=this._dataView.getUint32(this._pos,!0);this._skip(4);return d};b.prototype.getSFixed32=function(){var d=this._dataView.getInt32(this._pos,!0);this._skip(4);return d};b.prototype.getFloat=function(){var d=this._dataView.getFloat32(this._pos,!0);this._skip(4);return d};b.prototype.getString=function(){var d=this._getLength(),g=this._pos;g=this._toString(this._data,g,g+d);this._skip(d);return g};b.prototype.getBytes=function(){var d=
this._getLength(),g=this._pos;g=this._toBytes(this._data,g,g+d);this._skip(d);return g};b.prototype.getMessage=function(){var d=this._getLength(),g=this._pos;g=new b(this._data,this._dataView,g,g+d);this._skip(d);return g};b.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};b.prototype._skip=function(d){if(this._pos+d>this._end)throw Error("Attempt to skip past the end of buffer!");
this._pos+=d};b.prototype._decodeVarint=function(){var d=this._data,g=this._pos,p=0;if(10<=this._end-g){var n=d[g++];p|=n&127;if(0!==(n&128)&&(n=d[g++],p|=(n&127)<<7,0!==(n&128)&&(n=d[g++],p|=(n&127)<<14,0!==(n&128)&&(n=d[g++],p|=(n&127)<<21,0!==(n&128)&&(n=d[g++],p+=268435456*(n&127),0!==(n&128)&&(n=d[g++],p+=34359738368*(n&127),0!==(n&128)&&(n=d[g++],p+=4398046511104*(n&127),0!==(n&128)&&(n=d[g++],p+=562949953421312*(n&127),0!==(n&128)&&(n=d[g++],p+=72057594037927936*(n&127),0!==(n&128)&&(n=d[g++],
p+=0x7fffffffffffffff*(n&127),0!==(n&128)))))))))))throw Error("Varint too long!");}else{for(var e=1;g!==this._end;){n=d[g];if(0===(n&128))break;++g;p+=(n&127)*e;e*=128}if(g===this._end)throw Error("Varint overrun!");++g;p+=n*e}this._pos=g;return p};b.prototype._decodeSVarint=function(){var d=this._decodeVarint();return d%2?-(d+1)/2:d/2};b.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};b.prototype._toString=function(d,g,
p){var n="",e="";for(p=Math.min(this._end,p);g<p;++g){var k=d[g];k&128?e+="%"+k.toString(16):(n+=decodeURIComponent(e)+String.fromCharCode(k),e="")}e.length&&(n+=decodeURIComponent(e));return n};b.prototype._toBytes=function(d,g,p){p=Math.min(this._end,p);return new Uint8Array(d.buffer,g,p-g)};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(A,h,b,d,g,
p){return function(){function n(e,k,l){void 0===l&&(l=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;(0>=e||0>=k)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=e;this._pageHeight=k;0<l&&(this._maxItemSize=l);this.pixelRatio=window.devicePixelRatio|1;this._binPack=new g(this._pageWidth,
this._pageHeight);this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}n.prototype.getWidth=function(e){return e>=this._size.length?-1:this._size[e][0]};n.prototype.getHeight=function(e){return e>=this._size.length?-1:this._size[e][1]};n.prototype.getPage=function(e){return e<this._textures.length?this._textures[e]:null};n.prototype.has=function(e){return this._mosaicRects.has(e)};
Object.defineProperty(n.prototype,"itemCount",{get:function(){return this._mosaicRects.size},enumerable:!0,configurable:!0});n.prototype.getSpriteItem=function(e){return this._mosaicRects.get(e)};n.prototype.addSpriteItem=function(e,k,l,m,r,u){if(this._mosaicRects.has(e))return this._mosaicRects.get(e);var v=this._allocateImage(k[0],k[1]),w=v[0],B=v[1];v=v[2];if(0>=w.width||0>=w.height)return null;l={rect:w,width:k[0],height:k[1],anchorX:l[0],anchorY:l[1],sdf:u,pixelRatio:1,page:B};this._mosaicRects.set(e,
l);this._copy({rect:w,spriteSize:k,spriteData:m,page:B,pageSize:v,repeat:r,sdf:u});return l};n.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};n.prototype.processNextItem=function(){var e=this._spriteCopyQueue.pop();e&&this._copy(e)};n.prototype.getSpriteItems=function(e){for(var k={},l=0;l<e.length;l++){var m=e[l];k[m]=this.getSpriteItem(m)}return k};n.prototype.getMosaicItemPosition=function(e,k){k=(e=this.getSpriteItem(e))&&e.rect;if(!k)return null;k.width=e.width;
k.height=e.height;return{size:[e.width,e.height],tl:[(k.x+1)/this._size[e.page][0],(k.y+1)/this._size[e.page][1]],br:[(k.x+1+e.width)/this._size[e.page][0],(k.y+1+e.height)/this._size[e.page][1]],page:e.page}};n.prototype.bind=function(e,k,l,m){void 0===l&&(l=0);void 0===m&&(m=0);this._textures[l]||(this._textures[l]=new p(e,{pixelFormat:6408,dataType:5121,width:this._size[l][0],height:this._size[l][1]},new Uint8Array(this._mosaicsData[l].buffer)));var r=this._textures[l];r.setSamplingMode(k);this._dirties[l]&&
(r.setData(new Uint8Array(this._mosaicsData[l].buffer)),r.generateMipmap());e.bindTexture(r,m);this._dirties[l]=!1};n._copyBits=function(e,k,l,m,r,u,v,w,B,C,y){var a=m*k+l;v=w*u+v;if(y)for(v-=u,y=-1;y<=C;y++,a=((y+C)%C+m)*k+l,v+=u)for(w=-1;w<=B;w++)r[v+w]=e[a+(w+B)%B];else for(y=0;y<C;y++){for(w=0;w<B;w++)r[v+w]=e[a+w];a+=k;v+=u}};n.prototype._copy=function(e){if(!(e.page>=this._mosaicsData.length)){var k=e.spriteData,l=this._mosaicsData[e.page];l&&k||console.error("Source or target images are uninitialized!");
n._copyBits(k,e.spriteSize[0],0,0,l,e.pageSize[0],e.rect.x+1,e.rect.y+1,e.spriteSize[0],e.spriteSize[1],e.repeat);this._dirties[e.page]=!0}};n.prototype._allocateImage=function(e,k){e+=2;k+=2;var l=Math.max(e,k);if(this._maxItemSize&&this._maxItemSize<l){l=Math.pow(2,Math.ceil(b.log2(e)));var m=Math.pow(2,Math.ceil(b.log2(k)));e=new d(0,0,e,k);this._mosaicsData.push(new Uint32Array(l*m));this._dirties.push(!0);this._size.push([l,m]);this._textures.push(void 0);return[e,this._mosaicsData.length-1,
[l,m]]}l=this._binPack.allocate(e+(e%4?4-e%4:0),k+(k%4?4-k%4:0));return 0>=l.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new g(this._pageWidth,this._pageHeight),this._allocateImage(e,k)):[l,this._currentPage,[this._pageWidth,this._pageHeight]]};
n.prototype.dispose=function(){this._binPack=null;for(var e=0,k=this._textures;e<k.length;e++){var l=k[e];l&&l.dispose()}this._textures.length=0;this._mosaicsData.length=0;this._mosaicRects.clear()};return n}()})},"esri/layers/vectorTiles/views/3d/support/imageUtils":function(){define(["require","exports","../../../request"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.dataURItoBlob=function(d){var g=atob(d.split(",")[1]);d=d.split(",")[0].split(":")[1].split(";")[0];for(var p=
new ArrayBuffer(g.length),n=new Uint8Array(p),e=0;e<g.length;e++)n[e]=g.charCodeAt(e);return new Blob([p],{type:d})};h.requestImage=function(d){return b(d,{responseType:"image",allowImageDataAccess:!0}).then(function(g){return g.data})}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFConverter":function(){define(["require","exports","../../../../core/promiseUtils","../../../../core/promiseUtils","./packingUtils"],function(A,h,b,d,g){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function p(n){this.size=
n;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=n;this.context=this.canvas.getContext("2d");this._gridOuter=new Float64Array(n*n);this._gridInner=new Float64Array(n*n);this._f=new Float64Array(n);this._d=new Float64Array(n);this._z=new Float64Array(n+1);this._v=new Int16Array(n);n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("style","position: absolute;");n.setAttribute("width","0");n.setAttribute("height","0");document.body.appendChild(n);
this._svg=n}p.prototype.draw=function(n,e,k){var l=this;void 0===k&&(k=31);var m=this._createSVGString(n);return b.create(function(r,u){var v=new Image;v.src="data:image/svg+xml; charset\x3dutf8, "+encodeURIComponent(m);v.onload=function(){l.context.clearRect(0,0,l.size,l.size);l.context.drawImage(v,0,0,l.size,l.size);for(var B=l.context.getImageData(0,0,l.size,l.size),C=new Uint8Array(l.size*l.size*4),y=0;y<l.size*l.size;y++){var a=B.data[4*y+3]/255;l._gridOuter[y]=1===a?0:0===a?1E20:Math.pow(Math.max(0,
.5-a),2);l._gridInner[y]=1===a?1E20:0===a?0:Math.pow(Math.max(0,a-.5),2)}l._edt(l._gridOuter,l.size,l.size);l._edt(l._gridInner,l.size,l.size);for(y=0;y<l.size*l.size;y++)g.packFloatRGBA(.5-(l._gridOuter[y]-l._gridInner[y])/(2*k),C,4*y);r(C)};var w=e&&e.signal;if(w)d.onAbort(w,function(){return u(d.createAbortError())})})};p.prototype._createSVGString=function(n){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",n);this._svg.appendChild(e);n=e.getBBox();var k=
n.width/n.height,l=this.size/2,m;if(1<k){var r=m=l/n.width;var u=this.size/4;k=l-1/k*l/2}else m=r=l/n.height,u=l-l*k/2,k=this.size/4;e.setAttribute("style","transform: matrix("+m+", 0, 0, "+r+", "+(-n.x*m+u)+", "+(-n.y*r+k)+")");n='\x3csvg style\x3d"fill:red;" height\x3d"'+this.size+'" width\x3d"'+this.size+'" xmlns\x3d"http://www.w3.org/2000/svg"\x3e'+this._svg.innerHTML+"\x3c/svg\x3e";this._svg.removeChild(e);return n};p.prototype._edt=function(n,e,k){for(var l=this._f,m=this._d,r=this._v,u=this._z,
v=0;v<e;v++){for(var w=0;w<k;w++)l[w]=n[w*e+v];this._edt1d(l,m,r,u,k);for(w=0;w<k;w++)n[w*e+v]=m[w]}for(w=0;w<k;w++){for(v=0;v<e;v++)l[v]=n[w*e+v];this._edt1d(l,m,r,u,e);for(v=0;v<e;v++)n[w*e+v]=Math.sqrt(m[v])}};p.prototype._edt1d=function(n,e,k,l,m){k[0]=0;l[0]=-1E20;l[1]=1E20;for(var r=1,u=0;r<m;r++){for(var v=(n[r]+r*r-(n[k[u]]+k[u]*k[u]))/(2*r-2*k[u]);v<=l[u];)u--,v=(n[r]+r*r-(n[k[u]]+k[u]*k[u]))/(2*r-2*k[u]);u++;k[u]=r;l[u]=v;l[u+1]=1E20}for(u=r=0;r<m;r++){for(;l[u+1]<r;)u++;e[r]=(r-k[u])*(r-
k[u])+n[k[u]]}};return p}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/packingUtils":function(){define(["require","exports"],function(A,h){function b(n){return n-Math.floor(n)}Object.defineProperty(h,"__esModule",{value:!0});var d=[1,256,65536,16777216],g=[1/256,1/65536,1/16777216,1/4294967296],p=function(n,e){void 0===e&&(e=0);for(var k=0,l=0;4>l;l++)k+=n[e+l]*g[l];return k}(new Uint8ClampedArray([255,255,255,255]));h.packFloatRGBA=function(n,e,k){void 0===k&&(k=0);n=0>n?0:n>p?
p:n;for(var l=0;4>l;l++)e[k+l]=Math.floor(256*b(n*d[l]))}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLRendererInfo":function(){define("require exports ../../../../core/screenUtils ../../../../geometry/support/scaleUtils ../../../../renderers/support/utils ./color ./Utils".split(" "),function(A,h,b,d,g,p,n){function e(k,l){var m=l.length;if(k<l[0].value||1===m)return l[0].size;for(var r=1;r<m;r++)if(k<l[r].value)return l[r-1].size+(k-l[r-1].value)/(l[r].value-l[r-1].value)*(l[r].size-l[r-
1].size);return l[m-1].size}return function(){function k(){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=new Float32Array(6);this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1};
this.symbolLevels.push(0)}Object.defineProperty(k.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"heatmapParameters",{get:function(){return this._heatmapParameters},enumerable:!0,configurable:!0});k.prototype.updateHeatmapParameters=function(l){var m=l.blurRadius,r=Math.round(4.5*l.blurRadius),u=2*r+1;this._heatmapParameters||(this._heatmapParameters={radius:m,blurRadius:r,kernelSize:u,refreshIntensityKernel:!0,
intensityKernel:null,color:null,maxPixelIntensity:l.maxPixelIntensity,minPixelIntensity:l.minPixelIntensity});for(var v=this._heatmapParameters,w=l.colorStops,B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y,a=0;16>a;a++){var c=w[Math.min(a,w.length-1)];B[a]=c.ratio;y=4*a;C[y+0]=c.color[0]/255;C[y+1]=c.color[1]/255;C[y+2]=c.color[2]/255;C[y+3]=1<c.color[3]?c.color[3]/255:c.color[3];
p.premultiplyAlpha(C,y,!0)}v.color={values:B,colors:C,refreshColorRamp:!0};1E-6<Math.abs(v.radius-l.radius)&&(v.radius=m,v.blurRadius=r,v.kernelSize=u,v.refreshIntensityKernel=!0);v.maxPixelIntensity=l.maxPixelIntensity;v.minPixelIntensity=l.minPixelIntensity};k.prototype.updateVisualVariables=function(l,m){var r=this._vvMaterialParameters;r.vvOpacityEnabled=!1;r.vvSizeEnabled=!1;r.vvColorEnabled=!1;r.vvRotationEnabled=!1;if(l){var u=l.size;if(u){r.vvSizeEnabled=!0;if(u.minMaxValue){var v=u.minMaxValue,
w=void 0,B=void 0;n.isDefined(v.minSize)&&n.isDefined(v.maxSize)&&(n.isNumber(v.minSize)&&n.isNumber(v.maxSize)?(w=b.pt2px(v.minSize),B=b.pt2px(v.maxSize)):(B=m.scale,w=b.pt2px(e(B,v.minSize.stops)),B=b.pt2px(e(B,v.maxSize.stops))));this.vvSizeMinMaxValue.set([v.minDataValue,v.maxDataValue,w,B])}u.scaleStops&&(this.vvSizeScaleStopsValue=b.pt2px(e(m.scale,u.scaleStops.stops)));u.unitValue&&(this.vvSizeUnitValueToPixelsRatio=d.getMetersPerUnitForSR(m.spatialReference)/g.meterIn[u.unitValue.unit]/m.resolution);
u.fieldStops&&(this.vvSizeFieldStopsValues.set(u.fieldStops.values),this.vvSizeFieldStopsSizes.set(u.fieldStops.sizes))}if(m=l.color)r.vvColorEnabled=!0,this.vvColorValues.set(m.values),this.vvColors.set(m.colors);if(m=l.opacity)r.vvOpacityEnabled=!0,this.vvOpacityValues.set(m.values),this.vvOpacities.set(m.opacities);if(l=l.rotation)r.vvRotationEnabled=!0,r.vvRotationType=l.type}};return k}()})},"esri/layers/vectorTiles/geometry/support/scaleUtils":function(){define(["require","exports","../../config",
"../../core/kebabDictionary","./WKIDUnitConversion"],function(A,h,b,d,g){function p(v){return u.fromJSON(v.toLowerCase())||null}function n(v){return e(v)||h.decDegToMeters}function e(v){if(v)if("object"===typeof v){var w=v.wkid;var B=v.wkt}else"number"===typeof v?w=v:"string"===typeof v&&(B=v);if(w)var C=r.values[r[w]];else B&&-1!==B.search(/^PROJCS/i)&&(v=m.exec(B))&&v[1]&&(C=parseFloat(v[1].split(",")[1]));return C}function k(v){if(v)if("object"===typeof v){var w=v.wkid;var B=v.wkt}else"number"===
typeof v?w=v:"string"===typeof v&&(B=v);if(w)var C=r.units[r[w]];else B&&-1!==B.search(/^PROJCS/i)&&(v=m.exec(B))&&v[1]&&(C=(v=/[\\"\\']{1}([^\\"\\']+)/.exec(v[1]))&&v[1]);return C?p(C):null}function l(v,w){w=n(w);return v/(w*h.inchesPerMeter*b.screenDPI)}Object.defineProperty(h,"__esModule",{value:!0});h.inchesPerMeter=39.37;h.decDegToMeters=20015077/180;var m=/UNIT\[([^\]]+)\]\]$/i,r=g,u=d({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",
yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},{ignoreUnknown:!0});h.unitFromRESTJSON=p;h.unitToRESTJSON=function(v){return u.toJSON(v)||null};h.getMetersPerVerticalUnitForSR=function(v){v=n(v);return 1E5<v?
1:v};h.getVerticalUnitStringForSR=function(v){return 1E5<n(v)?"meters":k(v)};h.getMetersPerUnitForSR=n;h.getMetersPerUnit=e;h.getUnitString=k;h.getScale=function(v,w){w=w||v.extent;v=v.width;var B=e(w&&w.spatialReference);return w&&v?w.width/v*(B||h.decDegToMeters)*h.inchesPerMeter*b.screenDPI:0};h.getResolutionForScale=l;h.getExtentForScale=function(v,w){var B=v.extent;v=v.width;w=l(w,B.spatialReference);return B.clone().expand(w*v/B.width)}})},"esri/layers/vectorTiles/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../renderers ../../../../../core/executeAsync ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/SetPool ../../../../../renderers/support/jsonUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/mesh/factories/WGLMeshFactory".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m){function r(v,w){l.isMarkerSymbol(v)||l.isLineSymbol(v)?w.add(v):l.isFillSymbol(v)&&(w.add(v),v.outline&&"none"!==v.outline.style&&w.add(v.outline))}function u(v,w){w.has(v)||w.set(v,new Set);var B=v.text;v=w.get(v);w=B.length;for(var C=0;C<w;C++){var y=B.charCodeAt(C);v.add(y)}}Object.defineProperty(h,"__esModule",{value:!0});A=function(){function v(w){this.type="symbol";this._symbolToMosaicItemMap=new Map;this._symbolToMosaicItemMap.clear();this.configuration=w.configuration;
this.service=w.service;this.spatialReference=w.spatialReference;this.tileRenderer=w.tileRenderer}v.prototype.destroy=function(){this._symbolToMosaicItemMap.clear()};v.prototype.getMeshData=function(w,B){return B&&B.features&&0!==B.features.length?this._processFeatures(w,B.features).then(function(C){return{tileKey:w.id,data:C}}):p.resolve({tileKey:w.id,data:null})};v.prototype.setConfiguration=function(w){this.configuration=w;this.factory=this.renderer=this.rendererInfo=null};v.prototype.getFactory=
function(){this.factory||(this.factory=this._createFactory());return this.factory};v.prototype.getRenderer=function(){this.renderer||(this.renderer=this._createRenderer());return this.renderer};v.prototype.getRendererInfo=function(){this.rendererInfo||(this.rendererInfo=this._createRendererInfo());return this.rendererInfo};v.prototype._createFactory=function(){if(!this.configuration)return null;var w={fields:this.service.fields,typeIdField:this.service.typeIdField,types:this.service.types};return m.default.from(this.getRenderer(),
w,this._symbolToMosaicItemMap,this.service.geometryType,this.service.objectIdField,this.spatialReference,this.configuration.devicePixelRatio)};v.prototype._createRenderer=function(){return this.configuration?e.fromJSON(this.configuration.renderer):null};v.prototype._createRendererInfo=function(){return this.configuration?k.createRendererInfo(e.fromJSON(this.configuration.renderer),this.spatialReference,{fields:this.service.fields}):null};v.prototype._processFeatures=function(w,B){var C=this;return B&&
B.length?this._getMosaicItems(B).then(function(){return C._writeFeatures(w,B)}):p.resolve(null)};v.prototype._writeFeatures=function(w,B){var C=this,y=0,a=this.getFactory(),c=a.createMeshData(B.length),f={viewingMode:"",scale:w.scale};return d(function(){var q=B[y++],t=y===B.length;a.write(c,q,f);return t}).then(function(){return C._encodeDisplayData(c)})};v.prototype._encodeDisplayData=function(w){var B={};w.encode(B,[]);return B};v.prototype._getReturnCentroid=function(w){function B(C){if(!C)return!1;
C=C.type;return"simple-marker"===C||"picture-marker"===C||"text"===C}if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(w.type){case "simple":return B(w.symbol);case "unique-value":return B(w.defaultSymbol)||w.uniqueValueInfos.some(function(C){return B(C.symbol)});case "class-breaks":return B(w.defaultSymbol)||w.classBreakInfos.some(function(C){return B(C.symbol)});default:return!0}};v.prototype._getMosaicItems=function(w){w=n.acquire();for(var B=g.acquire(),C=this.getRenderer(),
y=0,a=C.getSymbols();y<a.length;y++){var c=a[y];l.isTextSymbol(c)?u(c,B):r(c,w)}(C instanceof b.UniqueValueRenderer||C instanceof b.ClassBreaksRenderer)&&(C=C.backgroundFillSymbol)&&r(C,w);var f=this._symbolToMosaicItemMap,q=g.acquire(),t=[],x=0;w.forEach(function(z){f.has(z.id)||(q.set(x,z),t.push({symbol:z.toJSON(),id:x}),x++)});B.forEach(function(z,D){if(f.has(D.id)){var F=f.get(D.id).glyphMosaicItems,G=[];z.forEach(function(H){if(F&&F.length<H||!F[H])G[H]=H});0<G.length&&(q.set(x,D),t.push({symbol:D.toJSON(),
id:x,glyphIds:G}),x++)}else{q.set(x,D);var E=[];z.forEach(function(H){return E.push(H)});t.push({symbol:D.toJSON(),id:x,glyphIds:E});x++}});if(0<t.length)return this.tileRenderer.getMaterialItems(t).then(function(z){for(var D=0;D<z.length;D++){var F=z[D],G=q.get(F.id);if(G)if(l.isTextSymbol(G))if(f.has(G.id)){if(G=f.get(G.id).glyphMosaicItems,F=F.mosaicItem.glyphMosaicItems)for(var E=0;E<F.length;E++)null!=F[E]&&(G[E]=F[E])}else f.set(G.id,F.mosaicItem);else f.set(G.id,F.mosaicItem)}g.release(q)});
n.release(w);g.release(B);return p.resolve()};return v}();h.SymbolProcessor=A})},"esri/layers/vectorTiles/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(A,h,b,d,g,p,n,e){Object.defineProperty(h,"__esModule",{value:!0});h.ClassBreaksRenderer=b;h.HeatmapRenderer=d;h.BaseRenderer=g;h.SimpleRenderer=p;h.UniqueValueRenderer=
n;h.isRenderer=function(k){return k instanceof h.BaseRenderer};h.fromJSON=e.fromJSON})},"esri/layers/vectorTiles/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),function(A,h,b,d,g,p,n,
e,k,l,m,r,u,v){var w=g.getLogger("esri.renderers.ClassBreaksRenderer");u=u.LegendOptions;v=v.ClassBreakInfo;var B=b({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),C=p.ensureType(v),y=A(r,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:e,key:"type",typeMap:{"simple-fill":m.types.typeMap["simple-fill"],"picture-fill":m.types.typeMap["picture-fill"],"polygon-3d":m.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:l.read,write:{target:{backgroundFillSymbol:{type:k}},writer:l.writeTarget}}},read:l.read,write:l.writeTarget}},classBreakInfos:{type:[v],json:{read:function(a,c,f){if(Array.isArray(a)){var q=c.minValue;return a.map(function(t){var x=new v;x.read(t,f);null==x.minValue&&(x.minValue=q);null==x.maxValue&&(x.maxValue=x.minValue);q=x.maxValue;return x})}},write:function(a,c,f,q){a=a.map(function(t){return t.write({},q)});this._areClassBreaksConsecutive()&&a.forEach(function(t){delete t.classMinValue});
c[f]=a}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:m.rendererTypes,value:null,json:{origins:{"web-scene":{read:l.read,write:{target:{defaultSymbol:{types:m.rendererTypes3D}},
writer:l.writeTarget}}},read:l.read,write:l.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return n.createFunction(this.valueExpression)}},legendOptions:{type:u,value:null,json:{write:!0}},field:{value:null,cast:function(a){return null==a?a:"function"===typeof a?a:p.ensureString(a)},json:{type:String,write:function(a,c,f,q){"string"===typeof a?c[f]=a:q&&
q.messages?q.messages.push(new d("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):w.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),c=!!this.normalizationField,
f=null!=this.normalizationTotal;if(c||f)a=c&&"field"||f&&"percent-of-total",c&&f&&console.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===a||"percent-of-total"===a)a=null;return a},json:{read:B.fromJSON,write:function(a,c){if(a=B.toJSON(a))c.normalizationType=a}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(a,c){c.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=
[]},addClassBreakInfo:function(a,c,f){a="number"===typeof a?new v({minValue:a,maxValue:c,symbol:f}):C(h.clone(a));this.classBreakInfos.push(a);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(a,c){var f,q=this.classBreakInfos.length;for(f=0;f<q;f++){var t=[this.classBreakInfos[f].minValue,this.classBreakInfos[f].maxValue];if(t[0]==a&&t[1]==c){this.classBreakInfos.splice(f,1);break}}},getBreakIndex:function(a,c){var f=this.field,q=a.attributes,t=this.classBreakInfos.length,
x=this.isMaxInclusive;if(this.valueExpression)a=n.executeFunction(this.compiledFunc,n.createExecContext(a,n.getViewInfo(c)));else if("function"===typeof f)a=f(a);else if(a=parseFloat(q[f]),c=this.normalizationType)if(f=parseFloat(this.normalizationTotal),q=parseFloat(q[this.normalizationField]),"log"===c)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===c&&!isNaN(f))a=a/f*100;else if("field"===c&&!isNaN(q)){if(isNaN(a)||isNaN(q))return-1;a/=q}if(null!=a&&!isNaN(a)&&"number"===typeof a)for(q=
0;q<t;q++)if(c=[this.classBreakInfos[q].minValue,this.classBreakInfos[q].maxValue],c[0]<=a&&(x?a<=c[1]:a<c[1]))return q;return-1},getClassBreakInfo:function(a,c){a=this.getBreakIndex(a,c);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a,c){a=this.getBreakIndex(a,c);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},getSymbols:function(){var a=[];this.classBreakInfos.forEach(function(c){c.symbol&&a.push(c.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a},
clone:function(){return new y({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:h.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,
visualVariables:h.clone(this.visualVariables),legendOptions:h.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(c){c&&(a[c]=!0)});this.valueExpression&&n.extractFieldNames(this.valueExpression).forEach(function(c){a[c]=!0})},_areClassBreaksConsecutive:function(){for(var a=this.classBreakInfos,c=1;c<a.length;c++)if(a[c-1].maxValue!==a[c].minValue)return!1;
return!0}});return y})},"esri/layers/vectorTiles/symbols/PolygonSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/Symbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,
arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a){function c(t,
x,z){x=t?q[t.type]||null:null;if(x)return x=new x,x.read(t,z),x;z&&z.messages&&t&&z.messages.push(new d("symbol:unsupported","Symbols of type '"+(t.type||"unknown")+"' are not supported",{definition:t,context:z}));return null}function f(t,x,z){if(!t)return null;if(!z||"web-scene"!==z.origin||t.isInstanceOf(w)||t.isInstanceOf(C))return t.write(x,z);var D=a.to3D(t);if(D.symbol)return D.symbol.write(x,z);z.messages&&z.messages.push(new b("symbol:unsupported","Symbols of type '"+t.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",
{symbol:t,context:z,error:D.error}));return null}Object.defineProperty(h,"__esModule",{value:!0});var q={esriSMS:v,esriPMS:k,esriTS:B,esriSLS:u,esriSFS:r,esriPFS:e,PointSymbol3D:l,LineSymbol3D:p,PolygonSymbol3D:m,MeshSymbol3D:n,LabelSymbol3D:g,styleSymbolReference:C};h.read=c;h.writeTarget=function(t,x,z,D){(t=f(t,{},D))&&(x[z]=t)};h.write=f;h.fromJSON=function(t,x){return c(t,null,x)};h.readCallout3D=function(t,x){if(!t||!t.type)return null;var z=null;switch(t.type){case "line":z=new y}z&&z.read(t,
x);return z}})},"esri/layers/vectorTiles/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(A,h,b,d,g){A=function(p){function n(e,k,l){var m=p.call(this,e,k,l)||this;return m instanceof n?m:new n(e,k,l)}b(n,p);return n}(g);A.prototype.type="warning";return A})},"esri/layers/vectorTiles/symbols/LabelSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(A,h,b,d){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/LineSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/MeshSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(A,h,b,d){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/PictureFillSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./FillSymbol","./support/urlUtils"],function(A,h,b,d,g){var p={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},n=A(d,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",url:g.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:b.toPt,
json:{write:!0}},height:{value:12,cast:b.toPt,json:{write:!0}},xoffset:{value:0,cast:b.toPt,json:{write:!0}},yoffset:{value:0,cast:b.toPt,json:{write:!0}},source:g.sourcePropertyDefinition},getDefaults:function(){return h.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,k,l,m){if(e&&"string"!==typeof e&&null==e.imageData)return e;var r={};e&&(r.url=e);k&&(r.outline=k);null!=l&&(r.width=b.toPt(l));null!=m&&(r.height=b.toPt(m));return r},clone:function(){var e=new n({color:h.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});e._set("source",h.clone(this.source));return e}});n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(A,h){return A.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:h,json:{read:{default:null},write:!0}},type:null}})})},
"esri/layers/vectorTiles/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(A,h,b){function d(e,k,l){return k.imageData?b.makeData({mediaType:k.contentType||"image/png",isBase64:!0,data:k.imageData}):g(k.url,l)}function g(e,k){return!k||"service"!==k.origin&&"portal-item"!==k.origin||!k.layer||"feature"!==k.layer.type&&"stream"!==k.layer.type||b.isAbsolute(e)||!k.layer.parsedUrl?b.read(e,k):b.join(k.layer.parsedUrl.path,"images",e)}function p(e,k,l,m){b.isDataProtocol(e)?
(e=b.dataComponents(e),k.contentType=e.mediaType,k.imageData=e.data,l&&l.imageData===k.imageData&&l.url&&(k.url=n(l.url,m))):k.url=n(e,m)}function n(e,k){return b.write(e,k)}Object.defineProperty(h,"__esModule",{value:!0});h.readImageDataOrUrl=d;h.read=g;h.writeImageDataAndUrl=p;h.write=n;h.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:d},write:{writer:function(e,k,l,m){p(e,k,this.source,m)}}}};h.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,
k,l){e={};k.imageData&&(e.imageData=k.imageData);k.contentType&&(e.contentType=k.contentType);k.url&&(e.url=g(k.url,l));return e}}}}})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(A,h,b,d){function g(c){return b.normalize(c)}function p(c){return"data:"===c.slice(0,5)}function n(c){return e(c)||y.test(c)}function e(c){return c&&"/"===c[0]&&"/"===c[1]}function k(c){return b.urlToObject(c)}function l(c){if("string"===typeof c)return new d(r(c));
c.scheme||(c.scheme=h.appUrl.scheme);return c}function m(c){if(p(c))return null;var f=c.indexOf("://");if(-1===f&&e(c))f=2;else if(-1!==f)f+=3;else return null;f=c.indexOf("/",f);return-1===f?c:c.slice(0,f)}function r(c,f,q){void 0===f&&(f=h.appBaseUrl);if(e(c))return q&&q.preserveProtocolRelative?c:"http"===h.appUrl.scheme&&h.appUrl.authority===m(c).slice(2)?"http:"+c:"https:"+c;if(y.test(c))return c;"/"===c[0]&&(q=f.indexOf("//"),q=f.indexOf("/",q+2),f=-1===q?f:f.slice(0,q));return v(f,c)}function u(c,
f,q){void 0===q&&(q=!1);c=l(c);f=l(f);return q||c.scheme===f.scheme?c.host.toLowerCase()===f.host.toLowerCase()&&c.port===f.port:!1}function v(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];if(c&&c.length){f=[];if(n(c[0])){var q=c[0],t=q.indexOf("//");f.push(q.slice(0,t+1));C.test(c[0])&&(f[0]+="/");c[0]=q.slice(t+2)}else"/"===c[0][0]&&f.push("");c=c.reduce(function(x,z){return z?x.concat(z.split("/")):x},[]);for(q=0;q<c.length;q++)t=c[q],".."===t&&0<f.length?f.pop():!t||"."===t&&0!==
f.length||f.push(t);return f.join("/")}}function w(c,f,q){if(!(f&&q&&c&&n(c)))return c;var t=c.indexOf("//"),x=c.indexOf("/",t+2),z=c.indexOf(":",t+2);x=Math.min(0>x?c.length:x,0>z?c.length:z);if(c.slice(t+2,x).toLowerCase()!==f.toLowerCase())return c;f=c.slice(0,t+2);c=c.slice(x);return""+f+q+c}function B(c,f,q){void 0===f&&(f=h.appBaseUrl);if(!n(c))return c;var t=g(c),x=t.toLowerCase();f=g(f).toLowerCase().replace(/\/+$/,"");if((q=q?g(q).toLowerCase().replace(/\/+$/,""):null)&&0!==f.indexOf(q))return c;
for(var z=function(G,E,H){H=G.indexOf(E,H);return-1===H?G.length:H},D=z(x,"/",x.indexOf("//")+2),F=-1;x.slice(0,D+1)===f.slice(0,D)+"/";){F=D+1;if(D===x.length)break;D=z(x,"/",D+1)}if(-1===F||q&&F<q.length)return c;c=t.slice(F);t=f.slice(F-1).replace(/[^/]+/g,"").length;if(0<t)for(x=0;x<t;x++)c="../"+c;else c="./"+c;return c}Object.defineProperty(h,"__esModule",{value:!0});h.normalize=g;h.canUseXhr=function(c){return b.canUseXhr(c)};h.removeTrailingSlash=function(c){return c.replace(/\/+$/,"")};A=
Function("return this")();h.appUrl=new d(A.location);h.appBaseUrl=function(){var c=h.appUrl.path;c=c.substring(0,c.lastIndexOf(c.split("/")[c.split("/").length-1]));return h.appUrl.scheme+"://"+h.appUrl.host+(null!=h.appUrl.port?":"+h.appUrl.port:"")+c}();var C=/^\s*file:/i,y=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;h.isDataProtocol=p;h.isAbsolute=n;h.isProtocolRelative=e;h.urlToObject=k;h.getOrigin=m;h.makeAbsolute=r;h.hasSameOrigin=u;h.join=v;h.removeFile=function(c){var f=0;if(n(c)){var q=c.indexOf("//");
-1!==q&&(f=q+2)}q=c.lastIndexOf("/");return q<f?c:c.slice(0,q+1)};h.addProxy=function(c){return b.addProxy(c)};h.makeData=function(c){return c.isBase64?"data:"+c.mediaType+";base64,"+c.data:"data:"+c.mediaType+","+c.data};var a=/^data:(.*?)(;base64)?,(.*)$/;h.dataComponents=function(c){return(c=c.match(a))?{mediaType:c[1],isBase64:!!c[2],data:c[3]}:null};h.changeDomain=w;h.read=function(c,f){var q=f&&f.url&&f.url.path;c&&q&&(c=r(c,q,{preserveProtocolRelative:!0}));(f=f&&f.portal)&&!f.isPortal&&f.urlKey&&
f.customBaseUrl?(q=f.urlKey+"."+f.customBaseUrl,f=u(h.appUrl,h.appUrl.scheme+"://"+q)?w(c,f.portalHostname,q):w(c,q,f.portalHostname)):f=c;return f};h.write=function(c,f){if(!c)return c;!n(c)&&f&&f.blockedRelativeUrls&&f.blockedRelativeUrls.push(c);var q=r(c);if(f){var t=f.verifyItemRelativeUrls&&f.verifyItemRelativeUrls.rootPath||f.url&&f.url.path;t&&(q=B(q,t,t),q!==c&&f.verifyItemRelativeUrls&&f.verifyItemRelativeUrls.writtenUrls.push(q))}c=q;q=(f=f&&f.portal)&&!f.isPortal&&f.urlKey&&f.customBaseUrl?
w(c,f.urlKey+"."+f.customBaseUrl,f.portalHostname):c;return q};h.makeRelative=B;h.removeQueryParameters=function(c){c=k(c);Object.keys(c.query||{});return c.path}})},"esri/layers/vectorTiles/symbols/PictureMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./support/urlUtils"],function(A,h,b,d,g){var p={width:12,height:12,angle:0,xoffset:0,yoffset:0},n=A(d,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",
url:g.urlPropertyDefinition,source:g.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(e,k){return k.size||e}},write:!0},cast:b.toPt},width:{json:{read:{source:["width","size"],reader:function(e,k){return k.size||e}},write:!0},cast:b.toPt},size:{json:{write:!1}}},getDefaults:function(){return h.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,k,l){if(e&&"string"!==typeof e&&null==e.imageData)return e;var m={};e&&(m.url=e);null!=k&&(m.width=b.toPt(k));
null!=l&&(m.height=b.toPt(l));return m},clone:function(){var e=new n({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});e._set("source",h.clone(this.source));return e}});n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(A,h,b){return A(b,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(d){return d&&
-1*d},write:function(d,g){g.angle=d&&-1*d}}},type:{},xoffset:{value:0,cast:h.toPt,json:{write:!0}},yoffset:{value:0,cast:h.toPt,json:{write:!0}},size:{value:9,cast:function(d){return"auto"===d?d:h.toPt(d)},json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/PointSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/SimpleFillSymbol":function(){define(["../core/declare",
"../core/lang","./FillSymbol","./SimpleLineSymbol"],function(A,h,b,d){var g={style:"solid",outline:new d,color:[0,0,0,.25]},p=A(b,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(n){return h.valueOf(this._styles,n)||void 0},write:function(n,e){e.style=this._styles[n]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal",
"backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return h.mixin(this.inherited(arguments),g)},normalizeCtorArgs:function(n,e,k){if(n&&"string"!==typeof n)return n;var l={};n&&(l.style=n);e&&(l.outline=e);k&&(l.color=k);return l},clone:function(){return new p({color:h.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});h.mixin(p,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",
STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});p.defaultProps=g;return p})},"esri/layers/vectorTiles/symbols/SimpleMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./SimpleLineSymbol"],function(A,h,b,d,g){var p={style:"circle",color:[255,255,255,.25],outline:new g,size:12,angle:0,xoffset:0,yoffset:0},n=A(d,{declaredClass:"esri.symbols.SimpleMarkerSymbol",
properties:{color:{json:{write:function(e,k){e&&"x"!==this.style&&"cross"!==this.style&&(k.color=e.toJSON());null===e&&(k.color=null)}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(e){return h.valueOf(this._styles,e)},write:function(e,k){k.style=this._styles[e]}}},path:{type:String,value:null,set:function(e){this.style="path";this._set("path",e)},json:{write:!0}},outline:{type:g,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",
cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return h.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,k,l,m){if(e&&"string"!==typeof e)return e;var r={};e&&(r.style=e);null!=k&&(r.size=b.toPt(k));l&&(r.outline=l);m&&(r.color=m);return r},clone:function(){return new n({angle:this.angle,color:h.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},
read:function m(k,l){return this.getInherited(m,arguments).call(this,h.mixin({outline:null},k),l)}});h.mixin(n,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});n.defaultProps=p;return n})},"esri/layers/vectorTiles/symbols/TextSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),function(A,h,b,d,g,p){var n={text:"",rotated:!1,kerning:!0,color:[0,
0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},e=A(g,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:d,json:{write:!0}},borderLineColor:{type:d,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:p,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:d,json:{write:!0}},haloSize:{type:Number,cast:b.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},
rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:b.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:b.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(k){return k&&-1*k},write:function(k,l){l.angle=k&&-1*k}}},width:{json:{write:!0}}},getDefaults:function(){return h.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(k,l,m){if(k&&"string"!==typeof k)return k;
var r={};k&&(r.text=k);l&&(r.font=l);m&&(r.color=m);return r},clone:function(){return new e({angle:this.angle,backgroundColor:h.clone(this.backgroundColor),borderLineColor:h.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:h.clone(this.color),font:this.font&&this.font.clone(),haloColor:h.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,
width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});h.mixin(e,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});e.defaultProps=n;return e})},"esri/layers/vectorTiles/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/write".split(" "),
function(A,h,b,d,g,p,n,e){return function(k){function l(r){r=k.call(this)||this;r.decoration="none";r.family="sans-serif";r.size=9;r.style="normal";r.weight="normal";return r}b(l,k);var m=l;l.prototype.castSize=function(r){return p.toPt(r)};l.prototype.clone=function(){return new m({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};d([n.property({type:String,json:{write:{overridePolicy:e.disableWriteDefaultPolicy("none")}}})],l.prototype,"decoration",
void 0);d([n.property({type:String,json:{write:!0}})],l.prototype,"family",void 0);d([n.property({type:Number,json:{write:{overridePolicy:function(r,u,v){return{enabled:!v||!v.textSymbol3D}}}}})],l.prototype,"size",void 0);d([n.cast("size")],l.prototype,"castSize",null);d([n.property({type:String,json:{write:{overridePolicy:e.disableWriteDefaultPolicy("normal")}}})],l.prototype,"style",void 0);d([n.property({type:String,json:{write:{overridePolicy:e.disableWriteDefaultPolicy("normal")}}})],l.prototype,
"weight",void 0);return l=m=d([n.subclass("esri.symbols.Font")],l)}(n.declared(g))})},"esri/layers/vectorTiles/symbols/WebStyleSymbol":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/callouts/LineCallout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","./Callout3D"],
function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/callouts/Callout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/JSONSupport"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a,c,f){function q(x){var z=x.color?x.color.clone():new b([255,255,255]),D;if(x instanceof u){x.color&&0===x.color.r&&0===x.color.g&&0===x.color.b&&(z=new b([255,255,255]));var F={href:x.url};var G=x.width<=x.height?x.height:x.width}else F=x.style,F in t?F=t[F]:(console.log(F+' cannot be mapped to Icon symbol. Fallback to "circle"'),F="circle"),F={primitive:F},G=x.size,x.outline&&x.outline.color&&0<x.outline.width&&(D={size:x.outline.width,color:x.outline.color.clone()});
return new v(new k({size:G,resource:F,material:{color:z},outline:D}))}Object.defineProperty(h,"__esModule",{value:!0});var t={};t[y.STYLE_CIRCLE]="circle";t[y.STYLE_CROSS]="cross";t[y.STYLE_DIAMOND]="kite";t[y.STYLE_SQUARE]="square";t[y.STYLE_X]="x";h.to3D=function(x,z,D,F){void 0===z&&(z=!1);void 0===D&&(D=!1);void 0===F&&(F=!0);if(!x)return{symbol:null};if(d.isSymbol3D(x)||x instanceof f)F=x.clone();else if(x instanceof C)F=new m(new r({size:x.width||1,material:{color:x.color?x.color.clone():[255,
255,255]}}));else if(x instanceof y)F=q(x);else if(x instanceof u)F=q(x);else if(x instanceof B)F=new n({material:{color:x.color?x.color.clone():[255,255,255]}}),x.outline&&x.outline.color&&(F.outline={size:x.outline.width||0,color:x.outline.color}),F=new w(F);else if(x instanceof a){var G=x.haloColor;var E=x.haloSize;G=G&&0<E?{color:p.clone(G),size:E}:null;E=x.font?x.font.clone():new e;F=new (F?l:v)(new c({size:E.size,font:E,halo:G,material:{color:x.color.clone()},text:x.text}))}else return{error:new g("symbol-conversion:unsupported-2d-symbol",
"2D symbol of type '"+(x.type||x.declaredClass)+"' is unsupported in 3D",{symbol:x})};z&&(F.id=x.id);if(D&&d.isSymbol3D(F))for(x=0;x<F.symbolLayers.length;++x)F.symbolLayers.getItemAt(x)._ignoreDrivers=!0;return{symbol:F}}})},"esri/layers/vectorTiles/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/support/jsonUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a,c,f,q,t,x,z,D,F,G){Object.defineProperty(h,"__esModule",{value:!0});h.ExtrudeSymbol3DLayer=b;h.BaseFillSymbol=d;h.FillSymbol3DLayer=g;h.Font=p;h.IconSymbol3DLayer=n;h.LabelSymbol3D=e;h.LineSymbol3D=k;h.LineSymbol3DLayer=l;h.BaseMarkerSymbol=m;h.MeshSymbol3D=r;h.ObjectSymbol3DLayer=u;h.PathSymbol3DLayer=v;h.PictureFillSymbol=w;h.PictureMarkerSymbol=B;h.PointSymbol3D=C;h.PolygonSymbol3D=y;h.SimpleFillSymbol=a;h.SimpleLineSymbol=c;h.SimpleMarkerSymbol=f;
h.BaseSymbol=q;h.BaseSymbol3D=t;h.BaseSymbol3DLayer=x;h.TextSymbol=z;h.TextSymbol3DLayer=D;h.WebStyleSymbol=F;h.fromJSON=G.fromJSON;h.isSymbol=function(E){return E instanceof h.BaseSymbol};h.isSymbol2D=function(E){if(!E)return!1;switch(E.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};h.isSymbol3D=function(E){if(!E)return!1;switch(E.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}}})},"esri/layers/vectorTiles/symbols/ExtrudeSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/Symbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","../core/JSONSupport"],function(A,h,b,d){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/FillSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/IconSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(A,h,b,d){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/LineSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(A,h,b,d){(function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p})(d);return d})},"esri/layers/vectorTiles/symbols/ObjectSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(A,h,b,d){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/PathSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(A,h,b,d){return function(g){function p(){return null!==g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/TextSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(A,h,b,d){return function(g){function p(){return null!==
g&&g.apply(this,arguments)||this}b(p,g);return p}(d)})},"esri/layers/vectorTiles/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B){Object.defineProperty(h,"__esModule",
{value:!0});h.types={base:v,key:"type",typeMap:{"simple-fill":m,"picture-fill":n,"picture-marker":e,"simple-line":r,"simple-marker":u,text:w,"label-3d":d,"line-3d":g,"mesh-3d":p,"point-3d":k,"polygon-3d":l,"web-style":B}};h.rendererTypes={base:v,key:"type",typeMap:{"simple-fill":m,"picture-fill":n,"picture-marker":e,"simple-line":r,"simple-marker":u,text:w,"line-3d":g,"mesh-3d":p,"point-3d":k,"polygon-3d":l,"web-style":B}};h.labelTypes={base:v,key:"type",typeMap:{text:w,"label-3d":d}};h.types3D={base:v,
key:"type",typeMap:{"label-3d":d,"line-3d":g,"mesh-3d":p,"point-3d":k,"polygon-3d":l,"web-style":B}};h.rendererTypes3D={base:v,key:"type",typeMap:{"line-3d":g,"mesh-3d":p,"point-3d":k,"polygon-3d":l,"web-style":B}};h.labelTypes3D={base:v,key:"type",typeMap:{"label-3d":d}};h.ensureType=b.ensureOneOfType(h.types)})},"esri/layers/vectorTiles/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r){var u=d({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),v=d({widthAndDepth:"width-and-depth"}),w=d({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});d({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
d({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});d({percentTotal:"percent-of-total"});var B=Math.PI,C=k.opacityToTransparency,y=k.transparencyToOpacity;return A([h,b],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:r,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);
this.collectRequiredFields(a);return Object.keys(a).sort()}},type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(a,c){return this._readVariables(a,c)}},write:function(a,c,f,q){var t=[];a.forEach(function(x,z){"size"===x.type?t.push(this._writeSizeInfo(x,q,z)):"color"===x.type?t.push(this._writeColorInfo(x,q,z)):"opacity"===x.type?t.push(this._writeOpacityInfo(x,q,z)):"rotation"===
x.type&&t.push(this._writeRotationInfo(x,q,z))},this);c.visualVariables=t}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(a){var c=this._cache;this.visualVariables&&this.visualVariables.forEach(function(f,q){c.hasOwnProperty(q)&&(c[q]=null)},this);a&&a.some(function(f){return!!f.target})&&a.sort(function(f,q){return f.target===q.target?0:f.target?1:-1});a&&a.forEach(function(f,q){"color"===
f.type?c[q]=this._processColorInfo(f):"opacity"===f.type?c[q]=this._processOpacityInfo(f):"size"===f.type?c[q]=this._processSizeInfo(f):"rotation"===f.type&&(c[q]=this._processRotationInfo(f))},this);this._set("visualVariables",a)},getSymbol:function(a,c){},getVisualVariableValues:function(a,c){var f=this.visualVariables,q;f&&(q=f.map(function(t){var x=t.type,z=x+"Info";c=p.mixin({},c);c[z]=t;switch(x){case "size":var D=this.getSize(a,c);break;case "color":D=this.getColor(a,c);break;case "opacity":D=
this.getOpacity(a,c);break;case "rotation":D=this.getRotationAngle(a,c)}return{variable:t,value:D}},this).filter(function(t){return null!=t.value},this));return q},hasVisualVariables:function(a,c){return a?!!this.getVisualVariablesForType(a,c):!!(this.getVisualVariablesForType("size",c)||this.getVisualVariablesForType("color",c)||this.getVisualVariablesForType("opacity",c)||this.getVisualVariablesForType("rotation",c))},getVisualVariablesForType:function(a,c){var f=this.visualVariables,q;f&&(q=f.filter(function(t){return t.type===
a&&("string"===typeof c?t.target===c:!1===c?!t.target:!0)}))&&0===q.length&&(q=void 0);return q},getSize:function(a,c){var f=this._getVarInfo(c&&c.sizeInfo,"size"),q=f.variable;f=this._cache[f.cacheKey];var t=null;if(q){var x=q.minSize;t=q.maxSize;x="object"===typeof x&&x?this._getSize(a,x,f&&f.minSize,c):x;t="object"===typeof t&&t?this._getSize(a,t,f&&f.maxSize,c):t;t=this._getSize(a,q,f&&f.root,c,[x,t])}return t},getSizeRangeAtScale:function(a,c){a=this._getVarInfo(a,"size");var f=this._cache[a.cacheKey],
q={scale:c};if((a=a.variable)&&c){c=a.minSize;var t=a.maxSize;a="object"===typeof c&&c?this._getSize({},c,f&&f.minSize,q):c;f="object"===typeof t&&t?this._getSize({},t,f&&f.maxSize,q):t;if(null!=a||null!=f){if(a>f){var x=f;f=a;a=x}x={minSize:a,maxSize:f}}}return x},getColor:function(a,c){var f=this._getVarInfo(c&&c.colorInfo,"color");return this._getColorComponent(a,f.variable,this._cache[f.cacheKey],c)},getOpacity:function(a,c){var f=this._getVarInfo(c&&c.opacityInfo,"opacity");return this._getColorComponent(a,
f.variable,this._cache[f.cacheKey],c,!0)},getRotationAngle:function(a,c){var f=this._getVarInfo(c&&c.rotationInfo,"rotation"),q=f.variable,t=this._cache[f.cacheKey],x=q.axis||"heading";f="heading"===x&&"arithmetic"===q.rotationType?90:0;x="heading"===x&&"arithmetic"===q.rotationType?-1:1;q=q.field;t=t&&t.compiledFunc;var z=a.attributes,D=0;if(q||t)t?D=e.executeFunction(t,e.createExecContext(a,e.getViewInfo(c))):"function"===typeof q?D=q.apply(this,arguments):z&&(D=z[q]||0),D="number"!==typeof D||
isNaN(D)?null:f+x*D;return D},collectRequiredFields:function(a){var c=[];this.visualVariables&&(c=c.concat(this.visualVariables));c.forEach(function(f){f&&(f.field&&(a[f.field]=!0),f.normalizationField&&(a[f.normalizationField]=!0),f.valueExpression&&e.extractFieldNames(f.valueExpression).forEach(function(q){a[q]=!0}))})},_getVarInfo:function(a,c){if(a&&a.type===c&&this.visualVariables){var f=this.visualVariables.indexOf(a);a=this.visualVariables[f]}else this.visualVariables&&(a=(a=this.getVisualVariablesForType(c))&&
a[0],f=this.visualVariables.indexOf(a));return{variable:a,cacheKey:f}},_readSizeInfo:function(a){a.axis&&(a.axis=v.fromJSON(a.axis));a.valueUnit&&(a.valueUnit=w.fromJSON(a.valueUnit));return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(c,f){Array.isArray(c)?a.colors[f]=l.fromJSON(c):a.colors[f]=new l(c)}),a.stops&&a.stops.forEach(function(c,f){c.color&&Array.isArray(c.color)?a.stops[f].color=l.fromJSON(c.color):c.color&&(a.stops[f].color=new l(c.color))}));return a},_readOpacityInfo:function(a){if(a){var c=
p.mixin({},a);c.transparencyValues&&(c.opacityValues=c.transparencyValues.map(y),delete c.transparencyValues);c.stops&&(c.stops=c.stops.map(function(f){f=p.mixin({},f);f.opacity=y(f.transparency);delete f.transparency;return f}))}return c},_readVariables:function(a,c){a&&(a=a.map(function(q){q=p.clone(q);q.type=u.fromJSON(q.type);"size"===q.type?q=this._readSizeInfo(q):"color"===q.type?q=this._readColorInfo(q):"opacity"===q.type&&(q=this._readOpacityInfo(q));return q},this));var f=c.rotationType;
if(c=c.rotationExpression)f={type:"rotation",rotationType:f},(c=c.match(this._rotationRE))&&c[1]&&(f.field=c[1],a||(a=[]),a.push(f));return a},_createCache:function(a){var c=a&&a.valueExpression,f=e.createSyntaxTree(c);f=e.createFunction(f);var q=!(!a||!a.expression)||this._viewScaleRE.test(c);return{ipData:this._interpolateData(a),hasExpr:!!c,compiledFunc:f,isScaleDriven:q}},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(c,f){c instanceof l||(a.colors[f]=new l(c))}),a.stops&&
a.stops.forEach(function(c,f){!c.color||c.color instanceof l||(a.stops[f].color=new l(c.color))}),this._sortStops(a.stops));return this._createCache(a)},_processOpacityInfo:function(a){this._sortStops(a&&a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),
maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=g.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&(a.forEach(function(c){c.size=g.toPt(c.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(c,f){return c.value-f.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,c,f,q,t){var x=a.attributes,z=c.field,
D=c.stops,F=0,G=f&&f.hasExpr,E=f&&f.compiledFunc,H=f&&f.ipData,O=f&&f.isScaleDriven,K="number"===typeof a,L=K?a:null;if(z||O||G){var T=q&&q.scale,P=t?t[0]:c.minSize,Q=t?t[1]:c.maxSize,J=c.minDataValue,R=c.maxDataValue,I=c.valueUnit||"unknown",S=c.valueRepresentation;F=c.scaleBy;var U=c.normalizationField,V=x?parseFloat(x[U]):void 0,W=q&&q.shape;O?L=null==T?this._getAverageValue(c):T:"number"!==typeof L&&(G?L=e.executeFunction(E,e.createExecContext(a,e.getViewInfo(q))):"function"===typeof z?L=z.apply(this,
arguments):x&&(L=x[z]));if(null==L||U&&!K&&(isNaN(V)||0===V))return null;isNaN(V)||K||(L/=V);if(D)Q=this._lookupData(L,H),L=Q[0],P=Q[1],L===P?F=D[L].size:(L=D[L].size,D=D[P].size,F=L+(D-L)*Q[2]);else if(null!=P&&null!=Q&&null!=J&&null!=R)L<=J?F=P:L>=R?F=Q:(D=(L-J)/(R-J),"area"===F&&W?(P=(L="circle"===W)?B*Math.pow(P/2,2):P*P,D=P+D*((L?B*Math.pow(Q/2,2):Q*Q)-P),F=L?2*Math.sqrt(D/B):Math.sqrt(D)):F=P+D*(Q-P));else if("unknown"===I)null!=P&&null!=J?(P&&J?(D=L/J,F="circle"===W?2*Math.sqrt(D*Math.pow(P/
2,2)):"square"===W||"diamond"===W||"image"===W?Math.sqrt(D*Math.pow(P,2)):D*P):F=L+(P||J),F=F<P?P:F,null!=Q&&F>Q&&(F=Q)):F=L;else{D=(q&&q.resolution?q.resolution:1)*m.meterIn[I];if("area"===S)F=Math.sqrt(L/B)/D,F*=2;else if(F=L/D,"radius"===S||"distance"===S)F*=2;null!=P&&F<P&&(F=P);null!=Q&&F>Q&&(F=Q)}}else c&&(F=D&&D[0]&&D[0].size,null==F&&(F=c.minSize));return F=isNaN(F)?0:F},_getAverageValue:function(a){var c=a.stops;if(c){var f=c[0].value;a=c[c.length-1].value}else f=a.minDataValue||0,a=a.maxDataValue||
0;return(f+a)/2},_getColorComponent:function(a,c,f,q,t,x){var z=a.attributes,D=c&&c.field,F="number"===typeof a,G=F?a:null,E=f&&f.hasExpr,H=f&&f.compiledFunc,O=f&&f.ipData;if(D||E){var K=c.normalizationField,L=z?parseFloat(z[K]):void 0;"number"!==typeof G&&(E?G=e.executeFunction(H,e.createExecContext(a,e.getViewInfo(q))):"function"===typeof D?G=D.apply(this,arguments):z&&(G=z[D]));if(null!=G&&(!K||F||!isNaN(L)&&0!==L)){isNaN(L)||F||(G/=L);var T=t?this._getOpacity(G,c,O):this._getColor(G,c,O)}}else c&&
(z=c.stops,t?(T=z&&z[0]&&z[0].opacity,null==T&&(T=c.opacityValues&&c.opacityValues[0])):T=z&&z[0]&&z[0].color||c.colors&&c.colors[0]);x&&(x.data=G,x.value=T);return x||T},_interpolateData:function(a){if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,f=a.minDataValue,q=(a.maxDataValue-f)/(c-1);var t=[];for(a=0;a<c;a++)t[a]=f+a*q}else a.stops&&(t=a.stops.map(function(x){return x.value||0}));return t},_getOpacity:function(a,c,f){a=this._lookupData(a,f);c=c||this.opacityInfo;
if(a){f=a[0];var q=a[1];f===q?q=this._getOpacValue(c,f):(f=this._getOpacValue(c,f),c=this._getOpacValue(c,q),q=f+(c-f)*a[2])}return q},_getOpacValue:function(a,c){return a.opacityValues?a.opacityValues[c]:a.stops[c].opacity},_getColor:function(a,c,f){a=this._lookupData(a,f);c=c||this.colorInfo;if(a){var q=a[0];f=a[1];q=q===f?this._getColorObj(c,q):l.blendColors(this._getColorObj(c,q),this._getColorObj(c,f),a[2]);q=new l(q)}return q},_getColorObj:function(a,c){return a.colors?a.colors[c]:a.stops[c].color},
_lookupData:function(a,c){if(c){var f=0,q=c.length-1;c.some(function(x,z){if(a<x)return q=z,!0;f=z;return!1});var t=[f,q,(a-c[f])/(c[q]-c[f])]}return t},_processForContext:function(a,c,f){if(c&&"web-scene"===c.origin){var q=null!=a.expression,t=null!=a.valueExpressionTitle&&"rotation"===a.type;c.messages&&(q&&c.messages.push(new n("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:f+
".expression",context:c})),t&&c.messages.push(new n("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:f+".valueExpressionTitle",context:c})));q&&delete a.expression;t&&delete a.valueExpressionTitle}else"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,c,f){a&&(a=p.mixin({},a),this._processForContext(a,c,"visualVariables["+f+"]"),a.type=u.toJSON(a.type),
a=p.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,c,f){if(a){a=p.mixin({},a);this._processForContext(a,c,"string"===typeof f?f:"visualVariables["+f+"]");var q=a.minSize,t=a.maxSize;q&&(a.minSize="number"===typeof q?q:this._writeSizeInfo(q,c,"visualVariables["+f+"].minSize"));t&&(a.maxSize="number"===typeof t?t:this._writeSizeInfo(t,c,"visualVariables["+f+"].maxSize"));c=a.legendOptions;f=a.axis;a.type=
u.toJSON(a.type);f&&(a.axis=v.toJSON(f));c&&(a.legendOptions=p.mixin({},c),c=c.customValues)&&(a.legendOptions.customValues=c.slice(0));a.stops&&(a.stops=a.stops.map(function(x){x=p.mixin({},x);null===x.label&&delete x.label;return x}));a=p.fixJson(a,!0)}return a},_writeColorInfo:function(a,c,f){a&&(a=p.mixin({},a),this._processForContext(a,c,"visualVariables["+f+"]"),a.type=u.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(q){return l.toJSON(q)})),a.stops&&(a.stops=a.stops.map(function(q){q=
p.mixin({},q);q.color&&(q.color=l.toJSON(q.color));null==q.value&&(q.value=0);null===q.label&&delete q.label;return q})),a.legendOptions&&(a.legendOptions=p.mixin({},a.legendOptions)),a=p.fixJson(a,!0));return a},_writeOpacityInfo:function(a,c,f){if(a){var q=p.mixin({},a);this._processForContext(q,c,"visualVariables["+f+"]");q.type=u.toJSON(q.type);q.opacityValues&&(q.transparencyValues=q.opacityValues.map(C),delete q.opacityValues);q.stops&&(q.stops=q.stops.map(function(t){t=p.mixin({},t);t.transparency=
C(t.opacity);delete t.opacity;null===t.label&&delete t.label;return t}));q.legendOptions&&(q.legendOptions=p.mixin({},q.legendOptions));q=p.fixJson(q,!0)}return q}})})},"esri/layers/vectorTiles/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(A,h,b){Object.defineProperty(h,"__esModule",{value:!0});h.opacityToTransparency=function(d){d=b.ensureInteger(100*(1-d));return Math.max(0,Math.min(d,100))};h.transparencyToOpacity=function(d){return Math.max(0,
Math.min(1-d/100,1))}})},"esri/layers/vectorTiles/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),function(A,h,b,d,g,p,n,e,k){var l=p({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",
esriClassifyStandardDeviation:"standard-deviation"}),m=p({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(r){function u(w){w=r.call(this)||this;w.lengthUnit=null;w.visualVariables=null;return w}b(u,r);var v=u;Object.defineProperty(u.prototype,"classificationMethod",{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var w=this._get("classificationMethod");return w?w:"manual"}return null},
set:function(w){this._set("classificationMethod",w)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(w){this._set("fields",w)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"field1",{get:function(){return"relationship"===this.type?this._get("field1"):null},set:function(w){this._set("field1",w)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"field2",
{get:function(){return"relationship"===this.type?this._get("field2"):null},set:function(w){this._set("field2",w)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"focus",{get:function(){return"relationship"===this.type?this._get("focus"):null},set:function(w){this._set("focus",w)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"numClasses",{get:function(){return"relationship"===this.type?this._get("numClasses"):null},set:function(w){this._set("numClasses",w)},
enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(w){this._set("standardDeviationInterval",w)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"type",{get:function(){return this._get("type")},set:function(w){var B=w;"classed-size"===w?B="class-breaks-size":"classed-color"===w&&(B="class-breaks-color");this._set("type",
B)},enumerable:!0,configurable:!0});u.prototype.clone=function(){return new v({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:n.clone(this.field1),field2:n.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(w){return w.clone()})})};d([e.property({type:String,value:null,
dependsOn:["type"],json:{read:l.read,write:l.write}})],u.prototype,"classificationMethod",null);d([e.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],u.prototype,"fields",null);d([e.property({value:null,dependsOn:["type"],json:{write:!0}})],u.prototype,"field1",null);d([e.property({value:null,dependsOn:["type"],json:{write:!0}})],u.prototype,"field2",null);d([e.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],u.prototype,"focus",null);d([e.property({type:Number,
value:null,dependsOn:["type"],json:{write:!0}})],u.prototype,"numClasses",null);d([e.property({type:String,json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],u.prototype,"lengthUnit",void 0);d([e.property({type:Number,value:null,dependsOn:["classificationMethod"],json:{write:!0}})],u.prototype,"standardDeviationInterval",null);d([e.property({type:String,value:null,json:{read:m.read,write:m.write}})],u.prototype,"type",null);d([e.property({type:[k],json:{write:!0}})],u.prototype,"visualVariables",
void 0);return u=v=d([e.subclass("esri.renderers.support.AuthoringInfo")],u)}(e.declared(g))})},"esri/layers/vectorTiles/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),function(A,h,b,d,g,p,n,e){var k=p({percentTotal:"percent-of-total"}),l=p({sizeInfo:"size",
colorInfo:"color",transparencyInfo:"opacity"}),m={key:function(r){return"number"===typeof r?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(r){function u(w){w=r.call(this)||this;w.endTime=null;w.field=null;w.maxSliderValue=null;w.minSliderValue=null;w.startTime=null;w.type=null;w.units=null;return w}b(u,r);var v=u;u.prototype.castEndTime=function(w){return"string"===typeof w||"number"===typeof w?w:null};u.prototype.castStartTime=function(w){return"string"===typeof w||
"number"===typeof w?w:null};Object.defineProperty(u.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(w){this._set("style",w)},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(w){this._set("theme",w)},enumerable:!0,configurable:!0});u.prototype.clone=function(){return new v({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,
minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};d([n.property({types:m,json:{write:!0}})],u.prototype,"endTime",void 0);d([e.cast("endTime")],u.prototype,"castEndTime",null);d([n.property({type:String,json:{write:!0}})],u.prototype,"field",void 0);d([n.property({type:Number,json:{write:!0}})],u.prototype,"maxSliderValue",void 0);d([n.property({type:Number,json:{write:!0}})],u.prototype,"minSliderValue",void 0);d([n.property({types:m,
json:{write:!0}})],u.prototype,"startTime",void 0);d([e.cast("startTime")],u.prototype,"castStartTime",null);d([n.property({type:String,value:null,dependsOn:["type"],json:{read:k.read,write:k.write}})],u.prototype,"style",null);d([n.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],u.prototype,"theme",null);d([n.property({type:String,json:{read:l.read,write:l.write}})],u.prototype,"type",void 0);d([n.property({type:String,json:{write:!0}})],u.prototype,"units",void 0);return u=
v=d([n.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],u)}(n.declared(g))})},"esri/layers/vectorTiles/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(A,h,b,d,g,p){Object.defineProperty(h,"__esModule",{value:!0});A=function(n){function e(){var l=null!==n&&n.apply(this,arguments)||this;l.title=null;return l}
b(e,n);var k=e;e.prototype.clone=function(){return new k({title:this.title})};d([p.property({type:String,json:{write:!0}})],e.prototype,"title",void 0);return e=k=d([p.subclass("esri.renderers.support.LegendOptions")],e)}(p.declared(g));h.LegendOptions=A;h.default=A})},"esri/layers/vectorTiles/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(A,h,b,d,g,p,n,e){Object.defineProperty(h,"__esModule",{value:!0});A=function(k){function l(){var r=null!==k&&k.apply(this,arguments)||this;r.description=null;r.label=null;r.minValue=null;r.maxValue=0;r.symbol=null;return r}b(l,k);var m=l;l.prototype.clone=function(){return new m({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};d([p.property({type:String,json:{write:!0}})],l.prototype,"description",
void 0);d([p.property({type:String,json:{write:!0}})],l.prototype,"label",void 0);d([p.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l.prototype,"minValue",void 0);d([p.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l.prototype,"maxValue",void 0);d([p.property({types:e.rendererTypes,json:{origins:{"web-scene":{read:n.read,write:{target:{symbol:{types:e.rendererTypes3D}},writer:n.writeTarget}}},read:n.read,
write:n.writeTarget}})],l.prototype,"symbol",void 0);return l=m=d([p.subclass("esri.renderers.support.ClassBreakInfo")],l)}(p.declared(g));h.ClassBreakInfo=A;h.default=A})},"esri/layers/vectorTiles/renderers/HeatmapRenderer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Renderer"],function(A,h,b,d){return function(g){function p(){var n=null!==g&&g.apply(this,arguments)||this;n.type="heatmap";return n}b(p,g);return p}(d)})},"esri/layers/vectorTiles/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(A,h,b,d,g,p,n,e,k){return function(l){function m(){var u=null!==l&&l.apply(this,arguments)||this;u.description=null;u.label=null;u.symbol=null;u.type="simple";return u}b(m,l);var r=m;m.prototype.writeSymbolWebScene=function(u,v,w,B){e.writeTarget(u,v,w,B)};m.prototype.writeSymbol=function(u,v,w,B){e.writeTarget(u,v,w,B)};m.prototype.readSymbol=function(u,v,w){return e.read(u,v,w)};m.prototype.getSymbol=function(u,v){return this.symbol};m.prototype.getSymbols=function(){return this.symbol?
[this.symbol]:[]};m.prototype.clone=function(){return new r({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:g.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};d([p.property({type:String,json:{write:!0}})],m.prototype,"description",void 0);d([p.property({type:String,json:{write:!0}})],m.prototype,"label",void 0);d([p.property({types:k.rendererTypes})],m.prototype,"symbol",void 0);d([p.writer("web-scene",
"symbol",{symbol:{types:k.rendererTypes3D}})],m.prototype,"writeSymbolWebScene",null);d([p.writer("symbol")],m.prototype,"writeSymbol",null);d([p.reader("symbol")],m.prototype,"readSymbol",null);return m=r=d([p.subclass("esri.renderers.SimpleRenderer")],m)}(p.declared(n))})},"esri/layers/vectorTiles/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y,a,c,f,q){var t=l.getLogger("esri.renderers.UniqueValueRenderer"),x=u.ensureType(y.default);return function(z){function D(G){G=z.call(this)||this;G._valueInfoMap={};G._isDefaultSymbolDerived=!1;G.type="unique-value";G.backgroundFillSymbol=null;G.field=null;G.field2=null;G.field3=null;G.valueExpression=null;G.valueExpressionTitle=null;G.legendOptions=null;G.defaultLabel=null;G.fieldDelimiter=null;G.portal=null;G.styleOrigin=null;G.diff={uniqueValueInfos:function(E,
H){if(E||H){if(!E||!H)return{type:"complete",oldValue:E,newValue:H};for(var O=!1,K={type:"collection",added:[],removed:[],changed:[],unchanged:[]},L=function(P){var Q=n.find(E,function(J){return J.value===H[P].value});Q?B.diff(Q,H[P])?K.changed.push({type:"complete",oldValue:Q,newValue:H[P]}):K.unchanged.push({oldValue:Q,newValue:H[P]}):K.added.push(H[P]);O=!0},T=0;T<H.length;T++)L(T);L=function(P){n.find(H,function(Q){return Q.value===E[P].value})||(K.removed.push(E[P]),O=!0)};for(T=0;T<E.length;T++)L(T);
return O?K:void 0}}};G._set("uniqueValueInfos",[]);return G}b(D,z);var F=D;D.prototype.writeType=function(G,E,H,O){E.type="uniqueValue"};D.prototype.writeBackgroundFillSymbolWebScene=function(G,E,H,O){c.writeTarget(G,E,H,O)};D.prototype.castField=function(G){return null==G?G:"function"===typeof G?G:u.ensureString(G)};D.prototype.writeField=function(G,E,H,O){"string"===typeof G?E[H]=G:O&&O.messages?O.messages.push(new e("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
t.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(D.prototype,"compiledFunc",{get:function(){return a.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"defaultSymbol",{set:function(G){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",G)},enumerable:!0,configurable:!0});D.prototype.readDefaultSymbol=function(G,E,H){return c.read(G,E,H)};D.prototype.writeDefaultSymbolWebScene=function(G,E,
H,O){this._isDefaultSymbolDerived||c.writeTarget(G,E,H,O)};D.prototype.writeDefaultSymbol=function(G,E,H,O){this._isDefaultSymbolDerived||c.writeTarget(G,E,H,O)};D.prototype.readPortal=function(G,E,H){return H.portal||v.getDefault()};D.prototype.readStyleOrigin=function(G,E,H){if(E.styleName)return Object.freeze({styleName:E.styleName});if(E.styleUrl)return G=m.read(E.styleUrl,H),Object.freeze({styleUrl:G})};D.prototype.writeStyleOrigin=function(G,E,H,O){G.styleName?E.styleName=G.styleName:G.styleUrl&&
(E.styleUrl=m.write(G.styleUrl,O),m.isAbsolute(E.styleUrl)&&(E.styleUrl=m.normalize(E.styleUrl)))};Object.defineProperty(D.prototype,"uniqueValueInfos",{set:function(G){this.styleOrigin?t.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",G),this._updateValueInfoMap())},enumerable:!0,configurable:!0});D.prototype.addUniqueValueInfo=function(G,E){this.styleOrigin?t.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(G="object"===typeof G?x(G):new y.default({value:G,symbol:E}),this.uniqueValueInfos.push(G),this._valueInfoMap[G.value]=G)};D.prototype.removeUniqueValueInfo=function(G){if(this.styleOrigin)t.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var E=0;E<this.uniqueValueInfos.length;E++)if(this.uniqueValueInfos[E].value===G+""){delete this._valueInfoMap[G];this.uniqueValueInfos.splice(E,1);break}};D.prototype.getUniqueValueInfo=
function(G,E){var H=this.field,O=G.attributes;if(this.valueExpression)var K=a.executeFunction(this.compiledFunc,a.createExecContext(G,a.getViewInfo(E)));else"function"!==typeof H&&this.field2?(G=this.field2,E=this.field3,K=[],H&&K.push(O[H]),G&&K.push(O[G]),E&&K.push(O[E]),K=K.join(this.fieldDelimiter||"")):"function"===typeof H?K=H(G):H&&(K=O[H]);return this._valueInfoMap[K+""]};D.prototype.getSymbol=function(G,E){return(G=this.getUniqueValueInfo(G,E))&&G.symbol||this.defaultSymbol};D.prototype.getSymbols=
function(){for(var G=[],E=0,H=this.uniqueValueInfos;E<H.length;E++){var O=H[E];O.symbol&&G.push(O.symbol)}this.defaultSymbol&&G.push(this.defaultSymbol);return G};D.prototype.clone=function(){var G=new F({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:k.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:k.clone(this.visualVariables),legendOptions:k.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:k.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(G._isDefaultSymbolDerived=!0);G._set("portal",this.portal);var E=k.clone(this.uniqueValueInfos);this.styleOrigin&&(G._set("styleOrigin",Object.freeze(k.clone(this.styleOrigin))),Object.freeze(E));G._set("uniqueValueInfos",E);G._updateValueInfoMap();return G};D.prototype.collectRequiredFields=function(G){this.inherited(arguments);[this.field,this.field2,
this.field3].forEach(function(E){E&&"string"===typeof E&&(G[E]=!0)});this.valueExpression&&a.extractFieldNames(this.valueExpression).forEach(function(E){G[E]=!0})};D.prototype.populateFromStyle=function(){var G=this;return f.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(E){var H=[];G._valueInfoMap={};E&&E.data&&Array.isArray(E.data.items)&&E.data.items.forEach(function(O){var K=new p.WebStyleSymbol({styleUrl:E.styleUrl,styleName:E.styleName,portal:G.portal,name:O.name});G.defaultSymbol||
O.name!==E.data.defaultItem||(G.defaultSymbol=K,G._isDefaultSymbolDerived=!0);K=new y.default({value:O.name,symbol:K});H.push(K);G._valueInfoMap[O.name]=K});G._set("uniqueValueInfos",Object.freeze(H));!G.defaultSymbol&&G.uniqueValueInfos.length&&(G.defaultSymbol=G.uniqueValueInfos[0].symbol,G._isDefaultSymbolDerived=!0);return G})};D.prototype._updateValueInfoMap=function(){var G=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(E){return G._valueInfoMap[E.value+""]=E})};D.fromPortalStyle=
function(G,E){var H=new F(E&&E.properties);H._set("styleOrigin",Object.freeze({styleName:G}));H._set("portal",E&&E.portal||v.getDefault());E=H.populateFromStyle();E.catch(function(O){t.error("#fromPortalStyle('"+G+"'[, ...])","Failed to create unique value renderer from style name",O)});return E};D.fromStyleUrl=function(G,E){E=new F(E&&E.properties);E._set("styleOrigin",Object.freeze({styleUrl:G}));E=E.populateFromStyle();E.catch(function(H){t.error("#fromStyleUrl('"+G+"'[, ...])","Failed to create unique value renderer from style URL",
H)});return E};d([r.property()],D.prototype,"type",void 0);d([r.writer("type")],D.prototype,"writeType",null);d([r.property({types:{base:p.BaseSymbol,key:"type",typeMap:{"simple-fill":q.rendererTypes.typeMap["simple-fill"],"picture-fill":q.rendererTypes.typeMap["picture-fill"],"polygon-3d":q.rendererTypes.typeMap["polygon-3d"]}},json:{read:c.read,write:c.writeTarget}})],D.prototype,"backgroundFillSymbol",void 0);d([r.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:p.PolygonSymbol3D}})],
D.prototype,"writeBackgroundFillSymbolWebScene",null);d([r.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],D.prototype,"field",void 0);d([r.cast("field")],D.prototype,"castField",null);d([r.writer("field")],D.prototype,"writeField",null);d([r.property({type:String,json:{write:!0}})],D.prototype,"field2",void 0);d([r.property({type:String,json:{write:!0}})],D.prototype,"field3",void 0);d([r.property({type:String,json:{write:!0}})],D.prototype,"valueExpression",void 0);
d([r.property({type:String,json:{write:!0}})],D.prototype,"valueExpressionTitle",void 0);d([r.property({dependsOn:["valueExpression"]})],D.prototype,"compiledFunc",null);d([r.property({type:C.default,json:{write:!0}})],D.prototype,"legendOptions",void 0);d([r.property({type:String,json:{write:!0}})],D.prototype,"defaultLabel",void 0);d([r.property({types:q.rendererTypes})],D.prototype,"defaultSymbol",null);d([r.reader("defaultSymbol")],D.prototype,"readDefaultSymbol",null);d([r.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:q.rendererTypes3D}})],D.prototype,"writeDefaultSymbolWebScene",null);d([r.writer("defaultSymbol")],D.prototype,"writeDefaultSymbol",null);d([r.property({type:String,json:{write:!0}})],D.prototype,"fieldDelimiter",void 0);d([r.property({type:v,readOnly:!0})],D.prototype,"portal",void 0);d([r.reader("portal",["styleName"])],D.prototype,"readPortal",null);d([r.property({readOnly:!0})],D.prototype,"styleOrigin",void 0);d([r.reader("styleOrigin",["styleName","styleUrl"])],
D.prototype,"readStyleOrigin",null);d([r.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],D.prototype,"writeStyleOrigin",null);d([r.property({type:[y.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],D.prototype,"uniqueValueInfos",null);d([r.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],D.prototype,"requiredFields",void 0);d([g(1,r.cast(q.ensureType))],D.prototype,"addUniqueValueInfo",null);
return D=F=d([r.subclass("esri.renderers.UniqueValueRenderer")],D)}(r.declared(w))})},"esri/layers/vectorTiles/core/tsSupport/paramHelper":function(){define([],function(){return function(A,h){return function(b,d){h(b,d,A)}}})},"esri/layers/vectorTiles/core/arrayUtils":function(){define(["require","exports"],function(A,h){function b(m,r,u){for(var v=m.length,w=0;w<v;w++)if(r.call(u,m[w],w,m))return w;return-1}function d(m,r,u,v){void 0===u&&(u=m.length);v=v||l;for(var w=Math.max(0,v.last-10),B=-1,
C=w;C<u;++C)if(m[C]===r){B=C;break}if(-1===B){for(C=0;C<w;++C)if(m[C]===r){B=C;break}if(-1===B)return}m[B]=m[u-1];m.pop();v.last=B;return r}function g(m,r,u,v){void 0===u&&(u=m.length);var w=[];r.forEach(function(B){void 0!==d(m,B,u,v)&&(w.push(B),--u)});return w}function p(m,r){return-1===m.indexOf(r)}function n(m,r,u){return!m.some(r.bind(null,u))}function e(m){return m}Object.defineProperty(h,"__esModule",{value:!0});h.findIndex=b;h.find=function(m,r,u){for(var v=m.length,w=0;w<v;w++){var B=m[w];
if(r.call(u,B,w,m))return B}};h.unique=function(m){return m.filter(function(r,u,v){return v.indexOf(r)===u})};h.equals=function(m,r,u){if(!m&&!r)return!0;if(!m||!r||m.length!==r.length)return!1;if(u)for(var v=0;v<m.length;v++){if(!u(m[v],r[v]))return!1}else for(v=0;v<m.length;v++)if(m[v]!==r[v])return!1;return!0};h.difference=function(m,r,u){if(u){var v=r.filter(n.bind(null,m,u));m=m.filter(n.bind(null,r,u))}else v=r.filter(p.bind(null,m)),m=m.filter(p.bind(null,r));return{added:v,removed:m}};h.intersect=
function(m,r,u){return m&&r?u?m.filter(function(v){return-1<b(r,function(w){return u(v,w)})}):m.filter(function(v){return-1<r.indexOf(v)}):[]};h.constant=function(m,r){for(var u=Array(m),v=0;v<m;v++)u[v]=r;return u};h.range=function(m,r){void 0===r&&(r=m,m=0);for(var u=Array(r-m),v=m;v<r;v++)u[v-m]=v;return u};h.binaryIndexOf=function(m,r,u){for(var v=m.length,w=0,B=v-1;w<B;){var C=w+Math.floor((B-w)/2);r>m[C]?w=C+1:B=C}B=m[w];return u?r>=m[v-1]?-1:B===r?w:w-1:B===r?w:-1};var k=function(){return function(){this.last=
0}}();h.RemoveHint=k;var l=new k;A=function(){return function(m){var r=this;this._array=m;this._hint=new k;this.remove=function(u){return d(r._array,u,r._array.length,r._hint)};this.removeMany=function(u){return g(r._array,u,r._array.length,r._hint)}}}();h.UnorderedRemover=A;h.removeUnordered=d;h.removeUnorderedMany=g;h.keysOfMap=function(m){var r=[];m.forEach(function(u,v){return r.push(v)});return r};h.keysOfSet=function(m,r){void 0===r&&(r=e);var u=[];m.forEach(function(v){return u.push(r(v))});
return u}})},"esri/layers/vectorTiles/portal/Portal":function(){define(["require","exports"],function(A,h){return function(){function b(){}b.getDefault=function(){return null};return b}()})},"esri/layers/vectorTiles/renderers/support/diffUtils":function(){define(["require","exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(A,h,b,d,g){function p(r){return r instanceof d?Object.keys(r.items):r instanceof b?g.getProperties(r).keys():r?Object.keys(r):
[]}function n(r,u){return r instanceof d?r.items[u]:r[u]}function e(r,u){return Array.isArray(r)&&Array.isArray(u)?r.length!==u.length:!1}function k(r){return r?r.declaredClass:null}function l(r,u){var v=r.diff;if(v&&"function"===typeof v)return v(r,u);var w=p(r),B=p(u);if(0!==w.length||0!==B.length){if(!w.length||!B.length||e(r,u))return{type:"complete",oldValue:r,newValue:u};var C=B.filter(function(z){return-1===w.indexOf(z)}),y=w.filter(function(z){return-1===B.indexOf(z)});C=w.filter(function(z){return-1<
B.indexOf(z)&&n(r,z)!==n(u,z)}).concat(C,y).sort();if((y=k(r))&&-1<m.indexOf(y)&&C.length)return{type:"complete",oldValue:r,newValue:u};y=r instanceof b&&u instanceof b;for(var a in C){var c=C[a],f=n(r,c),q=n(u,c),t=void 0;if((y||"function"!==typeof f&&"function"!==typeof q)&&f!==q&&(null!=f||null!=q)&&(t=v&&v[c]&&"function"===typeof v[c]?v[c](f,q):"object"===typeof f&&"object"===typeof q&&k(f)===k(q)?l(f,q):{type:"complete",oldValue:f,newValue:q})){var x=x||{type:"partial",diff:{}};x.diff[c]=t}}return x}}
Object.defineProperty(h,"__esModule",{value:!0});var m=["esri.Color","esri.portal.Portal"];h.diff=function(r,u){if("function"!==typeof r&&"function"!==typeof u&&(r||u))return!r||!u||"object"===typeof r&&"object"===typeof u&&k(r)!==k(u)?{type:"complete",oldValue:r,newValue:u}:l(r,u)}})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u){function v(D){return D?D.isInstanceOf&&D.isInstanceOf(z):!1}function w(D){return D?v(D)?D.toArray():D.length?Array.prototype.slice.apply(D):[]:[]}function B(D){if(D&&D.length)return D[0]}function C(D,F,G,E){F&&F.forEach(function(H,O,K){D.push(H);C(D,G.call(E,H,O,K),G,E)})}A=function(){function D(){this.target=null;this.defaultPrevented=this.cancellable=!1}D.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};D.prototype.reset=function(F){this.defaultPrevented=
!1;this.item=F};return D}();var y=function(){},a=new l(A,!0,function(D){D.item=null;D.target=null}),c=new Set,f=new Set,q=new Set,t=new Map,x=0,z=function(D){function F(E){E=D.call(this,E)||this;E._boundDispatch=E._dispatchColChange.bind(E);E._chgListeners=[];E._notifications=null;E._timer=null;E.length=0;E._items=[];Object.defineProperty(E,"uid",{value:x++});return E}b(F,D);var G=F;F.ofType=function(E){if(!E)return G;if(t.has(E))return t.get(E);if("function"===typeof E)var H=E.prototype.declaredClass;
else if(E.base)H=E.base.prototype.declaredClass;else for(var O in E.typeMap){var K=E.typeMap[O].prototype.declaredClass;H=H?H+(" | "+K):K}H=G.createSubclass({declaredClass:"esri.core.Collection\x3c"+H+"\x3e"});O={Type:E,ensureType:"function"===typeof E?u.ensureType(E):u.ensureOneOfType(E)};Object.defineProperty(H.prototype,"itemType",{value:O});t.set(E,H);return H};F.prototype.normalizeCtorArgs=function(E){return E?Array.isArray(E)||v(E)?{items:E}:E:{}};Object.defineProperty(F.prototype,"items",{get:function(){return this._items},
set:function(E){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(w(E))),this._emitAfterChanges())},enumerable:!0,configurable:!0});F.prototype.on=function(E,H){var O;Array.isArray(E)?O=E:-1<E.indexOf(",")&&(O=E.split(/\s*,\s*/));if(O){var K=[];for(E=0;E<O.length;E++)K.push(this.on(O[E],H));K.remove=function(){for(var P=0;P<K.length;P++)K[P].remove()};return K}if("change"===E){var L=this._chgListeners,T={removed:!1,callback:H};L.push(T);this._notifications&&this._notifications.push({listeners:L.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=y;T.removed=!0;L.splice(L.indexOf(T),1)}}}return g.after(this,"on"+E,H,!0)};F.prototype.hasEventListener=function(E){return"change"===E?0<this._chgListeners.length:this.inherited(arguments)};F.prototype.add=function(E,H){if(this._emitBeforeChanges())return this;H=this.getNextIndex(H);this._splice(H,0,E);this._emitAfterChanges();return this};F.prototype.addMany=function(E,H){void 0===H&&(H=this._items.length);if(!E||!E.length||
this._emitBeforeChanges())return this;H=this.getNextIndex(H);this._splice.apply(this,[H,0].concat(w(E)));this._emitAfterChanges();return this};F.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var E=this._splice(0,this.length)||[];this._emitAfterChanges();return E};F.prototype.clone=function(){return this._createNewInstance({items:this._items.map(k.clone)})};F.prototype.concat=function(){for(var E=[],H=0;H<arguments.length;H++)E[H]=arguments[H];E=E.map(w);return this._createNewInstance({items:(O=
this._items).concat.apply(O,E)});var O};F.prototype.drain=function(E,H){if(this.length&&!this._emitBeforeChanges()){for(var O=this._splice(0,this.length),K=O.length,L=0;L<K;L++)E.call(H,O[L],L,O);this._emitAfterChanges()}};F.prototype.every=function(E,H){return this._items.every(E,H)};F.prototype.filter=function(E,H){var O=2===arguments.length?this._items.filter(E,H):this._items.filter(E);return this._createNewInstance({items:O})};F.prototype.find=function(E,H){if("function"!==typeof E)throw new TypeError(E+
" is not a function");for(var O=this._items,K=O.length,L=0;L<K;L++){var T=O[L];if(E.call(H,T,L,O))return T}};F.prototype.findIndex=function(E,H){if("function"!==typeof E)throw new TypeError(E+" is not a function");for(var O=this._items,K=O.length,L=0;L<K;L++)if(E.call(H,O[L],L,O))return L;return-1};F.prototype.flatten=function(E,H){var O=[];C(O,this,E,H);return new G(O)};F.prototype.forEach=function(E,H){for(var O=this._items,K=O.length,L=0;L<K;L++)E.call(H,O[L],L,O)};F.prototype.getItemAt=function(E){return this._items[E]};
F.prototype.getNextIndex=function(E){var H=this.length;E=null==E?H:E;0>E?E=0:E>H&&(E=H);return E};F.prototype.includes=function(E,H){void 0===H&&(H=0);return arguments.length?-1!==this._items.indexOf(E,H):!1};F.prototype.indexOf=function(E,H){void 0===H&&(H=0);return this._items.indexOf(E,H)};F.prototype.join=function(E){void 0===E&&(E=",");return this._items.join(E)};F.prototype.lastIndexOf=function(E,H){void 0===H&&(H=this.length-1);return this._items.lastIndexOf(E,H)};F.prototype.map=function(E,
H){E=this._items.map(E,H);return new G({items:E})};F.prototype.reorder=function(E,H){void 0===H&&(H=this.length-1);var O=this.indexOf(E);if(-1!==O){0>H?H=0:H>=this.length&&(H=this.length-1);if(O!==H){if(this._emitBeforeChanges())return E;this._splice(O,1);this._splice(H,0,E);this._emitAfterChanges()}return E}};F.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var E=B(this._splice(this.length-1,1));this._emitAfterChanges();return E}};F.prototype.push=function(){for(var E=[],H=
0;H<arguments.length;H++)E[H]=arguments[H];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(E));this._emitAfterChanges();return this.length};F.prototype.reduce=function(E,H){var O=this._items;return 2===arguments.length?O.reduce(E,H):O.reduce(E)};F.prototype.reduceRight=function(E,H){var O=this._items;return 2===arguments.length?O.reduceRight(E,H):O.reduceRight(E)};F.prototype.remove=function(E){return this.removeAt(this.indexOf(E))};F.prototype.removeAt=
function(E){if(!(0>E||E>=this.length||this._emitBeforeChanges()))return E=B(this._splice(E,1)),this._emitAfterChanges(),E};F.prototype.removeMany=function(E){if(!E||!E.length||this._emitBeforeChanges())return[];E=v(E)?E.toArray():E;for(var H=this._items,O=[],K=E.length,L=0;L<K;L++){var T=H.indexOf(E[L]);if(-1<T){for(var P=L+1,Q=T+1,J=Math.min(E.length-P,H.length-Q),R=0;R<J&&E[P+R]===H[Q+R];)R++;P=1+R;(T=this._splice(T,P))&&0<T.length&&O.push.apply(O,T);L+=P-1}}this._emitAfterChanges();return O};F.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var E=this._splice(0,this.length);E&&(E.reverse(),this._splice.apply(this,[0,0].concat(E)));this._emitAfterChanges();return this};F.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var E=B(this._splice(0,1));this._emitAfterChanges();return E}};F.prototype.slice=function(E,H){void 0===E&&(E=0);void 0===H&&(H=this.length);return this._createNewInstance({items:this._items.slice(E,H)})};F.prototype.some=function(E,H){return this._items.some(E,
H)};F.prototype.sort=function(E){if(!this.length||this._emitBeforeChanges())return this;var H=this._splice(0,this.length);arguments.length?H.sort(E):H.sort();this._splice.apply(this,[0,0].concat(H));return this};F.prototype.splice=function(E,H){for(var O=[],K=2;K<arguments.length;K++)O[K-2]=arguments[K];if(this._emitBeforeChanges())return[];O=this._splice.apply(this,[E,H].concat(O))||[];this._emitAfterChanges();return O};F.prototype.toArray=function(){return this._items.slice()};F.prototype.toJSON=
function(){return this.toArray()};F.prototype.toLocaleString=function(){return this._items.toLocaleString()};F.prototype.toString=function(){return this._items.toString()};F.prototype.unshift=function(){for(var E=[],H=0;H<arguments.length;H++)E[H]=arguments[H];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(E));this._emitAfterChanges();return this.length};F.prototype._createNewInstance=function(E){return new this.constructor(E)};F.prototype._splice=function(E,
H){for(var O=[],K=2;K<arguments.length;K++)O[K-2]=arguments[K];K=this._items;var L=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=m.schedule(this._boundDispatch));if(H){var T=K.splice(E,H);if(this.hasEventListener("before-remove")){var P=a.acquire();P.target=this;P.cancellable=!0;for(var Q=0,J=T.length;Q<J;Q++){var R=
T[Q];P.reset(R);this.emit("before-remove",P);P.defaultPrevented&&(T.splice(Q,1),K.splice(E,0,R),E+=1,--Q,--J)}a.release(P)}this.length=this._items.length;if(this.hasEventListener("after-remove")){R=a.acquire();R.target=this;R.cancellable=!1;J=T.length;for(Q=0;Q<J;Q++)R.reset(T[Q]),this.emit("after-remove",R);a.release(R)}}if(O&&O.length){if(L){Q=[];for(J=0;J<O.length;J++)R=O[J],P=L.ensureType(R),null==P&&null!=R||Q.push(P);O=Q}L=this.hasEventListener("before-add");Q=this.hasEventListener("after-add");
J=E===this.length;if(L||Q){R=a.acquire();R.target=this;R.cancellable=!0;P=a.acquire();P.target=this;P.cancellable=!1;for(var I=0,S=O;I<S.length;I++){var U=S[I];L?(R.reset(U),this.emit("before-add",R),R.defaultPrevented||(J?K.push(U):K.splice(E++,0,U),this._set("length",K.length),Q&&(P.reset(U),this.emit("after-add",P)))):(J?K.push(U):K.splice(E++,0,U),this._set("length",K.length),P.reset(U),this.emit("after-add",P))}a.release(R)}else J?K.push.apply(K,O):K.splice.apply(K,[E,0].concat(O)),this._set("length",
K.length)}(O&&O.length||T&&T.length)&&this._notifyChangeEvent(O,T);return T};F.prototype._emitBeforeChanges=function(){var E=!1;if(this.hasEventListener("before-changes")){var H=a.acquire();H.target=this;H.cancellable=!0;this.emit("before-changes",H);E=H.defaultPrevented;a.release(H)}return E};F.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var E=a.acquire();E.target=this;E.cancellable=!1;this.emit("after-changes",E);a.release(E)}};F.prototype._notifyChangeEvent=
function(E,H){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:E,removed:H})};F.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var E=this._notifications;this._notifications=null;for(var H=function(L){var T=L.changes;c.clear();f.clear();q.clear();for(var P=0;P<T.length;P++){var Q=T[P],J=Q.added;Q=Q.removed;if(J)if(0===q.size&&0===f.size)for(var R=0,I=J;R<I.length;R++)J=I[R],c.add(J);
else for(R=0,I=J;R<I.length;R++)J=I[R],f.has(J)?(q.add(J),f.delete(J)):q.has(J)||c.add(J);if(Q)if(0===q.size&&0===c.size)for(R=0;R<Q.length;R++)J=Q[R],f.add(J);else for(R=0;R<Q.length;R++)J=Q[R],c.has(J)?c.delete(J):(q.delete(J),f.add(J))}var S=n.acquire();c.forEach(function(Y){S.push(Y)});var U=n.acquire();f.forEach(function(Y){U.push(Y)});var V=O._items,W=L.items,X=n.acquire();q.forEach(function(Y){W.indexOf(Y)!==V.indexOf(Y)&&X.push(Y)});if(L.listeners&&(S.length||U.length||X.length))for(T={target:O,
added:S,removed:U,moved:X},P=L.listeners.length,J=0;J<P;J++)Q=L.listeners[J],Q.removed||Q.callback.call(O,T);n.release(S);n.release(U);n.release(X)},O=this,K=0;K<E.length;K++)H(E[K]);c.clear();f.clear();q.clear()}};F.isCollection=v;d([r.property()],F.prototype,"length",void 0);d([r.property()],F.prototype,"items",null);return F=G=d([r.subclass("esri.core.Collection")],F)}(r.declared(p,e));return z})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],
function(A,h,b,d){function g(p,n,e,k){var l;Array.isArray(n)?l=n:-1<n.indexOf(",")&&(l=n.split(/\s*,\s*/));if(l){var m=[];for(n=0;n<l.length;n++)m.push(g(p,l[n],e,k));m.remove=function(){for(var r=0;r<m.length;r++)m[r].remove()};return m}return k(p,n)}return function(){function p(){}p.prototype.emit=function(n,e){if(this.hasEventListener(n))return e=e||{},e.target||(e.target=this),d.emit(this,n,e)};p.prototype.on=function(n,e){return g(this,n,e,function(k,l){return b.after(k,"on"+l,e,!0)})};p.prototype.hasEventListener=
function(n){n="on"+n;return!(!this[n]||!this[n].after)};return p}()})},"esri/layers/vectorTiles/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(A,h,b,d,g,p,n,e){Object.defineProperty(h,"__esModule",{value:!0});A=function(k){function l(){var r=null!==k&&k.apply(this,
arguments)||this;r.description=null;r.label=null;r.symbol=null;r.value=null;return r}b(l,k);var m=l;l.prototype.clone=function(){return new m({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};d([p.property({type:String,json:{write:!0}})],l.prototype,"description",void 0);d([p.property({type:String,json:{write:!0}})],l.prototype,"label",void 0);d([p.property({types:e.rendererTypes,json:{origins:{"web-scene":{read:n.read,write:{target:{symbol:{types:e.rendererTypes3D}},
writer:n.writeTarget}}},read:n.read,write:n.writeTarget}})],l.prototype,"symbol",void 0);d([p.property({type:String,json:{write:!0}})],l.prototype,"value",void 0);return l=m=d([p.subclass("esri.renderers.support.UniqueValueInfo")],l)}(p.declared(g));h.UniqueValueInfo=A;h.default=A})},"esri/layers/vectorTiles/symbols/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Error"],function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});h.fetchStyle=
function(g,p){return b.reject(new d("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}})},"esri/layers/vectorTiles/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(A,h,b,d,g,p,n,e,k){function l(u,v,w){if(!u)return null;if(u&&(u.styleName||u.styleUrl)&&"uniqueValue"!==
u.type)return w&&w.messages&&w.messages.push(new g("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+u.type+"'",{definition:u,context:w})),null;v=u?r[u.type]||null:null;if(v)return v=new v,v.read(u,w),v;w&&w.messages&&u&&w.messages.push(new g("renderer:unsupported","Renderers of type '"+(u.type||"unknown")+"' are not supported",{definition:u,context:w}));return null}function m(u,v,w){return u?w&&"web-scene"===w.origin&&"heatmap"===u.type?(w.messages&&
w.messages.push(new b("renderer:unsupported","Renderer of type '"+u.declaredClass+"' are not supported in scenes.",{renderer:u,context:w})),null):u.write(v,w):null}Object.defineProperty(h,"__esModule",{value:!0});var r={simple:e,uniqueValue:k,classBreaks:p,heatmap:n};h.read=l;h.writeTarget=function(u,v,w,B){(u=m(u,{},B))&&d.setDeepValue(w,u,v)};h.write=m;h.fromJSON=function(u,v){return l(u,null,v)}})},"esri/layers/vectorTiles/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),
function(A,h,b,d,g,p){function n(){var m=0===e.length;if(!m){for(var r=g();!m&&6>g()-r;){var u=e[l];if(u){if(!0===u()){var v=k.get(u);e[l]=null;k.delete(u);v()}l=(l+1)%e.length}else e.splice(l,1),l=(m=0===e.length)?0:l%e.length}m||d(n)}}var e=[],k=new Map,l=0;return function(m){return m?p.create(function(r){e.push(m);k.set(m,r);1===e.length&&d(n)},function(){e[e.indexOf(m)]=null;k.delete(m)}):p.reject(new TypeError("callback is not a function"))}})},"esri/layers/vectorTiles/core/MapPool":function(){define(["require",
"exports","./ObjectPool"],function(A,h,b){A=function(){function g(p,n){void 0===p&&(p=50);void 0===n&&(n=50);this._pool=new b(Map,!1,function(e){return e.clear()},n,p)}g.prototype.acquire=function(){return this._pool.acquire()};g.prototype.release=function(p){this._pool.release(p)};g.acquire=function(){return d.acquire()};g.release=function(p){return d.release(p)};return g}();var d=new A(100);return A})},"esri/layers/vectorTiles/core/SetPool":function(){define(["require","exports","./ObjectPool"],
function(A,h,b){A=function(){function g(p,n){void 0===p&&(p=50);void 0===n&&(n=50);this._pool=new b(Set,!1,function(e){return e.clear()},n,p)}g.prototype.acquire=function(){return this._pool.acquire()};g.prototype.release=function(p){this._pool.release(p)};g.acquire=function(){return d.acquire()};g.release=function(p){return d.release(p)};return g}();var d=new A(100);return A})},"esri/layers/vectorTiles/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),
function(A,h,b,d,g,p,n,e){function k(m,r,u){if(!m)return null;var v=0,w={};m=m.clone();var B=m.visualVariables,C=null;if("simple"!==m.type){var y=m.valueExpression;if(!m.field&&y){var a="$$fake"+v++,c=p.createFunction(y);w[a]=function(f,q){l.repurposeFromGraphicLikeObject(f.geometry,f.attributes,u);return p.executeFunction(c,{vars:{$feature:l,$view:p.getViewInfo(q)},spatialReference:r})};m.field=a;m.valueExpression=null;C=function(f,q){q.attributes[a]=w[a](q);return f.valueExpression?f.getSymbol(d.fromJSON(q)):
f.getSymbol(q)}}}B&&(m.visualVariables=B.map(function(f){if(f.normalizationField){var q=f.field,t=f.normalizationField,x="$$fake"+v++;w[x]=function(F,G){return F.attributes[q]/F.attributes[t]};f=b({},f);f.field=x;delete f.normalizationField;return f}if(f.valueExpression&&"$view.scale"!==f.valueExpression){var z=f.valueExpression;x="$$fake"+v++;var D=p.createFunction(z);w[x]=function(F,G){l.repurposeFromGraphicLikeObject(F.geometry,F.attributes,u);return p.executeFunction(D,{vars:{$feature:l,$view:p.getViewInfo(G)},
spatialReference:r})};f=b({},f);f.field=x;delete f.valueExpression;return f}return f}));return{renderer:m,normalizingFunctions:w,getSymbolFunction:C}}Object.defineProperty(h,"__esModule",{value:!0});var l=new g;h.createRendererInfo=function(m,r,u){var v=(r=k(m,r,u)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},r.normalizingFunctions),w=r&&r.getSymbolFunction;m=r&&r.renderer||m;r=e.convertVisualVariables(m.visualVariables);return{renderer:m,vvFields:r.vvFields,vvRanges:r.vvRanges,
getValue:function(B,C){var y=v[C];return y?y(B):B.attributes[C]},getSymbol:function(B){return w?w(this.renderer,B):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,B):null}}};h.getNormalizedRenderer=function(m,r,u){return(r=k(m,r,u)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},r.renderer)||m};h.getSymbol=function(m,r){return m.getSymbol(r)};h.isRendererWebGLCompatible=function(m){if(!m||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(m.type))return!1;
if(m.visualVariables){var r=0;for(m=m.visualVariables;r<m.length;r++){var u=m[r];switch(u.type){case "color":case "opacity":if(u.stops&&8<u.stops.length)return!1;break;case "size":if(e.getTypeOfSizeVisualVariable(u)===n.WGLVVFlag.SIZE_FIELD_STOPS&&u.stops&&6<u.stops.length)return!1}}}return!0}})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../renderers ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/aaBoundingRect ../../../../../renderers/support/diffUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/visualVariablesUtils ../../../engine/webgl/WGLFeatureView ../../../engine/webgl/WGLTile ./BaseTileRenderer".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v){function w(B){for(var C in B.diff){var y=B.diff[C];if("collection"===y.type){if(0!==y.changed.length||0!==y.added.length||0!==y.removed.length)return!0}else if("visualVariables"!==C&&"authoringInfo"!==C)return!0}return!1}Object.defineProperty(h,"__esModule",{value:!0});A=function(B){function C(y){return B.call(this)||this}b(C,B);C.prototype.initialize=function(){};C.prototype.createTile=function(y){var a=e.create();this.tileInfoView.getTileBounds(a,y);return new u(y,
a)};C.prototype.disposeTile=function(y){this._featuresView.removeChild(y)};C.prototype.highlight=function(y){return this._featuresView.highlight(y)};C.prototype.hitTest=function(y,a){return this._featuresView.hitTest(y,a)};C.prototype.supportsRenderer=function(y){return null!=y&&l.isRendererWebGLCompatible(y)&&-1!==["simple","class-breaks","unique-value"].indexOf(y.type)};C.prototype.getProcessorConfiguration=function(){var y=this.layer;return{type:"symbol",renderer:y.renderer.toJSON(),devicePixelRatio:window.devicePixelRatio||
1,definitionExpression:y.definitionExpression,outFields:y.outFields.slice().sort(),gdbVersion:y.gdbVersion,historicMoment:y.historicMoment&&y.historicMoment.getTime(),labelingInfo:y.labelingInfo&&y.labelingInfo.map(function(a){return a.toJSON()})}};C.prototype.needsProcessorReconfiguration=function(y){var a=this.configuration;if(!a||a.definitionExpression!==y.definitionExpression||a.outFields.join()!==y.outFields.join())return!0;a=this.configuration&&g.fromJSON(this.configuration.renderer)||null;
y=y&&g.fromJSON(y.renderer)||null;a=k.diff(a,y);if(!a)return!1;switch(a.type){case "complete":return!0;case "partial":if(w(a))return!0;if(a.diff.visualVariables){a=this._featuresView.visualVariablesInfo;var c=this.tileInfoView.tileInfo.spatialReference,f={fields:this.layer.fields.map(function(q){return q.toJSON()})};y=l.getNormalizedRenderer(y,c,f);y=m.convertVisualVariables(y.visualVariables).vvFields;return k.diff(a.vvFields,y)?!0:!1}}};C.prototype.applyConfiguration=function(y,a){var c=g.fromJSON(y.renderer),
f={fields:this.layer.fields.map(function(q){return q.toJSON()})};c=l.getNormalizedRenderer(c,this.tileInfoView.tileInfo.spatialReference,f);this.configuration=y;this._featuresView.visualVariablesInfo=m.convertVisualVariables(c.visualVariables);a&&this._featuresView.disposeWebGLResources()};C.prototype.install=function(y){var a=new r.default({highlightOptions:this.highlightOptions,tileInfoView:this.tileInfoView,layer:this.layer,layerView:this.layerView});this._featuresView=a;a.install(y)};C.prototype.uninstall=
function(y){this._featuresView.uninstall(y)};C.prototype.onTileData=function(y){var a=this.tiles.get(y.tileKey);a&&(this._featuresView.onTileData(a,y.data),this.requestUpdate())};C.prototype.onTileDataUpdate=function(y){var a=this.tiles.get(y.tileId);a&&(this._featuresView.onTileDataUpdate(a,y.data),this.requestUpdate())};C.prototype.onTileError=function(y){if(y=this.tiles.get(y.tileKey))this._featuresView.onTileError(y),this.requestUpdate()};C.prototype.getMaterialItems=function(y){return this._featuresView.getMaterialItems(y)};
return C=d([n.subclass()],C)}(n.declared(p,v.default));h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLTile":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix/mat2d ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec2 ../DisplayObject ./definitions ./DirtyMap ./DisplayRecordStore ./enums ./number ./Utils ./WGLBuffers ./WGLDisplayList ./WGLDisplayObject ../../tiling/enums ../../tiling/TileKey".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C,y){function a(c,f){return c.sortKey-f.sortKey}return function(c){function f(q,t){var x=c.call(this)||this;x.status=C.TileStatus.INITIALIZED;x._data=null;x.hlDisplayList=null;x._wglBuffers=null;x._dirtyMap=new k.default;x.coords=[0,0];x.bounds=[0,0,0,0];x.tileTransform={transform:Float32Array[16],screenTransform:Float32Array[16],displayCoord:Float32Array[2],screenCoord:Float32Array[2]};x._hasVisualVariables=!1;x._labelIndex=null;x.tileTransform.screenTransform=
d.create();x.tileTransform.transform=g.create();x.tileTransform.displayCoord=p.create();x.tileTransform.screenCoord=p.create();x.key=y.pool.acquire(q);x.coords[0]=t[0];x.coords[1]=t[3];x.bounds=t;return x}b(f,c);Object.defineProperty(f.prototype,"iconGeometry",{get:function(){return this.getGeometry(m.WGLGeometryType.MARKER)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"textGeometry",{get:function(){return this.getGeometry(m.WGLGeometryType.TEXT)},enumerable:!0,configurable:!0});
Object.defineProperty(f.prototype,"fillGeometry",{get:function(){return this.getGeometry(m.WGLGeometryType.FILL)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"lineGeometry",{get:function(){return this.getGeometry(m.WGLGeometryType.LINE)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"labelGeometry",{get:function(){return this.getGeometry(m.WGLGeometryType.LABEL)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"displayObjects",{get:function(){return this._data.tileDisplayData.displayObjects},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"canDisplay",{get:function(){return!!this.attached&&!!this._data},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"isDirty",{get:function(){return this.status===C.TileStatus.MODIFIED},set:function(q){q&&this.status===C.TileStatus.READY?this.setStatus(C.TileStatus.MODIFIED):q||this.status!==C.TileStatus.MODIFIED||this.setStatus(C.TileStatus.READY);this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"hasData",{get:function(){return this.status===C.TileStatus.MODIFIED||this.status===C.TileStatus.READY},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"labelIndex",{get:function(){return this._labelIndex},enumerable:!0,configurable:!0});f.prototype.getGeometry=function(q){return this._wglBuffers&&this._wglBuffers.has(q)?this._wglBuffers.get(q):null};f.prototype.getDisplayList=function(q){switch(q){case m.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;default:return this._data&&
this._data.tileDisplayData.displayList}};Object.defineProperty(f.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});f.prototype.setData=function(q,t,x){this._hasVisualVariables=t;q&&q.tileDisplayData?(this._dispRecStore=l.default.fromTileData(q,this._dirtyMap),this._data=q,q.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(x?C.TileStatus.MODIFIED:C.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(C.TileStatus.READY),this._dirtyMap.markAllDirty()):
(this.clear(),this.setStatus(C.TileStatus.NO_DATA))};f.prototype.patchData=function(q,t){this._data||(this.setData(q.addOrUpdate,this._hasVisualVariables,t),q.addOrUpdate=null);this._patchData(q)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=l.default.fromTileData(this._data,this._dirtyMap));q.addOrUpdate.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(t?C.TileStatus.MODIFIED:C.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(C.TileStatus.READY)};
f.prototype.commitChanges=function(q){this._data&&this.status===C.TileStatus.READY&&(this._wglBuffers||(this._wglBuffers=new v.default(q.context,this._hasVisualVariables)),this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._dirtyMap.markAllClean())};f.prototype.setVisibility=function(q,t){for(var x=this._data.tileBufferData.geometries.map(function(L){return{vertexFrom:void 0,vertexTo:void 0,geometry:L}}),z=0;z<q.length;z++)for(var D=q[z],F=0,G=this._data.tileDisplayData.displayObjectRegistry.get(D.id).displayRecords;F<
G.length;F++){var E=G[F];if(null==t||t===E.geometryType){var H=x[E.geometryType],O=H.geometry.vertexBuffer[u.C_VBO_VISIBILITY];if(O){H.vertexFrom=null==H.vertexFrom?E.vertexFrom:Math.min(H.vertexFrom,E.vertexFrom);H.vertexTo=null==H.vertexTo?E.vertexFrom+E.vertexCount:Math.max(H.vertexTo,E.vertexFrom+E.vertexCount);H=E.vertexFrom*O.stride/4;E=E.vertexCount*O.stride/4;for(var K=0;K<E;++K)O.data[H+K]=D.visibility?4294967295:0}}}t=!1;for(q=0;q<x.length;++q)H=x[q],null!=H.vertexFrom&&null!=H.vertexTo&&
(t=H.vertexTo?H.vertexTo-H.vertexFrom:0,this.setStatus(C.TileStatus.MODIFIED),this._dirtyMap.markDirtyVertices(q,u.C_VBO_VISIBILITY,H.vertexFrom,t),t=!0);t&&this.requestRender()};f.prototype.setVisibilityRange=function(q,t,x,z){x=r.i8888to32(x,z,x,z);var D=z=void 0,F=this._data.tileBufferData.geometries[m.WGLGeometryType.LABEL].vertexBuffer[u.C_VBO_VISIBILITY_RANGE];q=this._data.tileDisplayData.displayObjectRegistry.get(q);t=q.metrics[t];var G=t.range.from;for(t=G+t.range.count;G<t;++G){var E=q.displayRecords[G];
if(E.geometryType===m.WGLGeometryType.LABEL){z=null==z?E.vertexFrom:Math.min(z,E.vertexFrom);D=null==D?E.vertexFrom+E.vertexCount:Math.max(D,E.vertexFrom+E.vertexCount);var H=E.vertexFrom*F.stride/4;E=E.vertexCount*F.stride/4;for(var O=0;O<E;++O)F.data[H+O]=x}}this._dirtyMap.markDirtyVertices(m.WGLGeometryType.LABEL,u.C_VBO_VISIBILITY_RANGE,z,D?D-z:0)};f.prototype.setStatus=function(q){this.status=q;if(q===C.TileStatus.READY||q===C.TileStatus.NO_DATA)this.attached=!0};f.prototype.clear=function(){this._data=
null;this.setStatus(C.TileStatus.INVALID);this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null);this.hlDisplayList&&(this.hlDisplayList=null)};f.prototype.dispose=function(){this.clear()};f.prototype.attach=function(q){return this.canDisplay};f.prototype.detach=function(q){c.prototype.detach.call(this,q)};f.prototype.doRender=function(q){var t=this;this.attached&&(this.commitChanges(q),q.context.setStencilFunction(514,this.stencilRef,255),q.painter.getBrushes(q.drawPhase).forEach(function(x){return x.draw(q,
t)}))};f.prototype.buildHLList=function(q){var t=this;this.hlDisplayList=new w;q.forEach(function(x){t._addToHLDisplayList(t.hlDisplayList,x)})};f.prototype._addToHLDisplayList=function(q,t){if(this._data){var x=this._data.tileDisplayData.displayObjectRegistry.get(t);if(x){t=[];var z=0;for(x=x.displayRecords;z<x.length;z++){var D=x[z].copy();D.meshData=null;D.symbolLevel=0;D.zOrder=0;t.push(D)}t.sort(a);q.addToList(t)}}};f.prototype._rebuildLabelIndex=function(){this._labelIndex=this._initLabelIndex();
for(var q=0,t=this.displayObjects;q<t.length;q++)this._insertIntoLabelIndex(t[q])};f.prototype._insertIntoLabelIndex=function(q){var t=q.anchor;-1!==q.xBucket&&t&&this.labelIndex[q.yBucket][q.xBucket].push(q)};f.prototype._initLabelIndex=function(){for(var q=[],t=0;t<e.TILE_SIZE/e.COLLISION_BUCKET_SIZE;t++){q.push([]);for(var x=0;x<e.TILE_SIZE/e.COLLISION_BUCKET_SIZE;x++)q[t].push([])}return q};f.prototype._patchData=function(q){for(var t=!0,x=0,z=q.remove||[];x<z.length;x++){var D=z[x],F=this._data.tileDisplayData.displayObjectRegistry.get(D);
if(F){this._data.tileDisplayData.displayList.removeFromList(F.displayRecords);for(var G=0,E=F.displayRecords;G<E.length;G++)this._dispRecStore.delete(E[G]);this._data.tileDisplayData.displayObjectRegistry.delete(D);F=this._data.tileDisplayData.displayObjects.indexOf(F);this._data.tileDisplayData.displayObjects.splice(F,1)}}x=0;for(z=q.addOrUpdate&&q.addOrUpdate.tileDisplayData&&q.addOrUpdate.tileDisplayData.displayObjects||[];x<z.length;x++){D=z[x];if(F=this._data.tileDisplayData.displayObjectRegistry.get(D.id)){var H=
F.displayRecords.length;for(G=0;G<H;++G){E=F.displayRecords[G];var O=D.displayRecords[G];if(G>=D.displayRecords.length||E.geometryType!==O.geometryType||E.symbolLevel!==O.symbolLevel||E.zOrder!==O.zOrder||E.materialInfo.materialKey!==O.materialInfo.materialKey)this._dispRecStore.delete(F.displayRecords[G]),G<D.displayRecords.length&&(F.displayRecords[G]=void 0)}F.displayRecords.length=D.displayRecords.length}else F=new B(D.id),this._data.tileDisplayData.displayObjectRegistry.set(D.id,F),this._data.tileDisplayData.displayObjects.push(F);
H=D.displayRecords.length;for(G=0;G<H;++G){O=D.displayRecords[G];(E=F.displayRecords[G])?(E.meshData=O.meshData,E.materialInfo=O.materialInfo):(E=O.copy(),E.vertexFrom=void 0,E.indexFrom=void 0,F.displayRecords[G]=E);var K=q.addOrUpdate.tileBufferData.geometries[O.geometryType];t=this._dispRecStore.setMeshData(E,O,K.vertexBuffer,K.indexBuffer)&&t}}return t};return f}(n)})},"esri/layers/vectorTiles/views/2d/engine/webgl/DirtyMap":function(){define(["require","exports","./Utils"],function(A,h,b){function d(g,
p,n){g.allDirty||(null!=g.from&&null!=g.count?(g.from=Math.min(g.from,p),g.count=Math.max(g.from+g.count,p+n)-g.from):(g.from=p,g.count=n))}Object.defineProperty(h,"__esModule",{value:!0});A=function(){function g(){this._dirties=b.createGeometryData(void 0,function(p){return{indices:{from:null,count:null,allDirty:!1}}},function(p,n){return{vertices:{from:null,count:null,allDirty:!1}}})}g.prototype.markAllClean=function(){for(var p=0,n=this._dirties;p<n.length;p++){var e=n[p];e.data.indices.from=null;
e.data.indices.count=null;e.data.indices.allDirty=!1;for(var k in e.buffers)e.buffers[k].data.vertices.from=null,e.buffers[k].data.vertices.count=null,e.buffers[k].data.vertices.allDirty=!1}};g.prototype.markAllDirty=function(){for(var p=0,n=this._dirties;p<n.length;p++){var e=n[p];e.data.indices.allDirty=!0;for(var k in e.buffers)e.buffers[k].data.vertices.allDirty=!0}};g.prototype.forEach=function(p){for(var n=new Map,e=0;e<this._dirties.length;++e){var k=this._dirties[e],l=new Map,m;for(m in k.buffers){var r=
k.buffers[m].data.vertices;(r.allDirty||null!=r.from&&null!=r.count)&&l.set(m,r)}k=k.data.indices;r=void 0;r=k.allDirty||null!=k.from&&null!=k.count?{indices:k,vertices:l}:{indices:void 0,vertices:l};(r.indices||0<r.vertices.size)&&n.set(e,r)}n.forEach(function(u,v){p({indices:u.indices||null,vertices:0<u.vertices.size?u.vertices:null},v)})};g.prototype.markDirtyIndices=function(p,n,e){d(this._dirties[p].data.indices,n,e)};g.prototype.markDirtyVertices=function(p,n,e,k){d(this._dirties[p].buffers[n].data.vertices,
e,k)};return g}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/DisplayRecordStore":function(){define(["require","exports","dojo/has","./FreeList","./Utils"],function(A,h,b,d,g){function p(e){e=e.getStrides();var k={},l;for(l in e)k[n[l]]=e[l];return k}Object.defineProperty(h,"__esModule",{value:!0});var n=["FILL","LINE","MARKER","TEXT","LABEL"];A=function(){function e(k,l,m,r){this._strides=k;this._displayList=l;this._vertexAlignments={};this._freeListsAndStorage={};this._dirtyMap=
null;this._dirtyMap=m;for(var u in k){m=l=!1;this._freeListsAndStorage[u]={vtxFreeList:r?new d.FreeList(r):null,idxFreeList:r?new d.FreeList(r):null,vertexBuffers:{},indexBuffer:r?new Uint32Array(r):null};for(var v in k[u])this._freeListsAndStorage[u].vertexBuffers[v]={data:r?new Uint32Array(Math.floor(r*k[u][v]/4)):null,stride:k[u][v]},2===k[u][v]%4?l=!0:0!==k[u][v]%4&&(m=!0);this._vertexAlignments[u]=m?4:l?2:1}}e.fromTileData=function(k,l){var m=p(k),r=[0,0,0,0,0],u=[0,0,0,0,0],v=[];k.tileDisplayData.displayObjectRegistry.forEach(function(f){v.push(f)});
for(var w=0;w<v.length;w++)for(var B=0,C=v[w].displayRecords;B<C.length;B++){var y=C[B];r[y.geometryType]=Math.max(r[y.geometryType],y.vertexFrom+y.vertexCount);u[y.geometryType]=Math.max(u[y.geometryType],y.indexFrom+y.indexCount)}l=new e(m,k.tileDisplayData.displayList,l,null);for(m=0;m<k.tileBufferData.geometries.length;++m){w=r[m];y=u[m];C=k.tileBufferData.geometries[m];B=l._storageFor(n[m]);var a=k.tileBufferData.geometries[m].indexBuffer;B.indexBuffer=a;B.idxFreeList=new d.FreeList(a.length);
B.idxFreeList.allocate(y);y=void 0;for(var c in C.vertexBuffer)C=k.tileBufferData.geometries[m].vertexBuffer[c],B.vertexBuffers[c].data=C.data,B.vertexBuffers[c].stride=C.stride,y=4*C.data.length/C.stride;B.vtxFreeList=new d.FreeList(y);B.vtxFreeList.allocate(w)}return l};e.prototype.delete=function(k){var l=n[k.geometryType];this._freeVertices(l,k.vertexFrom,k.vertexCount);this._freeIndices(l,k.indexFrom,k.indexCount);this._displayList.removeFromList(k);k.vertexFrom=void 0;k.indexFrom=void 0};e.prototype.setMeshData=
function(k,l,m,r){var u=n[k.geometryType];k.meshData=null;var v=void 0,w=void 0;void 0===k.vertexFrom?(w=this._align(u,l.vertexCount),v=this._allocateVertices(u,w)):l.vertexCount>k.vertexCount?(this._freeVertices(u,k.vertexFrom,k.vertexCount),w=this._align(u,l.vertexCount),v=this._allocateVertices(u,w)):l.vertexCount===k.vertexCount?(v=k.vertexFrom,w=k.vertexCount):(this._freeVertices(u,k.vertexFrom+l.vertexCount,k.vertexCount-l.vertexCount),v=k.vertexFrom,w=l.vertexCount);var B=!0,C=void 0,y=void 0;
void 0===k.indexFrom?(y=l.indexCount,C=this._allocateIndices(u,y)):l.indexCount>k.indexCount?(this._displayList.removeFromList(k),this._freeIndices(u,k.indexFrom,k.indexCount),y=l.indexCount,C=this._allocateIndices(u,y)):l.indexCount===k.indexCount?(B=!1,C=k.indexFrom,y=k.indexCount):(this._displayList.removeFromList(k),this._freeIndices(u,k.indexFrom+l.indexCount,k.indexCount-l.indexCount),C=k.indexFrom,y=l.indexCount);if(-1!==v&&-1!==C){u=this._storageFor(u);g.copyMeshData(v,C,u.vertexBuffers,u.indexBuffer,
l,m,r);k.vertexFrom=v;k.indexFrom=C;k.vertexCount=l.vertexCount;k.indexCount=l.indexCount;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(k.geometryType,k.indexFrom,k.indexCount);for(var a in m)this._dirtyMap.markDirtyVertices(k.geometryType,a,k.vertexFrom,k.vertexCount)}B&&this._displayList.addToList(k);return!0}-1!==v&&this._freeVertices(u,v,w);-1!==C&&this._freeIndices(u,C,y);k.setMeshDataFromBuffers(l,m,r);k.vertexFrom=void 0;k.vertexCount=0;k.indexFrom=void 0;k.indexCount=0;return!1};e.prototype._allocateVertices=
function(k,l){k=this._storageFor(k);l=k.vtxFreeList.allocate(l);return-1===l||.5<k.vtxFreeList.fragmentation?-1:l};e.prototype._freeVertices=function(k,l,m){var r=this._storageFor(k);r.vtxFreeList.free(l,m);if(b("esri-feature-tiles-debug"))for(var u in r.vertexBuffers){var v=r.vertexBuffers[u].data,w=this._stridesFor(k,u),B=l*w/4;w=m*w/4;for(var C=B;C<B+w;++C)v[C]=0}};e.prototype._freeIndices=function(k,l,m){k=this._storageFor(k);k.idxFreeList.free(l,m);if(b("esri-feature-tiles-debug")){k=k.indexBuffer;
for(var r=l;r<l+m;++r)k[r]=0}};e.prototype._align=function(k,l){var m=l%this._vertexAlignments[k];return 0===m?l:l+(this._vertexAlignments[k]-m)};e.prototype._allocateIndices=function(k,l){k=this._storageFor(k);l=k.idxFreeList.allocate(l);return-1===l||.5<k.idxFreeList.fragmentation?-1:l};e.prototype._storageFor=function(k){return this._freeListsAndStorage[k]};e.prototype._stridesFor=function(k,l){return this._strides[k][l]};return e}();h.default=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/FreeList":function(){define(["require",
"exports"],function(A,h){Object.defineProperty(h,"__esModule",{value:!0});var b=function(){function d(g){this._largestRange=null;this._parent=g;this._updateLargestRange()}Object.defineProperty(d.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0});d.prototype.rangeCreated=function(g){if(!this._largestRange||g.count>this._largestRange.count)this._largestRange=g};d.prototype.rangeResized=function(g,p,n){if(g===this._largestRange)g.count<n&&this._updateLargestRange();
else if(!this._largestRange||g.count>this._largestRange.count)this._largestRange=g};d.prototype.findBestRange=function(g){for(var p=this._parent._freeHead,n=null;null!==p;)p.count>=g&&(!n||p.count-g<n.count-g)&&(n=p),p=p.next;return n};d.prototype.findAdjacentRanges=function(g,p){for(var n=!0,e=!1,k=null,l=this._parent._freeHead;n&&!e;){var m=null!==l?l.from:this._parent._size;g>=(null!==k?k.from+k.count:0)&&g+p<=m?(n=!1,e=!0):null!==l?(k=l,l=l.next):n=!1}return[k,l]};d.prototype._updateLargestRange=
function(){for(var g=null,p=this._parent._freeHead;null!==p;){if(!g||p.count>g.count)g=p;p=p.next}this._largestRange=g};return d}();A=function(){function d(g,p){this._allocated=0;this._size=g;this._freeHead=0<g?{from:0,count:g,prev:null,next:null}:null;this._bookKeeper=p||new b(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}d.prototype.allocate=function(g){var p=this._bookKeeper.findBestRange(g);if(null===p)return-1;var n=p.from,e=p.count;p.from+=g;p.count-=g;this._bookKeeper.rangeResized(p,
n,e);this._allocated+=g;0===p.count&&(g=null!==p.prev?this._freeHead:p.next,d._removeRange(p),this._freeHead=g);return n};d.prototype.free=function(g,p){var n=this._bookKeeper.findAdjacentRanges(g,p),e=n[0];n=n[1];g={from:g,count:p,prev:e,next:n};null!==e&&(e.next=g);null!==n&&(n.prev=g);this._bookKeeper.rangeCreated(g);this._allocated-=p;if(null!==n&&g.from+g.count===n.from){p=g.from;var k=g.count;d._fuse(g,n);d._removeRange(n);this._bookKeeper.rangeResized(g,p,k);this._bookKeeper.rangeResized(n,
void 0,0)}null!==e&&e.from+e.count===g.from&&(p=e.from,k=e.count,d._fuse(e,g),d._removeRange(g),this._bookKeeper.rangeResized(e,p,k),this._bookKeeper.rangeResized(g,void 0,0));this._freeHead=null!==g.prev?this._freeHead:g};Object.defineProperty(d.prototype,"fragmentation",{get:function(){var g=this._size-this._allocated;return 0===g?0:1-this._bookKeeper.largestRange.count/g},enumerable:!0,configurable:!0});d._removeRange=function(g){null!==g.prev?null!==g.next?(g.prev.next=g.next,g.next.prev=g.prev):
g.prev.next=null:null!==g.next&&(g.next.prev=null)};d._fuse=function(g,p){g.count+=p.count;g.next=p.next;p.from+=p.count;p.count=0;null!==p.next&&(p.next.prev=g)};return d}();h.FreeList=A})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLBuffers":function(){define(["require","exports","./Utils","../../../webgl/BufferObject"],function(A,h,b,d){Object.defineProperty(h,"__esModule",{value:!0});A=function(){function g(p,n){this.geometryMap=b.createGeometryData(n,function(e){return{indexBuffer:d.createIndex(p,
35044),vao:null}},function(e,k){return{vertexBuffer:d.createVertex(p,b.C_VBO_INFO[k])}})}g.prototype.dispose=function(){for(var p in this.geometryMap){var n=this.geometryMap[p];n.data.vao&&n.data.vao.dispose(!1);n.data.indexBuffer&&n.data.indexBuffer.dispose();for(var e in n.buffers)n.buffers[e]&&n.buffers[e].data.vertexBuffer.dispose()}};g.prototype.get=function(p){var n=this.geometryMap[p];p={};for(var e in n.buffers)p[e]=n.buffers[e].data.vertexBuffer;return{indexBuffer:n.data.indexBuffer,get vao(){return n.data.vao},
set vao(k){n.data.vao=k},vertexBufferMap:p}};g.prototype.has=function(p){return null!=this.geometryMap[p]};g.prototype.upload=function(p,n){var e=this;n.forEach(function(k,l){k.indices&&(k.indices.allDirty?e._uploadIndices(p,l):null!=k.indices.from&&null!=k.indices.count&&e._uploadIndices(p,l,k.indices.from,k.indices.count));k.vertices&&k.vertices.forEach(function(m,r){m.allDirty?e._uploadVertices(p,l,r):null!=m.from&&null!=m.count&&e._uploadVertices(p,l,r,m.from,m.count)})})};g.prototype._uploadVertices=
function(p,n,e,k,l){var m=this.geometryMap[n];m&&(n=p.geometries[n].vertexBuffer[e])&&(p=n.stride,n=n.data.buffer,m.buffers[e]&&0<n.byteLength&&(null!=k&&null!=l?m.buffers[e].data.vertexBuffer.setSubData(n,k*p,k*p,(k+l)*p):m.buffers[e].data.vertexBuffer.setData(n)))};g.prototype._uploadIndices=function(p,n,e,k){var l=this.geometryMap[n];l&&(p=p.geometries[n].indexBuffer.buffer,l.data.indexBuffer&&0<p.byteLength&&(null!=e&&null!=k?l.data.indexBuffer.setSubData(p,4*e,4*e,4*(e+k)):l.data.indexBuffer.setData(p)))};
return g}();h.default=A})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(A,h,b){return function(){function d(g,p,n,e){this.set(g,p,n,e)}d.from=function(g,p,n,e){return d.pool.acquire(g,p,n,e)};d.getId=function(g,p,n,e){return"object"===typeof g?g.level+"/"+g.row+"/"+g.col+"/"+g.world:g+"/"+p+"/"+n+"/"+e};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(g){return this.level===g.level&&this.row===g.row&&this.col===g.col&&this.world===g.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(g,p,n,e){null==g?this.world=this.col=this.row=this.level=0:"object"===typeof g?(this.level=g.level||0,this.row=g.row||0,this.col=g.col||0,this.world=g.world||0):"string"===typeof g?(g=g.split("/"),p=g[1],n=g[2],
e=g[3],this.level=parseFloat(g[0]),this.row=parseFloat(p),this.col=parseFloat(n),this.world=parseFloat(e)):(this.level=+g,this.row=+p,this.col=+n,this.world=+e||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var g=this.level+1,p=this.row<<1,n=this.col<<1,e=this.world;return[d.pool.acquire(g,p,n,e),d.pool.acquire(g,p,n+1,e),d.pool.acquire(g,p+1,n,e),d.pool.acquire(g,p+1,n+1,e)]};d.prototype._compare=function(g){return this.row<
g.row?-1:this.row>g.row?1:this.col<g.col?-1:this.col>g.col?1:0};d.sort=function(g){return g.map(function(p){return d.from(p)}).sort(function(p,n){return p._compare(n)}).map(function(p){return p.id})};d.pool=new b(d,!0,null,25,50);return d}()})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../tiling/enums".split(" "),
function(A,h,b,d,g,p,n,e){Object.defineProperty(h,"__esModule",{value:!0});A=function(k){function l(m){m=k.call(this)||this;m.tiles=new Map;m.layer=null;return m}b(l,k);l.prototype.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.highlightOptions=this.configuration=this.tiles=null};Object.defineProperty(l.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0});l.prototype.acquireTile=function(m){var r=this,u=this.createTile(m);
u.once("attach",function(){return r.notifyChange("updating")});this.tiles.set(m.id,u);return u};l.prototype.forEachTile=function(m){this.tiles.forEach(m)};l.prototype.releaseTile=function(m){this.tiles.delete(m.key.id);this.disposeTile(m)};l.prototype.isUpdating=function(){var m=!0;this.tiles.forEach(function(r){m=m&&r.status!==e.TileStatus.INITIALIZED});return!m};l.prototype.requestUpdate=function(){this.layerView.requestUpdate()};d([n.property()],l.prototype,"configuration",void 0);d([n.property()],
l.prototype,"highlightOptions",void 0);d([n.property()],l.prototype,"layer",void 0);d([n.property()],l.prototype,"layerView",void 0);d([n.property()],l.prototype,"tileInfoView",void 0);d([n.property()],l.prototype,"updating",null);return l=d([n.subclass()],l)}(n.declared(g,p));h.default=A})},"esri/layers/vectorTiles/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),
function(A,h,b,d,g,p,n){return function(e){function k(){var l=e.call(this)||this;l.handles=new p;return l}b(k,e);k.prototype.destroy=function(){this.handles.destroy()};d([n.property({readOnly:!0})],k.prototype,"handles",void 0);return k=d([n.subclass("esri.core.HandleOwner")],k)}(n.declared(g))})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(A,h,b,d,g,p,n){return function(e){function k(l){l=e.call(this)||this;l._groups=new Map;return l}b(k,e);k.prototype.destroy=function(){this.removeAll()};Object.defineProperty(k.prototype,"size",{get:function(){var l=0;this._groups.forEach(function(m){l+=m.length});return l},enumerable:!0,configurable:!0});k.prototype.add=function(l,m){if(!this._isHandle(l)&&!Array.isArray(l)&&!p.isCollection(l))return this;var r=this._getOrCreateGroup(m);Array.isArray(l)||p.isCollection(l)?l.forEach(function(u){return r.push(u)}):
r.push(l);this.notifyChange("size");return this};k.prototype.has=function(l){return this._groups.has(this._ensureGroupKey(l))};k.prototype.remove=function(l){if(Array.isArray(l)||p.isCollection(l))return l.forEach(this.remove,this),this;if(!this.has(l))return this;for(var m=this._getGroup(l),r=0;r<m.length;r++)m[r].remove();this._deleteGroup(l);this.notifyChange("size");return this};k.prototype.removeAll=function(){this._groups.forEach(function(l){for(var m=0;m<l.length;m++)l[m].remove()});this._groups.clear();
this.notifyChange("size");return this};k.prototype._isHandle=function(l){return l&&!!l.remove};k.prototype._getOrCreateGroup=function(l){if(this.has(l))return this._getGroup(l);var m=[];this._groups.set(this._ensureGroupKey(l),m);return m};k.prototype._getGroup=function(l){return this._groups.get(this._ensureGroupKey(l))};k.prototype._deleteGroup=function(l){return this._groups.delete(this._ensureGroupKey(l))};k.prototype._ensureGroupKey=function(l){return l||"_default_"};d([n.property({readOnly:!0})],
k.prototype,"size",null);return k=d([n.subclass("esri.core.Handles")],k)}(n.declared(g))})},"esri/layers/vectorTiles/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(A,h,b,d,g,p,n){return function(e){function k(){var l=null!==e&&e.apply(this,arguments)||this;l.color=new g([0,255,255]);l.haloOpacity=
1;l.fillOpacity=.5;return l}b(k,e);d([n.property({type:g})],k.prototype,"color",void 0);d([n.property()],k.prototype,"haloOpacity",void 0);d([n.property()],k.prototype,"fillOpacity",void 0);return k=d([n.subclass("esri.views.2d.support.HighlightOptions")],k)}(n.declared(p))})},"esri/layers/vectorTiles/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w){var B=e({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(C){function y(c){c=C.call(this)||this;c.dpi=96;c.format=null;c.origin=null;c.minScale=0;c.maxScale=0;c.size=null;c.spatialReference=null;return c}d(y,C);var a=y;y.create=function(c){void 0===c&&(c={size:256,spatialReference:p.SpatialReference.WebMercator});
var f=c.resolutionFactor||1,q=c.scales,t=c.size||256;c=c.spatialReference||p.SpatialReference.WebMercator;var x=u.getInfo(c);x=x?new p.Point(x.origin[0],x.origin[1],c):new p.Point(0,0,c);var z=1/(39.37*r.getMetersPerUnitForSR(c)*96),D=[];if(q)for(var F=0;F<q.length;F++){var G=q[F],E=G*z;D.push({level:F,scale:G,resolution:E})}else for(G=u.isGeographic(c)?512/t*1.47748799285417E8:256/t*5.91657527591555E8,q=Math.ceil(24/f),D.push({level:0,scale:G,resolution:G*z}),F=1;F<q;F++)G/=Math.pow(2,f),E=G*z,D.push({level:F,
scale:G,resolution:E});return new a({dpi:96,lods:D,origin:x,size:t,spatialReference:c})};Object.defineProperty(y.prototype,"isWrappable",{get:function(){var c=this.spatialReference,f=this.origin;if(c&&f){var q=u.getInfo(c);return c.isWrappable&&Math.abs(q.origin[0]-f.x)<=q.dx}return!1},enumerable:!0,configurable:!0});y.prototype.readOrigin=function(c,f){return p.Point.fromJSON(b({spatialReference:f.spatialReference},c))};Object.defineProperty(y.prototype,"lods",{set:function(c){var f=this,q=0,t=0,
x=[];this._levelToLOD={};c&&(q=-Infinity,t=Infinity,c.forEach(function(z){x.push(z.scale);q=z.scale>q?z.scale:q;t=z.scale<t?z.scale:t;f._levelToLOD[z.level]=z}));this._set("scales",x);this._set("minScale",q);this._set("maxScale",t);this._set("lods",c);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});y.prototype.readSize=function(c,f){return[f.cols,f.rows]};y.prototype.writeSize=function(c,f){f.cols=c[0];f.rows=c[0]};y.prototype.zoomToScale=function(c){var f=this.scales;if(0>=c)return f[0];
if(c>=f.length)return f[f.length-1];var q=Math.round(c);return f[q]+(q-c)*(f[Math.round(c-.5)]-f[q])};y.prototype.scaleToZoom=function(c){for(var f=this.scales,q=f.length-1,t=0;t<q;t++){var x=f[t],z=f[t+1];if(x<=c)break;if(z===c)return t+1;if(x>c&&z<c)return t+1-(c-z)/(x-z)}return t};y.prototype.snapScale=function(c,f){void 0===f&&(f=.95);c=this.scaleToZoom(c);return c%Math.floor(c)>=f?this.zoomToScale(Math.ceil(c)):this.zoomToScale(Math.floor(c))};y.prototype.tileAt=function(c,f,q,t){var x=this.lodAt(c);
if(!x)return null;if("number"===typeof f){var z=f;f=q}else{if(u.equals(f.spatialReference,this.spatialReference))z=f.x,f=f.y;else{t=v.project(f,this.spatialReference);if(!t)return null;z=t.x;f=t.y}t=q}q=x.resolution*this.size[0];x=x.resolution*this.size[1];t||(t={id:null,level:0,row:0,col:0,extent:m.create()});t.level=c;t.row=Math.floor((this.origin.y-f)/x+.001);t.col=Math.floor((z-this.origin.x)/q+.001);this.updateTileInfo(t);return t};y.prototype.updateTileInfo=function(c){var f=this.lodAt(c.level),
q=f.resolution*this.size[0];f=f.resolution*this.size[1];c.id=c.level+"/"+c.row+"/"+c.col;c.extent||(c.extent=m.create());c.extent[0]=this.origin.x+c.col*q;c.extent[1]=this.origin.y-(c.row+1)*f;c.extent[2]=c.extent[0]+q;c.extent[3]=c.extent[1]+f};y.prototype.upsampleTile=function(c){var f=this._upsampleLevels[c.level];if(!f||-1===f.parentLevel)return!1;c.level=f.parentLevel;c.row=Math.floor(c.row/f.factor+.001);c.col=Math.floor(c.col/f.factor+.001);this.updateTileInfo(c);return!0};y.prototype.getTileBounds=
function(c,f){var q=this.lodAt(f.level).resolution,t=q*this.size[0];q*=this.size[1];c[0]=this.origin.x+f.col*t;c[1]=this.origin.y-(f.row+1)*q;c[2]=c[0]+t;c[3]=c[1]+q;return c};y.prototype.lodAt=function(c){return this._levelToLOD&&this._levelToLOD[c]||null};y.prototype.clone=function(){return a.fromJSON(this.write({}))};y.prototype._initializeUpsampleLevels=function(){var c=this.lods;this._upsampleLevels=[];for(var f=null,q=0;q<c.length;q++){var t=c[q];this._upsampleLevels[t.level]={parentLevel:f?
f.level:-1,factor:f?f.resolution/t.resolution:0};f=t}};g([k.property({type:Number,json:{write:!0}})],y.prototype,"compressionQuality",void 0);g([k.property({type:Number,json:{write:!0}})],y.prototype,"dpi",void 0);g([k.property({type:String,json:{read:B.read,write:B.write}})],y.prototype,"format",void 0);g([k.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],y.prototype,"isWrappable",null);g([k.property({type:p.Point,json:{write:!0}})],y.prototype,"origin",void 0);g([k.reader("origin")],
y.prototype,"readOrigin",null);g([k.property({type:[w],value:null,json:{write:!0}})],y.prototype,"lods",null);g([k.property({readOnly:!0})],y.prototype,"minScale",void 0);g([k.property({readOnly:!0})],y.prototype,"maxScale",void 0);g([k.property({readOnly:!0})],y.prototype,"scales",void 0);g([k.property({cast:function(c){return Array.isArray(c)?c:"number"===typeof c?[c,c]:[256,256]}})],y.prototype,"size",void 0);g([k.reader("size",["rows","cols"])],y.prototype,"readSize",null);g([k.writer("size",
{cols:{type:l.Integer},rows:{type:l.Integer}})],y.prototype,"writeSize",null);g([k.property({type:p.SpatialReference,json:{write:!0}})],y.prototype,"spatialReference",void 0);return y=a=g([k.subclass("esri.layers.support.TileInfo")],y)}(k.declared(n))})},"esri/layers/vectorTiles/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(A,h,b,d,g,p,n){return function(e){function k(m){m=e.call(this,m)||this;m.level=0;m.levelValue=null;m.resolution=0;m.scale=0;return m}b(k,e);var l=k;k.prototype.clone=function(){return new l({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};d([p.property({type:n.Integer,json:{write:!0}})],k.prototype,"level",void 0);d([p.property({type:String,json:{write:!0}})],k.prototype,"levelValue",void 0);d([p.property({type:Number,json:{write:!0}})],k.prototype,
"resolution",void 0);d([p.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=l=d([p.subclass("esri.layers.support.LOD")],k)}(p.declared(g))})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(A,h,b,d,g,p,n){var e=new p("0/0/0/0"),k=function(){function m(r,u,v,w,B,C,y,a){this.x=r;this.ymin=u;this.ymax=v;this.invM=w;this.leftAdjust=
B;this.rightAdjust=C;this.leftBound=y;this.rightBound=a}m.create=function(r,u){if(r[1]>u[1]){var v=[u,r];r=v[0];u=v[1]}v=r[0];r=r[1];var w=u[0];u=u[1];var B=w-v,C=u-r;C=0!==C?B/C:0;var y=(Math.ceil(r)-r)*C,a=(Math.floor(r)-r)*C;return new m(v,Math.floor(r),Math.ceil(u),C,0>B?y:a,0>B?a:y,0>B?w:v,0>B?v:w)};m.prototype.incrRow=function(){this.x+=this.invM};m.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};m.prototype.getRightCol=function(){return Math.min(this.x+
this.rightAdjust,this.rightBound)};return m}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function m(r,u){var v=this;this.tileInfo=r;this.fullExtent=u;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var w=r.lods.slice();w.sort(function(C,y){return y.scale-C.scale});var B=this._lodInfos=w.map(function(C){return d.create(r,C,u)});w.forEach(function(C,y){v._infoByLevel[C.level]=B[y];v._infoByScale[C.scale]=B[y];v.scales[y]=C.scale},this);this._wrap=r.isWrappable}m.prototype.getLODInfoAt=
function(r){return this._infoByLevel[r.level]};m.prototype.getTileBounds=function(r,u,v){void 0===v&&(v=!1);e.set(u);return(u=this._infoByLevel[e.level])?u.getTileBounds(r,e,v):r};m.prototype.getTileCoords=function(r,u,v){void 0===v&&(v=!1);e.set(u);return(u=this._infoByLevel[e.level])?u.getTileCoords(r,e,v):r};m.prototype.getTileCoverage=function(r,u,v){void 0===u&&(u=192);void 0===v&&(v="closest");v="closest"===v?this.getClosestInfoForScale(r.scale):this.getSmallestInfoForScale(r.scale);var w=g.pool.acquire(v),
B=this._wrap;var C=Infinity;var y=-Infinity,a=w.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-u;l[1][0]=l[2][0]=r.size[0]+u;l[2][1]=l[3][1]=r.size[1]+u;for(u=0;u<l.length;u++){var c=l[u];r.toMap(c,c);c[0]=v.getColumnForX(c[0]);c[1]=v.getRowForY(c[1])}r=[];c=3;for(u=0;4>u;u++){if(l[u][1]!==l[c][1]){var f=k.create(l[u],l[c]);C=Math.min(f.ymin,C);y=Math.max(f.ymax,y);void 0===r[f.ymin]&&(r[f.ymin]=[]);r[f.ymin].push(f)}c=u}if(null==C||null==y||100<y-C)return null;for(c=[];C<y;){null!=r[C]&&(c=c.concat(r[C]));
var q=Infinity;var t=-Infinity;for(u=c.length-1;0<=u;u--)f=c[u],q=Math.min(q,f.getLeftCol()),t=Math.max(t,f.getRightCol());q=Math.floor(q);t=Math.floor(t);if(C>=v.first[1]&&C<=v.last[1])if(B)if(v.size[0]<v.worldSize[0])for(f=Math.floor(t/v.worldSize[0]),u=Math.floor(q/v.worldSize[0]);u<=f;u++)a.push(new n(C,Math.max(v.getFirstColumnForWorld(u),q),Math.min(v.getLastColumnForWorld(u),t)));else a.push(new n(C,q,t));else q>v.last[0]||t<v.first[0]||(q=Math.max(q,v.first[0]),t=Math.min(t,v.last[0]),a.push(new n(C,
q,t)));C+=1;for(u=c.length-1;0<=u;u--)f=c[u],f.ymax>=C?f.incrRow():c.splice(u,1)}return w};m.prototype.getTileIdAtParent=function(r,u){u=p.pool.acquire(u);var v=this._infoByLevel[u.level];if(r.resolution<v.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+r.resolution+" is not a parent resolution of "+v.resolution);return r.resolution===v.resolution?u.id:p.getId(r.level,Math.floor(u.row*v.resolution/r.resolution+.01),Math.floor(u.col*v.resolution/r.resolution+.01),
u.world)};m.prototype.getTileParentId=function(r){r=p.pool.acquire(r);var u=this._lodInfos.indexOf(this._infoByLevel[r.level])-1;if(0>u)return p.pool.release(r),null;u=this.getTileIdAtParent(this._lodInfos[u],r);p.pool.release(r);return u};m.prototype.getTileResolution=function(r){return(r=this._infoByLevel[r.level])?r.resolution:-1};m.prototype.getTileScale=function(r){return(r=this._infoByLevel[r.level])?r.scale:-1};m.prototype.intersects=function(r,u){var v=p.pool.acquire(u);u=this._infoByLevel[v.level];
var w=r.lodInfo;if(w.resolution>u.resolution){var B=p.pool.acquire(this.getTileIdAtParent(w,v)),C=w.denormalizeCol(B.col,B.world);u=r.spans.some(function(z){return z.row===B.row&&z.colFrom<=C&&z.colTo>=C});p.pool.release(v);p.pool.release(B);return u}if(w.resolution<u.resolution){var y=r.spans.reduce(function(z,D){z[0]=Math.min(z[0],D.row);z[1]=Math.max(z[1],D.row);z[2]=Math.min(z[2],D.colFrom);z[3]=Math.max(z[3],D.colTo);return z},[Infinity,-Infinity,Infinity,-Infinity]);r=y[0];var a=y[1],c=y[2];
y=y[3];var f=u.denormalizeCol(v.col,v.world),q=w.getColumnForX(u.getXForColumn(f)),t=w.getRowForY(u.getYForRow(v.row));f=w.getColumnForX(u.getXForColumn(f+1))-1;u=w.getRowForY(u.getYForRow(v.row+1))-1;p.pool.release(v);return!(q>y||f<c||t>a||u<r)}var x=w.denormalizeCol(v.col,v.world);u=r.spans.some(function(z){return z.row===v.row&&z.colFrom<=x&&z.colTo>=x});p.pool.release(v);return u};m.prototype.normalizeBounds=function(r,u,v){r[0]=u[0];r[1]=u[1];r[2]=u[2];r[3]=u[3];this._wrap&&(u=b.getInfo(this.tileInfo.spatialReference),
v=-v*(u.valid[1]-u.valid[0]),r[0]+=v,r[2]+=v);return r};m.prototype.getSmallestInfoForScale=function(r){var u=this.scales;if(this._infoByScale[r])return this._infoByScale[r];if(r>u[0])return this._infoByScale[u[0]];for(var v=1;v<u.length-1;v++)if(r>u[v]+1E-6)return this._infoByScale[u[v-1]];return this._infoByScale[u[u.length-1]]};m.prototype.getClosestInfoForScale=function(r){var u=this.scales;this._infoByScale[r]||(r=u.reduce(function(v,w,B,C){return Math.abs(w-r)<Math.abs(v-r)?w:v},u[0]));return this._infoByScale[r]};
return m}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(A,h,b,d){function g(n,e,k){n[0]=e;n[1]=k;return n}var p=new d("0/0/0/0");return function(){function n(e,k,l,m,r,u,v,w,B,C,y,a){this.level=e;this.resolution=k;this.scale=l;this.origin=m;this.first=r;this.last=u;this.size=v;this.norm=w;this.worldStart=B;this.worldEnd=C;this.worldSize=y;this.wrap=a}n.create=function(e,k,l){var m=
b.getInfo(e.spatialReference),r=[e.origin.x,e.origin.y],u=[e.size[0]*k.resolution,e.size[1]*k.resolution],v=[-Infinity,-Infinity],w=[Infinity,Infinity],B=[Infinity,Infinity];l&&(g(v,Math.max(0,Math.floor((l.xmin-r[0])/u[0])),Math.max(0,Math.floor((r[1]-l.ymax)/u[1]))),g(w,Math.max(0,Math.floor((l.xmax-r[0])/u[0])),Math.max(0,Math.floor((r[1]-l.ymin)/u[1]))),g(B,w[0]-v[0]+1,w[1]-v[1]+1));if(e.isWrappable){e=[Math.ceil(Math.round(2*m.origin[1]/k.resolution)/e.size[0]),B[1]];m=[Math.floor((m.origin[0]-
r[0])/u[0]),v[1]];l=[e[0]+m[0]-1,w[1]];var C=!0}else m=v,l=w,e=B,C=!1;return new n(k.level,k.resolution,k.scale,r,v,w,B,u,m,l,e,C)};n.prototype.normalizeCol=function(e){if(!this.wrap)return e;var k=this.worldSize[0];return 0>e?k-1-Math.abs((e+1)%k):e%k};n.prototype.denormalizeCol=function(e,k){return this.wrap?this.worldSize[0]*k+e:e};n.prototype.getWorldForColumn=function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0};n.prototype.getFirstColumnForWorld=function(e){return e*this.worldSize[0]+
this.first[0]};n.prototype.getLastColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1};n.prototype.getColumnForX=function(e){return(e-this.origin[0])/this.norm[0]};n.prototype.getXForColumn=function(e){return this.origin[0]+e*this.norm[0]};n.prototype.getRowForY=function(e){return(this.origin[1]-e)/this.norm[1]};n.prototype.getYForRow=function(e){return this.origin[1]-e*this.norm[1]};n.prototype.getTileBounds=function(e,k,l){void 0===l&&(l=!1);p.set(k);var m=l?p.col:
this.denormalizeCol(p.col,p.world),r=p.row;k=this.getXForColumn(m);l=this.getYForRow(r+1);m=this.getXForColumn(m+1);r=this.getYForRow(r);e[0]=k;e[1]=l;e[2]=m;e[3]=r;return e};n.prototype.getTileCoords=function(e,k,l){void 0===l&&(l=!1);p.set(k);k=l?p.col:this.denormalizeCol(p.col,p.world);Array.isArray(e)?g(e,this.getXForColumn(k),this.getYForRow(p.row)):(e.x=this.getXForColumn(k),e.y=this.getYForRow(p.row));return e};return n}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require",
"exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(A,h,b,d,g){return function(){function p(n){this.lodInfo=n;this.spans=b.acquire()}p.prototype.release=function(){for(var n=0,e=this.spans;n<e.length;n++)g.pool.release(e[n]);b.release(this.spans)};p.prototype.forEach=function(n,e){var k=this.spans,l=this.lodInfo,m=l.level;if(0!==k.length)for(var r=0;r<k.length;r++){var u=k[r],v=u.row,w=u.colTo;for(u=u.colFrom;u<=w;u++)n.call(e,m,v,l.normalizeCol(u),l.getWorldForColumn(u))}};
p.pool=new d(p,!0);return p}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(A,h,b){return function(){function d(g,p,n){this.row=g;this.colFrom=p;this.colTo=n}d.pool=new b(d,!0);return d}()})},"esri/layers/OnDemandDrillMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ../sniff ../kernel ../promiseList ./RenderMode ../geometry/Extent ../geometry/jsonUtils ../tasks/query ../tasks/FeatureSet ../tasks/support/pbfDeps ./vectorTiles/core/promiseUtils ./vectorTiles/core/SetPool ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey".split(" "),
function(A,h,b,d,g,p,n,e,k,l,m,r,u,v,w,B,C){var y=r.pbfQueryUtils,a=r.optimizedFeatures;r=d("esri-featurelayer-webgl");A=A([n],{declaredClass:"esri.layers._OnDemandDrillMode",featureLayer:null,graphics:null,maxDrillLevel:r&&r.maxDrillLevel,maxRecordCountFactor:r&&r.maxRecordCountFactor,enablePBFQuery:r&&r.enablePBFQuery,_graphicsVal:null,_reEvalGraphics:!1,_featureMap:null,_quantizationFactor:1,_wglRenderer:null,_tileInfo:null,_tileInfoView:null,_tileFetchQueue:null,_tileStrategy:null,_tileRequests:null,
constructor:function(c){this._graphicsVal=[];this._featureMap={};this.featureLayer=c},initialize:function(c){this.inherited(arguments);this._tileRequests=new Map},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var c=this.featureLayer;this._wglRenderer=c._div;this._tileInfo=this._wglRenderer._tileInfo;this._tileInfoView=this._wglRenderer._tileInfoView;this._tileRenderer=this._wglRenderer._tileRenderer;this._tileFetchQueue=new w({tileInfoView:this._tileInfoView,
process:this._getFeatureSet.bind(this)});this._tileStrategy=new B({cachePolicy:"purge",buffer:0,acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._isSuspendedAtStartup=c.suspended;this.start()}},propertyChangeHandler:function(c){this._init&&(2>c?this.start():console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d "+this.featureLayer.id+", Layer URL \x3d "+this.featureLayer.url))},destroy:function(){this._tileFetchQueue&&
this._tileFetchQueue.clear();this._tileStrategy&&this._tileStrategy.destroy();this._tileRequests&&this._tileRequests.clear();this.inherited(arguments)},update:function(c){this._tileFetchQueue.pause();this._tileFetchQueue.state=c.state;c=this._tileStrategy.update(c);this._tileFetchQueue.resume();c?this.featureLayer._fireUpdateEnd():this.featureLayer._fireUpdateStart()},suspend:function(){this._init&&this.stop()},resume:function(){this._init&&this.start()},refresh:function(){this.start()},hasAllFeatures:function(){var c=
!1;this._getVisibleTileRequests().forEach(function(f){f.hasPartialFeatures&&(c=!0)});return!c},hasUpdateError:function(){var c=!1;this._getVisibleTileRequests().forEach(function(f){f.hasUpdateError&&(c=!0)});return c},start:function(){var c=this.featureLayer;!c.suspended&&c.isQueryable()&&(this._clearIIf(),this._tileFetchQueue.pause(),this._tileFetchQueue.clear(),this._tileStrategy.clear(),this._wglRenderer.start())},stop:function(){this._wglRenderer.stop()},_getVisibleTileRequests:function(){var c=
this._tileStrategy.tileIndex;if(!c)return[];var f=[];this._tileRequests.forEach(function(q,t){(t=c.get(t))&&t.visible&&f.push(q)});return f},_acquireTile:function(c){this.featureLayer._fireUpdateStart();var f=this._acquireRendererTile(c),q=f.key,t=q.id;c=this._tileInfo.lodAt(c.level);var x={id:t,key:q,bounds:this._tileInfo.getTileBounds([0,0,0,0],q),resolution:c.resolution,scale:c.scale};q=this._tileFetchQueue.push(q).then(function(z){return this._wglRenderer._symbolProcessor.getMeshData(x,z.featureSet).then(function(D){return{meshData:D.data,
featureSet:z.featureSet,errors:z.errors,hasPartialFeatures:z.hasPartialFeatures}})}.bind(this)).then(function(z){this._tileRenderer.onTileData({tileKey:t,data:z.meshData});this._addTile(t,z)}.bind(this)).otherwise(function(z){this._tileRenderer.onTileData({tileKey:t,data:null});this._tileError(t);return u.reject(z)}.bind(this));this._tileRequests.set(t,{tsTile:x,request:q,isFulfilled:!1,hasUpdateError:null,hasPartialFeatures:null,featureSet:null,graphics:[]});return f},_acquireRendererTile:function(c){c=
this._tileRenderer.acquireTile(c);c.once("attach",function(){this._wglRenderer._scheduleUpdate()}.bind(this));return c},_releaseTile:function(c){this.featureLayer._fireUpdateStart();this._tileRequests.get(c.key.id)&&(this._removeTile(c),this._wglRenderer._scheduleUpdate())},_addTile:function(c,f){this._reEvalGraphics=!0;var q=this._createGraphics(f.featureSet);this._registerGraphics(q);if(c=this._tileRequests.get(c))c.isFulfilled=!0,c.hasUpdateError=!!f.errors.length,c.hasPartialFeatures=f.hasPartialFeatures||
c.hasUpdateError,c.featureSet=f.featureSet,c.graphics=q},_tileError:function(c){if(c=this._tileRequests.get(c))c.isFulfilled=!0,c.hasUpdateError=!0,c.hasPartialFeatures=!0,c.graphics=[];this._wglRenderer._scheduleUpdate()},_removeTile:function(c){var f=c.key.id,q=this._tileRequests.get(f);q.request.isFulfilled()||q.request.cancel();this._tileRequests["delete"](f);this._wglRenderer._cancelRedraw(f);this._reEvalGraphics=!0;this._tileRenderer.releaseTile(c);this._unregisterGraphics(q.graphics)},_getFeatureSet:function(c){var f=
{hashes:new Set,drill:[],featureSet:{features:[],geometryType:this.featureLayer.geometryType,spatialReference:this.map.spatialReference.toJson(),transform:null},hasPartialFeatures:!1,errors:[]},q=this.featureLayer._task,t=this._getResolutionParams(c),x=this._tileInfoView.getTileBounds([0,0,0,0],c);x=this._expandTileBounds(x,t);var z=v.acquire();return this._drillQuery(f,z,q,x,t,null,c).then(function(D){v.release(z);this._calculateCentroid(D);return D}.bind(this)).otherwise(function(D){v.release(z);
throw D;})},_getResolutionParams:function(c){this._tileInfo.updateTileInfo(c);var f=this._tileInfo.lodAt(c.level);return{mode:"view",originPosition:"upperLeft",tolerance:this._quantizationFactor*f.resolution,extent:new e(c.extent[0],c.extent[1],c.extent[2],c.extent[3],this.map.spatialReference)}},_expandTileBounds:function(c,f){var q=this.featureLayer.geometryType;f=("esriGeometryPoint"===q||"esriGeometryMultipoint"===q||this._wglRenderer._returnCentroid?20:0)*f.tolerance;c[0]-=f;c[1]-=f;c[2]+=f;
c[3]+=f;return c},_calculateCentroid:function(c){if("esriGeometryPolygon"===c.featureSet.geometryType&&this._wglRenderer._returnCentroid){var f=0;var q=c.featureSet.spatialReference,t=c.featureSet.transform,x={geometry:{x:null,y:null}},z=[x];c.featureSet.features.forEach(function(D){if(!D.centroid){var F=D.geometry;F&&(F=m.createPolygon(F,q,t),F=F.getCentroid())&&(x.geometry.x=F.x,x.geometry.y=F.y,k.quantize(z,"esriGeometryPoint",t),D.centroid={x:x.geometry.x,y:x.geometry.y},f++)}})}return f},_drillQuery:function(c,
f,q,t,x,z,D,F){F=null!=F?F:0;c.drill.push(t);return this._query(q,t,x,z,D,F).then(function(G){this.featureLayer.supportsFormatPBF&&this.enablePBFQuery&&(G=a.convertToFeatureSet(y.parsePBFFeatureQuery(G)));this._appendFeatures(c.featureSet.features,f,G.features);G.transform&&(c.featureSet.transform=G.transform);if(G.exceededTransferLimit){if(F<this.maxDrillLevel){F++;G=(t[2]-t[0])/2;var E=(t[3]-t[1])/2,H=[t[0]+G,t[1]+E,t[2],t[3]],O=[t[0],t[1],t[2]-G,t[3]-E],K=[t[0]+G,t[1],t[2],t[3]-E];return p([this._drillQuery(c,
f,q,[t[0],t[1]+E,t[2]-G,t[3]],x,z,D,F),this._drillQuery(c,f,q,H,x,z,D,F),this._drillQuery(c,f,q,O,x,z,D,F),this._drillQuery(c,f,q,K,x,z,D,F)]).then(function(){return c})}c.hasPartialFeatures=!0}return c}.bind(this)).otherwise(function(G){if(0<F)c.errors.push(G);else throw G;}.bind(this))},_appendFeatures:function(c,f,q){var t=c.length,x=q?q.length:0;c.length=t+x;var z=0,D,F=this.featureLayer.objectIdField;for(D=0;D<x;D++){var G=q[D];var E=G.attributes[F];f.has(E)||(c[t+z]=G,f.add(E),z++)}c.length-=
x-z},_query:function(c,f,q,t,x,z){t=this.featureLayer;x=new l;var D=t.getOutFields();.75<=D.length/t.fields.length&&(D=["*"]);x.geometry=new e(f[0],f[1],f[2],f[3],this.map.spatialReference);x.outFields=D;x.where=t._getAttributeFilter();x.returnGeometry=!0;x.returnCentroid=this._wglRenderer._returnCentroid;x.timeExtent=t._getOffsettedTE(t._mapTimeExtent);t._ts&&(x._ts=Date.now());x.orderByFields=t.supportsAdvancedQueries?t.getOrderByFields():null;x.multipatchOption=t.multipatchOption;x.maxAllowableOffset=
"esriGeometryPolyline"===t.geometryType?q.tolerance:null;x.quantizationParameters=q;(f=t.advancedQueryCapabilities)&&f.supportsQueryWithResultType&&(x.resultType="tile");x.returnExceededLimitFeatures=z===this.maxDrillLevel;f&&f.supportsMaxRecordCountFactor&&(x.maxRecordCountFactor=this.maxRecordCountFactor);return this._wrapInNewDeferred(c.rawExecute(x,t.supportsFormatPBF&&this.enablePBFQuery?{format:"pbf"}:null))},_wrapInNewDeferred:function(c){var f=new b(function(){c.isFulfilled()||c.cancel()});
c.then(function(q){f.resolve(q)}).otherwise(function(q){f.reject(q)});return f.promise},_collectGraphics:function(){var c=this._featureMap,f=[],q;for(q in c)f.push(c[q]);return f},_createGraphics:function(c){return m.createGraphics(c)},_registerGraphics:function(c){var f=this.featureLayer.objectIdField;c.forEach(function(q){var t=q.attributes&&q.attributes[f];this._registerFeature(t,q);this._incRefCount(t)}.bind(this))},_unregisterGraphics:function(c){var f=this.featureLayer.objectIdField;c.forEach(function(q){q=
q.attributes&&q.attributes[f];this._decRefCount(q);this._unregisterFeature(q)}.bind(this))}});Object.defineProperty(A.prototype,"graphics",{get:function(){this._reEvalGraphics&&(this._reEvalGraphics=!1,this._graphicsVal=this._collectGraphics());return this._graphicsVal}});d("extend-esri")&&h.setObject("layers._OnDemandDrillMode",A,g);return A})},"esri/tasks/support/pbfDeps":function(){define(["../../layers/vectorTiles/tasks/operations/pbfQueryUtils","../../layers/vectorTiles/layers/graphics/optimizedFeatures"],
function(A,h){return{pbfQueryUtils:A,optimizedFeatures:h}})},"esri/layers/vectorTiles/tasks/operations/pbfQueryUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ../../layers/graphics/optimizedFeatures".split(" "),function(A,h,b,d,g,p){function n(f){if(f>=a.length){var q=new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload. Unknown GeometryType");B.error(q)}return a[f]}function e(f){var q,t=q||(q={});t[t.STRING=1]="STRING";t[t.FLOAT=2]="FLOAT";
t[t.DOUBLE=3]="DOUBLE";t[t.SINT32=4]="SINT32";t[t.UINT32=5]="UINT32";t[t.INT64=6]="INT64";t[t.UINT64=7]="UINT64";t[t.SINT64=8]="SINT64";for(t[t.BOOL=9]="BOOL";f.next();)switch(f.tag()){case q.STRING:return f.getString();case q.FLOAT:return f.getFloat();case q.DOUBLE:return f.getDouble();case q.SINT32:return f.getSInt32();case q.UINT32:return f.getUInt32();case q.INT64:return f.getInt64();case q.UINT64:return f.getUInt64();case q.SINT64:return f.getSInt64();case q.BOOL:return f.getBool();default:return f.skip(),
null}return null}function k(f){var q,t=q||(q={});t[t.NAME=1]="NAME";t[t.TYPE=2]="TYPE";t[t.ALIAS=3]="ALIAS";t[t.SQL_TYPE=4]="SQL_TYPE";t[t.DOMAIN=5]="DOMAIN";t[t.DEFAULT_VALUE=6]="DEFAULT_VALUE";for(t={type:C[0]};f.next();)switch(f.tag()){case q.NAME:t.name=f.getString();break;case q.TYPE:t.type=C[f.getEnum()];break;case q.ALIAS:t.alias=f.getString();break;case q.SQL_TYPE:t.sqlType=y[f.getEnum()];break;case q.DOMAIN:f.skip();break;case q.DEFAULT_VALUE:f.skip();break;default:f.skip()}return t}function l(f,
q){var t,x=t||(t={});x[x.ATTRIBUTES=1]="ATTRIBUTES";x[x.GEOMETRY=2]="GEOMETRY";x[x.CENTROID=4]="CENTROID";x=new p.OptimizedFeature;for(var z=0;f.next();)switch(f.tag()){case t.ATTRIBUTES:var D=f.getMessage(),F=q[z++].name;x.attributes[F]=e(D);break;case t.GEOMETRY:D=void 0;F=f.getMessage();var G=D||(D={});G[G.TYPE=1]="TYPE";G[G.LENGTHS=2]="LENGTHS";G[G.COORDS=3]="COORDS";G=new p.OptimizedGeometry;for(var E=G.coords,H=G.lengths;F.next();)switch(F.tag()){case D.LENGTHS:var O=F.getUInt32();for(O=F.pos()+
O;F.pos()<O;)H.push(F.getUInt32());break;case D.COORDS:O=F.getUInt32();O=F.pos()+O;for(var K=0;F.pos()<O;)E[K++]=F.getSInt64();break;default:F.skip()}x.geometry=G;break;case t.CENTROID:D=void 0;F=f.getMessage();G=D||(D={});G[G.TYPE=1]="TYPE";G[G.LENGTHS=2]="LENGTHS";G[G.COORDS=3]="COORDS";G=new p.OptimizedGeometry;for(E=G.coords;F.next();)switch(F.tag()){case D.COORDS:H=F.getUInt32();H=F.pos()+H;for(O=0;F.pos()<H;)E[O++]=F.getSInt64();break;default:F.skip()}x.centroid=G;break;default:f.skip()}return x}
function m(f){var q,t=q||(q={});t[t.X=1]="X";t[t.Y=2]="Y";t[t.M=3]="M";t[t.Z=4]="Z";for(t=[0,0];f.next();)switch(f.tag()){case q.X:t[0]=f.getDouble();break;case q.Y:t[1]=f.getDouble();break;case q.M:t.push(f.getDouble());break;case q.Z:t.push(f.getDouble());break;default:f.skip()}return t}function r(f){var q,t=q||(q={});t[t.X=1]="X";t[t.Y=2]="Y";t[t.M=3]="M";t[t.Z=4]="Z";for(t=[0,0];f.next();)switch(f.tag()){case q.X:t[0]=f.getDouble();break;case q.Y:t[1]=f.getDouble();break;case q.M:t.push(f.getDouble());
break;case q.Z:t.push(f.getDouble());break;default:f.skip()}return t}function u(f){var q,t=q||(q={});t[t.ORIGIN_POSTION=1]="ORIGIN_POSTION";t[t.SCALE=2]="SCALE";t[t.TRANSLATE=3]="TRANSLATE";t=c[0];for(var x,z;f.next();)switch(f.tag()){case q.ORIGIN_POSTION:t=c[f.getEnum()];break;case q.SCALE:x=m(f.getMessage());break;case q.TRANSLATE:z=r(f.getMessage());break;default:f.skip()}return{originPosition:t,scale:x,translate:z}}function v(f){var q,t=q||(q={});t[t.AREA_FIELD_NAME=1]="AREA_FIELD_NAME";t[t.LENGTH_FIELD_NAME=
2]="LENGTH_FIELD_NAME";t[t.UNITS=3]="UNITS";for(t={};f.next();)switch(f.tag()){case q.AREA_FIELD_NAME:t.shapeAreaFieldName=f.getString();break;case q.LENGTH_FIELD_NAME:t.shapeLengthFieldName=f.getString();break;case q.UNITS:t.units=f.getString();break;default:f.skip()}return t}function w(f){var q,t=q||(q={});t[t.WKID=1]="WKID";t[t.LASTEST_WKID=2]="LASTEST_WKID";t[t.VCS_WKID=3]="VCS_WKID";t[t.LATEST_VCS_WKID=4]="LATEST_VCS_WKID";t[t.WKT=5]="WKT";for(t={};f.next();)switch(f.tag()){case q.WKID:t.wkid=
f.getUInt32();break;case q.WKT:t.wkt=f.getString();break;default:f.skip()}return t}Object.defineProperty(h,"__esModule",{value:!0});var B=d.getLogger("esri.tasks.operations.pbfQueryUtils"),C="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),y="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
a=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],c=["upperLeft","lowerLeft"];h.parsePBFFeatureQuery=function(f){try{var q,t=q||(q={});t[t.QUERY_RESULT=2]="QUERY_RESULT";for(var x=new g(new Uint8Array(f),new DataView(f)),z;x.next();)switch(x.tag()){case q.QUERY_RESULT:f=void 0;var D=x.getMessage(),F=f||(f={});F[F.FEATURE_RESULT=1]="FEATURE_RESULT";for(t={};D.next();)switch(D.tag()){case f.FEATURE_RESULT:var G=void 0,E=D.getMessage(),H=G||(G={});H[H.OBJECT_ID_NAME=
1]="OBJECT_ID_NAME";H[H.UNIQUE_ID_NAME=2]="UNIQUE_ID_NAME";H[H.GLOBAL_ID_NAME=3]="GLOBAL_ID_NAME";H[H.GEOHASH_NAME=4]="GEOHASH_NAME";H[H.GEOMETRY_PROPERTIES=5]="GEOMETRY_PROPERTIES";H[H.SERVER_GENS=6]="SERVER_GENS";H[H.GEOMETRY_TYPE=7]="GEOMETRY_TYPE";H[H.SPATIAL_REFERENCE=8]="SPATIAL_REFERENCE";H[H.EXCEEDED_TRANSFER_LIMIT=9]="EXCEEDED_TRANSFER_LIMIT";H[H.HAS_Z=10]="HAS_Z";H[H.HAS_M=11]="HAS_M";H[H.TRANSFORM=12]="TRANSFORM";H[H.FIELDS=13]="FIELDS";H[H.FEATURES=15]="FEATURES";var O=new p.OptimizedFeatureSet;
for(O.geometryType=n(0);E.next();)switch(E.tag()){case G.OBJECT_ID_NAME:O.objectIdFieldName=E.getString();break;case G.GLOBAL_ID_NAME:O.globalIdFieldName=E.getString();break;case G.GEOHASH_NAME:O.geohashFieldName=E.getString();break;case G.GEOMETRY_PROPERTIES:O.geometryProperties=v(E.getMessage());break;case G.GEOMETRY_TYPE:O.geometryType=n(E.getEnum());break;case G.SPATIAL_REFERENCE:O.spatialReference=w(E.getMessage());break;case G.HAS_Z:O.hasZ=E.getBool();break;case G.HAS_M:O.hasM=E.getBool();break;
case G.TRANSFORM:var K=E.getMessage();O.transform=u(K);break;case G.EXCEEDED_TRANSFER_LIMIT:var L=E.getBool();O.exceededTransferLimit=L;break;case G.FIELDS:var T=E.getMessage();O.fields.push(k(T));break;case G.FEATURES:var P=E.getMessage();O.features.push(l(P,O.fields));break;default:E.skip()}var Q=O;t.featureResult=Q;break;default:D.skip()}z=t;break;default:x.skip()}return z.featureResult}catch(J){return q=new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:J}),B.error(q),
new p.OptimizedFeatureSet}}})},"esri/layers/vectorTiles/layers/graphics/optimizedFeatures":function(){define(["require","exports","../../core/Error","../../core/Logger"],function(A,h,b,d){function g(J,R){return Math.round((R-J.translate[0])/J.scale[0])}function p(J,R){return Math.round((J.translate[1]-R)/J.scale[1])}function n(J,R){return R*J.scale[0]+J.translate[0]}function e(J,R){return J.translate[1]-R*J.scale[1]}function k(J){J=J.coords;return{x:J[0],y:J[1]}}function l(J){var R=new P;R.coords[0]=
J.x;R.coords[1]=J.y;return R}function m(J){J=J.coords;return{x:J[0],y:J[1],z:J[2]}}function r(J){var R=new P;R.coords[0]=J.x;R.coords[1]=J.y;R.coords[2]=J.z;return R}function u(J){J=J.coords;return{x:J[0],y:J[1],m:J[2]}}function v(J){var R=new P;R.coords[0]=J.x;R.coords[1]=J.y;R.coords[2]=J.m;return R}function w(J){J=J.coords;return{x:J[0],y:J[1],z:J[2],m:J[3]}}function B(J){var R=new P;R.coords[0]=J.x;R.coords[1]=J.y;R.coords[2]=J.z;R.coords[3]=J.m;return R}function C(J,R,I){for(var S=R?I?4:3:I?
3:2,U=[],V=0;V<J.coords.length;V+=S){for(var W=[],X=0;X<S;X++)W.push(J.coords[V+X]);U.push(W)}return R?I?{points:U,hasZ:R,hasM:I}:{points:U,hasZ:R}:I?{points:U,hasM:I}:{points:U}}function y(J,R,I){var S=R?I?4:3:I?3:2,U=J.coords,V=[],W=0,X=0;for(J=J.lengths;X<J.length;X++){for(var Y=J[X],da=[],aa=0;aa<Y;aa++){for(var ba=[],fa=0;fa<S;fa++)ba.push(U[W++]);da.push(ba)}V.push(da)}return R?I?{paths:V,hasZ:R,hasM:I}:{paths:V,hasZ:R}:I?{paths:V,hasM:I}:{paths:V}}function a(J,R,I){var S=R?I?4:3:I?3:2,U=J.coords,
V=[],W=0,X=0;for(J=J.lengths;X<J.length;X++){for(var Y=J[X],da=[],aa=0;aa<Y;aa++){for(var ba=[],fa=0;fa<S;fa++)ba.push(U[W++]);da.push(ba)}V.push(da)}return R?I?{rings:V,hasZ:R,hasM:I}:{rings:V,hasZ:R}:I?{rings:V,hasM:I}:{rings:V}}function c(J,R,I,S){if(!R)return[];switch(R){case "esriGeometryPoint":R=l;S&&I?R=B:S?R=r:I&&(R=v);I=[];for(S=0;S<J.length;S++){var U=J[S],V=U.geometry;U=U.attributes;V=V?R(V):void 0;I.push(new Q(V,U))}return I;case "esriGeometryMultipoint":R=I?S?4:3:S?3:2;I=[];for(S=0;S<
J.length;S++){V=J[S];var W=V.geometry;V=V.attributes;U=void 0;if(W){U=new P;U.lengths[0]=W.points.length;var X=U.coords,Y=0,da=0;for(W=W.points;da<W.length;da++)for(var aa=W[da],ba=0;ba<R;ba++)X[Y++]=aa[ba]}I.push(new Q(U,V))}return I;case "esriGeometryPolyline":R=I?S?4:3:S?3:2;I=[];for(S=0;S<J.length;S++){V=J[S];aa=V.geometry;V=V.attributes;U=void 0;if(aa)for(U=new P,X=U.lengths,Y=U.coords,W=da=0,aa=aa.paths;W<aa.length;W++){ba=aa[W];for(var fa=0,ka=ba;fa<ka.length;fa++)for(var oa=ka[fa],sa=0;sa<
R;sa++)Y[da++]=oa[sa];X.push(ba.length)}I.push(new Q(U,V))}return I;case "esriGeometryPolygon":R=I?S?4:3:S?3:2;I=[];for(S=0;S<J.length;S++){U=J[S];ba=U.geometry;V=U.centroid;U=U.attributes;X=void 0;if(ba)for(X=new P,Y=X.lengths,da=X.coords,aa=W=0,ba=ba.rings;aa<ba.length;aa++){fa=ba[aa];ka=0;for(oa=fa;ka<oa.length;ka++){sa=oa[ka];for(var ta=0;ta<R;ta++)da[W++]=sa[ta]}Y.push(fa.length)}V?I.push(new Q(X,U,l(V))):I.push(new Q(X,U))}return I;default:return E.error("convertToFeatureSet:unknown-geometry",
new b("Unable to parse unknown geometry type "+R)),[]}}function f(J,R,I,S,U,V){U=H[U];var W=R.coords;R=R.lengths;var X=I?S?4:3:S?3:2;I=I?S?L:K:S?K:O;J.lengths.length=0;J.coords.length=0;if(!W.length)return J;if(!R.length)return I(J.coords,W,0,0,g(V,W[0]),p(V,W[1])),J.lengths.length=0,J.coords.length=X,J;for(var Y,da,aa,ba=0,fa,ka=0,oa=0;oa<R.length;oa++){var sa=R[oa];if(!(sa<U)){var ta=0;fa=ka;da=S=g(V,W[ba]);aa=Y=p(V,W[ba+1]);I(J.coords,W,fa,ba,da,aa);ta++;ba+=X;fa+=X;for(var xa=1;xa<sa;xa++,ba+=
X)if(da=g(V,W[ba]),aa=p(V,W[ba+1]),da!==S||aa!==Y)I(J.coords,W,fa,ba,da-S,aa-Y),fa+=X,ta++,S=da,Y=aa;ta>=U&&(J.lengths.push(ta),ka=fa)}}J.coords.length=ka;return J.coords.length?J:null}function q(J,R,I,S,U){var V=R.coords;R=R.lengths;var W=I?S?L:K:S?K:O;I=I?S?4:3:S?3:2;if(!V.length)return J.lengths.length=0,J.coords.length=0,J;if(!R.length)return W(J.coords,V,0,0,n(U,V[0]),e(U,V[1])),J.lengths.length=0,J.coords.length=I,J;var X=U.scale;S=X[0];X=X[1];for(var Y=0,da=0;da<R.length;da++){var aa=R[da];
J.lengths[da]=aa;var ba=n(U,V[Y]),fa=e(U,V[Y+1]);W(J.coords,V,Y,Y,ba,fa);Y+=I;for(var ka=1;ka<aa;ka++,Y+=I)ba+=V[Y]*S,fa-=V[Y+1]*X,W(J.coords,V,Y,Y,ba,fa)}J.lengths.length=R.length;J.coords.length=V.length;return J}function t(J,R,I,S,U,V){V=U?V?4:3:V?3:2;var W=I,X=I+V,Y=0,da=0,aa=I=0,ba=0,fa=0;for(--S;fa<S;fa++,W+=V,X+=V){var ka=R[W],oa=R[W+1],sa=R[W+2],ta=R[X],xa=R[X+1],va=R[X+2],na=ka*xa-ta*oa;aa+=na;Y+=(ka+ta)*na;da+=(oa+xa)*na;U&&(na=ka*va-ta*sa,I+=(sa+va)*na,ba+=na);ka<J[0]&&(J[0]=ka);ka>J[1]&&
(J[1]=ka);oa<J[2]&&(J[2]=oa);oa>J[3]&&(J[3]=oa);U&&(sa<J[4]&&(J[4]=sa),sa>J[5]&&(J[5]=sa))}0<aa&&(aa*=-1);0<ba&&(ba*=-1);if(!aa)return null;J=[Y,da,.5*aa];U&&(J[3]=I,J[4]=.5*ba);return J}function x(J,R,I,S,U){U=S?U?4:3:U?3:2;for(var V=R,W=R+U,X=0,Y=0,da=0,aa=0,ba=0,fa=I-1;ba<fa;ba++,V+=U,W+=U){var ka=J[V],oa=J[V+1],sa=J[V+2],ta=J[W],xa=J[W+1],va=J[W+2],na=S?D(ka,oa,sa,ta,xa,va):z(ka,oa,ta,xa);na&&(X+=na,S?(ka=G(ka,oa,sa,ta,xa,va),Y+=na*ka[0],da+=na*ka[1],aa+=na*ka[2]):(ka=F(ka,oa,ta,xa),Y+=na*ka[0],
da+=na*ka[1]))}return 0<X?S?[Y/X,da/X,aa/X]:[Y/X,da/X]:0<I?S?[J[R],J[R+1],J[R+2]]:[J[R],J[R+1]]:null}function z(J,R,I,S){J=I-J;R=S-R;return Math.sqrt(J*J+R*R)}function D(J,R,I,S,U,V){J=S-J;R=U-R;I=V-I;return Math.sqrt(J*J+R*R+I*I)}function F(J,R,I,S){return[J+.5*(I-J),R+.5*(S-R)]}function G(J,R,I,S,U,V){return[J+.5*(S-J),R+.5*(U-R),I+.5*(V-I)]}Object.defineProperty(h,"__esModule",{value:!0});var E=d.getLogger("esri.tasks.support.optimizedFeatureSet"),H={esriGeometryPoint:0,esriGeometryPolyline:2,
esriGeometryPolygon:3,esriGeometryMultipoint:0},O=function(J,R,I,S,U,V){J[I]=U;J[I+1]=V},K=function(J,R,I,S,U,V){J[I]=U;J[I+1]=V;J[I+2]=R[S+2]},L=function(J,R,I,S,U,V){J[I]=U;J[I+1]=V;J[I+2]=R[S+2];J[I+3]=R[S+3]};h.quantizeX=g;h.quantizeY=p;h.hydrateX=n;h.hydrateY=e;var T=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=
null;this.exceededTransferLimit=!1}}();h.OptimizedFeatureSet=T;var P=function(){return function(J,R){void 0===J&&(J=[]);void 0===R&&(R=[]);this.lengths=J;this.coords=R}}();h.OptimizedGeometry=P;var Q=function(){return function(J,R,I){void 0===J&&(J=null);void 0===R&&(R={});this.geometry=J;this.attributes=R;I&&(this.centroid=I)}}();h.OptimizedFeature=Q;h.convertToPoint=function(J,R,I){return R?I?w(J):m(J):I?u(J):k(J)};h.convertToMultipoint=C;h.convertToPolyline=y;h.convertToPolygon=a;h.convertFromFeatures=
c;h.convertToFeatureSet=function(J){var R=[],I=J.objectIdFieldName,S=J.spatialReference,U=J.transform,V=J.fields,W=J.hasM,X=J.hasZ,Y=J.features,da=J.geometryType;J=J.exceededTransferLimit;switch(da){case "esriGeometryPoint":R=k;W&&X?R=w:W?R=m:X&&(R=u);for(var aa=[],ba=0;ba<Y.length;ba++){var fa=Y[ba],ka=fa.geometry;fa=fa.attributes;ka=ka?R(ka):null;aa.push({attributes:fa,geometry:ka})}R=aa;break;case "esriGeometryMultipoint":R=[];for(aa=0;aa<Y.length;aa++)ka=Y[aa],ba=ka.geometry,ka=ka.attributes,
fa=void 0,ba&&(fa=C(ba,X,W)),R.push({attributes:ka,geometry:fa});break;case "esriGeometryPolyline":R=[];for(aa=0;aa<Y.length;aa++)ka=Y[aa],ba=ka.geometry,ka=ka.attributes,fa=void 0,ba&&(fa=y(ba,X,W)),R.push({attributes:ka,geometry:fa});break;case "esriGeometryPolygon":R=[];for(aa=0;aa<Y.length;aa++){fa=Y[aa];ka=fa.geometry;ba=fa.attributes;var oa=fa.centroid;fa=void 0;ka&&(fa=a(ka,X,W));oa?(ka=k(oa),R.push({attributes:ba,centroid:ka,geometry:fa})):R.push({attributes:ba,geometry:fa})}break;default:E.error("convertToFeatureSet:unknown-geometry",
new b("Unable to parse unknown geometry type "+da))}I={features:R,fields:V,geometryType:da,objectIdFieldName:I,spatialReference:S};U&&(I.transform=U);J&&(I.exceededTransferLimit=J);W&&(I.hasM=W);X&&(I.hasZ=X);return I};h.convertFromFeatureSet=function(J){var R=new T,I=J.hasM,S=J.hasZ,U=J.features,V=J.objectIdFieldName,W=J.spatialReference,X=J.geometryType,Y=J.exceededTransferLimit,da=J.transform;R.fields=J.fields;R.geometryType=X;R.objectIdFieldName=V;R.spatialReference=W;R.features=c(U,X,S,I);Y&&
(R.exceededTransferLimit=Y);I&&(R.hasM=I);S&&(R.hasZ=S);da&&(R.transform=da);return R};h.hydrateOptimizedFeatureSet=function(J){var R=J.transform,I=J.hasM,S=J.hasZ;if(!R)return J;for(var U=0,V=J.features;U<V.length;U++){var W=V[U];q(W.geometry,W.geometry,I,S,R);W.centroid&&q(W.centroid,W.centroid,I,S,R)}J.transform=null;return J};h.quantizeOptimizedFeatureSet=function(J,R){var I=R.geometryType,S=R.features,U=R.hasM,V=R.hasZ;if("esriGeometryEnvelope"===I)return E.error(new b("optimized-features:invalid-geometry-type",
'FeatureSet with geometry type "'+I+'" is not supported')),R;if(!J)return R;for(var W=0;W<S.length;W++){var X=S[W],Y=new Q(new P,X.attributes);f(Y.geometry,X.geometry,U,V,I,J);X.centroid&&(Y.centroid=new P,f(Y.centroid,X.centroid,U,V,"esriGeometryPoint",J));S[W]=Y}R.transform=J;return R};h.quantizeOptimizedGeometry=f;h.quantizeOptimizedGeometryRemoveCollinear=function(J,R,I,S,U,V){U=H[U];var W=R.coords;R=R.lengths;var X=I?S?4:3:S?3:2;I=I?S?L:K:S?K:O;J.lengths.length=0;J.coords.length=0;if(!W.length)return J;
if(!R.length)return I(J.coords,W,0,0,g(V,W[0]),p(V,W[1])),J.lengths.length=0,J.coords.length=X,J;for(var Y,da,aa,ba=0,fa,ka=0,oa=0;oa<R.length;oa++){var sa=R[oa];if(!(sa<U)){var ta=0;fa=ka;S=Y=g(V,W[ba]);aa=da=p(V,W[ba+1]);I(J.coords,W,fa,ba,S,aa);ta++;ba+=X;for(var xa=!1,va=0,na=0,ya=1;ya<sa;ya++,ba+=X)if(S=g(V,W[ba]),aa=p(V,W[ba+1]),S!==Y||aa!==da)Y=S-Y,da=aa-da,xa&&(0===va&&0===Y||0===na&&0===da)?(va+=Y,na+=da):(xa=!0,va=Y,na=da,fa+=X,ta++),I(J.coords,W,fa,ba,va,na),Y=S,da=aa;xa&&(fa+=X,I(J.coords,
W,fa,ba,va,na));ta>=U&&(J.lengths.push(ta),ka=fa)}}J.coords.length=ka;return J.coords.length?J:null};h.getBoundsOptimizedGeometry=function(J,R,I,S){I=I?S?4:3:S?3:2;R=R.coords;for(var U=S=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,W=Number.NEGATIVE_INFINITY,X=0;X<R.length;X+=I){var Y=R[X],da=R[X+1];S=Math.min(S,Y);V=Math.max(V,Y);U=Math.min(U,da);W=Math.max(W,da)}J[0]=S;J[1]=U;J[2]=V;J[3]=W;return J};h.getQuantizedBoundsOptimizedGeometry=function(J,R,I,S){I=I?S?4:3:S?3:2;S=R.coords;var U=
Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,X=Number.NEGATIVE_INFINITY,Y=0,da=0;for(R=R.lengths;da<R.length;da++){var aa=R[da],ba=S[Y],fa=S[Y+1];U=Math.min(ba,U);V=Math.min(fa,V);W=Math.max(ba,W);X=Math.max(fa,X);Y+=I;for(var ka=1;ka<aa;ka++,Y+=I){var oa=S[Y],sa=S[Y+1];ba+=oa;fa+=sa;0>oa&&(U=Math.min(U,ba));0<oa&&(W=Math.max(W,ba));0>sa?V=Math.min(V,fa):0<sa&&(X=Math.max(X,fa))}}J[0]=U;J[1]=V;J[2]=W;J[3]=X;return J};h.hydrateOptimizedGeometry=q;h.getCentroidOptimizedGeometry=
function(J,R,I,S){if(!R||!R.lengths.length)return null;J.lengths.length=0;J.coords.length=0;for(var U=J.coords,V=[],W=I?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],X=R.lengths,Y=R.coords,da=I?S?4:3:S?3:2,aa=0,ba=0;ba<X.length;ba++){var fa=X[ba],ka=t(W,Y,aa,fa,I,S);ka&&V.push(ka);aa+=fa*da}V.sort(function(oa,
sa){var ta=oa[2]-sa[2];0===ta&&I&&(ta=oa[4]-sa[4]);return ta});V.length&&(da=6*V[0][2],U[0]=V[0][0]/da,U[1]=V[0][1]/da,I&&(da=6*V[0][4],U[2]=0!==da?V[0][3]/da:0),U[0]<W[0]||U[0]>W[1]||U[1]<W[2]||U[1]>W[3]||I&&(U[2]<W[4]||U[2]>W[5]))&&(U.length=0);if(!U.length)if(R=R.lengths[0]?x(Y,0,X[0],I,S):null)U[0]=R[0],U[1]=R[1],I&&2<R.length&&(U[2]=R[2]);else return null;return J};h.lineCentroid=x;h.getLength2D=z;h.getLength3D=D;h.getMidpoint2D=F;h.getMidpoint3D=G})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require",
"exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(A,h,b,d){function g(k,l){k.length=0;l.forEach(function(m){return k.push(m)});return k}var p=new Set,n=[],e=new Map;return function(){function k(l){var m=this;this._keysToRequests=new Map;this.tileInfoView=null;var r=l.strategy&&"scale-first"!==l.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=l.tileInfoView;this._queues=l.tileServers&&0<l.tileServers.length?l.tileServers.map(function(u){return new b({concurrency:l.concurrency||
6,process:function(v){v=m._keysToRequests.get(v);return l.process(v,u)},peeker:r})}):[new b({concurrency:l.concurrency||6,process:function(u){u=m._keysToRequests.get(u);return l.process(u)},peeker:r})]}Object.defineProperty(k.prototype,"length",{get:function(){return this._queues.reduce(function(l,m){return l+m.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});k.prototype.clear=
function(){for(var l=0,m=this._queues;l<m.length;l++)m[l].clear();this._keysToRequests.clear()};k.prototype.find=function(l,m){var r=this;m=0;for(var u=this._queues;m<u.length;m++){var v=u[m].find(function(w){return l(r._keysToRequests.get(w).key)});if(v)return v}};k.prototype.get=function(l){l="string"===typeof l?l:l.id;for(var m=0,r=this._queues;m<r.length;m++){var u=r[m].get(l);if(u)return u}};k.prototype.getRequest=function(l){return this._keysToRequests.get("string"===typeof l?l:l.id)};k.prototype.has=
function(l){return"string"===typeof l?this._keysToRequests.has(l):this._keysToRequests.has(l.id)};k.prototype.isOngoing=function(l){var m="string"===typeof l?l:l.id;return this.has(m)&&this._queues.some(function(r){return r.isOngoing(m)})};k.prototype.pause=function(){for(var l=0,m=this._queues;l<m.length;l++)m[l].pause()};k.prototype.push=function(l){var m=this,r=l.key.id,u=this._queues[l.key.row%this._queues.length].push(r);this._keysToRequests.set(r,l);u.then(function(){m._keysToRequests.delete(r)});
u.catch(function(){m._keysToRequests.delete(r)});return u};k.prototype.reset=function(){for(var l=0,m=this._queues;l<m.length;l++)m[l].reset()};k.prototype.resume=function(){for(var l=0,m=this._queues;l<m.length;l++)m[l].resume()};k.prototype._peekByScaleFirst=function(l){if(!this.state)return l[0];for(var m=this.tileInfoView,r=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,v=0;v<l.length;v++){var w=this._keysToRequests.get(l[v]),B=this.tileInfoView.getTileScale(w.key);e.has(B)||(e.set(B,[]),
r=Math.max(B,r),u=Math.min(B,u));e.get(B).push(w.key);p.add(B)}var C=this.state.scale;e.has(C)||(g(n,p),n.sort(),C=n.reduce(function(f,q,t,x){return Math.abs(q-C)<Math.abs(f-C)?q:f},n[0]));C=Math.min(C,r);C=Math.max(C,u);l=e.get(C);var y=m.getClosestInfoForScale(C),a=y.getColumnForX(this.state.center[0]),c=y.getRowForY(this.state.center[1]);l.sort(function(f,q){var t=y.denormalizeCol(f.col,f.world),x=y.denormalizeCol(q.col,q.world);return Math.sqrt((a-t)*(a-t)+(c-f.row)*(c-f.row))-Math.sqrt((a-x)*
(a-x)+(c-q.row)*(c-q.row))});p.clear();e.clear();return l[0].id};k.prototype._peekByCenterFirst=function(l){if(!this.state)return l[0];for(var m=this.tileInfoView,r=this.state.center,u=[0,0],v=Number.POSITIVE_INFINITY,w=null,B=0;B<l.length;B++){var C=this._keysToRequests.get(l[B]);m.getTileCoords(u,C.key);var y=d.distance(u,r);y<v&&(v=y,w=C.key)}return w.id};return k}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],
function(A,h,b,d,g){return function(){function p(n){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;n.concurrency&&(this.concurrency=n.concurrency);this.ordered=!!n.ordered;this._queue=new d(n.peeker?{peeker:n.peeker}:void 0);this.process=n.process}Object.defineProperty(p.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});p.prototype.clear=
function(){this._queue.clear();var n=[];this._processingItems.forEach(function(e){return n.push(e.resultPromise)});this._processingItems.clear();n.forEach(function(e){return e.cancel()});n.length=0;this._apiPromises.forEach(function(e){return n.push(e)});this._apiPromises.clear();n.forEach(function(e){return e.cancel()});this._cancelNext()};p.prototype.find=function(n,e){var k=this,l=void 0;this._apiPromises.forEach(function(m,r){n.call(e,r)&&(l=k._apiPromises.get(r).promise)});return l};p.prototype.get=
function(n){return(n=this._apiPromises.get(n))&&n.promise||void 0};p.prototype.isOngoing=function(n){return this._processingItems.has(n)};p.prototype.has=function(n){return this._apiPromises.has(n)};p.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};p.prototype.push=function(n){var e=this;if(this._apiPromises.has(n))return this._apiPromises.get(n).promise;var k=new b(function(l){var m=e._processingItems.get(n);m?m.resultPromise.cancel(l):(e._remove(n),e._scheduleNext())});
this._add(n,k);this._scheduleNext();return k.promise};p.prototype.reset=function(){var n=[];this._processingItems.forEach(function(l){return n.push(l)});this._processingItems.clear();for(var e=0;e<n.length;e++){var k=n[e];k.resultPromise.isFulfilled()?this._processReset(k):(k.isReset=!0,k.resultPromise.cancel())}};p.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};p.prototype._scheduleNext=function(){var n=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=
g.schedule(function(){n._scheduledNextHandle=null;n._next()}))};p.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};p.prototype._processResult=function(n,e){this._remove(n.item);this._scheduleNext();n.dfd.resolve(e)};p.prototype._processError=function(n,e){n.isReset?this._processReset(n):(this._remove(n.item),this._scheduleNext(),n.dfd.reject(e))};p.prototype._processReset=function(n){this._remove(n.item);this._add(n.item,
n.dfd);this._scheduleNext()};p.prototype._processOrdered=function(n,e){var k=this,l=!1;if(n.isReset)this._processReset(n);else{n.result=e;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(r){l||(r.result?k._itemsToProcess.push(r):l=!0)});n=0;for(e=this._itemsToProcess;n<e.length;n++){var m=e[n];!1===m.result.ok?this._processError(m,m.result.error):this._processResult(m,m.result.value)}this._itemsToProcess.length=0}};p.prototype._process=function(n){var e=this;
if(null!=n){var k=this._apiPromises.get(n),l=this.process(n);if(l&&"function"===typeof l.then){var m={item:n,resultPromise:l,result:null,dfd:k,isReset:!1};this._processingItems.set(n,m);this.ordered?l.then(function(r){return e._processOrdered(m,{ok:!0,value:r})},function(r){return e._processOrdered(m,{ok:!1,error:r})}):l.then(function(r){return e._processResult(m,r)},function(r){return e._processError(m,r)})}else k.resolve(l),this._remove(n)}};p.prototype._add=function(n,e){this._apiPromises.set(n,
e);this._queue.push(n)};p.prototype._remove=function(n){this._queue.remove(n);this._apiPromises.delete(n);this._processingItems.delete(n)};p.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};return p}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(A,h){return function(){function b(d){this._items=[];this._itemSet=new Set;this._peeker=function(g){return g[0]};this._length=0;d&&
d.peeker&&(this._peeker=d.peeker)}Object.defineProperty(b.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});b.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};b.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};b.prototype.push=function(d){this.contains(d)||this._add(d)};b.prototype.contains=function(d){return 0<this._length&&this._itemSet.has(d)};b.prototype.pop=function(){if(0!==this._length){var d=
this.peek();this._remove(d);return d}};b.prototype.remove=function(d){this.contains(d)&&this._remove(d)};b.prototype._add=function(d){this._items.push(d);this._itemSet.add(d);this._length++};b.prototype._remove=function(d){this._itemSet.delete(d);this._items.splice(this._items.indexOf(d),1);this._length--};return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(A,h,b,d,g){var p=
new g(0,0,0,0),n=new Map,e=[],k=[];return function(){function l(m){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=m.acquireTile;this.releaseTile=m.releaseTile;this.tileInfoView=m.tileInfoView;m.cachePolicy&&(this.cachePolicy=m.cachePolicy);m.coveragePolicy&&(this.coveragePolicy=m.coveragePolicy);null!=m.buffer&&(this.buffer=m.buffer)}l.prototype.destroy=function(){this.clear()};
l.prototype.update=function(m){var r=this,u=this.tileIndex,v=this.tileInfoView.getTileCoverage(m.state,this.buffer,this.coveragePolicy);if(v){var w=v.spans,B=v.lodInfo,C=B.level,y=m.state.resolution,a=!m.stationary&&y>this._previousResolution;this._previousResolution=y;u.forEach(function(F){return F.visible=!0});this.tiles.length=0;n.clear();var c=0,f=0;if(0<w.length)for(var q=0;q<w.length;q++){m=w[q];for(var t=m.row,x=m.colTo,z=m.colFrom;z<=x;z++)c++,m=p.set(C,t,B.normalizeCol(z),B.getWorldForColumn(z)).id,
u.has(m)?(y=u.get(m),y.status!==d.TileStatus.INITIALIZED&&f++,y.attached?n.set(m,y):y.attached||a||this._addParentTile(m,n)):(y=this.acquireTile(p),this.tileIndex.set(m,y),a||this._addParentTile(m,n))}var D=f===c;k.length=0;e.length=0;u.forEach(function(F,G){p.set(G);if(!n.has(G)){var E=r.tileInfoView.intersects(v,p);!E||!a&&D?"purge"===r.cachePolicy&&F.status!==d.TileStatus.MODIFIED&&F.status!==d.TileStatus.READY?e.push(G):(p.level>C||!E)&&e.push(G):F.attached?k.push(G):p.level>C&&e.push(G)}});for(w=
0;w<k.length;w++)m=k[w],(y=u.get(m))&&y.attached&&n.set(m,y);for(w=0;w<e.length;w++)m=e[w],y=u.get(m),this.releaseTile(y),u["delete"](m);n.forEach(function(F){return r.tiles.push(F)});u.forEach(function(F){n.has(F.key.id)||(F.visible=!1)});k.length=0;e.length=0;n.clear();return D}};l.prototype.clear=function(){var m=this,r=this.tileIndex;r.forEach(function(u){m.releaseTile(u)});r.clear()};l.prototype._addParentTile=function(m,r){for(var u=null;;){m=this.tileInfoView.getTileParentId(m);if(!m)break;
if(this.tileIndex.has(m)&&(u=this.tileIndex.get(m))&&u.attached){r.has(u.key.id)||r.set(u.key.id,u);break}}};return l}()})},"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"*now":function(A){A(['dojo/i18n!*preload*esri/layers/support/nls/webglDeps*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});define("esri/layers/support/webglDeps",["./WebGLRenderer","../OnDemandDrillMode"],function(A,h){return{WebGLRenderer:A,OnDemandDrillMode:h}});