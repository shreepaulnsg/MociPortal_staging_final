// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/core/libs/gl-matrix/quat",["./common","./mat3","./vec3","./vec4"],function(u,v,n,l){var e={create:function(){var a=new u.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};e.rotationTo=function(){var a=n.create(),b=n.fromValues(1,0,0),c=n.fromValues(0,1,0);return function(d,f,g){var h=n.dot(f,g);if(-.999999>h)return n.cross(a,b,f),1E-6>n.length(a)&&n.cross(a,c,f),n.normalize(a,a),e.setAxisAngle(d,a,Math.PI),d;if(.999999<h)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;n.cross(a,
f,g);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+h;return e.normalize(d,d)}}();e.setAxes=function(){var a=v.create();return function(b,c,d,f){a[0]=d[0];a[3]=d[1];a[6]=d[2];a[1]=f[0];a[4]=f[1];a[7]=f[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return e.normalize(b,e.fromMat3(b,a))}}();e.clone=l.clone;e.fromValues=l.fromValues;e.copy=l.copy;e.set=l.set;e.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};e.setAxisAngle=function(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);
return a};e.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};e.add=l.add;e.multiply=function(a,b,c){var d=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],k=c[1],p=c[2];c=c[3];a[0]=d*c+b*h+f*p-g*k;a[1]=f*c+b*k+g*h-d*p;a[2]=g*c+b*p+d*k-f*h;a[3]=b*c-d*h-f*k-g*p;return a};e.mul=e.multiply;e.scale=l.scale;e.rotateX=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*h;a[1]=f*
c+g*h;a[2]=g*c-f*h;a[3]=b*c-d*h;return a};e.rotateY=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c-g*h;a[1]=f*c+b*h;a[2]=g*c+d*h;a[3]=b*c-f*h;return a};e.rotateZ=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*h;a[1]=f*c-d*h;a[2]=g*c+b*h;a[3]=b*c-g*h;return a};e.calculateW=function(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};e.dot=l.dot;e.lerp=l.lerp;
e.slerp=function(a,b,c,d){var f=b[0],g=b[1],h=b[2];b=b[3];var k=c[0],p=c[1],q=c[2];c=c[3];var m=f*k+g*p+h*q+b*c;0>m&&(m=-m,k=-k,p=-p,q=-q,c=-c);if(1E-6<1-m){var r=Math.acos(m);var t=Math.sin(r);m=Math.sin((1-d)*r)/t;d=Math.sin(d*r)/t}else m=1-d;a[0]=m*f+d*k;a[1]=m*g+d*p;a[2]=m*h+d*q;a[3]=m*b+d*c;return a};e.sqlerp=function(){var a=e.create(),b=e.create();return function(c,d,f,g,h,k){e.slerp(a,d,h,k);e.slerp(b,f,g,k);e.slerp(c,a,b,2*k*(1-k));return c}}();e.invert=function(a,b){var c=b[0],d=b[1],f=
b[2];b=b[3];var g=c*c+d*d+f*f+b*b;g=g?1/g:0;a[0]=-c*g;a[1]=-d*g;a[2]=-f*g;a[3]=b*g;return a};e.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};e.length=l.length;e.len=e.length;e.squaredLength=l.squaredLength;e.sqrLen=e.squaredLength;e.normalize=l.normalize;e.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var f=(d+1)%3,g=(d+2)%
3;c=Math.sqrt(b[3*d+d]-b[3*f+f]-b[3*g+g]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*f+g]-b[3*g+f])*c;a[f]=(b[3*f+d]+b[3*d+f])*c;a[g]=(b[3*g+d]+b[3*d+g])*c}return a};e.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};e.exactEquals=l.exactEquals;e.equals=l.equals;return e});