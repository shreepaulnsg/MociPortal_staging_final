// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/core/libs/earcut/earcut",[],function(){function E(a,b,c){c=c||2;C=a.length/c+(b?2*b.length:0);x=!1;var d=b&&b.length,f=d?b[0]*c:a.length,h=I(a,0,f,c,!0),k=[];if(!h)return k;var l;if(d)a:{var e=c;d=[];var t;var m=0;for(t=b.length;m<t;m++){var p=b[m]*e;var v=m<t-1?b[m+1]*e:a.length;p=I(a,p,v,e,!1);p===p.next&&(p.steiner=!0);d.push(N(p))}d.sort(O);for(m=0;m<d.length;m++){if(!h){h=null;break a}b=d[m];e=h;if(e=P(b,e))b=J(e,b),y(b,b.next);h=y(h,h.next)}}if(x)return k;if(a.length>
80*c){var q=l=a[0];var g=d=a[1];for(e=c;e<f;e+=c)m=a[e],b=a[e+1],m<q&&(q=m),b<g&&(g=b),m>l&&(l=m),b>d&&(d=b);l=Math.max(l-q,d-g)}z(h,k,c,q,g,l);return k}function I(a,b,c,d,f){if(f===0<F(a,b,c,d))for(f=b;f<c;f+=d)var h=K(f,a[f],a[f+1],h);else for(f=c-d;f>=b;f-=d)h=K(f,a[f],a[f+1],h);h&&w(h,h.next)&&(A(h),h=h.next);return h}function y(a,b){if(!a)return a;b||(b=a);var c=0,d=C*C/2;do{var f=!1;if(a.steiner||!w(a,a.next)&&0!==u(a.prev,a,a.next))a=a.next;else{A(a);a=b=a.prev;if(a===a.next)return null;f=
!0}if(c++>d)return x=!0,null}while(f||a!==b);return b}function z(a,b,c,d,f,h,k){if(a){if(!k&&h){var l=a,e=l;do null===e.z&&(e.z=G(e.x,e.y,d,f,h)),e.prevZ=e.prev,e=e.nextZ=e.next;while(e!==l);e.prevZ.nextZ=null;e.prevZ=null;l=e;var t,m,p,v,q=1;do{e=l;var g=l=null;for(m=0;e;){m++;var n=e;for(t=p=0;t<q&&(p++,n=n.nextZ,n);t++);for(v=q;0<p||0<v&&n;)0===p?(t=n,n=n.nextZ,v--):0!==v&&n?e.z<=n.z?(t=e,e=e.nextZ,p--):(t=n,n=n.nextZ,v--):(t=e,e=e.nextZ,p--),g?g.nextZ=t:l=t,t.prevZ=g,g=t;e=n}g.nextZ=null;q*=2}while(1<
m)}for(l=a;a.prev!==a.next;){e=a.prev;n=a.next;if(h)a:{g=a;v=d;var r=f,L=h;m=g.prev;p=g;q=g.next;if(0<=u(m,p,q))g=!1;else{var Q=m.x>p.x?m.x>q.x?m.x:q.x:p.x>q.x?p.x:q.x,R=m.y>p.y?m.y>q.y?m.y:q.y:p.y>q.y?p.y:q.y;t=G(m.x<p.x?m.x<q.x?m.x:q.x:p.x<q.x?p.x:q.x,m.y<p.y?m.y<q.y?m.y:q.y:p.y<q.y?p.y:q.y,v,r,L);v=G(Q,R,v,r,L);for(r=g.nextZ;r&&r.z<=v;){if(r!==g.prev&&r!==g.next&&D(m.x,m.y,p.x,p.y,q.x,q.y,r.x,r.y)&&0<=u(r.prev,r,r.next)){g=!1;break a}r=r.nextZ}for(r=g.prevZ;r&&r.z>=t;){if(r!==g.prev&&r!==g.next&&
D(m.x,m.y,p.x,p.y,q.x,q.y,r.x,r.y)&&0<=u(r.prev,r,r.next)){g=!1;break a}r=r.prevZ}g=!0}}else g=S(a);if(g)b.push(e.i/c),b.push(a.i/c),b.push(n.i/c),A(a),l=a=n.next;else{if(x)break;a=n;if(a===l){if(!k)z(y(a),b,c,d,f,h,1);else if(1===k){k=b;l=c;e=a;do n=e.prev,g=e.next.next,!w(n,g)&&M(n,e,e.next,g)&&B(n,g)&&B(g,n)&&(k.push(n.i/l),k.push(e.i/l),k.push(g.i/l),A(e),A(e.next),e=a=g),e=e.next;while(e!==a);a=e;z(a,b,c,d,f,h,2)}else if(2===k)a:{k=a;do{for(l=k.next.next;l!==k.prev;){if(e=k.i!==l.i){g=g=g=void 0;
e=k;n=l;if(g=e.next.i!==n.i&&e.prev.i!==n.i){b:{g=e;do{if(g.i!==e.i&&g.next.i!==e.i&&g.i!==n.i&&g.next.i!==n.i&&M(g,g.next,e,n)){g=!0;break b}g=g.next}while(g!==e);g=!1}g=!g}if(g=g&&B(e,n)&&B(n,e)){g=e;m=!1;p=(e.x+n.x)/2;n=(e.y+n.y)/2;do g.y>n!==g.next.y>n&&p<(g.next.x-g.x)*(n-g.y)/(g.next.y-g.y)+g.x&&(m=!m),g=g.next;while(g!==e);g=m}e=g}if(e){a=J(k,l);k=y(k,k.next);a=y(a,a.next);z(k,b,c,d,f,h);z(a,b,c,d,f,h);break a}l=l.next}k=k.next}while(k!==a)}break}}}}}function S(a){var b=a.prev,c=a.next;if(0<=
u(b,a,c))return!1;for(var d=a.next.next,f=0;d!==a.prev;){if(D(b.x,b.y,a.x,a.y,c.x,c.y,d.x,d.y)&&0<=u(d.prev,d,d.next))return!1;d=d.next;if(f++>C)return x=!0,!1}return!0}function O(a,b){return a.x-b.x}function P(a,b){var c=b,d=a.x,f=a.y,h=-Infinity;do{if(!c)return null;if(f<=c.y&&f>=c.next.y){var k=c.x+(f-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(k<=d&&k>h){h=k;if(k===d){if(f===c.y)return c;if(f===c.next.y)return c.next}var l=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!l)return null;if(d===h)return l.prev;
b=l;k=l.x;var e=l.y,t=Infinity;for(c=l.next;c!==b;){if(d>=c.x&&c.x>=k&&D(f<e?d:h,f,k,e,f<e?h:d,f,c.x,c.y)){var m=Math.abs(f-c.y)/(d-c.x);(m<t||m===t&&c.x>l.x)&&B(c,a)&&(l=c,t=m)}c=c.next}return l}function G(a,b,c,d,f){a=32767*(a-c)/f;b=32767*(b-d)/f;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function N(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function D(a,
b,c,d,f,h,k,l){return 0<=(f-k)*(b-l)-(a-k)*(h-l)&&0<=(a-k)*(d-l)-(c-k)*(b-l)&&0<=(c-k)*(h-l)-(f-k)*(d-l)}function u(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function M(a,b,c,d){return w(a,b)&&w(c,d)||w(a,d)&&w(c,b)?!0:0<u(a,b,c)!==0<u(a,b,d)&&0<u(c,d,a)!==0<u(c,d,b)}function B(a,b){return 0>u(a.prev,a,a.next)?0<=u(a,b,a.next)&&0<=u(a,a.prev,b):0>u(a,b,a.prev)||0>u(a,a.next,b)}function J(a,b){var c=new H(a.i,a.x,a.y),d=new H(b.i,b.x,b.y),f=a.next,
h=b.prev;a.next=b;b.prev=a;c.next=f;f.prev=c;d.next=c;c.prev=d;h.next=d;d.prev=h;return d}function K(a,b,c,d){a=new H(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function A(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function H(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function F(a,b,c,d){for(var f=0,h=c-d;b<c;b+=d)f+=(a[h]-a[b])*(a[b+
1]+a[h+1]),h=b;return f}var C,x;E.deviation=function(a,b,c,d){var f=b&&b.length,h=Math.abs(F(a,0,f?b[0]*c:a.length,c));if(f){f=0;for(var k=b.length;f<k;f++)h-=Math.abs(F(a,b[f]*c,f<k-1?b[f+1]*c:a.length,c))}for(f=b=0;f<d.length;f+=3){k=d[f]*c;var l=d[f+1]*c,e=d[f+2]*c;b+=Math.abs((a[k]-a[e])*(a[l+1]-a[k+1])-(a[k]-a[l])*(a[e+1]-a[k+1]))}return 0===h&&0===b?0:Math.abs((b-h)/h)};E.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,f=0;f<a.length;f++){for(var h=0;h<
a[f].length;h++)for(var k=0;k<b;k++)c.vertices.push(a[f][h][k]);0<f&&(d+=a[f-1].length,c.holes.push(d))}return c};return E});