// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/core/watchUtils",["require","exports","dojo/Deferred","dojo/promise/Promise"],function(F,f,C,D){function E(a,b){Array.isArray(a)?a.forEach(b):b(a)}function p(a,b,c,d,k){k=a.watch(b,function(e,h,l,g){d&&!d(e)||c.call(a,e,h,l,g)},k);E(b,function(e){var h=a.get(e);d&&d(h)&&c.call(a,h,h,e,a)});return k}function q(a,b,c,d,k){function e(){n&&(n.remove(),n=null)}var h=!1,l=new C(e),g=new D;g.cancel=l.cancel;g.isCanceled=l.isCanceled;g.isFulfilled=l.isFulfilled;g.isRejected=
l.isRejected;g.isResolved=l.isResolved;g.then=l.then;g.remove=e;Object.freeze(g);var n=p(a,b,function(m,r,t,u){h=!0;e();c&&c.call(a,m,r,t,u);l.resolve({value:m,oldValue:r,propertyName:t,target:u})},d,k);h&&n.remove();return g}function v(a){return!!a}function w(a){return!a}function x(a){return!0===a}function y(a){return!1===a}function z(a){return void 0!==a}function A(a){return void 0===a}function B(a,b,c,d){var k=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=a.watch(b,c,d);k.forEach(function(e){e=
e.trim();var h=a.get(e);c.call(a,h,h,e,a)});return b}Object.defineProperty(f,"__esModule",{value:!0});f.init=B;f.watch=function(a,b,c,d){return a.watch(b,c,d)};f.once=function(a,b,c,d){return q(a,b,c,null,d)};f.when=function(a,b,c,d){return p(a,b,c,v,d)};f.whenOnce=function(a,b,c,d){return q(a,b,c,v,d)};f.whenNot=function(a,b,c,d){return p(a,b,c,w,d)};f.whenNotOnce=function(a,b,c,d){return q(a,b,c,w,d)};f.whenTrue=function(a,b,c,d){return p(a,b,c,x,d)};f.whenTrueOnce=function(a,b,c,d){return q(a,
b,c,x,d)};f.whenFalse=function(a,b,c,d){return p(a,b,c,y,d)};f.whenFalseOnce=function(a,b,c,d){return q(a,b,c,y,d)};f.whenDefined=function(a,b,c,d){return p(a,b,c,z,d)};f.whenDefinedOnce=function(a,b,c,d){return q(a,b,c,z,d)};f.whenUndefined=function(a,b,c,d){return p(a,b,c,A,d)};f.whenUndefinedOnce=function(a,b,c,d){return q(a,b,c,A,d)};f.pausable=function(a,b,c,d){var k=!1,e=a.watch(b,function(h,l,g,n){k||c.call(a,h,l,g,n)},d);return{remove:function(){e.remove()},pause:function(){k=!0},resume:function(){k=
!1}}};f.on=function(a,b,c,d,k,e,h){function l(m){var r=g[m];r&&(e&&e(r.target,m,a,c),r.handle.remove(),delete g[m])}var g={},n=B(a,b,function(m,r,t){l(t);m&&"function"===typeof m.on&&(g[t]={handle:m.on(c,d),target:m},k&&k(m,t,a,c))},h);return{remove:function(){n.remove();for(var m in g)l(m)}}}});