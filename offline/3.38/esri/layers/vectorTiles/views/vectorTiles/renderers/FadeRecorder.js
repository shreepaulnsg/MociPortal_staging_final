// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder",["require","exports","../../../core/now"],function(g,k,l){Object.defineProperty(k,"__esModule",{value:!0});(function(){return function(f,a){this.level=f;this.now=a}})();g=function(){return function(f,a,e,c){this.fadeSpeed=f;this.minfadeLevel=a;this.maxfadeLevel=e;this.fadeChange=c}}();k.FadeProperties=g;g=function(){function f(a){void 0===a&&(a=300);this._levelSnapshots=[];this._duration=a}f.prototype.recordLevel=function(a){var e=
l(),c=this._levelSnapshots;0===c.length&&(c.push({level:a,now:0}),c.push({level:a,now:0}));2!==c.length&&c[0].level===a||c.push({level:a,now:e})};f.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var a=this._duration,e=this._levelSnapshots,c=e.length,b=e[c-1],d=-1;c>d+1&&e[d+1].now+a<b.now;)d++;for(0>d&&(d=0);d<c;d++)if(e[d].level!==b.level)return!0;return!1};f.prototype.getFadeValues=function(a){void 0===a&&(a=!1);for(var e=this._duration,c=l(),b=this._levelSnapshots;3<
b.length&&b[1].now+e<c;)b.shift();b[1].now+e<c&&(b[0].level=b[1].level);var d=b[0].level,h=b[b.length-1],m=h.level,n=Math.min(d,m);d=Math.max(d,m);b=(h.level-b[1].level)/((h.now-b[1].now)/e);return a?{fadeSpeed:0,minfadeLevel:n,maxfadeLevel:d,fadeChange:0}:{fadeSpeed:b,minfadeLevel:n,maxfadeLevel:d,fadeChange:(c-h.now)/e*b}};return f}();k.FadeRecorder=g});