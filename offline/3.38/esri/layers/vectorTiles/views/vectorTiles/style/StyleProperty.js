// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty",["require","exports","../../../Color","../GeometryUtils"],function(n,p,l,m){return function(){function g(a,c,b){this.isDataDriven=!1;switch(c.type){case "number":a=!0;break;case "color":a=!0;b=g._parseColor(b);break;case "array":a="number"===c.value;break;default:a=!1}null==b&&(b=c.default);a&&"interval"===b.type&&(a=!1);var e=b&&b.stops&&0<b.stops.length;if(e)for(var d=0,f=b.stops;d<f.length;d++){var h=f[d];h[1]=this._validate(h[1],
c)}if(this.isDataDriven=b?!!b.property:!1)if(void 0!==b.default&&(b.default=this._validate(b.default,c)),e)switch(b.type){case "identity":this.getValue=this._buildIdentity(b,c);break;case "categorical":this.getValue=this._buildCategorical(b,c);break;default:this.getValue=a?this._buildInterpolate(b,c):this._buildInterval(b,c)}else this.getValue=this._buildIdentity(b,c);else e?this.getValue=a?this._buildZoomInterpolate(b):this._buildZoomInterval(b):(b=this._validate(b,c),this.getValue=this._buildSimple(b))}
g.prototype._validate=function(a,c){if("number"===c.type){if(a<c.minimum)return c.minimum;if(a>c.maximum)return c.maximum}return a};g.prototype._buildSimple=function(a){return function(){return a}};g.prototype._buildIdentity=function(a,c){var b=this;return function(e,d){if(d){var f=d.values[a.property];"color"===c.type&&(f=g._parseColor(f))}void 0===f&&(f=a.default);return void 0!==f?b._validate(f,c):c.default}};g.prototype._buildCategorical=function(a,c){var b=this;return function(e,d){var f;d&&
(f=d.values[a.property]);f=b._categorical(f,a.stops);return void 0!==f?f:void 0!==a.default?a.default:c.default}};g.prototype._buildInterval=function(a,c){var b=this;return function(e,d){var f;d&&(f=d.values[a.property]);return"number"===typeof f?b._interval(f,a.stops):void 0!==a.default?a.default:c.default}};g.prototype._buildInterpolate=function(a,c){var b=this;return function(e,d){var f;d&&(f=d.values[a.property]);return"number"===typeof f?b._interpolate(f,a.stops,a.base||1):void 0!==a.default?
a.default:c.default}};g.prototype._buildZoomInterpolate=function(a){var c=this;return function(b){return c._interpolate(b,a.stops,a.base||1)}};g.prototype._buildZoomInterval=function(a){var c=this;return function(b){return c._interval(b,a.stops)}};g.prototype._categorical=function(a,c){for(var b=c.length,e=0;e<b;e++)if(c[e][0]===a)return c[e][1]};g.prototype._interval=function(a,c){for(var b=c.length,e=0,d=0;d<b;d++)if(c[d][0]<=a)e=d;else break;return c[e][1]};g.prototype._interpolate=function(a,
c,b){for(var e,d,f=c.length,h=0;h<f;h++){var k=c[h];if(k[0]<=a)e=k;else{d=k;break}}if(e&&d){h=d[0]-e[0];a-=e[0];b=1===b?a/h:(Math.pow(b,a)-1)/(Math.pow(b,h)-1);if(Array.isArray(e[1])){e=e[1];d=d[1];a=[];for(h=0;h<e.length;h++)a.push(m.interpolate(e[h],d[h],b));return a}return m.interpolate(e[1],d[1],b)}if(e)return e[1];if(d)return d[1]};g._isEmpty=function(a){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0};g._parseColor=function(a){if(Array.isArray(a))return a;if("string"===typeof a){if(a=
new l(a),!this._isEmpty(a))return l.toUnitRGBA(a)}else return a&&a.default&&(a.default=g._parseColor(a.default)),a&&a.stops&&(a.stops=a.stops.map(function(c){return[c[0],g._parseColor(c[1])]})),a};return g}()});