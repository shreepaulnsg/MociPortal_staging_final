// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/views/2d/engine/webgl/WGLRendererInfo","require exports ../../../../core/screenUtils ../../../../geometry/support/scaleUtils ../../../../renderers/support/utils ./color ./Utils".split(" "),function(w,x,n,t,u,v,q){function r(f,a){var d=a.length;if(f<a[0].value||1===d)return a[0].size;for(var b=1;b<d;b++)if(f<a[b].value)return a[b-1].size+(f-a[b-1].value)/(a[b].value-a[b-1].value)*(a[b].size-a[b-1].size);return a[d-1].size}return function(){function f(){this.symbolLevels=
[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=new Float32Array(6);this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1};this.symbolLevels.push(0)}Object.defineProperty(f.prototype,"vvMaterialParameters",
{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"heatmapParameters",{get:function(){return this._heatmapParameters},enumerable:!0,configurable:!0});f.prototype.updateHeatmapParameters=function(a){var d=a.blurRadius,b=Math.round(4.5*a.blurRadius),e=2*b+1;this._heatmapParameters||(this._heatmapParameters={radius:d,blurRadius:b,kernelSize:e,refreshIntensityKernel:!0,intensityKernel:null,color:null,maxPixelIntensity:a.maxPixelIntensity,
minPixelIntensity:a.minPixelIntensity});for(var c=this._heatmapParameters,k=a.colorStops,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m,p=0;16>p;p++){var h=k[Math.min(p,k.length-1)];g[p]=h.ratio;m=4*p;l[m+0]=h.color[0]/255;l[m+1]=h.color[1]/255;l[m+2]=h.color[2]/255;l[m+3]=1<h.color[3]?h.color[3]/255:h.color[3];v.premultiplyAlpha(l,m,!0)}c.color={values:g,colors:l,refreshColorRamp:!0};
1E-6<Math.abs(c.radius-a.radius)&&(c.radius=d,c.blurRadius=b,c.kernelSize=e,c.refreshIntensityKernel=!0);c.maxPixelIntensity=a.maxPixelIntensity;c.minPixelIntensity=a.minPixelIntensity};f.prototype.updateVisualVariables=function(a,d){var b=this._vvMaterialParameters;b.vvOpacityEnabled=!1;b.vvSizeEnabled=!1;b.vvColorEnabled=!1;b.vvRotationEnabled=!1;if(a){var e=a.size;if(e){b.vvSizeEnabled=!0;if(e.minMaxValue){var c=e.minMaxValue,k=void 0,g=void 0;q.isDefined(c.minSize)&&q.isDefined(c.maxSize)&&(q.isNumber(c.minSize)&&
q.isNumber(c.maxSize)?(k=n.pt2px(c.minSize),g=n.pt2px(c.maxSize)):(g=d.scale,k=n.pt2px(r(g,c.minSize.stops)),g=n.pt2px(r(g,c.maxSize.stops))));this.vvSizeMinMaxValue.set([c.minDataValue,c.maxDataValue,k,g])}e.scaleStops&&(this.vvSizeScaleStopsValue=n.pt2px(r(d.scale,e.scaleStops.stops)));e.unitValue&&(this.vvSizeUnitValueToPixelsRatio=t.getMetersPerUnitForSR(d.spatialReference)/u.meterIn[e.unitValue.unit]/d.resolution);e.fieldStops&&(this.vvSizeFieldStopsValues.set(e.fieldStops.values),this.vvSizeFieldStopsSizes.set(e.fieldStops.sizes))}if(d=
a.color)b.vvColorEnabled=!0,this.vvColorValues.set(d.values),this.vvColors.set(d.colors);if(d=a.opacity)b.vvOpacityEnabled=!0,this.vvOpacityValues.set(d.values),this.vvOpacities.set(d.opacities);if(a=a.rotation)b.vvRotationEnabled=!0,b.vvRotationType=a.type}};return f}()});