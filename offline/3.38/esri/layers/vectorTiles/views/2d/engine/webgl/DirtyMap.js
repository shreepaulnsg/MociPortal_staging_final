// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/views/2d/engine/webgl/DirtyMap",["require","exports","./Utils"],function(l,m,p){function n(c,b,d){c.allDirty||(null!=c.from&&null!=c.count?(c.from=Math.min(c.from,b),c.count=Math.max(c.from+c.count,b+d)-c.from):(c.from=b,c.count=d))}Object.defineProperty(m,"__esModule",{value:!0});l=function(){function c(){this._dirties=p.createGeometryData(void 0,function(b){return{indices:{from:null,count:null,allDirty:!1}}},function(b,d){return{vertices:{from:null,count:null,allDirty:!1}}})}
c.prototype.markAllClean=function(){for(var b=0,d=this._dirties;b<d.length;b++){var a=d[b];a.data.indices.from=null;a.data.indices.count=null;a.data.indices.allDirty=!1;for(var e in a.buffers)a.buffers[e].data.vertices.from=null,a.buffers[e].data.vertices.count=null,a.buffers[e].data.vertices.allDirty=!1}};c.prototype.markAllDirty=function(){for(var b=0,d=this._dirties;b<d.length;b++){var a=d[b];a.data.indices.allDirty=!0;for(var e in a.buffers)a.buffers[e].data.vertices.allDirty=!0}};c.prototype.forEach=
function(b){for(var d=new Map,a=0;a<this._dirties.length;++a){var e=this._dirties[a],g=new Map,h;for(h in e.buffers){var f=e.buffers[h].data.vertices;(f.allDirty||null!=f.from&&null!=f.count)&&g.set(h,f)}e=e.data.indices;f=void 0;f=e.allDirty||null!=e.from&&null!=e.count?{indices:e,vertices:g}:{indices:void 0,vertices:g};(f.indices||0<f.vertices.size)&&d.set(a,f)}d.forEach(function(k,q){b({indices:k.indices||null,vertices:0<k.vertices.size?k.vertices:null},q)})};c.prototype.markDirtyIndices=function(b,
d,a){n(this._dirties[b].data.indices,d,a)};c.prototype.markDirtyVertices=function(b,d,a,e){n(this._dirties[b].buffers[d].data.vertices,a,e)};return c}();m.default=l});