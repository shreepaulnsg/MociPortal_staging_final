// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/renderers/support/diffUtils",["require","exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(C,t,q,u,y){function v(a){return a instanceof u?Object.keys(a.items):a instanceof q?y.getProperties(a).keys():a?Object.keys(a):[]}function p(a,b){return a instanceof u?a.items[b]:a[b]}function z(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function h(a){return a?a.declaredClass:null}function w(a,b){var e=
a.diff;if(e&&"function"===typeof e)return e(a,b);var k=v(a),l=v(b);if(0!==k.length||0!==l.length){if(!k.length||!l.length||z(a,b))return{type:"complete",oldValue:a,newValue:b};var m=l.filter(function(f){return-1===k.indexOf(f)}),n=k.filter(function(f){return-1===l.indexOf(f)});m=k.filter(function(f){return-1<l.indexOf(f)&&p(a,f)!==p(b,f)}).concat(m,n).sort();if((n=h(a))&&-1<A.indexOf(n)&&m.length)return{type:"complete",oldValue:a,newValue:b};n=a instanceof q&&b instanceof q;for(var B in m){var g=
m[B],c=p(a,g),d=p(b,g),x=void 0;if((n||"function"!==typeof c&&"function"!==typeof d)&&c!==d&&(null!=c||null!=d)&&(x=e&&e[g]&&"function"===typeof e[g]?e[g](c,d):"object"===typeof c&&"object"===typeof d&&h(c)===h(d)?w(c,d):{type:"complete",oldValue:c,newValue:d})){var r=r||{type:"partial",diff:{}};r.diff[g]=x}}return r}}Object.defineProperty(t,"__esModule",{value:!0});var A=["esri.Color","esri.portal.Portal"];t.diff=function(a,b){if("function"!==typeof a&&"function"!==typeof b&&(a||b))return!a||!b||
"object"===typeof a&&"object"===typeof b&&h(a)!==h(b)?{type:"complete",oldValue:a,newValue:b}:w(a,b)}});