// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/geometry/Polygon","require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),function(K,ba,U,u,O,p,P,V,v,W,X,Y,Z,aa,Q,R){function S(E){return function(e,l){return null==e?l:null==l?e:E(e,l)}}var q=S(Math.min),
r=S(Math.max);K=function(E){function e(){for(var a=0;a<arguments.length;a++);a=E.call(this)||this;a.rings=[];a.type="polygon";return a}U(e,E);var l=e;e.createEllipse=function(a){var c=a.center.x,b=a.center.y,f=a.center.z,d=a.center.m,g=a.center.hasZ,w=a.center.hasM,h=a.longAxis,C=a.shortAxis,x=a.numberOfPoints;a=a.view;for(var m=[],D=2*Math.PI/x,F=g?3:2,t=0;t<x;t++){var k=a.toMap(h*Math.cos(t*D)+c,C*Math.sin(t*D)+b);k=[k.x,k.y];g&&(k[2]=f);w&&(k[F]=d);m.push(k)}m.push(m[0]);return new l({rings:[m],
spatialReference:a.spatialReference})};e.createCircle=function(a){return l.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};e.fromExtent=function(a){var c=a.clone().normalize();a=a.spatialReference;var b=!1,f=!1;c.map(function(d){d.hasZ&&(b=!0);d.hasM&&(f=!0)});c={rings:c.map(function(d){var g=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(b&&d.hasZ)for(var w=d.zmin+.5*(d.zmax-d.zmin),h=0;h<g.length;h++)g[h].push(w);
if(f&&d.hasM)for(d=d.mmin+.5*(d.mmax-d.mmin),h=0;h<g.length;h++)g[h].push(d);return g}),spatialReference:a};b&&(c.hasZ=!0);f&&(c.hasM=!0);return new l(c)};e.prototype.normalizeCtorArgs=function(a,c){var b=null,f=null;if(a&&!Array.isArray(a)){b=a.rings?a.rings:null;c||(a.spatialReference?c=a.spatialReference:a.rings||(c=a));var d=a.hasZ;var g=a.hasM}else b=a;b=b||[];c=c||W.WGS84;b.length&&b[0]&&null!=b[0][0]&&"number"===typeof b[0][0]&&(b=[b]);if(f=b[0]&&b[0][0])void 0===d&&void 0===g?(d=2<f.length,
g=!1):void 0===d?d=!g&&3<f.length:void 0===g&&(g=!d&&3<f.length);return{rings:b,spatialReference:c,hasZ:d,hasM:g}};Object.defineProperty(e.prototype,"centroid",{get:function(){var a=X.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var c=new v;c.x=a[0];c.y=a[1];c.spatialReference=this.spatialReference;this.hasZ&&(c.z=a[2]);return c},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"extent",{get:function(){var a=this.hasZ,c=this.hasM,b=this.spatialReference,
f=this.rings,d=a?3:2;if(!f.length||!f[0].length)return null;var g=f[0][0],w=g[0];g=g[1];var h=f[0][0],C=h[0];h=h[1];for(var x=void 0,m=void 0,D=void 0,F=void 0,t=[],k=0;k<f.length;k++){var G=f[k],z=G[0],L=z[0];z=z[1];var A=G[0],M=A[0];A=A[1];for(var H=void 0,I=void 0,T=void 0,y=void 0,N=0;N<G.length;N++){var B=G[N],n=B[0],J=B[1];w=q(w,n);g=q(g,J);C=r(C,n);h=r(h,J);L=q(L,n);z=q(z,J);M=r(M,n);A=r(A,J);a&&2<B.length&&(n=B[2],x=q(x,n),m=r(m,n),H=q(H,n),I=r(I,n));c&&B.length>d&&(y=B[d],D=q(x,y),F=r(m,
y),T=q(H,y),y=r(I,y))}t.push(new P({xmin:L,ymin:z,zmin:H,mmin:T,xmax:M,ymax:A,zmax:I,mmax:y,spatialReference:b}))}f=new P;f.xmin=w;f.ymin=g;f.xmax=C;f.ymax=h;f.spatialReference=b;a&&(f.zmin=x,f.zmax=m);c&&(f.mmin=D,f.mmax=F);f.cache._partwise=1<t.length?t:null;return f},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"isSelfIntersecting",{get:function(){return aa.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});e.prototype.writePaths=function(a,c,b,f){c.rings=O.clone(this.rings)};
e.prototype.addRing=function(a){if(a){this.clearCache();var c=this.rings,b=c.length;if(Array.isArray(a[0]))c[b]=a.concat();else{for(var f=[],d=0,g=a.length;d<g;d++)f[d]=a[d].toArray();c[b]=f}return this}};e.prototype.clone=function(){var a=new l;a.spatialReference=this.spatialReference;a.rings=O.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};e.prototype.contains=function(a){if(!a)return!1;Q.canProject(a,this.spatialReference)&&(a=Q.project(a,this.spatialReference));return Y.polygonContainsPoint(this,
a)};e.prototype.isClockwise=function(a){var c=this;a=Array.isArray(a[0])?a:a.map(function(b){return c.hasZ?c.hasM?[b.x,b.y,b.z,b.m]:[b.x,b.y,b.z]:[b.x,b.y]});return Z.isClockwise(a,this.hasM,this.hasZ)};e.prototype.getPoint=function(a,c){if(!this._validateInputs(a,c))return null;a=this.rings[a][c];c=this.hasZ;var b=this.hasM;return c&&!b?new v(a[0],a[1],a[2],void 0,this.spatialReference):b&&!c?new v(a[0],a[1],void 0,a[2],this.spatialReference):c&&b?new v(a[0],a[1],a[2],a[3],this.spatialReference):
new v(a[0],a[1],this.spatialReference)};e.prototype.insertPoint=function(a,c,b){if(!this._validateInputs(a,c,!0))return this;this.clearCache();R.updateSupportFromPoint(this,b);Array.isArray(b)||(b=b.toArray());this.rings[a].splice(c,0,b);return this};e.prototype.removePoint=function(a,c){if(!this._validateInputs(a,c))return null;this.clearCache();return new v(this.rings[a].splice(c,1)[0],this.spatialReference)};e.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();
a=this.rings.splice(a,1)[0];var c=this.spatialReference;return a.map(function(b){return new v(b,c)})};e.prototype.setPoint=function(a,c,b){if(!this._validateInputs(a,c))return this;this.clearCache();R.updateSupportFromPoint(this,b);Array.isArray(b)||(b=b.toArray());this.rings[a][c]=b;return this};e.prototype._validateInputs=function(a,c,b){void 0===b&&(b=!1);return null==a||0>a||a>=this.rings.length||null!=c&&(a=this.rings[a],b&&(0>c||c>a.length)||!b&&(0>c||c>=a.length))?!1:!0};e.prototype.toJSON=
function(a){return this.write(null,a)};u([p.property({dependsOn:["hasM","hasZ","rings"]})],e.prototype,"cache",void 0);u([p.property({readOnly:!0,dependsOn:["cache"]})],e.prototype,"centroid",null);u([p.property({dependsOn:["cache"],readOnly:!0})],e.prototype,"extent",null);u([p.property({dependsOn:["cache"],readOnly:!0})],e.prototype,"isSelfIntersecting",null);u([p.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],e.prototype,"rings",void 0);u([p.writer("rings")],e.prototype,"writePaths",
null);return e=l=u([p.subclass("esri.geometry.Polygon")],e)}(p.declared(V));K.prototype.toJSON.isDefaultToJSON=!0;return K});