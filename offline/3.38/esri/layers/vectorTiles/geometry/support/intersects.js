// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/geometry/support/intersects",["require","exports","./contains"],function(G,n,p){function z(a,c){return p.extentContainsPoint(a,c)}function y(a,c){var d=a.hasZ&&c.hasZ;if(a.xmin<=c.xmin){var b=c.xmin;if(a.xmax<b)return!1}else if(b=a.xmin,c.xmax<b)return!1;if(a.ymin<=c.ymin){if(b=c.ymin,a.ymax<b)return!1}else if(b=a.ymin,c.ymax<b)return!1;if(d&&c.hasZ)if(a.zmin<=c.zmin){if(d=c.zmin,a.zmax<d)return!1}else if(d=a.zmin,c.zmax<d)return!1;return!0}function A(a,c){var d=c.hasZ?
p.extentContainsCoords3D:p.extentContainsCoords2D,b=0;for(c=c.points;b<c.length;b++)if(d(a,c[b]))return!0;return!1}function B(a,c){q[0]=a.xmin;q[1]=a.ymax;r[0]=a.xmax;r[1]=a.ymax;t[0]=a.xmin;t[1]=a.ymin;u[0]=a.xmax;u[1]=a.ymin;for(var d=0,b=F;d<b.length;d++)if(p.polygonContainsCoords(c,b[d]))return!0;d=0;for(c=c.rings;d<c.length;d++)if(b=c[d],b.length){var g=b[0];if(p.extentContainsCoords2D(a,g))return!0;for(var f=1;f<b.length;f++){var e=b[f];if(p.extentContainsCoords2D(a,e)||C(g,e,D))return!0;g=
e}}return!1}function E(a,c){q[0]=a.xmin;q[1]=a.ymax;r[0]=a.xmax;r[1]=a.ymax;t[0]=a.xmin;t[1]=a.ymin;u[0]=a.xmax;u[1]=a.ymin;c=c.paths;for(var d=0;d<c.length;d++){var b=c[d];if(c.length){var g=b[0];if(p.extentContainsCoords2D(a,g))return!0;for(var f=1;f<b.length;f++){var e=b[f];if(p.extentContainsCoords2D(a,e)||C(g,e,D))return!0;g=e}}}return!1}function C(a,c,d){for(var b=0;b<d.length;b++)if(x(a,c,d[b][0],d[b][1]))return!0;return!1}function x(a,c,d,b,g){var f=a[0];a=a[1];var e=c[0];c=c[1];var h=d[0],
l=d[1];d=b[0]-h;h=f-h;var m=e-f;b=b[1]-l;l=a-l;var w=c-a,v=b*m-d*w;if(0===v)return!1;d=(d*l-b*h)/v;h=(m*l-w*h)/v;return 0<=d&&1>=d&&0<=h&&1>=h?(g&&(g[0]=f+d*(e-f),g[1]=a+d*(c-a)),!0):!1}Object.defineProperty(n,"__esModule",{value:!0});n.extentIntersectsPoint=z;n.extentIntersectsExtent=y;n.extentIntersectsMultipoint=A;var q=[0,0],r=[0,0],t=[0,0],u=[0,0],F=[q,r,t,u],D=[[t,q],[q,r],[r,u],[u,t]];n.extentIntersectsPolygon=B;n.extentIntersectsPolyline=E;var k=[0,0];n.isSelfIntersecting=function(a){for(var c=
0;c<a.length;c++){for(var d=a[c],b=0;b<d.length-1;b++)for(var g=d[b],f=d[b+1],e=c+1;e<a.length;e++)for(var h=0;h<a[e].length-1;h++){var l=a[e][h],m=a[e][h+1],w=x(g,f,l,m,k);if(w&&!(k[0]===g[0]&&k[1]===g[1]||k[0]===l[0]&&k[1]===l[1]||k[0]===f[0]&&k[1]===f[1]||k[0]===m[0]&&k[1]===m[1]))return!0}h=d.length;if(!(4>=h))for(b=0;b<h-3;b++){var v=h-1;0===b&&(v=h-2);g=d[b];f=d[b+1];for(e=b+2;e<v;e++)if(l=d[e],m=d[e+1],(w=x(g,f,l,m,k))&&!(k[0]===g[0]&&k[1]===g[1]||k[0]===l[0]&&k[1]===l[1]||k[0]===f[0]&&k[1]===
f[1]||k[0]===m[0]&&k[1]===m[1]))return!0}}return!1};n.segmentIntersects=x;n.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return y;case "esriGeometryMultipoint":case "multipoint":return A;case "esriGeometryPoint":case "point":return z;case "esriGeometryPolygon":case "polygon":return B;case "esriGeometryPolyline":case "polyline":return E;case "mesh":return y}}});