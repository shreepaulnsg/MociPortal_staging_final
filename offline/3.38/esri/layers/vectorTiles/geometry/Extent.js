// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/geometry/Extent","require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(z,I,D,l,E,h,F,G,A,C,H,B,q){function u(x,d,p){return null==d?p:null==p?d:x(d,p)}z=function(x){function d(){for(var a=0;a<arguments.length;a++);a=x.call(this)||
this;a.type="extent";a.xmin=0;a.ymin=0;a.mmin=void 0;a.zmin=void 0;a.xmax=0;a.ymax=0;a.mmax=void 0;a.zmax=void 0;return a}D(d,x);var p=d;d.prototype.normalizeCtorArgs=function(a,b,c,f,e){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:A.WGS84,a):{xmin:a,ymin:b,xmax:c,ymax:f,spatialReference:null!=e?e:A.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(d.prototype,
"center",{get:function(){var a=new G({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});d.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):
this.offset(a.x-b.x,a.y-b.y)};d.prototype.clone=function(){var a=new p;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};d.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,
!0));return"point"===a.type?C.extentContainsPoint(this,a):"extent"===a.type?C.extentContainsExtent(this,a):!1};d.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};d.prototype.expand=
function(a){a=.5*(1-a);var b=this.width*a,c=this.height*a;this.xmin+=b;this.ymin+=c;this.xmax-=b;this.ymax-=c;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};d.prototype.intersects=function(a){if(!a)return!1;var b=this.spatialReference,c=a.spatialReference;b&&c&&!b.equals(c)&&q.canProject(b,c)&&(a=b.isWebMercator?q.geographicToWebMercator(a):q.webMercatorToGeographic(a,!0));b=H.getExtentIntersector(a.type);
return"mesh"!==a.type?b(this,a):b(this,a.extent)};d.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};d.prototype.offset=function(a,b,c){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=c&&(this.zmin+=c,this.zmax+=c);return this};d.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};d.prototype.union=function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=
Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=u(Math.min,this.zmin,a.zmin),this.zmax=u(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=u(Math.min,this.mmin,a.mmin),this.mmax=u(Math.max,this.mmax,a.mmax);return this};d.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=u(Math.max,this.zmin,
a.zmin),this.zmax=u(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=u(Math.max,this.mmin,a.mmin),this.mmax=u(Math.min,this.mmax,a.mmax);return this};d.prototype.toJSON=function(a){return this.write(null,a)};d.prototype._shiftCM=function(a){void 0===a&&(a=B.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,c=this._getCM(a);if(c){var f=b.isWebMercator?q.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;b.isWebMercator||(f.x=this._normalizeX(f.x,
a).x);this.spatialReference=new A(E.substitute({Central_Meridian:f.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};d.prototype._getCM=function(a){var b=null,c=a.valid;a=c[0];c=c[1];var f=this.xmin,e=this.xmax;f>=a&&f<=c&&e>=a&&e<=c||(b=this.center);return b};d.prototype._normalize=function(a,b,c){var f=this.spatialReference;if(!f)return this;c=c||B.getInfo(f);if(!c)return this;var e=this._getParts(c).map(function(g){return g.extent});if(2>e.length)return e[0]||this;if(2<e.length)return a?this._shiftCM(c):
this.set({xmin:c.valid[0],xmax:c.valid[1]});if(a)return this._shiftCM(c);if(b)return e;var r=!0,t=!0;e.forEach(function(g){g.hasZ||(r=!1);g.hasM||(t=!1)});return{rings:e.map(function(g){var n=[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]];if(r)for(var k=(g.zmax-g.zmin)/2,m=0;m<n.length;m++)n[m].push(k);if(t)for(g=(g.mmax-g.mmin)/2,m=0;m<n.length;m++)n[m].push(g);return n}),hasZ:r,hasM:t,spatialReference:f}};d.prototype._getParts=function(a){var b=this.cache._parts;
if(!b){b=[];var c=this.ymin,f=this.ymax,e=this.spatialReference,r=this.width,t=this.xmin,g=this.xmax,n=void 0;a=a||B.getInfo(e);var k=a.valid,m=k[0],y=k[1];n=this._normalizeX(this.xmin,a);var v=n.x;k=n.frameId;n=this._normalizeX(this.xmax,a);var w=n.x;a=n.frameId;n=v===w&&0<r;if(r>2*y){r=new p(t<g?v:w,c,y,f,e);t=new p(m,c,t<g?w:v,f,e);g=new p(0,c,y,f,e);c=new p(m,c,0,f,e);f=[];e=[];r.contains(g)&&f.push(k);r.contains(c)&&e.push(k);t.contains(g)&&f.push(a);t.contains(c)&&e.push(a);for(m=k+1;m<a;m++)f.push(m),
e.push(m);b.push({extent:r,frameIds:[k]},{extent:t,frameIds:[a]},{extent:g,frameIds:f},{extent:c,frameIds:e})}else v>w||n?b.push({extent:new p(v,c,y,f,e),frameIds:[k]},{extent:new p(m,c,w,f,e),frameIds:[a]}):b.push({extent:new p(v,c,w,f,e),frameIds:[k]});this.cache._parts=b}a=this.hasZ;c=this.hasM;if(a||c)for(k={},a&&(k.zmin=this.zmin,k.zmax=this.zmax),c&&(k.mmin=this.mmin,k.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(k);return b};d.prototype._normalizeX=function(a,b){var c=b.valid;b=c[0];
var f=c[1];c=2*f;var e=0;a>f?(b=Math.ceil(Math.abs(a-f)/c),a-=b*c,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,e=-b);return{x:a,frameId:e}};l([h.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],d.prototype,"cache",void 0);l([h.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"center",null);l([h.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"extent",null);l([h.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],
d.prototype,"hasM",null);l([h.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasZ",null);l([h.property({readOnly:!0,dependsOn:["ymin","ymax"]})],d.prototype,"height",null);l([h.property({readOnly:!0,dependsOn:["xmin","xmax"]})],d.prototype,"width",null);l([h.property({type:Number,json:{write:!0}})],d.prototype,"xmin",void 0);l([h.property({type:Number,json:{write:!0}})],d.prototype,"ymin",void 0);l([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},
write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"mmin",void 0);l([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"zmin",void 0);l([h.property({type:Number,json:{write:!0}})],d.prototype,"xmax",void 0);l([h.property({type:Number,json:{write:!0}})],d.prototype,"ymax",void 0);l([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],
d.prototype,"mmax",void 0);l([h.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"zmax",void 0);return d=p=l([h.subclass("esri.geometry.Extent")],d)}(h.declared(F));z.prototype.toJSON.isDefaultToJSON=!0;return z});