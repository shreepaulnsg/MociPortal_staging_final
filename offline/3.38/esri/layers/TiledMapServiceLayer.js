// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/layers/TiledMapServiceLayer","dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),function(J,x,K,E,P,w,Q,R,p,Y,S,T,v,U,F,V,L,G,M,Z,W){J=J(W,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(a,
b){x.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=b?b.displayLevels:null)?this._displayLevels[0]:0;this.resampling=b?b.resampling:void 0;this._resamplingTolerance=b?b.resamplingTolerance:null;this.exclusionAreas=b?b.exclusionAreas:null;a=K.hitch;this._addImage=a(this,this._addImage);this._tileLoadHandler=a(this,this._tileLoadHandler);this._tileErrorHandler=a(this,this._tileErrorHandler);this._popTile=a(this,this._popTile);this._cleanUpRemovedImages=a(this,this._cleanUpRemovedImages);
this._fireOnUpdateEvent=a(this,this._fireOnUpdateEvent);this._transitionEnd=a(this,this._transitionEnd);this._tileMapCallback=a(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var a=this.tileInfo,b=a.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=a.width;this._tileH=a.height;var d=this.scales=[],e=this._displayLevels,c=-Infinity,f=Infinity,k=this.fullExtent,h=new G(k.xmin,k.ymax);k=new G(k.xmax,k.ymin);var m=L.getContainingTileCoords,
g,q=b.length;for(g=0;g<q;g++){var l=b[g];var n=m(a,h,l);l.startTileRow=0>n.row?0:n.row;l.startTileCol=0>n.col?0:n.col;n=m(a,k,l);l.endTileRow=n.row;l.endTileCol=n.col;e&&-1===E.indexOf(e,l.level)||(d[g]=l.scale,c=l.scale>c?l.scale:c,f=l.scale<f?l.scale:f)}-Infinity===c||this._hasMin||this.setMinScale(c);Infinity===f||this._hasMax||this.setMaxScale(f);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=F("ie")&&7>F("ie")&&(this.isPNG32||"Mixed"===a.format)},isVisibleAtScale:function(a){return a?
W.prototype._isMapAtVisibleScale.call(this,a,!0):!1},_isMapAtVisibleScale:function(a){var b=this.inherited(arguments,[a,!0]);if(b){var d=this._map;b=this.scales;var e=d.getScale(),c=!1,f=d.width>d.height?d.width:d.height;for(d=0;d<b.length;d++)if(Math.abs(b[d]-e)/b[d]<1/f){c=!0;break}b=c}return b},_setMap:function(a,b,d,e){this.inherited(arguments);this._map=a;var c=this._div=w.create("div",null,b),f=a.__visibleDelta,k=x.connect,h=v._css.names,m={position:"absolute",width:a.width+"px",height:a.height+
"px",overflow:"visible"},g=U.defaults.map.zoomDuration;"css-transforms"===a.navigationMode?(m[h.transform]=v._css.translate(-f.x,-f.y),p.set(c,m),delete m[h.transform],m[h.transition]=h.transformName+" "+g+"ms ease",p.set(this._active=w.create("div",null,c),m),this._active._remove=0,this._passives=[]):(m.left=-f.x+"px",m.top=-f.y+"px",p.set(c,m));this._onResizeHandler_connect=k(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=k(this,"onOpacityChange",this,"_opacityChangeHandler");
f=this.tileInfo;k=f.spatialReference;h=k._getInfo();(this._wrap=a.wrapAround180&&k._isWrappable()&&Math.abs(h.origin[0]-f.origin.x)<=h.dx)&&L._addFrameInfo(f,h);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!a.loaded)var q=x.connect(a,"onLoad",this,function(){x.disconnect(q);q=null;this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension()});return c},_unsetMap:function(a,b){this.suspended||this._suspendImpl();w.destroy(this._div);this._map=this._div=
null;var d=x.disconnect;d(this._onResizeHandler_connect);d(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){V.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var a=this._tiles,b=this._tileIds,d=this._loadingList,e,c,f=x.disconnect,k=w.destroy;d&&0<d.count&&(d.forEach(function(m){if(e=a[m])f(e._onload_connect),f(e._onerror_connect),f(e._onabort_connect),
e._onload_connect=e._onerror_connect=e._onabort_connect=null}),d.clear(),this._fireUpdateEnd());this._removeList.clear();for(d=b.length-1;0<=d;d--)(e=(c=b[d])&&a[c])&&k(e);if("css-transforms"===this._map.navigationMode){b=this._active;c=this._passives;this._noDom=0;for(d=c.length-1;0<=d;d--){var h=c[d];h._endHandle&&f(h._endHandle);h._matrix=h._multiply=h._endHandle=null;h._marked=h._remove=0;c.splice(d,1);k(h)}b._matrix=b._multiply=null;b._marked=b._remove=0}this._tileIds=this._tiles=this._tileBounds=
this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new S;this._loadingList=new S;V.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(K.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var a=this._map,b=x.connect;if("css-transforms"===
a.navigationMode){if(this._onScaleHandler_connect=b(a,"onScale",this,this._onScaleHandler),F("esri-mobile")){this._standby=[];var d=this,e=function(){d._noDom=1};this._onPanStartHandler_connect=b(a,"onPanStart",e);this._onZoomStartHandler_connect=b(a,"onZoomStart",e)}}else this._onZoomHandler_connect=b(a,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=
x.disconnect;a(this._onPanHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onPanStartHandler_connect);a(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null},_onResizeHandler:function(a,b,d){a={width:b+"px",height:d+"px"};b=p.set;b(this._div,a);if("css-transforms"===
this._map.navigationMode)for(this._active&&b(this._active,a),d=this._passives.length-1;0<=d;d--)b(this._passives[d],a)},_onExtentChangeHandler:function(a,b,d,e){b=this._map;var c=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!b._isPanningOrZooming()){if("css-transforms"===b.navigationMode){if(d)for(e=this._passives.length-1;0<=e;e--){var f=this._passives[e];p.set(f,v._css.names.transition,"none");f._marked?(this._passives.splice(e,1),f.parentNode&&f.parentNode.removeChild(f),
w.destroy(f)):0<f.childNodes.length&&(f._multiply=f._multiply?T.multiply(f._matrix,f._multiply):f._matrix)}this._noDom=0;if(c&&c.length)for(e=c.length-1;0<=e;e--)f=c[e],p.set(f,"visibility","inherit"),this._popTile(f),c.splice(e,1)}this._fireUpdateStart();this._rrIndex=0;e=L.getCandidateTileInfo(b,this.tileInfo,a);a=b.__visibleDelta;if(!this._ct||e.lod.level!==this._ct.lod.level||d){f=e&&this._ct&&e.lod.level!==this._ct.lod.level;this._ct=e;var k=this._tiles,h=this._tileIds,m=this._tileBounds,g=this._removeList,
q=h.length;this._cleanUpRemovedImages();for(e=0;e<q;e++){c=h[e];var l=k[c];m[c]=h[e]=null;"css-transforms"===b.navigationMode&&f&&l.parentNode&&b.fadeOnZoom&&(l._fadeOut=f,l.parentNode._remove++);g.add(l)}d&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}e=a.x;d=a.y;"css-transforms"===b.navigationMode?(c={},c[v._css.names.transform]=v._css.translate(e,d),p.set(this._div,c)):p.set(this._div,{left:e+"px",top:d+"px"});this.__coords_dx=e;this.__coords_dy=d;this._updateImages(new M(0,0,a.width,
a.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;d=this._tileW;k=this._tileH;a=new M(-a.x,-a.y,a.width,a.height);for(e=this._tileIds.length-1;0<=e;e--)(c=this._tileIds[e])?(f=this._tiles[c],h=R.getMarginBox(f),h=new M(h.l,h.t,d,k),"css-transforms"===b.navigationMode&&(h.x=f._left,h.y=f._top),a.intersects(h)?this._tileBounds[c]=h:(this._loadingList.contains(c)&&this._popTile(f),w.destroy(f),this._tileIds.splice(e,1),delete this._tileBounds[c],
delete this._tiles[c])):(this._tileIds.splice(e,1),delete this._tileBounds[c],delete this._tiles[c])}},_onPanHandler:function(a,b){a=this._map;b=a.__visibleDelta.offset(b.x,b.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===a.navigationMode?(a={},a[v._css.names.transform]=v._css.translate(b.x,b.y),p.set(this._div,a),F("esri-mobile")||this._updateImages({x:-b.x,y:-b.y,width:b.width,height:b.height})):(p.set(this._div,{left:b.x+"px",top:b.y+"px"}),this._updateImages({x:-b.x,y:-b.y,width:b.width,
height:b.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(a,b){var d,e={},c=v._css.names,f=this._map,k=U.defaults.map.zoomDuration;for(d=this._passives.length-1;0<=d;d--){var h=this._passives[d];0===h.childNodes.length?(this._passives.splice(d,1),w.destroy(h)):("none"===h.style[c.transition]&&p.set(h,c.transition,c.transformName+" "+k+"ms ease"),p.set(h,c.transition,b?"none":c.transformName+" "+k+"ms ease"),h._matrix=a,e[c.transform]=v._css.matrix(h._multiply?
T.multiply(a,h._multiply):a),p.set(h,e))}this._active&&0===this._active.childNodes.length||(p.set(this._active,c.transition,b?"none":c.transformName+" "+k+"ms ease"),this._active._matrix=a,e[c.transform]=v._css.matrix(this._active._matrix),p.set(this._active,e),this._passives.push(this._active),e={position:"absolute",width:f.width+"px",height:f.height+"px",overflow:"visible"},e[c.transition]=c.transformName+" "+k+"ms ease",p.set(this._active=w.create("div",null,this._div),e),this._active._remove=
0,f.fadeOnZoom&&w.place(this._active,this._div,"first"))},_onZoomHandler:function(a,b,d){a=R.getMarginBox(this._div);d=d.offset(-a.l,-a.t);this._previousScale&&1!==b||(this._previousScale=1);var e,c=this._tileW*b,f=this._tileH*b,k=this._tileBounds,h=this._tiles,m=this._previousScale,g=this._multiple,q=p.set,l,n;if((a=F("ie"))&&8>a)E.forEach(this._tileIds,function(z){n="";e=k[z];l=h[z].style.margin.split(" ");E.forEach(l,function(A){""!==n&&(n+=" ");A=parseFloat(A);n+=A/m*b+"px"});q(h[z],{left:e.x-
(c-e.width)*(d.x-e.x)/e.width+"px",top:e.y-(f-e.height)*(d.y-e.y)/e.height+"px",margin:1!==g&&-1===n.indexOf("NaN")?n:"",zoom:b})});else{var B=c*g,r=f*g,t,C;E.forEach(this._tileIds,function(z){n="";e=k[z];t=e.x-(c-e.width)*(d.x-e.x)/e.width;C=e.y-(f-e.height)*(d.y-e.y)/e.height;l=h[z].style.margin.split(" ");E.forEach(l,function(A){""!==n&&(n+=" ");A=parseFloat(A);n+=A/m*b+"px"});q(h[z],{left:t+"px",top:C+"px",margin:1!==g&&-1===n.indexOf("NaN")?n:"",width:B+"px",height:r+"px"})})}this._previousScale=
b},_updateImages:function(a){if(this._ct){var b=this._tileW,d=this._tileH,e=this._ct;var c=e.lod;e=e.tile;var f=e.offsets,k=e.coords,h=k.row;k=k.col;var m=c.level,g=this.opacity,q=this._tileIds,l=this._loadingList,n=this._addImage,B=this._map.id,r=this.id,t=a.x,C=a.y,z=c.startTileRow,A=c.endTileRow,aa=c.startTileCol,ba=c.endTileCol,ca=E.indexOf,N=f.x-this.__coords_dx,H=f.y-this.__coords_dy;var u=b-N+-a.x;var y=d-H+-a.y;var D=Math.ceil;u=0<u?u%b:b-Math.abs(u)%b;y=0<y?y%d:d-Math.abs(y)%d;t=0<t?Math.floor((t+
N)/b):D((t-(b-N))/b);C=0<C?Math.floor((C+H)/d):D((C-(d-H))/d);H=t+D((a.width-u)/b);a=C+D((a.height-y)/d);if(this._wrap){var I=c._frameInfo;var O=I[0];var X=I[1];I=I[2]}for(y=t;y<=H;y++)for(t=C;t<=a;t++)D=h+t,u=k+y,this._wrap&&(u<X?(u%=O,u=u<X?u+O:u):u>I&&(u%=O)),!this._isExcluded(m,D,u)&&D>=z&&D<=A&&u>=aa&&u<=ba&&(c=B+"_"+r+"_tile_"+m+"_"+t+"_"+y,-1===ca(q,c)&&(l.add(c),q.push(c),n(m,t,D,y,u,c,b,d,g,e,f)))}},_cleanUpRemovedImages:function(){var a=this._removeList,b=w.destroy,d,e=v._css.names;a.forEach(function(f){f._fadeOut||
(f.style.filter="",f.style.zoom=1,b(f))});if("css-transforms"===this._map.navigationMode)for(d=this._passives.length-1;0<=d;d--){var c=this._passives[d];0===c.childNodes.length?(this._passives.splice(d,1),b(c)):this._map.fadeOnZoom&&!c._marked&&c._remove===c.childNodes.length&&(c._marked=1,2048>v._css.getScaleFromMatrix(p.get(c,e.transform))?(p.set(c,e.transition,"opacity 0.65s"),p.set(c,"opacity",0),x.disconnect(c._endHandle),c._endHandle=x.connect(c,e.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",
target:c}))}a.clear()},_transitionEnd:function(a){var b=a.target;"opacity"===a.propertyName&&(x.disconnect(b._endHandle),b._endHandle=null,a=E.indexOf(this._passives,b),-1<a&&this._passives.splice(a,1),b.parentNode&&b.parentNode.removeChild(b),w.destroy(b))},_addImage:function(a,b,d,e,c,f,k,h,m,g,q){if(this._patchIE)g=this._tiles[f]=w.create("div"),g.id=f,Q.add(g,"layerTile"),p.set(g,{left:k*e-q.x+"px",top:h*b-q.y+"px",width:k+"px",height:h+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+
this.getTileUrl(a,d,c)+"', sizingMethod\x3d'scale')"}),1>m&&p.set(g,"opacity",m),a=g.appendChild(w.create("div")),p.set(a,{opacity:0,width:k+"px",height:h+"px"}),this._div.appendChild(g),g=null,this._loadingList.remove(f),this._fireOnUpdateEvent();else{g=this._tiles[f]=w.create("img");var l=x.connect;g.id=f;g._uid=a+"_"+d+"_"+c;g.alt="";Q.add(g,"layerTile");e=k*e-q.x;q=h*b-q.y;b=this._map;var n=v._css.names;k={width:k+"px",height:h+"px",visibility:"hidden"};"css-transforms"===b.navigationMode?(k[n.transform]=
v._css.translate(e,q),p.set(g,k),g._left=e,g._top=q):(k.left=e+"px",k.top=q+"px",p.set(g,k));1>m&&p.set(g,"opacity",m);g._onload_connect=l(g,"onload",this,"_tileLoadHandler");g._onerror_connect=l(g,"onerror",K.hitch(this,"_tileErrorHandler",d,c));g._onabort_connect=l(g,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(a,d,c,f,this._tileMapCallback);else if(f=this.getTileUrl(a,d,c,g))this._failedRequests&&this._failedRequests[f]?(p.set(g,this._failedRequests[f].css),g.src=this._failedRequests[f].src,
this._multiple=parseInt(this._failedRequests[f].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,g.src=f);"css-transforms"===b.navigationMode?this._active.appendChild(g):this._div.appendChild(g);g=null}},_tileMapCallback:function(a,b){if(!this.suspended){var d=this._tiles[b.id]||Y.byId(b.id);var e=b.level+"_"+b.row+"_"+b.col;d&&d._uid===e?(this._multiple=2*(b.level-a.level)||1,this.isResampling=1!==this._multiple,b=this.tileMap.style(a,b),p.set(d,
b),d.src=this.getTileUrl(a.level,a.row,a.col)):this._popTile(b)}},getTileUrl:function(a,b,d){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(a){var b=x.disconnect;b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;this._loadingList.remove(a.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(a){a=a.currentTarget;
this._noDom?this._standby.push(a):(p.set(a,"visibility","inherit"),this._popTile(a))},_tileAbortHandler:function(a){a=a.currentTarget;this.onError(Error("Unable to load tile: "+a.src));p.set(a,"visibility","hidden");this._popTile(a)},_tileErrorHandler:function(a,b,d){d=d.currentTarget;var e=!0;if(this.tileMap||!this.resampling)e=!1;else{var c=new P(d.src);c=c.path.split("/");c=parseInt(c[c.length-3]);var f=this._ct.lod.level-c+1;this._multiple=Math.pow(2,f);if(c===this._lowestLevel||0===this._resamplingTolerance||
this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)e=!1}e?(this.isResampling=!0,this._resample(d,a,b)):(this.onError(Error("Unable to load tile: "+d.src)),p.set(d,"visibility","hidden"),this._popTile(d))},_resample:function(a,b,d){var e=(new P(a.src)).path.split("/"),c=this._multiple,f=parseInt(e[e.length-3])-1,k=parseInt(b/c),h=parseInt(d/c);e=d%c;var m=b%c;k=this.getTileUrl(f,k,h);b=this.getTileUrl(f+Math.log(c)/Math.LN2,b,d);c={width:this._tileW*c+"px",height:this._tileH*
c+"px",margin:"-"+this._tileW*m+"px 0 0 -"+(this._tileH*e+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[b]={src:k,css:c};p.set(a,c);F("chrome")&&a.setAttribute("src",null);a.src=k},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=
p.set,d,e;if("css-transforms"===this._map.navigationMode){if(this._active){var c=this._active.childNodes;for(d=c.length-1;0<=d;d--)b(c[d],"opacity",a)}for(d=this._passives.length-1;0<=d;d--)for(c=this._passives[d].childNodes,e=c.length-1;0<=e;e--)b(c[e],"opacity",a)}else for(c=this._div.childNodes,d=c.length-1;0<=d;d--)b(c[d],"opacity",a)},setExclusionAreas:function(a){this.exclusionAreas=a;if(this.loaded&&this._map&&this._map.loaded){var b=this._map.spatialReference,d=this.tileInfo,e=d.origin,c=
d.lods,f=c[0].level,k=c[c.length-1].level,h,m,g;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var q=0;for(h=a.length;q<h;q++){var l=a[q];if((g=l.geometry)&&"extent"===g.type&&g.xmin<=g.xmax&&g.ymin<=g.ymax){if(!b.equals(g.spatialReference))if(b._canProject(g.spatialReference)){if(b.isWebMercator()){var n=G.lngLatToXY(g.xmin,g.ymin);g=G.lngLatToXY(g.xmax,g.ymax)}else n=G.xyToLngLat(g.xmin,g.ymin,!0),g=G.xyToLngLat(g.xmax,g.ymax,!0);g=new Z(n[0],n[1],g[0],g[1],b)}else continue;
var B=-1;if(l.minZoom&&-1!==l.minZoom)B=l.minZoom;else if(l.minScale&&-1!==l.minScale){var r=0;for(m=c.length;r<m;r++)if(c[r].scale<=l.minScale){B=c[r].level;break}}B=Math.max(B,f);n=-1;if(l.maxZoom&&-1!==l.maxZoom)n=l.maxZoom;else if(l.maxScale&&-1!==l.maxScale)for(r=0,m=c.length;r<m;r++)if(c[r].scale<l.maxScale){n=c[r-1].level;break}else if(c[r].scale===l.maxScale){n=c[r].level;break}n=-1===n?k:Math.min(n,k);for(l=B;l<=n;l++){r=0;for(m=c.length;r<m;r++)if(c[r].level===l){var t=c[r];break}t&&(this._exclusionsPerZoom[l]||
(this._exclusionsPerZoom[l]=[]),r=1/t.resolution/d.rows,m=1/t.resolution/d.cols,this._exclusionsPerZoom[l].push({rowFrom:Math.floor((e.y-g.ymax)*r),rowTo:Math.ceil((e.y-g.ymin)*r),colFrom:Math.floor((g.xmin-e.x)*m),colTo:Math.ceil((g.xmax-e.x)*m)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(a,b,d){var e;if(!this._exclusionsPerZoom)return!1;var c=this._exclusionsPerZoom[a];if(!c)return!1;var f=0;
for(e=c.length;f<e;f++)if(a=c[f],b>=a.rowFrom&&b<a.rowTo&&d>=a.colFrom&&d<a.colTo)return!0;return!1}});F("extend-esri")&&K.setObject("layers.TiledMapServiceLayer",J,v);return J});