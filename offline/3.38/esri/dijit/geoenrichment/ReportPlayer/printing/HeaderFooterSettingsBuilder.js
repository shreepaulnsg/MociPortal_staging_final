// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/printing/HeaderFooterSettingsBuilder","dojo/string esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/DateUtil ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../PlayerViewModes dojo/i18n!esri/nls/jsapi".split(" "),function(q,r,t,u,v,k){k=k.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{createHeaderFooterParams:function(a,b,d){if(a.viewMode===v.PANELS_IN_STACK_ALL){var f=a.getCurrentReportContainer().getVisibleAreas(),g=b.dynamicReportInfo.combinedAreasInfo,
l,n=f.every(function(c){c=c.isGrouped+";"+c.groupIndex;l=l||c;return l===c});var p=(n=n&&g.groups&&f.length===g.groups[f[0].groupIndex].indexes.length)?f.length===a.getAnalysisAreas().length?[g]:[g.groups[f[0].groupIndex]]:[null]}else p=b.dynamicReportInfo.isMultiFeature?[b.dynamicReportInfo.combinedAreasInfo]:a.getAnalysisAreas();var h=b.getDocumentDefaultStyles(),m={backgroundColor:h.backgroundColor,color:h.color,fontFamily:h.fontFamily};return r(this._getSourceText(a,d),function(c){return p.map(function(e){return{header:{show:d.addHeader,
title:d.reportTitle||a.getReportTitle(),subtitle:d.reportSubtitle||a.printConfig.subtitle,siteInfo:e&&{siteName:e.name,siteDesc:e.description,siteAddr:e.address,latitude:e.latitude,longitude:e.longitude},style:{headerStyle:m,titleStyle:b.getTableDefaultStyles(null,"ReportTitle"),latLongStyle:b.getTableDefaultStyles(null,"GreyText")}},dataSource:{show:c&&d.addDataSource,sourceText:c&&q.substitute(k.sourcePattern,{source:c}),style:{dataSourceStyle:m}},footer:{show:d.addFooter,copyrightText:"\u00a9"+
(new Date).getFullYear()+" Esri",formattedDate:t.getReportFooterDate(),style:{footerStyle:m}},documentStyle:h}})})},_getSourceText:function(a,b){if(!b.addDataSource)return null;b=a.getReportData();return a.isDataDrillingPlayer?(a=u.collectVariablesStats(b.templateJson),b.templateVariableProvider.getVariablesDataVintageAndSources({usedVariablesCache:a}).dataVintageDescription):b.reportObject.dataVintageDescription}}});