// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/promise/all":function(){define(["dojo/promise/all"],function(w){return w})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(w){return w})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_CommandSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ../PlayerCommands ./supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/config".split(" "),function(w,
p,m,k,e,b,a,c){var d={};return p(null,{_commands:null,_commandIndex:0,_initCommandsPromise:null,constructor:function(){this._commands={}},_initCommands:function(){var f=this;if(this._initCommandsPromise)return e(this._initCommandsPromise);var h=new k;if(c.modules.exportCommands)w(["./commands/CreateHTMLCommand","./commands/CreatePDFCommand","./commands/CreateImageCommand","./commands/PrintReportCommand","./commands/CreatePlayerCommand"],function(l,q,t,r,u){d[b.HTML]=l;d[b.PDF]=q;d[b.IMAGE]=t;d[b.PRINT]=
r;d[b.DYNAMIC_HTML]=u;a.getInitPromise().then(h.resolve)});else return h.resolve();h.promise.then(function(){f._initCommandsPromise=!0});return this._initCommandsPromise=h.promise},registerCommand:function(f,h,l){function q(r){if(!r.isBrowserSupported||r.isBrowserSupported())t._commands[f]||(t._commands[f]={index:t._commandIndex++,id:f,label:h||r.label,command:r})}var t=this;if(l)q(l);else return this._initCommands().then(function(){var r=d[f];r&&q(new r)})},getCommands:function(){return this._initCommands().then(function(){var f=
[],h=this._commands[b.PDF],l;for(l in this._commands)f.push(this._commands[l]);f.sort(function(q,t){return q.index-t.index});return(l=this._getCurrentContext())&&l.geoenrichmentUrl&&h?e(a.hasCapability("FormatInfographics"),function(q){q||(f=f.filter(function(t){return t!==h}));return f}):e(f)}.bind(this))},getCommandById:function(f){return this._commands[f]&&this._commands[f].command},executeCommand:function(f,h,l,q){return this._initCommands().then(function(){l=m.mixin({printMapTaskUrl:this.printMapTaskUrl},
l);return this._commands[f]&&this._commands[f].command&&this._commands[f].command.execute(h,l||{},q)}.bind(this))},executeCommandOnData:function(f,h,l,q){return this._initCommands().then(function(){l=m.mixin({printMapTaskUrl:this.printMapTaskUrl},l);return this._commands[f]&&this._commands[f].command&&this._commands[f].command.executeOnData(this,h,l||{},q)}.bind(this))}})})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(w){return w})},"esri/dijit/geoenrichment/ReportPlayer/PlayerCommands":function(){define([],
function(){var w={HTML:"createHTML",PDF:"createPDF",PRINT:"print",DYNAMIC_HTML:"createDynamicHTML",IMAGE:"createImage",EXCEL:"exportToExcel",isSupported:function(p){for(var m in w)if(w[m]===p)return!0;return!1}};return w})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojox/uuid/generateRandomUuid esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/UrlUtil ./stdGeographies/StdGeographiesModel".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l,q,t){function r(v){return F?F:(v=v&&a.id.findCredential(v)||a.id.credentials[0])&&v.token}function u(v,D){var I=d.urlToObject(v);D=p.mixin({f:"json",token:r(v),langCode:dojo.locale},I.query||{},D);for(var K in D)v=D[K],v instanceof h||v&&"object"===typeof v&&(D[K]=JSON.stringify("function"===typeof v.toJson?v.toJson():v));return{url:I.path,taskParams:D}}function z(v){H||(H=new A(E));return!v||H.initialized?H:H.initialize()}var A=w(null,{url:null,_geInfo:null,_capabilities:null,
_supportedOperations:null,constructor:function(v){this._capabilities={};this._supportedOperations={};this.url=v},_initDfd:null,initialized:!1,initialize:function(){var v=this;if(this._initDfd)return this._initDfd.promise;this._initDfd=new m;l.requestPublicFirst(u(this.url).url+"/Geoenrichment",{content:{f:"json"},handleAs:"json"},{retryOnAnyError:!0}).then(function(D){v.initWithJson(D)});return this._initDfd.promise},initWithJson:function(v){this._geInfo=v;this._capabilities={};this._supportedOperations=
{};v.capabilities&&v.capabilities.forEach(function(D){this._capabilities[D.toLowerCase()]=!0},this);v.supportedOperations&&v.supportedOperations.forEach(function(D){this._supportedOperations[D.toLowerCase()]=!0},this);this._initDfd=this._initDfd||new m;this._initDfd.resolve();this.initialized=!0},hasCapability:function(v){return!!this._capabilities[v.toLowerCase()]},addCapability:function(v){this._capabilities[v.toLowerCase()]=!0},supportsOperation:function(v){return!!this._supportedOperations[v.toLowerCase()]},
enrich:function(v){v=u(this.url,v);v.taskParams.AddDerivativeVariables="all";return c({url:v.url+"/Geoenrichment/Enrich",content:v.taskParams,handleAs:"json"}).then(function(D){return D.results[0].value.FeatureSet||[]})},stdGeographyQuery:function(v){v=u(this.url,v);return c({url:v.url+"/StandardGeographyQuery/execute",content:v.taskParams,handleAs:"json"}).then(function(D){return D.results[0].value.features||[]})},getDataCollections:function(v,D,I){I=u(this.url,I);return c({url:I.url+"/Geoenrichment/DataCollections/"+
v+(D?"/"+D:""),content:I.taskParams,handleAs:"json"}).then(function(K){return K.DataCollections})},getCountries:function(){var v=u(this.url);return c({url:v.url+"/Geoenrichment/Countries",content:v.taskParams,handleAs:"json"}).then(function(D){return D.countries})},getCountryInfo:function(v){var D=this,I=f.get("GEUtil.countries");if(!I[v]){var K=u(this.url);I[v]=c({url:K.url+"/Geoenrichment/Countries/"+v,content:K.taskParams,handleAs:"json"}).then(function(S){var N=S.countries[0],T={};return e(N.hierarchies.map(function(M){return k(D._getStdGeographyModel(v,
M.ID),function(V){T[M.ID]=V})})).then(function(){return{country:N,geographiesModels:T}})})}return I[v]},_getStdGeographyModel:function(v,D){var I=f.get("GEUtil.stdModels"),K=v+D;if(!I[K]){var S=u(this.url);I[K]=c({url:S.url+"/Geoenrichment/StandardGeographyLevels/"+v+"/"+D,content:S.taskParams,handleAs:"json"}).then(function(N){return new t({countryID:v,hierarchyID:D,levels:N.geographyLevels[0].hierarchies[0].levels})})}return I[K]},formatReport:function(v){v=u(this.url,v);return l.request({url:v.url,
urlSuffix:"Geoenrichment/FormatReport"},{handleAs:"bin",content:v.taskParams}).then(function(D){return D&&D.data&&"text/plain"===D.data.type?null:D})},getReports:function(v){var D=u(this.url);return c({url:D.url+"/Geoenrichment/reports/"+v,content:D.taskParams,handleAs:"json"}).then(function(I){return I.reports})},createReport:function(v){var D=u(this.url,v),I=b();!1===v.forStorage&&(f.get("GEUtil.tasks")[I]={taskName:"createReport",taskParams:p.clone(v)});return l.request({url:D.url,urlSuffix:"Geoenrichment/createReport"},
{handleAs:"xml"===v.format?"text":"bin",content:D.taskParams}).then(function(K){return{taskID:I,result:K}})},consumeCredits:function(v){var D=f.get("GEUtil.tasks")[v];if(D)return delete D.taskParams.forStorage,delete f.get("GEUtil.tasks")[v],this[D.taskName](D.taskParams)},getLayerInfos:function(v){var D=f.get("GEUtil.dataLayers");D[v]||(D[v]=this._getLayerInfos(v));return D[v]},_getLayerInfos:function(v){var D=u(this.url);return c({url:D.url+"/Geoenrichment/DataLayers/"+v,content:D.taskParams,handleAs:"json"}).then(function(I){return I&&
I.layers||[]}).otherwise(function(I){console.log(I);return[]})},getLayerInfo:function(v,D){var I=f.get("GEUtil.dataLayers"),K=v+"_"+D;I[K]||(I[K]=this._getLayerInfo(v,D));return I[K]},_getLayerInfo:function(v,D){var I=u(this.url);return c({url:I.url+"/Geoenrichment/DataLayers/"+v+"/"+D,content:I.taskParams,handleAs:"json"}).then(function(K){return K&&K.layer}).otherwise(function(K){console.log(K);return null})}}),B={},E,F,G=new m;B.setGeoenrichmentUrl=function(v,D){(E=v||E)&&q.registerCORS(E);F=D||
F;!G.promise.isFulfilled()&&G.resolve()};B.canMakeRequests=function(){return!!E};B.getInitPromise=function(){return G.promise};B.GEClient=A;var H;B.getClient=function(){return z()};B.initialize=function(){return k(z(!0))};B.initWithJson=function(v,D){B.setGeoenrichmentUrl(v);z().initWithJson(D)};B.enrich=function(v){return z().enrich(v)};B.stdGeographyQuery=function(v){return z().stdGeographyQuery(v)};B.getDataCollections=function(v,D,I){return z().getDataCollections(v,D,I)};B.formatReport=function(v){return z().formatReport(v)};
B.createReport=function(v){return z().createReport(v)};B.consumeCredits=function(v){return z().consumeCredits(v)};B.getLayerInfos=function(v){return z().getLayerInfos(v)};B.hasCapability=function(v){return k(z(!0),function(){return H&&H.hasCapability(v)})};B.addCapability=function(v){return z().addCapability(v)};B.supportsOperation=function(v){return k(z(!0),function(){return H&&H.supportsOperation(v)})};B.getCountryInfo=function(v){return z().getCountryInfo(v)};return B})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],
function(){dojox.uuid.generateRandomUuid=function(){function w(){for(var b=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>b.length;)b="0"+b;return b}var p=w(),m=w();m=m.substring(0,4)+"-4"+m.substring(5,8);var k=w();k="8"+k.substring(1,4)+"-"+k.substring(4,8);var e=w();return(p+"-"+m+"-"+k+e).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(w){w.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";
dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(p,m){if(!p)throw m||(m="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(m);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=function(p){p=p.toString();var m=w.isString(p)&&36==p.length&&p==p.toLowerCase();if(m){p=
p.split("-");m=5==p.length&&8==p[0].length&&4==p[1].length&&4==p[2].length&&4==p[3].length&&12==p[4].length;for(var k in p){var e=parseInt(p[k],16);m=m&&isFinite(e)}}return m};dojox.uuid.getVariant=function(p){if(!dojox.uuid._ourVariantLookupTable){var m=dojox.uuid.variant,k=[];k[0]=m.NCS;k[1]=m.NCS;k[2]=m.NCS;k[3]=m.NCS;k[4]=m.NCS;k[5]=m.NCS;k[6]=m.NCS;k[7]=m.NCS;k[8]=m.DCE;k[9]=m.DCE;k[10]=m.DCE;k[11]=m.DCE;k[12]=m.MICROSOFT;k[13]=m.MICROSOFT;k[14]=m.UNKNOWN;k[15]=m.UNKNOWN;dojox.uuid._ourVariantLookupTable=
k}p=p.toString();p=p.charAt(19);p=parseInt(p,16);dojox.uuid.assert(0<=p&&16>=p);return dojox.uuid._ourVariantLookupTable[p]};dojox.uuid.getVersion=function(p){dojox.uuid.assert(dojox.uuid.getVariant(p)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");p=p.toString();p=p.charAt(14);return parseInt(p,16)};dojox.uuid.getNode=function(p){dojox.uuid.assert(dojox.uuid.getVersion(p)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");
p=p.toString();return p.split("-")[4]};dojox.uuid.getTimestamp=function(p,m){dojox.uuid.assert(dojox.uuid.getVersion(p)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");p=p.toString();m||(m=null);switch(m){case "string":case String:return dojox.uuid.getTimestamp(p,Date).toUTCString();case "hex":var k=p.split("-");p=k[0];m=k[1];k=k[2];k=k.slice(1);p=k+m+p;dojox.uuid.assert(15==p.length);return p;case null:case "date":case Date:return k=p.split("-"),p=parseInt(k[0],
16),m=parseInt(k[1],16),k=(parseInt(k[2],16)&4095)<<16,k=4294967296*(k+m),k+=p,new Date(k/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+m)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/CacheUtil":function(){define([],function(){var w={},p={};w.get=function(m,k){var e=p[m];e||k||(e=p[m]={});return e};w.set=function(m,k){return p[m]=k};w.clear=function(m,k){p={}};return w})},"esri/dijit/geoenrichment/utils/requests/FileContent":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/utils/DataUtil"],function(w,p){function m(e){return e?/^image\//.test(e)?"base64":/^text\//.test(e)?"text":/application\/json/.test(e)?"json":"bin":"bin"}var k=w(null,{data:null,filename:null,contentType:"application/octet-stream",contentTransferEncoding:"binary",constructor:function(e,b,a){this.data=e;b&&(this.contentType=b);a&&(this.contentTransferEncoding=a)},getBase64Data:function(){return this.data?"base64"==this.contentTransferEncoding?this.data:p.base64FromByteSource(this.data):
null},toString:function(){return this.filename||"\x3cunknown\x3e"}});k.fromArrayBuffer=function(e,b){return new k(p.binaryStringFromByteSource(e),b)};k.fromBlob=function(e,b){return p.arrayBufferFromBlob(e).then(function(a){return new k(p.binaryStringFromByteSource(a),b||e.type)})};k.fromFileData=function(e,b,a){a=a||p.getContentType(e);if("object"==typeof b&&window.ArrayBuffer&&(b instanceof ArrayBuffer||b.buffer instanceof ArrayBuffer))b=p.binaryStringFromByteSource(b.buffer||b);else{var c=m(a);
"json"==c&&"object"==typeof b&&(b=JSON.stringify(b));if("string"!=typeof b)throw Error("Wrong file data.");switch(c){case "base64":b=atob(b);break;case "text":case "json":b=unescape(encodeURIComponent(b))}}b=new k(b,a);b.filename=e;return b};k.getContentConversionType=m;return k})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(w,p){function m(a){return"string"==typeof a?{source:a,getLength:function(){return this.source.length},
getByte:function(c){return this.source.charCodeAt(c)&255}}:window.ArrayBuffer&&a instanceof ArrayBuffer?{source:new Uint8Array(a),getLength:function(){return this.source.byteLength},getByte:function(c){return this.source[c]}}:a}function k(a){for(var c=a.length,d=new Uint8Array(a.length),f=0;f<c;f++)d[f]=a.charCodeAt(f);return d}function e(a,c){a=new Uint8Array(a);c=Math.min(c,a.byteLength);for(var d="",f=0;f<c;f++)d+=String.fromCharCode(a[f]);return d}var b={arrayBufferFromBlob:function(a){var c=
new w,d=new FileReader;d.onloadend=function(){d.error?c.reject(d.error):c.resolve(d.result)};d.readAsArrayBuffer(a);return c.promise},arrayBuffersToBlob:function(a,c){return new Blob(a,{type:c||"application/octet-stream"})},binaryStringFromByteSource:function(a){if("string"==typeof a)return a;a=m(a);var c=a.getLength(),d=c%4;c-=d;for(var f="",h=0,l,q,t,r;h<c;)l=a.getByte(h++),q=a.getByte(h++),t=a.getByte(h++),r=a.getByte(h++),f+=String.fromCharCode(l,q,t,r);1==d?f+=String.fromCharCode(a.getByte(h)):
2==d?f+=String.fromCharCode(a.getByte(h),a.getByte(h+1)):3==d&&(f+=String.fromCharCode(a.getByte(h),a.getByte(h+1),a.getByte(h+2)));return f},base64FromByteSource:function(a){a=m(a);var c=a.getLength(),d=c%3;c-=d;for(var f,h,l,q,t="",r=0;r<c;r+=3)q=a.getByte(r)<<16|a.getByte(r+1)<<8|a.getByte(r+2),f=q>>18&63,h=q>>12&63,l=q>>6&63,q&=63,t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[q];1==d?(q=a.getByte(r),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[q>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[q<<4&63]+"\x3d\x3d"):2==d&&(q=a.getByte(r)<<8|a.getByte(r+1),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[q>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[q>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[q<<
2&63]+"\x3d");return t},base64FromJson:function(a){return btoa(unescape(encodeURIComponent("string"===typeof a?a:JSON.stringify(a))))}};b.binaryStringToByteArray=k;b.base64ToByteArray=function(a){return k(atob(a))};b.getFirstBytes=function(a,c){if("string"==typeof a)var d=a.substr(0,c);else if(window.ArrayBuffer&&a instanceof ArrayBuffer)d=e(a,c);else if(window.Blob&&a instanceof Blob){d=new w;var f=new FileReader;f.onloadend=function(){f.error?d.resolve(""):d.resolve(e(f.result,c))};f.readAsArrayBuffer(a.slice(0,
c))}return p(d||"")};b.isBase64=function(a){return a&&0==a.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(a.replace(/={0,2}$/,""))};b.base64ToJson=function(a){return JSON.parse(decodeURIComponent(escape(atob(a))))};b.getContentType=function(a){a=b.getFileExtension(a);if(null===a)return null;switch(a){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "svg":return"image/svg+xml";case "json":return"application/json";
case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};b.getFileExtension=function(a){var c=a.lastIndexOf(".")+1;return c?a.substr(c).toLowerCase():null};return b})},"esri/dijit/geoenrichment/utils/requests/UniversalClient":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/request/xhr dojo/io-query dojo/sniff esri/dijit/geoenrichment/when esri/kernel esri/config esri/lang esri/urlUtils ../UrlUtil ./BinaryData ./FileContent ./MultipartDataBuilder ./ErrorUtil".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l,q,t,r){function u(F,G){if(G)this.reject(G);else{G=F.xhr;var H=G.getResponseHeader&&G.getResponseHeader("Content-Type");F.status=G.status;F.data=new l(G.response||G.responseBody||G.responseText,H);this.resolve(F)}}var z=0,A=e("safari"),B=function(F){"string"===typeof F?this.url=F:"object"===typeof F&&w.mixin(this,F)};B.prototype={url:null,preventCache:null,usePost:!1,timeout:0,multipartThreshold:0,useCommonAuth:!1,useProxy:!1,allowSSL:null,send:function(F,G){return this.sendUrlRequest(this.prepareUrlRequest(F,
G),"UniversalClient.send")},prepareUrlRequest:function(F,G){"string"===typeof F?F={urlSuffix:F}:F||(F={});G||(G={});var H=F.url||this.url;F=F.urlSuffix;H||(H=F,F=null);if(!H)throw Error("URL is missing.");var v=f.urlToObject(H);H=h.combine(v.path,F);F=v.query||{};"object"===typeof G.content&&(F=w.mixin(F,G.content));v=G.requireSSL;!0!==v&&!1===this.allowSSL&&(v=!1);!1!==v&&!0===this.allowSSL&&/^https/i.test(window.location.protocol)&&(v=!0);var D=this.getCredential(H,!0);D&&(F.token||!1===F.token||
(F.token=D.token),D.ssl&&!1!==v&&(v=!0));!0===v&&(H=h.toHttpsUrl(H));!1===F.token&&delete F.token;var I=G.handleAs||"json";"json"===I&&(F.f="json");D=(G.sendAs||(G.usePost||this.usePost||F.token?"post":"get")).toLowerCase();v="multipart"==D?!0:G.sendAs||G.sizeLimit?!1:null;var K=0,S=G.multipartThreshold||this.multipartThreshold;for(W in F){var N=F[W];if(N instanceof q)v=!0;else{var T=0,M=W.length;"object"===typeof N?G.allowMultipleValues&&Array.isArray(N)?F[W]=N.map(function(Q){Q="object"===typeof Q?
JSON.stringify(Q):Q;T+=M+Q+2;return Q}):(F[W]=JSON.stringify(N),T+=M+F[W].length+2):T=M+(N?N.length:0)+2;!v&&0<S&&(K+=T)}}!1!==v&&0<S&&K>S&&(v=!0);if(G.useProxy||!f.hasSameOrigin(H,window.location.href)&&this.useProxy&&!G.hasOwnProperty("useProxy")){var V=h.getProxyUrl();V&&(H=V+"?"+H)}else f.getProxyRule(H)&&(H=f.getProxyRule(H).proxyUrl+"?"+H);var W=(W=G.hasOwnProperty("preventCache")?G.preventCache:this.preventCache)||null===W&&V||A?"_ts\x3d"+(new Date).getTime()+z++:"";V={handleAs:I};if(I=Number(d.isDefined(G.timeout)?
G.timeout:this.timeout))V.timeout=I;I="get"!==D||v;D=v?null:k.objectToQuery(F);I||(I=D.length+H.length+W.length+1>=c.defaults.io.postLength);V.method=I?"POST":"GET";V.headers={"X-Requested-With":null};V.headers["Content-Type"]="undefined"!==typeof G.contentType?G.contentType:"application/x-www-form-urlencoded; charset\x3dutf-8";v?(v=new t,v.addVariables(F),v.build(V)):I?V.data=D:D&&(H+="?"+D,W&&(H+="\x26"+W),W=null);!D&&W&&(H+="?"+W);return{url:H,options:V,sizeLimit:G.sizeLimit}},getCredential:function(F,
G){if(a.id){var H=a.id.findCredential(F);!H&&this.useCommonAuth&&(H="string"==typeof this.useCommonAuth?a.id.findCredential(this.useCommonAuth):a.id.credentials[0]);if(H){var v={token:H.token};G?v.ssl=H.ssl:v.url=H.ssl?h.toHttpsUrl(F):F;return v}}},sendUrlRequest:function(F,G){var H="string"===typeof F.options.data?F.options.data.length:null;if(F.sizeLimit&&H&&("function"===typeof F.sizeLimit?F.sizeLimit(H):H>F.sizeLimit))return(new p).reject(Error("SIZE_LIMIT_EXCEEDED"));G=G||"UniversalClient.sendUrlRequest";
var v=F.deferred||new p;if(H="bin"===F.options.handleAs)F.options.handleAs="blob";var D=m(F.url,F.options,!0);H&&(D.handleResponse=u);var I=this;D.then(function(K){K="json"===F.options.handleAs&&K&&r.parseError(K)||K;if(K instanceof Error){var S;!0===I.useCommonAuth&&498===K.code&&(S=B.handleInvalidTokenError(K));b(S)["finally"](function(){v.reject(K)})}else v.resolve(I._makeResponse(G,K))},function(K){v.reject(r.makeError(K))});return v.promise},requestToUrl:function(F){if(F.options.headers&&F.options.headers["Content-Type"]&&
0==F.options.headers["Content-Type"].indexOf("multipart/form-data"))return null;var G=F.url;if(F=F.options.data){if(G.length+F.length>=c.defaults.io.postLength)return null;G+="?"+F}return G},_makeResponse:function(F,G){return G}};B.makeError=r.makeError;B.handleInvalidTokenError=function(F){};var E=new B({useCommonAuth:!0,allowSSL:!0});B.request=function(F,G){return E.send(F,G).otherwise(function(H){var v=G&&G.content&&G.content.token;if(498!==H.code||null!=v)return(new p).reject(H);G=w.mixin({},
G);G.content=w.mixin({},G.content);G.content.token=!1;return E.send(F,G)})};B.requestPublicFirst=function(F,G,H){var v=w.mixin({},G);v.content=w.mixin({},G.content);v.content.token=!1;return E.send(F,v).otherwise(function(D){return H&&H.retryOnAnyError||499===D.code||403===D.code?E.send(F,G):(new p).reject(D)})};return B})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils","esri/arcgis/utils"],function(w,p,m,k,e){var b={getDomain:function(c){if("string"!==
typeof c)return null;c=c.replace(/^(http:\/\/|https:\/\/)/i,"");var d=c.indexOf("/");return 0>d?c:c.substr(0,d)},getPortalUrl:function(c){if("string"!==typeof c)return null;c=c.replace(/\?.*$/,"");var d=c.match(/^(.+)\/sharing(\/|$)/i);return d||(d=c.match(/^(.+)\/home$/i))?d[1]:(d=c.match(/^(.+)\/portal(\/|$)/i))?d[1]+"/portal":c},getProxyUrl:function(c){var d=p.defaults.io.proxyUrl;d&&!/^http/i.test(d)&&(d=k.getAbsoluteUrl(d));d&&c&&(d=b.toHttpsUrl(d));return d},registerCORS:function(c){(c=b.getDomain(c))&&
-1==p.defaults.io.corsEnabledServers.indexOf(c)&&p.defaults.io.corsEnabledServers.push(c);b._fixCORS()},_fixCORS:function(){p.defaults.io.corsEnabledServers=p.defaults.io.corsEnabledServers.filter(function(c){return c.indexOf&&0===c.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+c),!1):!0})},indexOfQuery:function(c){var d=c.indexOf("?");0<=d&&(c=c.substr(d+1),/^(http:\/\/|https:\/\/)/i.test(c)&&(c=c.indexOf("?"),d=0<=c?d+1+c:-1));return d},removeQuery:function(c){var d=b.indexOfQuery(c);
return 0>d?c:c.substr(0,d)},addQueryPart:function(c,d){var f=0>b.indexOfQuery(c)?"?":"\x26";return c+f+d},getVariableValue:function(c,d){if(c&&"string"===typeof d){var f=k.urlToObject(c);if(f.query){var h={};Object.keys(f.query).forEach(function(l){h[l.toLowerCase()]=f.query[l]});return h[d.toLowerCase()]}}},addUrlVariable:function(c,d,f){d=encodeURIComponent(d);f=encodeURIComponent(f);return b.addQueryPart(c,d+"\x3d"+f)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(c){return!c||/^http/i.test(c)?
c:"http://"+c},toHttpsUrl:function(c){c&&(c=b.toHttpUrl(c));if(!c||!/^http:\/\//i.test(c))return c;var d=new w(c);c=c.replace(/^http/i,"https");var f=b.securePortsMap[d.port];f&&(c=c.replace(":"+d.port,":"+f));return c},combine:function(c,d){"number"===typeof d&&(d+="");if(d){if(/^(http:\/\/|https:\/\/)/i.test(d)||!c)return d;"/"!=d.charAt(0)&&(d="/"+d);if(1==d.length)return c;var f=c.length-1;"/"==c.charAt(f)&&(c=c.substr(0,f));var h=k.urlToObject(c);c=b.removeQuery(c);f=c.length-d.length;0<=f&&
c.substr(f).toLowerCase()==d.toLowerCase()&&(c=c.substr(0,f));c+=d;for(var l in h.query)b.addQueryPart(c,h.query[l])}return c},combineMulti:function(c){for(var d=c[0],f=1;f<c.length;f++)d=b.combine(d,c[f]);return d},openUrl:function(c,d){if(d)return window.open(c,"_blank");d=window.open();d.opener=null;d.referrer=null;d.location=c;return d},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},getToken:function(c){return(c=c&&m.id.findCredential(c)||m.id.credentials[0])&&
c.token}},a;b.getArcgisUrl=function(){return a};b.setArcgisUrl=function(c){c&&(a=c,e.arcgisUrl=b.combine(c,"/sharing/rest/content/items"))};return b})},"esri/dijit/geoenrichment/utils/requests/BinaryData":function(){define(["dojo/_base/declare"],function(w){return w(null,{data:null,type:null,constructor:function(p,m){this.type=m||p&&p.type||null;this.data=p}})})},"esri/dijit/geoenrichment/utils/requests/MultipartDataBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/request/util",
"esri/lang","./FileContent"],function(w,p,m,k,e){function b(d,f){for(var h in f){var l=d[h],q=f[h];l!==q&&(l&&"object"===typeof l&&q&&"object"===typeof q?q instanceof Date?d[h]=new Date(q):b(l,q):d[h]=q)}return d}var a=w(null,{data:null,constructor:function(d){this.data=d}}),c=m.parseArgs;m.parseArgs=function(d,f,h){f.data&&f.data instanceof a&&(f.data=f.data.data,h=!0);return c(d,f,h)};m.deepCreate=function(d,f){if(f instanceof a)return new a(f.data);f=f||{};var h=p.delegate(d),l,q;for(l in d)(q=
d[l])&&"object"===typeof q&&(h[l]=m.deepCreate(q,f[l]));return b(h,f)};return w(null,{addVariables:function(d){for(var f in d)this.addVariable(f,d[f])},addVariable:function(d,f){k.isDefined(f)&&(f instanceof e?this._writeFileContent(d,f):this._writeVariable(d,f.toString()))},build:function(d){this._writeBoundary(!0);d.data=new a(this._prepareBinaryData());var f=d.headers||{};f["Content-Type"]="multipart/form-data; boundary\x3d"+this._dataProvider.boundary;d.headers=f;this._dataProvider=null},_prepareBinaryData:function(){var d=
this._dataProvider.buffer;if(!window.Uint8Array)return d;for(var f=d.length,h=new Uint8Array(new ArrayBuffer(f)),l=0;l<f;l++)h[l]=d.charCodeAt(l);return h},_dataProvider:null,_getDataProvider:function(){if(!this._dataProvider){for(var d="",f=0;32>f;f++)d+=String.fromCharCode(Math.floor(97+25*Math.random()));this._dataProvider={buffer:"",boundary:d}}return this._dataProvider},_writeVariable:function(d,f){this._writeBoundary();this._writeContentDisposition(d);this._writeLineBreak();this._writeData(this._toUTF8(f));
this._writeLineBreak()},_writeFileContent:function(d,f){this._writeBoundary();this._writeContentDisposition(d,f.filename);f.contentType&&(this._writeData("Content-Type: "+f.contentType),this._writeLineBreak());f.contentTransferEncoding&&(this._writeData("Content-Transfer-Encoding: "+f.contentTransferEncoding),this._writeLineBreak());this._writeLineBreak();this._writeData(f.data);this._writeLineBreak()},_writeBoundary:function(d){this._writeDoubleDash();this._writeData(this._getDataProvider().boundary);
d?this._writeDoubleDash():this._writeLineBreak()},_writeContentDisposition:function(d,f){f=f?'"; filename\x3d"'+this._toUTF8(f.replace(/"/g,"'")):"";this._writeData('Content-Disposition: form-data; name\x3d"'+this._toUTF8(d)+f+'"');this._writeLineBreak()},_writeDoubleDash:function(){this._writeData("--")},_writeLineBreak:function(){this._writeData("\r\n")},_writeData:function(d){this._getDataProvider().buffer+=d},_toUTF8:function(d){return unescape(encodeURIComponent(d))}})})},"esri/dijit/geoenrichment/utils/requests/ErrorUtil":function(){define(["esri/dijit/geoenrichment/Deferred",
"esri/dijit/geoenrichment/when","require"],function(w,p,m){function k(b){var a=new w;m(["./DataResource"],function(c){p((new c(b)).getFileContent(),a.resolve,a.reject)});return a.promise}var e={getErrorFromBin:function(b){var a=/^text\/|^application\/json/;return b&&b.type&&!a.test(b.type)?null:p(b&&k(b),function(c){if(c){if(c.hasOwnProperty("contentType")&&!a.test(c.contentType))return null;try{var d=JSON.parse(decodeURIComponent(escape(c.data))),f=e.parseError(d);if(f)return f;if(d.messages&&d.messages.length){var h=
d.messages[0];if("esriJobMessageTypeError"==h.type)return Error(h.description)}}catch(l){}}return Error("Binary data error.")})},parseError:function(b){var a;b.error?a=e.makeError(b.error):"error"===b.status&&(a=e.makeError(b));a&&a.code&&null==a.httpCode&&(a.httpCode=a.code);return a},makeError:function(b){null==b?b=Error():"string"===typeof b&&(b={message:b});if(!(b instanceof Error)&&"object"===typeof b){var a=b;b=Error();a.code&&(b.code=a.code);a.message&&(b.message=a.message);a.details&&(b.details=
a.details)}b.log=dojoConfig.isDebug;return b}};return e})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesModel":function(){define(["dojo/_base/declare"],function(w){return w(null,{_levelsCache:null,_levels:null,constructor:function(p){this._initWithLevels(p.levels)},_initWithLevels:function(p){this._levels=p;this._levelsCache={};this._levels.forEach(function(m){delete m.description;this._levelsCache[m.id]=m;m.adminLevel&&(this._levelsCache[m.adminLevel]=
m)},this)},getLevels:function(p){return p?this._levels.filter(function(m){return!m.isWholeCountry}):this._levels.slice()},getLevel:function(p){return this._levelsCache[p]},getLevelPluralName:function(p){return(p=this.getLevel(p))?p.name||p.pluralName:null},toJson:function(){return{levels:this._levels}}})})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],function(w){function p(m){m=m.split(".");return Number((Number(m[0])+Number(m[1])/100).toFixed(2))}w=Math.max(p("3.37"),
p(w.version)).toFixed(2);return{jsapiVersion:w,esriDijitCssUrl:"https://js.arcgis.com/"+w+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+w+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+w+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,
showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1,skipCreditConsumption:!1},createPlayerCommand:{loadMapPortalItems:!0,compressData:!1,prettifyDataJson:!1,skipCreditConsumption:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,numVerticesPerFeature:5E4}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_SerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AnalysisAreaUtil ../core/infographics/InfographicTypes ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l,q,t){function r(){var G=new k;w("./supportClasses/attachments/AttachmentsStoreSerializer ./supportClasses/GEUtil ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../core/infographics/utils/InfographicJsonUtil ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/infographics/InfographicTypes ./commands/mapToImage/MapToURLUtil esri/dijit/geoenrichment/utils/ProjectionUtil".split(" "),
function(H,v,D,I,K,S,N,T,M){u=H;z=v;A=D;B=S;c=N;E=T;F=M;G.resolve()});return G.promise}var u,z,A,B,E,F;return p(null,{reportDataToJson:function(G,H){var v=this;H=H||{};var D=!1;d.processTemplateFieldInfos(G.templateJson,function(I){I.isInfographic&&I.infographicJson.type===c.ATTACHMENTS&&(D=!0)});return r().then(function(){return e(G.attachmentsStore&&u.getAttachmentsStoreJson(G.attachmentsStore,{numAreas:G.analysisAreas.length,saveImages:D}),function(I){var K=m.mixin({},G.config);!1!==H.forceFixedDataMode&&
delete K.geoenrichmentUrl;I={jsapiVersion:q.jsapiVersion,isMultiFeature:G.isMultiFeature,reportTitle:G.reportTitle,templateJson:A.serialize(G.templateJson),reportObject:v._prepareReportObjectJson(G.reportObject),fieldData:G.fieldData,analysisAreas:b.areasToJson(G.analysisAreas),combinedAreasInfo:G.combinedAreasInfo&&b.combinedAreasInfoToJson(G.combinedAreasInfo),reverseAnalysisAreasOnMap:G.reverseAnalysisAreasOnMap,attachmentsStore:I,templateVariableProvider:G.templateVariableProvider&&G.templateVariableProvider.toJson(),
config:K,countryConfig:f.toJson(),mapImageInfos:H.mapImageInfos,loadedMapPortalItems:H.loadedMapPortalItems,customLogo:G.customLogo};t.logData&&(console.log("_SerializationSupport.js \x3d\x3e reportDataJson"),console.log(I));return I})})},_prepareReportObjectJson:function(G){var H={},v;for(v in G)G[v]&&"object"!==typeof G[v]&&(H[v]=G[v]);return H},reportDataFromJson:function(G){return r().then(function(){var H=G.fieldData;H.featureData&&(H.areaData=H.featureData.map(function(D){return{mainCalculator:{data:D}}}),
delete H.featureData);var v={isMultiFeature:G.isMultiFeature,reportTitle:G.reportTitle,templateJson:A.deserialize(G.templateJson),reportObject:G.reportObject,fieldData:H,analysisAreas:b.areasFromJson(G.analysisAreas),combinedAreasInfo:G.combinedAreasInfo&&b.combinedAreasInfoFromJson(G.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:G.reverseAnalysisAreasOnMap,attachmentsStore:G.attachmentsStore&&u.getAttachmentsStoreFromJson(G.attachmentsStore),templateVariableProvider:G.templateVariableProvider&&
new B(G.templateVariableProvider),config:G.config||{},mapImageInfos:G.mapImageInfos,loadedMapPortalItems:G.loadedMapPortalItems,customLogo:G.customLogo};a.populateCombinedAreasInfo(v.combinedAreasInfo,v.analysisAreas);z.setGeoenrichmentUrl(null);H=!1;v.config.portalUrl&&l.setArcgisUrl(l.getPortalUrl(v.config.portalUrl));v.config.geometryServiceUrl?F.setGeometryServiceUrl(v.config.geometryServiceUrl):H=!0;v.config.printMapTaskUrl?E.setPrintMapTaskUrl(v.config.printMapTaskUrl):H=!0;f.fromJson(G.countryConfig);
return e(H&&h.tryConfigureServicesFromAGOLPublic()).then(function(){return v})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaJsonUtil":function(){define(["esri/graphic","esri/dijit/PopupTemplate"],function(w,p){function m(b,a){if(!b)return null;b.getLayer()&&(b=new w(b.geometry,b.symbol,b.attributes,b.infoTemplate));b=b.toJson();a&&delete b.infoTemplate;return b}function k(b){if(!b)return null;if(b instanceof w)return b;var a=b.infoTemplate&&new p(b.infoTemplate);
delete b.infoTemplate;b=new w(b);a&&b.setInfoTemplate(a);return b}function e(b){var a={},c;for(c in b){var d=b[c];if("string"===typeof d||"number"===typeof d&&!isNaN(d))a[c]=d}return a}return{areasToJson:function(b,a){var c=a&&a.excludeInfoTemplate;return b.map(function(d){var f=e(d);f.feature=m(d.feature,c);f.location=d.location&&m(d.location,c);f.additionalFeatures=d.additionalFeatures&&d.additionalFeatures.map(function(h){return m(h,c)});f.geographies=d.geographies;f.buffer=d.buffer;f.featureServiceQueryInfos=
d.featureServiceQueryInfos;f.dynamicAttributes=d.dynamicAttributes;return f})},combinedAreasInfoToJson:function(b){var a=e(b);a.groups=b.groups&&b.groups.map(function(c){var d=e(c);d.indexes=c.indexes.slice();d.location=c.location&&m(c.location);d.additionalFeatures=c.additionalFeatures&&c.additionalFeatures.map(m);return d});return a},areasFromJson:function(b){return b.map(function(a){var c=e(a);c.feature=k(a.feature);c.location=a.location&&k(a.location);c.additionalFeatures=a.additionalFeatures&&
a.additionalFeatures.map(k);c.geographies=a.geographies;c.buffer=a.buffer;c.featureServiceQueryInfos=a.featureServiceQueryInfos;c.dynamicAttributes=a.dynamicAttributes;return c})},combinedAreasInfoFromJson:function(b){var a=e(b);a.groups=b.groups&&b.groups.map(function(c){var d=e(c);d.indexes=c.indexes.slice();d.location=c.location&&k(c.location);d.additionalFeatures=c.additionalFeatures&&c.additionalFeatures.map(k);return d});return a}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaUtil":function(){define(["dojo/_base/lang",
"esri/geometry/webMercatorUtils","esri/dijit/geoenrichment/utils/CoordinateUtil"],function(w,p,m){var k={geometryToLatLong:function(e){var b=e.spatialReference.wkid;return b===m.WGS_84_WKID?{STORE_LONG:e.x,STORE_LAT:e.y}:m.isWebMercator(b)?(e=p.xyToLngLat(e.x,e.y),{STORE_LONG:e[0],STORE_LAT:e[1]}):null},populateCombinedAreasInfo:function(e,b){var a={},c={};b.forEach(function(d){d.latitude&&(a[d.latitude]=1);d.longitude&&(c[d.longitude]=1)});e.name=e.name||b.map(function(d){return d.name}).join(", ");
e.shortName=e.shortName||b.map(function(d){return d.shortName||d.name}).join(", ");e.description=e.description||b.map(function(d){return d.description||d.name}).join(", ");e.address=e.address||b.map(function(d){return d.address||d.name}).join(", ");e.latitude=e.latitude||Object.keys(a).join(", ");e.longitude=e.longitude||Object.keys(c).join(", ");return e},groupAreas:function(e){function b(l){var q=l.locationName||l.name;return{isSingleAreaGroup:!0,label:q,hideGroupLabel:q===(l.shortName||l.name),
areas:[l]}}var a=e.combinedAreasInfo&&e.combinedAreasInfo.groups||[],c=[],d=[],f={};e.analysisAreas.forEach(function(l){if((!e.filter||e.filter(l))&&!l.hidden)if(l.isGrouped){if(!f[l.groupIndex]){var q=a[l.groupIndex];q=f[l.groupIndex]={isRealGroup:!0,label:q.locationName||q.name,areas:[]};d.push(q);c.push(q)}f[l.groupIndex].areas.push(l)}else c.push(b(l))});if(1===c.length&&c[0].isRealGroup){c=c[0].areas.map(b);d.length=0;var h=!0}return{groupInfos:c,isOnlyAreasInOnlyGroup:h}},parseSites:function(e){if(e.sites){e.analysisAreas=
[];e.sites.forEach(function(a){a.areas.forEach(function(c){e.analysisAreas.push(c)})});e.combinedAreasInfo={groups:e.sites.map(function(a){var c=w.mixin({},a);delete c.areas;delete c.attributes;delete c.notes;delete c.images;c.indexes=a.areas.map(function(d){return e.analysisAreas.indexOf(d)});return c})};k.populateCombinedAreasInfo(e.combinedAreasInfo,e.sites);if(!e.attachmentsProvider||!e.attachmentsProvider.getAttributesForAreaAt){e.attachmentsProvider={};e.attachmentsProvider.supportsMultipleAreas=
1<e.sites.length;var b=e.attachmentsProvider.areaAttachments=[];e.sites.forEach(function(a){a.areas.forEach(function(c){b.push({attributes:a.attributes,notes:a.notes,images:a.images})})})}delete e.sites}}};return k})},"esri/dijit/geoenrichment/utils/CoordinateUtil":function(){define(["esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(w,p){var m={},k=[4326,102100,102113,3857];m.WGS_84_WKID=4326;m.WEB_MERCATOR_WKID=102100;m.getSupportedWKIDs=function(){return k.slice()};m.testSpatialReferenceWKID=
function(e){e=k.indexOf(Number(e&&"object"===typeof e?e.wkid:e));return 0<=e?k[0===e?0:1]:0};m.isWebMercator=function(e){return 102100===m.testSpatialReferenceWKID(e)};m.isWGS84=function(e){return 4326===m.testSpatialReferenceWKID(e)};m.getGeometryConverter=function(e,b){e=m.testSpatialReferenceWKID(e);b=m.testSpatialReferenceWKID(b);return e&&b&&e!==b?4326===e?w.geographicToWebMercator:w.webMercatorToGeographic:null};m.toWGS84=function(e){return m.toSpatialReference(e,4326)};m.toWebMercator=function(e){return m.toSpatialReference(e,
102100)};m.toSpatialReference=function(e,b){e&&!e.toJson&&(e=p.fromJson(e));b=m.getGeometryConverter(e&&e.spatialReference,b);return null!=b?b(e):e};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes":function(){define(["dojo/_base/lang"],function(w){var p={STATIC:"static",ATTACHMENTS:"attachments",AREA_DETAILS:"areaDetails",INTERESTING_FACTS:"interestingFacts",LOCATOR_TABLE:"locatorTable",COMPARISON_TABLE:"comparisonTable"},m={AGE_PYRAMID:"AgePyramid",ONE_VAR:"OneVar",
RELATED_VARS:"RelatedVariables",TAPESTRY:"Tapestry",PRIZM5:"Prizm5"},k={},e;for(e in m)k[m[e]]=!0;w.mixin(p,m);var b={};for(e in p)b[p[e]]=!0;p.isDynamic=function(a){return k[a]};p.isSupported=function(a){return b[a]};p.isTableLike=function(a){return a===p.AREA_DETAILS||a===p.LOCATOR_TABLE||a===p.COMPARISON_TABLE};p.fixTapestryNameToWidget=function(a){return"TapestryNEW"===a?"Tapestry":a};p.fixTapestryNameToData=function(a){return"Tapestry"===a?"TapestryNEW":a};p.supportsMultiFeature=function(a){return a===
p.COMPARISON_TABLE||a===p.LOCATOR_TABLE||a===p.ATTACHMENTS||a===p.AREA_DETAILS};p.supportsComparison=function(a){return a===p.ONE_VAR||a===p.AGE_PYRAMID||a===p.RELATED_VARS||a===p.COMPARISON_TABLE};p.isDynamicWithFiltering=function(a){return a===p.ONE_VAR||a===p.AGE_PYRAMID||a===p.RELATED_VARS};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil":function(){define(["./_SectionJsonCollector","../../../infographics/InfographicTypes"],
function(w,p){var m={},k={process:function(e,b,a,c,d){var f=c;c=function(h,l,q){h&&f.apply(this,arguments)};d={processLevel:b,objJson:a,processFunc:c,ignoreComparisonCalculators:d&&d.ignoreComparisonCalculators};e!==b||"field"===e&&"field"===b?"document"===e?k._processTemplateJson(a,d):"section"===e?k._processSectionJson(a,d):"table"===e?k._processTableJson(a,d,null):"tableRow"===e?k._processTableDataObj(a,d,null):"field"===e&&k._processFieldInfo(a,d,null):c(a)},_processTemplateJson:function(e,b){e.sectionsTables?
e.sectionsTables.forEach(function(a){k._processTableJson(a,b)}):w.collectSectionJsons(e,{saveParentInfo:!1,processFieldInfoFunc:function(a){"field"===b.processLevel&&b.processFunc(a)}}).forEach(function(a){k._processSectionJson(a,b)})},_processSectionJson:function(e,b){"section"===b.processLevel&&b.processFunc(e);e.stack&&e.stack.forEach(function(a){"sectionElement"===b.processLevel&&b.processFunc(a);"table"===a.id&&k._processTableJson(a,b)})},_processTableJson:function(e,b,a){"table"===b.processLevel&&
b.processFunc(e);e.rows.forEach(function(c){"tableRow"===b.processLevel&&b.processFunc(c,a);k._processTableDataObj(c,b,a)});e.backgroundSectionJson&&k._processSectionJson(e.backgroundSectionJson,b);e.foregroundSectionJson&&k._processSectionJson(e.foregroundSectionJson,b);e.backgroundFloatingTablesSectionJson&&k._processSectionJson(e.backgroundFloatingTablesSectionJson,b);e.foregroundFloatingTablesSectionJson&&k._processSectionJson(e.foregroundFloatingTablesSectionJson,b)},_processTableDataObj:function(e,
b,a){if(e.fieldInfos)for(var c in e.fieldInfos)k._processFieldInfo(e.fieldInfos[c],b,a,"tableCell")},_processFieldInfo:function(e,b,a,c){if(e){"field"!==b.processLevel||b.skipVariables&&(e.hasVariable||e.script)||b.processFunc(e,a,c);e.triggerJson&&e.triggerJson.fieldInfo&&e.templateName!==e.triggerJson.fieldInfo.templateName&&k._processFieldInfo(e.triggerJson.fieldInfo,b,e,"trigger");e.dataDrillingPanelInfo&&k._processSectionJson(e.dataDrillingPanelInfo.sectionJson,b);e.tooltipInfo&&e.tooltipInfo.fieldInfo&&
k._processFieldInfo(e.tooltipInfo.fieldInfo,b,e,"fieldTooltip");e.linkFieldInfo&&k._processFieldInfo(e.linkFieldInfo,b,e,"linkFieldInfo");if(e.isRichText){for(var d in e.richTextJson.fieldInfos)a=e.richTextJson.fieldInfos[d],k._processFieldInfo(a,b,e,"richTextPart");for(d in e.richTextJson.linkFieldInfos)a=e.richTextJson.linkFieldInfos[d],k._processFieldInfo(a,b,e,"richTextPart")}e.isInfographic&&k._processInfographicFieldInfo(e,b);e.isChart&&k._processChartFieldInfo(e,b);e.isReportSection&&e.sectionJson&&
k._processSectionJson(e.sectionJson,b)}},_processInfographicFieldInfo:function(e,b){var a=e.infographicJson;switch(a.type){case p.STATIC:a.header&&k._processTableJson(a.header,b,e);a.variableTables&&a.variableTables.forEach(function(f){f.variable&&k._processFieldInfo(f.variable.fieldInfo,b,e,"staticInfographicVariable");f.description&&f.description.fieldInfo&&k._processFieldInfo(f.description.fieldInfo,b,e,"staticInfographicDescription")});if(a.dataDrilling)for(var c in a.dataDrilling){var d=a.dataDrilling[c];
d&&d.sectionJson&&k._processSectionJson(d.sectionJson,b)}break;case p.AGE_PYRAMID:case p.TAPESTRY:case p.PRIZM5:case p.RELATED_VARS:case p.ONE_VAR:!b.ignoreComparisonCalculators&&a.fieldInfos&&a.fieldInfos.forEach(function(f){k._processFieldInfo(f,b,e,"dynamicInfographicVariable")});break;case p.AREA_DETAILS:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,b,e);a.attributesSectionJson&&k._processSectionJson(a.attributesSectionJson,b,e);a.notesSectionJson&&k._processSectionJson(a.notesSectionJson,
b,e);break;case p.LOCATOR_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,b);k._processSectionJson(a.headerSectionJson,b);k._processSectionJson(a.dataSectionJson,b);a.summarySectionJson&&k._processSectionJson(a.summarySectionJson,b);a.summaryFooterSectionJson&&k._processSectionJson(a.summaryFooterSectionJson,b);a.summarizeFractionField&&"object"===typeof a.summarizeFractionField&&k._processFieldInfo(a.summarizeFractionField,b,e,"locatorFractionFieldInfo");break;case p.COMPARISON_TABLE:a.titleSectionJson&&
k._processSectionJson(a.titleSectionJson,b),b.ignoreComparisonCalculators||k._processSectionJson(a.dataSectionJson,b)}},_processChartFieldInfo:function(e,b){var a=e.chartJson.visualProperties;a.chartIcons&&a.chartIcons.forEach(function(c){k._processFieldInfo(c,b,e,"chartIcon")});a.floatingIcons&&a.floatingIcons.forEach(function(c){k._processTableJson(c,b,e,"floatingIcon")});a.floatingTexts&&a.floatingTexts.forEach(function(c){k._processTableJson(c,b,e,"floatingText")});b.ignoreComparisonCalculators&&
e.chartJson.comparisonInfo&&(b=Object.assign({},b),b.skipVariables=!0);a.tooltip&&a.tooltip.fieldInfo&&k._processFieldInfo(a.tooltip.fieldInfo,b,e,"chartTooltip");e.chartJson.dataDrillingPanelInfo&&k._processSectionJson(e.chartJson.dataDrillingPanelInfo.sectionJson,b);e.chartJson.seriesItems.forEach(function(c){c.points.forEach(function(d){k._processFieldInfo(d.fieldInfo,b,e,"chartPointField");d.iconFieldInfo&&k._processFieldInfo(d.iconFieldInfo,b,e,"chartPointIcon");d.captionFieldInfo&&k._processFieldInfo(d.captionFieldInfo,
b,e,"chartPointCaption")})})}};m.DOCUMENT="document";m.SECTION="section";m.TABLE="table";m.SECTION_ELEMENT="sectionElement";m.TABLE_ROW="tableRow";m.FIELD="field";m.process=k.process;m.processTemplateFieldInfos=function(e,b,a){k.process("document","field",e,b,a)};m.processSectionFieldInfos=function(e,b,a){k.process("section","field",e,b,a)};m.processSectionElements=function(e,b){k.process("document","sectionElement",e,b)};m.processTableFieldInfos=function(e,b,a){k.process("table","field",e,b,a)};
m.processChartFieldInfos=function(e,b){e.seriesItems.forEach(function(d){d.points.forEach(function(f){f.fieldInfo&&b(f.fieldInfo,"series")})});var a=e.visualProperties.tooltip;if(a&&a.fieldInfo&&a.fieldInfo.isRichText){for(var c in a.fieldInfo.richTextJson.fieldInfos)b(a.fieldInfo.richTextJson.fieldInfos[c],"tooltip");for(c in a.fieldInfo.richTextJson.linkFieldInfos)b(a.fieldInfo.richTextJson.linkFieldInfos[c],"tooltip")}e.dataDrillingPanelInfo&&m.processSectionFieldInfos(e.dataDrillingPanelInfo.sectionJson,
function(d){b(d,"dataDrilling")})};m.processDataDrillingPanelInfos=function(e,b){m.processTemplateFieldInfos(e,function(a){if(a.isInfographic&&a.infographicJson.dataDrilling)for(var c in a.infographicJson.dataDrilling){var d=a.infographicJson.dataDrilling[c];d&&b(d)}else a.isChart&&a.chartJson.dataDrillingPanelInfo?b(a.chartJson.dataDrillingPanelInfo):a.dataDrillingPanelInfo&&b(a.dataDrillingPanelInfo)})};m.hasMultiFeatureChart=function(e){var b=!1;m.processTemplateFieldInfos(e,function(a){a.isChart&&
(b=b||a.chartJson&&!!a.chartJson.isMultiFeatureChart)});return b};m.hasComparisonInfographicTable=function(e){var b=!1;m.processTemplateFieldInfos(e,function(a){a.isInfographic&&(b=b||a.infographicJson&&a.infographicJson.type===p.COMPARISON_TABLE)});return b};m.isGraphicReport=function(e){return!!e.sectionsTables};m.hasDynamicColumns=function(e){return m._checkTableAttributes(e,function(b){return 0<b.dynamicColumns})};m.hasDynamicRows=function(e){return m._checkTableAttributes(e,function(b){return 0<
b.dynamicRows})};m._checkTableAttributes=function(e,b){var a;m.isGraphicReport(e)?m.processTemplateFieldInfos(e,function(c){c.isReportSection&&c.sectionJson&&c.sectionJson.stack&&c.sectionJson.stack.some(function(d){if("table"===d.id&&d.attributes&&b(d.attributes))return a=!0})}):a=m.collectSectionJsons(e).some(function(c){return c.stack&&c.stack.some(function(d){return"table"===d.id&&d.attributes&&b(d.attributes)})});return a};m.hasMultiFeatureSections=function(e){return m.isGraphicReport(e)?m.hasMultiFeatureChart(e)||
m.hasDynamicColumns(e)||m.hasComparisonInfographicTable(e):!1};m.calcNumberOfMaps=function(e,b){var a=0;m.collectSectionJsons(e).forEach(function(c){a+=m.calcNumberOfMapsInSectionJson(c,b)});return a};m.calcNumberOfMapsInSectionJson=function(e,b){var a=0;e.stack&&e.stack.forEach(function(c){"map"===c.id&&(b&&b(c),a++)});m.processSectionFieldInfos(e,function(c){c.isMap&&(b&&b(c.mapJson),a++)});return a};m.calcNumberOfMapsInTableJson=function(e,b){var a=0;m.processTableFieldInfos(e,function(c){c.isReportSection&&
(a+=m.calcNumberOfMapsInSectionJson(c.sectionJson,b))});return a};m.collectSectionJsons=w.collectSectionJsons;m.getParentBox=w.getParentBox;m.setParentBox=w.setParentBox;m.getParentStyle=w.getParentStyle;return m})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/_SectionJsonCollector":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/MathUtil","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil","../../tableJson/TableJsonUtil"],
function(w,p,m,k){var e={},b={provideParentInfo:function(d,f,h,l,q,t){a.collectStatistics(f);a:{switch(q){case "floating":var r=f.style.left+t.left;break a;case "page":r=a.calcX(f,h,l)+t.left;break a}r=void 0}a:{switch(q){case "floating":q=f.style.top+t.top;break a;case "page":q=a.calcY(f,h,l)+t.top;break a}q=void 0}d._parentBox={x:r,y:q,w:a.calcFullWidth(f,h,l),h:a.calcFullHeight(f,h,l)};f=l.field;h.style.fields=h.style.fields||{};h=(h.style.fields[f]=h.style.fields[f]||{}).backgroundColor;d._parentStyle=
{backgroundColor:h}},sanitize:function(d){a.sanitize(d)}},a={collectStatistics:function(d){if(!d._measureInfo){var f={},h={},l;d.columns.forEach(function(B){l&&(h[l.field]=B);l=B;f[B.field]=B});var q={},t={},r={},u={},z={},A={};d.rows.forEach(function(B,E){d.columns.forEach(function(F,G){var H=z[G]||0,v=A[E]||0,D=a._getDataHeight(B,F.field);F=a._getFieldWidth(B,F);H+=D;v+=F;z[G]=H;A[E]=v;D=G+"_"+E;t[D]=H;q[D]=v;r[D]=q[G-1+"_"+E]||0;u[D]=t[G+"_"+(E-1)]||0})});d._measureInfo={xPositions:r,yPositions:u,
columnsHash:f,nextColumnHash:h}}},calcX:function(d,f,h){h=d.columns.indexOf(h);f=d.rows.indexOf(f);return d._measureInfo.xPositions[h+"_"+f]||0},calcY:function(d,f,h){h=d.columns.indexOf(h);f=d.rows.indexOf(f);return d._measureInfo.yPositions[h+"_"+f]||0},calcFullWidth:function(d,f,h){h=h.field;var l=a._getFieldWidth(f,d._measureInfo.columnsHash[h]),q=f.columnSpans&&f.columnSpans[h]||1;if(1<q)for(var t,r=0;r<q-1;r++)t=d._measureInfo.nextColumnHash[t?t.field:h],l+=a._getFieldWidth(f,t);return l},_getFieldWidth:function(d,
f){d.style.fields=d.style.fields||{};return(d.style.fields[f.field]=d.style.fields[f.field]||{}).width||f.style.width},calcFullHeight:function(d,f,h){h=h.field;var l=d.rows.indexOf(f),q=a._getDataHeight(f,h);f=f.rowSpans&&f.rowSpans[h]||1;if(1<f)for(var t=l+1,r=0;r<f-1;r++)l=d.rows[t++],q+=a._getDataHeight(l,h);return q},_getDataHeight:function(d,f){d.style.fields=d.style.fields||{};return(d.style.fields[f]=d.style.fields[f]||{}).height||d.style.height},sanitize:function(d){delete d._measureInfo}},
c={getIntersectingTableJsonsBehind:function(d,f,h,l,q){function t(A){var B=A.rows[0].fieldInfos[A.columns[0].field];return m.isTextLikeCell(B)||m.isShapeCell(B)||m.isImageCell(B)?p.checkRectsIntersect([h,{x:A.style.left+f.left,y:A.style.top+f.top,w:k.getTableWidth(A),h:k.getTableHeight(A)}]):!1}function r(A){return p.checkRectsIntersect([h,{x:A.style.left+f.left,y:A.style.top+f.top,w:A.style.width,h:A.style.height}])}var u=[],z=[];d.backgroundFloatingTablesSectionJson&&d.backgroundFloatingTablesSectionJson.stack.forEach(function(A,
B){if(-1===l||q||l!==B)if("table"===A.id&&t(A)||"img"===A.id&&r(A))-1===l||q||l>B?u.push(A):z.push(A)});d.foregroundFloatingTablesSectionJson&&d.foregroundFloatingTablesSectionJson.stack.forEach(function(A,B){if(q&&l===B)return!0;if("table"===A.id&&t(A)||"img"===A.id&&r(A))q&&l>B?u.push(A):z.push(A)});return{elementJsonsBehind:u,elementJsonsAbove:z}}};e.collectSectionJsons=function(d,f){f=f||{};var h=[];if(!d)return[];if(d.sections)return d.sections;if(!d.sectionsTables)return[];f.processSectionJson=
f.processSectionJson||function(){};d.sectionsTables.forEach(function(l,q){var t={addBackground:function(){!1!==f.backgroundForeground&&l.backgroundSectionJson&&l.backgroundSectionJson.stack&&h.push(l.backgroundSectionJson)},addBackgroundTables:function(r){var u=[];!1!==f.floatingTables&&l.backgroundFloatingTablesSectionJson&&l.backgroundFloatingTablesSectionJson.stack.forEach(function(z,A){"table"===z.id&&e._processTableJson(z,u,"floating",d.documentOptions,f,l,A,!1)});r&&u.reverse();u.forEach(function(z){f.processSectionJson(z,
{pageIndex:q,source:"foreground",floatingIndex:z.__floatingIndex});delete z.__floatingIndex});h=h.concat(u)},addInGridSections:function(){var r=[];e._processTableJson(l,r,"page",d.documentOptions,f,l);r.forEach(function(u){f.processSectionJson(u,{pageIndex:q,source:"grid",index:u.__inGridIndex});delete u.__inGridIndex});h=h.concat(r)},addForegroundTables:function(r){var u=[];!1!==f.floatingTables&&l.foregroundFloatingTablesSectionJson&&l.foregroundFloatingTablesSectionJson.stack.forEach(function(z,
A){"table"===z.id&&e._processTableJson(z,u,"floating",d.documentOptions,f,l,A,!0)});r&&u.reverse();u.forEach(function(z){f.processSectionJson(z,{pageIndex:q,source:"foreground",floatingIndex:z.__floatingIndex});delete z.__floatingIndex});h=h.concat(u)},addForeground:function(){!1!==f.backgroundForeground&&l.foregroundSectionJson&&l.foregroundSectionJson.stack&&h.push(l.foregroundSectionJson)}};f.topFirst?(t.addForeground(),t.addForegroundTables(!0),t.addInGridSections(),t.addBackgroundTables(!0),
t.addBackground()):(t.addBackground(),t.addBackgroundTables(),t.addInGridSections(),t.addForegroundTables(),t.addForeground())});return h};e._processTableJson=function(d,f,h,l,q,t,r,u){d.rows.forEach(function(z,A){z.fieldInfos&&d.columns.forEach(function(B,E){var F=z.fieldInfos[B.field];if(F&&F.sectionJson&&F.sectionJson.stack){q.processFieldInfoFunc&&q.processFieldInfoFunc(F);(!1!==q.saveParentInfo||q.populateWithFloatingElementsBehind)&&b.provideParentInfo(F.sectionJson,d,z,B,h,l);if(q.populateWithFloatingElementsBehind){var G=
w.clone(F.sectionJson),H;"page"===h?H=c.getIntersectingTableJsonsBehind(t,l,G._parentBox,-1,void 0):"floating"===h&&(H=c.getIntersectingTableJsonsBehind(t,l,G._parentBox,r,u));F=function(v){v=w.clone(v);v.isContextFloatingElement=!0;v.style.left=v.style.left+l.left-G._parentBox.x;if("table"===v.id)v.style.top=v.style.top+l.top-G._parentBox.y;else if("img"===v.id||"map"===v.id)v.style.top=v.style.top+l.top-G._parentBox.y;return v};B=H.elementJsonsBehind.map(F);H=H.elementJsonsAbove.map(F);G.stack=
B.concat(G.stack);G.stack=G.stack.concat(H);f.push(G)}else f.push(F.sectionJson);H=f[f.length-1];"page"===h?H.__inGridIndex=A*d.columns.length+E:H.__floatingIndex=r}})});b.sanitize(d)};e.getParentBox=function(d){return d&&d._parentBox};e.setParentBox=function(d,f){d._parentBox=f};e.getParentStyle=function(d){return d&&d._parentStyle};return e})},"esri/dijit/geoenrichment/utils/MathUtil":function(){define([],function(){function w(b){return Array.isArray(b)?b:[b.x,b.y]}function p(b){return Array.isArray(b)?
b:[b.x,b.y,b.x+b.w,b.y+b.h]}function m(b){return Array.isArray(b)?{x:b[0],y:b[1],w:b[2]-b[0],h:b[3]-b[1]}:b}function k(b){return[[b[0],b[1]],[b[2],b[1]],[b[2],b[3]],[b[0],b[3]],[b[0]+(b[2]-b[0])/2,b[1]+(b[3]-b[1])/2]]}var e={rotatePointAroundPoint:function(b,a,c){c=e.degToRad(c);var d=w(b),f=w(a);a=Math.cos(c)*(f[0]-d[0])-Math.sin(c)*(f[1]-d[1])+d[0];c=Math.sin(c)*(f[0]-d[0])+Math.cos(c)*(f[1]-d[1])+d[1];return Array.isArray(b)?[a,c]:{x:a,y:c}},degToRad:function(b){return b*Math.PI/180},radToDeg:function(b){return 180*
b/Math.PI},cosDeg:function(b){return Math.cos(e.degToRad(b))},sinDeg:function(b){return Math.sin(e.degToRad(b))},angleTo180_180Range:function(b){b=(b+180)%360;0>b&&(b=360+b);return b-180},angleTo0_360Range:function(b){b%=360;0>b&&(b=360+b);return b},calcVectorLength:function(b){var a=b[0]-b[2];b=b[1]-b[3];return Math.sqrt(a*a+b*b)},addPointToVector:function(b,a){a=w(a);b=b.slice();b[0]+=a[0];b[1]+=a[1];b[2]+=a[0];b[3]+=a[1];return b},subtractPointFromVector:function(b,a){a=w(a);b=b.slice();b[0]-=
a[0];b[1]-=a[1];b[2]-=a[0];b[3]-=a[1];return b},putVectorToOrigin:function(b){return e.subtractPointFromVector(b,[b[0],b[1]])},normalizeVector:function(b){b=e.putVectorToOrigin(b);var a=e.calcVectorLength(b);b[2]/=a;b[3]/=a;return b},calcDotProduct:function(b,a){b=e.putVectorToOrigin(b);a=e.putVectorToOrigin(a);return b[2]*a[2]+b[3]*a[3]},calcAngleBetweenVectors:function(b,a){b=e.normalizeVector(b);a=e.normalizeVector(a);return Math.acos(e.calcDotProduct(b,a))},addLengthToVector:function(b,a){var c=
e.calcVectorLength(b),d=[b[0],b[1]];b=e.normalizeVector(b);b[2]*=c+a;b[3]*=c+a;return e.addPointToVector(b,d)},rotateVectorAroundPoint:function(b,a,c){a=w(a);var d=e.rotatePointAroundPoint(a,[b[0],b[1]],c);b=e.rotatePointAroundPoint(a,[b[2],b[3]],c);return[d[0],d[1],b[0],b[1]]},toLineABC:function(b){var a=b[3]-b[1],c=b[0]-b[2];return[a,c,-a*b[0]-c*b[1]]},intersect2Lines:function(b,a){var c=e.toLineABC(b),d=e.toLineABC(a);a=c[0];b=c[1];c=c[2];var f=d[0],h=d[1];d=d[2];var l=a*h-f*b;return 0===l?null:
[(d*b-c*h)/l,(f*c-a*d)/l]},intersectLineWithRect:function(b,a){function c(t,r){(t=e.intersect2Lines(b,[t[0],t[1],r[0],r[1]]))&&e.isPointInRect(a,t)&&q.push(t)}var d=k(a),f=d[0],h=d[1],l=d[2];d=d[3];var q=[];c(f,h);c(h,l);c(l,d);c(d,f);if(2!==q.length)return null;f=[q[0][0],q[0][1],q[1][0],q[1][1]];return e.calcVectorLength(f)?f:null},isPointInRect:function(b,a){b=p(b);a=w(a);var c=b[2]-b[0],d=b[3]-b[1];return!(a[0]<b[0]||a[0]>b[0]+c||a[1]<b[1]||a[1]>b[1]+d)},isRectInRect:function(b,a){return e.checkRectsIntersect([b,
a])&&k(p(b)).every(function(c){return e.isPointInRect(a,c)})},checkRectsIntersect:function(b){b=b.map(p);return b.every(function(a){var c=k(a);return b.every(function(d){return a===d?!0:c.some(function(f){return e.isPointInRect(d,f)})||k(d).some(function(f){return e.isPointInRect(a,f)})})})},getRotatedRectBox:function(b,a){var c=!Array.isArray(b);b=p(b);var d=k(b);b=d[0];var f=d[1],h=d[2],l=d[3];d=d[4];b=e.rotatePointAroundPoint(d,b,a);f=e.rotatePointAroundPoint(d,f,a);h=e.rotatePointAroundPoint(d,
h,a);l=e.rotatePointAroundPoint(d,l,a);b=e.getPointsExtent([b,f,h,l]);return c?m(b):b},uniteRects:function(b){var a=!Array.isArray(b[0]);b=b.map(p);var c=[];b.forEach(function(d){c=c.concat(k(d))});b=e.getPointsExtent(c);return a?m(b):b},getPointsExtent:function(b){var a=!Array.isArray(b[0]),c=Infinity,d=-Infinity,f=Infinity,h=-Infinity;b.forEach(function(l){l=w(l);c=Math.min(c,l[0]);d=Math.max(d,l[0]);f=Math.min(f,l[1]);h=Math.max(h,l[1])});b=[c,f,d,h];return a?m(b):b}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil":function(){define(["dojo/_base/lang",
"../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(w,p,m,k,e){var b={getFieldCellValue:function(a){return a.row&&a.row[a.column.field]},setFieldCellContent:function(a,c){a.set("value",c);a.row[a.column.field]=c},clearFieldInfo:function(a,c){a.fieldInfos&&delete a.fieldInfos[c];a[c]="";b.setNumericDataValue(void 0,a,c)},getNumericCellValue:function(a){return b.getNumericDataValue(a.row,
a.column.field)},setNumericCellValue:function(a,c){return b.setNumericDataValue(c,a.row,a.column.field)},getNumericDataValue:function(a,c){return a&&c&&a[c+"_numeric"]},setNumericDataValue:function(a,c,d){c[d+"_numeric"]=a},getCellGroupStyleStats:function(a){return a.row&&a.column.field&&a.row[a.column.field+"_groupStyle"]},setCellGroupStyleStats:function(a,c){a.row[a.column.field+"_groupStyle"]=c},getRenderedValue:function(a,c,d){var f={parentGrid:a,row:c,column:d};a=a._getCellRenderer().getRenderedContent(f);
if(a.isUnavailableData)return{};c=b.getNumericDataValue(c,d.field);"number"!==typeof c&&("number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(d=k.parsePercentOrCurrency(a.formattedValue,e.getCurrencyFormat()),isNaN(d)||(c=d)):c=a.value);return{numericValue:c,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&!a.row[a.column.field]&&!b.getFieldInfo(a)},hasSpans:function(a){return b.getColumnSpan(a)||b.getRowSpan(a)},getColumnSpan:function(a){return a&&
a.row&&a.row.columnSpans&&a.row.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.row&&a.row.rowSpans&&a.row.rowSpans[a.column.field]},getDataColumnSpan:function(a,c){return a&&a.columnSpans&&a.columnSpans[c]},getDataRowSpan:function(a,c){return a&&a.rowSpans&&a.rowSpans[c]},getFieldInfo:function(a){return a&&a.row&&a.column&&a.row.fieldInfos&&a.row.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return b.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,c){a.row&&
(a.row.fieldInfos[a.column.field]=c)},provideFieldInfo:function(a){b.setFieldInfo(a,b.getFieldInfo(a)||{});return b.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:b.getConditionalFormatting(a),dataDrilling:b.getDataDrilling(a),tooltipInfo:b.getTooltipInfo(a)}},setPreservableSettings:function(a,c){b.setConditionalFormatting(a,c&&c.triggerJson);b.setDataDrilling(a,c&&c.dataDrilling);b.setTooltipInfo(a,c&&c.tooltipInfo)},getCellStyle:function(a,c){if(!a||!a.row||!a.column)return null;
var d=a.row.style&&a.row.style.fields&&a.row.style.fields[a.column.field];!d&&c&&(d={},b.setCellStyle(a,d));return d},getCellThemeStyle:function(a){return a&&a.row&&a.column?a.row.themeStyle&&a.row.themeStyle.fields[a.column.field]:null},setCellStyle:function(a,c){var d=a.row.style=a.row.style||{};d.fields=d.fields||{};d.fields[a.column.field]=c},updateCellStyle:function(a,c){a=b.getCellStyle(a,!0);w.mixin(a,c)},copyFieldStyle:function(a,c,d){a=b.getCellStyle(a);c=b.getCellStyle(c,!0);for(var f in d)void 0!==
a[f]&&(c[f]=a[f])},getFieldCellUrl:function(a){if(a.row&&a.row.urls&&a.column)return a.row.urls[a.column.field]},setFieldCellUrl:function(a,c){a.row&&a.column&&(a.row.urls=a.row.urls||{},void 0===c?delete a.row.urls[a.column.field]:a.row.urls[a.column.field]=c)},getConditionalFormatting:function(a){return(a=b._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,c){var d=b.getFieldInfo(a);if(d){d.triggerJson=null;if(c){if(a=b.isVariableLikeFieldCell(a))c.fieldInfo=d;c.fieldInfo===d&&
(c.fieldInfo=w.clone(c.fieldInfo),delete c.fieldInfo.triggerJson,a&&(delete c.fieldInfo.tooltipInfo,delete c.fieldInfo.dataDrillingPanelInfo))}d.triggerJson=c}},getDataDrilling:function(a){return(a=b.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},setDataDrilling:function(a,c){if(a=b.getSourceFieldInfo(a))a.dataDrillingPanelInfo=c},getTooltipInfo:function(a){return(a=b.getSourceFieldInfo(a))&&a.tooltipInfo},setTooltipInfo:function(a,c){if(a=b.getSourceFieldInfo(a))a.tooltipInfo=c},getSourceFieldInfo:function(a){var c=
b._toFieldInfo(a);a=b.getConditionalFormatting(a);return c&&c.isImage?a&&a.fieldInfo:c},_toFieldInfo:function(a){return a?a.row?b.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isReportSection)},isInfographicCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isChart)},isMapCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=
b._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=b._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=b._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:null},isShapeCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=b._toFieldInfo(a))&&a.shapeJson;return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=b._toFieldInfo(a))&&a.shapeJson;return!(!a||
!a.isPlaceholder)},isTextLikeCell:function(a){return!b._toFieldInfo(a)||b.isRichTextCell(a)||b.isVariableLikeFieldCell(a)||b.isSpecialFieldCell(a)},isRichTextCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name&&"LocatorSummary"!==a.name)},isVariableFieldCell:function(a){a=b._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=b._toFieldInfo(a);
return!(!a||!a.script)},isUneditableScript:function(a){a=b._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=b._toFieldInfo(a))?a.hasVariable&&m.isNumericField(a)||a.script&&("Double"===a.script.type||!a.script.isUneditableScript&&"String"!==a.script.type)||"headers.CHART_POINT_VALUE"===a.name||"LocatorSummary"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return b.isNumericVariableFieldCell(a)},isStringVariableFieldCell:function(a){a=
b._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var c=b._toFieldInfo(a);return c&&("headers.CHART_POINT_VALUE"===c.name||"LocatorSummary"===c.name||!b.isVariableLikeFieldCell(a)&&p.hasField(c.name))}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary":function(){define(["dojo/string","dojo/i18n!esri/nls/jsapi"],function(w,p){var m=p.geoenrichment.dijit.ReportPlayer.FieldInfoLabels;
p=p.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;m={_SPECIAL_HEADER_FIELDS_NAME_MAP:{SITE_NAME:"SiteName",STORE_ADDR:"SiteAddr",AREA_DESC2:"SiteDesc",STORE_LAT:"Latitude",STORE_LONG:"Longitude",AREA_ID:"AreaID",AREA_DESC:"AreaDesc",STORE_ID:"StoreID",RING:"Ring",STORE_NAME:"StoreName",GROUPCOUNT:"PointCount"},_ADDITIONAL_HEADER_FIELDS_MAP:{SITENOTE:"SiteNote",SITENOTE2:"SiteNote2",SITENOTE3:"SiteNote3",SITENOTE4:"SiteNote4",SITENOTE5:"SiteNote5",SITENOTE6:"SiteNote6",SITENOTE7:"SiteNote7",SITENOTE8:"SiteNote8",
SITENOTE9:"SiteNote9",SITENOTE10:"SiteNote10",SITENOTES:"SiteNotes",CHART_AREA_NAME:"ChartAreaName",CHART_SERIES_NAME:"ChartSeriesName",CHART_POINT_NAME:"ChartVariableName",CHART_POINT_VALUE:"ChartVariableValue"},_REPORT_VAR_FIELDS_MAP:{REPORTNAME:"Name",REPORTTITLE:"Title",REPORTTITLE2:"Subtitle",CURRPAGE:"Page",COPYRIGHT:"Copyright",TRIALURLTEXT:"TrialUrlText",PHONENUMBER:"PhoneNumber",PRODUCTURL:"ProductUrl",PRODUCTLABEL:"ProductLabel",SOURCE:"Source",DATASOURCES:"DataSources",DATAVINTAGE:"DataVintage",
CURRDATE:"Date",LOCATORSUMMARY:"LocatorSummary",CENSUSYEAR:"CensusYear",CURRENTYEAR:"CurrentYear",FUTUREYEAR:"FutureYear",LATITUDELABEL:"LatitudeLabel",LONGITUDELABEL:"LongitudeLabel",PAGEFORMAT:"PageFormat",BANDFROM0TO1UNIT2:"BandFrom0To1Unit2",RADIUS0UNIT1:"Radius0Unit1",AREADELIMITER:"AreaDelimiter",BANDREGIONFROM0TO1:"BandRegionFrom0To1",ET_AL:"ET_AL",LINEBUFFERSEGMENTFROM0TO1UNIT2RADIUS:"LineBufferSegmentFrom0To1Unit2Radius",LINEBUFFERRADIUS0UNIT1RADIUS:"LineBufferRadius0Unit1Radius",RINGVALUE0UNIT1RADIUS:"RingValue0Unit1Radius",
RINGSVALUES0UNIT1RADII:"RingsValues0Unit1Radii",RINGBUFFERBANDFROM0TO1UNIT2RADIUS:"RingBufferBandFrom0To1Unit2Radius",DRIVETIMEBANDFROM0TO1UNIT2RADIUS:"DriveTimeBandFrom0To1Unit2Radius",RINGBUFFERBANDSBANDS0UNIT1RADII:"RingBufferBandsBands0Unit1Radii",RINGBUFFERBANDRING0UNIT1RADIUS:"RingBufferBandRing0Unit1Radius",DRIVETIMEBANDBAND0UNIT1RADIUS:"DriveTimeBandBand0Unit1Radius",DRIVETIMESRINGS0UNIT1RADII:"DriveTimesRings0Unit1Radii",DRIVETIMERING0UNIT1RADIUS:"DriveTimeRing0Unit1Radius",DRIVEDISTANCEVALUE0UNIT1RADIUS:"DriveDistanceValue0Unit1Radius",
DRIVEDISTANCESRINGS0UNIT1RADII:"DriveDistancesRings0Unit1Radii",DRIVEDISTANCERING0UNIT1RADIUS:"DriveDistanceRing0Unit1Radius"},_SPECIAL_HEADER_FIELDS_NAME_MAP_BACK:{},_ADDITIONAL_HEADER_FIELDS_MAP_BACK:{},_REPORT_VAR_FIELDS_MAP_BACK:{},_PREVIEW:{Title:p.fieldPreviewTitle,Title_graphic:p.fieldPreviewTitleGraphic,Name:p.fieldPreviewTitle,Name_graphic:p.fieldPreviewTitleGraphic,Subtitle:p.fieldPreviewSubtitle,Date:p.fieldPreviewDate,Page:p.fieldPreviewPage,Count:p.fieldPreviewLocationsCount,Copyright:"\u00a9 "+
(new Date).getFullYear()+" Esri",TrialUrlText:p.fieldPreviewTrialUrlText,PhoneNumber:p.fieldPreviewPhoneNumber,ProductUrl:p.fieldPreviewProductUrl,ProductLabel:p.fieldPreviewProductLabel,Source:p.fieldPreviewSource,DataSources:p.fieldPreviewDataSources,DataVintage:p.fieldPreviewDataVintage,SITE_NAME:p.fieldPreviewSiteName,SITE_NAME_multi:p.fieldPreviewSiteNameMulti,STORE_LAT:p.fieldPreviewLat,STORE_LONG:p.fieldPreviewLong,AREA_DESC2:p.fieldPreviewAreaDesc2,STORE_ADDR:p.fieldPreviewStoreAddr,AREA_DESC:p.fieldPreviewAreaDesc,
CHART_AREA_NAME:p.fieldPreview_chartArea,CHART_SERIES_NAME:p.fieldPreview_seriesName,CHART_POINT_NAME:p.fieldPreview_pointName},_LABELS:{CHART_AREA_NAME:m.chartAreaName,CHART_SERIES_NAME:m.chartSeriesName,CHART_POINT_NAME:m.chartPointName,CHART_POINT_VALUE:m.chartPointValue},DATE_FIELD_NAME:"Date",DATE_FIELD_ALIAS:"Date",DATE_FIELD_DEFAULT_FORMAT:"d-MMMM dd, yyyy",GROUPCOUNT_FIELD_NAME:"PointCount",GROUPCOUNT_FIELD_ALIAS:"PointCount",LOCATORSUMMARY_FIELD_NAME:"LocatorSummary",LOCATORSUMMARY_FIELD_ALIAS:"LocatorSummary",
SITENOTES_FIELD_NAME:"SiteNotes",SITENOTES_FIELD_ALIAS:"SiteNotes",init:function(){for(var k in this._SPECIAL_HEADER_FIELDS_NAME_MAP)this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[this._SPECIAL_HEADER_FIELDS_NAME_MAP[k].toUpperCase()]=k;for(k in this._ADDITIONAL_HEADER_FIELDS_MAP)this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[this._ADDITIONAL_HEADER_FIELDS_MAP[k].toUpperCase()]=k;for(k in this._REPORT_VAR_FIELDS_MAP)this._REPORT_VAR_FIELDS_MAP_BACK[this._REPORT_VAR_FIELDS_MAP[k].toUpperCase()]=k},templateToUIHeader:function(k){k=
k&&this.trimTemplateHeaderName(k).toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP[k]||this._ADDITIONAL_HEADER_FIELDS_MAP[k]},qualifyTemplateHeaderName:function(k){return k&&0!==k.indexOf("headers.")?"headers."+k:k},trimTemplateHeaderName:function(k){if(!k)return k;0===k.indexOf("headers.")&&(k=k.substr(k.indexOf(".")+1));return k},templateToUIReportVar:function(k){k=k&&k.toUpperCase();return this._REPORT_VAR_FIELDS_MAP[k]},uiToTemplate:function(k){k=k&&k.toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[k]||
this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[k]||this._REPORT_VAR_FIELDS_MAP_BACK[k]},getPreview:function(k,e,b){k=this.trimTemplateHeaderName(k);if(!k)return null;!e||"Title"!==k&&"Name"!==k||(k+="_graphic");b&&"SITE_NAME"===k&&(k+="_multi");return"SiteNotes"===k?p.fieldPreviewSiteNotes:0===k.indexOf("SiteNote")?w.substitute(p.fieldPreviewSiteNote,{index:k.replace("SiteNote","")||1}):this._PREVIEW[k]},hasField:function(k){return!!(this.uiToTemplate(k)||this.templateToUIHeader(k)||this.templateToUIReportVar(k))},
isAdditionalHeadersField:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._ADDITIONAL_HEADER_FIELDS_MAP[k]},isChartAttribute:function(k){return this.isAdditionalHeadersField(k)&&-1!==k.toUpperCase().indexOf("CHART_")},getSiteNoteFieldNameAt:function(k){return"SiteNote"+(!k||1>=Number(k)?"":k)},getFieldLabel:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._LABELS[k]},getReportVarSelfTagsMap:function(){return{Page:"currPage",Title:"reportName",Name:"reportName",
Subtitle:"reportTitle2"}},getReportVarTextTagsMap:function(){var k=this.getReportVarSelfTagsMap(),e={},b;for(b in this._REPORT_VAR_FIELDS_MAP){var a=this._REPORT_VAR_FIELDS_MAP[b];k[a]||(e[a]=a)}return e}};m.init();return m})},"esri/dijit/geoenrichment/utils/FieldUtil":function(){define([],function(){function w(e){return("string"===typeof e?e:e&&e.type)||""}var p={isNumericField:function(e){switch(w(e)){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return"i";case "esriFieldTypeSingle":case "esriFieldTypeDouble":return"f"}return!1},
isStringField:function(e){return"esriFieldTypeString"==w(e)||!1},isDateField:function(e){return"esriFieldTypeDate"==w(e)||!1}},m=/DISTANCE$/;p.isDistanceField=function(e){return m.test(w(e))};var k=/^(SHAPE__Area|SHAPE__Length)$/i;p.canShowField=function(e,b){if(!e||!e.name||"esriFieldTypeOID"===e.type)return!1;if("esriFieldTypeDate"===e.type)return"d";var a=p.isNumericField(e)||p.isStringField(e);if("f"===a&&!1===e.editable&&k.test(e.name))return null;void 0===b&&(b=/^(OBJECTID|OID|FID)$/i);return b&&
b.test(e.name)?!1:!0===a?"s":a};p.createFieldInfo=function(e){var b=p.canShowField(e);e={fieldName:e.name,label:e.alias||e.name,isEditable:!!e.editable,visible:!!b};switch(b){case "i":e.format={places:0,digitSeparator:!0};break;case "f":e.format={digitSeparator:!0};break;case "s":e.stringFieldOption="textbox"}return e};return p})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number","./DateUtil"],function(w,p){var m={};Math.log10=Math.log10||function(e){return Math.log(e)*
Math.LOG10E};m.populateObject=function(e,b,a){function c(d,f){function h(q){var t=d[q],r=f[q],u=t&&"object"===typeof t;void 0!==t&&(void 0===r?f[q]=t:r&&"object"===typeof r&&u?c(t,r):a&&(u?(r=f[q]={},c(t,r)):f[q]=d[q]))}if(d&&f&&!(Array.isArray(d)&&!Array.isArray(f)||Array.isArray(f)&&!Array.isArray(d)))if(Array.isArray(d))d.forEach(function(q,t){h(t)});else for(var l in d)h(l)}c(b,e);return e};m.filterByPattern=function(e,b){function a(d,f,h){for(var l in d){var q=d[l],t=f[l];if(Array.isArray(q)){var r=
q[0];if(t&&Array.isArray(t)){var u=h[l]=[];t.forEach(function(A){if(A&&"object"===typeof A){var B=Array.isArray(A)?[]:{};a(r,A,B);u.push(B)}})}}else if("object"===typeof q){if(t&&"object"===typeof t){var z=h[l]={};a(q,t,z)}}else void 0!==t&&(h[l]=t)}}var c={};a(b,e,c);return c};m.traverseObject=function(e,b){for(var a in e){var c=e[a];b(c,a,e);c&&"object"===typeof c&&m.traverseObject(c,b)}};m.copyOwnJsonProperties=function(e,b,a){b=b||{};for(var c in e){var d=e[c];e.hasOwnProperty(c)&&"function"!=
typeof d&&(d&&"object"==typeof d&&a&&(d=a(c,d)),void 0!==d&&(b[c]=d))}return b};m.removeUndefinedProperties=function(e){e&&Object.keys(e).forEach(function(b){void 0===e[b]&&delete e[b]});return e};m.getValue=function(e,b){if("string"!==typeof b)return e;b=b.split(".");for(var a=0;a<b.length;a++)e=e&&e[b[a]];return e};m.setValue=function(e,b,a){if("string"===typeof b&&(b=b.split("."),b.length)){for(var c=0;c<b.length-1;c++)e=e&&e[b[c]];e&&(e[b[b.length-1]]=a)}};m.isNumber=function(e){return!isNaN(parseFloat(e))&&
isFinite(e)};m.roundNumber=function(e,b){return"number"!==typeof e?e:parseFloat(e.toFixed(void 0!==b?b:0))};m.getBestPrecision=function(e){return 0===e?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(e))))};m.getPlaces=function(e,b){function a(l,q){var t=e.indexOf(l,c);if(0>t)return d;l=e.charAt(t+l.length);return!l||0>q.indexOf(l)?d:t-c}e=+e;if(isNaN(e))return-1;e+="";var c=e.indexOf(".")+1,d=c?e.length-c:0;if(2>=d||!b)return d;b=0;if(!+e.substr(0,c-1))for(;"0"===e.charAt(c);)c++,b++,d--;for(var f=
d-1;2<=f;f--){var h=Math.min(a("000000000000000".substr(0,f),"01234"),a("999999999999999".substr(0,f),"56789"));if(h!==d){d=h;break}}return d+b};m.formatNumber=function(e,b){b="number"===typeof b?{places:b}:b||{};var a=b.places,c={};0<=a?c.places=a:a=-1;c.locale=b.locale||p.getDateNumberLocale();e=w.format(e,c);if(b.noSeparator){c=m.getSeparator();var d;if(c)for(;0<=(d=e.indexOf(c));)e=e.substr(0,d)+e.substr(d+1)}if(b.preserveTrailingZeroes||0>=a||!e)return e;for(b=e.length;0<a&&"0"==e.charAt(b-1);)b--,
--a||b--;return e.substr(0,b)};m.formatNumberAsCurrency=function(e,b,a){return b?b.split(";")[0>e?1:0].replace("0",m.formatNumber(Math.abs(e),a)):m.formatNumber(e,a)};var k;m.getSeparator=function(){void 0===k&&(k=w.format(9999,{places:0}).replace(/9/g,""));return k};m.parseNumber=function(e,b,a,c){if(""===e)return"undefined"!==typeof a?a:NaN;if(null==e||"string"!==typeof e&&isNaN(e))return NaN;e=String(e);if(!e.trim())return void 0!==a?a:NaN;a=w.parse(e,{strict:c,locale:p.getDateNumberLocale()});
isNaN(a)&&e.trim().length&&(a=c?w.parse(e,{strict:c,locale:"en-US"}):Number(e));return isNaN(a)||void 0===b||0>b?a:w.round(a,b)};m.parsePercentOrCurrency=function(e,b,a,c,d){"string"===typeof e&&(e=e.replace("%",""),b&&(b=b.split(";")[0].replace("0",""),e=e.replace(b,"")));return m.parseNumber(e,a,c,d)};m.compareEqual=function(e,b,a){return void 0===a?e===b:Number(Number(e).toFixed(a))===Number(Number(b).toFixed(a))};return m})},"esri/dijit/geoenrichment/utils/DateUtil":function(){define(["dojo/date/locale",
"esri/moment"],function(w,p){var m={formatDate:function(k,e){k=m.objectToDate(k);e.locale=e.locale||m.getDateNumberLocale();return k?w.format(k,e):""},formatMoment:function(k,e){return(k=m.objectToTime(k))?p(k).format(e):""},formatDateShort:function(k){return m.formatMoment(k,"L")},formatDateTimeShort:function(k){return m.formatMoment(k,"L LT")},formatLiveTime:function(k){var e=m.formatMoment(k,"l, LT").replace(/\d\d\d\d/,function(b){return b.substr(2)});return e?e+" "+m.formatDate(k,{datePattern:"ZZZZ",
selector:"date"}):""},formatTypicalTime:function(k){return m.formatMoment(k,"ddd LT")},parseDateShort:function(k){return(k=+p(k,"L"))?new Date(k):null},getReportFooterDate:function(k){return w.format(k||new Date,{datePattern:"MMMM d, yyyy",selector:"date"})},getFullYear:function(){return(new Date).getFullYear()},objectToTime:function(k){if(!k)return null;k="string"===typeof k?new Date(k):k;return k.getTime?k.getTime():Number(k)||null},objectToDate:function(k){return k?k.getTime?k:new Date(k):null},
getDateNumberLocale:function(){return window.dojoConfig&&window.dojoConfig.extraLocale&&window.dojoConfig.extraLocale[0]||window.dojo.locale}};return m})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(w,p,m){return m})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(w,p,m,k){Object.defineProperty(p,"__esModule",{value:!0});var e={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,
cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};p.load=function(b,a,c){b=m.locale;var d=b in e;if(!d){var f=b.split("-");1<f.length&&f[0]in e&&(b=f[0],d=!0)}d?a(["moment/locale/"+
b],function(){c(k)}):c(k)}})},"moment/moment":function(){(function(w,p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define(p):w.moment=p()})(this,function(){function w(){return xc.apply(null,arguments)}function p(g){return g instanceof Array||"[object Array]"===Object.prototype.toString.call(g)}function m(g){return null!=g&&"[object Object]"===Object.prototype.toString.call(g)}function k(g,n){return Object.prototype.hasOwnProperty.call(g,
n)}function e(g){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(g).length;for(var n in g)if(k(g,n))return!1;return!0}function b(g){return void 0===g}function a(g){return"number"===typeof g||"[object Number]"===Object.prototype.toString.call(g)}function c(g){return g instanceof Date||"[object Date]"===Object.prototype.toString.call(g)}function d(g,n){var y=[],C;for(C=0;C<g.length;++C)y.push(n(g[C],C));return y}function f(g,n){for(var y in n)k(n,y)&&(g[y]=n[y]);k(n,"toString")&&
(g.toString=n.toString);k(n,"valueOf")&&(g.valueOf=n.valueOf);return g}function h(g,n,y,C){return Jb(g,n,y,C,!0).utc()}function l(g){null==g._pf&&(g._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return g._pf}function q(g){if(null==g._isValid){var n=l(g),y=yc.call(n.parsedDateParts,function(C){return null!=C});
y=!isNaN(g._d.getTime())&&0>n.overflow&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&y);g._strict&&(y=y&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(g))return y;g._isValid=y}return g._isValid}function t(g){var n=h(NaN);null!=g?f(l(n),g):l(n).userInvalidated=!0;return n}function r(g,n){var y;b(n._isAMomentObject)||(g._isAMomentObject=
n._isAMomentObject);b(n._i)||(g._i=n._i);b(n._f)||(g._f=n._f);b(n._l)||(g._l=n._l);b(n._strict)||(g._strict=n._strict);b(n._tzm)||(g._tzm=n._tzm);b(n._isUTC)||(g._isUTC=n._isUTC);b(n._offset)||(g._offset=n._offset);b(n._pf)||(g._pf=l(n));b(n._locale)||(g._locale=n._locale);if(0<mb.length)for(y=0;y<mb.length;y++){var C=mb[y];var J=n[C];b(J)||(g[C]=J)}return g}function u(g){r(this,g);this._d=new Date(null!=g._d?g._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===nb&&(nb=!0,w.updateOffset(this),
nb=!1)}function z(g){return g instanceof u||null!=g&&null!=g._isAMomentObject}function A(g){!1===w.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+g)}function B(g,n){var y=!0;return f(function(){null!=w.deprecationHandler&&w.deprecationHandler(null,g);if(y){var C=[],J,L;for(J=0;J<arguments.length;J++){var O="";if("object"===typeof arguments[J]){O+="\n["+J+"] ";for(L in arguments[0])k(arguments[0],L)&&(O+=L+": "+arguments[0][L]+", ");O=
O.slice(0,-2)}else O=arguments[J];C.push(O)}A(g+"\nArguments: "+Array.prototype.slice.call(C).join("")+"\n"+Error().stack);y=!1}return n.apply(this,arguments)},n)}function E(g,n){null!=w.deprecationHandler&&w.deprecationHandler(g,n);Kb[g]||(A(n),Kb[g]=!0)}function F(g){return"undefined"!==typeof Function&&g instanceof Function||"[object Function]"===Object.prototype.toString.call(g)}function G(g,n){var y=f({},g),C;for(C in n)k(n,C)&&(m(g[C])&&m(n[C])?(y[C]={},f(y[C],g[C]),f(y[C],n[C])):null!=n[C]?
y[C]=n[C]:delete y[C]);for(C in g)k(g,C)&&!k(n,C)&&m(g[C])&&(y[C]=f({},y[C]));return y}function H(g){null!=g&&this.set(g)}function v(g,n,y){var C=""+Math.abs(g);return(0<=g?y?"+":"":"-")+Math.pow(10,Math.max(0,n-C.length)).toString().substr(1)+C}function D(g,n,y,C){var J=C;"string"===typeof C&&(J=function(){return this[C]()});g&&(Ia[g]=J);n&&(Ia[n[0]]=function(){return v(J.apply(this,arguments),n[1],n[2])});y&&(Ia[y]=function(){return this.localeData().ordinal(J.apply(this,arguments),g)})}function I(g){return g.match(/\[[\s\S]/)?
g.replace(/^\[|\]$/g,""):g.replace(/\\/g,"")}function K(g){var n=g.match(ob),y;var C=0;for(y=n.length;C<y;C++)n[C]=Ia[n[C]]?Ia[n[C]]:I(n[C]);return function(J){var L="",O;for(O=0;O<y;O++)L+=F(n[O])?n[O].call(J,g):n[O];return L}}function S(g,n){if(!g.isValid())return g.localeData().invalidDate();n=N(n,g.localeData());pb[n]=pb[n]||K(n);return pb[n](g)}function N(g,n){function y(J){return n.longDateFormat(J)||J}var C=5;for(Xa.lastIndex=0;0<=C&&Xa.test(g);)g=g.replace(Xa,y),Xa.lastIndex=0,--C;return g}
function T(g,n){var y=g.toLowerCase();Oa[y]=Oa[y+"s"]=Oa[n]=g}function M(g){return"string"===typeof g?Oa[g]||Oa[g.toLowerCase()]:void 0}function V(g){var n={},y,C;for(C in g)k(g,C)&&(y=M(C))&&(n[y]=g[C]);return n}function W(g){var n=[],y;for(y in g)k(g,y)&&n.push({unit:y,priority:oa[y]});n.sort(function(C,J){return C.priority-J.priority});return n}function Q(g){return 0===g%4&&0!==g%100||0===g%400}function Y(g){return 0>g?Math.ceil(g)||0:Math.floor(g)}function U(g){g=+g;var n=0;0!==g&&isFinite(g)&&
(n=Y(g));return n}function fa(g,n){return function(y){return null!=y?(qa(this,g,y),w.updateOffset(this,n),this):Z(this,g)}}function Z(g,n){return g.isValid()?g._d["get"+(g._isUTC?"UTC":"")+n]():NaN}function qa(g,n,y){if(g.isValid()&&!isNaN(y))if("FullYear"===n&&Q(g.year())&&1===g.month()&&29===g.date())y=U(y),g._d["set"+(g._isUTC?"UTC":"")+n](y,g.month(),Ya(y,g.month()));else g._d["set"+(g._isUTC?"UTC":"")+n](y)}function R(g,n,y){qb[g]=F(n)?n:function(C,J){return C&&y?y:n}}function Pa(g,n){return k(qb,
g)?qb[g](n._strict,n._locale):new RegExp(Ea(g))}function Ea(g){return ka(g.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,y,C,J,L){return y||C||J||L}))}function ka(g){return g.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function da(g,n){var y,C=n;"string"===typeof g&&(g=[g]);a(n)&&(C=function(J,L){L[n]=U(J)});for(y=0;y<g.length;y++)rb[g[y]]=C}function Qa(g,n){da(g,function(y,C,J,L){J._w=J._w||{};n(y,J._w,J,L)})}function Ya(g,n){if(isNaN(g)||isNaN(n))return NaN;var y=(n%
12+12)%12;return 1===y?Q(g+(n-y)/12)?29:28:31-y%7%2}function Lb(g,n){if(!g.isValid())return g;if("string"===typeof n)if(/^\d+$/.test(n))n=U(n);else if(n=g.localeData().monthsParse(n),!a(n))return g;var y=Math.min(g.date(),Ya(g.year(),n));g._d["set"+(g._isUTC?"UTC":"")+"Month"](n,y);return g}function Mb(g){return null!=g?(Lb(this,g),w.updateOffset(this,!0),this):Z(this,"Month")}function Nb(){function g(O,X){return X.length-O.length}var n=[],y=[],C=[],J;for(J=0;12>J;J++){var L=h([2E3,J]);n.push(this.monthsShort(L,
""));y.push(this.months(L,""));C.push(this.months(L,""));C.push(this.monthsShort(L,""))}n.sort(g);y.sort(g);C.sort(g);for(J=0;12>J;J++)n[J]=ka(n[J]),y[J]=ka(y[J]);for(J=0;24>J;J++)C[J]=ka(C[J]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+C.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+y.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function zc(g,n,y,C,J,L,O){100>g&&0<=g?(n=new Date(g+400,n,y,C,J,L,O),isFinite(n.getFullYear())&&n.setFullYear(g)):
n=new Date(g,n,y,C,J,L,O);return n}function Ra(g){if(100>g&&0<=g){var n=Array.prototype.slice.call(arguments);n[0]=g+400;n=new Date(Date.UTC.apply(null,n));isFinite(n.getUTCFullYear())&&n.setUTCFullYear(g)}else n=new Date(Date.UTC.apply(null,arguments));return n}function Za(g,n,y){y=7+n-y;return-((7+Ra(g,0,y).getUTCDay()-n)%7)+y-1}function Ob(g,n,y,C,J){y=(7+y-C)%7;C=Za(g,C,J);C=1+7*(n-1)+y+C;0>=C?(n=g-1,g=(Q(n)?366:365)+C):C>(Q(g)?366:365)?(n=g+1,g=C-(Q(g)?366:365)):(n=g,g=C);return{year:n,dayOfYear:g}}
function Sa(g,n,y){var C=Za(g.year(),n,y);C=Math.floor((g.dayOfYear()-C-1)/7)+1;1>C?(g=g.year()-1,n=C+va(g,n,y)):C>va(g.year(),n,y)?(n=C-va(g.year(),n,y),g=g.year()+1):(g=g.year(),n=C);return{week:n,year:g}}function va(g,n,y){var C=Za(g,n,y);n=Za(g+1,n,y);return((Q(g)?366:365)-C+n)/7}function sb(g,n){return g.slice(n,7).concat(g.slice(0,n))}function Ac(g,n,y){var C;g=g.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],C=0;7>
C;++C){var J=h([2E3,1]).day(C);this._minWeekdaysParse[C]=this.weekdaysMin(J,"").toLocaleLowerCase();this._shortWeekdaysParse[C]=this.weekdaysShort(J,"").toLocaleLowerCase();this._weekdaysParse[C]=this.weekdays(J,"").toLocaleLowerCase()}if(y)n="dddd"===n?la.call(this._weekdaysParse,g):"ddd"===n?la.call(this._shortWeekdaysParse,g):la.call(this._minWeekdaysParse,g);else if("dddd"===n){n=la.call(this._weekdaysParse,g);if(-1!==n)return n;n=la.call(this._shortWeekdaysParse,g);if(-1!==n)return n;n=la.call(this._minWeekdaysParse,
g)}else if("ddd"===n){n=la.call(this._shortWeekdaysParse,g);if(-1!==n)return n;n=la.call(this._weekdaysParse,g);if(-1!==n)return n;n=la.call(this._minWeekdaysParse,g)}else{n=la.call(this._minWeekdaysParse,g);if(-1!==n)return n;n=la.call(this._weekdaysParse,g);if(-1!==n)return n;n=la.call(this._shortWeekdaysParse,g)}return-1!==n?n:null}function tb(){function g(aa,ma){return ma.length-aa.length}var n=[],y=[],C=[],J=[],L;for(L=0;7>L;L++){var O=h([2E3,1]).day(L);var X=ka(this.weekdaysMin(O,""));var ea=
ka(this.weekdaysShort(O,""));O=ka(this.weekdays(O,""));n.push(X);y.push(ea);C.push(O);J.push(X);J.push(ea);J.push(O)}n.sort(g);y.sort(g);C.sort(g);J.sort(g);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+J.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+C.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+y.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+n.join("|")+")","i")}function ub(){return this.hours()%12||12}function Pb(g,
n){D(g,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),n)})}function Qb(g,n){return n._meridiemParse}function Rb(g){return g?g.toLowerCase().replace("_","-"):g}function $a(g){var n=null;if(void 0===ja[g]&&"undefined"!==typeof module&&module&&module.exports)try{n=Ta._abbr;var y=require;y("./locale/"+g);Ca(n)}catch(C){ja[g]=null}return ja[g]}function Ca(g,n){g&&((n=b(n)?wa(g):vb(g,n))?Ta=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+g+" not found. Did you forget to load it?"));
return Ta._abbr}function vb(g,n){if(null!==n){var y=Sb;n.abbr=g;if(null!=ja[g])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=ja[g]._config;else if(null!=n.parentLocale)if(null!=ja[n.parentLocale])y=ja[n.parentLocale]._config;else if(y=$a(n.parentLocale),null!=y)y=y._config;else return Ua[n.parentLocale]||
(Ua[n.parentLocale]=[]),Ua[n.parentLocale].push({name:g,config:n}),null;ja[g]=new H(G(y,n));Ua[g]&&Ua[g].forEach(function(C){vb(C.name,C.config)});Ca(g);return ja[g]}delete ja[g];return null}function wa(g){var n;g&&g._locale&&g._locale._abbr&&(g=g._locale._abbr);if(!g)return Ta;if(!p(g)){if(n=$a(g))return n;g=[g]}a:{n=0;for(var y,C,J,L;n<g.length;){L=Rb(g[n]).split("-");y=L.length;for(C=(C=Rb(g[n+1]))?C.split("-"):null;0<y;){if(J=$a(L.slice(0,y).join("-"))){g=J;break a}if(J=C&&C.length>=y){b:{J=void 0;
var O=Math.min(L.length,C.length);for(J=0;J<O;J+=1)if(L[J]!==C[J])break b;J=O}J=J>=y-1}if(J)break;y--}n++}g=Ta}return g}function wb(g){var n;(n=g._a)&&-2===l(g).overflow&&(n=0>n[xa]||11<n[xa]?xa:1>n[ua]||n[ua]>Ya(n[pa],n[xa])?ua:0>n[na]||24<n[na]||24===n[na]&&(0!==n[sa]||0!==n[ya]||0!==n[Fa])?na:0>n[sa]||59<n[sa]?sa:0>n[ya]||59<n[ya]?ya:0>n[Fa]||999<n[Fa]?Fa:-1,l(g)._overflowDayOfYear&&(n<pa||n>ua)&&(n=ua),l(g)._overflowWeeks&&-1===n&&(n=Bc),l(g)._overflowWeekday&&-1===n&&(n=Cc),l(g).overflow=n);
return g}function Tb(g){var n;var y=g._i;var C=Dc.exec(y)||Ec.exec(y);if(C){l(g).iso=!0;y=0;for(n=ab.length;y<n;y++)if(ab[y][1].exec(C[1])){var J=ab[y][0];var L=!1!==ab[y][2];break}if(null==J)g._isValid=!1;else{if(C[3]){y=0;for(n=xb.length;y<n;y++)if(xb[y][1].exec(C[3])){var O=(C[2]||" ")+xb[y][0];break}if(null==O){g._isValid=!1;return}}if(L||null==O){if(C[4])if(Fc.exec(C[4]))var X="Z";else{g._isValid=!1;return}g._f=J+(O||"")+(X||"");yb(g)}else g._isValid=!1}}else g._isValid=!1}function Ub(g){var n=
Gc.exec(g._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(n){var y=n[3],C=n[2],J=n[5],L=n[6],O=n[7],X=parseInt(n[4],10);y=[49>=X?2E3+X:999>=X?1900+X:X,Vb.indexOf(y),parseInt(C,10),parseInt(J,10),parseInt(L,10)];O&&y.push(parseInt(O,10));a:{if(O=n[1])if(O=Wb.indexOf(O),C=(new Date(y[0],y[1],y[2])).getDay(),O!==C){l(g).weekdayMismatch=!0;O=g._isValid=!1;break a}O=!0}O&&(g._a=y,(O=n[8])?n=Hc[O]:n[9]?n=0:(n=parseInt(n[10],10),O=n%100,n=(n-O)/100*
60+O),g._tzm=n,g._d=Ra.apply(null,g._a),g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm),l(g).rfc2822=!0)}else g._isValid=!1}function Ic(g){var n=Jc.exec(g._i);null!==n?g._d=new Date(+n[1]):(Tb(g),!1===g._isValid&&(delete g._isValid,Ub(g),!1===g._isValid&&(delete g._isValid,g._strict?g._isValid=!1:w.createFromInputFallback(g))))}function Ja(g,n,y){return null!=g?g:null!=n?n:y}function zb(g){var n=[];if(!g._d){var y=new Date(w.now());y=g._useUTC?[y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()]:[y.getFullYear(),
y.getMonth(),y.getDate()];if(g._w&&null==g._a[ua]&&null==g._a[xa]){var C=g._w;if(null!=C.GG||null!=C.W||null!=C.E){var J=1;var L=4;var O=Ja(C.GG,g._a[pa],Sa(ha(),1,4).year);var X=Ja(C.W,1);var ea=Ja(C.E,1);if(1>ea||7<ea)var aa=!0}else if(J=g._locale._week.dow,L=g._locale._week.doy,X=Sa(ha(),J,L),O=Ja(C.gg,g._a[pa],X.year),X=Ja(C.w,X.week),null!=C.d){if(ea=C.d,0>ea||6<ea)aa=!0}else if(null!=C.e){if(ea=C.e+J,0>C.e||6<C.e)aa=!0}else ea=J;1>X||X>va(O,J,L)?l(g)._overflowWeeks=!0:null!=aa?l(g)._overflowWeekday=
!0:(aa=Ob(O,X,ea,J,L),g._a[pa]=aa.year,g._dayOfYear=aa.dayOfYear)}if(null!=g._dayOfYear){aa=Ja(g._a[pa],y[pa]);if(g._dayOfYear>(Q(aa)?366:365)||0===g._dayOfYear)l(g)._overflowDayOfYear=!0;aa=Ra(aa,0,g._dayOfYear);g._a[xa]=aa.getUTCMonth();g._a[ua]=aa.getUTCDate()}for(aa=0;3>aa&&null==g._a[aa];++aa)g._a[aa]=n[aa]=y[aa];for(;7>aa;aa++)g._a[aa]=n[aa]=null==g._a[aa]?2===aa?1:0:g._a[aa];24===g._a[na]&&0===g._a[sa]&&0===g._a[ya]&&0===g._a[Fa]&&(g._nextDay=!0,g._a[na]=0);g._d=(g._useUTC?Ra:zc).apply(null,
n);n=g._useUTC?g._d.getUTCDay():g._d.getDay();null!=g._tzm&&g._d.setUTCMinutes(g._d.getUTCMinutes()-g._tzm);g._nextDay&&(g._a[na]=24);g._w&&"undefined"!==typeof g._w.d&&g._w.d!==n&&(l(g).weekdayMismatch=!0)}}function yb(g){if(g._f===w.ISO_8601)Tb(g);else if(g._f===w.RFC_2822)Ub(g);else{g._a=[];l(g).empty=!0;var n=""+g._i,y,C,J=n.length,L=0;var O=N(g._f,g._locale).match(ob)||[];for(y=0;y<O.length;y++){var X=O[y];if(C=(n.match(Pa(X,g))||[])[0]){var ea=n.substr(0,n.indexOf(C));0<ea.length&&l(g).unusedInput.push(ea);
n=n.slice(n.indexOf(C)+C.length);L+=C.length}if(Ia[X]){if(C?l(g).empty=!1:l(g).unusedTokens.push(X),ea=g,null!=C&&k(rb,X))rb[X](C,ea._a,ea,X)}else g._strict&&!C&&l(g).unusedTokens.push(X)}l(g).charsLeftOver=J-L;0<n.length&&l(g).unusedInput.push(n);12>=g._a[na]&&!0===l(g).bigHour&&0<g._a[na]&&(l(g).bigHour=void 0);l(g).parsedDateParts=g._a.slice(0);l(g).meridiem=g._meridiem;n=g._a;y=na;J=g._locale;O=g._a[na];L=g._meridiem;null!=L&&(null!=J.meridiemHour?O=J.meridiemHour(O,L):null!=J.isPM&&((J=J.isPM(L))&&
12>O&&(O+=12),J||12!==O||(O=0)));n[y]=O;n=l(g).era;null!==n&&(g._a[pa]=g._locale.erasConvertYear(n,g._a[pa]));zb(g);wb(g)}}function Kc(g){if(!g._d){var n=V(g._i);g._a=d([n.year,n.month,void 0===n.day?n.date:n.day,n.hour,n.minute,n.second,n.millisecond],function(y){return y&&parseInt(y,10)});zb(g)}}function Xb(g){var n=g._i,y=g._f;g._locale=g._locale||wa(g._l);if(null===n||void 0===y&&""===n)return t({nullInput:!0});"string"===typeof n&&(g._i=n=g._locale.preparse(n));if(z(n))return new u(wb(n));if(c(n))g._d=
n;else if(p(y)){var C=!1;if(0===g._f.length)l(g).invalidFormat=!0,g._d=new Date(NaN);else{for(n=0;n<g._f.length;n++){y=0;var J=!1;var L=r({},g);null!=g._useUTC&&(L._useUTC=g._useUTC);L._f=g._f[n];yb(L);q(L)&&(J=!0);y+=l(L).charsLeftOver;y+=10*l(L).unusedTokens.length;l(L).score=y;if(C)y<O&&(O=y,X=L);else if(null==O||y<O||J){var O=y;var X=L;J&&(C=!0)}}f(g,X||L)}}else y?yb(g):Lc(g);q(g)||(g._d=null);return g}function Lc(g){var n=g._i;b(n)?g._d=new Date(w.now()):c(n)?g._d=new Date(n.valueOf()):"string"===
typeof n?Ic(g):p(n)?(g._a=d(n.slice(0),function(y){return parseInt(y,10)}),zb(g)):m(n)?Kc(g):a(n)?g._d=new Date(n):w.createFromInputFallback(g)}function Jb(g,n,y,C,J){var L={};if(!0===n||!1===n)C=n,n=void 0;if(!0===y||!1===y)C=y,y=void 0;if(m(g)&&e(g)||p(g)&&0===g.length)g=void 0;L._isAMomentObject=!0;L._useUTC=L._isUTC=J;L._l=y;L._i=g;L._f=n;L._strict=C;g=new u(wb(Xb(L)));g._nextDay&&(g.add(1,"d"),g._nextDay=void 0);return g}function ha(g,n,y,C){return Jb(g,n,y,C,!1)}function Yb(g,n){var y;1===n.length&&
p(n[0])&&(n=n[0]);if(!n.length)return ha();var C=n[0];for(y=1;y<n.length;++y)if(!n[y].isValid()||n[y][g](C))C=n[y];return C}function bb(g){var n=V(g);g=n.year||0;var y=n.quarter||0,C=n.month||0,J=n.week||n.isoWeek||0,L=n.day||0,O=n.hour||0,X=n.minute||0,ea=n.second||0,aa=n.millisecond||0;a:{var ma,Zb=!1;for(ma in n)if(k(n,ma)&&(-1===la.call(Va,ma)||null!=n[ma]&&isNaN(n[ma]))){n=!1;break a}for(ma=0;ma<Va.length;++ma)if(n[Va[ma]]){if(Zb){n=!1;break a}parseFloat(n[Va[ma]])!==U(n[Va[ma]])&&(Zb=!0)}n=
!0}this._isValid=n;this._milliseconds=+aa+1E3*ea+6E4*X+36E5*O;this._days=+L+7*J;this._months=+C+3*y+12*g;this._data={};this._locale=wa();this._bubble()}function cb(g){return g instanceof bb}function Ab(g){return 0>g?-1*Math.round(-1*g):Math.round(g)}function $b(g,n){D(g,0,0,function(){var y=this.utcOffset(),C="+";0>y&&(y=-y,C="-");return C+v(~~(y/60),2)+n+v(~~y%60,2)})}function Bb(g,n){g=(n||"").match(g);if(null===g)return null;g=((g[g.length-1]||[])+"").match(Mc)||["-",0,0];n=+(60*g[1])+U(g[2]);
return 0===n?0:"+"===g[0]?n:-n}function Cb(g,n){return n._isUTC?(n=n.clone(),g=(z(g)||c(g)?g.valueOf():ha(g).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+g),w.updateOffset(n,!1),n):ha(g).local()}function ac(){return this.isValid()?this._isUTC&&0===this._offset:!1}function ta(g,n){var y=g,C=null;cb(g)?y={ms:g._milliseconds,d:g._days,M:g._months}:a(g)||!isNaN(+g)?(y={},n?y[n]=+g:y.milliseconds=+g):(C=Nc.exec(g))?(y="-"===C[1]?-1:1,y={y:0,d:U(C[ua])*y,h:U(C[na])*y,m:U(C[sa])*y,s:U(C[ya])*y,ms:U(Ab(1E3*
C[Fa]))*y}):(C=Oc.exec(g))?(y="-"===C[1]?-1:1,y={y:Ga(C[2],y),M:Ga(C[3],y),w:Ga(C[4],y),d:Ga(C[5],y),h:Ga(C[6],y),m:Ga(C[7],y),s:Ga(C[8],y)}):null==y?y={}:"object"===typeof y&&("from"in y||"to"in y)&&(C=ha(y.from),y=ha(y.to),C.isValid()&&y.isValid()?(y=Cb(y,C),C.isBefore(y)?y=bc(C,y):(y=bc(y,C),y.milliseconds=-y.milliseconds,y.months=-y.months),C=y):C={milliseconds:0,months:0},y={},y.ms=C.milliseconds,y.M=C.months);y=new bb(y);cb(g)&&k(g,"_locale")&&(y._locale=g._locale);cb(g)&&k(g,"_isValid")&&(y._isValid=
g._isValid);return y}function Ga(g,n){g=g&&parseFloat(g.replace(",","."));return(isNaN(g)?0:g)*n}function bc(g,n){var y={};y.months=n.month()-g.month()+12*(n.year()-g.year());g.clone().add(y.months,"M").isAfter(n)&&--y.months;y.milliseconds=+n-+g.clone().add(y.months,"M");return y}function cc(g,n){return function(y,C){if(null!==C&&!isNaN(+C)){E(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");
var J=y;y=C;C=J}y=ta(y,C);dc(this,y,g);return this}}function dc(g,n,y,C){var J=n._milliseconds,L=Ab(n._days);n=Ab(n._months);g.isValid()&&(C=null==C?!0:C,n&&Lb(g,Z(g,"Month")+n*y),L&&qa(g,"Date",Z(g,"Date")+L*y),J&&g._d.setTime(g._d.valueOf()+J*y),C&&w.updateOffset(g,L||n))}function ec(g){return"string"===typeof g||g instanceof String}function Pc(g){var n=p(g),y=!1;n&&(y=0===g.filter(function(C){return!a(C)&&ec(g)}).length);return n&&y}function db(g,n){if(g.date()<n.date())return-db(n,g);var y=12*
(n.year()-g.year())+(n.month()-g.month()),C=g.clone().add(y,"months");0>n-C?(g=g.clone().add(y-1,"months"),n=(n-C)/(C-g)):(g=g.clone().add(y+1,"months"),n=(n-C)/(g-C));return-(y+n)||0}function fc(g){if(void 0===g)return this._locale._abbr;g=wa(g);null!=g&&(this._locale=g);return this}function gc(){return this._locale}function Ka(g,n){return(g%n+n)%n}function hc(g,n,y){return 100>g&&0<=g?new Date(g+400,n,y)-ic:(new Date(g,n,y)).valueOf()}function jc(g,n,y){return 100>g&&0<=g?Date.UTC(g+400,n,y)-ic:
Date.UTC(g,n,y)}function Db(g,n){return n.erasAbbrRegex(g)}function Eb(){var g=[],n=[],y=[],C=[],J,L=this.eras();var O=0;for(J=L.length;O<J;++O)n.push(ka(L[O].name)),g.push(ka(L[O].abbr)),y.push(ka(L[O].narrow)),C.push(ka(L[O].name)),C.push(ka(L[O].abbr)),C.push(ka(L[O].narrow));this._erasRegex=new RegExp("^("+C.join("|")+")","i");this._erasNameRegex=new RegExp("^("+n.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+g.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+y.join("|")+")",
"i")}function eb(g,n){D(0,[g,g.length],0,n)}function kc(g,n,y,C,J){if(null==g)return Sa(this,C,J).year;var L=va(g,C,J);n>L&&(n=L);g=Ob(g,n,y,C,J);g=Ra(g.year,0,g.dayOfYear);this.year(g.getUTCFullYear());this.month(g.getUTCMonth());this.date(g.getUTCDate());return this}function Qc(g,n){n[Fa]=U(1E3*("0."+g))}function lc(g){return g}function fb(g,n,y,C){var J=wa();n=h().set(C,n);return J[y](n,g)}function mc(g,n,y){a(g)&&(n=g,g=void 0);g=g||"";if(null!=n)return fb(g,n,y,"month");var C=[];for(n=0;12>n;n++)C[n]=
fb(g,n,y,"month");return C}function Fb(g,n,y,C){"boolean"!==typeof g&&(y=n=g,g=!1);a(n)&&(y=n,n=void 0);n=n||"";var J=wa();g=g?J._week.dow:0;J=[];if(null!=y)return fb(n,(y+g)%7,C,"day");for(y=0;7>y;y++)J[y]=fb(n,(y+g)%7,C,"day");return J}function nc(g,n,y,C){n=ta(n,y);g._milliseconds+=C*n._milliseconds;g._days+=C*n._days;g._months+=C*n._months;return g._bubble()}function oc(g){return 0>g?Math.floor(g):Math.ceil(g)}function za(g){return function(){return this.as(g)}}function Ha(g){return function(){return this.isValid()?
this._data[g]:NaN}}function Rc(g,n,y,C,J){return J.relativeTime(n||1,!!y,g,C)}function La(g){return(0<g)-(0>g)||+g}function gb(){if(!this.isValid())return this.localeData().invalidDate();var g=Gb(this._milliseconds)/1E3,n=Gb(this._days),y=Gb(this._months),C=this.asSeconds();if(!C)return"P0D";var J=Y(g/60);var L=Y(J/60);g%=60;J%=60;var O=Y(y/12);y%=12;var X=g?g.toFixed(3).replace(/\.?0+$/,""):"";var ea=0>C?"-":"";var aa=La(this._months)!==La(C)?"-":"";var ma=La(this._days)!==La(C)?"-":"";C=La(this._milliseconds)!==
La(C)?"-":"";return ea+"P"+(O?aa+O+"Y":"")+(y?aa+y+"M":"")+(n?ma+n+"D":"")+(L||J||g?"T":"")+(L?C+L+"H":"")+(J?C+J+"M":"")+(g?C+X+"S":"")}var yc=Array.prototype.some?Array.prototype.some:function(g){var n=Object(this),y=n.length>>>0,C;for(C=0;C<y;C++)if(C in n&&g.call(this,n[C],C,n))return!0;return!1};var mb=w.momentProperties=[],nb=!1,Kb={};w.suppressDeprecationWarnings=!1;w.deprecationHandler=null;var Sc=Object.keys?Object.keys:function(g){var n,y=[];for(n in g)k(g,n)&&y.push(n);return y};var ob=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Xa=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,pb={},Ia={},Oa={},oa={},pc=/\d/,ra=/\d\d/,qc=/\d{3}/,Hb=/\d{4}/,hb=/[+-]?\d{6}/,ia=/\d\d?/,rc=/\d\d\d\d?/,sc=/\d\d\d\d\d\d?/,ib=/\d{1,3}/,Ib=/\d{1,4}/,jb=/[+-]?\d{1,6}/,Ma=/\d+/,kb=/[+-]?\d+/,Tc=/Z|[+-]\d\d:?\d\d/gi,lb=/Z|[+-]\d\d(?::?\d\d)?/gi,Wa=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;
var qb={};var rb={},pa=0,xa=1,ua=2,na=3,sa=4,ya=5,Fa=6,Bc=7,Cc=8;var la=Array.prototype.indexOf?Array.prototype.indexOf:function(g){var n;for(n=0;n<this.length;++n)if(this[n]===g)return n;return-1};D("M",["MM",2],"Mo",function(){return this.month()+1});D("MMM",0,0,function(g){return this.localeData().monthsShort(this,g)});D("MMMM",0,0,function(g){return this.localeData().months(this,g)});T("month","M");oa.month=8;R("M",ia);R("MM",ia,ra);R("MMM",function(g,n){return n.monthsShortRegex(g)});R("MMMM",
function(g,n){return n.monthsRegex(g)});da(["M","MM"],function(g,n){n[xa]=U(g)-1});da(["MMM","MMMM"],function(g,n,y,C){C=y._locale.monthsParse(g,C,y._strict);null!=C?n[xa]=C:l(y).invalidMonth=g});var Vb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),tc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;D("Y",0,0,function(){var g=this.year();return 9999>=g?v(g,4):"+"+g});D(0,["YY",2],0,function(){return this.year()%100});D(0,["YYYY",4],0,"year");D(0,["YYYYY",5],0,"year");D(0,["YYYYYY",6,!0],0,"year");T("year",
"y");oa.year=1;R("Y",kb);R("YY",ia,ra);R("YYYY",Ib,Hb);R("YYYYY",jb,hb);R("YYYYYY",jb,hb);da(["YYYYY","YYYYYY"],pa);da("YYYY",function(g,n){n[pa]=2===g.length?w.parseTwoDigitYear(g):U(g)});da("YY",function(g,n){n[pa]=w.parseTwoDigitYear(g)});da("Y",function(g,n){n[pa]=parseInt(g,10)});w.parseTwoDigitYear=function(g){return U(g)+(68<U(g)?1900:2E3)};var uc=fa("FullYear",!0);D("w",["ww",2],"wo","week");D("W",["WW",2],"Wo","isoWeek");T("week","w");T("isoWeek","W");oa.week=5;oa.isoWeek=5;R("w",ia);R("ww",
ia,ra);R("W",ia);R("WW",ia,ra);Qa(["w","ww","W","WW"],function(g,n,y,C){n[C.substr(0,1)]=U(g)});D("d",0,"do","day");D("dd",0,0,function(g){return this.localeData().weekdaysMin(this,g)});D("ddd",0,0,function(g){return this.localeData().weekdaysShort(this,g)});D("dddd",0,0,function(g){return this.localeData().weekdays(this,g)});D("e",0,0,"weekday");D("E",0,0,"isoWeekday");T("day","d");T("weekday","e");T("isoWeekday","E");oa.day=11;oa.weekday=11;oa.isoWeekday=11;R("d",ia);R("e",ia);R("E",ia);R("dd",
function(g,n){return n.weekdaysMinRegex(g)});R("ddd",function(g,n){return n.weekdaysShortRegex(g)});R("dddd",function(g,n){return n.weekdaysRegex(g)});Qa(["dd","ddd","dddd"],function(g,n,y,C){C=y._locale.weekdaysParse(g,C,y._strict);null!=C?n.d=C:l(y).invalidWeekday=g});Qa(["d","e","E"],function(g,n,y,C){n[C]=U(g)});var Wb="Sun Mon Tue Wed Thu Fri Sat".split(" ");D("H",["HH",2],0,"hour");D("h",["hh",2],0,ub);D("k",["kk",2],0,function(){return this.hours()||24});D("hmm",0,0,function(){return""+ub.apply(this)+
v(this.minutes(),2)});D("hmmss",0,0,function(){return""+ub.apply(this)+v(this.minutes(),2)+v(this.seconds(),2)});D("Hmm",0,0,function(){return""+this.hours()+v(this.minutes(),2)});D("Hmmss",0,0,function(){return""+this.hours()+v(this.minutes(),2)+v(this.seconds(),2)});Pb("a",!0);Pb("A",!1);T("hour","h");oa.hour=13;R("a",Qb);R("A",Qb);R("H",ia);R("h",ia);R("k",ia);R("HH",ia,ra);R("hh",ia,ra);R("kk",ia,ra);R("hmm",rc);R("hmmss",sc);R("Hmm",rc);R("Hmmss",sc);da(["H","HH"],na);da(["k","kk"],function(g,
n,y){g=U(g);n[na]=24===g?0:g});da(["a","A"],function(g,n,y){y._isPm=y._locale.isPM(g);y._meridiem=g});da(["h","hh"],function(g,n,y){n[na]=U(g);l(y).bigHour=!0});da("hmm",function(g,n,y){var C=g.length-2;n[na]=U(g.substr(0,C));n[sa]=U(g.substr(C));l(y).bigHour=!0});da("hmmss",function(g,n,y){var C=g.length-4,J=g.length-2;n[na]=U(g.substr(0,C));n[sa]=U(g.substr(C,2));n[ya]=U(g.substr(J));l(y).bigHour=!0});da("Hmm",function(g,n,y){y=g.length-2;n[na]=U(g.substr(0,y));n[sa]=U(g.substr(y))});da("Hmmss",
function(g,n,y){y=g.length-4;var C=g.length-2;n[na]=U(g.substr(0,y));n[sa]=U(g.substr(y,2));n[ya]=U(g.substr(C))});var Uc=fa("Hours",!0),Sb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Vb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Wb,
meridiemParse:/[ap]\.?m?\.?/i},ja={},Ua={},Ta,Dc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ec=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fc=/Z|[+-]\d\d(?::?\d\d)?/,ab=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,
!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jc=
/^\/?Date\((-?\d+)/i,Gc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Hc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};w.createFromInputFallback=B("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(g){g._d=new Date(g._i+(g._useUTC?" UTC":""))});w.ISO_8601=function(){};w.RFC_2822=function(){};var Vc=B("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=ha.apply(null,arguments);return this.isValid()&&g.isValid()?g<this?this:g:t()}),Wc=B("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var g=ha.apply(null,arguments);return this.isValid()&&g.isValid()?g>this?
this:g:t()}),Va="year quarter month week day hour minute second millisecond".split(" ");$b("Z",":");$b("ZZ","");R("Z",lb);R("ZZ",lb);da(["Z","ZZ"],function(g,n,y){y._useUTC=!0;y._tzm=Bb(lb,g)});var Mc=/([\+\-]|\d\d)/gi;w.updateOffset=function(){};var Nc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Oc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ta.fn=bb.prototype;ta.invalid=
function(){return ta(NaN)};var Xc=cc(1,"add"),Yc=cc(-1,"subtract");w.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";w.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var vc=B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(g){return void 0===g?this.localeData():this.locale(g)}),ic=126227808E5;D("N",0,0,"eraAbbr");D("NN",0,0,"eraAbbr");D("NNN",0,0,"eraAbbr");D("NNNN",0,0,"eraName");D("NNNNN",0,0,"eraNarrow");
D("y",["y",1],"yo","eraYear");D("y",["yy",2],0,"eraYear");D("y",["yyy",3],0,"eraYear");D("y",["yyyy",4],0,"eraYear");R("N",Db);R("NN",Db);R("NNN",Db);R("NNNN",function(g,n){return n.erasNameRegex(g)});R("NNNNN",function(g,n){return n.erasNarrowRegex(g)});da(["N","NN","NNN","NNNN","NNNNN"],function(g,n,y,C){(n=y._locale.erasParse(g,C,y._strict))?l(y).era=n:l(y).invalidEra=g});R("y",Ma);R("yy",Ma);R("yyy",Ma);R("yyyy",Ma);R("yo",function(g,n){return n._eraYearOrdinalRegex||Ma});da(["y","yy","yyy","yyyy"],
pa);da(["yo"],function(g,n,y,C){var J;y._locale._eraYearOrdinalRegex&&(J=g.match(y._locale._eraYearOrdinalRegex));n[pa]=y._locale.eraYearOrdinalParse?y._locale.eraYearOrdinalParse(g,J):parseInt(g,10)});D(0,["gg",2],0,function(){return this.weekYear()%100});D(0,["GG",2],0,function(){return this.isoWeekYear()%100});eb("gggg","weekYear");eb("ggggg","weekYear");eb("GGGG","isoWeekYear");eb("GGGGG","isoWeekYear");T("weekYear","gg");T("isoWeekYear","GG");oa.weekYear=1;oa.isoWeekYear=1;R("G",kb);R("g",kb);
R("GG",ia,ra);R("gg",ia,ra);R("GGGG",Ib,Hb);R("gggg",Ib,Hb);R("GGGGG",jb,hb);R("ggggg",jb,hb);Qa(["gggg","ggggg","GGGG","GGGGG"],function(g,n,y,C){n[C.substr(0,2)]=U(g)});Qa(["gg","GG"],function(g,n,y,C){n[C]=w.parseTwoDigitYear(g)});D("Q",0,"Qo","quarter");T("quarter","Q");oa.quarter=7;R("Q",pc);da("Q",function(g,n){n[xa]=3*(U(g)-1)});D("D",["DD",2],"Do","date");T("date","D");oa.date=9;R("D",ia);R("DD",ia,ra);R("Do",function(g,n){return g?n._dayOfMonthOrdinalParse||n._ordinalParse:n._dayOfMonthOrdinalParseLenient});
da(["D","DD"],ua);da("Do",function(g,n){n[ua]=U(g.match(ia)[0])});var wc=fa("Date",!0);D("DDD",["DDDD",3],"DDDo","dayOfYear");T("dayOfYear","DDD");oa.dayOfYear=4;R("DDD",ib);R("DDDD",qc);da(["DDD","DDDD"],function(g,n,y){y._dayOfYear=U(g)});D("m",["mm",2],0,"minute");T("minute","m");oa.minute=14;R("m",ia);R("mm",ia,ra);da(["m","mm"],sa);var Zc=fa("Minutes",!1);D("s",["ss",2],0,"second");T("second","s");oa.second=15;R("s",ia);R("ss",ia,ra);da(["s","ss"],ya);var $c=fa("Seconds",!1);D("S",0,0,function(){return~~(this.millisecond()/
100)});D(0,["SS",2],0,function(){return~~(this.millisecond()/10)});D(0,["SSS",3],0,"millisecond");D(0,["SSSS",4],0,function(){return 10*this.millisecond()});D(0,["SSSSS",5],0,function(){return 100*this.millisecond()});D(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});D(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});D(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});D(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});T("millisecond","ms");oa.millisecond=
16;R("S",ib,pc);R("SS",ib,ra);R("SSS",ib,qc);var Da;for(Da="SSSS";9>=Da.length;Da+="S")R(Da,Ma);for(Da="S";9>=Da.length;Da+="S")da(Da,Qc);var ad=fa("Milliseconds",!1);D("z",0,0,"zoneAbbr");D("zz",0,0,"zoneName");var P=u.prototype;P.add=Xc;P.calendar=function(g,n){if(1===arguments.length)if(arguments[0]){var y=arguments[0],C;if(!(C=z(y)||c(y)||ec(y)||a(y)||Pc(y))){C=m(y)&&!e(y);var J=!1,L="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),
O;for(O=0;O<L.length;O+=1){var X=L[O];J=J||k(y,X)}C=C&&J}if(C||null===y||void 0===y)g=arguments[0],n=void 0;else{y=arguments[0];C=m(y)&&!e(y);J=!1;L="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(O=0;O<L.length;O+=1)X=L[O],J=J||k(y,X);C&&J&&(n=arguments[0],g=void 0)}}else n=g=void 0;y=g||ha();C=Cb(y,this).startOf("day");C=w.calendarFormat(this,C)||"sameElse";J=n&&(F(n[C])?n[C].call(this,y):n[C]);return this.format(J||this.localeData().calendar(C,this,ha(y)))};P.clone=function(){return new u(this)};
P.diff=function(g,n,y){if(!this.isValid())return NaN;g=Cb(g,this);if(!g.isValid())return NaN;var C=6E4*(g.utcOffset()-this.utcOffset());n=M(n);switch(n){case "year":n=db(this,g)/12;break;case "month":n=db(this,g);break;case "quarter":n=db(this,g)/3;break;case "second":n=(this-g)/1E3;break;case "minute":n=(this-g)/6E4;break;case "hour":n=(this-g)/36E5;break;case "day":n=(this-g-C)/864E5;break;case "week":n=(this-g-C)/6048E5;break;default:n=this-g}return y?n:Y(n)};P.endOf=function(g){g=M(g);if(void 0===
g||"millisecond"===g||!this.isValid())return this;var n=this._isUTC?jc:hc;switch(g){case "year":var y=n(this.year()+1,0,1)-1;break;case "quarter":y=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":y=n(this.year(),this.month()+1,1)-1;break;case "week":y=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":y=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":y=n(this.year(),this.month(),this.date()+1)-1;break;
case "hour":y=this._d.valueOf();y+=36E5-Ka(y+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":y=this._d.valueOf();y+=6E4-Ka(y,6E4)-1;break;case "second":y=this._d.valueOf(),y+=1E3-Ka(y,1E3)-1}this._d.setTime(y);w.updateOffset(this,!0);return this};P.format=function(g){g||(g=this.isUtc()?w.defaultFormatUtc:w.defaultFormat);g=S(this,g);return this.localeData().postformat(g)};P.from=function(g,n){return this.isValid()&&(z(g)&&g.isValid()||ha(g).isValid())?ta({to:this,from:g}).locale(this.locale()).humanize(!n):
this.localeData().invalidDate()};P.fromNow=function(g){return this.from(ha(),g)};P.to=function(g,n){return this.isValid()&&(z(g)&&g.isValid()||ha(g).isValid())?ta({from:this,to:g}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()};P.toNow=function(g){return this.to(ha(),g)};P.get=function(g){g=M(g);return F(this[g])?this[g]():this};P.invalidAt=function(){return l(this).overflow};P.isAfter=function(g,n){g=z(g)?g:ha(g);if(!this.isValid()||!g.isValid())return!1;n=M(n)||"millisecond";
return"millisecond"===n?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(n).valueOf()};P.isBefore=function(g,n){g=z(g)?g:ha(g);if(!this.isValid()||!g.isValid())return!1;n=M(n)||"millisecond";return"millisecond"===n?this.valueOf()<g.valueOf():this.clone().endOf(n).valueOf()<g.valueOf()};P.isBetween=function(g,n,y,C){g=z(g)?g:ha(g);n=z(n)?n:ha(n);if(!(this.isValid()&&g.isValid()&&n.isValid()))return!1;C=C||"()";return("("===C[0]?this.isAfter(g,y):!this.isBefore(g,y))&&(")"===C[1]?this.isBefore(n,
y):!this.isAfter(n,y))};P.isSame=function(g,n){g=z(g)?g:ha(g);if(!this.isValid()||!g.isValid())return!1;n=M(n)||"millisecond";if("millisecond"===n)return this.valueOf()===g.valueOf();g=g.valueOf();return this.clone().startOf(n).valueOf()<=g&&g<=this.clone().endOf(n).valueOf()};P.isSameOrAfter=function(g,n){return this.isSame(g,n)||this.isAfter(g,n)};P.isSameOrBefore=function(g,n){return this.isSame(g,n)||this.isBefore(g,n)};P.isValid=function(){return q(this)};P.lang=vc;P.locale=fc;P.localeData=gc;
P.max=Wc;P.min=Vc;P.parsingFlags=function(){return f({},l(this))};P.set=function(g,n){if("object"===typeof g){g=V(g);n=W(g);var y;for(y=0;y<n.length;y++)this[n[y].unit](g[n[y].unit])}else if(g=M(g),F(this[g]))return this[g](n);return this};P.startOf=function(g){g=M(g);if(void 0===g||"millisecond"===g||!this.isValid())return this;var n=this._isUTC?jc:hc;switch(g){case "year":var y=n(this.year(),0,1);break;case "quarter":y=n(this.year(),this.month()-this.month()%3,1);break;case "month":y=n(this.year(),
this.month(),1);break;case "week":y=n(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":y=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":y=n(this.year(),this.month(),this.date());break;case "hour":y=this._d.valueOf();y-=Ka(y+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":y=this._d.valueOf();y-=Ka(y,6E4);break;case "second":y=this._d.valueOf(),y-=Ka(y,1E3)}this._d.setTime(y);w.updateOffset(this,!0);return this};P.subtract=
Yc;P.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};P.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};P.toDate=function(){return new Date(this.valueOf())};P.toISOString=function(g){if(!this.isValid())return null;var n=(g=!0!==g)?this.clone().utc():this;return 0>n.year()||9999<n.year()?S(n,
g?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):F(Date.prototype.toISOString)?g?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",S(n,"Z")):S(n,g?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};P.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var g="moment",n="";this.isLocal()||(g=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z");g="["+g+'("]';var y=0<=this.year()&&9999>=
this.year()?"YYYY":"YYYYYY";return this.format(g+y+"-MM-DD[T]HH:mm:ss.SSS"+(n+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(P[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});P.toJSON=function(){return this.isValid()?this.toISOString():null};P.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};P.unix=function(){return Math.floor(this.valueOf()/1E3)};P.valueOf=function(){return this._d.valueOf()-
6E4*(this._offset||0)};P.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};P.eraName=function(){var g,n=this.localeData().eras();var y=0;for(g=n.length;y<g;++y){var C=this.clone().startOf("day").valueOf();if(n[y].since<=C&&C<=n[y].until||n[y].until<=C&&C<=n[y].since)return n[y].name}return""};P.eraNarrow=function(){var g,n=this.localeData().eras();var y=0;for(g=n.length;y<g;++y){var C=this.clone().startOf("day").valueOf();if(n[y].since<=
C&&C<=n[y].until||n[y].until<=C&&C<=n[y].since)return n[y].narrow}return""};P.eraAbbr=function(){var g,n=this.localeData().eras();var y=0;for(g=n.length;y<g;++y){var C=this.clone().startOf("day").valueOf();if(n[y].since<=C&&C<=n[y].until||n[y].until<=C&&C<=n[y].since)return n[y].abbr}return""};P.eraYear=function(){var g,n=this.localeData().eras();var y=0;for(g=n.length;y<g;++y){var C=n[y].since<=n[y].until?1:-1;var J=this.clone().startOf("day").valueOf();if(n[y].since<=J&&J<=n[y].until||n[y].until<=
J&&J<=n[y].since)return(this.year()-w(n[y].since).year())*C+n[y].offset}return this.year()};P.year=uc;P.isLeapYear=function(){return Q(this.year())};P.weekYear=function(g){return kc.call(this,g,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};P.isoWeekYear=function(g){return kc.call(this,g,this.isoWeek(),this.isoWeekday(),1,4)};P.quarter=P.quarters=function(g){return null==g?Math.ceil((this.month()+1)/3):this.month(3*(g-1)+this.month()%3)};P.month=Mb;P.daysInMonth=
function(){return Ya(this.year(),this.month())};P.week=P.weeks=function(g){var n=this.localeData().week(this);return null==g?n:this.add(7*(g-n),"d")};P.isoWeek=P.isoWeeks=function(g){var n=Sa(this,1,4).week;return null==g?n:this.add(7*(g-n),"d")};P.weeksInYear=function(){var g=this.localeData()._week;return va(this.year(),g.dow,g.doy)};P.weeksInWeekYear=function(){var g=this.localeData()._week;return va(this.weekYear(),g.dow,g.doy)};P.isoWeeksInYear=function(){return va(this.year(),1,4)};P.isoWeeksInISOWeekYear=
function(){return va(this.isoWeekYear(),1,4)};P.date=wc;P.day=P.days=function(g){if(!this.isValid())return null!=g?this:NaN;var n=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=g){var y=this.localeData();"string"===typeof g&&(isNaN(g)?(g=y.weekdaysParse(g),g="number"===typeof g?g:null):g=parseInt(g,10));return this.add(g-n,"d")}return n};P.weekday=function(g){if(!this.isValid())return null!=g?this:NaN;var n=(this.day()+7-this.localeData()._week.dow)%7;return null==g?n:this.add(g-n,"d")};
P.isoWeekday=function(g){if(!this.isValid())return null!=g?this:NaN;if(null!=g){var n=this.localeData();g="string"===typeof g?n.weekdaysParse(g)%7||7:isNaN(g)?null:g;return this.day(this.day()%7?g:g-7)}return this.day()||7};P.dayOfYear=function(g){var n=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==g?n:this.add(g-n,"d")};P.hour=P.hours=Uc;P.minute=P.minutes=Zc;P.second=P.seconds=$c;P.millisecond=P.milliseconds=ad;P.utcOffset=function(g,n,y){var C=this._offset||
0,J;if(!this.isValid())return null!=g?this:NaN;if(null!=g){if("string"===typeof g){if(g=Bb(lb,g),null===g)return this}else 16>Math.abs(g)&&!y&&(g*=60);!this._isUTC&&n&&(J=-Math.round(this._d.getTimezoneOffset()));this._offset=g;this._isUTC=!0;null!=J&&this.add(J,"m");C!==g&&(!n||this._changeInProgress?dc(this,ta(g-C,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,w.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?C:-Math.round(this._d.getTimezoneOffset())};
P.utc=function(g){return this.utcOffset(0,g)};P.local=function(g){this._isUTC&&(this.utcOffset(0,g),this._isUTC=!1,g&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};P.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var g=Bb(Tc,this._i);null!=g?this.utcOffset(g):this.utcOffset(0,!0)}return this};P.hasAlignedHourOffset=function(g){if(!this.isValid())return!1;g=g?ha(g).utcOffset():0;return 0===(this.utcOffset()-g)%
60};P.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};P.isLocal=function(){return this.isValid()?!this._isUTC:!1};P.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};P.isUtc=ac;P.isUTC=ac;P.zoneAbbr=function(){return this._isUTC?"UTC":""};P.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};P.dates=B("dates accessor is deprecated. Use date instead.",wc);P.months=B("months accessor is deprecated. Use month instead",
Mb);P.years=B("years accessor is deprecated. Use year instead",uc);P.zone=B("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(g,n){return null!=g?("string"!==typeof g&&(g=-g),this.utcOffset(g,n),this):-this.utcOffset()});P.isDSTShifted=B("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!b(this._isDSTShifted))return this._isDSTShifted;var g={};r(g,this);g=Xb(g);if(g._a){var n=
g._isUTC?h(g._a):ha(g._a);var y;if(y=this.isValid()){g=g._a;n=n.toArray();y=Math.min(g.length,n.length);var C=Math.abs(g.length-n.length),J=0,L;for(L=0;L<y;L++)U(g[L])!==U(n[L])&&J++;y=0<J+C}this._isDSTShifted=y}else this._isDSTShifted=!1;return this._isDSTShifted});var ca=H.prototype;ca.calendar=function(g,n,y){g=this._calendar[g]||this._calendar.sameElse;return F(g)?g.call(n,y):g};ca.longDateFormat=function(g){var n=this._longDateFormat[g],y=this._longDateFormat[g.toUpperCase()];if(n||!y)return n;
this._longDateFormat[g]=y.match(ob).map(function(C){return"MMMM"===C||"MM"===C||"DD"===C||"dddd"===C?C.slice(1):C}).join("");return this._longDateFormat[g]};ca.invalidDate=function(){return this._invalidDate};ca.ordinal=function(g){return this._ordinal.replace("%d",g)};ca.preparse=lc;ca.postformat=lc;ca.relativeTime=function(g,n,y,C){var J=this._relativeTime[y];return F(J)?J(g,n,y,C):J.replace(/%d/i,g)};ca.pastFuture=function(g,n){g=this._relativeTime[0<g?"future":"past"];return F(g)?g(n):g.replace(/%s/i,
n)};ca.set=function(g){var n;for(n in g)if(k(g,n)){var y=g[n];F(y)?this[n]=y:this["_"+n]=y}this._config=g;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ca.eras=function(g,n){var y=this._eras||wa("en")._eras;g=0;for(n=y.length;g<n;++g){switch(typeof y[g].since){case "string":var C=w(y[g].since).startOf("day");y[g].since=C.valueOf()}switch(typeof y[g].until){case "undefined":y[g].until=Infinity;break;case "string":C=
w(y[g].until).startOf("day").valueOf(),y[g].until=C.valueOf()}}return y};ca.erasParse=function(g,n,y){var C,J=this.eras();g=g.toUpperCase();var L=0;for(C=J.length;L<C;++L){var O=J[L].name.toUpperCase();var X=J[L].abbr.toUpperCase();var ea=J[L].narrow.toUpperCase();if(y)switch(n){case "N":case "NN":case "NNN":if(X===g)return J[L];break;case "NNNN":if(O===g)return J[L];break;case "NNNNN":if(ea===g)return J[L]}else if(0<=[O,X,ea].indexOf(g))return J[L]}};ca.erasConvertYear=function(g,n){var y=g.since<=
g.until?1:-1;return void 0===n?w(g.since).year():w(g.since).year()+(n-g.offset)*y};ca.erasAbbrRegex=function(g){k(this,"_erasAbbrRegex")||Eb.call(this);return g?this._erasAbbrRegex:this._erasRegex};ca.erasNameRegex=function(g){k(this,"_erasNameRegex")||Eb.call(this);return g?this._erasNameRegex:this._erasRegex};ca.erasNarrowRegex=function(g){k(this,"_erasNarrowRegex")||Eb.call(this);return g?this._erasNarrowRegex:this._erasRegex};ca.months=function(g,n){return g?p(this._months)?this._months[g.month()]:
this._months[(this._months.isFormat||tc).test(n)?"format":"standalone"][g.month()]:p(this._months)?this._months:this._months.standalone};ca.monthsShort=function(g,n){return g?p(this._monthsShort)?this._monthsShort[g.month()]:this._monthsShort[tc.test(n)?"format":"standalone"][g.month()]:p(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ca.monthsParse=function(g,n,y){var C;if(this._monthsParseExact){a:{g=g.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=
[],this._shortMonthsParse=[],C=0;12>C;++C){var J=h([2E3,C]);this._shortMonthsParse[C]=this.monthsShort(J,"").toLocaleLowerCase();this._longMonthsParse[C]=this.months(J,"").toLocaleLowerCase()}if(y)n="MMM"===n?la.call(this._shortMonthsParse,g):la.call(this._longMonthsParse,g);else if("MMM"===n){n=la.call(this._shortMonthsParse,g);if(-1!==n)break a;n=la.call(this._longMonthsParse,g)}else{n=la.call(this._longMonthsParse,g);if(-1!==n)break a;n=la.call(this._shortMonthsParse,g)}n=-1!==n?n:null}return n}this._monthsParse||
(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(C=0;12>C;C++)if(J=h([2E3,C]),y&&!this._longMonthsParse[C]&&(this._longMonthsParse[C]=new RegExp("^"+this.months(J,"").replace(".","")+"$","i"),this._shortMonthsParse[C]=new RegExp("^"+this.monthsShort(J,"").replace(".","")+"$","i")),y||this._monthsParse[C]||(J="^"+this.months(J,"")+"|^"+this.monthsShort(J,""),this._monthsParse[C]=new RegExp(J.replace(".",""),"i")),y&&"MMMM"===n&&this._longMonthsParse[C].test(g)||y&&"MMM"===
n&&this._shortMonthsParse[C].test(g)||!y&&this._monthsParse[C].test(g))return C};ca.monthsRegex=function(g){if(this._monthsParseExact)return k(this,"_monthsRegex")||Nb.call(this),g?this._monthsStrictRegex:this._monthsRegex;k(this,"_monthsRegex")||(this._monthsRegex=Wa);return this._monthsStrictRegex&&g?this._monthsStrictRegex:this._monthsRegex};ca.monthsShortRegex=function(g){if(this._monthsParseExact)return k(this,"_monthsRegex")||Nb.call(this),g?this._monthsShortStrictRegex:this._monthsShortRegex;
k(this,"_monthsShortRegex")||(this._monthsShortRegex=Wa);return this._monthsShortStrictRegex&&g?this._monthsShortStrictRegex:this._monthsShortRegex};ca.week=function(g){return Sa(g,this._week.dow,this._week.doy).week};ca.firstDayOfYear=function(){return this._week.doy};ca.firstDayOfWeek=function(){return this._week.dow};ca.weekdays=function(g,n){n=p(this._weekdays)?this._weekdays:this._weekdays[g&&!0!==g&&this._weekdays.isFormat.test(n)?"format":"standalone"];return!0===g?sb(n,this._week.dow):g?n[g.day()]:
n};ca.weekdaysMin=function(g){return!0===g?sb(this._weekdaysMin,this._week.dow):g?this._weekdaysMin[g.day()]:this._weekdaysMin};ca.weekdaysShort=function(g){return!0===g?sb(this._weekdaysShort,this._week.dow):g?this._weekdaysShort[g.day()]:this._weekdaysShort};ca.weekdaysParse=function(g,n,y){var C;if(this._weekdaysParseExact)return Ac.call(this,g,n,y);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(C=0;7>C;C++){var J=
h([2E3,1]).day(C);y&&!this._fullWeekdaysParse[C]&&(this._fullWeekdaysParse[C]=new RegExp("^"+this.weekdays(J,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[C]=new RegExp("^"+this.weekdaysShort(J,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[C]=new RegExp("^"+this.weekdaysMin(J,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[C]||(J="^"+this.weekdays(J,"")+"|^"+this.weekdaysShort(J,"")+"|^"+this.weekdaysMin(J,""),this._weekdaysParse[C]=new RegExp(J.replace(".",""),"i"));if(y&&
"dddd"===n&&this._fullWeekdaysParse[C].test(g)||y&&"ddd"===n&&this._shortWeekdaysParse[C].test(g)||y&&"dd"===n&&this._minWeekdaysParse[C].test(g)||!y&&this._weekdaysParse[C].test(g))return C}};ca.weekdaysRegex=function(g){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||tb.call(this),g?this._weekdaysStrictRegex:this._weekdaysRegex;k(this,"_weekdaysRegex")||(this._weekdaysRegex=Wa);return this._weekdaysStrictRegex&&g?this._weekdaysStrictRegex:this._weekdaysRegex};ca.weekdaysShortRegex=
function(g){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||tb.call(this),g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;k(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Wa);return this._weekdaysShortStrictRegex&&g?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ca.weekdaysMinRegex=function(g){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||tb.call(this),g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;k(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=
Wa);return this._weekdaysMinStrictRegex&&g?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ca.isPM=function(g){return"p"===(g+"").toLowerCase().charAt(0)};ca.meridiem=function(g,n,y){return 11<g?y?"pm":"PM":y?"am":"AM"};Ca("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(g){var n=g%10;n=1===U(g%
100/10)?"th":1===n?"st":2===n?"nd":3===n?"rd":"th";return g+n}});w.lang=B("moment.lang is deprecated. Use moment.locale instead.",Ca);w.langData=B("moment.langData is deprecated. Use moment.localeData instead.",wa);var Aa=Math.abs,bd=za("ms"),cd=za("s"),dd=za("m"),ed=za("h"),fd=za("d"),gd=za("w"),hd=za("M"),id=za("Q"),jd=za("y"),kd=Ha("milliseconds"),ld=Ha("seconds"),md=Ha("minutes"),nd=Ha("hours"),od=Ha("days"),pd=Ha("months"),qd=Ha("years"),Ba=Math.round,Na={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},
Gb=Math.abs,ba=bb.prototype;ba.isValid=function(){return this._isValid};ba.abs=function(){var g=this._data;this._milliseconds=Aa(this._milliseconds);this._days=Aa(this._days);this._months=Aa(this._months);g.milliseconds=Aa(g.milliseconds);g.seconds=Aa(g.seconds);g.minutes=Aa(g.minutes);g.hours=Aa(g.hours);g.months=Aa(g.months);g.years=Aa(g.years);return this};ba.add=function(g,n){return nc(this,g,n,1)};ba.subtract=function(g,n){return nc(this,g,n,-1)};ba.as=function(g){if(!this.isValid())return NaN;
var n=this._milliseconds;g=M(g);if("month"===g||"quarter"===g||"year"===g){var y=this._days+n/864E5;y=this._months+4800*y/146097;switch(g){case "month":return y;case "quarter":return y/3;case "year":return y/12}}else switch(y=this._days+Math.round(146097*this._months/4800),g){case "week":return y/7+n/6048E5;case "day":return y+n/864E5;case "hour":return 24*y+n/36E5;case "minute":return 1440*y+n/6E4;case "second":return 86400*y+n/1E3;case "millisecond":return Math.floor(864E5*y)+n;default:throw Error("Unknown unit "+
g);}};ba.asMilliseconds=bd;ba.asSeconds=cd;ba.asMinutes=dd;ba.asHours=ed;ba.asDays=fd;ba.asWeeks=gd;ba.asMonths=hd;ba.asQuarters=id;ba.asYears=jd;ba.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*U(this._months/12):NaN};ba._bubble=function(){var g=this._milliseconds,n=this._days,y=this._months,C=this._data;0<=g&&0<=n&&0<=y||0>=g&&0>=n&&0>=y||(g+=864E5*oc(146097*y/4800+n),y=n=0);C.milliseconds=g%1E3;g=Y(g/1E3);C.seconds=g%60;g=Y(g/60);C.minutes=
g%60;g=Y(g/60);C.hours=g%24;n+=Y(g/24);g=Y(4800*n/146097);y+=g;n-=oc(146097*g/4800);g=Y(y/12);C.days=n;C.months=y%12;C.years=g;return this};ba.clone=function(){return ta(this)};ba.get=function(g){g=M(g);return this.isValid()?this[g+"s"]():NaN};ba.milliseconds=kd;ba.seconds=ld;ba.minutes=md;ba.hours=nd;ba.days=od;ba.weeks=function(){return Y(this.days()/7)};ba.months=pd;ba.years=qd;ba.humanize=function(g,n){if(!this.isValid())return this.localeData().invalidDate();var y=!1,C=Na;"object"===typeof g&&
(n=g,g=!1);"boolean"===typeof g&&(y=g);"object"===typeof n&&(C=Object.assign({},Na,n),null!=n.s&&null==n.ss&&(C.ss=n.s-1));g=this.localeData();n=!y;var J=ta(this).abs(),L=Ba(J.as("s")),O=Ba(J.as("m")),X=Ba(J.as("h")),ea=Ba(J.as("d")),aa=Ba(J.as("M")),ma=Ba(J.as("w"));J=Ba(J.as("y"));L=L<=C.ss&&["s",L]||L<C.s&&["ss",L]||1>=O&&["m"]||O<C.m&&["mm",O]||1>=X&&["h"]||X<C.h&&["hh",X]||1>=ea&&["d"]||ea<C.d&&["dd",ea];null!=C.w&&(L=L||1>=ma&&["w"]||ma<C.w&&["ww",ma]);L=L||1>=aa&&["M"]||aa<C.M&&["MM",aa]||
1>=J&&["y"]||["yy",J];L[2]=n;L[3]=0<+this;L[4]=g;n=Rc.apply(null,L);y&&(n=g.pastFuture(+this,n));return g.postformat(n)};ba.toISOString=gb;ba.toString=gb;ba.toJSON=gb;ba.locale=fc;ba.localeData=gc;ba.toIsoString=B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",gb);ba.lang=vc;D("X",0,0,"unix");D("x",0,0,"valueOf");R("x",kb);R("X",/[+-]?\d+(\.\d{1,3})?/);da("X",function(g,n,y){y._d=new Date(1E3*parseFloat(g))});da("x",function(g,n,y){y._d=new Date(U(g))});w.version=
"2.29.1";var xc=ha;w.fn=P;w.min=function(){var g=[].slice.call(arguments,0);return Yb("isBefore",g)};w.max=function(){var g=[].slice.call(arguments,0);return Yb("isAfter",g)};w.now=function(){return Date.now?Date.now():+new Date};w.utc=h;w.unix=function(g){return ha(1E3*g)};w.months=function(g,n){return mc(g,n,"months")};w.isDate=c;w.locale=Ca;w.invalid=t;w.duration=ta;w.isMoment=z;w.weekdays=function(g,n,y){return Fb(g,n,y,"weekdays")};w.parseZone=function(){return ha.apply(null,arguments).parseZone()};
w.localeData=wa;w.isDuration=cb;w.monthsShort=function(g,n){return mc(g,n,"monthsShort")};w.weekdaysMin=function(g,n,y){return Fb(g,n,y,"weekdaysMin")};w.defineLocale=vb;w.updateLocale=function(g,n){if(null!=n){var y=Sb;if(null!=ja[g]&&null!=ja[g].parentLocale)ja[g].set(G(ja[g]._config,n));else{var C=$a(g);null!=C&&(y=C._config);n=G(y,n);null==C&&(n.abbr=g);n=new H(n);n.parentLocale=ja[g];ja[g]=n}Ca(g)}else null!=ja[g]&&(null!=ja[g].parentLocale?(ja[g]=ja[g].parentLocale,g===Ca()&&Ca(g)):null!=ja[g]&&
delete ja[g]);return ja[g]};w.locales=function(){return Sc(ja)};w.weekdaysShort=function(g,n,y){return Fb(g,n,y,"weekdaysShort")};w.normalizeUnits=M;w.relativeTimeRounding=function(g){return void 0===g?Ba:"function"===typeof g?(Ba=g,!0):!1};w.relativeTimeThreshold=function(g,n){if(void 0===Na[g])return!1;if(void 0===n)return Na[g];Na[g]=n;"s"===g&&(Na.ss=n-1);return!0};w.calendarFormat=function(g,n){g=g.diff(n,"days",!0);return-6>g?"sameElse":-1>g?"lastWeek":0>g?"lastDay":1>g?"sameDay":2>g?"nextDay":
7>g?"nextWeek":"sameElse"};w.prototype=P;w.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return w})},"esri/dijit/geoenrichment/ReportPlayer/countryConfig":function(){define(["./dataProvider/supportClasses/stdGeographies/StdGeographiesModel"],function(w){function p(){if(!k||!k.hierarchies)return"census";
var d=k.hierarchies[0].ID;if(1==k.hierarchies.length)return d;if(k.defaultDatasetID)for(var f in k.hierarchies){var h=k.hierarchies[f];if(h.datasets&&h.datasets.some(function(l){return l==k.defaultDatasetID})){d=h.ID;break}}return d}var m={},k;m.getCurrentCountry=function(){return k};m.getCountryID=function(){return k&&k.id};m.getCurrencySymbol=function(){return k&&k.currencySymbol||"$"};m.getCurrencyFormat=function(){if(k&&k.currencyFormat)return k.currencyFormat;var d=m.getCurrencySymbol();return d+
"0;-"+d+"0"};m.setCountry=function(d){k=d};var e,b;m.getSingleUnits=function(){return e};m.getPluralUnits=function(){return b};m.setSingleAndPluralUnits=function(d,f){e=d;b=f};var a;m.getHierarchyID=function(){return a};m.setHierarchyID=function(d){a=d||p()};var c;m.getGeographiesModel=function(){return c};m.setGeographiesModel=function(d){c=d};m.reset=function(){c=b=e=a=k=null};m.toJson=function(){return{country:{id:m.getCountryID(),currencySymbol:m.getCurrencySymbol(),currencyFormat:m.getCurrencyFormat()},
hierarchy:a,geographiesModel:c&&c.toJson()}};m.fromJson=function(d){d&&(k=d.country,a=d.hierarchy,c=d.geographiesModel&&new w(d.geographiesModel))};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil":function(){define(["dojo/_base/lang","../templateJsonUtils/fieldInfo/FieldInfoBuilder","../templateJsonUtils/fieldInfo/FieldLibrary","../../grid/coreUtils/GridDataUtil","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],function(w,p,m,k,e){var b=
{createTable:function(a){var c=a.numColumns,d=a.numRows,f=a.width,h=a.widths,l=a.style,q=a.attributes&&a.attributes.fixedColumns,t=a.attributes&&a.attributes.dynamicColumns;if(f)if(h)h=h.map(function(G){return f*Number(G.replace("%",""))/100});else{var r=f/c;h=[];for(var u=0;u<c;u++)h.push(r)}if(h)f||isNaN(Number(h[0]))||(f=0,h.forEach(function(G){f+=G}));else for(r=Number(100/c).toFixed(3)+"%",h=[],u=0;u<c;u++)h.push(r);r=[];for(u=0;u<c;u++)r.push({field:"field"+u,style:{width:h[u]}});h=[];for(var z=
!0,A=a.height?a.height/d:a.rowHeight||15.07,B=0;B<d;B++){var E={style:{height:A,fields:{}},fieldInfos:{}};for(u=0;u<c;u++){var F="field"+u;!1!==a.useDefaultTheme&&(E.style.fields[F]=w.mixin({horizontalAlign:0===u?"left":"right",overrideStyle:0===B?1<d?!1!==a.useDefaultHeaderTheme?"TableHeader":"Default":void 0:z?"AlternatingRow":"Default"},a.cellParams));t&&u>=q&&0===B&&(E.fieldInfos[F]=p.createFieldInfoFromSpecialFieldName("AREA_DESC"));a.processTableCell&&a.processTableCell(E,F,B,u,a)}h.push(E);
z=!z}return{id:"table",attributes:w.mixin({},a.attributes),style:w.mixin({width:f||772.33},l),columns:r,rows:h}},createSingleCellTable:function(a){a=a||{};var c=b.createTable({numColumns:1,numRows:1,attributes:a.attributes,useDefaultTheme:!1});b.modifyTableJson(c,0,0,a);return c},modifyTableJson:function(a,c,d,f){c=a.rows[c];d=a.columns[d];var h=d.field;f.text&&(c[h]=f.text);f.fieldInfo&&(c.fieldInfos[h]=f.fieldInfo);f.cellStyle&&(c.style.fields[h]=f.cellStyle);f.columnSpan&&(c.columnSpans=c.columnSpans||
{},c.columnSpans[h]=f.columnSpan);f.rowSpan&&(c.rowSpans=c.rowSpans||{},c.rowSpans[h]=f.rowSpan);c.themeStyle=f.themeStyle;f.width&&(a.style.width=f.width,d.style.width=f.width);f.height&&(c.style.height=f.height);void 0!==f.left&&(a.style.left=f.left);void 0!==f.top&&(a.style.top=f.top)},getTableWidth:function(a){return a.style.width},getTableHeight:function(a){var c=0;a.rows.forEach(function(d){c+=d.style?d.style.height:0});return c},calcTableBox:function(a){return{x:a.style.left||0,y:a.style.top||
0,w:b.getTableWidth(a),h:b.getTableHeight(a)}},createDetailsSection:function(a){return{type:e.DETAILS,stack:[b.createTable(a)]}},createDetailsSectionForFieldInfos:function(a,c){return{type:e.DETAILS,stack:[function(){var d=b.createTable(w.mixin({numColumns:2,numRows:a.length+1},c));d.rows.forEach(function(f,h){0===h?f.field0=a[0].hasVariable?a[0].fieldCategory:"":(h=a[h-1],f.field0=h.script?h.script.alias:h.hasVariable?h.alias:m.getFieldLabel(h.name)||"",f.fieldInfos.field1=h)});b.provideSpaceAfter(d);
return d}()]}},createDetailsSectionForFieldInfoGroups:function(a,c){return{type:e.DETAILS,stack:[function(){var d=b.createTable(w.mixin({numColumns:a.length+1,numRows:a[0].length+1},c));d.rows.forEach(function(f,h){d.columns.forEach(function(l,q){0!==q&&(0===h?f[l.field]=a[q-1][0].fieldCategory||"":(q=a[q-1][h-1],f.field0=f.field0||(q.script?q.script.alias:q.alias),f.fieldInfos[l.field]=q))})});b.provideSpaceAfter(d);return d}()]}},provideSpaceAfter:function(a,c){a.style.spaceAfter=Math.max(c||0,
90-15.07*a.rows.length)},applyDefaultStyling:function(a){var c=!0;a.rows.forEach(function(d,f){a.columns.forEach(function(h){d.style.fields[h.field].overrideStyle=0===f?"TableHeader":c?"AlternatingRow":void 0});c=!c})},setTableHeaderStyle:function(a){if(a.style)for(var c in a.style.fields)(a.style.fields[c]=a.style.fields[c]||{}).overrideStyle="TableHeader"},DEFAULT_ROW_HEIGHT:15.07,isEmptyTable:function(a){return!a.columns||!a.columns.length||!a.rows||!a.rows.length},isSingleCelledTable:function(a){return 1===
a.columns.length&&1===a.rows.length},isMultiDataTable:function(a){return 1<a.columns.length||2<a.rows.length},getTableSubtype:function(a){if(!b.isSingleCelledTable(a))return null;a=b.getFirstFieldInfo(a);return k.isTextLikeCell(a)?"isTextLike":a.isImage?a.triggerJson?"isImage.hasConditionalStyling":"isImage":a.isShape?"isShape":null},getFirstFieldInfo:function(a){return a.rows[0].fieldInfos&&a.rows[0].fieldInfos[a.columns[0].field]},tableJsonHasInfographic:function(a){return!!b.getTableJsonInfographic(a)},
getTableJsonInfographic:function(a){var c;a.rows.some(function(d){if(d.fieldInfos)for(var f in d.fieldInfos){var h=d.fieldInfos[f];if(h&&h.isInfographic)return c=h.infographicJson,!0}});return c},getTableJsonFirstFieldInfo:function(a){return a.rows[0].fieldInfos[a.columns[0].field]},tableJsonHasChart:function(a){return a.rows.some(function(c){if(c.fieldInfos)for(var d in c.fieldInfos){var f=c.fieldInfos[d];if(f&&f.isChart)return!0}})}};return b})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder":function(){define(["./utils",
"dojo/i18n!esri/nls/jsapi"],function(w,p){function m(c){Object.keys(c).forEach(function(d){var f=c[d];void 0!==f&&null!==f||delete c[d]})}p=p.geoenrichment.dijit.ReportPlayer.ReportPlayer;var k={NUMBER:"n/",createFieldInfoFromCalculator:function(c,d,f){if(!c)return null;c=(d="function"===typeof c.getDescriptionWithType?c:null)?d.variable:c;var h=f&&f.format,l=f&&f.autoformatCurrency,q=f&&f.calculatorName,t=f&&f.defaultDistanceUnits;f=f&&f.summaryType;var r=d&&d.getToggleGroup&&d.getToggleGroup();
f={alias:d?d.getDescriptionWithType()||d.getAliasWithType():c.description||c.alias,hasVariable:!0,variableID:c.id,fullName:c.fullName,fieldCategory:c.fieldCategory,vintage:c.vintage,type:c.type,statefulName:r?r.value:"n/"+c.fullName,summaryType:f};d=d?d.getCalcType().charAt(0):"n";f.name=w.name.createFieldNameFromSource(c,d);h?w.format.setFieldInfoFormat(f,h):(f.decimals=c.precision,f.showCurrency=!(!l||"n"!==d||!c.units||"CURRENCY"!==c.units.toUpperCase()),f.showPercent=!f.showCurrency&&("p"===d||
"n"===d&&c.units&&"PCT"===c.units.toUpperCase()),f.useThousandsSeparator=!0);c.isWebMap&&(f.isWebMap=!0,f.webMapFieldName=c.fieldName,f.webMapField=c.fieldInfo,f.webMapId=c.webMapId,f.layerUrl=c.layerUrl,!h&&c.fieldInfo&&c.fieldInfo.format&&(f.decimals=c.fieldInfo.format.places,f.useThousandsSeparator=!1!==c.fieldInfo.format.digitSeparator));c.customDataCollection&&(f.isCustomDataCollection=!0,f.customDataCollectionId=c.customDataCollection.id,f.customDataCollectionUrl=c.customDataCollection.url,
f.customDataCollectionPortalUrl=c.customDataCollection.portalUrl);c.isSiteAttribute&&(f.isSiteAttribute=!0,f.attribute=c.attribute,f.type=c.attribute.type,!h&&0<c.attribute.places&&(f.decimals=c.attribute.places));c.isDataLayerAttribute&&(f.isDataLayerAttribute=!0,f.layerID=c.layerID,f.layerUrl=c.layerUrl,f.layerName=c.layerName,f.attribute=c.attribute,f.type=c.attribute.type,!h&&0<c.attribute.decimals&&(f.decimals=c.attribute.decimals),"DISTANCE"===c.attribute.name&&(f.units=c.attribute.units||t||
"esriMiles"));f.usedFields=c.usedFields;f.expressionText=c.expressionText;w.name.provideQualifiedFieldInfoTemplateName(f,q);m(f);return f},fieldInfoToVariable:function(c){if(!c.hasVariable)return null;var d={id:c.variableID,fullName:c.fullName,fieldCategory:c.fieldCategory,vintage:c.vintage,type:c.type,precision:c.decimals,usedFields:c.usedFields,expressionText:c.expressionText};c.isWebMap&&(d.isWebMap=!0,d.fieldName=c.webMapFieldName,d.fieldInfo=c.webMapField,d.webMapId=c.webMapId,d.layerUrl=c.layerUrl);
c.isSiteAttribute&&(d.isSiteAttribute=!0,d.attribute=c.attribute);return d},createFieldInfoFromScript:function(c,d){var f=d&&d.format;d=d&&d.calculatorName;c=c||{};c.name=c.name||w.name.DEFAULT_SCRIPT_NAME;c.alias=c.alias||p.scriptNameDefault;c.decimals=Number(c.decimals)||0;var h={};h.name=w.name.createFieldNameFromScript(c);w.name.provideQualifiedFieldInfoTemplateName(h,d);h.script=c;f?w.format.setFieldInfoFormat(h,f):(h.decimals=Number(c.decimals),h.showCurrency=!1,h.showPercent=!1,h.useThousandsSeparator=
!0);m(h);return h},createFieldInfoFromImage:function(c,d){return{isImage:!0,imageJson:c,triggerJson:d}},createFieldInfoFromMap:function(c){return{isMap:!0,mapJson:c}},createFieldInfoFromShape:function(c){return{isShape:!0,shapeJson:c}},createFieldInfoFromChart:function(c){return{isChart:!0,chartJson:c}},createFieldInfoFromInfographic:function(c){return{isInfographic:!0,infographicJson:c}},createFieldInfoFromSection:function(c){return{isReportSection:!0,sectionJson:c}},createFieldInfoFromMissingVariable:function(c,
d){return{name:c&&c.substr(c.indexOf(".")+1),templateName:c,isMissing:!0,alias:d}},createFieldInfoForUnsupportedContent:function(){return{isUnsupportedContent:!0}}},e=/^\[\w+\]$/,b=/\[\w+\]/;k.createFieldInfoFromLabel=function(c,d){if("string"!==typeof c)return null;c=c.trim();var f=e.test(c);if(!d||f){if(!f)return null;c=c.replace(/\[|\]/g,"").toUpperCase();return k.createFieldInfoFromSpecialFieldName(w.fields.uiToTemplate(c))}return b.test(c)?w.richText.createFieldInfoFromRenderedXMLString(c):null};
k.createFieldInfoFromSpecialFieldName=function(c,d){if("string"!==typeof c)return null;c=w.fields.trimTemplateHeaderName(c);c=c.toUpperCase();if("GROUPCOUNT"===c)var f={name:w.fields.GROUPCOUNT_FIELD_NAME,alias:w.fields.GROUPCOUNT_FIELD_ALIAS,type:"esriFieldTypeInteger"};else"LOCATORSUMMARY"===c?(f={name:w.fields.LOCATORSUMMARY_FIELD_NAME,alias:w.fields.LOCATORSUMMARY_FIELD_ALIAS,type:"esriFieldTypeDouble",templateName:w.fields.LOCATORSUMMARY_FIELD_NAME},d&&Object.assign(f,w.format.processFieldInfoTagAttributes({m:"string"===
typeof d?d:w.format.buildFormatStringFromObject(d)}))):"CURRDATE"===c?f={name:w.fields.DATE_FIELD_NAME,alias:w.fields.DATE_FIELD_ALIAS,format:d||w.fields.DATE_FIELD_DEFAULT_FORMAT}:"SITENOTES"===c?f={name:w.fields.qualifyTemplateHeaderName(w.fields.SITENOTES_FIELD_NAME),alias:w.fields.SITENOTES_FIELD_ALIAS,type:"esriFieldTypeString"}:0===c.indexOf("SITENOTE")&&(f=w.fields.getSiteNoteFieldNameAt(c.replace("SITENOTE","")),f={name:w.fields.qualifyTemplateHeaderName(f),alias:f,type:"esriFieldTypeString"});
if(f)return f;var h=w.fields.templateToUIHeader(c);h?(f={name:w.fields.qualifyTemplateHeaderName(c),alias:h,type:"esriFieldTypeString"},w.fields.isChartAttribute(c)&&(f.isChartAttribute=!0),"CHART_POINT_VALUE"===c&&(f.type="esriFieldTypeDouble",f.decimals=0,f.useThousandsSeparator=!0,d&&w.format.setFieldInfoFormat(f,d))):(d=w.fields.templateToUIReportVar(c))&&(f={name:d,alias:d,type:"esriFieldTypeString"});f&&(f.templateName=f.name);return f};var a=/(\(%\)|: Percent)$/;k.isFieldInfoInPercentState=
function(c){return c?c.statefulName&&0===c.statefulName.indexOf("p/")||c.alias&&a.test(c.alias):!1};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/utils":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(w,p){var m={},k;m.init=function(){if(k)return k.promise;k=new w;p("./FieldInfoBuilder ./FieldInfoFormatUtil ./FieldInfoNameUtil ./FieldInfoRenderer ./RichTextJsonUtil ./FieldLibrary".split(" "),function(e,b,a,c,d,f){m.builder=
e;m.format=b;m.name=a;m.renderer=c;m.richText=d;m.fields=f;k.resolve()});return k.promise};m.init();return m})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes":function(){define([],function(){return{PAGE_HEADER:"PageHeader",DETAILS_HEADER:"DetailsHeader",DETAILS:"Details",GROUP:"Group",PAGE_FOOTER:"PageFooter",REPORT_FOOTER:"ReportFooter",DATA_SOURCE:"DataSource",EMPTY:"empty",INFOGRAPHIC_HEADER:"InfographicHeader",INFOGRAPHIC_VARIABLE:"InfographicVariable",INFOGRAPHIC_BACKGROUND:"InfographicBackground",
INFOGRAPHIC_FOREGROUND:"InfographicForeground",INFOGRAPHIC_ATTRIBUTES:"InfographicAttributes",INFOGRAPHIC_NOTES:"InfographicNotes",INFOGRAPHIC_SUMMARY:"InfographicSummary",INFOGRAPHIC_SUMMARY2:"InfographicSummary2",INFOGRAPHIC_SUMMARY_FOOTER:"InfographicSummaryFooter",TABLE_BACKGROUND:"TableBackground",TABLE_FOREGROUND:"TableForeground",TABLE_BACKGROUND_FLOATING_PANELS:"BackgroundFloatingPanels",TABLE_FOREGROUND_FLOATING_PANELS:"ForegroundFloatingPanels",TABLE_FLOATING_PANELS:"FloatingPanels"}})},
"esri/dijit/geoenrichment/utils/PortalUtil":function(){define("dojo/_base/lang esri/kernel esri/request ./requests/EveryRequest ./requests/UniversalClient ../ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil ./CacheUtil ./ProjectionUtil ./UrlUtil".split(" "),function(w,p,m,k,e,b,a,c,d){var f={query:function(h,l,q,t){l=l||{};q=q||"results";t=t||100;var r="number"===typeof l.num?l.num:-1,u=l.num=0>r||l.num>t?t:l.num;l.start=l.start||1;return h(l).then(function(z){var A=z[q],B=z.total-l.start+
1;0<=r&&B>r&&(B=r);B-=u;if(0>=B)return z;l.num=u;for(var E=[];0<B;)l.start+=u,E.push(h.bind(null,w.mixin({},l))),B-=u;return k(E,{stopOnError:!0}).then(function(F){F.forEach(function(G){Array.prototype.push.apply(A,G[q])});return z})})},queryCommon:function(h,l){return f.query(function(q){var t=p.id.findCredential(h)||p.id.credentials[0];return m({url:h,content:w.mixin({f:"json",token:t?t.token:void 0},l,q),handleAs:"json"},{usePost:!0})}).then(function(q){return q.results})},getPortalSelf:function(h){return e.requestPublicFirst(d.combine(h,
"sharing/rest/portals/self"),{})},getDefaultBasemaps:function(h){var l=a.get("PortalUtil.basemaps");l[h]||(l[h]=f.getPortalSelf(h).then(function(q){return e.request(d.combine(h,"sharing/rest/community/groups"),{content:{q:q.useVectorBasemaps?q.vectorBasemapGalleryGroupQuery:q.basemapGalleryGroupQuery,f:"json"},handleAs:"json"}).then(function(t){return(t=t.results[0])?e.request(d.combine(h,"sharing/rest/search"),{content:{q:"group:"+t.id+' AND type:"web map"',num:100,f:"json"},handleAs:"json"}).then(function(r){return r.results}):
null})}));return l[h]},tryConfigureServicesFromAGOLPublic:function(){return f.getPortalSelf("https://www.arcgis.com").then(function(h){if(h=h&&h.helperServices)h.geometry&&c.setGeometryServiceUrl(h.geometry.url),h.printTask&&b.setPrintMapTaskUrl(h.printTask.url)}).otherwise(function(h){console.log(h)})}};return f})},"esri/dijit/geoenrichment/utils/requests/EveryRequest":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(w,p,m){var k=
w(null,{requests:null,results:null,requestCount:0,chunkSize:0,stopOnError:!1,onProgress:null,index:0,completeCount:0,executeCount:0,isExecuting:!1,dfd:null,constructor:function(e,b,a,c,d){this.requests=e;this.results=b;this.requestCount=this.requests.length;this.chunkSize=Math.max(a,0);this.stopOnError=c;this.onProgress=d},execute:function(){this.isExecuting=!0;for(this.dfd=new p;this.tryStartNextRequest(););return this.dfd.promise},tryStartNextRequest:function(){if(!this.isExecuting)return!1;if(this.index==
this.requestCount&&!this.executeCount)return this.isExecuting=!1,this.dfd.resolve(this.results),!1;if(this.index==this.requestCount||this.executeCount==this.chunkSize)return!1;var e=this.requests[this.index++];this.executeCount++;var b=e.request;"function"===typeof b&&(b=b());var a=this,c=!0;m(b,function(d){a.processResult(d,e.key,d instanceof Error,c)},function(d){a.processResult(d,e.key,!0,c)});c=!1;return!0},processResult:function(e,b,a,c){if(this.isExecuting)if(a&&this.stopOnError)this.isExecuting=
!1,this.onProgress&&this.onProgress(1),this.dfd.reject(e);else if(this.results[b]=e,this.completeCount++,this.executeCount--,this.onProgress&&this.onProgress(this.completeCount/this.requestCount),!c)for(;this.tryStartNextRequest(););}});return function(e,b){var a=!1,c=10,d=null;"boolean"===typeof b?a=b:b&&("number"===typeof b.chunkSize&&(c=b.chunkSize),"boolean"===typeof b.stopOnError&&(a=b.stopOnError),"function"===typeof b.onProgress&&(d=b.onProgress));var f=[];if(Array.isArray(e)){var h=[];e.forEach(function(q,
t){f.push({key:t,request:q})})}else for(var l in e)h={},f.push({key:l,request:e[l]});return(new k(f,h,c,a,d)).execute()}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/dom-style esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/ImageInfoUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(w,p,m,k,e,b,a,c,d,f){function h(){var G=new m;w("esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/layers/GraphicsLayer ./DotDensityToImageUtil ./LegendToLayerUtil".split(" "),function(H,v,D,I,K,S){q=v;t=D;r=I;u=K;z=S;l=p(H,{returnJson:!1,mapName:null,_execute:function(){this.returnJson&&(this.printGp.submitJob=this.printGp.execute=function(N,T){N="data:application/json;base64,"+a.base64FromJson(N.Web_Map_as_JSON);T([{value:{url:N}}]);return(new m).resolve()});
return this.inherited(arguments)},_getPrintDefinition:function(N,T){var M=this.inherited(arguments);this.returnJson&&this.mapName&&(M.title=this.mapName);console.log(M);return M},_createOperationalLayers:function(N,T){var M=this.inherited(arguments);if(T.__legendLayerId){var V=M.filter(function(W){return W.id===T.__legendLayerId})[0];M.splice(M.indexOf(V),1);M.push(V)}return M},_createFeatureCollection:function(N,T,M,V){var W=this.inherited(arguments);this.returnJson&&W&&("esri.layers.FeatureLayer"===
N.declaredClass||"esri.layers.StreamLayer"===N.declaredClass||"esri.layers.GraphicsLayer"===N.declaredClass)&&W.featureCollection.layers.forEach(function(Q){Q.layerDefinition.name=N.arcgisProps&&N.arcgisProps.title||N._titleForLegend||N.name||N.id;Q.layerDefinition.name=d.decodeXML(Q.layerDefinition.name);Q.layerDefinition.objectIdField="OBJECTID";Q.layerDefinition.fields=[{name:"OBJECTID",type:"esriFieldTypeOID"}];var Y={OBJECTID:1},U=/[^\w]/g,fa;Q.featureSet.features.forEach(function(Z,qa){Z.attributes=
Z.attributes||{};Z.attributes.OBJECTID=qa+1+"";Z.attributes.__nameField||(Z.attributes.Name=d.decodeXML(Z.attributes.Name||Q.layerDefinition.name),fa="Name");qa=Z.attributes.__fieldAliases;for(var R in Z.attributes)if(0!==R.indexOf("__")){var Pa=R,Ea=Z.attributes[R];"string"===typeof Ea&&(Ea=d.decodeXML(Ea));var ka=qa&&qa[R];(ka=ka&&ka.replace(U,"_"))&&void 0===Z.attributes[ka]&&(Z.attributes[ka]=Ea,Pa=ka);Z.attributes.__nameField===R&&(fa=Pa);Y[R]||(Y[R]=1,Q.layerDefinition.fields.push({name:Pa,
type:"string"===typeof Ea?"esriFieldTypeString":"esriFieldTypeDouble"}))}});Q.layerDefinition.displayField=fa});return W},_convertSvgSymbol:function(N){return N}});G.resolve()});return G.promise}var l,q,t,r,u,z,A,B={setPrintMapTaskUrl:function(G){A=G;f.registerCORS(G)},mapToURL:function(G,H,v,D){var I=B._getUrlForMap(G);if(I)return I;I=h().then(function(){return B._replaceDotDensityLayersWithPictureMarkers(G).then(function(K){return k(H&&z.legendToGraphicsLayer(H,G,v),function(S){S&&G.addLayer(S);
return k(B._runPrintTask(G,v,S,D),function(N){S&&G.removeLayer(S);B._rollbackReplacing(G,K);var T=new m;setTimeout(function(){T.resolve(N.url)},100);return T.promise})})})});B._putUrlToCache(G,I);return I},_replaceDotDensityLayersWithPictureMarkers:function(G){var H=[];for(i=0;i<G.graphicsLayerIds.length;i++)layer=G.getLayer(G.graphicsLayerIds[i]),layer.loaded&&layer.visible&&u.isDotDensity(layer)&&H.push(B._createGraphicsLayerFromDotDensityLayer(i,layer,G));return e(H)},_createGraphicsLayerFromDotDensityLayer:function(G,
H,v){return u.createPictureMarkersFromDotDensityLayer(H,v.extent,v).then(function(D){if(!D)return null;var I=new r;D.map(function(K){I.add(K)});v.addLayer(I,G);H.visible=!1;return{addedLayer:I,hiddenLayer:H}}).otherwise(function(D){console.log(D);return null})},_runPrintTask:function(G,H,v,D){function I(){var K=new l(A);K.returnJson=D&&D.replaceWithJson;K.mapName=D&&D.mapName;var S=new q;S.map=G;var N=new t;N.exportOptions={width:3.125*b.get(H,"width"),height:3.125*b.get(H,"height"),dpi:300};N.format=
"png32";N.showAttribution=!1;N.forceFeatureAttributes=!0;N.__legendLayerId=v&&v.id;S.template=N;return K.execute(S)}return k(I(),function(K){return K},function(K){console.log(K);return k(I(),function(S){return S},function(S){console.log(S);return I()})})},_rollbackReplacing:function(G,H){H.forEach(function(v){v&&v.addedLayer&&G.removeLayer(v.addedLayer);v&&v.hiddenLayer&&(v.hiddenLayer.visible=!0)})},urlToSrc:function(G,H){return H&&H.saveImagesAsDataUrl?c.getRemoteImageDataUrl(G,{sizeLimit:1500}):
G}},E,F=0;B.enableCaching=function(){E={}};B.clearCaching=function(){E=null};B._putUrlToCache=function(G,H){E&&H&&(G.__mapToImageUtilKey=F++,E[G.__mapToImageUtilKey]=H)};B._getUrlForMap=function(G){return E&&E[G.__mapToImageUtilKey]};return B})},"esri/dijit/geoenrichment/utils/ImageInfoUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/when","./CacheUtil","./ImageUtil","./UrlUtil"],function(w,p,m,k,e){var b=/^data:/i,a={getImageInfo:function(c,d,f){var h=f&&f.sizeLimit||1E5,l=m.get("ImageInfoUtil"),
q=c+(f&&f.crossOrigin||"");l[q]||(l[q]=k.imageFromUrl(c,f).then(function(t){var r=k.imageToDataURL(t),u={dataUrl:r,contentType:k.getContentType(r),width:t.width,height:t.height};setTimeout(function(){l[q]=u});return u}));return p(l[q],function(t){t=w.mixin({},t);d&&(t.filename=d&&d.replace(/\.\w+$/,".png").toLowerCase());return function(r){return p(a._processDataUrl(r,h),function(u){if(u&&u.dataUrl){var z=w.mixin({},r);z.dataUrl=u.dataUrl;z.width*=u.factor;z.height*=u.factor;return p(z)}return p(r)})}(t)})},
ensureDataUrlForRemoveImage:function(c,d){return!c||b.test(c)?c:a.getRemoteImageDataUrl(c,d)},getRemoteImageDataUrl:function(c,d){function f(t,r){return a.getImageInfo(t?q+"?"+c:c,null,{crossOrigin:r}).then(function(u){return p(a._processDataUrl(u,l),function(z){return z&&z.dataUrl||z})})}function h(){console.log("Failed to get data for URL: "+c);return c}if(!c)return c;var l=d&&d.sizeLimit||1E5,q=e.getProxyUrl();return f(!1,"anonymous").otherwise(function(){return f(!1,null)}).otherwise(function(){return q?
f(!0,"anonymous"):h()}).otherwise(function(){return f(!0,null)}).otherwise(h)},_processDataUrl:function(c,d){var f=Math.max(c.width,c.height);if(f<=d)return c.dataUrl;var h=d/f;return p(k.scaleImage(c.dataUrl,{factor:h}),function(l){return{dataUrl:l,factor:h}})}};return a})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./UrlUtil"],function(w,p,m){var k={base64DataToDataURL:function(e,b){if(/^data:image/.test(e))return e;
b||(b=atob(e.substr(0,16)),b=k.getImageContentType(b));return"data:"+(b||"image/png")+";base64,"+e},getImageContentType:function(e){if("\u00ff\u00d8\u00ff"===e.substr(0,3)&&"JFIF"===e.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===e.substr(0,8))return"image/png";if("GIF89a"===e.substr(0,6)||"GIF87a"===e.substr(0,6))return"image/gif"},base64DataFromDataURL:function(e){0==e.indexOf("data:")&&(e=e.substr(e.indexOf(",")+1));return e},getBase64DataIndex:function(e){e=0==e.indexOf("data:")?
e.indexOf(";base64,"):-1;return 0<e?e+8:0},getContentType:function(e){var b=k.getBase64DataIndex(e);return b?e.substring(5,b-8):null},checkBase64FileSize:function(e,b){return k.getBase64FileSize(e)<=b},getBase64FileSize:function(e){return.75*e.length},imageToDataURL:function(e,b){b=b||{};var a=document.createElement("canvas"),c=a.getContext("2d");a.width=b.width||e.width;a.height=b.height||e.height;var d=b.opacity;null!=d&&!isNaN(d)&&0<=d&&1>d&&(c.globalAlpha=+d,b.format="image/png");(d=b.pos)?c.drawImage(e,
d.x||0,d.y||0):c.drawImage(e,0,0,a.width,a.height);return a.toDataURL(b.format)},imageFromUrl:function(e,b){var a=new w,c=new Image;0!==e.indexOf("data:")&&b&&b.crossOrigin&&c.setAttribute("crossOrigin",b.crossOrigin);c.onload=function(){if(c.width&&c.height)a.resolve(c);else{var d=Error("Error of reading an image from URL.");b&&b.ignoreError?a.resolve(null):a.reject(d)}c.onload=c.onerror=null};c.onerror=function(d){b&&b.ignoreError?a.resolve(null):a.reject(d);c.onload=c.onerror=null};e=require.toUrl(e);
/^http:/i.test(e)&&/^https/i.test(window.location.protocol)&&(e=m.toHttpsUrl(e));c.src=e;return a.promise},scaleImage:function(e,b){if("string"===typeof e){var a=k.base64DataToDataURL(e),c=k.getContentType(a);a=k.imageFromUrl(a)}return p(a||e).then(function(d){var f=1,h=d.width,l=d.height;if(b.factor)f=b.factor;else if(b.maxDim)f=b.maxDim/Math.max(h,l);else if(b.imageDim){var q=b.imageDim.w,t=b.imageDim.h;b.imageDim.preserveRatio?(f=Math.min(q/h,t/l),b.imageDim.reduceOnly&&1<f&&(f=1)):b.imageDim.reduceOnly?
(h=Math.min(h,q),l=Math.min(l,t)):(h=q,l=t)}return k.imageToDataURL(d,{width:h*f,height:l*f,format:b.format||c,opacity:b.opacity})})},getImageViewType:function(e,b){return 1E3<=b?(e/=b,.025>=Math.abs(e-2)?"360":2<e?"pano":null):null}};return k})},"esri/dijit/geoenrichment/utils/RegExpUtil":function(){define([],function(){var w={createRegExp:function(c,d,f){c=w.trimText(c);return!c&&f?null:new RegExp(c,d)},trimText:function(c){return c?c.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,"").trim():""},replace:function(c,
d,f){return null==c?"":(""+c).replace(d,function(h){return f[h]||""})}},p=/&|<|>/g,m=/&|<|>|"|'/g,k={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;"};w.encodeXML=function(c,d){return w.replace(c,d?m:p,k)};var e=/&amp;|&lt;|&gt;|&quot;|&apos;/g,b={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26apos;":"'"};w.decodeXML=function(c){return w.replace(c,e,b)};w.IS_RICH_TEXT_RE=/<\w/;w.IS_URL_RE=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;
w.isRichText=function(c){return c&&w.IS_RICH_TEXT_RE.test(c)};w.isUrl=function(c){return c&&w.IS_URL_RE.test(c)};var a=/^[0-9a-fA-F]{32}$/;w.isId=function(c){return c&&a.test(c)};return w})},"esri/dijit/geoenrichment/utils/ProjectionUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/SpatialReference esri/geometry/jsonUtils esri/dijit/geoenrichment/utils/CoordinateUtil esri/dijit/geoenrichment/utils/PolygonUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/requests/EveryRequest".split(" "),
function(w,p,m,k,e,b,a,c){function d(z){return z&&z.spatialReference||z instanceof p&&z||z&&new p(z)||new p(k.WEB_MERCATOR_WKID)}function f(z,A){var B=[];try{for(var E=0;E<z.length;E++)B.push(k.toSpatialReference(z[E],A))}catch(F){console.log(F)}return(new w).resolve(B)}function h(z,A){function B(I){H.push(function(){return l(G,I,F,A)})}var E=z[0],F=m.getJsonType(E),G={outSR:A.wkid||A.toJson(),inSR:E.spatialReference.wkid||E.spatialReference.toJson()},H=[],v=0,D=[];1==z.length?D.push(E):z.forEach(function(I){var K=
e.getNumberOfPoints(I);v+=K;if(1E4<v){var S=[];D.length?(S.push(I),v=K):(D.push(I),v=0);B(D);D=S}else D.push(I)});D.length&&B(D);return c(H,{stopOnError:!0}).then(function(I){for(var K=I[0],S=1;S<I.length;S++)K=K.concat(I[S]);return K},function(I){console.log(I);return[]})}function l(z,A,B,E){z.geometries=q(A);return u("project",z).then(function(F){return t(F.geometries,B,E)})}function q(z){var A=z.map(function(B){B=B.toJson();delete B.spatialReference;return B});return{geometryType:m.getJsonType(z[0]),
geometries:A}}function t(z,A,B){var E=m.getGeometryType(A),F=B.toJson();return z.map(function(G){G.spatialReference=F;return new E(G)})}var r={},u;r.setGeometryServiceUrl=function(z){b.registerCORS(z);u=function(A,B){return a.requestPublicFirst({url:z,urlSuffix:A},{content:B})}};r.setGeometryRequest=function(z){u=z};r.getSpatialReference=d;r.projectGeometries=function(z,A){var B=d(A);A=Array.isArray(z)?z:[z];if(!A.length)return(new w).resolve(z);var E={},F=A.slice(),G=0;A=A.filter(function(H,v){if(H.spatialReference&&
H.spatialReference.wkid!==B.wkid)return E[v]=G++,!0});return A.length?(k.testSpatialReferenceWKID(B)&&k.testSpatialReferenceWKID(A[0].spatialReference)?f(A,B):h(A,B)).then(function(H){F.forEach(function(v,D){void 0!==E[D]&&(F[D]=H[E[D]])});return Array.isArray(z)?F:F[0]}):(new w).resolve(z)};r.unionGeometries=function(z){var A=d(z[0].spatialReference);z={sr:A.wkid||A.toJson(),geometries:q(z)};return u("union",z).then(function(B){return t([B.geometry],B.geometryType,A)[0]})};r.geometriesToJson=q;r.geometriesFromJson=
t;return r})},"esri/dijit/geoenrichment/utils/PolygonUtil":function(){define([],function(){var w={getNumberOfPoints:function(p){if(!p)return 0;Array.isArray(p)||(p=[p]);var m=0;p.forEach(function(k){m+=w.getGeometryPointCount(k.geometry||k)});return m},getGeometryPointCount:function(p){if(!p)return 0;var m=0,k=p.rings||p.paths;!k&&p.points&&(k=[p.points]);k?k.forEach(function(e){m+=e&&e.length||0}):m+="x"in p?1:2;return m}};return w})},"esri/dijit/geoenrichment/ReportPlayer/_devConfig":function(){define([],
function(){return{logData:!0,showAreaDataUtilUndefinedData:!1,createPlayerCommand:{saveDataJsonAsTextFile:!1,useTestBuild:!1,configUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/config.js",baseUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release",mainUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/dojo/dojo.js",esriDijitCssUrl:"https://js.arcgis.com/3.31/dijit/themes/claro/claro.css",
esriCssUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/reportPlayer.css"},createPDFCommand:{removeUnicodeChars:!1},preview:{bigValues:!1},charts:{enableEffects:!1},table:{printGridRefresh:!1},emulateErrors:{playerError:!1,contentErrors:!1,themeParseError:!1,metadataParseError:!1,layoutParseError:0,reportContainerRenderError:!1,createReportError:!1,createReportNaN:!1,createReportNull:!1,getMapItemError:!1,emptyDataProviderResponse:!1,
emptyTemplateJson:!1}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport":function(){define("dojo/_base/declare esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/ImageUtil ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AreasPreprocessor ./supportClasses/GEUtil ../core/supportClasses/ReportTemplateTypes ../core/conversion/PortalToEditorConverter ../core/supportClasses/map/WebMapJsonUtil ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ./supportClasses/attachments/AttachmentsStoreSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder ../countryConfig".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l,q,t,r,u,z,A){return w(null,{reportDataToServerData:function(B){return null},reportDataFromServerData:function(B,E){function F(M){H.some(function(V){return"metadata.xml"===V.name})||H.push({name:"metadata.xml",data:z.recoverMetadataFromAreaData(N.areaData,M)})}function G(M){B.sites=[];var V={},W=1;N.areaData.forEach(function(Q){Q=Q.headers&&Q.headers.data||{};var Y=Q.SITE_NAME||Q.STORE_NAME,U=Q.STORE_ID||"unclassified."+W++;"number"!==typeof V[U]&&(V[U]=B.sites.length,
B.sites.push({locationName:Y,name:null,shortName:null,description:null,address:Q.STORE_ADDR,latitude:Q.STORE_LAT,longitude:Q.STORE_LONG,areas:[]}));B.sites[V[U]].areas.push({locationName:Y,name:Q.AREA_DESC?Y+" ("+Q.AREA_DESC+")":Y,shortName:Q.AREA_DESC,description:Q.AREA_DESC2,address:Q.STORE_ADDR,latitude:Q.STORE_LAT,longitude:Q.STORE_LONG,feature:{attributes:{STORE_ID:Q.STORE_ID,AREA_ID:Q.AREA_ID}}})});B.sites.forEach(function(Q){var Y=!1;Q.shortName=Q.areas.map(function(fa){return Y=!!fa.shortName,
fa.shortName}).join(", ");Y&&(Q.name=Q.locationName+" ("+Q.shortName+")");var U=Q.areas.map(function(fa){return fa.description});Q.description=1<U.length?U[0]===U[1]?U[0]:U.join(", "):U[0]||""});N.reportInfo.areaIdToAttachmentsInfo&&B.sites.forEach(function(Q){Q.areas.forEach(function(Y){if(Y=N.reportInfo.areaIdToAttachmentsInfo[Y.feature.attributes.AREA_ID])Q.attributes=Q.attributes&&Q.attributes.length?Q.attributes:Y.attributes,Q.notes=Q.notes&&Q.notes.length?Q.notes:Y.notes,Q.images&&Q.images.length||
!Y.images||(Q.images=Y.images,Q.images.forEach(function(U){function fa(Z){return(Z=M[Z])&&m.base64DataToDataURL(Z,"image/png")}U.url=fa(U.url);U.thumbnail=fa(U.thumbnail)}))})})}A.reset();var H=B.reportItem.resources,v;if(!Array.isArray(H)){var D=H;H=[];for(var I in D)H.push({name:I,data:D[I]})}H.forEach(function(M){"theme.css"===M.name&&(M.name="theme.css.txt")});var K=H.filter(function(M){return"report.xml"===M.name})[0],S=H.filter(function(M){return"data.xml"===M.name})[0],N;(function(){var M=
/.*\.(png|jpg|jpeg)$/i,V=/(.*\.(json)$)|(^maps\/.*\.(png)$)/i,W={},Q={};H.forEach(function(Z){M.test(Z.name)&&(W[Z.name]=Z.data,"logo.png"===Z.name&&(v=m.base64DataToDataURL(Z.data,"image/png")));V.test(Z.name)&&(-1!==Z.data.indexOf("operationalLayers")?Q[Z.name]=l.processWebMapJson(Z.name,Z.data):Q[Z.name]=Z.data)});var Y={},U=K.data.match(/<section[^<>]*query=("|').+?("|').*?>/g);U&&U.forEach(function(Z){Z=Z.replace(/.*?query=("|')/,"");Z=Z.replace(/("|').*/,"");Y[Z]=1});var fa={};N=e.parse(S.data,
function(Z,qa,R){return(Z=Q[qa])?fa[R]=Z:W[qa]||qa});F({map:fa,locator:Y});G(W)})();var T=new u;return p(function(M){var V=K.data.indexOf("\x3csection"),W={isGraphicReport:K.data.indexOf("\x3ctable")<V,isMultiFeature:!1,type:f.STANDARD,portalJson:{files:H}};return p(h.provideEditorJson(W,{variableProvider:M}),function(){W.templateJson=r.deserialize(W.templateJson);W.isMultiFeature=q.hasMultiFeatureSections(W.templateJson);delete W.portalJson;return W})}(T),function(M){b.parseSites(B);var V=a.areasFromJson(B.analysisAreas),
W=B.combinedAreasInfo&&a.combinedAreasInfoFromJson(B.combinedAreasInfo)||{},Q=B.attachmentsProvider&&t.getAttachmentsStoreFromJson(B.attachmentsProvider),Y={isMultiFeature:M.isMultiFeature&&1<V.length,reportTitle:null,templateJson:M.templateJson,reportObject:M,fieldData:{specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],reportInfo:null},analysisAreas:V,combinedAreasInfo:W,reverseAnalysisAreasOnMap:!0,attachmentsStore:Q,templateVariableProvider:T,customLogo:v,
config:{}};b.populateCombinedAreasInfo(Y.combinedAreasInfo,Y.analysisAreas);c.provideAreasIndexes(Y);d.setGeoenrichmentUrl(null);E&&E.forEach(function(U){switch(U){case "Maps":d.addCapability("FormatInfographicsMaps");break;case "ImageUrls":d.addCapability("FormatInfographicsImageUrls")}});return p(k.applyRunReportAndGetDataResults(N,Y)).then(function(){return Y})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportDataProcessor":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred ./tasks/EnrichAreasTask ./tasks/RunReportTask ./data/AreaCalculatorsUtil ./data/VariablesUtil ./CustomReportsManager ./stdGeographies/StdGeographiesModel esri/dijit/geoenrichment/utils/DateUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ../../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../../core/infographics/utils/InfographicJsonUtil ../../config ../../countryConfig".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l,q,t,r,u,z){return{runReportAndGetData:function(A,B){return p([c.getCustomReportByID(A),B]).then(function(E){var F=E[0];E=E[1];return(new e).execute({portalUrl:A.portalUrl,analysisAreas:A.analysisAreas,countryID:A.countryID,hierarchy:A.hierarchy,report:{reportID:F.reportID,portalUrl:F.templateData.getPortalUrl(!0),modified:F.modified,isMultiFeature:F.isMultiFeature},attachmentsStore:E,cacheResult:u.runReportTask.cacheResult}).then(function(G){return{taskIDs:G.taskIDs,
areaData:G.areaData,reportInfo:G.reportInfo}},function(G){A.fieldData.errors.push(G);return(new m).reject(G)})})},runReportFromVariables:function(A){var B={};A.variables.fullNames.forEach(function(E){var F=l.createFieldNameFromSource(E);B[E.substr(E.indexOf(".")+1)]=F});return(new k).enrichAreas({portalUrl:A.portalUrl,analysisAreas:A.analysisAreas,countryID:A.countryID,hierarchy:A.hierarchy,fields:a.convertForEnrich(A.variables),comparisonLevels:A.comparisonLevels||r.getDefaultLevels()}).then(function(E){var F=
A.analysisAreas.map(function(){return{}});b.addEnrichFeatures(E,B,l.DATA_COLLECTIONS_CALCULATOR_NAME,F);return{areaData:F}},function(E){A.fieldData.errors.push(E);return(new m).reject(E)})},applyRunReportAndGetDataResults:function(A,B){if(A&&A.areaData){var E=B.templateJson;B.fieldData.specialTradeAreaCalculatorName=E.metadata&&E.metadata.specialTradeAreaCalculatorName;delete E.metadata;B.fieldData.runReportTaskIDs=A.taskIDs;B.fieldData.areaData=A.areaData;(B.fieldData.reportInfo=A.reportInfo)&&this._populateReportDataFromReportInfo(A.reportInfo,
B);this._reportDataFromAreas(B.analysisAreas,B.fieldData.areaData);this._reportDataFromReport(B.reportObject,B.fieldData,B.combinedAreasInfo);return this._populateReportDataFromAttachmentsStore(B)}},_populateReportDataFromReportInfo:function(A,B){B.reportTitle=B.reportObject.title=B.reportTitle||A.Title||A.Name||"";B.fieldData.metadata.Name=A.Name||B.reportTitle;A.country&&!z.getCurrentCountry()&&(z.setCountry(A.country),z.setHierarchyID(null));A.stdLevels&&!z.getGeographiesModel()&&z.setGeographiesModel(new d({levels:A.stdLevels}));
if(u.updateVariableInfoFromDataXml||u.isPlayerOnServer){var E=A.variables;q.processTemplateFieldInfos(B.templateJson,function(F){if(F.hasVariable&&F.variableID&&F.templateName){var G=F.templateName.indexOf("."),H=F.templateName.substr(0,G);G=F.templateName.substr(G+1);(H=E[H]&&E[H][G])&&H.alias&&(F.alias=H.alias,F=B.templateVariableProvider.get(F.templateName))&&(F.alias=H.alias,H.vintage&&(F.vintage=H.vintage),H.source&&(F.source=H.source))}})}A=t.collectVariablesStats(B.templateJson);A=B.templateVariableProvider.getVariablesDataVintageAndSources({usedVariablesCache:A});
B.reportObject.dataVintageDescription=A.dataVintageDescription||B.reportObject.dataVintageDescription;B.reportObject.dataSources=A.dataSources||B.reportObject.dataSources;B.reportObject.dataVintage=A.dataVintage||B.reportObject.dataVintage},_populateReportDataFromAttachmentsStore:function(A){var B=A.attachmentsStore,E=[];A.analysisAreas.forEach(function(F,G){B.supportsMultipleAreas&&B.setCurrentAnalysisAreaIndex(G);E.push(w(B.getNotes(),function(H){if(H&&H.length){var v={attributes:{}};v.attributes[h.SITENOTES_FIELD_NAME]=
H.map(function(D){return D.text}).join("\x3cbr/\x3e\x3cbr/\x3e");H.forEach(function(D,I){v.attributes[h.getSiteNoteFieldNameAt(I+1)]=D.text});(H=A.fieldData.areaData[G])&&b.addFeatureAttributesCalculator(v,H)}}));E.push(w(B.getAttributes(),function(H){if(!H||!H.length)return null;var v={attributes:{}};H.forEach(function(D){v.attributes[D.name]=D});(H=A.fieldData.areaData[G])&&b.addFeatureAttributesCalculator(v,H)}))});return p(E)},_reportDataFromAreas:function(A,B){A.forEach(function(E,F){if(F=B[F])b.addFeatureAttributesCalculator(E.feature,
F),b.addAreaInfoCalculator(E,F)})},_reportDataFromReport:function(A,B,E){var F=B.metadata;A&&!F.Title&&(F.Title=A.title);F.Subtitle=B.reportInfo&&B.reportInfo.Subtitle||"";F.Source=F.Source||A.dataVintageDescription||"Esri";F.DataSources=F.DataSources||A.dataSources||"Esri";F.DataVintage=F.DataVintage||A.dataVintage||"";F.Date=f.getReportFooterDate();F.Copyright="\u00a9 "+f.getFullYear()+" Esri";F.ProductLabel="";F.ProductUrl="";F.PhoneNumber="";F.TrialUrlText="";A.isMultiFeature&&(F.SITE_NAME=E.locationName||
E.name,F.STORE_NAME=E.locationName||E.name,F.AREA_DESC2=E.description||E.name,F.STORE_ADDR=E.address)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/EnrichAreasTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/kernel esri/SpatialReference esri/tasks/FeatureSet esri/geometry/Point ../GEUtil ../areas/AnalysisAreaUtil ../attachments/AttributesUtil ../../../core/supportClasses/map/Projector ../../../countryConfig esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l,q,t){function r(u){return(u=u&&e.id.findCredential(u)||e.id.credentials[0])&&u.token}return w(null,{enrichAreas:function(u){var z={};return m(this._analysisAreasToStudyAreas(u.analysisAreas,u.countryID,u.comparisonLevels),function(A){z.studyAreas=A;u.report?z.analysisVariables=[{itemid:u.report.reportID,url:u.report.portalUrl,token:r(u.portalUrl),outFields:["*"]}]:u.fields&&(z.analysisVariables=u.fields);return this._doRunTask(z,u,"enrich")}.bind(this)).then(this._handleFeatureSetsRequest.bind(this))},
createReport:function(u){var z={f:"bin",format:"xml",reportfields:{}};z.report={itemid:u.report.reportID,url:u.report.portalUrl,token:r(u.portalUrl)};return m(this._analysisAreasToStudyAreas(u.analysisAreas,u.countryID,null,u.getAttributes),function(A){z.studyAreas=A;return this._doRunTask(z,u,"createReport")}.bind(this))},_analysisAreasToStudyAreas:function(u,z,A,B){var E=this;A=A&&A.map(function(F){return{layer:F}});return k(u.map(function(F,G){if(F.geographies&&F.geographies.length){var H=E._studyAreaFromGeographies(F.geographies,
z,!0);F.feature&&F.feature.attributes&&(H.attributes=p.mixin({},H.attributes,F.feature.attributes))}else H={attributes:p.mixin({},F.feature.attributes),geometry:F.feature.geometry.toJson()};A&&(H.comparisonLevels=A);return k([E._getStorePointForArea(F),B&&B(F)]).then(function(v){var D=v[0];v=v[1];H.attributes=H.attributes||{};D&&(H.attributes.STORE_LAT=H.attributes.STORE_LAT||D.STORE_LAT,H.attributes.STORE_LONG=H.attributes.STORE_LONG||D.STORE_LONG);H.attributes.STORE_ID=G+"";v&&v.forEach(function(I){H.attributes[I.name]=
h.formatAttributeValueForStudyArea(I)});return H})}))},_getStorePointForArea:function(u){if(u=u.location&&u.location.geometry||u.buffer&&u.buffer.point){u=u instanceof c?u:new c(u);var z=f.geometryToLatLong(u);return z?z:m(l.projectGeometries(u,new b(t.WGS_84_WKID)),function(A){return f.geometryToLatLong(A)})}},createFeatureForGeographies:function(u,z){return this._createFeaturesForGeographies(u,z,!0).then(function(A){return A[0]})},createFeaturesForGeographies:function(u,z){return this._createFeaturesForGeographies(u,
z,!1)},_createFeaturesForGeographies:function(u,z,A){u={returnGeometry:!0,outSR:z.outSR||new b(t.WEB_MERCATOR_WKID),studyAreas:A?[this._studyAreaFromGeographies(u,z.countryID,!0,z.generalizationLevel)]:u.map(function(B){return this._studyAreaFromGeographies([B],z.countryID,!1,z.generalizationLevel)},this),dataCollections:["GlobalIntersect"]};return this._doRunTask(u,z,"enrich").then(this._handleFeatureSetsRequest.bind(this))},_studyAreaFromGeographies:function(u,z,A,B){var E={sourceCountry:z,layer:null,
ids:null},F=null,G=[],H;u.forEach(function(v){if(!v||!v.id)throw Error("Wrong geography.");var D=v.levelId;if(D)if(!F)F=D;else if(A&&F!==D)throw Error("Geographies have different level IDs.");G.push(v.id);v.sourceCountry&&(E.sourceCountry=v.sourceCountry);v.hierarchy&&(E.hierarchy=v.hierarchy);v.attributes&&(H=p.mixin(H||{},v.attributes))});E.layer=F;E.ids=A?[G.join(",")]:G;E.attributes=H;E.generalizationlevel=B;return E},createFeaturesForBuffer:function(u,z){z=z||{};var A={bufferUnits:u.units,bufferRadii:u.radii||
[u.radius],areaType:u.areaType||"RingBuffer"};"NetworkServiceArea"===A.areaType&&(A.travelMode=u.travelMode,A.networkOptions=u.networkOptions);u=u.point||u.polyline;A={returnGeometry:!0,outSR:z.outSR||u.spatialReference||new b(t.WEB_MERCATOR_WKID),dataCollections:["GlobalIntersect"],studyAreasOptions:A,studyAreas:[{geometry:u.toJson?u.toJson():u}]};return this._doRunTask(A,z,"enrich").then(this._handleFeatureSetsRequest.bind(this))},createFeaturesForBuffers:function(u,z){function A(F){var G=F.point||
F.polyline;return JSON.stringify(G.toJson?G.toJson():G)+";"+F.units+";"+F.areaType+";"+F.travelMode+";"+JSON.stringify(F.networkOptions)}var B={},E=[];u.forEach(function(F){var G=A(F),H=B[G],v=!1;if(H){var D=F.radii||[F.radius];H.radii.some(function(I){return-1!==D.indexOf(I)})&&(H=null,v=!0)}H||(H=p.clone(F),v||(B[G]=H),delete H.radius,H.radii=[],E.push(H));F.radii?H.radii=H.radii.concat(F.radii):H.radii.push(F.radius)});return k(E.map(function(F){return this.createFeaturesForBuffer(F,z)},this)).then(function(F){var G=
[];F.forEach(function(H){G=G.concat(H)});return G})},_doRunTask:function(u,z,A){u=p.mixin({useData:{sourceCountry:z.countryID,hierarchy:z.hierarchy||q.getHierarchyID()},forStorage:!1},u);return d[A](u)},_handleFeatureSetsRequest:function(u){return(new a(u[0])).features}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil":function(){define(["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],
function(w,p,m,k){var e={composeAttributesFromFieldInfos:function(b,a){return b&&b.filter(function(c){return c.visible}).map(function(c){var d=c.fieldName,f=c.label,h=c.format&&c.format.places,l=c.format&&c.format.digitSeparator,q=c.format&&c.format.dateFormat,t=a[c.fieldName];c=(c=c.format)&&c.dateFormat?"esriFieldTypeDate":c&&void 0!==c.places?0<c.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:d,alias:f,places:h,digitSeparator:l,dateFormat:q,value:t,type:c,
domain:null,length:void 0}})},formatAttributeValue:function(b,a){a=a||{};var c=a.hasOwnProperty("unavailableDataValue")?a.unavailableDataValue:"";if(!b||null===b.value||void 0===b.value)return c;if(!a.skipFormattedValue&&b.formattedValue&&b.formattedValue!==c)return b.formattedValue;var d=b.domain&&"codedValue"===b.domain.type?new p(b.domain):null;d?(a=d.getName(b.value))||(a=b.value+""):"esriFieldTypeString"===b.type?a=b.value:"esriFieldTypeDate"===b.type?a=m.formatDateShort(b.value):(a=a.format,
a=k.formatNumber(b.value,{places:a&&void 0!==a.decimals?a.decimals:b.places,noSeparator:a&&void 0!==a.useThousandsSeparator?!a.useThousandsSeparator:!1===b.digitSeparator,preserveTrailingZeroes:!0}));return null===a||void 0===a?c:a},formatAttributeValueForStudyArea:function(b){var a;b&&null!==b.value&&void 0!==b.value||(a=!0);a||(a=b.domain&&"codedValue"===b.domain.type||"esriFieldTypeDate"===b.type);return a?e.formatAttributeValue(b):b.value},getAttributeTypeForStudyArea:function(b){return"esriFieldTypeDate"===
b.type?"esriFieldTypeString":b.type},attributeToJson:function(b){return{name:b.name,alias:b.alias,type:b.type,value:b.value,domain:b.domain&&(b.domain.toJson?b.domain.toJson():w.clone(b.domain)),places:b.places,digitSeparator:b.digitSeparator,dateFormat:b.dateFormat,length:b.length}},attributeFromJson:function(b){return{name:b.name,alias:b.alias,type:b.type,value:b.value,domain:b.domain,places:b.places,digitSeparator:b.digitSeparator,dateFormat:b.dateFormat,length:b.length}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/Projector":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/ProjectionUtil"],function(w,p,m,k,e){function b(a,c){return e.projectGeometries(a,c)}w=w(null,{_pendingInfos:null,_isBusy:!1,constructor:function(){this._pendingInfos=[]},addForProjection:function(a,c){if(this._isBusy)throw Error("Can't interrupt the current projection process.");a=a&&a.geometry||a;var d=new p;this._pendingInfos.push({geom:a,mapOrSR:c,dfd:d,index:this._pendingInfos.length});
return d.promise},project:function(){function a(t){var r=f[t];return m(b(r.geoms,r.mapOrSR),function(u){u.forEach(function(z,A){A=r.indexMap[A];l[A]=z;d[A].resolve(z)})})}var c=this;if(this._isBusy)throw Error("Can't interrupt the current projection process.");this._isBusy=!0;var d=[],f={};this._pendingInfos.forEach(function(t){d.push(t.dfd);var r=t.geom.type+";"+t.geom.spatialReference.wkid+";"+e.getSpatialReference(t.mapOrSR).wkid;r=f[r]=f[r]||{geoms:[],indexMap:{},mapOrSR:t.mapOrSR};r.geoms.push(t.geom);
r.indexMap[r.geoms.length-1]=t.index});this._pendingInfos.length=0;var h=[],l=[],q;for(q in f)h.push(a(q));return k(h).then(function(){c._isBusy=!1;return l})}});w.needProject=function(a,c){a=a&&a.geometry||a;return a.spatialReference&&a.spatialReference.wkid!==e.getSpatialReference(c).wkid};w.projectGeometries=b;return w})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/RunReportTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./parsers/DataXMLParser ./EnrichAreasTask ../areas/AnalysisAreaJsonUtil esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l){var q={_getCache:function(){return f.get("CreateReportResultCache")},_buildKey:function(r){return[r.countryID,r.hierarchy,JSON.stringify(c.areasToJson(r.analysisAreas,{excludeInfoTemplate:!0})),r.report.reportID,r.report.portalUrl,r.report.modified].join("_")},getCopy:function(r){r=this._buildKey(r);return(r=this._getCache()[r])&&p.clone(r)},copyAndPut:function(r,u){r=this._buildKey(r);this._getCache()[r]=u&&p.clone(u)},getResults:function(){var r=[],u;for(u in this._getCache())r.push(this._getCache()[u]);
return r}},t={execute:function(r){var u=r.cacheResult&&q.getCopy(r);if(u)return e(u);u=d.splitArrayToBunches(r.analysisAreas,10);var z;return m(u.map(function(A){function B(){var E=p.mixin({},r,{analysisAreas:A});E.getAttributes=function(F){if(!r.attachmentsStore)return null;if(!r.attachmentsStore.supportsMultipleAreas&&z)return z;r.attachmentsStore.supportsMultipleAreas&&r.attachmentsStore.setCurrentAnalysisAreaIndex(r.analysisAreas.indexOf(F));return e(r.attachmentsStore.getAttributes(),function(G){z=
z||G;return G})};return(new a).createReport(E).then(function(F){var G=F&&F.taskID;F=F&&F.result;try{l.emulateErrors.createReportError&&(F={error:{message:"Error test: something crashed on the server!"}});if(F&&"object"===typeof F)var H=F.error;if(!H&&"string"===typeof F&&-1!==F.indexOf("{"))try{var v=JSON.parse(F);H=v&&v.error}catch(I){}if(H)if(h.runReportTask.ignoreErrors)F=[];else return(new k).reject(H);var D=b.parse(F);return{taskID:G,areaData:D.areaData,reportInfo:D.reportInfo,originalXML:F,
error:H}}catch(I){return(new k).reject(I)}})}return e(B(),function(E){return!E||E.error?h.runReportTask.secondAttempt?B():E:E},function(E){return h.runReportTask.secondAttempt?B():(new k).reject(E)})})).then(function(A){var B={taskIDs:[],areaData:[],reportInfo:null,originalXMLs:[],errors:[]};A.forEach(function(E){B.taskIDs.push(E.taskID);B.originalXMLs.push(E.originalXML);E.error&&B.errors.push(E.error);B.areaData=B.areaData.concat(E.areaData);B.reportInfo=E.reportInfo});r.cacheResult&&!B.errors.length&&
q.copyAndPut(r,B);return B})}};w=w(null,{execute:function(r){console.log("Creating a new report...");return t.execute(r)}});w.CreateReportResultCache=q;return w})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/DataXMLParser":function(){define("esri/units esri/dijit/geoenrichment/utils/FieldUtil esri/dijit/geoenrichment/utils/JsonXmlConverter ../../data/AreaDataUtil ../../../../core/supportClasses/DocumentOptions ./AttrUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(w,p,m,k,e,b,a,c){function d(t){return t.innerHTML?t.innerHTML:t.tags&&t.tags.length&&t.tags[0].text||""}function f(t){var r={Title:null,Subtitle:null,country:null,hierarchyId:null,exportSettings:null};t.tags&&t.tags.forEach(function(u){if("ReportTitle"===u.name)r.Title=d(u);else if("ReportName"===u.name)r.Name=d(u);else if("ReportTitle2"===u.name)r.Subtitle=d(u);else if("CurrencyFormat"===u.name){u=d(u);var z=u.split(";")[0].replace("0","").trim();r.country={id:null,currencySymbol:z,currencyFormat:u}}else if("ReportLayout"===
u.name){var A=r.exportSettings={};u.tags&&u.tags.forEach(function(B){if("Options"===B.name&&B.attributes)A.addHeader=!!B.attributes.header,A.addDataSource=!!B.attributes.dataSource,A.addFooter=!!B.attributes.footer;else if("Page"===B.name&&B.attributes){A.pageSettings={};var E=B.attributes;if(E.width&&E.height&&E.units){B=Number(E.width);var F=Number(E.height);if(E=E.units===w.MILLIMETERS?"mm":E.units===w.CENTIMETERS?"cm":E.units===w.INCHES?"in":E.units===w.POINTS?"pt":null)A.pageSettings.pagesize=
e.combineCustomSizeString(B,F,E)}else E.size&&E.orientation&&(A.pageSettings.pagesize=E.size.toLowerCase(),A.pageSettings.orientation=E.orientation.toLowerCase())}})}});r.exportSettings&&r.Subtitle&&(r.exportSettings.reportSubtitle=r.Subtitle);return r}function h(t){function r(A){A.tags&&A.tags.forEach(function(B){var E=B.attributes.AREA_ID,F=z.areaIdToAttachmentsInfo[E];F||(F={attributes:null,notes:null,images:null},z.areaIdToAttachmentsInfo[E]=F);B.tags&&B.tags.forEach(function(G){"Attributes"===
G.name&&G.tags&&(F.attributes=G.tags.map(function(H){return{name:H.attributes.Name,alias:H.attributes.Alias,type:H.attributes.Type,value:p.isNumericField(H.attributes.Type)?Number(H.attributes.Value):H.attributes.Value}}));"Notes"===G.name&&G.tags&&(F.notes=G.tags&&G.tags.map(function(H){return{text:H.attributes.Text}}));"Images"===G.name&&G.tags&&(F.images=G.tags&&G.tags.map(function(H){return{url:H.attributes.Source,thumbnail:H.attributes.Thumbnail,description:H.attributes.Description,imageViewType:null}}))})})}
function u(A){var B;z.stdLevels=A.tags&&A.tags.map(function(E,F){B=B||E.attributes.Id.substr(0,E.attributes.Id.indexOf("."));return{id:E.attributes.Id,name:E.attributes.Caption,isWholeCountry:E.attributes.IsWholeCountry||0===F}});"US"===B&&(z.countrId="US");"CAN"===B&&(z.countrId="CA")}var z={areaIdToAttachmentsInfo:{},stdLevels:null,countrId:null};t.tags&&t.tags.forEach(function(A){"StudyAreas"===A.name?r(A):"StandardGeographyLevels"===A.name&&u(A)});return z}function l(t,r){function u(F){if(F=function(H){var v=
{},D,I;H.tags.forEach(function(N){var T=d(N),M=T,V=E[H.name][N.name];"string"===(V&&V.type)?T=String(T):(T=Number(T),isNaN(T)&&(T=M),c.emulateErrors.createReportNaN&&(T=NaN),c.emulateErrors.createReportNull&&(T=null));r&&(T=r(N.name,T,H.name));void 0===v[N.name]&&(v[N.name]=T);"AREA_ID"===N.name&&(K=T);"IDFNDFIELD"===N.name&&(D=T);"STORE_ID"===N.name&&(I=T)});var K=K||D;if(!K&&!I)return null;var S;!K&&I&&(S=Number(I));K&&void 0===A[K]&&(A[K]=B++);b.cleanUpAttrs(v,a.isPlayerOnServer?{STORE_ID:1,AREA_ID:1}:
null);return{name:H.name,attrs:v,areaIndex:void 0!==S?S:A[K]}}(F)){var G=z[F.areaIndex]=z[F.areaIndex]||{};G[F.name]?G[F.name].comparisonLevels.push(F.attrs):G[F.name]=k.createCalculator(F.attrs)}}var z=[],A={},B=0,E;t.tags[0].tags.forEach(function(F){"xs:schema"===F.name?E=q.parseSchema(F):u(F)});return{areaData:z,schemaParseResult:E}}var q={parseSchema:function(t){var r={};t.tags.forEach(function(u){"xs:element"===u.name&&u.attributes&&"ReportData"===u.attributes.name&&m.queryJson(u,"xs:element").filter(function(z){return!!z.tags}).forEach(function(z){var A=
r[z.attributes.name]={};m.queryJson(z,"xs:element").forEach(function(B){A[B.attributes.name]={type:"xs:string"===B.attributes.type?"string":"number",alias:B.attributes["msdata:Caption"]||"",vintage:B.attributes["msdata:Vintage"]||"",source:B.attributes["msdata:Source"]||""}})})});return r}};return{parse:function(t,r){return this._parseDataXmlJson(m.parseXml(t,{saveInnerHTML:!0}),r)},_parseDataXmlJson:function(t,r){if(!t||!t.tags||2>t.tags.length)return[];var u,z,A,B;t.tags.forEach(function(E){"ReportInfo"===
E.name?u=f(E):"ReportArea"===E.name?z=h(E):"ReportData"===E.name&&(E=l(E,r),B=E.areaData,A=E.schemaParseResult)});c.logData&&(console.log("DataXMLPareser.js \x3d\x3e areaData:"),console.log(B));z&&(u.country.id=z.countrId,u.areaIdToAttachmentsInfo=z.areaIdToAttachmentsInfo,u.stdLevels=z.stdLevels);u.variables=A;return{reportInfo:u,areaData:B}}}})},"esri/dijit/geoenrichment/utils/JsonXmlConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(w,p){function m(d,f,h,l){return c(h,
l)+"\x3c"+d+(f?a(f):"")+"\x3e"+(l?"\n":"")}function k(d,f,h){return c(f,h)+"\x3c/"+d+"\x3e"+(h?"\n":"")}function e(d,f,h,l){return c(h,l)+"\x3c"+d+(f?a(f):"")+" /\x3e"+(l?"\n":"")}function b(d,f,h){d=p.encodeXML(d,!1);return c(f,h)+d+(h?"\n":"")}function a(d){var f="",h;for(h in d){var l=d[h];Array.isArray(l)&&(l=l.join(";"));void 0===l||null===l||"number"===typeof l&&isNaN(l)||(f+=" "+h+'\x3d"'+p.encodeXML(l,!0)+'"')}return f}function c(d,f){if(!f)return"";f="";for(var h=0;h<d;h++)f+="     ";return f}
return w(null,{parseJson:function(d,f){function h(t,r){t.text||"#text"===t.name?q+=b(t.text,r,l):t.name&&(t.tags&&t.tags.length?(q+=m(t.name,t.attributes,r,l),t.tags&&t.tags.forEach(function(u){h(u,r+1)}),q+=k(t.name,r,l)):q+=e(t.name,t.attributes,r,l))}var l=f&&f.prettify,q="";f&&f.addDocumentOptions&&(q+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');h(d,0);return q=decodeURIComponent(encodeURIComponent(q).replace("%19",""))},parseXml:function(d,f){function h(z,A){z.name=A.nodeName;f.saveInnerHTML&&
(z.innerHTML=A.innerHTML);if(A.attributes&&A.attributes.length){z.attributes={};for(var B=0;B<A.attributes.length;B++){var E=A.attributes[B],F=E.value;if(!0===F||"true"===F)F=!0;else if(!1===F||"false"===F)F=!1;else if(l&&F){var G=Number(F);isNaN(G)||(F=G)}z.attributes[E.nodeName]=F}}if(A.childNodes&&A.childNodes.length)for(z.tags=[],B=0;B<A.childNodes.length;B++){if(F=E=A.childNodes[B],"#text"!==F.nodeName||(q?F.nodeValue.trim():F.nodeValue))F={},z.tags.push(F),h(F,E)}else"#text"===A.nodeName&&(delete z.name,
z.text=p.decodeXML(A.nodeValue))}f=f||{};var l=f.parseNumbers,q=f.ignoreWhiteSpacedTextNodes;q=void 0===q?!0:q;var t={};d=(new DOMParser).parseFromString(d,"text/xml").childNodes;for(var r=0;r<d.length;r++)if(1===d[r].nodeType){var u=d[r];break}u&&h(t,u);return t},queryTopJson:function(d,f){return this.queryJson(d,f,!0)},queryJson:function(d,f,h){function l(t,r){t.tags&&t.tags.forEach(function(u){(f.test?f.test(u.name):u.name===f)&&q.push(u);h&&0===r||l(u,r+1)})}var q=[];l(d,0);return q},traverseJson:function(d,
f){function h(q){l||(!0===f(q)?l=!0:q.tags&&q.tags.forEach(h))}var l=!1;h(d)},getInnerHTML:function(d){return d.innerHTML?d.innerHTML.trim():this.parseJson(d).replace(/^<[^<]*>/,"").replace(/<\/[^<]*>$/,"").trim()},_IS_RICH_RE:/<.+>.*<\/.+>|<br\s*\/>|<\/br>/,_UNRICH_RE:/<.*?>/g,isRichText:function(d){return(d=String(d))&&this._IS_RICH_RE.test(d)},unrichHTML:function(d){if(!d)return"";d=p.decodeXML(String(d).trim()).replace(this._UNRICH_RE,"");0===d.indexOf("\x3c")&&-1!==d.indexOf("\x3e")&&(d="");
return d}})()})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaDataUtil":function(){define(["dojo/_base/lang","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../../../_devConfig"],function(w,p,m){var k={getAreaDataValue:function(e){function b(E){!1!==z&&(A=E[z]);void 0===A&&(A=E[c])}function a(){if(q)b(q);else{var E=f[h];E&&b(E.data)}}var c=e.fieldName,d=e.fieldData,f=e.areaDataObject,h=e.calculatorName,l=e.featureIndex,q=e.featureAttributes,
t=e.ignoreMetadata,r=e.isMultiFeature;if(!m.showAreaDataUtilUndefinedData&&c){var u=c.indexOf("."),z=!1;-1!==u&&(z=c.substr(u+1));h||-1===u||(h=c.substr(0,u));l=void 0===l?0:Number(l)||0;if((f=e.areaDataObject||d.areaData[l])||q){var A;r&&h===p.AREA_ATTRIBUTES_CALCULATOR_NAME&&!t&&d&&b(d.metadata);void 0===A&&a();if(h)return A;void 0===A&&!t&&d&&b(d.metadata);if(void 0===A&&!q)for(var B in f)if(b(f[B].data),void 0!==A)break;return A}}},getAreaDataObjectCalculator:function(e,b,a){if(!e)return null;
var c=e[b];!c&&a&&(c=e[b]=k.createCalculator());return c},createCalculator:function(e,b){return{data:e||{},comparisonLevels:b||[]}},combineAreaDataObjectCalculators:function(e,b,a){var c=[],d=[];e.forEach(function(f){if(f=k.getAreaDataObjectCalculator(f,b))c.push(f.data),d=d.concat(f.comparisonLevels)});a&&a.removeDuplicates&&(d=k.removeDuplicacatedCalcData(d));return{thisAreas:c,comparisonLevels:d}},removeDuplicacatedCalcData:function(e){if(!e.length)return e;var b=[],a={},c=Object.keys(e[0]);e.forEach(function(d){var f=
function(h){var l="";c.forEach(function(q){l+=h[q]+";"});return l}(d);a[f]||(a[f]=!0,b.push(d))});return b},setAreaDataValue:function(e,b,a,c,d){d=void 0===d?0:Number(d)||0;k.setAreaDataObjectValue(e,b,a[d],c)},setAreaDataObjectValue:function(e,b,a,c){a&&c&&null!==b&&void 0!==b&&(k.getAreaDataObjectCalculator(a,c,!0).data[e]=b)},mergeAreaData:function(e,b){b.forEach(function(a,c){(c=e[c])&&k.mergeAreaDataObjects(c,a)})},mergeAreaDataObjects:function(e,b){for(var a in e){var c=e[a],d=b[a];d?c.comparisonLevels.length!==
d.comparisonLevels.length?console.log("Error: can't merge calculators with different comparison levels!"):(w.mixin(d.data,c.data),c.comparisonLevels.forEach(function(f,h){w.mixin(d.comparisonLevels[h],f)})):b[a]=c}console.log("AreaDataUtil.js merging area data \x3d\x3e areaData");console.log(b)}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil":function(){define(["esri/dijit/geoenrichment/utils/MaskUtil","./FieldLibrary"],function(w,
p){var m={SCRIPT_PREFIX:"",DEFAULT_SCRIPT_NAME:"Custom",TOTAL_SCRIPT_NAME:"Total",AVG_SCRIPT_NAME:"Average",SCRIPT_PREFIX_RE:/^SCRIPT_/i,FIRST_SYMBOL_IS_NUMBER_RE:/^[0-9]/,DATA_COLLECTIONS_CALCULATOR_NAME:"dataCollectionsCalculator",MAPS_CALCULATOR_NAME:"mapsCalculator",UNITED_MAPS_CALCULATOR_NAME:"unitedMapsCalculator",AREA_ATTRIBUTES_CALCULATOR_NAME:"headers",ENRICHED_DATA_NO_LEVELS:"enrichFieldData_noLevels",SCRIPTS_CALCULATOR_NAME:"scripts",createFieldNameFromSource:function(k,e){if(!k)return"";
var b="";k.isSiteAttribute?b=k.attribute.name:k.isChartAttribute?b=k.id:k.isWebMap?b=k.webMapFieldName||k.fieldName:(k=(k.fullName||k).replace(/_|\.|\s/g,""),e=e||"n",k+="n"===e?"":"_"+e,m.FIRST_SYMBOL_IS_NUMBER_RE.test(k)&&(k="_"+k),b=k.toUpperCase());return m._validateName(b)},createFieldNameFromScript:function(k){k=k.name;m.SCRIPT_PREFIX_RE.test(k)&&(k=k.replace(m.SCRIPT_PREFIX_RE,""));return m._validateName(m.SCRIPT_PREFIX+k.replace(/\.|-/g,""))},_validateName:function(k){return m._checkXMLValidName(m._maskUnicodeInName(k))},
_XML_MASK_NAME_RE:/(_X)(\d\d\d\d)/i,_checkXMLValidName:function(k){return m._XML_MASK_NAME_RE.test(k)?k.replace(m._XML_MASK_NAME_RE,"$1_$2"):k},_XML_UNICODE_RE:/&#x|;/ig,_maskUnicodeInName:function(k){return w.maskWithUnicodeXML(k).replace(m._XML_UNICODE_RE,"")},renderScriptName:function(k){return k.replace(m.SCRIPT_PREFIX_RE,"")},provideQualifiedFieldInfoTemplateName:function(k,e){k&&(k.templateName=e?e+"."+k.name:k.isWebMap?m.AREA_ATTRIBUTES_CALCULATOR_NAME+"."+k.name:k.isSiteAttribute?m.AREA_ATTRIBUTES_CALCULATOR_NAME+
"."+k.name:m.DATA_COLLECTIONS_CALCULATOR_NAME+"."+k.name)},getCalculatorName:function(k){return k&&k.templateName&&k.templateName.substr(0,k.templateName.indexOf("."))},isAreaAttributesFieldInfo:function(k){return m.getCalculatorName(k)===m.AREA_ATTRIBUTES_CALCULATOR_NAME},updateCalculatorName:function(k,e){k&&(k.hasVariable||k.script)&&(k.templateName=e+k.templateName.substr(k.templateName.indexOf(".")))},refreshNameAndTemplateName:function(k){k.statefulName&&k.fullName&&(k.name=m.createFieldNameFromSource(k,
k.statefulName.charAt(0)),k.templateName=k.templateName.substr(0,k.templateName.lastIndexOf(".")+1)+k.name)},getFieldInfoAlias:function(k){return k?k.script?k.script.alias:k.hasVariable||k.isMissing?k.alias:p.getFieldLabel(k.name):null},getTemplateNameParts:function(k){if(!k)return null;var e=k.indexOf(".");return-1===e?{calcName:null,fieldName:k}:{calcName:k.substr(0,e),fieldName:k.substr(e+1)}}};return m})},"esri/dijit/geoenrichment/utils/MaskUtil":function(){define([],function(){function w(p,m){return"string"!==
typeof p?p:String(p).replace(/[^\x20-\x7f]/g,function(k){k=k.charCodeAt(0).toString(16).toUpperCase();return m(k)})}return{maskWithUnicode:function(p){return w(p,function(m){return"\\u000".substr(0,6-m.length)+m})},maskWithUnicodeXML:function(p){return w(p,function(m){return"\x26#x000".substr(0,7-m.length)+m+";"})},removeUnicode:function(p,m){return w(p,function(k){return m||""})},removeXMLMasks:function(p,m){return p.replace(/&#x.*?;/g,m||"")}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","../themes/ThemeLibrary"],function(w,p,m){var k={},e={a:[[841,1189],[594,841],[420,594],[297,420],[210,297],[148,210],[105,148],[74,105],[52,74],[37,52],[26,37]],b:[[1E3,1414],[707,1E3],[500,707],[353,500],[250,353],[176,250],[125,176],[88,125],[62,88],[44,62],[31,44]],c:[[917,1297],[648,917],[458,648],[324,458],[229,324],[162,229],[114,162],[81,114],[57,81],[40,57],[28,40]],letter:[216,279],legal:[216,356],tabloid:[279,432],ledger:[432,279]};k.PAPER_SIZES=
e;var b={};"a3 a4 a5 b4 b5 c4 c5 letter legal tabloid ledger".split(" ").forEach(function(a){var c=2===a.length?e[a[0]][a[1]]:e[a];b[a]={portrait:{w:p.mmToIn(c[0]),h:p.mmToIn(c[1])},landscape:{w:p.mmToIn(c[1]),h:p.mmToIn(c[0])}}});k.SIZE_TYPE_TO_DIM_HASH=b;k.hasStandardSize=function(a){return b[a]};k.getSupportedPageSizes=function(){var a=[],c;for(c in e)1===c.length?e[c].forEach(function(d,f){a.push(c+f)}):a.push(c);return a};k.getPageDim=function(a,c,d){b[a]?a=b[a][c||"portrait"]:(a=a.split("x"),
a={w:p.ptToIn(Number(a[0])),h:p.ptToIn(Number(a[1]))});d&&(a=w.clone(a),p.roundNDigitsObj(a,d.places));return a};k.getPageBox=function(a){if(!a)return null;var c=k.getPageDim(a.pagesize,a.orientation),d=p.inToPx(c.w);c=p.inToPx(c.h);return{w:d,h:c,contentW:d-(a.left||0)-(a.right||0),contentH:c-(a.top||0)-(a.bottom||0)}};k.combineCustomSizeString=function(a,c,d){return p.convert(a,d,"pt",5)+"x"+p.convert(c,d,"pt",5)};k.getDefaultDocumentOptions=function(a){return w.mixin({pagesize:"letter",orientation:"portrait",
left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.12,fontSize:10,fontFamily:m.DEFAULT_FONT_FAMILY_CLASSIC},a)};k.getDefaultDocumentOptionsGraphicReport=function(a){return w.mixin({pagesize:"letter",orientation:"landscape",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",fontSize:10,fontFamily:m.DEFAULT_FONT_FAMILY_GRAPHIC},a)};k.getClosestStandrdSizes=function(a,c){function d(q){var t=q.w/f.w;q=q.h/f.h;return Math.max(1-(1<t?1/t:t),1-(1<q?1/q:q))}c=void 0===c?.4:c;var f=k.getPageDim(a.pagesize,
a.orientation);a=[];for(var h in b){var l=b[h];a.push({pagesize:h,orientation:"portrait",score:d(l.portrait)});a.push({pagesize:h,orientation:"landscape",score:d(l.landscape)})}a=a.filter(function(q){return q.score<=c});a.sort(function(q,t){return q.score-t.score});return a};k.tryGetStandardPageSize=function(a,c){function d(r){var u="portrait"===c?1:0;return r["portrait"===c?0:1]===h&&r[u]===l}if(k.SIZE_TYPE_TO_DIM_HASH[a])return a;var f=a.split("x"),h=p.convert(Number(f[0]),"pt","mm",0),l=p.convert(Number(f[1]),
"pt","mm",0),q;for(q in k.PAPER_SIZES)if(f=k.PAPER_SIZES[q],1===q.length){if(f.some(function(r,u){if(d(r))return t=q+u,!0}))break}else if(d(f)){var t=q;break}return t||a};return k})},"esri/dijit/geoenrichment/utils/PageUnitsConverter":function(){define(["dojo/_base/lang"],function(w){function p(e,b,a){a&&(e=w.mixin({},e));for(var c in e){var d=e[c];null!==d&&""!==d&&"boolean"!=typeof d&&("object"==typeof d?e[c]=p(d,b,a):(d=Number(d),isNaN(d)||(e[c]=b(d))))}return e}var m={},k="px pt mm cm in twip".split(" ");
k.forEach(function(e){k.forEach(function(b){if(e!==b){var a=e+"To"+b.charAt(0).toUpperCase()+b.substr(1);m[a]=function(c,d){return m.convert(c,e,b,void 0!==d?d:5)}}})});m.convert=function(e,b,a,c){e=Number(e)||0;switch(b){case "in":e*=72;break;case "px":e*=.75;break;case "mm":e=e/25.4*72;break;case "cm":e=e/2.54*72;break;case "twip":e/=20}switch(a){case "in":e/=72;break;case "px":e/=.75;break;case "mm":e=e/72*25.4;break;case "cm":e=e/72*2.54;break;case "twip":e=Math.round(20*e)}void 0!==c&&(e=m.roundNDigits(e,
c));return e};m.pxToPtObj=function(e,b){return p(e,m.pxToPt,!b)};m.ptToPxObj=function(e,b){return p(e,m.ptToPx,!b)};m.roundNDigits=function(e,b){return Number(Number(e).toFixed(b))};m.roundNDigitsObj=function(e,b){for(var a in e){var c=e[a];"object"==typeof c?m.roundNDigitsObj(c,b):e[a]=m.roundNDigits(c,b)}};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeLibrary":function(){define("dojo/_base/lang ./PageBorderStyles ../charts/utils/ChartLineStyles ./ReportThemes ./ThemeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(w,p,m,k,e,b,a){function c(q){q=q||{};q=q.defaultFontFamilty||"Avenir Next";return{backgroundColor:"#FFFFFF",padding:5,icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},iconBarBackground:{backgroundColor:"#AAAAAA",borderColor:"#AAAAAA"},titleLine:{color:"#A8A7A8"},titleStyle:{fontFamily:q,color:"#828282",fontSize:16,backgroundColor:"transparent"},variableLabelStyle:{fontFamily:q,color:"#56a5d8",fontSize:24,backgroundColor:"transparent"},variableLabelStyleHighlighted:{fontFamily:q,
fontSize:24},variableLabelStyleContrast:{fontFamily:q,fontSize:24},variableDescriptionStyle:{fontFamily:q,color:"#828282",fontSize:13,backgroundColor:"transparent"}}}function d(){return{style:p.ALL,lineStyle:"dashed",thickness:1,color:"#b2b2b2"}}function f(q){q=q||{};var t=q.defaultFontFamilty||"Avenir Next",r=q.defaultFontSize||13;return{document:{fontSize:r,fontFamily:t,backgroundImage:{data:null,position:"center",repeat:!1,scale:!0,opacity:1,size:null},border:d()},icon:{backgroundColor:"#56a5d8"},
highlightedIcon:{backgroundColor:"#D6851A"},table:{dataTablePadding:5,tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},chart:{renderSingleDataSeriesWithSameColor:!0,outlineStyle:m.SOLID,titleStyle:{fontFamily:t,fontSize:16},xAxis:{gridLinesStyle:m.SOLID,axisStyle:{fontFamily:t,fontSize:9},titleStyle:{fontFamily:t,fontSize:r}},yAxis:{gridLinesStyle:m.SOLID,baseLineStyle:m.SOLID,axisStyle:{fontFamily:t,fontSize:9},titleStyle:{fontFamily:t,fontSize:r}},dataLabelsStyle:{fontFamily:t,
fontSize:10},legendStyle:{fontFamily:t,fontSize:10},minMaxLegend:{titleStyle:{fontFamily:t,fontSize:10},minVariableLabelStyle:{fontFamily:t,fontSize:16},maxVariableLabelStyle:{fontFamily:t,fontSize:16}},icon:{backgroundColor:"#56a5d8"},line:{},column:{},bar:{},pie:{},donut:{},ring:{},pictureColumn:{},pictureBar:{},gauge:{dataLabelStyle:{fontFamily:t}},waffle:{dataValueStyle:{fontFamily:t,fontSize:30},dataLabelStyle:{fontFamily:t,fontSize:16}},tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},
infographic:{staticInfographic:c(q)}}}var h={DEFAULT_FONT_FAMILY_CLASSIC:"Verdana",DEFAULT_FONT_FAMILY_GRAPHIC:"Avenir Next",DEFAULT_FONT_SIZE_CLASSIC:10,DEFAULT_FONT_SIZE_GRAPHIC:13,CHART_DATA_FONT_SIZE:10,defaultStaticInfographic:c(),standardRamps:[{id:k.CLASSIC,colors:["#FFFFFF","#13729F","#DEA429"],additional:{table:{overrideStyles:{Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"},ReportTitle:{color:"#FFFFFF",backgroundColor:"#00436D"},TableHeader:{color:"#4C4C4C",backgroundColor:"#CCCCCC"},
GreyText:{color:"#AAAAAA",backgroundColor:"#FFFFFF"},BlueText:{color:"#00436D",backgroundColor:"#FFFFFF"},AlternatingRow:{color:"#4C4C4C",backgroundColor:"#EEEEEE"}}},chart:{renderSingleDataSeriesWithSameColor:!1,colors:"#13729F #DEA429 #6A9741 #A75523 #456E35 #D7DF22 #868686 #3C546D #829AB3 #DEDEDE #03406E #B1B1B1".split(" ")}}},{id:k.GRAPHIC,colors:["#FFFFFF","#56A5D8","#D6851A"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}},
{id:"red",colors:["#d3d3d3","#8b4513","#ff4500"],additional:{chart:{colors3series:["#8b4513","#F1948A","#E74C3C"],colors:"#8b4513 #F1948A #EC7063 #E74C3C #CB4335 #B03A2E #943126 #78281F".split(" ")}}},{id:"dark",colors:["#6A6A6A","#FFFFFF","#EEEEEE"],additional:{chart:{colors3series:["#FFFFFF","#CACFD2","#A6ACAF"],colors:"#FFFFFF #D7DBDD #CACFD2 #BDC3C7 #A6ACAF #909497 #797D7F #626567 #4d4d4d #3e3e3e #262626".split(" ")}}},{id:"green",colors:["#556b2f","#90ee90","#ffffe0"],additional:{chart:{colors3series:["#E9F7EF",
"#A9DFBF","#27AE60"],colors:"#E9F7EF #A9DFBF #7DCEA0 #52BE80 #27AE60 #229954 #1E8449 #196F3D #145A32".split(" ")}}},{id:"green2",colors:["#FFFFFF","#0B7AC0","#35AC46"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#56A5D8 #AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}}]},l={};h.standardRamps.forEach(function(q){var t=w.mixin({},q.additional);t.id=q.id;var r=f({defaultFontFamilty:q.id===k.CLASSIC?"Verdana":"Avenir Next",defaultFontSize:q.id===
k.CLASSIC?10:13});e.applyThemeColorsToTheme({theme:r,colors:q.colors});b.populateObject(r,t,!0);h[q.id]=r;l[q.id]=r});h.TABLE_STYLES="Default ReportTitle TableHeader GreyText BlueText AlternatingRow".split(" ");h.getReportThemeById=function(q){return l[q]};h.isStandardTheme=function(q){return!!l[q]};h.getStandardThemes=function(){return Object.keys(l).map(function(q){return l[q]})};h.getDefaultStaticInfographicSettings=function(){return w.clone(h.defaultStaticInfographic)};h.getDefaultBorderSettings=
function(){return d()};h.getDefaultTheme=function(q){return f(q)};return h})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/PageBorderStyles":function(){define([],function(){var w={NONE:"none",ALL:"all",INNER_ONLY:"innerOnly",OUTER_ONLY:"outerOnly",HORIZONTAL_INNER_ONLY:"horizontalInnerOnly",VERTICAL_INNER_ONLY:"verticalInnerOnly",isSupported:function(p){for(var m in w)if(w[m]===p)return!0;return!1},toSupportedValue:function(p){return w.isSupported(p)?p:w.ALL}};return w})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineStyles":function(){define([],
function(){var w={SOLID:"Solid",DASHED:"Dashed",DOTTED:"Dotted",isSupported:function(p){for(var m in w)if(w[m]===p)return!0;return!1},toGFXValue:function(p,m){switch(p){case "Dashed":return 1>m?"LongDash":"Dash";case "Dotted":return 1>m?"Dash":"Dot";default:return"Solid"}}};return w})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ReportThemes":function(){define([],function(){return{GRAPHIC:"graphic",CLASSIC:"classic",COMPARISON:"comparison"}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(w,p,m){function k(c){var d=p.isLightColor(c);return p.transform(c,{dv:d?-7:7}).toHex()}var e={getPanelTitleColor:function(c){var d=p.isLightColor(c);return p.transform(c,{dv:d?-50:50}).toHex()},getChartElementBackgroundColor:function(c){var d=p.isLightColor(c);return p.transform(c,{dv:d?-13:13}).toHex()}},b={getThemeColors:function(c){return[c.document.backgroundColor,c.icon.backgroundColor,c.highlightedIcon.backgroundColor]},
generateChartColors:function(c,d,f){f=f||{};var h=f.gradientFactor||1,l=[d,p.transform(d,{dv:-20*h}).toHex(),p.transform(d,{dv:-40*h}).toHex(),p.transform(d,{dv:-50*h}).toHex(),p.transform(d,{dv:-55*h}).toHex(),p.transform(d,{dv:-60*h}).toHex(),p.transform(d,{dv:-65*h}).toHex(),p.transform(d,{dv:-70*h}).toHex()];if(f.numLighterColors)for(var q=0;q<f.numLighterColors;q++)l.unshift(p.transform(d,{dv:20*h*(q+1),ds:-20*(q+1)}).toHex());c&&c!==d&&l.unshift(c);var t={};return l.filter(function(r){return t[r]?
!1:t[r]=!0})},applyThemeColorsToTheme:function(c){var d=c.theme,f=c.colors,h=c.preserveForegroundColor,l=c.chartColors,q=c.colors3series;c=c.preprocessGeneratedThemeFunc;var t=f[0],r=f[1];f=f[2];var u=h&&d.chart&&d.chart.dataLabelsStyle&&d.chart.dataLabelsStyle.color||p.getContrastColor(t).toHex();h=h&&d.document.color||("#FFFFFF"===t.toUpperCase()?"#4C4C4C":u);var z=p.isLightColor(t),A=e.getChartElementBackgroundColor(t),B=e.getPanelTitleColor(t),E=p.transform(t,{dv:z?-33:33}).toHex(),F={overrideStyles:{Default:{color:h,
backgroundColor:"transparent"},TableHeader:{color:p.getContrastColor(r,void 0,void 0,200).toHex(),backgroundColor:r},AlternatingRow:{color:h,backgroundColor:p.transform(t,{dv:z?-7:7}).toHex()},ReportTitle:{color:f,backgroundColor:"transparent"},GreyText:{color:E,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},G={lineColor:u,gridLinesColor:u,gridStripesColor:k(t),gridStripesColorAlt:"transparent",axisStyle:{color:u},titleStyle:{color:u}},H={lineColor:u,gridLinesColor:u,
gridStripesColor:k(t),gridStripesColorAlt:"transparent",baseLineColor:u,axisStyle:{color:u},titleStyle:{color:u}};var v=p.isLightColor(t)?"#666666":"#BBBBBB";t={document:{color:h,backgroundColor:t,border:{color:E}},icon:{backgroundColor:r},highlightedIcon:{backgroundColor:f},table:F,chart:{backgroundColor:"transparent",outlineColor:void 0,titleStyle:{color:B},dataLabelsAltColor:u,dataLabelsStyle:{color:u},xAxis:G,yAxis:H,legendStyle:{color:u,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:u}},
comparisonInfo:{lineColor:v},icon:{backgroundColor:r},ring:{ringBackground:{backgroundColor:A}},gauge:{dataLabelStyle:{color:r},othersColor:A,arrowIndicator:{lineColor:B,backgroundColor:B}},waffle:{dataValueStyle:{color:r},dataLabelStyle:{color:r},othersColor:A},columnBarBackground:{backgroundColor:A}},infographic:{backgroundColor:"transparent",agePyramid:{theme:z?"light":"common",male:{backgroundColor:r},female:{backgroundColor:f}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:r},
highlightedIcon:{backgroundColor:f},iconBarBackground:{},titleLine:{color:p.transform(t,{dv:z?-40:40}).toHex()},titleStyle:{color:B},variableLabelStyle:{color:r},variableLabelStyleHighlighted:{color:f},variableLabelStyleContrast:{color:t},variableDescriptionStyle:{color:p.transform(t,{dv:z?-50:50}).toHex()}}}};c&&c(t);m.populateObject(d,t,!0);d.chart.colors=l&&l.length?l:b.generateChartColors(r,f);d.chart.colors3series=q},applyTextStyleToTheme:function(c,d){function f(l,q){var t=w.mixin({},d);l&&
delete t.color;q||delete t.fontSize;return t}d=b.filterTextStyles(d);var h={document:f(!1,!0),table:{overrideStyles:{Default:f(!1,!0),TableHeader:f(!1,!0),AlternatingRow:f(!1,!0),ReportTitle:f(!1,!0),GreyText:f(!1,!0),BlueText:f(!1,!0)}},chart:{titleStyle:f(),dataLabelsStyle:f(),xAxis:{axisStyle:f(),titleStyle:f()},yAxis:{axisStyle:f(),titleStyle:f()},legendStyle:f(),minMaxLegend:{titleStyle:f(),minVariableLabelStyle:f(!0),maxVariableLabelStyle:f(!0)},gauge:{dataLabelStyle:f()},waffle:{dataValueStyle:f(),
dataLabelStyle:f()}},infographic:{staticInfographic:{titleStyle:f(),variableLabelStyle:f(),variableLabelStyleHighlighted:f(),variableLabelStyleContrast:f(),variableDescriptionStyle:f()}}};m.populateObject(c,h,!0)}},a={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};b.filterTextStyles=function(c){var d={},f;for(f in a){var h=c[f];void 0!==h&&(d[f]=h)}return d};return b})},"esri/dijit/geoenrichment/utils/ColorUtil":function(){define(["dojo/_base/Color","dojox/color/_base",
"dojox/color/Palette"],function(w,p,m){function k(b,a,c){return Math.round((b&255)*(1-c)+(a&255)*c)}var e={toCSSColor:function(b,a,c){"string"!==typeof b||/^0x/i.test(b)||(b=w.fromString(b));if(b instanceof w)return a||1===b.a?b.toHex():b.toCss(!0);if(null==b||isNaN(b))return c?e.toCSSColor(c,a):"#000000";b="00000"+Number(b).toString(16);return"#"+b.substr(b.length-6)},toColor:function(b,a){return"object"===typeof b?(new w).setColor(b):w.fromString(e.toCSSColor(b,!1,a))},getCSSColorWithAlpha:function(b,
a){return e.toCSSColor(e.getColorWithAlpha(b,a))},getColorWithAlpha:function(b,a){b=(new w).setColor(b);b.a=a;return b},transform:function(b,a){var c=new m;c.colors=[new w(b)];return c.transform({use:void 0!==a.dl?"hsl":"hsv",dh:a.dh||0,ds:a.ds||0,dv:a.dv||0,dl:a.dl||0}).colors[0]},generateAnalogousColorScheme:function(b,a,c){return m.generators.analogous({base:b,high:a,low:c}).colors},applyColorHue:function(b,a){b=new p.Color(b);a=new p.Color(a);b=b.toHsl();var c=a.toHsl();b=p.fromHsl({h:b.h,s:0===
b.s?0:0===c.s?b.s:c.s,l:c.l});b.a=a.a;return b},getColorParams:function(b){b=new p.Color(b);var a=b.toHsv();a.l=b.toHsl().l;return a},generateGradient:function(b,a){b=b.map(e.toRGBColor);var c=[];if(0===b.length-1||1===a){b=b[0];for(var d=0;d<a;d++)c.push(b);return c}var f=1/(a-1);for(d=0;d<a;d++)c.push(e.getGradientRGBColor(b,d*f));return c},getGradientRGBColor:function(b,a,c){var d=b.length-1,f=1>d||0>=a?0:1<=a?d:-1;if(0<=f)return b[f];a*=d;f=Math.floor(a);f===d&&f--;return e.mixRGBColors(b[f],
b[f+1],a-f,c)},mixRGBColors:function(b,a,c,d){1<c?c=1:0>c&&(c=0);var f=k(b,a,c),h=k(b>>8,a>>8,c),l=k(b>>16,a>>16,c);return((d?k(b>>24,a>>24,c):0)<<24)+(l<<16)+(h<<8)+f},toRGBColor:function(b,a){b=e.toCSSColor(b,!0,a);return parseInt("0x"+b.substr(1))},getContrastColor:function(b,a,c,d){return e.isLightColor(b,d)?e.toColor(a,"#000000"):e.toColor(c,"#FFFFFF")},getHighlightColor:function(b,a){a=a||{};b=new p.Color(b);x=b.toHsl();if("darker"===a.method)x.l=50>x.l?x.l+30:x.l-20,0<x.s&&(x.s+=30);else{var c=
a.saturation||100,d=a.luminosity1||75;a=a.luminosity2||50;0===x.s?x.l=50>x.l?x.l+30:x.l-20:(x.s=c,x.l=x.l<a?d:x.l>d?a:x.l-a>d-x.l?a:d)}a=p.fromHsl(x);a.a=b.a;return a},getLightness:function(b){b=e.toRGBColor(b);return(299*(b>>16&255)+587*(b>>8&255)+114*(b&255))/1E3},isLightColor:function(b,a){return e.getLightness(b)>=(void 0===a?128:a)},colorsEqual:function(b,a){b instanceof w||(b=e.toColor(b));a instanceof w||(a=e.toColor(a));return b.a==a.a&&b.r==a.r&&b.g==a.g&&b.b==a.b},isTransparent:function(b){b=
e.toCSSColor(b);return"rgba(0,0,0,0)"===b.toLowerCase().replace(/\s/g,"")},generateRandomColor:function(b){function a(){return c+Math.round((d-c)*Math.random())}b=b||{};var c=b.min||0,d=b.max||255,f=b.randomizeAlpha?a():1;return b.grayScheme?(b=a(),new w([b,b,b,f])):new w([a(),a(),a(),f])}};return e})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(w,p,m,k){w=p.getObject("color",!0,w);w.Color=m;w.blend=m.blendColors;w.fromRgb=m.fromRgb;
w.fromHex=m.fromHex;w.fromArray=m.fromArray;w.fromString=m.fromString;w.greyscale=k.makeGrey;p.mixin(w,{fromCmy:function(e,b,a){p.isArray(e)?(b=e[1],a=e[2],e=e[0]):p.isObject(e)&&(b=e.m,a=e.y,e=e.c);return new m({r:Math.round(255*(1-e/100)),g:Math.round(255*(1-b/100)),b:Math.round(255*(1-a/100))})},fromCmyk:function(e,b,a,c){p.isArray(e)?(b=e[1],a=e[2],c=e[3],e=e[0]):p.isObject(e)&&(b=e.m,a=e.y,c=e.b,e=e.c);c/=100;return new m({r:Math.round(255*(1-Math.min(1,e/100*(1-c)+c))),g:Math.round(255*(1-Math.min(1,
b/100*(1-c)+c))),b:Math.round(255*(1-Math.min(1,a/100*(1-c)+c)))})},fromHsl:function(e,b,a){p.isArray(e)?(b=e[1],a=e[2],e=e[0]):p.isObject(e)&&(b=e.s,a=e.l,e=e.h);b/=100;for(a/=100;0>e;)e+=360;for(;360<=e;)e-=360;if(120>e){var c=(120-e)/60;var d=e/60;e=0}else 240>e?(c=0,d=(240-e)/60,e=(e-120)/60):(c=(e-240)/60,d=0,e=(360-e)/60);c=2*b*Math.min(c,1)+(1-b);d=2*b*Math.min(d,1)+(1-b);e=2*b*Math.min(e,1)+(1-b);.5>a?(c*=a,d*=a,e*=a):(c=(1-a)*c+2*a-1,d=(1-a)*d+2*a-1,e=(1-a)*e+2*a-1);return new m({r:Math.round(255*
c),g:Math.round(255*d),b:Math.round(255*e)})}});w.fromHsv=function(e,b,a){p.isArray(e)?(b=e[1],a=e[2],e=e[0]):p.isObject(e)&&(b=e.s,a=e.v,e=e.h);360==e&&(e=0);b/=100;a/=100;var c,d;if(0==b)var f=d=c=a;else{var h=e/60;e=Math.floor(h);var l=h-e;h=a*(1-b);var q=a*(1-b*l);b=a*(1-b*(1-l));switch(e){case 0:c=a;f=b;d=h;break;case 1:c=q;f=a;d=h;break;case 2:c=h;f=a;d=b;break;case 3:c=h;f=q;d=a;break;case 4:c=b;f=h;d=a;break;case 5:c=a,f=h,d=q}}return new m({r:Math.round(255*c),g:Math.round(255*f),b:Math.round(255*
d)})};p.extend(m,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var e=this.r/255,b=this.g/255,a=this.b/255;var c=Math.min(1-e,1-b,1-a);return{c:Math.round((1-e-c)/(1-c)*100),m:Math.round((1-b-c)/(1-c)*100),y:Math.round((1-a-c)/(1-c)*100),b:Math.round(100*c)}},toHsl:function(){var e=this.r/255,b=this.g/255,a=this.b/255,c=Math.min(e,a,b),d=Math.max(e,b,a),f=d-c,h=0,l=0;c=(c+d)/2;0<c&&1>c&&(l=f/(.5>c?2*c:
2-2*c));0<f&&(d==e&&d!=b&&(h+=(b-a)/f),d==b&&d!=a&&(h+=2+(a-e)/f),d==a&&d!=e&&(h+=4+(e-b)/f),h*=60);return{h:h,s:Math.round(100*l),l:Math.round(100*c)}},toHsv:function(){var e=this.r/255,b=this.g/255,a=this.b/255,c=Math.max(e,b,a),d=c-Math.min(e,a,b),f=null,h=0==c?0:d/c;0==h?f=0:(f=e==c?60*(b-a)/d:b==c?120+60*(a-e)/d:240+60*(e-b)/d,0>f&&(f+=360));return{h:f,s:Math.round(100*h),v:Math.round(100*c)}}});return w})},"dojox/main":function(){define(["dojo/_base/kernel"],function(w){return w.dojox})},"dojo/colors":function(){define(["./_base/kernel",
"./_base/lang","./_base/Color","./_base/array"],function(w,p,m,k){var e={};p.setObject("dojo.colors",e);var b=function(c,d,f){0>f&&++f;1<f&&--f;var h=6*f;return 1>h?c+(d-c)*h:1>2*f?d:2>3*f?c+(d-c)*(2/3-f)*6:c};w.colorFromRgb=m.fromRgb=function(c,d){var f=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(f){c=f[2].split(/\s*,\s*/);var h=c.length;f=f[1];if("rgb"==f&&3==h||"rgba"==f&&4==h)return f=c[0],"%"==f.charAt(f.length-1)?(f=k.map(c,function(t){return 2.56*parseFloat(t)}),4==h&&(f[3]=
c[3]),m.fromArray(f,d)):m.fromArray(c,d);if("hsl"==f&&3==h||"hsla"==f&&4==h){f=(parseFloat(c[0])%360+360)%360/360;var l=parseFloat(c[1])/100,q=parseFloat(c[2])/100;l=.5>=q?q*(l+1):q+l-q*l;q=2*q-l;f=[256*b(q,l,f+1/3),256*b(q,l,f),256*b(q,l,f-1/3),1];4==h&&(f[3]=c[3]);return m.fromArray(f,d)}}return null};var a=function(c,d,f){c=Number(c);return isNaN(c)?f:c<d?d:c>f?f:c};m.prototype.sanitize=function(){this.r=Math.round(a(this.r,0,255));this.g=Math.round(a(this.g,0,255));this.b=Math.round(a(this.b,
0,255));this.a=a(this.a,0,1);return this};e.makeGrey=m.makeGrey=function(c,d){return m.fromArray([c,c,c,d])};p.mixin(m.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,
20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,
191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,
205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,
0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,
238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],
tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return m})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(w,p,m){function k(d,f,h){var l=new m.Palette;l.colors=[];p.forEach(d.colors,function(q){l.colors.push(new m.Color({r:Math.min(255,Math.max(0,"dr"==f?q.r+h:q.r)),g:Math.min(255,Math.max(0,"dg"==f?q.g+h:q.g)),b:Math.min(255,
Math.max(0,"db"==f?q.b+h:q.b)),a:Math.min(1,Math.max(0,"da"==f?q.a+h:q.a))}))});return l}function e(d,f,h){var l=new m.Palette;l.colors=[];p.forEach(d.colors,function(q){q=q.toCmy();l.colors.push(m.fromCmy(Math.min(100,Math.max(0,"dc"==f?q.c+h:q.c)),Math.min(100,Math.max(0,"dm"==f?q.m+h:q.m)),Math.min(100,Math.max(0,"dy"==f?q.y+h:q.y))))});return l}function b(d,f,h){var l=new m.Palette;l.colors=[];p.forEach(d.colors,function(q){q=q.toCmyk();l.colors.push(m.fromCmyk(Math.min(100,Math.max(0,"dc"==f?
q.c+h:q.c)),Math.min(100,Math.max(0,"dm"==f?q.m+h:q.m)),Math.min(100,Math.max(0,"dy"==f?q.y+h:q.y)),Math.min(100,Math.max(0,"dk"==f?q.b+h:q.b))))});return l}function a(d,f,h){var l=new m.Palette;l.colors=[];p.forEach(d.colors,function(q){q=q.toHsl();l.colors.push(m.fromHsl(("dh"==f?q.h+h:q.h)%360,Math.min(100,Math.max(0,"ds"==f?q.s+h:q.s)),Math.min(100,Math.max(0,"dl"==f?q.l+h:q.l))))});return l}function c(d,f,h){var l=new m.Palette;l.colors=[];p.forEach(d.colors,function(q){q=q.toHsv();l.colors.push(m.fromHsv(("dh"==
f?q.h+h:q.h)%360,Math.min(100,Math.max(0,"ds"==f?q.s+h:q.s)),Math.min(100,Math.max(0,"dv"==f?q.v+h:q.v))))});return l}m.Palette=function(d){this.colors=[];d instanceof m.Palette?this.colors=d.colors.slice(0):d instanceof m.Color?this.colors=[null,null,d,null,null]:w.isArray(d)?this.colors=p.map(d.slice(0),function(f){return w.isString(f)?new m.Color(f):f}):w.isString(d)&&(this.colors=[null,null,new m.Color(d),null,null])};w.extend(m.Palette,{transform:function(d){var f=k;if(d.use){var h=d.use.toLowerCase();
0==h.indexOf("hs")?f="l"==h.charAt(2)?a:c:0==h.indexOf("cmy")&&(f="k"==h.charAt(3)?b:e)}else if("dc"in d||"dm"in d||"dy"in d)f="dk"in d?b:e;else if("dh"in d||"ds"in d)f="dv"in d?c:a;h=this;for(var l in d)"use"!=l&&(h=f(h,l,d[l]));return h},clone:function(){return new m.Palette(this)}});w.mixin(m.Palette,{generators:{analogous:function(d){var f=d.high||60,h=d.low||18;d=(w.isString(d.base)?new m.Color(d.base):d.base).toHsv();var l=Math.max(10,95>=d.s?d.s+5:100-(d.s-95)),q=92<=d.v?d.v-9:Math.max(d.v+
9,20),t=90>=d.v?Math.max(d.v+5,20):95+Math.ceil((d.v-90)/2),r=[l,1<d.s?d.s-1:21-d.s,d.s,l,l],u=[q,t,d.v,q,t];return new m.Palette(p.map([(d.h+h+360)%360,(d.h+Math.round(h/2)+360)%360,d.h,(d.h-Math.round(f/2)+360)%360,(d.h-f+360)%360],function(z,A){return m.fromHsv(z,r[A],u[A])}))},monochromatic:function(d){d=w.isString(d.base)?new m.Color(d.base):d.base;var f=d.toHsv(),h=9<f.s-30?f.s-30:f.s+30,l=f.s,q=20<f.v-20?f.v-20:f.v+60,t=20<f.v-50?f.v-50:f.v+30;return new m.Palette([m.fromHsv(f.h,h,100-.8*(100-
f.v)),m.fromHsv(f.h,l,t),d,m.fromHsv(f.h,h,t),m.fromHsv(f.h,l,q)])},triadic:function(d){d=w.isString(d.base)?new m.Color(d.base):d.base;var f=d.toHsv(),h=(f.h-157+360)%360,l=90<f.s?f.s-10:f.s+10,q=95<f.s?f.s-5:f.s+5,t=20<f.v-20?f.v-20:f.v+20,r=20<f.v-30?f.v-30:f.v+30,u=70<f.v-30?f.v-30:f.v+30;return new m.Palette([m.fromHsv((f.h+57+360)%360,20<f.s?f.s-10:f.s+10,f.v),m.fromHsv(f.h,l,r),d,m.fromHsv(h,l,t),m.fromHsv(h,q,u)])},complementary:function(d){d=w.isString(d.base)?new m.Color(d.base):d.base;
var f=d.toHsv(),h=360>2*f.h+137?2*f.h+137:Math.floor(f.h/2)-137,l=100-.9*(100-f.s),q=Math.min(100,f.s+20),t=20<f.v?f.v-30:f.v+30;return new m.Palette([m.fromHsv(f.h,Math.max(f.s-10,0),Math.min(100,f.v+30)),m.fromHsv(f.h,l,t),d,m.fromHsv(h,q,t),m.fromHsv(h,f.s,f.v)])},splitComplementary:function(d){var f=w.isString(d.base)?new m.Color(d.base):d.base,h=d.da||30;d=f.toHsv();var l=360>2*d.h+137?2*d.h+137:Math.floor(d.h/2)-137,q=(l-h+360)%360;h=(l+h)%360;l=100-.9*(100-d.s);var t=Math.min(100,d.s+20),r=
20<d.v?d.v-30:d.v+30;return new m.Palette([m.fromHsv(q,Math.max(d.s-10,0),Math.min(100,d.v+30)),m.fromHsv(q,l,r),f,m.fromHsv(h,t,r),m.fromHsv(h,d.s,d.v)])},compound:function(d){d=w.isString(d.base)?new m.Color(d.base):d.base;var f=d.toHsv(),h=360>2*f.h+18?2*f.h+18:Math.floor(f.h/2)-18,l=360>2*f.h+120?2*f.h+120:Math.floor(f.h/2)-120,q=360>2*f.h+99?2*f.h+99:Math.floor(f.h/2)-99,t=80<f.s-10?f.s-10:f.s+10,r=10<f.s-25?f.s-25:f.s+25,u=80<f.v-20?f.v-20:f.v+20,z=Math.max(f.v,20);return new m.Palette([m.fromHsv(h,
10<f.s-40?f.s-40:f.s+40,10<f.v-40?f.v-40:f.v+40),m.fromHsv(h,t,u),d,m.fromHsv(l,r,z),m.fromHsv(q,t,u)])},shades:function(d){d=w.isString(d.base)?new m.Color(d.base):d.base;var f=d.toHsv(),h=100==f.s&&0==f.v?0:f.s,l=20<=f.v-25?f.v-25:f.v+55,q=20<=f.v-75?f.v-75:f.v+5,t=Math.max(f.v-10,20);return new m.Palette([new m.fromHsv(f.h,h,20<f.v-50?f.v-50:f.v+30),new m.fromHsv(f.h,h,l),d,new m.fromHsv(f.h,h,q),new m.fromHsv(f.h,h,t)])}},generate:function(d,f){if(w.isFunction(f))return f({base:d});if(m.Palette.generators[f])return m.Palette.generators[f]({base:d});
throw Error("dojox.color.Palette.generate: the specified generator ('"+f+"') does not exist.");}});return m.Palette})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/AttrUtil":function(){define([],function(){var w={},p="ID OBJECTID AREA_ID STORE_ID HasData aggregationMethod sourceCountry radiusIndex".split(" ");w.cleanUpAttrs=function(m,k){m&&p.forEach(function(e){k&&k[e]||delete m[e]})};return w})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],
function(w){var p={},m={}.toString();p.arraysEqual=function(k,e){if(!k&&!e)return!0;if(!k||!e||k.length!==e.length)return!1;for(var b=0;b<k.length;b++)if(k[b]!==e[b])return!1;return!0};p.composeIdentityFunction=function(k,e){var b="function"===typeof k?k:k?function(a){return a[k]}:function(a){return a};return function(a){return(a=b(a))&&a.toString?a.toString():e&&void 0===a?a:String(a)}};p.removeDuplicates=function(k,e){var b=[],a={};e=p.composeIdentityFunction(e,!0);w.forEach(k,function(c,d){var f=
e(c);f===m&&(void 0===c["__ArrayUtil.js_uniqueKey__"]&&(c["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+d),f=c["__ArrayUtil.js_uniqueKey__"]);void 0===f||f in a||(a[f]=c,b.push(c))});return b};p.splitArrayToBunches=function(k,e){e=e||100;for(var b=[],a,c=0,d=k.length;c<d;c++)a&&a.length!==e||(a=[],b.push(a)),a.push(k[c]);return b};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaCalculatorsUtil":function(){define(["./AreaDataUtil","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil",
"../tasks/parsers/FeatureSetParser"],function(w,p,m){return{addFeatureAttributesCalculator:function(k,e,b){b=b||p.AREA_ATTRIBUTES_CALCULATOR_NAME;for(var a in k.attributes)w.setAreaDataObjectValue(a,k.attributes[a],e,b)},addAreaInfoCalculator:function(k,e,b){b=b||p.AREA_ATTRIBUTES_CALCULATOR_NAME;w.setAreaDataObjectValue("SITE_NAME",k.locationName||k.name,e,b);w.setAreaDataObjectValue("STORE_NAME",k.locationName||k.name,e,b);w.setAreaDataObjectValue("AREA_DESC",k.shortName||k.name,e,b);w.setAreaDataObjectValue("AREA_DESC2",
k.description||k.name,e,b);w.setAreaDataObjectValue("AREA_DESC3",k.description||k.name,e,b);w.setAreaDataObjectValue("STORE_ADDR",k.address||"",e,b);w.setAreaDataObjectValue("STORE_LAT",k.latitude||"",e,b);w.setAreaDataObjectValue("STORE_LONG",k.longitude||"",e,b)},addEnrichFeatures:function(k,e,b,a){var c={},d={},f;for(f in e)c[f.toLowerCase()]=e[f],d[f.toUpperCase()]=e[f];k=m.parse(k,b||p.ENRICHED_DATA_NO_LEVELS,function(h){return e[h]||c[h.toLowerCase()]||d[h.toUpperCase()]});w.mergeAreaData(k,
a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/FeatureSetParser":function(){define(["./AttrUtil"],function(w){var p={ID_FIELDS:["ID","AREA_ID","IDFNDFIELD"],KNOWN_ATTRIBUTES:{StdGeographyLevel:1,StdGeographyName:1,StdGeographyID:1},parse:function(m,k,e){if(!m)return[];m=m.features||m;if(!m.length)return[];var b=[],a={},c=0;m.forEach(function(d){var f=d.attributes[p.ID_FIELDS[0]]||d.attributes[p.ID_FIELDS[1]];if(f){void 0===a[f]&&(a[f]=c++);var h={},l;for(l in d.attributes){var q=
p.KNOWN_ATTRIBUTES[l]?l:e?e(l):l;q&&(h[q]=d.attributes[l])}w.cleanUpAttrs(h);d={name:k,attrs:h,areaIndex:a[f]}}else d=null;d&&(f=b[d.areaIndex]=b[d.areaIndex]||{},f[d.name]?f[d.name].comparisonLevels.push(d.attrs):f[d.name]={data:d.attrs,comparisonLevels:[]})});console.log("FeatureSetPareser.js \x3d\x3e areaData:");console.log(b);return b}};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/VariablesUtil":function(){define(["../dataCollections/DataCollectionsLoader"],
function(w){var p={preprocessVariables:function(m,k){var e=p.convertForEnrich(p._splitVariables(m)).filter(function(b){return b.itemid});return w.loadCustomDataVariables(e,{forceLowerCase:!0,portalUrl:k}).then(function(b){return p._splitVariables(m,b)})},_splitVariables:function(m,k){var e=[],b={};m.forEach(function(a){"string"===typeof a?e.push(a.toLowerCase()):a&&a.outFields&&a.outFields.forEach(function(c,d){d=a.itemid+"."+c;d=d.toLowerCase();e.push(d);b[d]={itemid:a.itemid,url:a.url,token:a.token,
variable:k?k.fullNameToVariableCache[d]:{id:c}}})});return{fullNames:e,customDataMapping:b}},convertForEnrich:function(m){var k={},e=[];m.fullNames.forEach(function(b){var a=m.customDataMapping[b];a?(b=k[a.itemid],b||(b={itemid:a.itemid,url:a.url,token:a.token,outFields:[]},b.url||delete b.url,b.token||delete b.token),b.outFields.push(a.variable.id),k[b.itemid]||(k[b.itemid]=b,e.push(b))):e.push(b)});return e}};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/dataCollections/DataCollectionsLoader":function(){define("esri/dijit/geoenrichment/promise/all ../GEUtil ../ReportTemplateData esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(w,p,m,k,e,b){return{canLoad:function(){return p.canMakeRequests()},loadVariables:function(a){var c=k.get("DataCollectionsLoader"),d="*"===a.outFields,f=d?["*"]:a.outFields,h=a.countryID+";"+a.hierarchy+";"+f.join(";")+";"+!!a.forceLowerCase;c[h]||(d||(f=f.slice(),-1===f.indexOf("id")&&f.push("id")),c[h]=p.getDataCollections(a.countryID,a.hierarchy,{f:"json",outFields:d?"*":JSON.stringify(f),suppressNullValues:!0,AddDerivativeVariables:"all"}).then(function(l){var q={dataCollections:l,idToVariableCache:{},
fullNameToVariableCache:{}};l.forEach(function(t){t.data.forEach(function(r){function u(B){return a.forceLowerCase?B.toLowerCase():B}function z(B){if(d)return Object.keys(B).length;var E=0;f.forEach(function(F){void 0!==B[F]&&E++});return E}var A=q.idToVariableCache[u(r.id)];if(!A||z(r)>z(A))q.idToVariableCache[u(r.id)]=r;q.fullNameToVariableCache[u(t.dataCollectionID+"."+r.id)]=r})});return q}));return c[h]},loadCustomDataVariables:function(a,c){c=c||{};var d={idToVariableCache:{},fullNameToVariableCache:{}};
return w(a.map(function(f){var h=b.combineMulti([f.url||c.portalUrl,"sharing/rest/content/items",f.itemid,"resources/metadata.xml"]);return m.loadResource(h,f.token||b.getToken(c.portalUrl)).then(function(l){var q=e.parseXml(l.data);l=[];var t=e.queryJson(q,"Fields")[0];t&&(l=l.concat(e.queryJson(t,"Field")));(q=e.queryJson(q,"CalculatedFields")[0])&&(l=l.concat(e.queryJson(q,"Script")));l.forEach(function(r){function u(z){return c.forceLowerCase?z.toLowerCase():z}r=r.attributes;r={id:r.Name,fullName:f.itemid+
"."+r.Name,alias:r.Alias,description:r.Alias,type:"esriFieldType"+r.Type,precision:r.Precision?Number(r.Precision):void 0,vintage:r.Vintage};d.idToVariableCache[u(r.id)]=r;d.fullNameToVariableCache[u(r.fullName)]=r})})})).then(function(){return d})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportTemplateData":function(){define("dojo/_base/declare dojo/_base/lang dojo/request/xhr esri/dijit/geoenrichment/promise/all esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l){function q(t,r){var u=t.substr(t.lastIndexOf("/")+1),z=a.getProxyRule(t);return m(z&&z.proxyUrl?z.proxyUrl+"?"+t:t,{method:"POST",handleAs:"arraybuffer",data:"token\x3d"+r,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded; charset\x3dutf-8"}}).then(function(A){var B=!/\.xml$|\.txt$|\.json$/i.test(u);return{name:u,data:B?c.base64FromByteSource(A):decodeURIComponent(escape(c.binaryStringFromByteSource(A)))}})}w=w(null,{id:null,_portalUrl:null,
_baseUrl:null,constructor:function(t,r){this.id=t.id;this._portalUrl=r;this._baseUrl=f.combine(this._portalUrl,"sharing/rest")},getFiles:function(){var t=this;return this._getResources().then(function(r){var u=[];r.map(function(z){z=z.resource;"thumbnail.png"!==z&&u.push(t.getFileByName(z))});return k(u)})},getFileByName:function(t){return q(this.getItemResourceUrl(t,!1),this._getToken())},getItemResourceUrl:function(t,r){t=this._baseUrl+"/"+this._contentItemPath(this.id+"/resources/"+t);return r?
f.addQueryPart(t,"token\x3d"+this._getToken()):t},updateFile:function(t,r){var u=this;return l.request({url:this._baseUrl,urlSuffix:"content/items/"+this.id}).then(function(z){var A=h.fromFileData(t,r);return l.request({url:u._baseUrl,urlSuffix:"content/users/"+z.owner+"/"+z.ownerFolder+"/items/"+u.id+"/updateResources"},{content:{file:A,filename:t}})})},_contentItemPath:function(t){return"content/items/"+t},_getToken:function(){var t=e.id.findCredential(this._portalUrl)||e.id.credentials[0];return t&&
t.token},_getResources:function(){var t=this;return d.query(function(r){return b({url:t._baseUrl+"/"+t._contentItemPath(t.id+"/resources"),content:p.mixin({f:"json",token:t._getToken()},r),handleAs:"json"},{usePost:!0})},null,"resources").then(function(r){return r.resources})},getPortalUrl:function(t){return t?/[^:]+:\/\/(.+)$/i.exec(this._portalUrl)[1]:this._portalUrl}});w.loadResource=q;return w})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/CustomReportsManager":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./PortalManager ./ReportTemplateData ./StandardGraphicReportTemplates esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/PortalQueryUtil esri/dijit/geoenrichment/utils/UrlUtil ../../config ../../countryConfig".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l){var q={TEMPLATE_TYPE:"Report Template",PLAYER_STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriReportPlayerStandardInfographic",STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriWebStandardInfographicReport",GALLERY_INFOGRAPHIC_TYPEKEYWORD:"esriWebGalleryInfographicReport",MOBILE_INFOGRAPHIC_TYPEKEYWORD:"esriMobileFactsInfographicReport",GALLERY_INFOGRAPHIC_USER:"esri_reports",resetCache:function(){a.set("CustomReportsManager",{})},_getCache:function(){return a.get("CustomReportsManager")},
getCustomReports:function(t){var r=this,u=f.getPortalUrl(t.portalUrl);return m(k.getSignedInPortal(u),function(z){z=z.user.username;z={q:d.combineQueryString({type:"Report Template",typeKeywords:t.typeKeywords,owner:!t.publicOnly&&z}),sortField:"modified",sortOrder:"desc"};return c.queryCommon(f.combine(u,"sharing/rest/search"),z).then(function(A){A=A.map(function(B){return r.prepareCustomReportFromItem(B,u,t)});return r._getCountryReports(A,t.countryID)})})},_getCountryReports:function(t,r){return t&&
("*"===r?t:t.filter(function(u){return!u.countries||u.countries.split(",").some(function(z){return r===z.trim()})}))},prepareCustomReportFromItem:function(t,r,u){function z(B){return"string"===typeof B?"true"===B:!!B}var A=w.mixin({},t.properties||t.details);A.isGraphicReport=z(A.isGraphicReport);A.isMultiFeature=z(A.isMultiFeature);A.reportID=t.id;r={title:t.title,templateData:r&&new e(t,r),modified:t.modified instanceof Date?t.modified.getTime():t.modified};u&&u.attachItemProperty&&(r[u.attachItemProperty]=
t);w.mixin(r,A);return r},getCustomReportByID:function(t){var r=this,u=this._getCache()[t.reportID];if(u)return u;var z=f.getPortalUrl(t.portalUrl);return this._getCache()[t.reportID]=m(k.getSignedInPortal(z),function(A){return A.user.getItem(t.reportID).then(function(B){return B&&r.prepareCustomReportFromItem(B,z,t)})}).otherwise(function(A){delete r._getCache()[t.reportID];return t.ignoreError?null:(new p).reject(A)})},tryFindReportIdByAlias:function(t){var r=this,u=b.aliasToID(t.countryID,t.reportID);
if(null==u)return null;var z=f.getPortalUrl(t.portalUrl);return m(u&&this.getCustomReportByID({reportID:u,portalUrl:z,ignoreError:!0,attachItemProperty:t.attachItemProperty}),function(A){return A?A&&(t.returnObject?A:A.reportID):m(r.getCustomReports({portalUrl:z,countryID:t.countryID,typeKeywords:"esriReportPlayerStandardInfographic",publicOnly:!0,attachItemProperty:t.attachItemProperty}),function(B){function E(I){I=I.split(".");return Number((Number(I[0])+Number(I[1])/100).toFixed(2))}var F=E(h.jsapiVersion),
G,H,v=-Infinity,D=Infinity;B.forEach(function(I){if(I.playerAlias===t.reportID){var K=E(I.jsapiVersion);F>=K&&K>v&&(v=K,G=I);F<K&&K<D&&(D=K,H=I)}});B=G||H;t.strictVersionCheck&&B&&B.jsapiVersion!==h.jsapiVersion&&(B=null);return B&&(t.returnObject?B:B.reportID)})})},itemUpdated:function(t){delete this._getCache()[t]},getFakeCustomReportByContext:function(t){return{title:"Generic template",type:"esriReportTemplateStandard",coverage:t.countryID,countries:t.countryID,hierarchy:t.hierarchy||l.getHierarchyID(),
isGraphicReport:!0,isMultiFeature:!1,reportID:null}}};q.resetCache();return q})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/PortalManager":function(){define(["dojo/Deferred","dojo/on","esri/dijit/geoenrichment/when","esri/arcgis/Portal","../../../utils/CacheUtil"],function(w,p,m,k,e){return{getSignedInPortal:function(b){var a=e.get("PortalManager.portal");if(!a[b]){var c=new w;a[b]=c.promise;var d=new k.Portal(b);p(d,"load",function(){d.user?c.resolve({user:new k.PortalUser({portal:d,
credential:{userId:d.user.username,server:d.url,token:"",expires:9999999999999,creationTime:9999999999999,scope:"portal",resources:[d.portalUrl]}}),portal:d}):m(d.signIn()).then(function(f){c.resolve({user:f,portal:d})})})}return a[b]}}})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(w,p,m,k,e,b,a,
c,d,f,h,l){var q={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},t=function(v){function D(I){v[I]||(v[I]=function(){var K=arguments;return k.when(v,function(S){Array.prototype.unshift.call(K,S.results||S);return t(e[I].apply(e,K))})})}if(!v)return v;v.then&&(v=p.delegate(v));v.total||(v.total=k.when(v,function(I){return d.isDefined(I.total)?I.total:I.length||0}));D("forEach");D("filter");D("map");D("some");D("every");return v},r={useSSL:function(v,D){var I=q&&q.self||{};if(I&&!I.isPortal)return-1!==
v.indexOf("https:")||I.allSSL?D.replace("http:","https:"):D;var K=r.getLocation(D);return-1<I.portalHostname.toLowerCase().indexOf(K.hostname.toLowerCase())&&K.port&&"80"!==K.port&&"443"!==K.port?(D=K.pathname,D=0===D.indexOf("/")?D:"/"+D,I.allSSL||-1<v.indexOf("https:")?"https://"+K.hostname+(I.httpsPort&&"443"!==I.httpsPort?":"+I.httpsPort:"")+D+K.search:"http://"+K.hostname+(I.httpPort&&"80"!==I.httpPort?":"+I.httpPort:"")+D+K.search):-1!==v.indexOf("https:")||I.allSSL?D.replace("http:","https:"):
D},formatUrl:function(v){var D=q.currentToken;return-1!==v.indexOf("null")?null:r.useSSL(window.location.protocol,D?v+(-1!==v.indexOf("?")?"\x26":"?")+("token\x3d"+D):v)},getLocation:function(v){var D=document.createElement("a");D.href=v;return{protocol:D.protocol,hostname:D.hostname,port:D.port,pathname:D.pathname,search:D.search,hash:D.hash,host:D.host}},resultsToTypedArray:function(v,D,I){I=I?I.listings||I.notifications||I.userInvitations||I.tags||I.items||I.groups||I.comments||I.provisions||I.results||
I:[];return e.map(I,function(K){K=p.mixin(K,D||{});return v?new v(K):K})},clearFieldsFromObject:function(v,D){var I,K=v.length;if(p.isArray(v))for(I=0;I<K;I++)delete D[v[I]];else for(I in v)delete D[I];return D},requestToTypedArray:function(v,D,I,K,S){return t(r.request(v,D,I).then(p.partial(r.resultsToTypedArray,K,S)))},request:function(v,D,I){D&&D.portal&&delete D.portal;if(D&&D.form){var K=D.form;delete D.form}D=p.mixin(p.mixin({},D||{}),q.requestParams);I=p.mixin(I||{},q.options);return f({url:r.useSSL(window.location.protocol,
v.url||v),content:D,callbackParamName:"callback",timeout:I&&I.timeout||0,form:K},I)},formatQueryParams:function(v,D,I){v=p.mixin(p.mixin({},v),p.isString(D)?{q:D}:D||{});v.q=!I&&q.extraQuery?"("+v.q+")"+q.extraQuery:v.q;return v}},u=w([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(v){p.mixin(this,v);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),z=w([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(v){p.mixin(this,
v);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),A=w([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(v){p.mixin(this,v);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=r.formatUrl(this.itemUrl+
"/data");this.thumbnailUrl=r.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var v=this.type;return{source:-1<e.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===v?v:
null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(v){var D=p.isString(v)?{comment:v}:v;return r.request(this.itemUrl+"/addComment",D,{usePost:!0}).then(p.hitch(this,function(I){return new u(p.mixin(D,{id:I.commentId,item:this}))}))},updateComment:function(v){if(v&&v.url&&v.comment)return r.request(v.url+"/update",{comment:v.comment},{usePost:!0}).then(function(D){v.id=D.commentId;return v});
throw Error();},getComments:function(){return r.requestToTypedArray(this.itemUrl+"/comments",null,null,u,{item:this})},deleteComment:function(v){if(v&&v.url)return r.request(v.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(v){var D=p.isObject(v)?v:{rating:parseFloat(v)};return r.request(this.itemUrl+"/addRating",D,{usePost:!0}).then(p.hitch(this,function(I){return new z(p.mixin(D,{id:I.ratingId,item:this}))}))},getRating:function(){return r.request(this.itemUrl+"/rating").then(p.hitch(this,
function(v){return new z(p.mixin(v,{item:this}))}))},deleteRating:function(){return r.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var v=this.type,D=this.typeKeywords||[],I=v;"Feature Service"===v||"Feature Collection"===v?I=-1<e.indexOf(D,"Table")?"Table":-1<e.indexOf(D,"Route Layer")?"Route Layer":-1<e.indexOf(D,"Markup")?"Markup":"Feature Layer":"Image Service"===v?I=-1<e.indexOf(D,"Elevation 3D Layer")?"Elevation Layer":-1<e.indexOf(D,"Tiled Imagery")?"Tiled Imagery Layer":
"Imagery Layer":"Scene Service"===v?I="Scene Layer":"Scene Package"===v?I="Scene Layer Package":"Stream Service"===v?I="Feature Layer":"Geoprocessing Service"===v&&this.portal&&this.portal.isPortal?I=-1<e.indexOf(D,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===v?I="GeoEnrichment Service":"Geocoding Service"===v?I="Locator":"Microsoft Powerpoint"===v?I="Microsoft PowerPoint":"GeoJson"===v?this.type=I="GeoJSON":"Globe Service"===v?I="Globe Layer":"Vector Tile Service"===v?I="Tile Layer":
"netCDF"===v?I="NetCDF":"Map Service"===v?I=-1===e.indexOf(D,"Spatiotemporal")&&(-1<e.indexOf(D,"Hosted Service")||-1<e.indexOf(D,"Tiled"))&&-1===e.indexOf(D,"Relational")?"Tile Layer":"Map Image Layer":v&&-1<v.toLowerCase().indexOf("add in")?I=v.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===v?I="Big Data File Share":"Compact Tile Package"===v?I="Tile Package (tpkx)":"Raster function template"===v?I="Raster Function Template":"OGCFeatureServer"===v&&(I="OGC Feature Layer");return I},
_getIconUrl:function(){var v=this.type&&this.type.toLowerCase()||"",D=this.typeKeywords||[],I=!1,K=!1,S=!1,N=!1,T=!1,M=!1;K=!1;0<v.indexOf("service")||"feature collection"===v||"kml"===v||"wms"===v||"wmts"===v||"wfs"===v?(I=-1<e.indexOf(D,"Hosted Service"),"feature service"===v||"feature collection"===v||"kml"===v||"wfs"===v?(N=-1<e.indexOf(D,"Table"),K=-1<e.indexOf(D,"Route Layer"),S=-1<e.indexOf(D,"Markup"),T=-1!==e.indexOf(D,"Spatiotemporal"),M=-1!==e.indexOf(D,"UtilityNetwork"),v=T&&N?"spatiotemporaltable":
N?"table":K?"routelayer":S?"markup":T?"spatiotemporal":M?"utilitynetwork":I?"featureshosted":"features"):"map service"===v||"wms"===v||"wmts"===v?(T=-1!==e.indexOf(D,"Spatiotemporal"),K=-1!==e.indexOf(D,"Relational"),v=T||K?"mapimages":I||-1<e.indexOf(D,"Tiled")||"wmts"===v?"maptiles":"mapimages"):v="scene service"===v?-1<e.indexOf(D,"Line")?"sceneweblayerline":-1<e.indexOf(D,"3DObject")?"sceneweblayermultipatch":-1<e.indexOf(D,"Point")?"sceneweblayerpoint":-1<e.indexOf(D,"IntegratedMesh")?"sceneweblayermesh":
-1<e.indexOf(D,"PointCloud")?"sceneweblayerpointcloud":-1<e.indexOf(D,"Polygon")?"sceneweblayerpolygon":-1<e.indexOf(D,"Building")?"sceneweblayerbuilding":-1<e.indexOf(D,"Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===v?-1<e.indexOf(D,"Elevation 3D Layer")?"elevationlayer":-1<e.indexOf(D,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===v?"streamlayer":"vector tile service"===v?"vectortile":"datastore catalog service"===v?"datastorecollection":"geocoding service"===
v?"geocodeservice":"geoprocessing service"===v?-1<e.indexOf(D,"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):v="web map"===v||"cityengine web scene"===v?"maps":"web scene"===v?-1<e.indexOf(D,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===v||"mobile application"===v||"application"===v||"operation view"===v||"desktop application"===v?"apps":"map document"===v||"map package"===v||"published map"===v||"scene document"===v||"globe document"===
v||"basemap package"===v||"mobile basemap package"===v||"mobile map package"===v||"project package"===v||"project template"===v||"pro map"===v||"layout"===v||"layer"===v&&-1<e.indexOf(D,"ArcGIS Pro")||"explorer map"===v&&e.indexOf(D,"Explorer Document")?"mapsgray":"service definition"===v||"csv"===v||"shapefile"===v||"cad drawing"===v||"geojson"===v||"360 vr experience"===v||"netcdf"===v||"administrative report"===v?"datafiles":"explorer add in"===v||"desktop add in"===v||"windows viewer add in"===
v||"windows viewer configuration"===v?"appsgray":"arcgis pro add in"===v||"arcgis pro configuration"===v?"addindesktop":"rule package"===v||"file geodatabase"===v||"sqlite geodatabase"===v||"csv collection"===v||"kml collection"===v||"windows mobile package"===v||"map template"===v||"desktop application template"===v||"gml"===v||"arcpad package"===v||"code sample"===v||"form"===v||"document link"===v||"earth configuration"===v||"operations dashboard add in"===v||"rules package"===v||"image"===v||
"workflow manager package"===v||"explorer map"===v&&-1<e.indexOf(D,"Explorer Mapping Application")||-1<e.indexOf(D,"Document")?"datafilesgray":"network analysis service"===v||"geoprocessing service"===v||"geodata service"===v||"geometry service"===v||"geoprocessing package"===v||"locator package"===v||"geoprocessing sample"===v||"workflow manager service"===v?"toolsgray":"layer"===v||"layer package"===v||"explorer layer"===v?"layersgray":"scene package"===v?"scenepackage":"mobile scene package"===
v?"mobilescenepackage":"tile package"===v||"compact tile package"===v?"tilepackage":"task file"===v?"taskfile":"report template"===v?"report-template":"statistical data collection"===v?"statisticaldatacollection":"insights workbook"===v?"workbook":"insights model"===v?"insightsmodel":"insights page"===v?"insightspage":"insights theme"===v?"insightstheme":"hub initiative"===v?"hubinitiative":"hub page"===v?"hubpage":"hub site application"===v?"hubsite":"hub event"===v?"hubevent":"relational database connection"===
v?"relationaldatabaseconnection":"big data file share"===v?"datastorecollection":"image collection"===v?"imagecollection":"desktop style"===v?"desktopstyle":"style"===v?"style":"dashboard"===v?"dashboard":"raster function template"===v?"rasterprocessingtemplate":"vector tile package"===v?"vectortilepackage":"ortho mapping project"===v?"orthomappingproject":"ortho mapping template"===v?"orthomappingtemplate":"solution"===v?"solutions":"geopackage"===v?"geopackage":"deep learning package"===v?"deeplearningpackage":
"real time analytic"===v?"realtimeanalytics":"big data analytic"===v?"bigdataanalytics":"feed"===v?"feed":"excalibur imagery project"===v?"excaliburimageryproject":"notebook"===v?"notebook":"storymap"===v?"storymap":"survey123 add in"===v?"survey123addin":"mission"===v?"mission":"mission report"===v?"missionreport":"quickcapture project"===v?"quickcaptureproject":"pro report"===v?"proreport":"urban model"===v?"urbanmodel":"web experience"===v?"experiencebuilder":"web experience template"===v?"webexperiencetemplate":
"workflow"===v?"workflow":"kernel gateway connection"===v?"kernelgatewayconnection":"insights script"===v?"insightsscript":"hub initiative template"===v?"hubinitiativetemplate":"storymap theme"===v?"storymaptheme":"knowledge graph"===v?"knowledgegraph":"native application"===v?"nativeapp":"native application installer"===v?"nativeappinstaller":"link chart"===v?"linkchart":"investigation"===v?"investigation":"ogcfeatureserver"===v?"features":"pro project"===v?"proproject":"insights workbook package"===
v?"insightsworkbookpackage":"apache parquet"===v?"apacheparquet":"maps";return v?a.toUrl("../css/images/item_type_icons/"+v+"16.png"):null},_getIsPremiumContent:function(){var v=this.typeKeywords,D=!1;if(-1<e.indexOf(v,"Requires Subscription")||-1<e.indexOf(v,"Requires Credits"))D=!0;return D},_getPremiumIconUrl:function(){var v=this.typeKeywords,D;this.isPremiumContent&&(D=-1<e.indexOf(v,"Requires Credits")?"premiumcredits":"premiumitem");return D?a.toUrl("../css/images/item_type_icons/"+D+"16.png"):
null},getThumbnailUrl:function(v){var D=this.thumbnailUrl;D&&v&&(D+=(-1===D.indexOf("?")?"?":"\x26")+"w\x3d"+v);return D}}),B=w([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(v){p.mixin(this,v);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?r.formatUrl(this.url+"/info/"+this.banner):
"";this.thumbnail=this.thumbnail?r.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?r.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var D in this.listingProperties)this[D]&&(this.listingProperties[D]=
this[D]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=e.map(this.screenshots,p.hitch(this,function(I){return r.formatUrl(this.url+"/info/"+I)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?r.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):r.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return r.requestToTypedArray(this.commentsUrl,
null,null,u,{item:this})},getVendor:function(){return this.vendor}}),E=w([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(v){p.mixin(this,v);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=v.listing?new B(p.mixin(v.listing,{portal:this.portal})):null}}),F=w([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(v){p.mixin(this,
v);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=r.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return r.request(this.url+"/users")},queryItems:function(v,D){v=r.formatQueryParams({},v,D);v.q="group:"+this.id+(v.q?" "+v.q:"");return this.portal.queryItems(v)},getThumbnailUrl:function(v){var D=this.thumbnailUrl;D&&v&&(D+=
(-1===D.indexOf("?")?"?":"\x26")+"w\x3d"+v);return D}}),G=w([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(v){p.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return r.requestToTypedArray(this.url,null,null,A,{portal:this.portal,folderId:this.id})}}),H=w([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(v){p.mixin(this,v);this.url=(this.portal&&
this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?r.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return t(r.request(this.url).then(p.hitch(this,function(v){return r.resultsToTypedArray(F,{portal:this.portal},v.groups)})))},getNotifications:function(){return r.requestToTypedArray(this.url+
"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return r.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return r.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return t(this.getContent(null,{num:1}).then(function(v){return v.folders}))},getItems:function(v){return t(this.getContent(v).then(function(D){return D.items}))},getItem:function(v){return r.request(this.portal.portalUrl+
"content/items/"+v).then(p.hitch(this,function(D){return new A(p.mixin(D,{portal:this.portal}))}))},getContent:function(v,D){var I=this.url.replace("/community/","/content/")+(v?"/"+v:"");return r.request(I,D).then(p.hitch(this,function(K){K.folders=r.resultsToTypedArray(G,{portal:this.portal},K.folders);K.items=r.resultsToTypedArray(A,{portal:this.portal,folderId:v},K.items);return K}))},getThumbnailUrl:function(v){var D=this.thumbnailUrl;D&&v&&(D+=(-1===D.indexOf("?")?"?":"\x26")+"w\x3d"+v);return D}});
w={Portal:w([l],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(v){v=p.isObject(v)?v:{url:v};this.registerConnectEvents();q={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};v.self?(q.self=v.self,p.mixin(this,{url:v.url||h.getProtocolForWebResource()+"//"+(v.self.urlKey?v.self.urlKey+"."+v.self.customBaseUrl:v.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",v=v.self.user?this.signIn():
this.init(this.url)):(v.url&&p.mixin(this,{url:v.url}),v=this.init(this.url));v.then(p.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(v,D){v=(v||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==v.indexOf("/sharing")?v+"/":v+"/sharing/rest/";return this._getSelf(this.portalUrl).then(p.hitch(this,function(I){q.self=p.mixin({},I);(I=I.user)&&D&&(q.currentToken=D&&D.token,q.loggedInUser=new H(p.mixin(I,{portal:this,credential:D})));q.self.id&&!1===q.self.canSearchPublic&&
(q.extraQuery=" AND orgid:"+q.self.id);p.mixin(this,q.self);this.thumbnailUrl=r.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),p.hitch(this,function(I){this.onError(I);throw I;}))},signIn:function(){var v=new k,D=p.hitch(this,function(){this._onSignIn().then(p.hitch(this,function(){v.resolve(q.loggedInUser)}),
p.hitch(this,function(I){v.reject(I)}))});if(q&&q.self)q&&q.loggedInUser?setTimeout(function(){v.resolve(q.loggedInUser)},0):D();else this.on("load",p.hitch(this,function(){D()}));return v},signOut:function(){q.loggedInUser.credential&&q.loggedInUser.credential.destroy();q.loggedInUser=null;q.options.disableIdentityLookup=!0;r.clearFieldsFromObject(q.self,this);q.self=null;return this.init(this.url)},getPortalUser:function(){return q.loggedInUser},addResource:function(v,D){return r.request(this.portalUrl+
"portals/self/addResource",{key:v,text:D},{usePost:!0})},update:function(v){return r.request(this.portalUrl+"portals/self/update",v,{usePost:!0})},queryGroups:function(v,D){return this._queryPortal(this.portalUrl+"community/groups",r.formatQueryParams({},v,D),F)},queryItems:function(v,D){return this._queryPortal(this.portalUrl+"search",r.formatQueryParams({},v,D),A)},queryListings:function(v){v=r.formatQueryParams({},v,!0);var D="";v.q&&-1<v.q.toLowerCase().indexOf("mylistings:true")?(v.q=v.q.toLowerCase().replace("mylistings:true",
""),D="?mylistings\x3dtrue"):v.q||(v.q='""');return this._queryPortal(this.portalUrl+"content/listings"+D,v,B)},queryCustomerList:function(v,D){v=r.formatQueryParams({},v,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",v)},getProvisions:function(){return this.getCustomers().then(p.hitch(this,function(v){return v.purchases}))},getInterests:function(){return this.getCustomers().then(p.hitch(this,function(v){return v.interests}))},getTrials:function(){return this.getCustomers().then(p.hitch(this,
function(v){return v.trials}))},getCustomers:function(v){return r.request(this.portalUrl+"portals/self/customers",{status:v||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(v){return v.purchases})},getMyInterests:function(){return this.getPurchases().then(function(v){return v.interests})},getPurchases:function(){return r.request(this.portalUrl+"portals/self/purchases").then(p.hitch(this,function(v){v.interests=e.map(v.interests,function(D){return p.mixin(D.provision,{listing:D.listing})});
v.purchases=e.map(v.purchases,function(D){return p.mixin(D.provision,{listing:D.listing})});v.trials=e.map(v.trials,function(D){return p.mixin(D.provision,{listing:D.listing})});v.interests=r.resultsToTypedArray(E,{portal:this},v.interests);v.trials=r.resultsToTypedArray(E,{portal:this},v.trials);v.purchases=r.resultsToTypedArray(E,{portal:this},v.purchases);return v}))},queryUsers:function(v,D){return this._queryPortal(this.portalUrl+"community/users",r.formatQueryParams({sortField:"username"},v,
D),H)},_onSignIn:function(){q.options.disableIdentityLookup=!1;q.self=null;return c.id.getCredential(this.portalUrl).then(p.hitch(this,"init",this.url)).then(function(){return q.loggedInUser},p.hitch(this,function(v){q.options.disableIdentityLookup=!0;this.onError(v);throw v;}))},_getSelf:function(v){v+="portals/self";if(q.self){var D=new k;setTimeout(function(){D.resolve(q.self)},0)}else D=r.request(v,{culture:m.locale});return D},_queryPortal:function(v,D,I){var K=p.mixin({num:10,start:0,sortField:"title",
sortOrder:"asc"},D),S=["start","query","num","nextStart"];v=r.request(v,K).then(p.hitch(this,function(N){N.results=r.resultsToTypedArray(I,{portal:this},N);N.queryParams=p.mixin({},K);N.nextQueryParams=p.mixin(K,{start:N.nextStart});return r.clearFieldsFromObject(S,N)}));v=p.delegate(v);v.queryParams=p.mixin({},K);v.nextQueryParams=k.when(v,function(N){return N.nextQueryParams});return t(v)}}),PortalFolder:G,PortalGroup:F,PortalItem:A,PortalUser:H,PortalComment:u,PortalRating:z,PortalUtil:r,PortalResult:t,
PortalListing:B};b("extend-esri")&&p.mixin(p.getObject("arcgis",!0,c),w);return w})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/StandardGraphicReportTemplates":function(){define(["dojo/_base/lang","../../config","dojo/i18n!esri/nls/jsapi"],function(w,p,m){function k(){return a?a:a={"3.25":{"US.census":[{id:"e2a6868f979f4e37896b631581ae4918",alias:"demographic-summary"},{id:"88420f4a98bb45cbacacbad67e23266e",alias:"key-facts"},{id:"efb6bee0a80d4801887ec4cf73aa67fc",alias:"marketing-profile"},
{id:"12867e4a89d5461fbbe3b9c6c181993a",alias:"at-risk-population"},{id:"6637be1fbddf4e948fbd09ce6a7a7888",alias:"portrait-property-flyer"},{id:"02c1124e916847249aa91b9ce48c2552",alias:"skyscraper"},{id:"3afd4c5089584b089af5b0037d74a9d1",alias:"transportation-to-work"},{id:"a696eae378974ed5a63510fa70bed011",alias:"health-care"},{id:"c931fc6ebdb440189a8bc6bd34115807",alias:"executive-summary-call-outs"},{id:"96096c8afa4847dea936942b1f89acb5",alias:"tapestry-profile"},{id:"7a20b92b48cc4e63bf7ba956295de948",
alias:"nearby-restaurants"}],"CA.census":[{id:"6c467040a8a64c33972045cf091bca5b",alias:"key-facts"}],"*.census":[{id:"11c4cec3c0d34c4aa51cd8877e2db4ef",alias:"key-facts"}]},"3.26":{"US.census":[{id:"a5161c2ca50d44429daf2bf9dbe73eb5",alias:"demographic-summary"},{id:"693269bfbf6c4851901a3c9c56550294",alias:"key-facts"},{id:"aceee34210e748ba95cb9cae21e196b9",alias:"marketing-profile"},{id:"a7936c5ce77c4d698140db21ab1a7858",alias:"at-risk-population"},{id:"8d42e32b12154bc580af89483c208d56",alias:"portrait-property-flyer"},
{id:"7be44b15e29847a383906aac5699cf00",alias:"skyscraper"},{id:"537230b385fb45d9a8d6e59265e36fbf",alias:"transportation-to-work"},{id:"89c6ff4d96de4acaa024b7a408f186b0",alias:"health-care"},{id:"0fa71e0a74294e7b8265e4cd507c7d17",alias:"executive-summary-call-outs"},{id:"f2754d21223a491798dbc0ef2c71858f",alias:"tapestry-profile"},{id:"866e6a839ee348dfae5a8ee9bdafbfc0",alias:"nearby-restaurants"},{id:"f808dfceddd149ff85a9d8825d4e5a5f",alias:"multi-ring-comparison"}],"CA.census":[{id:"f982018306a34cc58756ce0ed78c6b0c",
alias:"key-facts"},{id:"c47fa8d040364abe80d288bb606da576",alias:"multi-ring-comparison"}],"*.census":[{id:"3813621424fc4443af1dcecab65be89c",alias:"key-facts"},{id:"dd1fa81faaf94541831cae16788393ab",alias:"multi-ring-comparison"}]},"3.27":{"US.census":[{id:"3c6959a7c7c4450f9bdcc7063c9023d5",alias:"demographic-summary"},{id:"4cc0a5e007d946d5909524fcf80bc666",alias:"key-facts"},{id:"fb9b9a501c974540a52ab6d1027a8bcc",alias:"marketing-profile"},{id:"b0f05d5926d6444da40d6bf0c5c9846e",alias:"at-risk-population"},
{id:"5cf609b26ce24633a2edc58d7ebeb3fd",alias:"portrait-property-flyer"},{id:"686d7af60bcb410db051ec8465889231",alias:"skyscraper"},{id:"a79a099ab7be4c34a9b0b28831b1aa9c",alias:"transportation-to-work"},{id:"6f64bb63647246dcb5d268fc301614f6",alias:"health-care"},{id:"99e919a7e9fd4fa2b55779f0dc118da8",alias:"executive-summary-call-outs"},{id:"f32b961757f347e2976ba011ee20cb13",alias:"tapestry-profile"},{id:"a266260cc3ec46c1b66c86f263feb8e4",alias:"nearby-restaurants"},{id:"dab290529fd44063a2d83e03a8dc49eb",
alias:"multi-ring-comparison"},{id:"1499719e83754c81ae1477223c0dde39",alias:"property-details"},{id:"9c441f80f80348c8b5b747e2cf2a2ccd",alias:"employment-overview"},{id:"bb59cd9292ec47a0928900c5fb9c17b8",alias:"office-market-profile"},{id:"6f75892c4a5f4f5ba3d0edb4d8a0b13b",alias:"health-care-and-insurance"},{id:"a7524b019e1f482493e43f32ab9568a0",alias:"demographic-profile"},{id:"45d528a3865547bb89792d4517db2e7a",alias:"commute-profile"},{id:"acf5c12b54b64550ad7f582c9c97ed28",alias:"target-market-summary"},
{id:"489d923d29d44c2681171a590fb37742",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"91d1e8c9d0ea482b9947dfe4bdfbe0ba",alias:"key-facts"},{id:"e05eb227df9b4ceba0ace202b1d0c1e2",alias:"multi-ring-comparison"}],"NL.NLD_4orange":[{id:"77e9461032b24e47b6c6b643cf02381f",alias:"housing-profile"},{id:"b80fd38e5f43448da530521832e0dfba",alias:"insurance-profile"},{id:"d36520d68d8e449c9f300be0e800f698",alias:"media-profile"},{id:"bad567fdf36e48e9a5108b66c96bf0ae",alias:"personicx-segmentation"},{id:"5726fe6cad4c491a863eff64e538231c",
alias:"spending-profile"}],"JP.EsriJapan":[{id:"e4bd37bb10c74798a3600ca7484846ac",alias:"base-demographic-profile"},{id:"a5d7db5138644a9e95d9af1b40b31bb9",alias:"demographic-comparison-profile"},{id:"205b45f626f84650a1ca948be4f97411",alias:"future-population-profile"},{id:"ee12a9d9a2e04fb6b93628f075719bc9",alias:"population-households-profile"},{id:"3f857a2a8d14488abfcec383197e5a0b",alias:"consumer-spending-profile"},{id:"77369125467c4c9a8f3b9a628eda3347",alias:"base-demographic-profile-ja"},{id:"08abfdb8b8174846bd3723f094a88d86",
alias:"demographic-comparison-profile-ja"},{id:"e5db2ced023d4c53a0ef9fe231d7fd15",alias:"future-population-profile-ja"},{id:"4c55f8ddb53345298e59bccfeb45e489",alias:"population-households-profile-ja"},{id:"24c8ef9a8c5d45c78791a84445eed29d",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"7aa819f9816a494ab28ab7604553f488",alias:"base-demographic-profile"},{id:"710051b492c3481a83e01bd6bf3dd3bf",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d046bf33ce04b598afd391a0dd195c9",alias:"base-demographic-profile"}],
"PR.ACS":[{id:"d8b9f282034d47db808175fef56a15e2",alias:"at-risk-population"},{id:"eab5646a29324a6282db3b8ca47bf2b3",alias:"commute-profile"},{id:"ed6b5a0736aa4e04862a1a4307c608cc",alias:"demographic-summary"},{id:"a4c64a9006544751ad18ce75a401112e",alias:"health-care-and-insurance"},{id:"96d00aefd766428394d6ee6698a56591",alias:"coronavirus-impact-planning"}],"*.census":[{id:"365d52e6bac147a68a12eee229eb9b6b",alias:"key-facts"},{id:"0f7d2ba850fa40579cae1342001d80d7",alias:"multi-ring-comparison"}]},
"3.28":{"US.census":[{id:"45cb423066194f5f98c6f4ff81124db3",alias:"demographic-summary"},{id:"98d5848a944b4787b2ca038256c7878d",alias:"key-facts"},{id:"879849b937ec4eb0bef31ff2861251f2",alias:"marketing-profile"},{id:"456d7a22adc8439a93d4164ed3846243",alias:"at-risk-population"},{id:"c7e01c953c7e4b70a46ca6408c3ed000",alias:"portrait-property-flyer"},{id:"34330a47546f412d9d09632347da11d3",alias:"skyscraper"},{id:"d349b23334454274ab2a7a20a0a9a55d",alias:"transportation-to-work"},{id:"02086fe6b92b4ff5a9a7a8d172540fc9",
alias:"health-care"},{id:"5d8b51e2b27b4832b193d9932bc6f862",alias:"executive-summary-call-outs"},{id:"1b07c48d4b58423990023b43150d7e99",alias:"tapestry-profile"},{id:"c21dd81cd9064649a4bb454530f12790",alias:"nearby-restaurants"},{id:"4d8c102ca7324d09931cfe65ab3a1168",alias:"multi-area-comparison"},{id:"9ed3b5dba02d4b46a3e063c8405fd0cc",alias:"property-details"},{id:"db0606e41ee7485f88122069e74a9b6b",alias:"employment-overview"},{id:"2a43c204c1dd4a758087372d7d7d786b",alias:"office-market-profile"},
{id:"f59a3621583d44bbafa14035c2ae3947",alias:"health-care-and-insurance"},{id:"ad58f06a480c4b16aadcff789f543cca",alias:"demographic-profile"},{id:"bd7390ab31dc485489733d22475db0ed",alias:"commute-profile"},{id:"38eab30d7e6840da869fee264ca9fc40",alias:"target-market-summary"},{id:"03b420681f6a466fb14e254669583244",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"6c0a945e91d44640a08776e5bed1b297",alias:"key-facts"},{id:"7464708f379b463c8eec8aed1315989f",alias:"multi-area-comparison"},{id:"425150e63a5346659721bfc0be94511b",
alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"e602295128e34ea2b2b50a1aa04253bf",alias:"housing-profile"},{id:"3d0f7e63256b43a59fcf037502380685",alias:"insurance-profile"},{id:"fbc685a8837945eb82cde447acfda982",alias:"media-profile"},{id:"da063bf765e341708fad9eeec07b09c7",alias:"personicx-segmentation"},{id:"5003049227804e5cba6ad3bfdbf2dba7",alias:"spending-profile"}],"JP.EsriJapan":[{id:"bd9685651f484488ba24c2838a6a9000",alias:"base-demographic-profile"},{id:"f36b1cc0b9d84ea4b4db1742e875ff80",alias:"demographic-comparison-profile"},
{id:"99a48ec44af94af290ab0e6d691a31c7",alias:"future-population-profile"},{id:"b29af5c2e6754f61ba38ad3128668095",alias:"population-households-profile"},{id:"d568dd78527c462e83eb68cb9ca02f09",alias:"consumer-spending-profile"},{id:"a29c9143bd044dad9475e6b6ee292e46",alias:"base-demographic-profile-ja"},{id:"3bb56ea4c4bd4a2aaa124e2e3a0fad60",alias:"demographic-comparison-profile-ja"},{id:"28ef1772bd884db5ae8885731318e503",alias:"future-population-profile-ja"},{id:"7896c8adf89e4f47ab6e0acc7759a1cd",alias:"population-households-profile-ja"},
{id:"6c28a650baaa40cda26f4fb372b14d0f",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"31cf6eac0339433f8b4b5f8b62e47554",alias:"base-demographic-profile"},{id:"ccf6bc8472ae4ca8852fec621197fec3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"5b60de05c1694a78b6b6ce8e10a48cd4",alias:"base-demographic-profile"}],"PR.ACS":[{id:"f1d79448541642648293f4b75d7b595a",alias:"at-risk-population"},{id:"7943a0c2f1ca4cad967bb0bfeb8af3a4",alias:"commute-profile"},{id:"ef0579311aac4d14a771389f23263445",
alias:"demographic-summary"},{id:"4edd44657989475493ca92a69e80f08c",alias:"health-care-and-insurance"},{id:"c440f0c671264732b16c39f6326a5987",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5886dbf41f984a0a8ec4eb4b5e231584",alias:"key-facts"},{id:"41727f86773c4cf2a37fd99446ea83fc",alias:"multi-area-comparison"}]},"3.29":{"US.census":[{id:"368e2bf603fb42c4aa3dac0fce50cdf8",alias:"demographic-summary"},{id:"a32be4a9e51d4affa4cc1ddc812cb629",alias:"key-facts"},{id:"df985e2579004a3292c3d00615d53c39",
alias:"marketing-profile"},{id:"8c56287427f84ae8b59142fc5bf1df4c",alias:"at-risk-population"},{id:"d95e40c3c93d480ab4d1d0b0adbbc5d4",alias:"portrait-property-flyer"},{id:"f989f9b820cd44d390187402447051b4",alias:"skyscraper"},{id:"0d322ac073584079a8cd6a1bda981fe7",alias:"transportation-to-work"},{id:"2b9f186425844ec390584b739ffca026",alias:"health-care"},{id:"3e9ccce6cca64e70be19ed789de5f290",alias:"executive-summary-call-outs"},{id:"2a812da4de404ceba3969472d32c42e7",alias:"tapestry-profile"},{id:"2cc25f7b5f194012b39c90b5f9bdb8d3",
alias:"nearby-restaurants"},{id:"72d1e9e4cdf94bf9a2020f8214bef9ca",alias:"multi-area-comparison"},{id:"27034d31ab124b9bbe4e63b7df2a0d90",alias:"property-details"},{id:"4a59e329df06480eaa534513eb15f465",alias:"employment-overview"},{id:"d4fe343c4d6f4bea840a715f5b033d2d",alias:"office-market-profile"},{id:"cb2224cc9cb24ce288da729f0650ebf0",alias:"health-care-and-insurance"},{id:"484825ed241c49d58eaf718d46772051",alias:"demographic-profile"},{id:"afee0a2eb16e46cc9bc61b5d82133249",alias:"commute-profile"},
{id:"1d32fabd95b446e99049aa0a04f5508e",alias:"target-market-summary"},{id:"783847f3f03f402d855985b45a8bf2df",alias:"population-trends"},{id:"83aef26e61ca41da9b269c06cc418d79",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"73f1c835b1624ff0b29a6a364f7ba6dc",alias:"key-facts"},{id:"84b05aed2d2f478eb6bb1e4749811cf1",alias:"multi-area-comparison"},{id:"ea0737e1e7554c5caf2be381c28369cc",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"3d8cb941742d4fffbaca48c65b4bd5b5",alias:"housing-profile"},{id:"f126395e7bcc494899cfc1a13a34be1f",
alias:"insurance-profile"},{id:"8da901e5729e457683f2e4f7081b1bda",alias:"media-profile"},{id:"f9ba90b373a245e1b8fd14a027cf1ba5",alias:"personicx-segmentation"},{id:"81fc53b93a0c4269848ce2ae22ec19e2",alias:"spending-profile"}],"JP.EsriJapan":[{id:"79b2394ea50d44f3b4c1b4bdabed6cc2",alias:"base-demographic-profile"},{id:"9e824283a8954639ab0c0ac237b9e14d",alias:"demographic-comparison-profile"},{id:"f5812c2f542644368c0ff34eef7b731c",alias:"future-population-profile"},{id:"b51d7dde64c34a9796418c1788a6762d",
alias:"population-households-profile"},{id:"48a993403d30431784b7bf47a06e4261",alias:"consumer-spending-profile"},{id:"531c59f55de646d5a78fef6c903a678f",alias:"base-demographic-profile-ja"},{id:"cf553f2090a64662a1f9efa8a355964c",alias:"demographic-comparison-profile-ja"},{id:"321150c8ac1049fc9cd253cb12c0b0bc",alias:"future-population-profile-ja"},{id:"e0d6dea7667c47b49f159c207fc311e9",alias:"population-households-profile-ja"},{id:"ba5f50bd617e4519a9322ec24b9cd5b1",alias:"consumer-spending-profile-ja"}],
"DE.DEU_Nexiga":[{id:"60ec4173caac4f87a831447d5bf7b450",alias:"base-demographic-profile"},{id:"98d3d99aadba47a8ab53b0dcd4eebf22",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3978b02fbc354acca14d4e959fa5b531",alias:"base-demographic-profile"}],"PR.ACS":[{id:"e2141ddd911c4aadb403db1e858edb51",alias:"at-risk-population"},{id:"78360505668743e0a39ac0d085612dfa",alias:"commute-profile"},{id:"f296deceb6204f85853ac85e98ba3552",alias:"demographic-summary"},{id:"8a1c4d55a77c4cf9805cec380727fc5a",alias:"health-care-and-insurance"},
{id:"8dd9de996ba0491d82a2ee8f01cd55b0",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5645a1d6023c4d8a9d02943ad57a7ab2",alias:"key-facts"},{id:"e29f56b6d67447e08a45d08981db987c",alias:"multi-area-comparison"}]},"3.30":{"US.census":[{id:"981382ffe90c40bbb60318b1ce338ba4",alias:"demographic-summary"},{id:"f62dec6c9750496796fdc0619c4c107f",alias:"key-facts"},{id:"f737236a8b644f1597a4457862fa169c",alias:"marketing-profile"},{id:"4746caa1254e4d93af121ce74e9aa8d6",alias:"at-risk-population"},{id:"0bcd882dd7a34fd39ace173243534df0",
alias:"portrait-property-flyer"},{id:"4a340b8e642945f6bb7a381d07fb26b6",alias:"skyscraper"},{id:"3e2a42b2d03e42cf91e9727f67273ec3",alias:"transportation-to-work"},{id:"c26e9577d48b4499a07b75215c97c394",alias:"health-care"},{id:"cbc348e601104d0c9bbe971c0297142a",alias:"executive-summary-call-outs"},{id:"d65aaa42b9824864b40eb1a75f2e4cbd",alias:"tapestry-profile"},{id:"d6242e8dd02142bdb98b85f094d5cd9b",alias:"nearby-restaurants"},{id:"aed9e00873fa4010881daaa90e7e8d71",alias:"multi-area-comparison"},
{id:"eb0e0df0856e43cdb874f96945c566ac",alias:"property-details"},{id:"e29ebec17c2c4f42a1a929c40163bb90",alias:"employment-overview"},{id:"b84d0f0f5c69461ea52ce2702f7327d6",alias:"office-market-profile"},{id:"5eba537af36e4490869917ee888bacc4",alias:"health-care-and-insurance"},{id:"afb01a3f91374f65ba4c6be9229f2c15",alias:"demographic-profile"},{id:"8074d1bbbfed4858bb24400a0c7bf224",alias:"commute-profile"},{id:"33621d85b1df4547851c904aaa7d44d2",alias:"target-market-summary"},{id:"440170eaae5240e79abbb0bb7de22b27",
alias:"population-trends"},{id:"0576deee38714cc69357de9675ab39ae",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e054928366604fc7b401dcb4a343cd4c",alias:"key-facts"},{id:"986bc92490234c2697d5771b9771166e",alias:"multi-area-comparison"},{id:"52233708250449bc84f906d86616cace",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"22a86d0f982d4b10934f32129f2674f9",alias:"housing-profile"},{id:"9811b2babd5f4283822782867476b92c",alias:"insurance-profile"},{id:"59957cc0524344449fc6035053bb6c4a",alias:"media-profile"},
{id:"2511035fed0140b8a7eb7ec7240e41eb",alias:"personicx-segmentation"},{id:"defc390648e543508be22704f1db659c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"91a180442f614c4d96fb40e33aa30948",alias:"base-demographic-profile"},{id:"e7415b6c9ff74922850851eac65ddbc6",alias:"demographic-comparison-profile"},{id:"12e9eb63e4834d3681e15196bfc64642",alias:"future-population-profile"},{id:"291cc1bc2cee455483c96f50e5916f1d",alias:"population-households-profile"},{id:"217c72b7d0534ebc81658c71917c3e15",alias:"consumer-spending-profile"},
{id:"48d5baf8e5574abda8fd776219fa0eb6",alias:"base-demographic-profile-ja"},{id:"01a7a0cbacf948b3b715e4f6c55aa5f2",alias:"demographic-comparison-profile-ja"},{id:"0317412d6fb541c9b4067923e314cad3",alias:"future-population-profile-ja"},{id:"0c826ce1e2de415aa2f7af3e615b1fe8",alias:"population-households-profile-ja"},{id:"201211e23758432db4a841dae8ba9428",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"ec6477ce41fa464fb38a360cad0d3da3",alias:"base-demographic-profile"},{id:"e53b2c145f544efaa7d7b4e802c3d747",
alias:"household-profile"}],"ES.ESP_AIS":[{id:"4483924cb42043ec85486c58e61a99ef",alias:"base-demographic-profile"}],"PR.ACS":[{id:"7e3b955c4d904624b4cea5d015e693a0",alias:"at-risk-population"},{id:"8927492627124fd0845de8c0dc02bd3f",alias:"commute-profile"},{id:"a308a300f3b4482ea57b4ea4a54ea5ef",alias:"demographic-summary"},{id:"5800acd3784e4a6d88e3228e1af1164f",alias:"health-care-and-insurance"},{id:"d40e2ba95fec40c6ad68ceddde4e160b",alias:"coronavirus-impact-planning"}],"*.census":[{id:"b9d1ca815d9a4a3ab35196ec299f0917",
alias:"key-facts"},{id:"6f6d601c2eef4bd1a87baa2652e7bb0b",alias:"multi-area-comparison"}]},"3.31":{"US.census":[{id:"784d0b69c02c4cac862b89b0e44cd8fb",alias:"demographic-summary"},{id:"f1bb3a222fab470dbb96a79a51496b2b",alias:"key-facts"},{id:"1780d5b264734757b86e4655d779b213",alias:"at-risk-population"},{id:"8c34121585894e91a50c493c360912f0",alias:"skyscraper"},{id:"1c314d9d06844d44b408caba6099b56b",alias:"executive-summary-call-outs"},{id:"4ee838a250084c9bad84f094895c793c",alias:"tapestry-profile"},
{id:"dfba27ac04694513aee257cdd185c8c2",alias:"nearby-restaurants"},{id:"d7cfb836282747199cf0febea42627cc",alias:"multi-area-comparison"},{id:"3a34213116a340a0bbd0d463025444a2",alias:"property-details"},{id:"b277b8572469425fa54c5506c3dbcdf3",alias:"employment-overview"},{id:"eaf35c41f5714f48a1aa61fcbd6ae05f",alias:"office-market-profile"},{id:"688f86931cc345f796154717dc6d0a15",alias:"health-care-and-insurance"},{id:"cb4edb43a1ae473ca651388b5c3fa54f",alias:"demographic-profile"},{id:"49224c10d4ac4c7ab0f8e016165ce235",
alias:"commute-profile"},{id:"db67445e4dfa4b6c8c1e5fd30b229c92",alias:"target-market-summary"},{id:"6c9360bfec9041ddba0f03440cb446ca",alias:"population-trends"},{id:"2ae07567c78847abacb14773ffe9dede",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"0704defc6960439ea5b9c484af15eb4c",alias:"key-facts"},{id:"ee01fe05db964878bc6fb627e55dc9b1",alias:"multi-area-comparison"},{id:"a426bb6d944a46658640aee2ba480866",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"710037ca0f024ec5abbe4cf9fecad23f",alias:"housing-profile"},
{id:"83bc643ea48344c892a8e9636e3677dd",alias:"insurance-profile"},{id:"53f63e3a9e854a8fa5e2c0222df6f848",alias:"media-profile"},{id:"ca9d66bf4bf940918129d0d5c97e0b50",alias:"personicx-segmentation"},{id:"ab19f90750fd469aa702f961b12eaee8",alias:"spending-profile"}],"JP.EsriJapan":[{id:"7f7c37e8f1fa4ab18b88368c12058eff",alias:"base-demographic-profile"},{id:"25a71f196b7e4db182be346264b442dd",alias:"demographic-comparison-profile"},{id:"e1075eaada7744a59ecabfc445dcd877",alias:"future-population-profile"},
{id:"8e2746d993584a7d94d0e66ca6dabdaa",alias:"population-households-profile"},{id:"bc9b91d7ae2c41a5bdece1d322ef6b88",alias:"consumer-spending-profile"},{id:"4f4736d5b2f842faaee83c57417c56b6",alias:"base-demographic-profile-ja"},{id:"bc400448bf3347619349cb7d4ccb3d87",alias:"demographic-comparison-profile-ja"},{id:"00ad3ad05e384d7ea764b356a950356d",alias:"future-population-profile-ja"},{id:"db94d6af598f48778c4471f9fa0d6e4f",alias:"population-households-profile-ja"},{id:"c5f602a9d6714dd6bd6a2b720eced874",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"b0cd9df36d0747ecac2bc34f055f5583",alias:"base-demographic-profile"},{id:"1751ab1998db4e6fb79f484069605cfd",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d17356c9a5549dbaa4096365e7eb703",alias:"base-demographic-profile"}],"PR.ACS":[{id:"7923818907d248ff8dcd7a5941e89b57",alias:"at-risk-population"},{id:"c0b28d710379405eac4ecb6a64d817b4",alias:"commute-profile"},{id:"4b64ec164a3d4830ae8a4cedf067f55a",alias:"demographic-summary"},{id:"5e47986d4c4644a29a28c92c077919f2",
alias:"health-care-and-insurance"},{id:"11c43309216b4d4a8fbd9a03cbcc22ec",alias:"coronavirus-impact-planning"}],"*.census":[{id:"f2d46b136acc46e2a2220388ddc43be0",alias:"key-facts"},{id:"228155af0095410c961cc82f33cdcf49",alias:"multi-area-comparison"}]},"3.32":{"US.census":[{id:"2ff58abf55554be4b19006c1e607afaa",alias:"demographic-summary"},{id:"a19b321e3adc441886e706bb9704005c",alias:"key-facts"},{id:"f1e3b0c93e1d44e299eb0b752f93b7db",alias:"at-risk-population"},{id:"3bbc96da4ca142c7b80b082b0f986110",
alias:"skyscraper"},{id:"1302184a2f584b86943b6c51d40acace",alias:"executive-summary-call-outs"},{id:"58035dcee74b4875bcd951b9174155d1",alias:"tapestry-profile"},{id:"4da5867dfda046ddb4b82ab01b7cb568",alias:"nearby-restaurants"},{id:"4498b9e35665480cafe3985f788ca61d",alias:"multi-area-comparison"},{id:"83a11d5f38f84e709ff1e24786e963b4",alias:"property-details"},{id:"0a0354d2d0d842d8bd8e05d40545fc5b",alias:"employment-overview"},{id:"400924aa9d5f4bee8b9dd0c0af21dfbb",alias:"office-market-profile"},
{id:"0a502ea9be8a43fdb6cd2fb5ff7503bc",alias:"health-care-and-insurance"},{id:"6147ac21718149a69ce15831f12181ed",alias:"demographic-profile"},{id:"4cdaddd947064ca690ebc06eec06ea57",alias:"commute-profile"},{id:"a8fe08a9c5114260a2a6f7ca436d36f6",alias:"target-market-summary"},{id:"34a17e1fceb646228e94089ec5e0890f",alias:"population-trends"},{id:"eb5d984d78364a6596cd97e0bf7901a5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"5f6e17f3729145959fb38ed2cd508970",alias:"key-facts"},{id:"c86709cbd72043708e09e4a641adfbd0",
alias:"multi-area-comparison"},{id:"bd9e3a17678843d4b1fa0716af91c231",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"470686f333d140c7b516294465eea037",alias:"housing-profile"},{id:"ab11f2f11ea3439197769a8189451bea",alias:"insurance-profile"},{id:"f0e6736d0f364d4b88ea613746e57c81",alias:"media-profile"},{id:"bfe0814bc0604a8faa48d01b026ef7a5",alias:"personicx-segmentation"},{id:"bd1d4c7be5ad41ae909267b5e9c5f2dc",alias:"spending-profile"}],"JP.EsriJapan":[{id:"b9dcbb9f31fd4be7bd96a2f89ce66a1c",alias:"base-demographic-profile"},
{id:"830ddad066c14c0dad27367a1b2ef132",alias:"demographic-comparison-profile"},{id:"7574f89d591f432da6ffdb94dcfdac52",alias:"future-population-profile"},{id:"ec8785d4c9cb446394e07fa7dd8451fd",alias:"population-households-profile"},{id:"9ac85d73187548b2bb0d0b4a73f88199",alias:"consumer-spending-profile"},{id:"e99eee823684452fbe564fe42dac9535",alias:"base-demographic-profile-ja"},{id:"8598d6a8550d46aebd3fd598ceaefae7",alias:"demographic-comparison-profile-ja"},{id:"fdf81ddffb374e3f898006ffa59e259e",
alias:"future-population-profile-ja"},{id:"f2468c2fef314427bd0865b460ef554f",alias:"population-households-profile-ja"},{id:"a96f28fb67024109b7c33161f3c9b308",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"40a5ba79d1204e78ac6deaa633ccd59b",alias:"base-demographic-profile"},{id:"2e647098c613476bbd92b1e07331cb86",alias:"household-profile"}],"ES.ESP_AIS":[{id:"7d82cae4b3fc4575bab56ec82f51c368",alias:"base-demographic-profile"}],"PR.ACS":[{id:"aa65005b75ba4e158afe63baa4bc5fe2",alias:"at-risk-population"},
{id:"292a269a813e4d7797baf88a76c11a8c",alias:"commute-profile"},{id:"b1d50628f2484689b9e39d49fc2e16a0",alias:"demographic-summary"},{id:"64839b7a81be45e287e805afc145652e",alias:"health-care-and-insurance"},{id:"44be3c42b70c4aee840fdeb4656b7922",alias:"coronavirus-impact-planning"}],"*.census":[{id:"ce57630d5cc24759809dd54bc1f82c91",alias:"key-facts"},{id:"c48ee0f58c8645bf8d689eb0db2d2936",alias:"multi-area-comparison"}]},"3.33":{"US.census":[{id:"55689c3ee7c1490e83accae002a8d164",alias:"demographic-summary"},
{id:"173e40bebc9d426a8e4680242acafea4",alias:"key-facts"},{id:"218eba57314e476ba16d1d5d40bb0182",alias:"at-risk-population"},{id:"3d470c82d8664e34b5026675596a7a87",alias:"skyscraper"},{id:"b9381f481f9f417f9647e0a2c8686979",alias:"executive-summary-call-outs"},{id:"d2800b578d1c4dd38ac95ce36882d881",alias:"tapestry-profile"},{id:"d9d8109c537943a78a24d65110291b43",alias:"nearby-restaurants"},{id:"2e835e58629a4f1e8192a729792b638f",alias:"multi-area-comparison"},{id:"6f3c32ed18834a4ea34b200e32ad7c33",
alias:"property-details"},{id:"6b1267be3fcb401bbcb49afd221713cf",alias:"employment-overview"},{id:"67e6efc15cb142c2a7cc30a48a59c769",alias:"office-market-profile"},{id:"9d8b447adc634228b24deb315107c0f0",alias:"health-care-and-insurance"},{id:"e45f96db738140869981b7443b6e2658",alias:"demographic-profile"},{id:"88d896eada3340dc8f8f1a2406bd48f9",alias:"commute-profile"},{id:"61492956f89a43ee86d245fca92858a2",alias:"target-market-summary"},{id:"91de69dede414856892dfdd94d2c4bab",alias:"population-trends"},
{id:"ee9c6fdc902e4ea09509e4d1bf1582b5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"dfb663da790248fe89504c662c42aae3",alias:"key-facts"},{id:"9873fcafe7194fcf9dffa8bbb8e001a1",alias:"multi-area-comparison"},{id:"4766ad797ef84968be4b4d0d54b98416",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"2212ff30c72143e6bcd9b8f26b01c47f",alias:"housing-profile"},{id:"c5efcef364ac4d8f82a6d54010ff75c7",alias:"insurance-profile"},{id:"e00894c000a94c42aefce551fe4e48c2",alias:"media-profile"},{id:"9d1da1c80e93407cb94589cee43a0f5a",
alias:"personicx-segmentation"},{id:"578199262aa646bf8b0713f3f2160af6",alias:"spending-profile"}],"JP.EsriJapan":[{id:"00bd747c0e48477d8df692848560a8a2",alias:"base-demographic-profile"},{id:"8ac4bd99dd1848dc98967419ab8d299c",alias:"demographic-comparison-profile"},{id:"88f94b5e3b6d414d913957b46e9f8394",alias:"future-population-profile"},{id:"41864cea64f3432a90006eb9a1f97608",alias:"population-households-profile"},{id:"44333ddcda38473d9a24010ed387eda7",alias:"consumer-spending-profile"},{id:"c35ebbeffb3b47fc9bbe3fc6283aaa7b",
alias:"base-demographic-profile-ja"},{id:"6c8a565d12954927b83daaad81409a25",alias:"demographic-comparison-profile-ja"},{id:"fcba5d5750514c9c93b2cb5222609d98",alias:"future-population-profile-ja"},{id:"7ad858351b6b4268b791b6cc24bf4e0f",alias:"population-households-profile-ja"},{id:"7d94fec6df6b4bff9ad14f5b711f18c6",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"571f323738c44d5a8b85d6d1e78d9c52",alias:"base-demographic-profile"},{id:"ef7624e051b6407488d8ad59b7979fc4",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"46e9329c7b2042fa84dfc1444f7decc0",alias:"base-demographic-profile"}],"PR.ACS":[{id:"0cb7ba4d407640ff967829ae7dd39396",alias:"at-risk-population"},{id:"7598826f28124abf9134801a607d56ce",alias:"commute-profile"},{id:"848c5cc8a4284065a0055b047a106adf",alias:"demographic-summary"},{id:"ecfc8db522004ea6848667e43589efd9",alias:"health-care-and-insurance"},{id:"4685d4c6c51e4ef392bdab89c0af8979",alias:"coronavirus-impact-planning"}],"*.census":[{id:"e4d3d1675d0044089f98a0f85ea16c8b",alias:"key-facts"},
{id:"33b6e27f43644811b8a58f15c0832a67",alias:"multi-area-comparison"}]},"3.34":{"US.census":[{id:"13cd4abfa97e43b9a5f9d4ddcb43f492",alias:"demographic-summary"},{id:"8861429ac06948f79cdcaaadb39d597f",alias:"key-facts"},{id:"1056cbef133f49a18409a192fbdc221a",alias:"at-risk-population"},{id:"25145b3ca4284dcc999c8d05182588cd",alias:"skyscraper"},{id:"7db2109b9f844be48f3e9154e992699f",alias:"executive-summary-call-outs"},{id:"f43c00c7b10241c097fb71fd5acf1ec2",alias:"tapestry-profile"},{id:"5fb04926a70345c18d6e21d9972ea347",
alias:"nearby-restaurants"},{id:"fdd0406e7815402cbf70716c68f4f7d6",alias:"multi-area-comparison"},{id:"7b716975146743b3a56762befaca71ad",alias:"property-details"},{id:"2c0be4fe4d7245e39b4afd9b8eb607a9",alias:"employment-overview"},{id:"c7f42910bc4b49209835e333c6078e71",alias:"office-market-profile"},{id:"7517a7a0409d42748c7ad94f81322bc2",alias:"health-care-and-insurance"},{id:"9919270d8b4846cb86761103def73e76",alias:"demographic-profile"},{id:"0bb0cc183ae145febbf3585518eeaae6",alias:"commute-profile"},
{id:"27853eda823e4574b0666d533ba39061",alias:"target-market-summary"},{id:"1df7c5b56b6e431982ef2da037c081c8",alias:"population-trends"},{id:"aaf4cc69e58f43ea87a0c1e493431dd8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"3a2fb82b034d48bbb9474f8c158c32a8",alias:"key-facts"},{id:"100f5b4d3cca46b38fd651e39cce97b1",alias:"multi-area-comparison"},{id:"41f7b7cfe9cb490593ace88aa627c6ca",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"f5b0ec07181f4b58a01ee0ca1df8201a",alias:"housing-profile"},{id:"a5e0b9b228da4ba5baaa5811c57f6552",
alias:"insurance-profile"},{id:"5d24250e3cc14b0db3b3f9884462efbf",alias:"media-profile"},{id:"f216c6574ae0453c951e66ee8fb6b20f",alias:"personicx-segmentation"},{id:"267c816948334e72ab9ed94253790e22",alias:"spending-profile"}],"JP.EsriJapan":[{id:"434e01eacc8e432c8400f5a5aef6f3e4",alias:"base-demographic-profile"},{id:"c44be13f1f8e412288e58048136681d6",alias:"demographic-comparison-profile"},{id:"35c0c12ce88645e7b7cbc0ffe73af85d",alias:"future-population-profile"},{id:"e87fb84cffaa49dba14b104d5b994aa5",
alias:"population-households-profile"},{id:"31a4988db08c41d6b9ce755b21ea0b26",alias:"consumer-spending-profile"},{id:"bf9f0203a4c14d03823beadb3f7ac043",alias:"base-demographic-profile-ja"},{id:"fdbe0d4286ab419981bc80a96b46bdb1",alias:"demographic-comparison-profile-ja"},{id:"7541a90960e345308f73e99e4da5c0a8",alias:"future-population-profile-ja"},{id:"f17ecec5cb8d4baeab7af68e1e9ce683",alias:"population-households-profile-ja"},{id:"ddaf4fb6c09447f6beaf4218139bfa20",alias:"consumer-spending-profile-ja"}],
"DE.DEU_Nexiga":[{id:"80c74804e91440f08695ba11456f96af",alias:"base-demographic-profile"},{id:"eb49e7ee98f04e1e914a4ce29bbfc7d3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"2e82d587530548569ad792556044342b",alias:"base-demographic-profile"}],"PR.ACS":[{id:"b473aa30469e4e2eabcca3da3f306e94",alias:"at-risk-population"},{id:"4e91594fb4fe4bf3be24380408f1b0c6",alias:"commute-profile"},{id:"321c818398684510ac62e3403ad6628f",alias:"demographic-summary"},{id:"1c3d60191b12460ca9a23dfcbce0c1db",alias:"health-care-and-insurance"},
{id:"5e6d78b1c4aa4168b7a3af5751d92261",alias:"coronavirus-impact-planning"}],"*.census":[{id:"530b6aa054664166a7a3ab5f1e82e19b",alias:"key-facts"},{id:"4b8ddef8e8f0406ea9b0a6c3d062186a",alias:"multi-area-comparison"}]},"3.35":{"US.census":[{id:"167425f5e12d421eb5784cd3681eab45",alias:"demographic-summary"},{id:"a1ab8710e1104385941825fe772d58fa",alias:"key-facts"},{id:"b3103dee1c994fa0916bd2b5c8ad2cab",alias:"at-risk-population"},{id:"0d261009a37247b4913266bc7093fedb",alias:"skyscraper"},{id:"2e7b01260b7840c196f30be52bf0b57e",
alias:"executive-summary-call-outs"},{id:"f47aebc28aa64c7f924053a8c1ee16bd",alias:"tapestry-profile"},{id:"36e6e303ebd943d4aa55604ba7dc0bc0",alias:"nearby-restaurants"},{id:"2f6307fad95f43b193ac74f236fa82d3",alias:"multi-area-comparison"},{id:"1ac99acae7cf44c182727aca1387acc9",alias:"property-details"},{id:"33cb09681a2147a5a07ae801596568c3",alias:"employment-overview"},{id:"8abaef7ba033448693dc6e6db55667c7",alias:"office-market-profile"},{id:"d29fcd15f66f46edad86499675b0ec03",alias:"health-care-and-insurance"},
{id:"e631e96f389b4075bc249c01d7f4d1b7",alias:"demographic-profile"},{id:"f97c7b4c8bf84390ad5a5807fb6ca417",alias:"commute-profile"},{id:"c9aef7db1d56495eaf0765e1f3a2d87d",alias:"target-market-summary"},{id:"b0f42ee46e80440cbb567a9a754ba7d4",alias:"population-trends"},{id:"ac36af7d86b74071a1cff5dc11f52ae8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e1b06b3915bc4e9ba702a604931390f2",alias:"key-facts"},{id:"aabeb118af9d4d0ba61177b82ff20e6c",alias:"multi-area-comparison"},{id:"d91115c92b96414b8bebd5d5bee75feb",
alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"dc94c7a6946a49b5a2f3997a1d751b5d",alias:"housing-profile"},{id:"caaaf49e014840a2a7b2497a970fabc0",alias:"insurance-profile"},{id:"67e0ad06a076477d81f853755fe34fd9",alias:"media-profile"},{id:"2b777fe129f149e9830fa5659d83d164",alias:"personicx-segmentation"},{id:"109338143a024b8eb70a1afcad567363",alias:"spending-profile"}],"JP.EsriJapan":[{id:"1f22c748ad5441a197c4c35ec3b88c6e",alias:"base-demographic-profile"},{id:"3321fc47d60b465bbf1f8312a2656c9d",alias:"demographic-comparison-profile"},
{id:"44f656e0dd634f248501030bec1e4e56",alias:"future-population-profile"},{id:"10bee112cd5c452db06145cc97739272",alias:"population-households-profile"},{id:"9d50b931700f4d7e8bfff04362baf2b7",alias:"consumer-spending-profile"},{id:"6f15e753e76741e5b11443d987f9e31b",alias:"base-demographic-profile-ja"},{id:"c89ff30c389b4af28c5e95d56b8b8a2b",alias:"demographic-comparison-profile-ja"},{id:"82cf4d90d4444a9fab0db12c38398ddb",alias:"future-population-profile-ja"},{id:"de0f4294ae8548f8852d3cfc44689262",alias:"population-households-profile-ja"},
{id:"aa60be09466d494dab06b7fd3f227838",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"f65d4ab5669541eb82f8cfa44892076d",alias:"base-demographic-profile"},{id:"8f24b985758840bc865eb510c3a096c4",alias:"household-profile"}],"ES.ESP_AIS":[{id:"19973b06ff48411cbe8da96db2201889",alias:"base-demographic-profile"}],"PR.ACS":[{id:"08263fc5aa27402284ad1dd80de03ffe",alias:"at-risk-population"},{id:"1386ceb53e0741428b78182d5ad1295c",alias:"commute-profile"},{id:"52ca001ddcf54d4eab0bbc476a962486",
alias:"demographic-summary"},{id:"79480fbe1f5048b69bc0611a2828d74b",alias:"health-care-and-insurance"},{id:"4a9c5dbf1ee6480bbed9a48bdb8aa2ed",alias:"coronavirus-impact-planning"}],"TH.EsriThailand":[{id:"1b202dbb81d7436c91dbd98f7f16da74",alias:"demographic-by-gender"},{id:"a7575375c72244e3819a694bf6dcbd52",alias:"key-facts-circle"},{id:"2403e972375d4b178185c2dbcf94979f",alias:"market-indicators"},{id:"575cfdd3fa9b4e8fafced3a47944156d",alias:"nearby-finance"},{id:"48ee9e3d4a0b4a208a3257ef2cc07692",
alias:"nearby-restaurants"},{id:"d446734d5e3e4d13a4c1aebdd9497793",alias:"population-profile"}],"IE.census":[{id:"e6ef23654f6e48fa8854931b539418ac",alias:"community-profile"},{id:"83d14bb8a70e415e9b7d4df3a6a32690",alias:"population-and-spending-profile"},{id:"6bdafe103ba647ed9fb1de0ac21412ea",alias:"site-statistics"},{id:"6e388a60f9bc4194b79ac26140bfb29e",alias:"market-indicators"}],"FR.census":[{id:"938a7f87e6fd4b238be125bb2b25e0ec",alias:"market-indicators"}],"FR.FRA_EsriFrance":[{id:"4a53f2a681c54186a29b8e0f21b0d691",
alias:"market-summary"},{id:"35a06097a0e5427c87f8d14235fb8655",alias:"summary"}],"GB.census":[{id:"60d7a69925de41719c5a1779cbe2f9fc",alias:"market-indicators"}],"AU.AUS_ABS":[{id:"bfaa3c492a714a2292cc195a4cec7157",alias:"chain-link"},{id:"a6f5005fc71d4e3692ba2dccbc9085c6",alias:"community-profile"},{id:"4890c1ff7a7c464cb37650a76b77ef20",alias:"hexagon-facts-dark"},{id:"685c139ab196404e992bbf3a5c1788c2",alias:"hexagon-facts-light"},{id:"8a7f81f303c64baf93740102f5142420",alias:"international-community-profile"},
{id:"558a0b0e8c9c45b5b5d5aa73525de87b",alias:"key-facts-abs"},{id:"9fe2117084584005a1724635ebcb7a03",alias:"occupation-profile"}],"*.census":[{id:"de0d25e45d4549439c440d9f893afe18",alias:"key-facts"},{id:"19f9971696f74bae8c8fd383a61abac3",alias:"multi-area-comparison"},{id:"8ce8f38bdb87448eb09c031e3206aa76",alias:"key-facts-circle"}]}}}function e(f){var h=k();f=f||p.jsapiVersion;f=h[f]||h["3.35"];h={};for(var l in f){var q={};f[l].forEach(function(r){q[r.alias]=r.id});var t=l.substr(0,l.indexOf("."));
h[t]=q}return h}function b(f,h){h=e(h);return w.mixin({},h["*"],h[f])}m=m.geoenrichment.dijit.ReportPlayer.StandardTemplates;var a,c={"demographic-summary":m.demographicSummary,"key-facts":m.keyFacts,"marketing-profile":m.marketingProfile,"at-risk-population":m.atRiskPopulation,"portrait-property-flyer":m.portraitPropertyFlyer,skyscraper:m.skyscraper,"transportation-to-work":m.transportationToWork,"health-care":m.healthCare,"executive-summary-call-outs":m.executiveSummaryCallOuts,"tapestry-profile":m.tapestryProfile,
"nearby-restaurants":m.nearbyRestaurants,"multi-area-comparison":m.multiAreaComparison,"property-details":m.propertyDetails,"employment-overview":m.employmentOverview,"office-market-profile":m.officeMarketProfile,"health-care-and-insurance":m.healthCareAndInsuranceStatistics,"demographic-profile":m.demographicProfile,"commute-profile":m.commuteProfile,"target-market-summary":m.targetMarketSummary,"population-trends":m.populationTrends,"coronavirus-impact-planning":m.coronavirusImpactPlanning,"prizm-profile":m.prizmProfile,
"housing-profile":m.housingProfile,"insurance-profile":m.insuranceProfile,"media-profile":m.mediaProfile,"personicx-segmentation":m.personicxSegmentation,"spending-profile":m.spendingProfile,"base-demographic-profile":m.baseDemographicProfile,"demographic-comparison-profile":m.demographicComparisonProfile,"future-population-profile":m.futurePopulationProfile,"population-households-profile":m.populationHouseholdsProfile,"consumer-spending-profile":m.consumerSpendingProfile,"base-demographic-profile-ja":"\u57fa\u672c\u7d71\u8a08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",
"demographic-comparison-profile-ja":"\u4eba\u53e3\u7d71\u8a08\u6bd4\u8f03\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","future-population-profile-ja":"\u5c06\u6765\u4eba\u53e3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","population-households-profile-ja":"\u4eba\u53e3\u30fb\u4e16\u5e2f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","consumer-spending-profile-ja":"\u6d88\u8cbb\u984d\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","household-profile":m.householdProfile},d={portalUrl:"http://www.arcgis.com",user:"esri_reports",query:"http://www.arcgis.com/home/search.html?q\x3downer%3Aesri_reports",
aliasToID:function(f,h,l){return b(f,l)[h]},aliasToLabel:function(f){return c[f]},getAliases:function(f,h){f=Object.keys(b(f,h));f.sort(function(l,q){return l.localeCompare(q)});return f},getListOptions:function(f,h){return d.getAliases(f,h).map(function(l){return{value:d.aliasToID(f,l,h),label:c[l]}})},getSupportedCountries:function(f){return Object.keys(e(f)).map(function(h){return"*"===h?"AU":h})},getLibrary:function(){var f=w.clone(k()),h;for(h in f){var l=f[h];l["AU.census"]=l["*.census"];delete l["*.census"]}return f}};
return d})},"esri/dijit/geoenrichment/utils/PortalQueryUtil":function(){define([],function(){var w={combineQueryString:function(p){var m="";p.type&&(m+='type:"'+p.type+'"');p.typeKeywords?m=Array.isArray(p.typeKeywords[0])?m+(" typekeywords:("+p.typeKeywords.map(function(k){return w.combineTypeKeywords(k)}).join(" OR ")+")"):m+(" typekeywords:"+w.combineTypeKeywords(p.typeKeywords,p.typeKeywordsNot)):p.typeKeywordsNot&&(m+=" typekeywords:"+w.combineTypeKeywords(null,p.typeKeywordsNot));p.owner&&(m+=
" owner:"+p.owner);p.isShared&&(m+=p.orgId?" ((orgid:"+p.orgId+' AND access:"public") OR access:"shared" OR access:"org")':' (access:"shared" OR access:"org")');p.ownerNot&&(m+=" NOT owner:"+p.ownerNot);return m},combineTypeKeywords:function(p,m){p=p?w._combineArray(p):"";return m?(m=w._combineArray(m," OR "),"("+p+" NOT "+m+")"):p},_combineArray:function(p,m){var k="string"===typeof p?p:1===p.length?p[0]:null;return k?"("===k.charAt(0)||'"'===k.charAt(0)?k:'"'+k+'"':"("+p.map(function(e){return'"'+
e+'"'}).join(m||" ")+")"}};return w})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer":function(){define(["./query/TemplateJsonQueryUtil"],function(w){return{collectVariablesStats:function(p){var m={};w.processTemplateFieldInfos(p,function(k){k.infographicJson&&k.infographicJson.variables?k.infographicJson.variables.forEach(function(e){m[e]=1}):k.hasVariable&&(k.usedMapTos?k.usedMapTos.forEach(function(e){m[e]=1}):k.fullName&&(m[k.fullName]=1))});
return m},collectMapItemIdsAndNames:function(p){var m={},k={};w.calcNumberOfMaps(p,function(a){a.defaultBasemapId&&(m[a.defaultBasemapId]=1);a.defaultBasemapName&&(k[a.defaultBasemapName]=1);a.webMapId&&(m[a.webMapId]=1);a.webMapName&&(k[a.webMapName]=1)});p=[];for(var e in m)p.push(e);var b=[];for(e in k)b.push(e);return{itemIds:p,mapNames:b}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/utils/InfographicJsonUtil":function(){define(["esri/dijit/geoenrichment/config","esri/dijit/geoenrichment/utils/ArrayUtil"],
function(w,p){var m={getDefaultLevels:function(){var k=w.levels.slice();k.push(w.highestLevel);return k},getLevels:function(k){k=k.levels&&k.levels.length?k.levels:m.getDefaultLevels();return p.removeDuplicates(k)},getSubLevels:function(k){k=m.getLevels(k);k.pop();return k},getHighestLevel:function(k){k=m.getLevels(k);return k[k.length-1]},setLevels:function(k,e){e=p.removeDuplicates(e||[]);k.levels=e.length?e:m.getDefaultLevels()},getDataDrilling:function(k,e){"string"!==typeof e&&(e=(e=k.variableTables&&
k.variableTables[e])&&e.variable.fieldInfo&&e.variable.fieldInfo.templateName);return k.dataDrilling&&k.dataDrilling[e]},setDataDrilling:function(k,e,b){e&&(k.dataDrilling=k.dataDrilling||{},b?k.dataDrilling[e]=b:delete k.dataDrilling[e])},validateDataDrilling:function(k){var e=k.dataDrilling;if(e){var b={};k.variableTables.forEach(function(a){a.variable&&a.variable.fieldInfo&&a.variable.fieldInfo.templateName&&(b[a.variable.fieldInfo.templateName]=!0)});Object.keys(e).forEach(function(a){b[a]||delete e[a]})}},
analyzeVariables:function(k){k=k.fieldInfos?k.fieldInfos.map(function(c){return c.fullName}):k.variables;if(1===k.length&&-1!==k[0].indexOf(".*"))return{dataCollectionID:k[0].substr(0,k[0].indexOf("."))};var e={},b,a;k.forEach(function(c,d){e[c.substr(0,c.indexOf("."))]=1;b=c.substr(c.indexOf(".")+1);a=c});return{dataCollectionID:1===Object.keys(e).length?Object.keys(e)[0]:null,variableID:1===k.length?b:null,fullName:1===k.length?a:null}}};return m})},"esri/dijit/geoenrichment/config":function(){define(["esri/urlUtils"],
function(w){w=w.getProtocolForWebResource();return{portalUrl:w+"//arcgis.com",server:w+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:w+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasPreprocessor":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/string esri/graphic esri/symbols/jsonUtils ./FeatureNameUtil ../tasks/EnrichAreasTask esri/dijit/geoenrichment/utils/GeometryUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h){var l={preprocessAreas:function(u,z){z=z||{};u.analysisAreas=u.analysisAreas.filter(function(A){return A.feature&&A.feature.geometry&&"polygon"===A.feature.geometry.type||A.geographies&&A.geographies.length||A.buffer});-1!==z.analysisAreasLimit&&(z.analysisAreasLimit=z.analysisAreasLimit||20,u.analysisAreas.length=Math.min(u.analysisAreas.length,z.analysisAreasLimit));l.provideAreasIndexes(u);u.analysisAreas.forEach(function(A){A.feature&&!A.feature.attributes&&(A.feature.attributes=
{})});u.analysisAreas.forEach(function(A){A.name=A.name||A.shortName;if(!A.name&&A.feature){var B=a.guessFeatureName(A.feature);B&&(A.name=A.shortName=B)}});return p(q.generalize(u.analysisAreas),function(){return m([t.provideGeographyFeatures(u),r.provideBufferFeatures(u)])})},provideAreasIndexes:function(u){var z=u.combinedAreasInfo.groups,A=z&&z.length;u.analysisAreas.forEach(function(B,E){B.index=E;z&&(z.forEach(function(F,G){-1!==F.indexes.indexOf(E)&&(B.isGrouped=!0,B.groupIndex=G)}),"number"!==
typeof B.groupIndex&&(B.isGrouped=!1,B.groupIndex=A++))})},removeGroupInfo:function(u){u.forEach(function(z){delete z.isGrouped;delete z.groupIndex})}},q={generalize:function(u){var z=[],A=[];u.forEach(function(B,E){!B.feature||B.geographies&&B.geographies.length||(z.push(B.feature),A.push(E))});return p(function(B){function E(D){var I=0;D.geometry.rings.forEach(function(K){I+=K.length});return I}var F=d.needGeneralizeGeometry(B,f.generalization.factor,f.generalization.maxVerticesInAllFeatures,f.generalization.numVerticesPerFeature);
if(F){var G=!0;var H=[];B=B.map(function(D){H.push(E(D));return new e(D.geometry,D.symbol,D.attributes)});var v=d.generalizeGeometry(B,F,f.generalization.numVerticesPerFeature,!0)}return p(v,function(){G&&(console.log("Generalize features:"),B.forEach(function(D,I){console.log("#"+I+" "+H[I]+" \x3d\x3e "+E(D))}));return B})}(z),function(B){A.forEach(function(E){u[E].feature=B.shift()})})}},t={provideGeographyFeatures:function(u){return m(u.analysisAreas.map(function(z){if(!z.feature&&z.geographies&&
z.geographies.length)return(new c).createFeatureForGeographies(z.geographies,{countryID:u.countryID,hierarchy:u.hierarchy}).then(function(A){z.feature=A;z.name=z.name||z.feature.attributes.StdGeographyName;z.description=z.description||h.geoenrichment.dijit.ReportPlayer.ReportPlayer.geography;z.address=z.address||z.name;z.geographies[0].attributes&&w.mixin(z.feature.attributes,z.geographies[0].attributes);if(A=z.geographies[0].symbol)A=A.toJson?A:b.fromJson(A),z.feature.setSymbol(A)})}))}},r={provideBufferFeatures:function(u){var z=
this,A=u.analysisAreas.filter(function(E){return!E.feature&&E.buffer}),B=A.map(function(E){return E.buffer});return(new c).createFeaturesForBuffers(B,{countryID:u.countryID}).then(function(E){E.forEach(function(F,G){G=A[G];G.feature=F;z._applyBufferParamsToArea(G)})})},_applyBufferParamsToArea:function(u){var z=u.buffer;if(!u.name){var A=h.geoenrichment.dijit.bufferTitle.pointRing;A[z.units]&&(u.name=k.substitute(A[z.units],{radius:z.radius}))}u.description=u.description||"Ring";z.attributes&&w.mixin(u.feature.attributes,
z.attributes);if(z=z.symbol)z=z.toJson?z:b.fromJson(z),u.feature.setSymbol(z)}};return l})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/FeatureNameUtil":function(){define([],function(){return{_nameScores:[/^name$/i,/^title$/i,/(^name)|(name$)/i,/(^title)|(title$)/i],guessFeatureName:function(w){var p=Object.keys(w.attributes),m;this._nameScores.some(function(k){return p.some(function(e){if(k.test(e))return m=e,!0})});return w.attributes[m]||""}}})},"esri/dijit/geoenrichment/utils/GeometryUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/geometry/Polygon esri/workers/WorkerClient ./PolygonUtil ./GeometryUtil_base".split(" "),
function(w,p,m,k,e,b){function a(d,f,h){var l=new p,q=new k("./mutableWorker",function(){q.importScripts(["../dijit/geoenrichment/utils/GeometryUtil_worker","../dijit/geoenrichment/utils/GeometryUtil_base"]).then(function(){q.postMessage({rings:d,maxAllowableOffset:h}).then(function(t){var r=t.rings;f.forEach(function(u){for(var z=u.source.length=0;z<u.count;z++)u.source.push(r.shift())});l.resolve();q.terminate()})})},!0);return l.promise}var c=w.mixin({},b);c.calculateMaxAllowableOffset=function(d,
f,h){"number"!==typeof f&&(f=1);f*=d.extent.getWidth()/d.width;h&&(f*=Math.min(h.getWidth()/d.extent.getWidth(),h.getHeight()/d.extent.getHeight()));return f};c.getNumberOfPoints=e.getNumberOfPoints;c.needGeneralizeGeometry=function(d,f,h,l){if(!d||!f)return!1;l=l||(h?h/10:500);h=h||5E3;Array.isArray(d)||(d=[d]);var q=0>f,t=0,r=Math.abs(f)/100,u=0,z=0,A;d.forEach(function(B){B=B.geometry||B;if(!B.rings||!B.getExtent)return!1;var E=B.getExtent();if(E=E.getWidth()*E.getHeight())E=Math.sqrt(E),B=c.getNumberOfPoints(B),
u+=B,z=Math.max(z,B),q&&(t=Math.max(t,E*r)),A||(A=q?u>h:B*f>4*E)});return A&&z>l?t||f:0};c.generalizeGeometry=function(d,f,h,l){if(!d||!f||0>f)return!1;h=h||500;Array.isArray(d)||(d=[d]);var q=[],t=[];d.map(function(r){var u=r.geometry||r;if(u!=r&&u.rings){r.geometry=new m;r.geometry.setSpatialReference(u.spatialReference);var z=r.geometry.rings}z&&u.rings.forEach(function(A){z.push(A.slice())});c.getNumberOfPoints(u)>h&&(r=z||u.rings,q=q.concat(r),t.push({source:r,count:r.length}))});if(l&&window.Worker)return a(q,
t,f);q.forEach(function(r){(new c.RingInfo(r)).generalize(f,.8)})};return c})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(w,p,m,k,e,b,a,c,d){var f=window.Blob||window.webkitBlob||window.mozBlob,h=window.URL||window.webkitURL||window.mozURL;w=p([w],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(l,q,t){this._isIE=
b("ie");this.returnDeferreds=!!t;this._queue={};this._acceptMessage=k.hitch(this,this._acceptMessage);this._errorMessage=k.hitch(this,this._errorMessage);l&&this.setWorker(l,k.hitch(this,function(r){this.worker=r;q(r)}))},setWorker:function(l,q){if(l instanceof Array){var t=l;l=t.shift()}var r=this._getUrl(l);r=c.normalize(r);l=!c.hasSameOrigin(r,location.href);if(!1===r)return console.log("Can not resolve worker path"),!1;if(this.worker){var u=this.worker;u.removeEventListener("message",this._acceptMessage,
!1);u.removeEventListener("error",this._errorMessage,!1);u.terminate();u=null}if(l){l=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(l,k.hitch(this,function(z){z=h.createObjectURL(new f([z],{type:"text/javascript"}));q(this._createWorker(z,r))}))}catch(z){try{l=c.getProxyUrl(l).path+"?"+encodeURI(l),this._useProxy=!0,q(this._createWorker(l,t))}catch(A){return console.log("Can not create worker"),!1}}}else setTimeout(k.hitch(this,function(){q(this._createWorker(r,t))}),0)},_createWorker:function(l,
q){l=new Worker(l);l.addEventListener("message",this._acceptMessage,!1);l.addEventListener("error",this._errorMessage,!1);this.worker=l;q&&this.importScripts(q);return l},postMessage:function(l,q){if(l instanceof Array||"object"!=typeof l)l={data:l};var t=Math.floor(64E9*Math.random()).toString(36);l.msgId=t;t=this._queue[t]=new m;this.worker?(q?this.worker.postMessage(l,q):this.worker.postMessage(l),this.emit("start-message",{target:this,message:l})):t.reject({message:"No worker was set."});return this.returnDeferreds?
t:t.promise||t},terminate:function(){var l=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var q=l.length-1;0<=q;q--)this._queue[l[q]].cancel("terminated"),delete this._queue[l[q]]},addWorkerCallback:function(l,q){var t=this._getUrl(l,!0);!1===t?(q=new m,q.reject({message:"Could not load text from "+l})):(q=this.postMessage({action:"add-callback",url:t,cbName:q||"main"}),q.then(k.hitch(this,function(r){r.target=this;this.emit("callback-added",r)})));return q},importScripts:function(l){Array.isArray(l)||
(l=[l]);l=l.map(function(q){q=this._getUrl(q,!0);this._useProxy&&!c.hasSameOrigin(q,location.href)&&(q=c.getProxyUrl(q).path+"?"+encodeURI(q));return q},this);l=this.postMessage({action:"import-script",url:l});l.then(k.hitch(this,function(q){q.target=this;this.emit("scripts-imported",q)}));return l},_acceptMessage:function(l){var q=l.data,t=q.msgId;if(q.status&&"debug"==q.status)console[q.showAs||"debug"](q);else if(t&&t in this._queue){var r=this._queue[t];"progress"==q.status?r.progress(l.data):
("error"==q.status?r.reject(l.data):r.resolve(l.data),delete this._queue[t])}this.emit("message",{message:l.data,event:l,target:this})},_errorMessage:function(l){this.onerror||this.onError?this.onerror?this.onerror(l):this.onError(l):console.log("Worker Error: "+l.message+"\nIn "+l.filename+" on "+l.lineno)},_getUrl:function(l,q){if(!l)return console.error("can not resolve empty path"),!1;l.match(/\.js$/)||(l+=".js");l=d.toUrl(l);return q?c.getAbsoluteUrl(l):l},_getRemoteText:function(l,q){(l=this._getUrl(l))&&
e.get(l,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(t){q(t)})},_startBlobWorker:function(){var l=this._xdSource;l||(l=this._getUrl("./mutableWorker"),l=new f(["if(!self._mutable){importScripts('"+l+"');}"],{type:"text/javascript"}),l=this._xdSource=h.createObjectURL(l));try{return new Worker(l)}catch(q){return console.log(q.message),!1}}});b("extend-esri")&&k.setObject("workers.WorkerClient",w,a);return w})},"esri/dijit/geoenrichment/utils/GeometryUtil_base":function(){(function(w){function p(c,
d){var f=c.length;if(3>f)return 0;d||(d=c[0]);var h=d[0];d=d[1];var l=c[f-1];f=l[0]-h;for(var q=l[1]-d,t=0,r=0,u=c.length;r<u;r++){l=c[r];var z=l[0]-h;l=l[1]-d;t+=z*q-f*l;f=z;q=l}return t/2}var m={};m.calculateRingArea=p;m.calculateRingCentroid=function(c,d){var f=c.length;if(!f)return null;d||(d=c[0]);var h=d[0];d=d[1];var l=0,q=0,t=0;if(2<f){var r=c[f-1];f=r[0]-h;for(var u=r[1]-d,z=0,A=c.length;z<A;z++){r=c[z];var B=r[0]-h;r=r[1]-d;var E=B*u-f*r;l+=E;q+=(f+B)*E;t+=(u+r)*E;f=B;u=r}}0==l?q=t=0:(q/=
3*l,t/=3*l);return[h+q,d+t]};m.INTERIOR=1;m.EXTERIOR=-1;m.BOUNDARY=0;m.createRingInfo=function(c,d){return new b(c,d)};m.createSegmentCoordinates=function(c){return new a(null,0,0,c)};var k=function(c){return function(){for(var d in c){var f=c[d];this[d]="function"===typeof f?f.bind(this):f}c.ctr.bind(this).apply(this,arguments)}},e=k({xmin:null,ymin:null,xmax:null,ymax:null,spatialReference:null,ctr:function(c,d,f,h,l){this.xmin=c;this.ymin=d;this.xmax=f;this.ymax=h;this.spatialReference=l},printOut:function(){console.log([this.xmin,
this.xmax,this.ymin,this.ymax].join(" "))}}),b=k({ring:null,origin:null,area:0,clockwise:!1,extent:null,_coords:null,ctr:function(c,d){this.ring=c;this.origin=d;c=this.ring.length-1;if(!(0>c)){if(!c)c++;else if(this.ring[c][0]!=this.ring[0][0]||this.ring[c][1]!=this.ring[0][1])c++,this.ring.push(this.ring[0].slice());var f=0,h=0;d=!d;this.extent=new e(this.ring[0][0],this.ring[0][1],this.ring[0][0],this.ring[0][1]);for(var l=0;l<c;l++){var q=this.ring[l],t=q[0];d&&(f+=t);t<this.extent.xmin?this.extent.xmin=
t:t>this.extent.xmax&&(this.extent.xmax=t);t=q[1];d&&(h+=t);t<this.extent.ymin?this.extent.ymin=t:t>this.extent.ymax&&(this.extent.ymax=t)}d&&(this.origin=[f/c,h/c]);this.area=p(this.ring,this.origin);0>=this.area?this.area=-this.area:this.clockwise=!0}},setDirection:function(c){this.clockwise==!c&&(this.ring.reverse(),this.clockwise=!this.clockwise,this._coords=null)},testPoint:function(c,d){c=this.getRingCoordinates(d).testPoint(c[0]-this.origin[0],c[1]-this.origin[1]);return this.clockwise?c:-c},
generalize:function(c,d,f){function h(N,T,M){B=N;E=T;if(M||H<A)A=c,F=B-u,G=E-u,H=Math.sqrt(F*F+G*G),H>c*d?(F/=H,G/=H):H=0;A*=d}function l(){if(!H)return!0;var N=q.dx,T=q.dy,M=Math.sqrt(N*N+T*T);return M-N*F-T*G>=.9*M}d=d||.75;var q=this.getRingCoordinates(c),t=q.xs,r=q.ys,u=t[0],z=r[0],A,B,E,F,G,H=0,v=t.length-1;h(t[v],r[v],!0);for(var D=this,I=this.clockwise?function(N){D.ring.splice(N,1)}:function(N){D.ring.splice(-N-1,1)};0<v--&&4<t.length;){var K=t[v],S=r[v];q.setSegment(u,z,K,S)&&q.testPointOnTouch(B,
E,A)&&l()?(t.splice(v+1,1),r.splice(v+1,1),I(v+1),h(K,S)):(u=B,z=E,h(K,S,!0))}this._coords=null;f&&(this.area=p(this.ring,this.origin),this.clockwise||(this.area=-this.area))},getRingCoordinates:function(c,d){if(d)return new a(this.ring,d[0],d[1],c,this.extent,this.clockwise);this._coords&&this._coords.eps==c||(this._coords=new a(this.ring,this.origin[0],this.origin[1],c,this.extent,this.clockwise));return this._coords}});m.RingInfo=b;var a=k({xs:null,ys:null,extent:null,eps:NaN,dx:null,dy:null,_sx:null,
_sy:null,ctr:function(c,d,f,h,l,q){this.xs=[];this.ys=[];c||(c=[]);void 0===d&&(d=0);void 0===f&&(f=0);void 0===h&&(h=0);this.eps=Math.max(h,0);l&&(h=this.eps/2,this.extent=new e(l.xmin-d-h,l.ymin-f-h,l.xmax-d+h,l.ymax-f+h));var t=c.length-1;if(!(0>t))for(l=t?c[t][0]==c[0][0]&&c[t][1]==c[0][1]?t:t+1:1,h=q?1:-1,q=q?0:t;l--;q+=h)t=c[q],this.xs.push(t[0]-d),this.ys.push(t[1]-f)},testPoint:function(c,d){if(!this._pointBelongsToExtent(c,d))return-1;var f=this.xs.length,h=!1;this.dy=this.ys[0]-this.ys[f-
1];if(0==this.dy){for(h=f;1<h--&&(this.dy=this.ys[h]-this.ys[h-1],0==this.dy););if(0==this.dy)return 0}h=0<this.dy;for(var l=0,q=this.xs[0],t=this.ys[0],r,u,z=1;z<=f;z++,q=r,t=u)if(u=z==f?0:z,r=this.xs[u],u=this.ys[u],this.setSegment(q,t,r,u)){var A=t-d,B=u-d,E=!1;0>A&&(A=-A,B=-B,E=!0);if(!(A>this.eps&&B>this.eps)){if(this.testPointOnTouch(c,d,this.eps))return 0;0==A?0!==B&&(0>B&&(h=!h),c<q&&h&&l++):0==B?h=E:0>B&&c<q+this.dx/this.dy*(d-t)&&l++}}return 0!=l%2?1:-1},testPointOnTouch:function(c,d,f){var h=
this.findIntersectionDelta(c,d,c-this.dy,d+this.dx);c=this._sx+h*this.dx-c;d=this._sy+h*this.dy-d;return c*c+d*d<=f*f},_pointBelongsToExtent:function(c,d){return c>=this.extent.xmin&&c<=this.extent.xmax&&d>=this.extent.ymin&&d<=this.extent.ymax},setSegment:function(c,d,f,h){this._sx=c;this.dx=f-c;this._sy=d;this.dy=h-d;return 0!=this.dx||0!=this.dy},findIntersectionDelta:function(c,d,f,h,l){void 0===l&&(l=!0);f-=c;h-=d;var q=this.dy*f-this.dx*h;if(0==q)return 0;var t=c-this._sx,r=d-this._sy,u=r*f-
t*h;t=l?0:r*this.dx-t*this.dy;0>q&&(q=-q,u=-u,t=-t);return l||(t=0>t?0:t<q?t/q:1,this.testPointOnTouch(c+t*f,d+t*h,this.eps))?0>=u?0:u<q?u/q:1:-1},addPointOfSegmentAt:function(c){this.xs.push(this._sx+c*this.dx);this.ys.push(this._sy+c*this.dy)}});m.RingCoordinates=a;w.document?define(function(){return m}):w.GeometryUtil_base=m})(this)},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes":function(){define([],function(){return{STANDARD:"esriReportTemplateStandard",MULTICOLUMN:"esriReportTemplateMultiColumn",
MAP:"esriReportTemplateMapReport",FUSION:"esriReportTemplateFusion"}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config ./portalToEditorUtils/layout/LayoutParser ./portalToEditorUtils/metadata/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/variables/PlayerVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h,l){return{provideEditorJson:function(q,t){function r(){function F(D,I,K){return w(t.preProcessFile&&t.preProcessFile(D,I,u),function(S){if(!1!==S)return w(K&&K(),function(){return t.postProcessFile&&t.postProcessFile(D,I,u)})})}if(z&&z.files&&z.files){var G=t.filesToProcess||["theme.css.txt","metadata.xml","report.xml"],H={"theme.css.txt":function(D){return F(D,"theme.css.txt",function(){u.theme=f.fromCssText(D.data,t)})},"metadata.xml":function(D){return F(D,"metadata.xml",
function(){return k.parseMetadataXML(D,u,t)})},"report.xml":function(D){return F(D,"report.xml",function(){return m.parseReportXML({report:q,parsers:b,file:D,templateJson:u,variableProvider:t.variableProvider,useVariableProviderToCollectOnly:t.useVariableProviderToCollectOnly,tableDefaultStyles:t.tableDefaultStyles,processFileName:B,putImageData:function(I,K){I=B(I);K=K||A[I];d.putImageData(I,K);return K},log:E,queryMetaDataFunc:function(I){return t.queryMetaDataFunc&&t.queryMetaDataFunc(I,u)},postProcessChartJson:function(I,
K){t.postProcessChartJson&&t.postProcessChartJson(u,I,K)},postProcessMapJson:function(I,K){t.postProcessMapJson&&t.postProcessMapJson(u,I,K)},postProcessInfographicJson:function(I,K){t.postProcessInfographicJson&&t.postProcessInfographicJson(u,I,K)},postProcessTableInSection:function(I,K){t.postProcessTableInSection&&t.postProcessTableInSection(u,I,K)}})})},generic:function(D,I){return F(D,I)}},v=new h;G.forEach(function(D){var I=z.files.filter(function(S){return S.name===D})[0],K=I&&(H[D]||H.generic);
K&&v.add(function(){return w(p.isPlayerOnServer?w():l.delay(50)).then(function(){return K(I,D)}).otherwise(function(S){u.metadata.parseErrors.push(S);console.log(S)})})});return v.getPromise()}}t=t||{};t.variableProvider=t.variableProvider||new a;t.tableDefaultStyles=t.tableDefaultStyles||new c;var u={documentOptions:{},metadata:{specialTradeAreaCalculatorName:null,parseErrors:[],mapImageInfosHash:{},comparisonCalculatorsHash:{},locatorCalculatorsHash:{}},theme:null},z=q.portalJson,A={};t.getImageData=
function(F){return A[B(F)]};var B=function(F){return F?F.toLowerCase():""},E=t.log||function(F){};return w(b.initialize(),function(){return w(e.collectImageResources(z,A,B),function(){for(var F in A)d.putImageData(F,A[F]);return w(r(),function(){u.metadata.parseErrors.length||(q.templateJson=u)})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/LayoutParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./GraphicReportSectionsParser",
"./ClassicReportSectionsParser"],function(w,p,m){return{parseReportXML:function(k){k.log(k.file.data);var e=w.parseXml(k.file.data);k.parsers.getParser("document").parseDocument(e,k);k.report.isGraphicReport?(k.templateJson.sectionsTables=[],p.parseSectionsGraphic(e,k)):(k.templateJson.sections=[],m.parseSectionsClassic(e,k))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/GraphicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(w){return{parseSectionsGraphic:function(p,m){w.queryTopJson(p,"table").forEach(function(k){try{m.templateJson.sectionsTables.push(m.parsers.getParser("section").parseTable(k,m,{fixTableWidthsForPage:!0}))}catch(e){console.log(e)}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/ClassicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(w){return{parseSectionsClassic:function(p,m){w.queryTopJson(p,"section").forEach(function(k){m.templateJson.sections.push(m.parsers.getParser("section").parseSection(k,
m,{fixTableWidthsForPage:!0}))});this._splitSections(m)},_splitSections:function(p){p=p.templateJson;var m=[];p.sections.forEach(function(k){function e(){b={type:k.type,stack:[]};m.push(b)}var b;e();k.stack.forEach(function(a){if("hr"===a.id){var c=!!b.stack.length;b.stack.push(a);c&&e()}else"table"===a.id?(b.stack.some(function(d){return"table"===d.id})&&e(),b.stack.push(a)):"pageBreak"===a.id?(b.stack.length&&e(),b.stack.push(a),e()):b.stack.push(a)})});m=m.filter(function(k){return!!k.stack.length});
p.sections=m}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataParser":function(){define("esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/utils/JsonXmlConverter ./DataCollectionsCalculatorsParser ./ScriptsCalculatorsParser ./LocatorCalculatorsParser ./map/MapCalculatorsParser ./TradeAreaCalculatorsParser".split(" "),function(w,p,m,k,e,b,a){return{parseMetadataXML:function(c,d,f){f.log&&f.log(c.data);var h=p.parseXml(c.data);if(h&&h.tags)return w([a.parseTradeAreaCalculators(h,
d,f),m.parseDataCollectionsCalculators(h,d,f),k.parseScriptsCalculators(h,d,f),e.parseLocatorCalculators(h,d,f)]).then(function(){return b.parseMapCalculators(h,d,f)})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(w,p,m){return{parseDataCollectionsCalculators:function(k,e,b){w.queryJson(k,"DataCollections").forEach(function(a){var c=
w.queryJson(a,"ComparisonLevel");if(m.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");if(b.variableProvider.isPlayerOnly||c.length)var d=p.getObjects(a);c.length&&(a={calculatorName:a.attributes.Name,levels:c.map(function(f){return f.attributes.Name}).filter(function(f){return!b.validateGeographyLevelFunc||b.validateGeographyLevelFunc(f)}),variableObjects:d.variableObjects},e&&(e.metadata.comparisonCalculatorsHash[a.calculatorName]=
a));b.variableProvider.isPlayerOnly&&(d.variableObjects.forEach(function(f){b.variableProvider.addVariable(f)}),d.scriptObjects.forEach(function(f){b.variableProvider.addScriptVariable(f)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/VariableScriptCollector":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(w,p){var m={getObjects:function(k,e){e=m._getVariableInfo(k,e);k=m._getScriptObjects(k,
e.fieldNameToVariableCache);return{variables:e.variables,variableObjects:e.variableObjects,scriptObjects:k}},_getVariableInfo:function(k,e){var b=[];w.queryJson(k,e?/^(RawFields|Fields)$/:"Fields").forEach(function(f){b=b.concat(w.queryJson(f,/^(Field|PortalField)$/))});var a=[],c=[],d={};b.forEach(function(f){a.push(f.attributes.MapTo);if(f=p.fieldTagToVariable(f,k.attributes.Name))d[f.fieldName]=f,c.push(f)});return{variables:a,variableObjects:c,fieldNameToVariableCache:d}},_getScriptObjects:function(k,
e){var b=w.queryJson(k,"Scripts"===k.name?"Fields":"CalculatedFields")[0];b=b&&w.queryJson(b,"Script")||[];"Scripts"===k.name&&(b=b.filter(function(a){return!("STORE_ID"===a.attributes.Name||"AREA_ID"===a.attributes.Name)}));return b.map(function(a){var c=p.scriptTagToVariable(a,k.attributes.Name);c.usedFields&&(c.usedMapTos=[],c.usedFields.forEach(function(d){var f=e[d];f?f.usedMapTos?c.usedMapTos=c.usedMapTos.concat(f.usedMapTos):c.usedMapTos.push(f.fullName):console.log("Error parsing used fields for "+
d)}),e[c.fieldName]=c);return c})}};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/VariableUtil":function(){define([],function(){var w={getType:function(p,m){return p?0===p.indexOf("esriFieldType")?p:"esriFieldType"+p:m},fieldTagToVariable:function(p,m){return p.attributes.MapTo&&"AREA_ID"!==p.attributes.Name?{id:p.attributes.MapTo.substr(p.attributes.MapTo.lastIndexOf(".")+1),fullName:p.attributes.MapTo,alias:p.attributes.Alias,fieldName:p.attributes.Name,
precision:Number(p.attributes.Decimals)||0,calculatorName:m,templateName:m+"."+p.attributes.Name,type:w.getType(p.attributes.Type,p.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString"),vintage:null,source:null}:null},scriptTagToVariable:function(p,m){return{id:p.attributes.Name,fullName:m+"."+p.attributes.Name,fieldName:p.attributes.Name,alias:p.attributes.Alias,precision:Number(p.attributes.Decimals)||0,usedFields:p.attributes.usedFields?p.attributes.usedFields.split(","):[],usedMapTos:null,
expressionText:p.tags[0].text,calculatorName:m,templateName:m+"."+p.attributes.Name,type:w.getType(p.attributes.Type,p.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString")}}};return w})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/ScriptsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector"],function(w,p){return{parseScriptsCalculators:function(m,k,e){w.queryJson(m,"Scripts").forEach(function(b){e.variableProvider.isPlayerOnly&&
(b=p.getObjects(b),b.variableObjects.forEach(function(a){e.variableProvider.addVariable(a)}),b.scriptObjects.forEach(function(a){e.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser":function(){define(["esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(w,p,m,k){return{parseLocatorCalculators:function(e,
b,a){e=m.queryJson(e,"Locator");return w(e.map(function(c){var d=[];m.queryJson(c,/^(PointFields|Fields)$/).forEach(function(l){d=d.concat(m.queryJson(l,/^(Field|Direction|Distance)$/))});var f=[];d.forEach(function(l){"Direction"===l.name?l.attributes.MapTo="DIRECTION":"Distance"===l.name&&(l.attributes.MapTo="DISTANCE");(l=k.fieldTagToVariable(l,c.attributes.Name))&&f.push(l)});var h={calculatorName:c.attributes.Name,variableObjects:f,layerID:null,layerUrl:null,layerName:c.attributes.LayerName};
c.attributes.Points&&0===c.attributes.Points.indexOf("std:")?h.layerID=c.attributes.Points.replace("std:",""):h.layerUrl=c.attributes.Layer;b.metadata.locatorCalculatorsHash[c.attributes.Name]=h;a.variableProvider.isPlayerOnly&&f.forEach(function(l){a.variableProvider.addVariable(l)});return p(!a.validateLocatorCalculator||a.validateLocatorCalculator(h.layerID,h.layerUrl),function(l){h.isValid=l})}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./MetadataToRendererParser","./MapTagsUtil","esri/dijit/geoenrichment/utils/ImageUtil"],function(w,p,m,k){var e={parseMapCalculators:function(b,a,c){w.queryJson(b,"Maps").forEach(function(d){w.queryJson(d,"Map").forEach(function(f){var h=e._parsePortalLayers(f),l=e._parseStudyAreas(f);h={fieldName:f.attributes.Name,width:Number(f.attributes.Width),height:Number(f.attributes.Height),defaultBasemapId:h.defaultBasemapId,defaultBasemapName:h.defaultBasemapName,webMapId:h.webMapId,webMapName:h.webMapName,
additionalLayerInfos:e._parseAdditionalLayers(f,a),pinSymbolJson:e._parseSiteLayerPinSymbol(f,c),areaSymbolJsons:l.symbolJsons,areaSymbolRamp:l.ramp,mapScale:Number(f.attributes.Scale)||null};a&&(a.metadata.mapImageInfosHash[d.attributes.Name+"."+f.attributes.Name]=h)})})},_parsePortalLayers:function(b){var a;b=w.queryJson(b,"Layer").filter(function(c){return!(!c.attributes.PortalItemId&&!c.attributes.MapName)});1<b.length&&(a=b.shift());b=b.shift();return{defaultBasemapId:a&&a.attributes.PortalItemId,
defaultBasemapName:a&&a.attributes.MapName,webMapId:b&&b.attributes.PortalItemId,webMapName:b&&b.attributes.MapName}},_parseAdditionalLayers:function(b,a){var c=[];w.queryJson(b,/^(Layer|LocatorResultsLayer|ComparisonResultsLayer)$/).filter(function(d){return!!d.attributes.ServiceUrl||"LocatorResultsLayer"===d.name||"ComparisonResultsLayer"===d.name}).forEach(function(d){if(d.attributes.ServiceUrl)c.push({url:d.attributes.ServiceUrl});else if("LocatorResultsLayer"===d.name){var f=d.tags&&d.tags.filter(function(l){return"Renderer"===
l.name})[0],h=a.metadata.locatorCalculatorsHash[d.attributes.CalculatorName];h&&h.isValid&&c.push({isLocatorLayer:!0,layerName:d.attributes.LayerName,calculatorName:d.attributes.CalculatorName,calculatorInfo:h,rendererJson:f&&p.parseRendererJson(f)})}else"ComparisonResultsLayer"===d.name&&((f=(f=d.tags&&d.tags.filter(function(l){return"Renderer"===l.name})[0])&&p.parseRendererJson(f))&&"esriTS"===f.uniqueValueInfos[0].symbol.type?c[c.length-1].labelRendererJson=f:(h=(h=d.tags&&d.tags.filter(function(l){return"LabelingInfo"===
l.name})[0])&&p.parseLabelRendererJson(h),c.push({isComparisonLayer:!0,calculatorName:d.attributes.CalculatorName,rendererJson:f,labelRendererJson:h})))});return c.length&&c},_parseSiteLayerPinSymbol:function(b,a){var c;if(b=w.queryJson(b,"SiteLayer")[0])if((b=w.queryJson(b,"Symbol")[0])&&"Image"===b.attributes.Type)(a=a.getImageData(b.attributes.Name))&&(c={type:"esriPMS",contentType:k.getContentType(a),imageData:k.base64DataFromDataURL(a),url:b.attributes.Url,width:Number(b.attributes.Width),height:Number(b.attributes.Height),
angle:Number(b.attributes.Angle)||0,xoffset:Number(b.attributes.XOffset)||0,yoffset:Number(b.attributes.YOffset)||0});else if(b&&"Marker"===b.attributes.Type){c=(c=w.queryJson(b,"Fill")[0])&&w.queryJson(c,"Color")[0];var d=(a=w.queryJson(b,"Outline")[0])&&w.queryJson(a,"Color")[0];c={type:"esriSMS",style:"esriSMS"+(b.attributes.Style||"Circle"),size:Number(b.attributes.Size),angle:Number(b.attributes.Angle)||0,xoffset:Number(b.attributes.XOffset)||0,yoffset:Number(b.attributes.YOffset)||0,color:m.parseColorTag(c),
outline:a&&{type:"esriSLS",color:m.parseColorTag(d),style:"esriSLS"+(a.attributes.Style||"Solid"),width:void 0===a.attributes.Width?0:Number(a.attributes.Width)}}}return c},_parseStudyAreas:function(b){var a=(b=w.queryJson(b,"StudyAreasLayer")[0])&&w.queryTopJson(b,"SymbolsPalette")[0];b=(a&&w.queryTopJson(a,"Symbol")||[]).map(e._parseAreaSymbol);var c=a&&w.queryTopJson(a,"SymbolRamp")[0],d;c&&(a=w.queryTopJson(c,"First")[0],c=w.queryTopJson(c,"Last")[0],a=a&&w.queryTopJson(a,"Symbol")[0],c=c&&w.queryTopJson(c,
"Symbol")[0],a&&c&&(d=[a,c].map(e._parseAreaSymbol)));return{ramp:d,symbolJsons:b}},_parseAreaSymbol:function(b){var a=w.queryJson(b,"Fill")[0];a=a&&w.queryJson(a,"Color")[0];var c=(b=w.queryJson(b,"Outline")[0])&&w.queryJson(b,"Color")[0];return{type:"esriSFS",style:"esriSFSSolid",color:m.parseColorTag(a)||[0,0,0,1],outline:b&&{type:"esriSLS",color:m.parseColorTag(c),style:"esriSLS"+(b.attributes.Style||"Solid"),width:void 0===b.attributes.Width?0:Number(b.attributes.Width)}}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MetadataToRendererParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlTypedConverter",
"esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(w,p){return{parseRendererJson:function(m){return w.parseXml(p.parseJson(m))},parseLabelRendererJson:function(m){return{type:"uniqueValue",field1:"StdGeographyLevel",uniqueValueInfos:w.parseXml(p.parseJson(m)).map(function(k){return{value:k.where.match(/StdGeographyLevel='(.*?)'/)[1],symbol:k.symbol}})}}}})},"esri/dijit/geoenrichment/utils/JsonXmlTypedConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(w,p){return w(null,
{parseJson:function(m,k){function e(d,f){if("string"===typeof d)c+="\x3c"+f+' type\x3d"string"\x3e'+p.encodeXML(d,!1)+"\x3c/"+f+"\x3e";else if("number"===typeof d)c+="\x3c"+f+' type\x3d"number"\x3e'+d+"\x3c/"+f+"\x3e";else if("boolean"===typeof d)c+="\x3c"+f+' type\x3d"boolean"\x3e'+d+"\x3c/"+f+"\x3e";else if(Array.isArray(d))b(d,f);else if(d&&"object"===typeof d){c+="\x3c"+f+' type\x3d"object"\x3e';for(var h in d)e(d[h],h);c+="\x3c/"+f+"\x3e"}}function b(d,f){c+="\x3c"+f+' type\x3d"array"\x3e';d.forEach(function(h){e(h,
"item")});c+="\x3c/"+f+"\x3e"}var a=k&&k.rootName||"root",c="";k&&k.addDocumentOptions&&(c+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');e(m,a);return c=decodeURIComponent(encodeURIComponent(c).replace("%19",""))},parseXml:function(m){function k(h){if(!h.attributes)return null;for(var l=0;l<h.attributes.length;l++){var q=h.attributes[l];if("type"===q.name)return q.value}return null}function e(h,l){if(l.childNodes)for(var q=0,t=l.childNodes.length;q<t;q++){var r=l.childNodes[q],u=b(r);void 0!==
u&&(h[r.nodeName]=u)}return h}function b(h){var l=k(h);if(h.nodeName&&l)switch(l){case "string":return h.childNodes[0]?p.decodeXML(h.childNodes[0].nodeValue):"";case "number":return Number(h.childNodes[0].nodeValue);case "boolean":return"true"===h.childNodes[0].nodeValue;case "object":return e({},h);case "array":return a([],h)}}function a(h,l){if(l.childNodes)for(var q=0,t=l.childNodes.length;q<t;q++)h[q]=b(l.childNodes[q]);return h}var c;m=(new DOMParser).parseFromString(m,"text/xml").childNodes;
for(var d=0;d<m.length;d++)if(1===m[d].nodeType){var f=m[d];break}f&&(m=k(f),"object"===m?e(c={},f):"array"===m&&a(c=[],f));return c}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapTagsUtil":function(){define([],function(){return{parseColorTag:function(w){if(!w)return null;w=w.attributes;return[Number(w.Red)||0,Number(w.Green)||0,Number(w.Blue)||0,w.Transparency?255*(1-Number(w.Transparency)/100):255]}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/TradeAreaCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./VariableScriptCollector","../../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary"],function(w,p,m){return{parseTradeAreaCalculators:function(k,e,b){k=w.queryJson(k,"SpecialTradeAreaFields");e.metadata.specialTradeAreaCalculatorName=k[0]&&k[0].attributes&&k[0].attributes.Name;k.forEach(function(a){b.variableProvider.isPlayerOnly&&p.getObjects(a,!0).variableObjects.forEach(function(c){c.alias=c.alias||m.getFieldLabel(c.id);b.variableProvider.addVariable(c)})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/ImageCollector":function(){define(["esri/dijit/geoenrichment/when",
"esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/DataUtil","esri/dijit/geoenrichment/utils/ImageUtil","esri/dijit/geoenrichment/utils/ImageInfoUtil"],function(w,p,m,k,e){return{collectImageResources:function(b,a,c){function d(h){return w(e.getImageInfo(a[h],h),null,function(){/\.svg$/.test(h)||delete a[h]})}b&&b.files&&b.files.forEach(function(h){var l=m.getContentType(h.name);l&&"image/"===l.substr(0,6)&&(a[c(h.name)]=k.base64DataToDataURL(h.data,l))});b=[];for(var f in a)b.push(d(f));
return p(b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/Parsers":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(w,p){var m={},k={},e;m.initialize=function(){if(e)return e.promise;e=new w;p("./DocumentParser ./ChartConverterPtoE ./InfographicConverterPtoE ./SectionParser ./FieldParser ./FilterParser ./SortingParser ../../../supportClasses/templateJsonUtils/fieldInfo/utils".split(" "),function(b,a,c,d,f,h,l,q){k.document=b;k.chart=
a;k.infographic=c;k.section=d;k.field=f;k.filter=h;k.sorting=l;q.init().then(e.resolve)});return e.promise};m.getParser=function(b){return k[b]};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/PlayerVariableProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dojo/i18n!esri/nls/jsapi"],function(w,p,m,k){k=k.geoenrichment.dijit.ReportPlayer.Variables;var e=w(null,{variable:null,constructor:function(b){this.variable=b},calculate:function(b){return 0},
getCalcType:function(){return"n/"},getAliasWithType:function(){return this.variable.alias},getDescriptionWithType:function(){return this.variable.alias},getDecimals:function(){return this.variable.precision||0}});return w(null,{isPlayerOnly:!0,_fieldNameToVariableCache:null,_templateNameToVariableCache:null,constructor:function(b){this._templateNameToVariableCache=b&&b.templateNameToVariableCache||{};this._fieldNameToVariableCache={};for(var a in this._templateNameToVariableCache)b=this._templateNameToVariableCache[a],
this._fieldNameToVariableCache[b.fieldName]=b},get:function(b){return this._templateNameToVariableCache[b]||this._fieldNameToVariableCache[b]},toCalculator:function(b){return(b=this.get(b))&&new e(b)},addVariable:function(b){this._fieldNameToVariableCache[b.fieldName]=b;this._templateNameToVariableCache[b.templateName]=b},addScriptVariable:function(b){this._fieldNameToVariableCache[b.fieldName]=b;this._templateNameToVariableCache[b.templateName]=b},getVariables:function(){return Object.keys(this._fieldNameToVariableCache).map(function(b){return this._fieldNameToVariableCache[b]},
this)},getVariablesDataVintageAndSources:function(b){var a=[],c={},d={};this.getVariables().forEach(function(l){l.fullName&&(d[l.fullName.toLowerCase()]=l)});for(var f in b.usedVariablesCache)if((b=d[f.toLowerCase()])&&b.vintage&&b.source){var h=b.vintage+";"+b.source;c[h]||(c[h]=!0,a.push({vintage:b.vintage,source:b.source}))}c=a.map(function(l){return l.source}).join(", ");a=a.map(function(l){return l.vintage}).join(", ");return{dataVintageDescription:c&&a?m.substitute(k.sourcePattern,{source:c})+
" "+m.substitute(k.vintagePattern,{vintage:a}):"",dataSources:c,dataVintage:a}},toJson:function(){return{templateNameToVariableCache:p.clone(this._templateNameToVariableCache)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DefaultStyles":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(w,p,m){return w(null,{_styles:null,_stylesArray:null,constructor:function(k){this._styles={Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"}};
p.mixin(this._styles,k);this._stylesArray=[];for(var e in this._styles)this._stylesArray.push(e)},getStyle:function(k){return this._styles[k]},getStylesArray:function(){return this._stylesArray},tryApplyStyle:function(k,e,b){if(e=this.getStyle(e))for(var a in e)b&&void 0!==k[a]||(k[a]=e[a])},findDefaultStyle:function(k){var e,b=this;this.getStylesArray().some(function(a){var c=b.getStyle(a),d;for(d in c){if(!k[d])return!1;if("color"===d||"backgroundColor"===d){if(!m.colorsEqual(k[d],c[d]))return!1}else if(k[d]!==
c[d])return!1}e=a;return!0});return e}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/ImageDataHolder":function(){define(["esri/dijit/geoenrichment/utils/CacheUtil"],function(w){function p(){return w.get("ImageDataHolder.imageData")}function m(){return w.get("ImageDataHolder.fileNameToOriginal")}var k={},e;k.setImageDataHolder4x=function(b){e=b;b=p();for(var a in b)e.putImageData(a,b[a])};k.putImageData=function(b,a){if(e)e.putImageData(b,a);else if("string"===typeof b&&a){var c=
b.toLowerCase();m()[c]=b;p()[c]=a}else console.error("Invalid image filename or data!")};k.getImageData=function(b){return e?e.getImageData(b):"string"!==typeof b?null:p()[b.toLowerCase()]};k.findFileNameByData=function(b){if(e)return e.findFileNameByData(b);var a=p(),c;for(c in a)if(b===a[c])return m()[c];return null};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/conversion/CssParser":function(){define(["../PageBorderStyles","../ThemeUpdateUtil","../../../_devConfig"],function(w,
p,m){var k={"font-size":"fontSize","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor",opacity:"opacity",url:"data","background-position":"position","background-repeat":"repeat","background-size":"scale"},e={colors:1,colors3series:1};return{fromCssText:function(b){function a(t){var r=h;t.split("@").forEach(function(u){r=r[u]=r[u]||{}});return r}function c(t,r){if(r.borderStyle||r.border)if(t.border=
{},t.border.style=w.toSupportedValue(r.borderStyle),"string"===typeof r.border){var u=r.border.split(" ");3===u.length&&(t.border.thickness=Number(u[0].replace("px","")),t.border.lineStyle=u[1],t.border.color=u[2])}for(var z in r)if("border"!==z&&"borderStyle"!==z){u=r[z];var A=z;var B=u,E=t;"font-size"===A?(E[k[A]]=d(B.replace("px","")),A=!0):"background-repeat"===A?(E[k[A]]=d("repeat"===B),A=!0):"background-size"===A?(E[k[A]]=d("contain"===B||"cover"===B),E.size="auto"===B?null:B,A=!0):A=!1;A||
(t[k[z]||z]=d(u))}}function d(t){if(void 0===t||null===t||"null"===t||"undefined"===t)return"";if("true"===t)return!0;if("false"===t)return!1;if(!0===t)return!0;if(!1===t)return!1;var r=Number(t);return isNaN(r)?t:r}function f(t){if(m.emulateErrors.themeParseError)throw Error("Error test: something crashed during the parsing of the theme!");if("object"===typeof t)for(var r in t){var u=t[r];if(e[r]){var z=[],A=Object.keys(u);if(A.length){var B=A.every(function(E){return-1!==E.indexOf("_")});A.forEach(function(E,
F){z[B?E.split("_")[1]:F]=u[E]})}t[r]=z}else f(u)}}var h={};b=b.replace(/\r?\n|\r/g,"");b=b.replace(/(\w|\d)_(\w|\d)/g,"$1@$2");b=b.replace("data:","dataM");b=b.replace(";base64","Mbase64");var l=function(){var t={};(b.match(/\..*?\}/g)||[]).forEach(function(r){var u=r.substring(1,r.indexOf("{")).trim(),z={};r.substring(r.indexOf("{")+1,r.indexOf("}")).trim().split(";").forEach(function(A){if(A=A.trim()){A=A.split(":");var B=A[1].trim();B=B.replace("dataM","data:");B=B.replace("Mbase64",";base64");
z[A[0].trim()]=B}});t[u]=z});return t}(),q;for(q in l)c(a(q),l[q]);delete h.themeMetadata;f(h);p.populateMissingStyles(h);return h}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUpdateUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ThemeLibrary","./ThemeUtil"],function(w,p,m,k){return{populateMissingStyles:function(e){if(e){e.table&&e.table.overrideStyles||(e.table={overrideStyles:w.mixin({},e.table)});e.icon||(e.icon=w.clone(e.infographic.staticInfographic.icon),
e.highlightedIcon=w.clone(e.infographic.staticInfographic.highlightedIcon));e.chart.icon||(e.chart.icon=w.clone(e.infographic.staticInfographic.icon));e.chart.xAxis.lineColor||(e.chart.xAxis.lineColor=e.chart.xAxis.axisStyle.color,e.chart.yAxis.lineColor=e.chart.yAxis.axisStyle.color);var b=k.getThemeColors(e),a=e.chart.colors.slice(),c=e.chart.colors3series&&e.chart.colors3series.slice(),d=m.getDefaultTheme({defaultFontFamilty:e.document.fontFamily,defaultFontSize:e.document.fontSize});k.applyThemeColorsToTheme({theme:d,
colors:b,chartColors:a,colors3series:c});p.populateObject(e,d,!1)}}}})},"esri/dijit/geoenrichment/utils/async/AsyncQueue":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dijit/Destroyable ../DelayUtil".split(" "),function(w,p,m,k,e,b){var a=w(e,{_lastPromise:null,_isFinished:!1,_isDestroyed:!1,_lastDfd:null,_lastResult:null,constructor:function(c){p.mixin(this,c)},add:function(c,d){d=d||{};var f=this;if(!this._isDestroyed){this._lastDfd||
(this.onStarted(),this._lastDfd=new m);this._isFinished=!1;var h=function(){var q=function(){if(!f._isDestroyed)try{return"function"===typeof c?c():c}catch(r){return(new m).reject(r)}},t=0<=d.delayBefore?function(){return b.delay(q,d.delayBefore)}:q;return(0<=d.delayAfter?function(){return k(t(),function(r){return b.delay(function(){return r},d.delayAfter)})}:t)()};!this._lastPromise||this._lastPromise.isFulfilled()?this._lastPromise=k(h()):this._lastPromise=k(this._lastPromise).then(h);var l=this._lastPromise;
k(l,function(q){l!==f._lastPromise||f._isDestroyed||f._isFinished||l&&!l.isFulfilled()||(f._isFinished=!0,f._lastDfd.resolve(q),f._lastResult=q,f._lastDfd=null,f.onFinished(q))},this._lastDfd.reject);return this.getPromise()}},getPromise:function(){return this._isDestroyed?null:this._lastDfd&&this._lastDfd.promise||this._lastResult},isFinished:function(){return this._isFinished},isDestroyed:function(){return this._isDestroyed},destroy:function(){this._isDestroyed=!0},onStarted:function(){},onFinished:function(c){}});
a.executeFunctions=function(c,d,f){f=f||{};var h=new a,l=[];c.forEach(function(q,t){h.add(function(){return k(q(),function(r){l.push(r);return r})},{delayBefore:0===t?void 0:d})});f.onQueueReady&&f.onQueueReady(h);return k(h.getPromise(),function(q){return f.collectResults?l:q})};a.processArrayInBatches=function(c,d){function f(){if(c.length){for(var l=[],q=0;q<d.batchSize&&c.length;q++)l.push(c.shift());d.processBatch?d.callback(l):l.forEach(d.callback);setTimeout(f,d.timeout||0)}else h.resolve()}
c=c.slice();var h=new m;f();return h.promise};return a})},"esri/dijit/geoenrichment/utils/DelayUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(w,p){return{delay:function(m,k,e){var b=new w;k="number"===typeof m?m:k;var a="function"===typeof m?m:null,c=e&&a&&a();setTimeout(function(){p(e?c:a&&a()).then(b.resolve,b.reject)},k||0);return b.promise}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/WebMapJsonUtil":function(){define([],
function(){return{processWebMapJson:function(w,p){function m(e,b,a){e=e.featureCollection.layers[0].featureSet.features[0];e.attributes=e.attributes||{};e.attributes[b]=a}var k=JSON.parse(p);k.operationalLayers.forEach(function(e){var b=e.featureCollection&&e.featureCollection.layers&&1===e.featureCollection.layers.length?e.featureCollection.layers[0].id:void 0;"string"===typeof b&&0===b.indexOf("SiteLayer")?(e.isSiteLayer=!0,(b=0===b.indexOf("SiteLayer.")?b.replace("SiteLayer.",""):void 0)&&m(e,
"STORE_ID",b)):"string"===typeof b&&0===b.indexOf("StudyAreasLayer.")?(e.isSiteLayer=!0,m(e,"AREA_ID",b.replace("StudyAreasLayer.",""))):"string"===typeof b&&0===b.indexOf("LocatorResultsLayer.")?(e.isLocatorLayer=!0,e.calculatorName=b.replace("LocatorResultsLayer.","")):"string"===typeof b&&0===b.indexOf("ComparisonResultsLayer.")?(e.isComparisonLayer=!0,e.calculatorName=b.replace("ComparisonResultsLayer.","")):e.isOtherLayer=!0});return{fileName:w,originalString:p,webMapJson:k}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsStoreSerializer":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./AttributesUtil ./NotesUtil ./CustomAttachmentsStore esri/dijit/geoenrichment/utils/ImageInfoUtil".split(" "),
function(w,p,m,k,e,b){return{getAttachmentsStoreJson:function(a,c){function d(u){if(c.noCache)return u;l=l||{};for(var z in l)if(l[z]===u)return z;z="image_"+h++;l[z]=u;return z}function f(){return p([c.saveImages&&a.getImages(),a.getAttributes(),a.getNotes()]).then(function(u){var z=u[0]||[],A=u[1]||[],B=u[2]||[];return p(z.map(function(E){return p([w(E.getThumbnail(),function(F){return b.ensureDataUrlForRemoveImage(F)}),w(E.getUrl(),function(F){return b.ensureDataUrlForRemoveImage(F)})]).then(function(F){E.__thumbnail=
d(F[0]);E.__url=d(F[1])})})).then(function(){return{images:z.map(function(E){var F=E.__thumbnail,G=E.__url;delete E.__thumbnail;delete E.__url;return{description:E.description,thumbnail:F,url:G,filename:E.filename,imageViewType:E.imageViewType}}),attributes:A.map(function(E){return m.attributeToJson(E)}),notes:B.map(function(E){return k.noteToJson(E)})}})})}if(!a)return null;var h=0,l,q=[],t=[];if(a.supportsMultipleAreas)for(var r=0;r<c.numAreas;r++)a.setCurrentAnalysisAreaIndex(r),t.push(w(f(),function(u){q.push(u)}));
else t.push(w(f(),function(u){q.push(u)}));return p(t).then(function(){return{supportsMultipleAreas:a.supportsMultipleAreas,areaAttachments:q,imageDataCache:l}})},getAttachmentsStoreFromJson:function(a){return a&&new e(a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/NotesUtil":function(){define([],function(){return{noteToJson:function(w){return{text:w.text}},noteFromJson:function(w){return{text:w.text}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/when"],function(w,p){var m={fromJson:function(k){function e(b){return k.imageDataCache&&k.imageDataCache[b]||b}k.areaAttachments=k.areaAttachments||k.areaAttachements;delete k.areaAttachements;return{getImagesForAreaAt:function(b){b=k.supportsMultipleAreas?b:0;return(k.areaAttachments[b]&&(k.areaAttachments[b].images||k.areaAttachments[b].attachments)||[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return e(a.thumbnail)},
getUrl:function(){return e(a.url)}}})},getAttributesForAreaAt:function(b){b=k.supportsMultipleAreas?b:0;return k.areaAttachments[b]&&k.areaAttachments[b].attributes||[]},getNotesForAreaAt:function(b){b=k.supportsMultipleAreas?b:0;return k.areaAttachments[b]&&k.areaAttachments[b].notes||[]}}}};return w(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,_provider:null,constructor:function(k){(this._provider=k.getAttachmentsForAreaAt||k.getImagesForAreaAt||k.getAttributesForAreaAt||k.getNotesForAreaAt?
k:m.fromJson(k))&&this._provider.getAttachmentsForAreaAt&&(k.getImagesForAreaAt=function(e){return k.getAttachmentsForAreaAt(e)});this.supportsMultipleAreas=k.supportsMultipleAreas},initialize:function(){},getImages:function(){function k(b){b.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var e=this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return e?Array.isArray(e)?(k(e),e):p(e,function(b){k(b);
return b}):e},getAttributes:function(){return this._provider.getAttributesForAreaAt?this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(k){this._currentAreaIndex=k}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonSerializer":function(){define(["./query/TemplateJsonQueryUtil","../images/ImageDataHolder",
"../conditionalStyling/ConditionalStyleUtil"],function(w,p,m){return{serialize:function(k){this._attachImagesToTemplateJson(k);return k},_attachImagesToTemplateJson:function(k){function e(a){var c=p.getImageData(a);c&&(b[a]=c)}var b={};w.processTemplateFieldInfos(k,function(a){a.isImage?(e(a.imageJson.fileName),a.triggerJson&&m.collectImageFileNames(a.triggerJson).forEach(e)):a.isInfographic&&a.infographicJson.variableTables&&a.infographicJson.variableTables.forEach(function(c){c.image&&e(c.image.imageJson.fileName)})});
w.processSectionElements(k,function(a){"img"===a.id&&e(a.fileName)});k.imageData=b},deserialize:function(k){this._takeImagesFromTemplateJson(k);return k},_takeImagesFromTemplateJson:function(k){for(var e in k.imageData)p.putImageData(e,k.imageData[e]);delete k.imageData}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil":function(){define(["esri/dijit/geoenrichment/utils/PageUnitsConverter","esri/dijit/geoenrichment/utils/SortUtil"],function(w,
p){var m={getConditionalStyle:function(c,d,f){return(c=m.getMatchedCase(c,d,f))?m.styleFromSetters(c.setters):null},getMatchedCase:function(c,d,f){if(null!==c&&""!==c&&(c=Number(c),d&&!isNaN(c))){var h;d.cases.some(function(l){if(m._checkValueMatchesCase(c,l,f))return h=l,!0});return h}},_checkValueMatchesCase:function(c,d,f){function h(l,q,t){t=f?(l=+l,f(+t)):t;switch(q){case "\x3d":return l===t;case "\x3c":return l<t;case "\x3e":return l>t;case "\x3c\x3d":return l<=t;case "\x3e\x3d":return l>=t}return!1}
return d.compareInfos&&d.compareInfos.length&&d.compareInfos.every(function(l){return h(c,l.operator,Number(l.value))})}},k={FontSize:"fontSize",FontColor:"fontColor",FontFamily:"fontFamily",ForeColor:"color",BackColor:"backgroundColor"},e={},b;for(b in k)e[k[b]]=b;m.styleFromSetters=function(c){if(!c)return null;var d={};c.forEach(function(f){k[f.property]&&(d[k[f.property]]=f.value);"IsBold"===f.property&&(d.fontWeight="True"===f.value?"bold":"normal");"IsItalic"===f.property&&(d.fontStyle="True"===
f.value?"italic":"normal");"IsUnderlined"===f.property&&(d.textDecoration="True"===f.value?"underline":"none")});w.ptToPxObj(d);return d};m.settersFromStyle=function(c){var d=[];c=w.pxToPtObj(c,!0);for(var f in c){var h=e[f],l=c[f];!h||"string"!==typeof l&&isNaN(l)||d.push({property:h,value:l});"fontWeight"===f?d.push({property:"IsBold",value:"bold"===l?"True":"False"}):"fontStyle"===f?d.push({property:"IsItalic",value:"italic"===l?"True":"False"}):"textDecoration"===f&&d.push({property:"IsUnderlined",
value:"underline"===l?"True":"False"})}return d};m.getConditionalFileName=function(c,d,f){function h(l){var q;d.cases.some(function(t){return t.isDefault===l?(q=t,!0):!1});return q}return(c=(c="first-non-default"===c?h(!1):m.getMatchedCase(c,d,f))||h(!0))?c.setters[0].value:null};var a=/\.png$/i;m.collectImageFileNames=function(c){var d=[];c&&c.cases&&c.cases.forEach(function(f){f.setters&&f.setters.forEach(function(h){"Source"===h.property&&a.test(h.value)&&d.push(h.value)})});return d};m.isSupportedStyleCalcMethod=
function(c){return"percentInGroup"===c||"aboveAverage"===c||"belowAverage"===c||"indexDescOrder"===c};m.getConditionalStylesOrFileNamesForGroup=function(c,d,f){var h=d.map(function(B,E){return{value:B,index:E}}),l=[];for(d=0;d<h.length;d++)l.push(void 0);if(h.length){var q=c.calcMethod;h=h.filter(function(B){return"number"===typeof B.value&&!isNaN(B.value)});q&&(h=h.sort(function(B,E){return p.compareNumeric(B.value,E.value,"indexDescOrder"===q)}));if(h.length)if(q)if("percentInGroup"===q){var t=
h[0].value,r=h[h.length-1].value;var u={min:t,max:r};h.forEach(function(B){var E=(B.value-t)/(r-t||.001)*100;l[B.index]=f?m.getConditionalFileName(E,c):m.getConditionalStyle(E,c)})}else if("indexDescOrder"===q){u={min:null,max:null,numElements:h.length};var z=function(B){return 0<=B?B:h.length+B};h.forEach(function(B,E){l[B.index]=f?m.getConditionalFileName(E,c,z):m.getConditionalStyle(E,c,z)})}else{d=function(){var B=0;h.forEach(function(E){B+=E.value});return B/h.length};if("aboveAverage"===q){var A=
d();h=h.filter(function(B){return B.value>A})}else if("belowAverage"===q)A=d(),h=h.filter(function(B){return B.value<A});else return{styles:l};h.forEach(function(B){l[B.index]=f?m.getConditionalFileName("first-non-default",c):m.styleFromSetters(c.cases[0].setters)})}else h.forEach(function(B){l[B.index]=f?m.getConditionalFileName(B.value,c):m.getConditionalStyle(B.value,c)})}return{styles:l,stats:u}};m.conditionalValueFromPercentInGroup=function(c,d,f){return c+f/100*(d-c)};m.getStatistics=function(c){var d=
Infinity,f=-Infinity,h,l;if(c)if(c.calcMethod&&"percentInGroup"!==c.calcMethod){d=0;f=100;var q=!0}else c.cases.forEach(function(t){t.compareInfos&&t.compareInfos.forEach(function(r){var u=Number(r.value);isNaN(u)||(u<d&&(d=u,h="\x3c"===r.operator||"\x3c\x3d"===r.operator),u>f&&(f=u,l="\x3e"===r.operator||"\x3e\x3d"===r.operator),q=!0)})});return q&&-1E12<d&&1E12>d&&-1E12<f&&1E12>f?{calcMethod:c.calcMethod,min:d,max:f,canFallBelowMin:h,canFallAboveMax:l}:null};return m})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],
function(){function w(e,b,a,c){e=void 0===e||null===e;return e!=(void 0===b||null===b)?(b=e?-1:1,(void 0===c?a:c)?-b:b):e?0:null}function p(e){var b=/^(.+)\s([1-9]\d*)$/.exec(e);return b?{base:b[1],number:b[2]}:/^[1-9]\d*$/.test(e)?{base:"",number:+e}:{base:e,number:0}}var m={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(e,b,a,c){c=w(e,b,a,c);if(null!==c)return c;e=Number(e);b=Number(b);c=e>b?1:e<b?-1:0;return a?-c:c},compareString:function(e,
b,a,c){c=w(e,b,a,c);if(null!==c)return c;e=String(e);b=String(b);c=e.localeCompare(b);return a?-c:c}},k=/^(.+)\s([1-9]\d*)(\D*)$/;m.compareNames=function(e,b,a,c){var d=p("string"===typeof e?e.toLowerCase():e),f=p("string"===typeof b?b.toLowerCase():b),h=null;if(d.base===f.base)h=m.compareNumeric(d.number,f.number,a,c);else{var l=k.exec(d.base);if(l){var q=k.exec(f.base);q&&l[1]===q[1]&&l[3]===q[3]&&(h=m.compareNumeric(l[2],q[2],a,c))}null===h&&(h=m.compareString(d.base,f.base,a,c))}return h||m.compareString(e,
b,a,c)};m.compare=function(e,b,a,c){var d=w(e,b,a,c);if(null!==d)return d;d=typeof e;typeof b!=d&&(d="");switch(d){case "number":case "boolean":break;case "object":e=e.valueOf();b=b.valueOf();break;default:return m.compareString(e,b,a,c)}d=e>b?1:e<b?-1:0;return a?-d:d};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./map/RendererToMetadataConverter"],function(w,
p){var m={},k={STORE_ID:1,AREA_ID:1,StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1};m.recoverMetadataFromAreaData=function(e,b){e=e[0];var a={name:"DataCollection",tags:[{name:"Calculators",tags:[]}]},c={},d;for(d in e){var f=e[d].data,h=e[d].comparisonLevels,l=b.map[d],q=!!l;l=q&&"object"===typeof l&&l.webMapJson||null;var t=b.locator[d];t={name:q?"Maps":t?"Locator":"DataCollections",attributes:{Name:d},tags:[]};a.tags[0].tags.push(t);var r=[];if(q)for(var u in f){if(!k[u]){var z={name:"Map",
attributes:{Name:u},tags:[{name:"Layers",tags:[]}]};l&&l.operationalLayers.forEach(function(E){if(E.isLocatorLayer){var F={name:"LocatorResultsLayer",attributes:{CalculatorName:E.calculatorName},tags:[p.convertRendererJson(E.featureCollection.layers[0].layerDefinition.drawingInfo.renderer)]};c[E.calculatorName]=E.featureCollection.layers[0].title;z.tags[0].tags.push(F)}E.isComparisonLayer&&(F=E.featureCollection.layers[0].layerDefinition.drawingInfo,E={name:"ComparisonResultsLayer",attributes:{CalculatorName:E.calculatorName},
tags:[p.convertRendererJson(F.renderer)]},F.labelingInfo&&E.tags.push(p.convertLabelingInfo(F.labelingInfo)),z.tags[0].tags.push(E))});r.push(z)}}else for(u in f)r.push({name:"Field",attributes:{Name:u,Alias:u,MapTo:"DC."+u,Type:"number"===typeof f[u]?"Double":"String"}});t.tags.push({name:"Fields",tags:r});if(h&&h.length){var A=[],B={};h.forEach(function(E){E.StdGeographyLevel&&!B[E.StdGeographyLevel]&&(B[E.StdGeographyLevel]=1,A.push(E.StdGeographyLevel))});A.length&&t.tags.push({name:"ComparisonLevels",
tags:A.map(function(E){return{name:"ComparisonLevel",attributes:{Name:E}}})})}}a.tags[0].tags.forEach(function(E){if("Locator"===E.name){var F=c[E.attributes.Name];F&&(E.attributes.LayerName=F)}});return w.parseJson(a)};return m})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/RendererToMetadataConverter":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(w,
p,m){var k={convertRendererJson:function(e){switch(e.type){case "simple":"esriPMS"===e.symbol.type&&(e=w.clone(e),delete e.symbol.url)}return m.parseXml(p.parseJson(e,{rootName:"Renderer"}))},convertLabelRendererJson:function(e){e=e.uniqueValueInfos.map(function(b){return{labelExpressionInfo:{expression:"$feature.StdGeographyName"},where:"StdGeographyLevel\x3d'"+b.value+"'",labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:b.symbol}});return k.convertLabelingInfo(e)},convertLabelingInfo:function(e){return m.parseXml(p.parseJson(e,
{rootName:"LabelingInfo"}))}};return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/CacheUtil ./CustomReportsManager ./GenericTemplateGenerator ./dataCollections/DataCollectionsLoader ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder".split(" "),
function(w,p,m,k,e,b,a,c,d,f,h){var l={_getCache:function(){return k.get("TemplateJsonLoader")},getCachedTemplateJsonPromise:function(q,t){q=q+";"+t.reportID;return(q=this._getCache()[q])&&q.modified===t.modified?q.promise.then(function(r){return{templateJson:w.clone(r.templateJson),templateVariableProvider:r.templateVariableProvider}}):null},putCachedTemplateJsonPromise:function(q,t,r){t=t+";"+r.reportID;this._getCache()[t]={modified:r.modified,promise:q}}};return{getTemplateJsonByID:function(q,
t){var r=this,u=new p;m(e.getCustomReportByID(q),function(z){if(z){var A=t&&l.getCachedTemplateJsonPromise(q.countryID,z);A?A.then(u.resolve,u.reject):(A=r._loadCustomReportData(z).then(function(){var B=new d;return m(c.provideEditorJson(z,{variableProvider:B}),function(){var E=z.templateJson;z.portalJson=null;z.templateJson=null;return{templateJson:E,templateVariableProvider:B}})}),t?(l.putCachedTemplateJsonPromise(A,q.countryID,z),l.getCachedTemplateJsonPromise(q.countryID,z).then(u.resolve,u.reject)):
A.then(u.resolve,u.reject))}else u.reject("Can't find a report")},u.reject);return u.promise},_loadCustomReportData:function(q){q.portalJson=null;return q.templateData.getFiles().then(function(t){q.portalJson={files:t}})},createTemplateJsonFromVariables:function(q){return a.loadVariables({countryID:q.countryID,outFields:["description","precision","type","vintage"],forceLowerCase:!0}).then(function(t){var r=new d,u=t.fullNameToVariableCache;t=q.variables.fullNames.map(function(z){var A=f.createFieldNameFromSource(z),
B=q.variables.customDataMapping[z];B=B?B.variable:u[z];z={id:B.id.toLowerCase(),fullName:z,alias:B.description,fieldName:A,precision:B.precision,calculatorName:f.DATA_COLLECTIONS_CALCULATOR_NAME,templateName:f.DATA_COLLECTIONS_CALCULATOR_NAME+"."+A,type:B.type,vintage:B.vintage};r.addVariable(z);return h.getCalculatorOrScriptFieldInfo(z.templateName,{variableProvider:r})});return{templateJson:b.generateTemplatesFromFieldInfos(t,{comparisonLevels:q.comparisonLevels}),templateVariableProvider:r}})}}})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GenericTemplateGenerator":function(){define("../../core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder ../../core/supportClasses/tableJson/TableJsonUtil ../../core/sections/sectionUtils/SectionJsonUtil ../../core/infographics/InfographicTypes ../../core/infographics/utils/InfographicJsonUtil".split(" "),function(w,p,m,k,e,b){var a={},c={calcNumRowsColumns:function(h){var l=
2>=h?1:6>=h?2:12>=h?3:Math.ceil(h/4);var q=1===h?1:4>=h?2:9>=h?3:4;return{numRows:l,numColumns:q,numVarsInLastRow:q-(l*q-h),lastRowCellIndexes:null,lastRowCellWidths:null}}},d={mergeLastRow:function(h,l,q){2===l.numColumns?1===l.numVarsInLastRow&&(m.modifyTableJson(h,l.numRows-1,0,{columnSpan:2}),l.lastRowCellWidths=[2*q]):3===l.numColumns?1===l.numVarsInLastRow?(m.modifyTableJson(h,l.numRows-1,0,{columnSpan:3}),l.lastRowCellWidths=[3*q]):2===l.numVarsInLastRow&&(m.modifyTableJson(h,l.numRows-1,0,
{cellStyle:{width:1.5*q}}),m.modifyTableJson(h,l.numRows-1,1,{columnSpan:2,cellStyle:{width:.5*q}}),l.lastRowCellWidths=[1.5*q,1.5*q]):4===l.numColumns&&(1===l.numVarsInLastRow?(m.modifyTableJson(h,l.numRows-1,0,{columnSpan:4}),l.lastRowCellWidths=[4*q]):2===l.numVarsInLastRow?(m.modifyTableJson(h,l.numRows-1,0,{columnSpan:2}),m.modifyTableJson(h,l.numRows-1,2,{columnSpan:2}),l.lastRowCellIndexes=[0,2],l.lastRowCellWidths=[2*q,2*q]):3===l.numVarsInLastRow&&(m.modifyTableJson(h,l.numRows-1,0,{cellStyle:{width:4*
q/3}}),m.modifyTableJson(h,l.numRows-1,1,{columnSpan:2,cellStyle:{width:2*q/3}}),m.modifyTableJson(h,l.numRows-1,2,{cellStyle:{width:2*q/3}}),m.modifyTableJson(h,l.numRows-1,3,{cellStyle:{width:4*q/3}}),l.lastRowCellIndexes=[0,1,3],l.lastRowCellWidths=[4*q/3,4*q/3,4*q/3]))}},f={insertNextPanel:function(h,l,q){void 0===l.currentRowIndex&&(l.currentRowIndex=0,l.currentColumnIndex=0);var t=l.currentRowIndex===l.numRows-1;h.rows[l.currentRowIndex].fieldInfos["field"+(t&&l.lastRowCellIndexes?l.lastRowCellIndexes[l.currentColumnIndex]:
l.currentColumnIndex)]=q(t&&l.lastRowCellWidths&&l.lastRowCellWidths[l.currentColumnIndex]);l.currentColumnIndex++;l.currentColumnIndex>l.numColumns-1&&(l.currentColumnIndex=0,l.currentRowIndex++)}};a.generateTemplatesFromFieldInfos=function(h){var l=c.calcNumRowsColumns(h.length),q=w.createBlankTemplate({elementWidth:500,elementHeight:250,layout:{numRows:l.numRows,numColumns:l.numColumns}}),t=q.sectionsTables[0];d.mergeLastRow(t,l,500);h.forEach(function(r){f.insertNextPanel(t,l,function(u){var z=
a._createInfographicJson(r,u||500,250);u=m.createSingleCellTable({width:u||500,height:250,fieldInfo:p.createFieldInfoFromInfographic(z)});return p.createFieldInfoFromSection(k.wrapInDetailsSectionJson(u))})});return q};a._createInfographicJson=function(h,l,q){return{type:e.ONE_VAR,title:h.alias,style:{width:l,height:q},levels:b.getDefaultLevels(),fieldInfos:[h],calcData:{calculatorName:h.templateName.substr(0,h.templateName.indexOf(".")),variables:[h.fullName]}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions",
"./TemplateJsonModificationUtil"],function(w,p){return{createBlankTemplate:function(m){var k={},e=m.documentOptions||w.getDefaultDocumentOptionsGraphicReport();e.pagesize=w.combineCustomSizeString(e.left+e.right+m.layout.numColumns*m.elementWidth,e.top+e.bottom+m.layout.numRows*m.elementHeight,"px");k.documentOptions=e;e={style:{width:m.layout.numColumns*m.elementWidth},columns:[],rows:[]};for(var b=0;b<m.layout.numColumns;b++)e.columns.push({field:"field"+b,style:{width:m.elementWidth}});for(b=0;b<
m.layout.numRows;b++)e.rows.push({style:{height:m.elementHeight},fieldInfos:{}});k.sectionsTables=[e];p.adjustDocumentOptions(k);return k}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(w,p){var m={},k={getJsonStat:function(b){var a=0,c=0,d=[];b.sectionsTables.forEach(function(f){var h=
0;f.columns.forEach(function(q){h+=e.getFieldWidth(f,f.rows[0],q)});a=Math.max(a,h);var l=0;f.rows.forEach(function(q){l+=e.getDataHeight(f,q,f.columns[0])});c=Math.max(c,l);d.push({totalW:h,totalH:l})});return{tableInfos:d,totalWMax:a,totalHMax:c}}},e={getFieldWidth:function(b,a,c){return p.getFieldWidth({looseResize:!0},a,c)||c.style.width},getDataHeight:function(b,a,c){return p.getDataHeight({looseResize:!0},a,c.field)},getAverageFieldWidth:function(b,a){var c=0;b.rows.forEach(function(d){c+=e.getFieldWidth(b,
d,a)});return c/b.rows.length},getAverageDataHeight:function(b,a){var c=0;b.columns.forEach(function(d){c+=e.getDataHeight(b,a,d)});return c/b.columns.length}};m.adjustDocumentOptions=function(b){if(b.documentOptions){var a=k.getJsonStat(b);a.totalWMax&&a.totalHMax&&!isNaN(a.totalWMax)&&!isNaN(a.totalHMax)&&(b=b.documentOptions,b.pagesize=w.combineCustomSizeString(b.left+b.right+a.totalWMax,b.top+b.bottom+a.totalHMax,"px"),(a=w.getClosestStandrdSizes(b)[0])&&.001>a.score&&a.orientation===b.orientation&&
(b.pagesize=a.pagesize))}};m.JsonStatCollector=k;m.DataUtil=e;return m})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator":function(){define("dojo/_base/lang ./gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil ./gridLayoutCalcUtils/GridElementBoxCalculator ./gridLayoutCalcUtils/GridCellNodePlacer ./gridLayoutCalcUtils/rows/GridLayoutRowsCalculator ./gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator ./gridLayoutCalcUtils/GridLayoutSnapper ../../supportClasses/tableJson/TableJsonUtil".split(" "),
function(w,p,m,k,e,b,a,c){var d={};m.calculator=d;d.markAsDirty=p.markAsDirty;d.fieldToColumn=p.fieldToColumn;d.dataIdToData=p.dataIdToData;d.getSpannedColumns=p.getSpannedColumns;d.recalcRows=e.recalcRows;d.recalcColumns=b.recalcColumns;d.recalcColumnsTableJson=b.recalcColumnsTableJson;d.recalcRowsToFitHeight=e.recalcRowsToFitHeight;d.adjustColumnWidth=b.adjustColumnWidth;d.getAffectedCellsForColumnAdjust=b.getAffectedCells;d.adjustRowHeight=e.adjustRowHeight;d.getAffectedCellsForRowAdjust=e.getAffectedCells;
d.recalcGridWidth=b.recalcGridWidth;d.calcFieldWidth=b.calcFieldWidth;d.getFieldWidth=b.getFieldWidth;d.setFieldWidth=b.setFieldWidth;d.calcDataHeight=e.calcDataHeight;d.getDataHeight=e.getDataHeight;d.setDataHeight=e.setDataHeight;d.autoSnapLayout=a.autoSnapLayout;d.positionCells=k.positionCells;d.calcFeatureCount=function(f,h,l){return(f-h)/l};d.calcRingIndexForCell=function(f){var h=f.parentGrid;if(!h)return-1;if(h.getNumDynamicRows())return void 0!==f.row.currentFeatureIndex?f.row.currentFeatureIndex:
f.row.index-h.getNumFixedRows();var l=h.getNumFixedColumns();return f.column.index<l?-1:Math.floor((f.column.index-l)/h.getNumDynamicColumns())};d.trimColumnsForNumberOfFeatures=function(f){for(var h=f.viewModel.dynamicReportInfo.fieldData.areaData.length,l=d.recalcGridWidth(f),q=0,t=0;t<f.getNumFixedColumns();t++)q+=f.columns[t].style.width;l-=q;q=d.calcFeatureCount(f.columns.length,f.getNumFixedColumns(),f.getNumDynamicColumns())-h;if(!(0>q)){var r=f.columns.slice();t=r.length=f.getNumFixedColumns();
for(var u=[],z=0;f.columns[t];){for(var A=0;A<h;A++){var B=f.columns[t++];z+=B.style.width;u.push(B)}t+=q}var E=l/z;u.forEach(function(F){F.style.width*=E});f.columns=r.concat(u)}};d.adjustRowsForNumberOfFeatures=function(f){var h=f.viewModel.dynamicReportInfo.fieldData.areaData.length;if(!(1>=h)){var l=f.rows[f.getNumFixedRows()];l.currentFeatureIndex=0;for(var q=1;q<h;q++){var t=w.clone(l);t.currentFeatureIndex=q;f.rows.push(t)}c.applyDefaultStyling({rows:f.rows,columns:f.columns})}};return d})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil":function(){define([],function(){var w={markAsDirty:function(p){p._fieldToColumnHash=null;p._dataIdToDataHash=null},_calcGridHashes:function(p){p._fieldToColumnHash={};p.columns.forEach(function(m){p._fieldToColumnHash[m.field]=m});p._dataIdToDataHash={};p.rows.forEach(function(m){p._dataIdToDataHash[m.id]=m})},fieldToColumn:function(p,m){p._fieldToColumnHash||w._calcGridHashes(p);return p._fieldToColumnHash&&
p._fieldToColumnHash[m]},dataIdToData:function(p,m){p._dataIdToDataHash||w._calcGridHashes(p);return p._dataIdToDataHash&&p._dataIdToDataHash[m]},getSpannedColumns:function(p,m,k){var e=[];if(1>k)return[];var b;p.columns.some(function(a){if(b||a.field===m)e.push(a),b=!0;if(e.length===k)return!0});return e},getColumnSpannedFields:function(p,m,k){var e=null,b=m.fieldToRowSpanSourceDataIndex&&m.fieldToRowSpanSourceDataIndex[k];m=void 0!==b?p.rows[b]:m;m=m.columnSpans&&m.columnSpans[k];if(1<m)for(e=[],
k=w.fieldToColumn(p,k),b=k=p.columns.indexOf(k);b<k+m;b++)e.push(p.columns[b].field);return e},getRowSpannedData:function(p,m,k){var e=null;k=m.fieldToColumnSpanSourceField&&m.fieldToColumnSpanSourceField[k]||k;k=m.rowSpans&&m.rowSpans[k];if(1<k){e=[];for(var b=m=p.rows.indexOf(m);b<m+k;b++)e.push(p.rows[b])}return e},getMovableData:function(p,m,k){return(m=m.movableIndexHashVertical&&m.movableIndexHashVertical[k])&&p.rows[m]},getMovableColumn:function(p,m,k){return(m=m.movableFieldsHashHorizontal&&
m.movableFieldsHashHorizontal[k])&&w.fieldToColumn(p,m)}};return w})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridElementBoxCalculator":function(){define([],function(){function w(m,k,e,b,a){function c(t){return b&&void 0!==b.places?Number(t.toFixed(b.places)):t}if(!k||!e)return null;var d=p.calculator[a?"getFieldWidth":"calcFieldWidth"](m,k,e);a=p.calculator[a?"getDataHeight":"calcDataHeight"](m,k,e);for(var f=0,h=0,l=p.calculator.fieldToColumn(m,e),q=0;q<l.index;q++)f+=
p.calculator.getFieldWidth(m,k,m.columns[q].field);for(q=0;q<k.index;q++)h+=p.calculator.getDataHeight(m,m.rows[q],e);return{x:c(f),y:c(h),w:c(d),h:c(a)}}var p={calculator:null,calcCellBox:function(m,k){return w(m.parentGrid,m.row,m.column.field,k,!1)},calcDataBox:function(m,k,e,b){return w(m,k,e,b,!0)}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridCellNodePlacer":function(){define(["./rows/GridLayoutRowsCalculator","./columns/GridLayoutColumnsCalculator"],
function(w,p){return{positionCells:function(m){var k={},e={},b={},a={};if(m.rows.length){m.rows.forEach(function(h,l){m.columns.forEach(function(q,t){var r=b[t]||0,u=a[l]||0,z=w.getDataHeight(m,h,q.field);q=p.getFieldWidth(m,h,q.field);r+=z;u+=q;e[t+"_"+l]=r;k[t+"_"+l]=u;b[t]=r;a[l]=u})});m.getCells().forEach(function(h){h.domNode.style.left=(k[h.column.index-1+"_"+h.row.index]||0)+"px";h.domNode.style.top=(e[h.column.index+"_"+(h.row.index-1)]||0)+"px"});var c=0,d;for(d in b)c=Math.max(c,b[d]);var f=
0;for(d in a)f=Math.max(f,a[d]);m.mainNode.style.width=f+"px";m.mainNode.style.height=c+"px";m.domNode.style.width=f+"px";m.domNode.style.height=c+"px";m._width=f;m._height=c}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/GridLayoutRowsCalculator":function(){define(["./RowsProcessor","./RowsScaler","./RowDataUtil","./RowModifier"],function(w,p,m,k){var e={};e.recalcRows=w.recalcRows;e.recalcRowsToFitHeight=p.recalcRowsToFitHeight;e.adjustRowHeight=k.adjustRowHeight;
e.getAffectedCells=k.getAffectedCells;e.getDataHeight=m.getDataHeight;e.setDataHeight=m.setDataHeight;e.calcDataHeight=m.calcDataHeight;return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./RowDataUtil","../GridLayoutCalculatorQueryUtil"],function(w,p,m){function k(b,a){var c=[],d,f=0;a&&Object.keys(a).forEach(function(h){m.fieldToColumn(b,h)?f++:delete a[h]});f&&b.columns.some(function(h){if(d||
a[h.field])c.push(h),d=!0;a[h.field]&&f--;if(!f)return!0});return c}function e(b,a){var c=[],d,f=0;a&&Object.keys(a).forEach(function(h){m.dataIdToData(b,h)?f++:delete a[h]});f&&b.rows.some(function(h){if(d||a[h.id])c.push(h),d=!0;a[h.id]&&f--;if(!f)return!0});return c}return{recalcRows:function(b){var a={};b.columns.forEach(function(h,l){a[h.field]=l});var c;b.rows.forEach(function(h,l){h.index=l;h.style=h.style||{};h.style.fields=h.style.fields||{};void 0===h.id&&(h.id=w());void 0===h.style.height&&
(h.style.height=b.layoutDefaults.defaultRowHeight);delete h.excludedIndexHorizontal;delete h.movableFieldsHashHorizontal;delete h.fieldToColumnSpanSourceField;if(h.columnSpans){h.excludedIndexHorizontal={};h.movableFieldsHashHorizontal={};h.fieldToColumnSpanSourceField={};h._columnSpans=h._columnSpans||{};for(c in h.columnSpans){l=h._columnSpans[c];var q={};l=l?k(b,l):m.getSpannedColumns(b,c,h.columnSpans[c]);1<l.length&&(l.forEach(function(r){q[r.field]=!0;r.field!==c&&(h.excludedIndexHorizontal[a[r.field]]=
!0,h.fieldToColumnSpanSourceField[r.field]=c)}),h.movableFieldsHashHorizontal[c]=l[l.length-1].field);h.columnSpans[c]=l.length;h._columnSpans[c]=q}var t=0;Object.keys(h.columnSpans).forEach(function(r){2>h.columnSpans[r]?(delete h.columnSpans[r],delete h._columnSpans[r]):t++});t||(delete h.columnSpans,delete h._columnSpans)}delete h.excludedIndexVertical;delete h.movableIndexHashVertical;delete h.fieldToRowSpanSourceDataIndex;h.fieldInfos=h.fieldInfos||{}});b.rows.forEach(function(h,l){if(h.rowSpans)for(c in h._rowSpans=
h._rowSpans||{},h.rowSpans){var q=h._rowSpans[c],t={};t[h.id]=!0;var r=a[c],u=h.rowSpans[c];if(q)q=e(b,q);else{q=[];for(var z=l;z<l+u;z++)q.push(b.rows[z])}1<q.length&&(q.forEach(function(A){if(A.id!==h.id){A.excludedIndexVertical=A.excludedIndexVertical||{};A.excludedIndexVertical[r]=!0;A.fieldToRowSpanSourceDataIndex=A.fieldToRowSpanSourceDataIndex||{};A.fieldToRowSpanSourceDataIndex[c]=h.index;var B=h.columnSpans&&h.columnSpans[c];if(B)for(var E=1;E<B;E++)A.excludedIndexVertical[r+E]=!0,A.fieldToRowSpanSourceDataIndex[b.columns[r+
E].field]=h.index}t[A.id]=!0}),h.movableIndexHashVertical=h.movableIndexHashVertical||{},h.movableIndexHashVertical[c]=l+q.length-1);h.rowSpans[c]=q.length;h._rowSpans[c]=t}});b.rows.forEach(function(h,l){if(h.rowSpans){for(c in h.rowSpans)h.rowSpans[c]=Math.min(h.rowSpans[c],b.rows.length-l);var q=0;Object.keys(h.rowSpans).forEach(function(t){2>h.rowSpans[t]?(delete h.rowSpans[t],h._rowSpans&&delete h._rowSpans[t]):q++});q||(delete h.rowSpans,delete h._rowSpans)}});b.rows.forEach(function(h,l){h.fieldInfos&&
Object.keys(h.fieldInfos).forEach(function(q){void 0===a[q]&&delete h.fieldInfos[q]});h.style&&h.style.fields&&Object.keys(h.style.fields).forEach(function(q){void 0===a[q]&&delete h.style.fields[q]})});if(b.looseResize){b.rows.forEach(function(h){b.columns.some(function(l){p.getDataHeightOwn(b,h,l.field)||p.setDataHeight(b,h,l.field,h.style.height)})});var d=b.rows[b.rows.length-1],f=p.recalcGridHeight(b);b.columns.some(function(h){var l=0;b.rows.forEach(function(t){l+=p.getDataHeightOwn(b,t,h.field)});
var q=f-l;0!==q&&p.setDataHeight(b,d,h.field,p.getDataHeightOwn(b,d,h.field)+q)})}p.recalcGridHeight(b)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(w){var p={getDataHeight:function(m,k,e){return m.looseResize?p.getDataHeightOwn(m,k,e)||k.style.height||0:k.style.height||0},getDataHeightOwn:function(m,k,e){if(m.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[e]=
k.style.fields[e]||{}).height},setDataHeight:function(m,k,e,b,a){m.looseResize?(a?w.getColumnSpannedFields(m,k,e)||[e]:[e]).forEach(function(c){k.style.fields=k.style.fields||{};(k.style.fields[c]=k.style.fields[c]||{}).height=b}):k.style.height=b},calcDataHeight:function(m,k,e,b){var a=0,c=k.rowSpans&&k.rowSpans[e];if(1<c)for(var d=k.index;d<k.index+c;d++)d!==b&&(a+=p.getDataHeight(m,m.rows[d],e));else a=p.getDataHeight(m,k,e);return a},recalcGridHeight:function(m){m._height=0;var k=m.columns[0].field;
m.rows.forEach(function(e){m._height+=p.getDataHeight(m,e,k)});return m._height}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsScaler":function(){define(["./RowDataUtil"],function(w){return{recalcRowsToFitHeight:function(p,m){function k(a){a.forEach(function(c){p.columns.some(function(d,f){if(!p.looseResize&&f)return!0;w.setDataHeight(p,c,d.field,w.getDataHeight(p,c,d.field)*b)})})}var e=w.recalcGridHeight(p),b=m/e;1!==b&&(k(p.rows),p._getSavedOriginalData()&&
k(p._getSavedOriginalData()),w.recalcGridHeight(p))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./RowDataUtil","./_RowModifierLoose","./_RowModifierNormal"],function(w,p,m,k){var e={},b={checkHeightLimit:function(d,f,h,l){if(d.getMaxHeight()){var q=0;d.rows.forEach(function(t){t!==f&&(q+=p.getDataHeight(d,t,h))});l=Math.min(d.getMaxHeight()-q,l)}return l}},a={findDataToMove:function(d,
f,h,l){var q=w.getMovableData(d,f,h);q&&(d=p.calcDataHeight(d,f,h,q.index),l-=d);return{data:q||f,height:l}}},c={finalResizeGridCells:function(d){d.getCells().forEach(function(f){f.setHeight(p.calcDataHeight(d,f.row,f.column.field))})}};e.adjustRowHeight=function(d,f,h,l){l=b.checkHeightLimit(d,f,h,l);f=a.findDataToMove(d,f,h,l);(d.looseResize?m:k).adjustRowHeight(d,f.data,h,f.height);c.finalResizeGridCells(d)};e.getAffectedCells=function(d,f,h){return d.looseResize?m.getAffectedCells(d,a.findDataToMove(d,
f,h).data,h):null};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./RowDataUtil ../../GridQueryUtil".split(" "),function(w,p,m,k,e,b){var a={collectRowBoxes:function(h,l){for(var q=[],t=0;t<h.columns.length;){var r=h.columns[t],u=this._createEmptyBox();r=m.getColumnSpannedFields(h,l,r.field)||[r.field];u.elements=
this._getFieldsElements(h,l,r);this._measureBox(u);var z=q[q.length-1];z&&(z.nextSibling=u,u.prevSibling=z);q.push(u);t+=r.length}return q},_createEmptyBox:function(){return{id:p(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getFieldsElements:function(h,l,q){var t=[];q.forEach(function(r){r={data:l,dataIndex:l.index,field:r,box:k.calcDataBox(h,l,r,{places:2})};t.push(r)});return t},_measureBox:function(h){var l=0;h.elements.forEach(function(q){l+=
q.box.w});h.box={x:h.elements[0].box.x,y:h.elements[0].box.y,h:h.elements[0].box.h,w:l}},mergeBoxesForBottomRow:function(h){var l=this._createEmptyBox();h.forEach(function(q){q.elements.forEach(function(t){l.elements.push({data:null,field:t.field,box:w.clone(t.box)})})});this._measureBox(l);l.box.h=1E6;return[l]},getBoxAtField:function(h,l){return h.filter(function(q){return q.elements[0].field===l})[0]}},c={buildInfluenceTree:function(h,l,q){function t(r,u){(u?l:h).forEach(function(z){var A;if(A=
!z.overlappingBoxesCache[r.id]){A=r.box;var B=z.box;A=!(A.x+.5>=B.x+B.w||A.x+A.w<=B.x+.5)}A&&(r.overlappingBoxes.push(z),r.overlappingBoxesCache[z.id]=!0)});r.overlappingBoxes.forEach(function(z){t(z,!u)})}q=a.getBoxAtField(h,q);t(q,!0);return q}},d={applyForce:function(h,l,q){function t(u,z){var A=u.elements[0];A.data&&e.setDataHeight(h,A.data,A.field,e.getDataHeight(h,A.data,A.field)+(z?-1:1)*r,!0);u.overlappingBoxes.forEach(function(B){t(B,!z)})}var r=this._checkDelta(h,l,q);t(l,!1)},_checkDelta:function(h,
l,q){function t(z,A){0!==u&&(A?0>u||(u=Math.min(u,z.box.h-r),z.prevSibling&&(u=Math.min(u,z.prevSibling.box.y+z.prevSibling.box.h-r-z.box.y)),z.nextSibling&&(u=Math.min(u,z.nextSibling.box.y+z.nextSibling.box.h-r-z.box.y))):0<u||(u=Math.max(u,-(z.box.h-r)),z.prevSibling&&(u=Math.max(u,-(z.box.y+z.box.h-(z.prevSibling.box.y+r)))),z.nextSibling&&(u=Math.max(u,-(z.box.y+z.box.h-(z.nextSibling.box.y+r))))),z.overlappingBoxes.forEach(function(B){t(B,!A)}))}var r=h.layoutDefaults.rowMinHeight;q=Math.max(q,
r);var u=q-l.box.h;t(l,!1);return u}},f={_getInluencedStartBox:function(h,l,q){var t=h.rows[l.index+1];l=a.collectRowBoxes(h,l);h=t?a.collectRowBoxes(h,t):a.mergeBoxesForBottomRow(l);return c.buildInfluenceTree(l,h,q)},getAffectedCells:function(h,l,q){function t(u){if(u.elements[0].data){var z=b.querySingleCell(h,{rowIndex:u.elements[0].data.index,columnField:u.elements[0].field,considerSpans:!0});z&&r.push(z)}u.overlappingBoxes.forEach(t)}var r=[];l=this._getInluencedStartBox(h,l,q);t(l);return r},
adjustRowCell:function(h,l,q,t){l=this._getInluencedStartBox(h,l,q);d.applyForce(h,l,t)}};return{adjustRowHeight:function(h,l,q,t){f.adjustRowCell(h,l,q,t)},getAffectedCells:function(h,l,q){return f.getAffectedCells(h,l,q)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridQueryUtil":function(){define(["dojo/dom-geometry","./GridDataUtil","esri/dijit/geoenrichment/utils/ArrayUtil","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/MouseUtil"],function(w,p,m,
k,e){var b={querySingleCell:function(a,c){c.fieldCell&&(c={rowId:c.fieldCell.row.id,columnId:c.fieldCell.column.id});var d;a.getCells().some(function(t){if(t.parentGrid&&t.column&&t.row&&!(t.column.id!==c.columnId&&t.column.index!==c.columnIndex&&t.column.field!==c.columnField||t.row.id!==c.rowId&&t.row.index!==c.rowIndex))return d=t,!0});if(d)return d;if(c.considerSpans){var f=b.queryColumn(a,c),h=b.queryData(a,c);if(!f||!h)return null;var l=f.index,q=h.index;a.rows.some(function(t){return a.columns.some(function(r){var u=
r.index,z=r.index+(t.columnSpans&&t.columnSpans[r.field]||0),A=t.index;r=t.index+(t.rowSpans&&t.rowSpans[r.field]||0);if(u<=l&&z>=l&&A<=q&&r>=q)return d=b.querySingleCell(a,{columnIndex:u,rowIndex:A}),!0})})}return d},queryColumn:function(a,c){var d;a.columns.some(function(f){if(f.id===c.columnId||f.index===c.columnIndex||f.field===c.columnField)return d=f,!0});return d},queryData:function(a,c){var d;a.rows.some(function(f){if(f.id===c.rowId||f.index===c.rowIndex)return d=f,!0});return d},queryCells:function(a,
c){if(c.fieldCell){var d=[],f=c.rowSpan||1,h=c.columnSpan||1;if(c=b.querySingleCell(a,c))for(var l=c.row.index;l<c.row.index+f;l++)for(var q=c.column.index;q<c.column.index+h;q++){var t=b.querySingleCell(a,{rowIndex:l,columnIndex:q});t&&d.push(t)}return d}return this.queryCellsInArray(a.getCells(),c)},queryCellsInArray:function(a,c){var d=[];if(!Object.keys(c).length)return d;a.forEach(function(f,h){void 0!==c.cellIndex&&h!==c.cellIndex||void 0!==c.cellIndexes&&-1===c.cellIndexes.indexOf(h)||void 0!==
c.columnId&&f.column.id!==c.columnId||void 0!==c.columnIds&&-1===c.columnIds.indexOf(f.column.id)||void 0!==c.columnIndex&&f.column.index!==c.columnIndex||void 0!==c.columnIndexes&&-1===c.columnIndexes.indexOf(f.column.index)||void 0!==c.columnField&&f.column.field!==c.columnField||void 0!==c.columnFields&&-1===c.columnFields.indexOf(f.column.field)||void 0!==c.rowId&&f.row.id!==c.rowId||void 0!==c.rowIds&&-1===c.rowIds.indexOf(f.row.id)||void 0!==c.rowIndex&&f.row.index!==c.rowIndex||void 0!==c.rowIndexes&&
-1===c.rowIndexes.indexOf(f.row.index)||d.push(f)});return d},isDynamicFieldCell:function(a,c){return a._dynamicBindings&&a._dynamicBindings[c.column.field]},getDynamicallyBoundColumns:function(a,c){return a._dynamicBindings&&a._dynamicBindings[c.field]},getDynamicallyBoundFieldCells:function(a,c){if(c.column){var d=a._dynamicBindings&&a._dynamicBindings[c.column.field];if(!d)return null;var f=[];d.forEach(function(h){(h=h&&b.querySingleCell(a,{columnId:h.id,rowId:c.row.id}))&&f.push(h)});return f}},
getAllBoundCells:function(a,c,d){var f=[],h={};c&&c.forEach(function(l){if((!d||d(l))&&!h[l.uniqueId]){h[l.uniqueId]=!0;var q=b.getDynamicallyBoundFieldCells(a,l);q?q.forEach(function(t){f.push(t);h[t.uniqueId]=!0}):f.push(l)}});return m.removeDuplicates(f,"uniqueId")},trimDynamicBindings:function(a,c){var d=[],f={};c&&c.forEach(function(h){var l=b.getDynamicallyBoundFieldCells(a,h);l&&l.length?(f[l[0].uniqueId]||d.push(l[0]),l.forEach(function(q){f[q.uniqueId]=!0})):d.push(h)});return d},collectFieldInfos:function(a,
c){var d=[];c=c||{};var f=c.fieldCells||a.getCells();c.trimDynamicBinding&&f&&(f=b.trimDynamicBindings(a,f));f&&f.forEach(function(h){(h=p.getFieldInfo(h))&&d.push(h)});return d},cellHasFloatingTableParent:function(a){function c(d){return d.isSection&&d.isDataDrillingView?!1:d.isFloatingTable?!0:d.parentWidget?c(d.parentWidget):!1}return a&&a.parentGrid?c(a.parentGrid):!1},isMouseOver:function(a){return e.isMouseOverBox(b.getBBox(a))},getOverFieldCell:function(a,c){c=c||{};var d=c.cellFilter||function(){return!0},
f;a.getForegroundFloatingCells({topFirst:!0}).some(function(h){if(d(h)&&h.isMouseOver())return f=h,!0});f||a.getCells().some(function(h){if(d(h)&&h.isMouseOver())return f=h,!0});f||a.getBackgroundFloatingCells({topFirst:!0}).some(function(h){if(d(h)&&h.isMouseOver())return f=h,!0});return f},getBBox:function(a,c){var d=a.isSingleCelledTable()&&a.getFirstCell().getAngle();return"number"===typeof d&&0!==d?a.getFirstCell().getBBox(c):c&&c.noTransformation?k.noTransformPosition(a.domNode):w.position(a.domNode)}};
return b})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(w,p,m,k,e,b,a){function c(r,u){Array.isArray(r)?r.forEach(u):u(r);return r}function d(r,u,z){var A=!1,B=function(E){!E||z&&!z(E)||(E.parentNode===u?A=!0:B(E.parentNode))};B(r);return A}function f(r){return!l.isHidden(r)&&"none"!==e.get(r,"display")&&!p.contains(r,"dijitHidden")}
function h(){q||(q=m.create("div",{"class":"esriGEOffscreen"},document.body));return q}var l={isHidden:function(r){return r&&p.contains(r,"esriGEHidden")},hasVisibleChildren:function(r){if(!r||!r.children.length)return!1;for(var u=0;u<r.children.length;u++)if(!l.isHidden(r.children[u]))return!0;return!1},hide:function(r){return l.addTag(r,"esriGEHidden")},show:function(r){return l.removeTag(r,"esriGEHidden")},display:function(r,u){return l[u?"show":"hide"](r)},addTag:function(r,u){return c(r,function(z){z&&
p.add(z,u)})},removeTag:function(r,u){return c(r,function(z){z&&p.remove(z,u)})},getChildIndex:function(r,u){if(!r||!r.children||!u)return-1;for(var z=0;z<r.children.length;z++)if(r.children[z]===u)return z;return-1},isChildOf:function(r,u){return d(r,u)},isNodeInLayout:function(r){return d(r,document.body,function(u){return f(u)})},isNodeVisible:function(r){return d(r,document.body,function(u){return f(u)&&"hidden"!==e.get(u,"visibility")})},isNodeOnscreen:function(r){return d(r,document.body,function(u){return!p.contains(u,
"esriGEOffscreen")})},enableContent:function(r,u,z){if(r){z=z||{};var A=r.children.length-1;if(!(0>A||(A=r.children[A],p.contains(A,"esriGEDisabledContent")||(A=null),A&&r.removeChild(A),u)))return A=m.create("div",{"class":"esriGEDisabledContent"+(z.overlayClass?" "+z.overlayClass:"")},r),z.textContent&&(A.textContent=z.textContent),!1!==z.fitParent&&(r=k[z.marginBox?"getMarginBox":"getContentBox"](r).h)&&e.set(A,{height:r+"px",marginTop:-r+"px"}),A}},enableContentAbsolute:function(r,u,z){if(r){z=
z||{};var A=e.get(r,"position");"relative"===A||"absolute"===A||u||e.set(r,"position","relative");return l.enableContent(r,u,{overlayClass:"esriGEAbsoluteStretched"+(z.overlayClass?" "+z.overlayClass:"")+(z.isTransparent?" esriGEDisabledContentTransparent":""),fitParent:!1,textContent:z.textContent})}}},q;l.hideNodeInBackground=function(r,u){if(r){if(r._hideNodeInBackgroundUndoController)return r._hideNodeInBackgroundUndoController;var z=m.create("div",null,r,"after"),A=m.create("div",{style:"position: absolute; left: 0px; top: 0px;"},
h());m.place(r,A);u="DomUtil.hideNodeInBackground"+(u?"."+u:"");w.set(z,"_bg_memo_node",u);w.set(A,"_bg_temp_node",u);u={remove:function(){z&&(z.parentNode&&m.place(r,z,"replace"),m.destroy(z),m.destroy(A),q.children.length||(m.destroy(q),q=null),z=null,delete r._hideNodeInBackgroundUndoController)}};return r._hideNodeInBackgroundUndoController=u}};l.showNodeFromBackground=function(r){r&&r._hideNodeInBackgroundUndoController&&r._hideNodeInBackgroundUndoController.remove()};l.noTransformPosition=function(r){function u(E){for(var F=
{x:0,y:0};E.offsetParent;)F.x+=E.offsetLeft,F.y+=E.offsetTop,E=E.offsetParent,F.x+=e.get(E,"borderLeftWidth"),F.y+=e.get(E,"borderTopWidth");return F}function z(E){return e.get(E,"width")+e.get(E,"paddingLeft")+e.get(E,"paddingRight")+e.get(E,"borderLeftWidth")+e.get(E,"borderRightWidth")}function A(E){return e.get(E,"height")+e.get(E,"paddingTop")+e.get(E,"paddingBottom")+e.get(E,"borderTopWidth")+e.get(E,"borderBottomWidth")}if(r){if(r instanceof SVGElement&&r.getBBox){var B=(B=r.ownerSVGElement&&
r.ownerSVGElement.parentNode)&&u(B);r=r.getBBox();return{x:(r.x||0)+B.x,y:(r.y||0)+B.y,w:r.width||0,h:r.height||0}}B=u(r);return{x:B.x,y:B.y,w:z(r),h:A(r)}}};l.getNodesBox=function(r,u){if(!r||!r.length)return null;u=u||{};for(var z=1E6,A=-1E6,B=1E6,E=-1E6,F=0;F<r.length;F++){var G=r[F];G=u.ignoreTransformation?l.noTransformPosition(G):k.position(G);z=Math.min(z,G.x);B=Math.min(B,G.y);A=Math.max(A,G.x+G.w);E=Math.max(E,G.y+G.h)}r={x:z,y:B,w:A-z,h:E-B};u.originNode&&(u=u.ignoreTransformation?l.noTransformPosition(u.originNode):
k.position(u.originNode),r.x-=u.x,r.y-=u.y);return r};l.traverseChildren=function(r,u){function z(A){if(A&&A.children)for(var B=0;B<A.children.length;B++){var E=A.children[B];if(u(E))break;z(E)}}z(r)};l.scrollToListNode=function(r,u,z){var A=u.offsetTop+u.clientHeight,B=A-(r.scrollTop+r.clientHeight);0<B&&(r.scrollTop+=B);z&&(A-=u.clientHeight-z.offsetTop,B=r.scrollTop-A,0<B&&(r.scrollTop-=B))};var t;l.getScrollbarSize=function(){if(!t){var r=m.create("div",null,document.body);r.style.width="100px";
r.style.height="100px";r.style.overflow="scroll";r.style.position="absolute";r.style.top="9999px";t={w:r.offsetWidth-r.clientWidth,h:r.offsetHeight-r.clientHeight};m.destroy(r)}return t};l.hasScrollbars=function(r){var u=e.getComputedStyle(r);return{w:"scroll"===u.overflowX||r.offsetWidth>r.clientWidth&&"auto"===u.overflowX,h:"scroll"===u.overflowY||r.offsetHeight>r.clientHeight&&"auto"===u.overflowY}};l.getMeasureContext=function(r){r=r||{};r.style=r.style?r.style+" ":"";r.style+="display: inline-block; position: absolute; left: 0; top: 0;";
return{div:m.create("div",r,document.body),measureText:function(u){this.div.innerHTML=u;u=k.getMarginBox(this.div);delete u.l;delete u.t;return u},destroy:function(){m.destroy(this.div)}}};l.getTextBox=function(r,u){u=l.getMeasureContext(u);r=u.measureText(r);u.destroy();return r};l.getNodeFontFamily=function(r){return(r=e.get(r,"fontFamily")||e.getComputedStyle(r).fontFamily)&&r.replace(/'|"/g,"").split(",")[0]};l.getNodeFontSize=function(r){return e.toPixelValue(r,e.get(r,"fontSize"))};l.stealFocus=
function(){var r=new a;try{var u=m.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});m.place(u,document.body);u.select();m.destroy(u)}catch(z){}setTimeout(r.resolve,0);return r.promise};l.getWindowBox=function(){for(var r=[],u=0,z=document.body.children.length;u<z;u++){var A=document.body.children[u];l.isHidden(A)||(l.hide(A),r.push(A))}u={w:document.body.clientWidth,h:document.body.clientHeight};r.forEach(function(B){l.show(B)});return u};l.isBodyLtr=function(){return"ltr"===
(document.body.dir||"ltr").toLowerCase()};l.setAttribute=function(r,u,z){return 2===arguments.length?w.set(r,u):w.set(r,u,z)};l.getAttribute=function(r,u,z){return 2===arguments.length?w.get(r,u):w.get(r,u,z)};l.addClass=function(r,u){p.add(r,u)};l.removeClass=function(r,u){p.remove(r,u||"")};l.toggleClass=function(r,u,z){p[z?"add":"remove"](r,u||"")};l.replaceClass=function(r,u,z){return p.replace(r,u,z)};l.containsClass=function(r,u){return p.contains(r,u)};l.getStyle=function(r,u){return e.get(r,
u)};l.setStyle=function(r,u,z){return 2===arguments.length?e.set(r,u):e.set(r,u,z)};l.setFullTextStyle=function(r,u){u.fontSize&&(u=Object.assign({},u),u.fontSize+="px");l.setStyle(r,u)};l.getStylePixelValue=function(r,u){r=l.getStyle(r,u);return"number"===typeof r?r:parseFloat(r)||0};l.getComputedStyle=function(r){return r&&1===r.nodeType&&window.getComputedStyle(r)};l.position=function(r,u){return k.position(r,u)};l.getMarginBox=function(r,u){return k.getMarginBox(r,u)};l.getMarginExtents=function(r,
u){return k.getMarginExtents(r,u)};l.getContentBox=function(r,u){return k.getContentBox(r,u)};l.getPadBorderExtents=function(r,u){return k.getPadBorderExtents(r,u)};l.getPadExtents=function(r,u){return k.getPadExtents(r,u)};l.getBorderExtents=function(r,u){return k.getBorderExtents(r,u)};l.docScroll=function(){return k.docScroll()};l.create=function(r,u,z,A){return m.create(r,u,z,A)};l.toDom=function(r){return m.toDom(r)};l.place=function(r,u,z){return m.place(r,u,z)};l.empty=function(r){return m.empty(r)};
l.destroy=function(r){return m.destroy(r)};l.query=function(r,u){r=b(r,u);u=[];for(var z=0,A=r.length;z<A;z++)u.push(r[z]);return u};return l})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(w,p,m,k,e,b){var a={_latestEvent:null,_setLatestEvent:function(h){a._latestEvent=h},_getLatestEvent:function(){return a._latestEvent}};m("touch")?(p(document.body,k.press,function(h){a._setLatestEvent(f(h))}),
p(document.body,k.move,function(h){a._setLatestEvent(f(h))})):p(document.body,"mousemove",function(h){a._setLatestEvent(f(h))});var c;p(document.body,"mousedown",function(){c||(c=!0,p.once(document.body,"mouseup, click",function(){c=!1}))});a.getCursorPosition=function(){return a._latestEvent};a.isMouseOver=function(h,l){var q=l&&l.event||a._latestEvent;if(!(h&&h.parentNode&&h.getBoundingClientRect&&q))return!1;if(l&&l.checkAllChildren){l=w.mixin({},l);delete l.checkAllChildren;var t=!1;b.traverseChildren(h,
function(r){if(a.isMouseOver(r,l))return t=!0});return t}return a.isMouseOverBox(e.position(h),l)};a.isMouseOverBox=function(h,l){if(!h)return!1;var q=l&&l.event||a._latestEvent;l&&l.ignoreBorderTolerance&&(l=l.ignoreBorderTolerance,h=w.mixin({},h),h.x+=l,h.y+=l,h.w-=2*l,h.h-=2*l);return h.x<=q.clientX&&h.x+h.w>=q.clientX&&h.y<=q.clientY&&h.y+h.h>=q.clientY};var d=function(h){if(h.touches){if(!h.touches.length)return h.changedTouches[0];for(var l=h.touches[0].identifier,q,t=0;t<h.changedTouches.length;t++)if(h.changedTouches[t].identifier===
l){q=h.changedTouches[t];break}return q||h.touches[0]}},f=function(h){var l=d(h);l&&(l.type=h.type);return l||h};a.fixTouchEvent=function(h){var l=d(h);l&&(h.screenX=l.screenX,h.screenY=l.screenY,h.clientX=l.clientX,h.clientY=l.clientY,h.pageX=l.pageX,h.pageY=l.pageY);return h};a.isBeingDragged=function(){return c};a.addOverOutHandler=function(h){function l(){clearTimeout(t);q&&q.remove()}var q,t,r=p(h.node,"mouseover",function(u){function z(){a.isMouseOver(h.node)&&(h.onMouseOver(u),q=p(document.body,
"mousemove",function(A){a.isMouseOver(h.node)||(l(),h.onMouseOut(A))}))}l();h.delayTimeout?t=setTimeout(z,h.delayTimeout):z()});return{remove:function(){r.remove();l()}}};a.addOutHandler=function(h,l){return p(document.body,"mousemove",function(q){a.isMouseOver(h,{checkAllChildren:!0})||l(q)})};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierNormal":function(){define(["./RowDataUtil"],function(w){return{adjustRowHeight:function(p,m,k,e){var b=
p.layoutDefaults.rowMinHeight;e=Math.max(e,b);var a=e-w.getDataHeight(p,m,k);if(p.keepGridHeightWhenResized){var c=p.rows[m.index+1];c&&(a=w.getDataHeight(p,c,k)-a,a<b&&(e-=b-a,a=b),w.setDataHeight(p,c,k,a,!0))}w.setDataHeight(p,m,k,e,!0)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator":function(){define(["./ColumnDataUtil","./ColumnModifier","./ColumnsProcessor"],function(w,p,m){var k={};k.recalcColumns=m.recalcColumns;k.recalcColumnsTableJson=
m.recalcColumnsTableJson;k.adjustColumnWidth=p.adjustColumnWidth;k.getAffectedCells=p.getAffectedCells;k.getFieldWidth=w.getFieldWidth;k.setFieldWidth=w.setFieldWidth;k.calcFieldWidth=w.calcFieldWidth;k.recalcGridWidth=w.recalcGridWidth;return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(w){var p={getFieldWidth:function(m,k,e){var b="string"===typeof e?w.fieldToColumn(m,e):
e;e=b?b.field:"string"===typeof e?e:null;return m.looseResize?p.getFieldWidthOwn(m,k,e)||b&&b.style.width||0:b&&b.style.width||0},getFieldWidthOwn:function(m,k,e){if(m.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[e]=k.style.fields[e]||{}).width},setFieldWidth:function(m,k,e,b,a){var c="string"===typeof e?w.fieldToColumn(m,e):e,d=c?c.field:"string"===typeof e?e:null;m.looseResize?(a?w.getRowSpannedData(m,k,d)||[k]:[k]).forEach(function(f){f.style.fields=f.style.fields||{};(f.style.fields[d]=
f.style.fields[d]||{}).width=b}):c&&(c.style.width=b)},calcFieldWidth:function(m,k,e,b){var a=0;1<(k.columnSpans&&k.columnSpans[e])?w.getSpannedColumns(m,e,k.columnSpans[e]).forEach(function(c){b!==c.field&&(a+=p.getFieldWidth(m,k,c.field))}):a=p.getFieldWidth(m,k,e);return a},recalcGridWidth:function(m){m._width=0;var k=m.rows[0];m.columns.forEach(function(e){m._width+=p.getFieldWidth(m,k,e.field)});return m._width},getAllowedWidth:function(m){return m.fitParentWhenResized?m.getAllowedWidthFromParent():
m.getAllowedWidth()}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./ColumnDataUtil","./_ColumnModifierNormal","./_ColumnModifierLoose"],function(w,p,m,k){var e={},b={getColumnToChange:function(d,f,h,l){var q=w.getMovableColumn(d,f,h.field);q&&(d=p.calcFieldWidth(d,f,h.field,q.field),l-=d);return{column:q||h,width:l}}},a={finalResizeGridCells:function(d){d.getCells().forEach(function(f){f.setWidth(p.calcFieldWidth(d,
f.row,f.column.field))});p.recalcGridWidth(d)}},c={recalcToStick:function(d){var f=d.columns[d.columns.length-1];d.rows.some(function(h,l){if(!d.looseResize&&l)return!0;var q=0;d.columns.forEach(function(t){t!==f&&(q+=p.getFieldWidth(d,h,t.field))});p.setFieldWidth(d,h,f.field,p.getAllowedWidth(d)-q)})}};e.adjustColumnWidth=function(d,f,h,l){h=b.getColumnToChange(d,f,h,l);(d.looseResize?k:m).adjustColumnWidth(d,f,h.column,h.width);d.stickToRight&&c.recalcToStick(d);a.finalResizeGridCells(d)};e.getAffectedCells=
function(d,f,h){return d.looseResize?k.getAffectedCells(d,f,b.getColumnToChange(d,f,h).column):null};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierNormal":function(){define(["./ColumnDataUtil"],function(w){var p={},m={adjustColumnWidth:function(k,e,b,a,c){function d(u,z){return w.setFieldWidth(k,e,u.field,z,!0)}var f=k.layoutDefaults.columnMinWidth,h=function(){if(!b)return null;var u=w.getFieldWidth(k,e,b.field);void 0!==c&&(a=u+
c);a=Math.max(f,a);var z,A=0,B=!1;k.columns.forEach(function(F){A+=w.getFieldWidth(k,e,F.field);B&&!z?z=F:F===b&&(B=!0)});var E=w.getAllowedWidth(k)-(A-u);return isNaN(E)?null:{width:a,widthMemo:u,maxAllowedColumnWidth:E,nextColumn:z}}();if(h){a=h.width;var l=h.widthMemo,q=h.maxAllowedColumnWidth,t=(h=h.nextColumn)&&w.getFieldWidth(k,e,h.field);l=a-l;var r=0;k.keepGridWidthWhenResized?(h&&(l=t-l,l<f&&(a-=f-l,l=f),l<t&&(q+=t-l),d(h,l)),d(b,Math.min(q,a))):(h&&q<a&&t>f?(d(b,a),r=q-a):d(b,Math.min(q,
a)),0!==r&&m.adjustColumnWidth(k,e,h,null,r))}}};p.adjustColumnWidth=function(k,e,b,a){m.adjustColumnWidth(k,e,b,a)};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./ColumnDataUtil ../../GridQueryUtil".split(" "),function(w,p,m,k,e,b){var a={collectColumnBoxes:function(h,l){for(var q=[],t=0;t<h.rows.length;){var r=
h.rows[t],u=this._createEmptyBox();r=m.getRowSpannedData(h,r,l.field)||[r];u.elements=this._getSpannedDataElements(h,l,r);this._measureBox(u);var z=q[q.length-1];z&&(z.nextSibling=u,u.prevSibling=z);q.push(u);t+=r.length}return q},_createEmptyBox:function(){return{id:p(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getSpannedDataElements:function(h,l,q){var t=[];q.forEach(function(r){r={data:r,dataIndex:r.index,field:l.field,box:k.calcDataBox(h,
r,l.field)};t.push(r)});return t},_measureBox:function(h){var l=0;h.elements.forEach(function(q){l+=q.box.h});h.box={x:h.elements[0].box.x,y:h.elements[0].box.y,w:h.elements[0].box.w,h:l}},mergeBoxesForRightColumn:function(h){var l=this._createEmptyBox();h.forEach(function(q){q.elements.forEach(function(t){l.elements.push({data:t.data,field:null,box:w.clone(t.box)})})});this._measureBox(l);l.box.w=1E6;return[l]},getBoxAtDataIndex:function(h,l){return h.filter(function(q){return q.elements[0].dataIndex===
l})[0]}},c={buildInfluenceTree:function(h,l,q){function t(r,u){(u?l:h).forEach(function(z){var A;if(A=!z.overlappingBoxesCache[r.id]){A=r.box;var B=z.box;A=!(A.y+.5>=B.y+B.h||A.y+A.h<=B.y+.5)}A&&(r.overlappingBoxes.push(z),r.overlappingBoxesCache[z.id]=!0)});r.overlappingBoxes.forEach(function(z){t(z,!u)})}q=a.getBoxAtDataIndex(h,q.index);t(q,!0);return q}},d={applyForce:function(h,l,q){function t(u,z){var A=u.elements[0];A.field&&e.setFieldWidth(h,A.data,A.field,e.getFieldWidth(h,A.data,A.field)+
(z?-1:1)*r,!0);u.overlappingBoxes.forEach(function(B){t(B,!z)})}var r=this._checkDelta(h,l,q);t(l,!1)},_checkDelta:function(h,l,q){function t(A,B){0!==u&&(B?0>u||(u=Math.min(u,A.box.w-r),A.prevSibling&&(u=Math.min(u,A.prevSibling.box.x+A.prevSibling.box.w-r-A.box.x)),A.nextSibling&&(u=Math.min(u,A.nextSibling.box.x+A.nextSibling.box.w-r-A.box.x))):0<u||(u=Math.max(u,-(A.box.w-r)),A.prevSibling&&(u=Math.max(u,-(A.box.x+A.box.w-(A.prevSibling.box.x+r)))),A.nextSibling&&(u=Math.max(u,-(A.box.x+A.box.w-
(A.nextSibling.box.x+r))))),A.overlappingBoxes.forEach(function(E){t(E,!B)}))}var r=h.layoutDefaults.columnMinWidth;q=Math.max(q,r);var u=q-l.box.w;if(0<u&&l.elements[0].field===h.columns[h.columns.length-1].field){var z=0;h.columns.forEach(function(A){z+=e.getFieldWidth(h,l.elements[0].data,A.field)});u=Math.min(u,e.getAllowedWidth(h)-z)}t(l,!1);return u}},f={_getInluencedStartBox:function(h,l,q){var t=h.columns[q.index+1];q=a.collectColumnBoxes(h,q);h=t?a.collectColumnBoxes(h,t):a.mergeBoxesForRightColumn(q);
return c.buildInfluenceTree(q,h,l)},getAffectedCells:function(h,l,q){function t(u){if(u.elements[0].data){var z=b.querySingleCell(h,{rowIndex:u.elements[0].data.index,columnField:u.elements[0].field,considerSpans:!0});z&&r.push(z)}u.overlappingBoxes.forEach(t)}var r=[];l=this._getInluencedStartBox(h,l,q);t(l);return r},adjustColumnCell:function(h,l,q,t){l=this._getInluencedStartBox(h,l,q);d.applyForce(h,l,t)}};return{adjustColumnWidth:function(h,l,q,t){f.adjustColumnCell(h,l,q,t)},getAffectedCells:function(h,
l,q){return f.getAffectedCells(h,l,q)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./ColumnDataUtil"],function(w,p){function m(e){e._dynamicBindings={};if(e.getNumDynamicColumns()){for(var b=e.getNumDynamicColumns(),a=e.getNumFixedColumns(),c=0;c<a;c++)e.columns[c].isFixed=!0;c=[];for(var d=0;d<b;d++){for(var f=a,h=[];f<e.columns.length;){var l=e.columns[f+d];l.isDynamic=!0;h.push(l);
f+=b}c.push(h)}c.forEach(function(q){q.forEach(function(t){e._dynamicBindings[t.field]=q})})}}var k={recalcColumns:function(e,b){var a=b&&b.resetWidth,c=b&&b.columnsToPreserve,d=b&&b.stickToRight,f=b&&b.newWidth,h=b&&b.rightOffsetWeight;b=b&&b._isJson;var l={},q=0;e.columns.every(function(E,F){if(!E.style||!E.style.width||isNaN(E.style.width)||"number"!==typeof E.style.width)return q=0,!1;q+=E.style.width;l[F]=E.style.width;return!0});var t=f?f:d?e.getAllowedWidth():q?Math.min(q,e._width):e._width;
t-=0<h?t*h:0;var r=t/e.columns.length,u=t;if(c){var z=c.length*r,A=0;c.forEach(function(E){A+=E.style.width});c.forEach(function(E){E.style.width=z/A*E.style.width/u*100+"%"})}e.columns.forEach(function(E,F,G){E.index=F;E.style=E.style||{};if("number"!==typeof E.style.width||a)if(F===G.length-1)E.style.width=u;else{var H=E.style.width;"string"===typeof H&&-1!==H.indexOf("%")?E.style.width=parseFloat(H.substr(0,H.length-1))/100*t:E.style.width=r}u-=E.style.width;F===G.length-1&&0>u&&(E.style.width+=
u);void 0===E.id&&(E.id=w())});if(e.looseResize){e.columns.some(function(E,F){var G=l[F]?E.style.width/l[F]:void 0;e.rows.forEach(function(H){var v=p.getFieldWidthOwn(e,H,E.field);v?G&&1!==G&&p.setFieldWidth(e,H,E.field,v*G):p.setFieldWidth(e,H,E.field,E.style.width)})});var B=e.columns[e.columns.length-1].field;e.rows.forEach(function(E){var F=0;e.columns.some(function(H){F+=p.getFieldWidthOwn(e,E,H.field)});var G=t-F;0!==G&&p.setFieldWidth(e,E,B,p.getFieldWidthOwn(e,E,B)+G)})}b||(m(e),p.recalcGridWidth(e));
return t},recalcColumnsTableJson:function(e){k.recalcColumns(e,{resetWidth:!0,newWidth:e.style.width,_isJson:!0})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutSnapper":function(){define(["dojo/_base/lang","./rows/RowDataUtil","./columns/ColumnDataUtil","./GridElementBoxCalculator"],function(w,p,m,k){return{autoSnapLayout:function(e){function b(){var t=[];e.rows.forEach(function(r){e.columns.forEach(function(u){t.push(w.mixin({id:r.index+"_"+
u.field,data:r,dataIndex:r.index,column:u,field:u.field},k.calcDataBox(e,r,u.field)))})});return t}if(e.looseResize)for(var a=e.rows.length*e.columns.length,c={},d=0;d<a;d++){var f=b(),h=f[d],l=h.x+h.w,q=h.y+h.h;c[h.id]=!0;f.forEach(function(t){if(!c[t.id]){var r=l-(t.x+t.w);.5>=Math.abs(r)&&m.setFieldWidth(e,t.data,t.field,t.w+r);r=q-(t.y+t.h);.5>=Math.abs(r)&&p.setDataHeight(e,t.data,t.field,t.h+r)}})}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/sectionUtils/SectionJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder",
"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes","../../supportClasses/tableJson/TableJsonUtil"],function(w,p,m){var k={wrapInDetailsSectionJson:function(e,b){e=Array.isArray(e)?e:[e];var a=e.some(function(c){return"table"===c.id&&c.attributes&&(0<c.attributes.dynamicColumns||0<c.attributes.dynamicRows)});return{type:b||(a?p.GROUP:p.DETAILS),stack:e}},createSectionJsonFromInfographicJson:function(e,b,a){e=m.createSingleCellTable({width:b,height:a,fieldInfo:w.createFieldInfoFromInfographic(e)});
return k.wrapInDetailsSectionJson(e)},getSectionJsonInfographic:function(e){var b;e.stack&&e.stack.some(function(a){b="table"===a.id&&m.getTableJsonInfographic(a);return!!b});return b},getSectionJsonInfographicTable:function(e){var b;e.stack&&e.stack.some(function(a){if("table"===a.id&&m.getTableJsonInfographic(a))return b=a,!0});return b},calcSectionJsonBox:function(e){var b,a;function c(h){b=Math.min(b,h.l);d=Math.min(d,h.t);a=Math.max(a,h.l+h.w);f=Math.max(f,h.t+h.h)}var d=b=Infinity;var f=a=0;
e.stack&&e.stack.forEach(function(h){switch(h.id){case "table":var l=0;h.rows.forEach(function(q){l+=q.style.height});c({l:h.style.left||0,t:h.style.top||0,w:h.style.width,h:l});break;case "img":case "map":c({l:h.style.left||0,t:h.style.top||0,w:h.style.width,h:h.style.height})}});e=e.style||{};return{x:e.left,y:e.top,w:e.width||b+a,h:e.height||d+f,contentLeft:b,contentTop:d,contentW:a-b,contentH:f-d}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder":function(){define(["../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder",
"dojo/i18n!esri/nls/jsapi"],function(w,p){p=p.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{getCalculatorOrScriptFieldInfo:function(m,k,e){if(!m)return null;if(k.variableProvider.isPlayerOnly&&!k.useVariableProviderToCollectOnly){var b=k.variableProvider.toCalculator(m);if(!b)return console.log("Can't create a dummy calculator for \x3d\x3e "+m),null;e=e||{};e.calculatorName=b.variable.calculatorName;m=w.createFieldInfoFromCalculator(b,k.variableProvider,e);m.name=b.variable.fieldName;m.templateName=
b.variable.templateName;return m}b=k.queryMetaDataFunc(m);var a=m.substr(0,m.indexOf("."));e=e||{};e.calculatorName=a;if(b)return b.isScript?w.createFieldInfoFromScript(b,e):w.createFieldInfoFromCalculator(b,k.variableProvider,e);e=w.createFieldInfoFromMissingVariable(m);k.variableProvider.isPlayerOnly&&(b=k.variableProvider.toCalculator(m),e.alias=b&&b.variable.alias);e.alias=e.alias?e.alias+" ("+p.missingVariable+")":p.missingVariable;return e}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/DefaultAttachmentsStore":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","./WebMapAttachmentStore"],function(w,p,m,k){return w(null,{supportsMultipleAreas:!0,_analysisAreas:null,_currentAreaIndex:-1,_webMapStores:null,constructor:function(e){this._analysisAreas=e},initialize:function(){var e=this;this._webMapStores={};return p(this._analysisAreas.map(function(b,a){if(b=b.feature||b.location||b.additionalFeatures&&b.additionalFeatures[0])return(e._webMapStores[a]=new k(b)).initialize()})).then(function(){return e})},
_callStoreMethod:function(e){var b=this._webMapStores[this._currentAreaIndex];return b?m(b[e](),function(a){return a?a.slice():[]}):[]},getImages:function(){return this._callStoreMethod("getImages")},getAttributes:function(){return this._callStoreMethod("getAttributes")},getNotes:function(){return this._callStoreMethod("getNotes")},setCurrentAnalysisAreaIndex:function(e){this._currentAreaIndex=e}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/WebMapAttachmentStore":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/ImageUtil ./AttachmentsUtil".split(" "),
function(w,p,m,k,e,b,a,c){var d={getThumbnail:function(f){var h=b.get("WebMapAttachmentStore");h[f.url]||(h[f.url]=this._getDataURL(f));return h[f.url]},_getDataURL:function(f){return 0===f.url.indexOf("data:")?f.url:e.request(f.url).then(function(h){return h&&h.Attachment&&a.base64DataToDataURL(h.Attachment,f.contentType)}).otherwise(function(){return null})}};return w(null,{supportsMultipleAreas:!1,_attachmentInfos:null,_feature:null,_fieldInfos:null,_attributes:null,constructor:function(f,h){this._feature=
f;this._attachmentInfos=h},initialize:function(){this._tryGetFieldInfosAndAttributes();return m(this._attachmentInfos||this._tryGetAttachmentInfos()).always(function(){return!!this._attachmentInfos}.bind(this))},_tryGetFieldInfosAndAttributes:function(){var f=this._feature.getLayer();this._fieldInfos=(f=this._feature.infoTemplate||f&&f.infoTemplate)&&f.info.fieldInfos||[];this._attributes=p.mixin({},this._feature.attributes)},_tryGetAttachmentInfos:function(){return m(c.getFeatureAttachmentInfos(this._feature),
function(f){this._attachmentInfos=f}.bind(this))},getImages:function(){return this._attachmentInfos?this._attachmentInfos.map(function(f){return{getThumbnail:function(){return d.getThumbnail(f)},getUrl:function(){return f.url}}}):[]},getAttributes:function(){return k.composeAttributesFromFieldInfos(this._fieldInfos,this._attributes)},getNotes:function(){return[]},setCurrentAnalysisAreaIndex:null})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsUtil":function(){define([],
function(){return{getFeatureAttachmentInfos:function(w){var p=w.getLayer();if(p&&p.hasAttachments&&p.queryAttachmentInfos&&p.objectIdField)return p.queryAttachmentInfos(w.attributes[p.objectIdField])}}})},"*noref":1}});
define("esri/dijit/geoenrichment/ReportPlayer/DataProviderGE","dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/kernel ./dataProvider/_CommandSupport ./dataProvider/_SerializationSupport ./dataProvider/_ServerSerializationSupport ./dataProvider/supportClasses/areas/AnalysisAreaUtil ./dataProvider/supportClasses/areas/AnalysisAreaJsonUtil ./dataProvider/supportClasses/areas/AreasPreprocessor ./dataProvider/supportClasses/CustomReportsManager ./dataProvider/supportClasses/TemplateJsonLoader ./dataProvider/supportClasses/ReportDataProcessor ./dataProvider/supportClasses/GEUtil ./dataProvider/supportClasses/attachments/DefaultAttachmentsStore ./dataProvider/supportClasses/attachments/CustomAttachmentsStore ./dataProvider/supportClasses/data/VariablesUtil ./dataProvider/commands/mapToImage/MapToURLUtil ./core/themes/ThemeLibrary ./core/themes/ReportThemes esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/ProjectionUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),function(w,
p,m,k,e,b,a,c,d,f,h,l,q,t,r,u,z,A,B,E,F,G,H,v,D,I){return w([b,a,c],{analysisAreasLimit:-1,cacheTemplates:!0,printMapTaskUrl:null,resetReportItemsCache:!0,constructor:function(K){p.mixin(this,K)},_getAttachmentsStore:function(K){return(new u(K)).initialize()},_currentContext:null,getReportData:function(K,S){var N=this,T=S&&S.progressCallback||function(){},M=p.mixin({},K);M.portalUrl=I.getPortalUrl(M.portalUrl);G.isPlayerOnServer||I.setArcgisUrl(M.portalUrl);d.parseSites(M);H.reset();M.hierarchy||
M.analysisAreas.some(function(V){if(V.geographies&&V.geographies[0].hierarchy)return M.hierarchy=V.geographies[0].hierarchy,!0});N.resetReportItemsCache&&l.resetCache();N._currentContext=M;M.analysisAreas=f.areasFromJson(M.analysisAreas);M.combinedAreasInfo=M.combinedAreasInfo&&f.combinedAreasInfoFromJson(M.combinedAreasInfo)||{};d.populateCombinedAreasInfo(M.combinedAreasInfo,M.analysisAreas);M.fieldData={specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],
reportInfo:null};return m([k(l.tryFindReportIdByAlias(M),function(V){M.reportID=V||M.reportID}),this._discoverPortal(M),function(){return M.variables&&k(A.preprocessVariables(M.variables,M.portalUrl),function(V){M.variables=V})}()]).then(function(){return k(h.preprocessAreas(M,{analysisAreasLimit:N.analysisAreasLimit}),function(){T(.25);setTimeout(function(){N._onCreateReportStarted()});var V=M.attachmentsProvider?z(M.attachmentsProvider):N._getAttachmentsStore(M.analysisAreas),W={initGE:r.initialize(),
countryInfo:r.getCountryInfo(M.countryID),attachmentsStore:V};M.reportID?(W.reportObject=l.getCustomReportByID(M),W.templateJsonInfo=q.getTemplateJsonByID(M,N.cacheTemplates),W.runReportResult=t.runReportAndGetData(M,V)):M.variables&&(W.reportObject=l.getFakeCustomReportByContext(M),W.templateJsonInfo=q.createTemplateJsonFromVariables(M),W.runReportResult=t.runReportFromVariables(M));return m(W).then(function(Q){var Y=Q.reportObject,U=Q.attachmentsStore,fa=Q.templateJsonInfo.templateJson,Z=Q.templateJsonInfo.templateVariableProvider,
qa=Q.runReportResult;T(.75);if(!fa||!Y||!M.fieldData)return null;H.setCountry(Q.countryInfo.country);H.setHierarchyID(M.hierarchy);H.setGeographiesModel(Q.countryInfo.geographiesModels[H.getHierarchyID()]);fa.theme||(fa.theme=E.getReportThemeById(Y.isGraphicReport?F.GRAPHIC:F.CLASSIC));var R={isMultiFeature:Y.isMultiFeature&&1<M.analysisAreas.length,reportTitle:M.reportTitle||Y.title,templateJson:fa,reportObject:Y,fieldData:M.fieldData,analysisAreas:M.analysisAreas,combinedAreasInfo:M.combinedAreasInfo,
reverseAnalysisAreasOnMap:M.reverseAnalysisAreasOnMap,attachmentsStore:U,geClient:r.getClient(),templateVariableProvider:Z,customLogo:M.customLogo,config:{portalUrl:M.portalUrl,geoenrichmentUrl:M.geoenrichmentUrl,geometryServiceUrl:M.geometryServiceUrl,printMapTaskUrl:M.printMapTaskUrl,countryID:M.countryID,hierarchy:M.hierarchy,reportID:M.reportID,variables:M.variables}};return k(t.applyRunReportAndGetDataResults(qa,R),function(){T(1);return R})})})})},_discoverPortal:function(K){return D.getPortalSelf(K.portalUrl).then(function(S){K.geoenrichmentUrl=
K.geoenrichmentUrl||S.helperServices.geoenrichment.url;var N=e.id.findCredential(K.portalUrl);r.setGeoenrichmentUrl(K.geoenrichmentUrl,N&&N.token);K.geometryServiceUrl=K.geometryServiceUrl||S.helperServices.geometry.url;v.setGeometryServiceUrl(K.geometryServiceUrl);K.printMapTaskUrl=K.printMapTaskUrl||S.helperServices.printTask.url;B.setPrintMapTaskUrl(K.printMapTaskUrl)})},reportDataToSingleAreaReportData:function(K,S){var N=S.currentFeatureIndex||0,T=p.mixin({},K.fieldData);T.areaData=[T.areaData[N]];
var M=[p.mixin({},K.analysisAreas[N])];h.removeGroupInfo(M);var V=K.attachmentsStore;return{isMultiFeature:!1,reportTitle:S.reportTitle,templateJson:S.templateJson,reportObject:K.reportObject,fieldData:T,analysisAreas:M,combinedAreasInfo:null,reverseAnalysisAreasOnMap:!1,attachmentsStore:V&&{getImages:function(){V.supportsMultipleAreas&&V.setCurrentAnalysisAreaIndex(N);return V.getImages()},getAttributes:function(){V.supportsMultipleAreas&&V.setCurrentAnalysisAreaIndex(N);return V.getAttributes()},
getNotes:function(){V.supportsMultipleAreas&&V.setCurrentAnalysisAreaIndex(N);return V.getNotes()}},geClient:K.geClient,templateVariableProvider:K.templateVariableProvider,config:K.config}},_getCurrentContext:function(){return this._currentContext},_onCreateReportStarted:function(){}})});