// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser",["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(f,h,k){return{parseDataCollectionsCalculators:function(l,g,b){f.queryJson(l,"DataCollections").forEach(function(c){var d=f.queryJson(c,"ComparisonLevel");if(k.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");
if(b.variableProvider.isPlayerOnly||d.length)var e=h.getObjects(c);d.length&&(c={calculatorName:c.attributes.Name,levels:d.map(function(a){return a.attributes.Name}).filter(function(a){return!b.validateGeographyLevelFunc||b.validateGeographyLevelFunc(a)}),variableObjects:e.variableObjects},g&&(g.metadata.comparisonCalculatorsHash[c.calculatorName]=c));b.variableProvider.isPlayerOnly&&(e.variableObjects.forEach(function(a){b.variableProvider.addVariable(a)}),e.scriptObjects.forEach(function(a){b.variableProvider.addScriptVariable(a)}))})}}});