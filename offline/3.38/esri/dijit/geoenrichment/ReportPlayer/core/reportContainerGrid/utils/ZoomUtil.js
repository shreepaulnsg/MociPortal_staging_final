// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/utils/ZoomUtil",["dojo/_base/lang","dojo/sniff","esri/dijit/geoenrichment/utils/animation/Animator","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(t,p,u,q,g){function v(a){if(a.__zoomInfo&&1!==a.__zoomInfo.scale){var b=a.__zoomInfo;b.isFitPageScale=g.compareEqual(b.scale,d._getFitPageScale(b,a),2);b.isFitPageWidthScale=g.compareEqual(b.scale,d._getFitPageWidthScale(b,a),2);b.isFitPageHeightScale=
g.compareEqual(b.scale,d._getFitPageHeightScale(b,a),2);return b}return a.__zoomInfo={scale:1,originalW:a.getScrollableContainer().offsetWidth,originalH:a.getScrollableContainer().offsetHeight,isFitPageScale:!1,isFitPageWidthScale:!1,isFitPageHeightScale:!1}}function k(a){var b=a.__zoomInfo;return b?!g.compareEqual(b.originalW,a.getScrollableContainer().offsetWidth,2)||!g.compareEqual(b.originalH,a.getScrollableContainer().offsetHeight,2):!1}function f(a,b,c,e){if(b){e=e||d.getZoomInfo(a).scale;var h=
Math.max(.05,Math.min(10,b.scale))||1;a.__zoomInfo=b;a.__zoomAnimation&&a.__zoomAnimation.stop();if(c&&c.showAnimation)return a.__zoomAnimation=u.animateProperty({duration:200,properties:{p:{start:e,end:h,easing:"linear"}},progressFunction:function(r,l,m){n(a,l,1===m)},endFunction:function(){delete a.__zoomAnimation}}),a.__zoomAnimation.promise;n(a,h,!0)}else a.__zoomInfo=null,n(a,1,!0)}function n(a,b,c){var e=a.scalableContainer.style,h=1!==b?"0% 0%":"",r=1!==b?"scale("+b+")":"",l=p("webkit")?"webkitTransformOrigin":
"transformOrigin",m=p("webkit")?"webkitTransform":"transform";e[l]=h;e[m]=r;a.__zoomInfo&&(a.__zoomInfo.scale=b);a.syncFillerContainer();c&&a.emitZoomChangedEvent()}var d={getZoomInfo:function(a){return t.mixin({},v(a))},setZoomInfo:function(a,b,c){return f(a,b,c)},zoomIn:function(a,b){var c=d.getZoomInfo(a);c.scale+=.2;return f(a,c,b)},zoomOut:function(a,b){var c=d.getZoomInfo(a);c.scale-=.2;return f(a,c,b)},zoomToFitPage:function(a,b){var c=d.getZoomInfo(a);if(k(a)||!c.isFitPageScale){c=c.scale;
d.reset(a);var e=d.getZoomInfo(a);e.scale=d._getFitPageScale(e,a);return f(a,e,b,c)}},zoomToFitPageWidth:function(a,b){var c=d.getZoomInfo(a);if(k(a)||!c.isFitPageWidthScale){c=c.scale;d.reset(a);var e=d.getZoomInfo(a);e.scale=d._getFitPageWidthScale(e,a);return f(a,e,b,c)}},zoomToFitPageHeight:function(a,b){var c=d.getZoomInfo(a);if(k(a)||!c.isFitPageHeightScale){c=c.scale;d.reset(a);var e=d.getZoomInfo(a);e.scale=d._getFitPageHeightScale(e,a);return f(a,e,b,c)}},_getFitPageScale:function(a,b){var c=
b.getCurrentPageDim(),e=(a.originalW-d._getPrettyOffset(b).w)/c.w;a=(a.originalH-d._getPrettyOffset(b).h)/c.h;return Math.min(e,a)},_getFitPageWidthScale:function(a,b){return(a.originalW-d._getPrettyOffset(b).w-q.getScrollbarSize().w)/b.getCurrentPageDim().w},_getFitPageHeightScale:function(a,b){return(a.originalH-d._getPrettyOffset(b).h-q.getScrollbarSize().h)/b.getCurrentPageDim().h},setZoomPercent:function(a,b,c){var e=d.getZoomInfo(a);e.scale=b/100;return f(a,e,c)},setBestZoom:function(a){var b=
d.getZoomInfo(a),c=a.getCurrentPageDim();(b.originalW<c.w||b.originalH<c.h)&&d.zoomToFitPage(a)},_getPrettyOffset:function(a){return{w:a.renderOptions.minLeft+a.renderOptions.minRight,h:a.renderOptions.minTop+a.renderOptions.minBottom}},reset:function(a){f(a,null)}};return d});