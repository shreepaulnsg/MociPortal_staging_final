// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil",["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(f,g,h,k,l){var c={getFieldCellValue:function(a){return a.row&&a.row[a.column.field]},setFieldCellContent:function(a,b){a.set("value",b);a.row[a.column.field]=b},clearFieldInfo:function(a,
b){a.fieldInfos&&delete a.fieldInfos[b];a[b]="";c.setNumericDataValue(void 0,a,b)},getNumericCellValue:function(a){return c.getNumericDataValue(a.row,a.column.field)},setNumericCellValue:function(a,b){return c.setNumericDataValue(b,a.row,a.column.field)},getNumericDataValue:function(a,b){return a&&b&&a[b+"_numeric"]},setNumericDataValue:function(a,b,d){b[d+"_numeric"]=a},getCellGroupStyleStats:function(a){return a.row&&a.column.field&&a.row[a.column.field+"_groupStyle"]},setCellGroupStyleStats:function(a,
b){a.row[a.column.field+"_groupStyle"]=b},getRenderedValue:function(a,b,d){var e={parentGrid:a,row:b,column:d};a=a._getCellRenderer().getRenderedContent(e);if(a.isUnavailableData)return{};b=c.getNumericDataValue(b,d.field);"number"!==typeof b&&("number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(d=k.parsePercentOrCurrency(a.formattedValue,l.getCurrencyFormat()),isNaN(d)||(b=d)):b=a.value);return{numericValue:b,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&
!a.row[a.column.field]&&!c.getFieldInfo(a)},hasSpans:function(a){return c.getColumnSpan(a)||c.getRowSpan(a)},getColumnSpan:function(a){return a&&a.row&&a.row.columnSpans&&a.row.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.row&&a.row.rowSpans&&a.row.rowSpans[a.column.field]},getDataColumnSpan:function(a,b){return a&&a.columnSpans&&a.columnSpans[b]},getDataRowSpan:function(a,b){return a&&a.rowSpans&&a.rowSpans[b]},getFieldInfo:function(a){return a&&a.row&&a.column&&a.row.fieldInfos&&
a.row.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return c.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,b){a.row&&(a.row.fieldInfos[a.column.field]=b)},provideFieldInfo:function(a){c.setFieldInfo(a,c.getFieldInfo(a)||{});return c.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:c.getConditionalFormatting(a),dataDrilling:c.getDataDrilling(a),tooltipInfo:c.getTooltipInfo(a)}},setPreservableSettings:function(a,b){c.setConditionalFormatting(a,b&&b.triggerJson);
c.setDataDrilling(a,b&&b.dataDrilling);c.setTooltipInfo(a,b&&b.tooltipInfo)},getCellStyle:function(a,b){if(!a||!a.row||!a.column)return null;var d=a.row.style&&a.row.style.fields&&a.row.style.fields[a.column.field];!d&&b&&(d={},c.setCellStyle(a,d));return d},getCellThemeStyle:function(a){return a&&a.row&&a.column?a.row.themeStyle&&a.row.themeStyle.fields[a.column.field]:null},setCellStyle:function(a,b){var d=a.row.style=a.row.style||{};d.fields=d.fields||{};d.fields[a.column.field]=b},updateCellStyle:function(a,
b){a=c.getCellStyle(a,!0);f.mixin(a,b)},copyFieldStyle:function(a,b,d){a=c.getCellStyle(a);b=c.getCellStyle(b,!0);for(var e in d)void 0!==a[e]&&(b[e]=a[e])},getFieldCellUrl:function(a){if(a.row&&a.row.urls&&a.column)return a.row.urls[a.column.field]},setFieldCellUrl:function(a,b){a.row&&a.column&&(a.row.urls=a.row.urls||{},void 0===b?delete a.row.urls[a.column.field]:a.row.urls[a.column.field]=b)},getConditionalFormatting:function(a){return(a=c._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,
b){var d=c.getFieldInfo(a);if(d){d.triggerJson=null;if(b){if(a=c.isVariableLikeFieldCell(a))b.fieldInfo=d;b.fieldInfo===d&&(b.fieldInfo=f.clone(b.fieldInfo),delete b.fieldInfo.triggerJson,a&&(delete b.fieldInfo.tooltipInfo,delete b.fieldInfo.dataDrillingPanelInfo))}d.triggerJson=b}},getDataDrilling:function(a){return(a=c.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},setDataDrilling:function(a,b){if(a=c.getSourceFieldInfo(a))a.dataDrillingPanelInfo=b},getTooltipInfo:function(a){return(a=c.getSourceFieldInfo(a))&&
a.tooltipInfo},setTooltipInfo:function(a,b){if(a=c.getSourceFieldInfo(a))a.tooltipInfo=b},getSourceFieldInfo:function(a){var b=c._toFieldInfo(a);a=c.getConditionalFormatting(a);return b&&b.isImage?a&&a.fieldInfo:b},_toFieldInfo:function(a){return a?a.row?c.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isReportSection)},isInfographicCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=c._toFieldInfo(a);
return!(!a||!a.isChart)},isMapCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=c._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=c._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:null},isShapeCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;
return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!c._toFieldInfo(a)||c.isRichTextCell(a)||c.isVariableLikeFieldCell(a)||c.isSpecialFieldCell(a)},isRichTextCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name&&"LocatorSummary"!==a.name)},isVariableFieldCell:function(a){a=
c._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=c._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=c._toFieldInfo(a))?a.hasVariable&&h.isNumericField(a)||a.script&&("Double"===a.script.type||!a.script.isUneditableScript&&"String"!==a.script.type)||"headers.CHART_POINT_VALUE"===a.name||"LocatorSummary"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return c.isNumericVariableFieldCell(a)},
isStringVariableFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var b=c._toFieldInfo(a);return b&&("headers.CHART_POINT_VALUE"===b.name||"LocatorSummary"===b.name||!c.isVariableLikeFieldCell(a)&&g.hasField(b.name))}};return c});