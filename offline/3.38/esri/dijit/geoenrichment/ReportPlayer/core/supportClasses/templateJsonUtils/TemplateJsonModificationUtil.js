// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil",["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(m,n){var g={},p={getJsonStat:function(a){var b=0,c=0,d=[];a.sectionsTables.forEach(function(e){var h=0;e.columns.forEach(function(k){h+=f.getFieldWidth(e,e.rows[0],k)});b=Math.max(b,h);var l=0;e.rows.forEach(function(k){l+=
f.getDataHeight(e,k,e.columns[0])});c=Math.max(c,l);d.push({totalW:h,totalH:l})});return{tableInfos:d,totalWMax:b,totalHMax:c}}},f={getFieldWidth:function(a,b,c){return n.getFieldWidth({looseResize:!0},b,c)||c.style.width},getDataHeight:function(a,b,c){return n.getDataHeight({looseResize:!0},b,c.field)},getAverageFieldWidth:function(a,b){var c=0;a.rows.forEach(function(d){c+=f.getFieldWidth(a,d,b)});return c/a.rows.length},getAverageDataHeight:function(a,b){var c=0;a.columns.forEach(function(d){c+=
f.getDataHeight(a,b,d)});return c/a.columns.length}};g.adjustDocumentOptions=function(a){if(a.documentOptions){var b=p.getJsonStat(a);b.totalWMax&&b.totalHMax&&!isNaN(b.totalWMax)&&!isNaN(b.totalHMax)&&(a=a.documentOptions,a.pagesize=m.combineCustomSizeString(a.left+a.right+b.totalWMax,a.top+a.bottom+b.totalHMax,"px"),(b=m.getClosestStandrdSizes(a)[0])&&.001>b.score&&b.orientation===a.orientation&&(a.pagesize=b.pagesize))}};g.JsonStatCollector=p;g.DataUtil=f;return g});