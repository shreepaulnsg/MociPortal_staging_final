// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsBuilder",["./DefaultSymbolRenderer","./LoadedFeaturesSyncronizer","../../symbols/HighlightedSymbolGenerator","esri/dijit/geoenrichment/utils/SymbolUtil"],function(m,p,q,r){var n={addStdPolygons:function(a,k){a.stdPolygonsControllers&&a.stdPolygonsControllers.forEach(function(d){var b=new p({controller:d,layerSorter:k,map:a.map,countryID:a.countryID,hierarchy:a.hierarchy,calculatorFieldName:a.calculatorFieldName,
onLayerCreated:function(f,g){n._registerLayer(f,g,a.map,d,a)}}),c=[];c.push(d.setShownFeaturesChangedListener(function(){b.syncWithShownFeatures()}));c.push(d.setLoadAllFeaturesListener(function(){return b.loadAllFeatures()}));b.syncWithShownFeatures();var l=a.map.on("before-unload",function(){l.remove();c.forEach(function(f){f.remove()});c.length=0;b.destroy();b=null})})},_registerLayer:function(a,k,d,b,c){var l=b.getRendererJson(c.calculatorFieldName);q.getHighlightSymbol({graphicsLayer:a,rendererJson:l,
defaultHighlightSymbol:m.getDefaultStdSymbolHighlighted()}).then(function(f){var g=f.symbol;r.simpleFillSymbolToPictureFillSymbol(g).then(function(t){b.setStdPolygonsLayer(c.calculatorFieldName+";"+k,a,d,{getGraphicForAttributesFunc:function(e){return e&&"object"===typeof e&&a.graphics.filter(function(h){return h.attributes.StdGeographyLevel===e.StdGeographyLevel&&h.attributes.StdGeographyID===e.StdGeographyID})[0]},setGraphicHighlightedFunc:function(e,h){e.setSymbol(h?t||g:null)}})})})},getDefaultStdRenderer:function(){return m.getDefaultStdRenderer()}};
return n});