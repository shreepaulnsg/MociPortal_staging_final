// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/legend/LegendBuilder","dojo/_base/declare dojo/aspect dojo/dom-construct dojo/dnd/Moveable esri/dijit/Legend esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil".split(" "),function(k,p,q,r,t,u,v){var l={},w=k(t,{_isSupportedLayerType:function(a){return a&&"esri.layers.GraphicsLayer"===a.declaredClass&&a.renderer&&a.name&&a.graphics.length?!0:a&&a.isLabelsLayer?!1:this.inherited(arguments)},_isLayerDrawingEnabled:function(a){return a&&
"esri.layers.FeatureLayer"===a.declaredClass&&a.renderer&&"heatmap"===a.renderer.type?!0:this.inherited(arguments)},_getServiceTitle:function(a){a._titleForLegend=a._titleForLegend||a.name;return this.inherited(arguments)}});l.createLegend=function(a,d,e,f){function g(){b&&b.destroy();b=null;f&&f.onDestroyed()}function m(){function n(){if(b.domNode){b.domNode.style.left="10px";var c=d.clientHeight-20;b.domNode.style.maxHeight=c+"px";b.domNode.style.top=d.clientHeight-Math.min(c,b.domNode.clientHeight)-
10+"px"}}g();if(u.isNodeInLayout(d)){b=new w({map:a,layerInfos:null},q.create("div",{"class":"esriGEReportPlayer_mapLegend"},d));b.startup();b.own(a.on("before-unload",g));var y=new (k(r,{onMouseDown:function(){for(var c,h=0,x=b.domNode.childNodes.length;h<x;h++)if(v.isMouseOver(b.domNode.childNodes[h])){c=!0;break}c&&this.inherited(arguments)}}))(b.domNode);b.own(y);n();b.own(p.after(b,"_createLegendForLayer",function(c){setTimeout(n);return c}));f&&f.onCreated(b)}}var b;e&&(e.showLegend&&m(),e.addCallback(function(){e.showLegend?
m():g()},"legendBuilder"))};return l});