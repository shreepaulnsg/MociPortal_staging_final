// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingButtonsBuilder","dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil dojo/i18n!esri/nls/jsapi".split(" "),function(w,x,m,l,r,y,t,z,u,n){n=n.geoenrichment.dijit.ReportPlayer.Infographics;return w(null,{parentWidget:null,_ddButtons:null,_shownButtons:null,
constructor:function(a){x.mixin(this,a)},setDataDrillingButtonForSection:function(a,e){this._setDataDrillingButton({widget:a,getBox:function(){var f=[];a.getTrueTables().forEach(function(h){f.push(h.domNode)});return z.getNodesBox(f,{ignoreTransformation:!0,originNode:a.domNode})},onClick:e})},setDataDrillingButtonForTableCell:function(a,e){this._setDataDrillingButton({widget:a,getBox:function(){return{x:0,y:0,w:a.domNode.clientWidth,h:a.domNode.clientHeight}},onClick:e})},_setDataDrillingButton:function(a){function e(){var c=
l.create("div",{"class":"dataDrilling_drillDataButton"},f.domNode);l.create("div",{"class":"dijitInline dataDrilling_drillDataButtonIcon esriGESpaceAfterBig"},c);var v=l.create("div",{"class":"dijitInline dataDrilling_drillDataButtonLabel",innerHTML:n.drillForMoreData},c),d=a.getBox();r.set(c,{left:d.x+"px",top:d.y+"px",width:d.w+"px",height:d.h+"px",lineHeight:d.h+"px"});var p=c.clientWidth;p>d.w&&r.set(c,"left",d.x-(p-d.w)/2+"px");v.style.maxWidth=p-50+"px";v.style.whiteSpace="normal";g._ddButtons.push({destroy:function(){l.destroy(c)}});
return c}var f=a.widget,h=a.onClick,g=this;this._ddButtons=this._ddButtons||[];var b;if(y.isMobileDevice()){var q;this._shownButtons=this._shownButtons||[];var k=function(c){b.style.opacity=c?1:0;g._shownButtons.splice(g._shownButtons.indexOf(b),1);c&&g._shownButtons.push(b);q&&q.remove();c&&g._syncButtonWithScale(b)};t.addNoDragClickHandler(this.parentWidget.domNode,function(){setTimeout(function(){!g._shownButtons.length&&u.isMouseOver(f.domNode,{checkAllChildren:!0})&&(b=b||e(),k(!0),setTimeout(function(){q=
t.addNoDragClickHandler(b,function(){k(!1);h(b)});m.once(document.body,"touchend",function(){k(!1)})}))})},{detectLongPress:!0,longPressTimeout:750,ignoreReleaseIfLongPressHappened:!0,longPressCallback:function(){u.isMouseOver(f.domNode,{checkAllChildren:!0})&&(b=b||e(),k(!0),h(b),setTimeout(function(){k(!1)}))}})}else f.own(m.once(this.parentWidget.domNode,"mouseover",function(){b=b||e();g._syncButtonWithScale(b);m(b,"click",function(){h(b)})}))},_panelScale:null,notifyPanelScaleChanged:function(a){this._panelScale=
a;this._ddButtons&&this._ddButtons.forEach(this._syncButtonWithScale.bind(this))},_syncButtonWithScale:function(a){a&&a.style&&(a.style.fontSize=13/(this._panelScale||1)+"px")},destroyButtons:function(){this._ddButtons=this._ddButtons||[];this._ddButtons.forEach(function(a){a.destroy()});this._ddButtons.length=0}})});