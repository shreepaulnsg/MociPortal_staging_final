// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/sections/dynamicSettings/chart/_ChartSettingsBuilder",["dojo/aspect","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes","esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartSorting","dojo/i18n!esri/nls/jsapi"],function(r,t,e,f,c){c=c.geoenrichment.dijit.ReportPlayer.SectionDynamicSettingsBuilder.ChartSettings;var m={provideChartSettings:function(a){var b=a.getChartJson();if(!b||b.type===e.GAUGE||
b.type===e.WAFFLE)return null;var d=b.visualProperties,k=b&&!!b.seriesItems.length&&!d.noTableView,l=a.calculationStatesGroup,n=!d.noSorting&&m._provideOptionsForSorting(b);return t(d.noFilter?null:a.getChart().getFilterRanges(),function(g){var p=k||n||l,h=g&&g.length;if(!p&&!h)return null;var q={viewSettings:p&&{canViewTable:k,group:l,sortingOptions:n,sorting:d.sorting},filter:h&&{filter:d.filter,filterRanges:g,isAreasFilter:a.getChart().canFilterAreas(),getNumElementsTotal:function(){return a.getChart().getNumElementsTotal()},
getNumElementsShown:function(){return a.getChart().getNumElementsShown()},onContentUpdated:function(){}}};h&&r.after(a.getChart(),"onContentUpdated",function(){q.filter.onContentUpdated()});return q})},_provideOptionsForSorting:function(a){return!a.isMultiFeatureChart&&1===a.seriesItems.length&&e.isSortingSupported(a.type)?[{label:c.noSorting,imageClass:"",value:f.NONE},{label:c.sortAscending,imageClass:"upButton",value:f.ASC},{label:c.sortDescending,imageClass:"downButton",value:f.DESC}]:null}};
return m});