// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/sections/dynamicSettings/supportClasses/FilterUtil",["esri/dijit/geoenrichment/utils/SortUtil"],function(l){var d={ABOVE_AVERAGE:"aboveAverage",BELOW_AVERAGE:"belowAverage",TOP_N:"topN",BOTTOM_N:"bottomN",RANGE:"range",NONE:"none",isSupported:function(a){for(var c in d)if(d[c]===a)return!0;return!1},isNumElementsType:function(a){return a===d.TOP_N||a===d.BOTTOM_N},isRangeType:function(a){return a===d.RANGE},filterData:function(a,c){function g(){var e=
0;a.forEach(function(k){e+=k});return e/a.length}if(!a.length)return[];a=a.slice().sort(l.compareNumeric);switch(c.method){case d.ABOVE_AVERAGE:var b=g();return a.filter(function(e){return e>b});case d.BELOW_AVERAGE:return b=g(),a.filter(function(e){return e<b});case d.TOP_N:var f=c.numElements;if(f>=a.length)return a;var h=a.slice().reverse()[f-1];return a.filter(function(e){return e>=h});case d.BOTTOM_N:f=c.numElements;if(f>=a.length)return a;var m=a[f-1];return a.filter(function(e){return e<=m});
case d.RANGE:return a.filter(function(e){return c.ranges.some(function(k){return d._checkValueMatchesRange(e,k)})});case d.NONE:return a;default:throw Error("Method is not supported!");}},_checkValueMatchesRange:function(a,c){function g(b,f,h){switch(f){case "\x3d":return b===h;case "\x3c":return b<h;case "\x3e":return b>h;case "\x3c\x3d":return b<=h;case "\x3e\x3d":return b>=h}return!1}return c.conditions.length&&c.conditions.every(function(b){return g(a,b.operator,Number(b.value))})},getRangeStatistics:function(a){var c=
-Infinity,g=Infinity;a&&a.forEach(function(b){b.conditions.forEach(function(f){"\x3e"===f.operator||"\x3e\x3d"===f.operator?c=Math.max(c,f.value):g=Math.min(g,f.value)})});return{min:c,max:g}}};return d});