// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/StackedBars",["dojo/_base/declare","dojo/_base/lang","dojox/charting/plot2d/commonStacked","./ClusteredBars"],function(p,q,n,r){return p(r,{getSeriesStats:function(){var a=n.collectStats(this.series,q.hitch(this,"isNullValue"));a.hmin-=.5;a.hmax+=.5;var c=a.hmin;a.hmin=a.vmin;a.vmin=c;c=a.hmax;a.hmax=a.vmax;a.vmax=c;return a},rearrangeValues:function(a,c,b){return n.rearrangeValues.call(this,a,c,b)},_drawBarBackground:function(a,
c,b,e,g,k,d,h){this.series.indexOf(d)===this.series.length-1&&this.inherited(arguments)},_getYShift:function(a,c){return 0},_getClusterSize:function(){return 1},_renderInside:function(a,c,b,e,g,k){var d=c[c.valueProp];if(!(a.box.h-3>b.height))if(a.box.w+2*this.opt.labelOffset>b.width)a.box.w<=(0<d?g.width-k.r-(b.x+b.width+this.opt.labelOffset):b.x-k.l-2*this.opt.labelOffset)&&this._renderOutside(a,c,b,e,g,k,void 0,!0);else{g=b.y+(b.height-a.box.h)/2;var h=0;c.stackValues.forEach(function(f,l){l<=
c.seriesIndex&&(h+=Math.abs(f||0))});var m=0<d?0:h;c.stackValues.forEach(function(f,l){f=f||0;0<f?l<c.seriesIndex&&(m+=Math.abs(f)):l<=c.seriesIndex&&(m-=Math.abs(f))});d=b.width*Math.abs(d)/h;b=b.x+b.width*m/h;switch(e.series.dataLabelsHorizontalAlign){case "left":e=b+this.opt.labelOffset;break;case "right":e=b+d-a.box.w-this.opt.labelOffset;break;default:e=b+d/2-a.box.w/2}a={x:e,y:g,w:a.box.w,h:a.box.h,text:a.getText()};this._labelBoxes.push(a)}},_getFixLabelsParams:function(){return{allowXShift:!0,
xGap:5,yTolerance:.5}}})});