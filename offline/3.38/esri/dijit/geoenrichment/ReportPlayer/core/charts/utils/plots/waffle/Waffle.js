// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/waffle/Waffle","dojo/_base/lang dojo/_base/declare dojox/charting/plot2d/Base dojox/charting/plot2d/_PlotEvents dojox/charting/plot2d/common dojox/lang/utils ../animation/_WaffleAnimation ../labelsRendering/LabelsUtil ./_LabelRenderer ./_ShapeRenderer".split(" "),function(k,e,q,r,t,l,u,m,v,n){e=e([q,r,u],{defaultParams:{animate:null},optionalParams:{labelFunc:null},valueLabelElements:null,dataLabelElements:null,_animationInfos:null,
constructor:function(a,b){this.opt=k.clone(this.defaultParams);l.updateWithObject(this.opt,b);l.updateWithPattern(this.opt,b,this.optionalParams);this.run=null;this.dyn=[];this.runFilter=[]},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},setAxis:function(a){return this},addSeries:function(a){this.run=a;return this},getSeriesStats:function(){return k.delegate(t.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(a,b){if(!this.dirty)return this;
this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var f=this.group,c=this.chart.theme,d=this.events();this._animationInfos=[];if(!this.run||!this.run.data.length)return this;var g=this.run.data;this.valueLabelElements=[];this.dataLabelElements=[];a=v.renderLabels(this,g,a,b,c);c=n.renderShape(g,c,f,a,this._animationInfos)(1);d&&c.shapes.forEach(function(h,p){h={element:"slice",index:p,run:this.run,shape:h};this._connectEvents(h);this._eventSeries[p]=h},this);this.opt.animate&&
this._renderAnimation(f);return this},renderLabel:function(a,b,f){var c=this,d=m.renderHTMLLabel(this.chart,a.x,a.y,a.text);this.htmlElements.push(d);b?(this.valueLabelElements.push(d),this.opt.animate&&this._animationInfos.push({isLabel:!0,func:function(g){return m.renderHTMLLabel(c.chart,a.x,a.y,f(g))}})):this.dataLabelElements.push(d);return d}});e.DEFAULT_ICON_SIZE=n.DEFAULT_ICON_SIZE;return e});