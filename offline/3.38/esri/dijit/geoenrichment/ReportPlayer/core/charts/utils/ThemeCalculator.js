// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ThemeCalculator","dojo/_base/lang dojox/charting/Theme ../../themes/ThemeLibrary ./ChartTypes ./ChartLineMarkers ./ChartLineStyles esri/dijit/geoenrichment/utils/ColorUtil".split(" "),function(l,z,r,k,t,A,p){function u(c,b,e){switch(c){case k.COLUMN:var f=b.column&&b.column.colors;break;case k.BAR:f=b.bar&&b.bar.colors;break;case k.LINE:f=b.line&&b.line.colors;break;case k.VERTICAL_LINE:f=b.line&&b.line.colors;break;case k.PIE:f=b.pie&&
b.pie.colors;break;case k.DONUT:f=b.donut&&b.donut.colors;break;case k.GAUGE:f=b.gauge&&b.gauge.colors;break;case k.WAFFLE:f=b.waffle&&b.waffle.colors;break;case k.RING:f=b.ring&&b.ring.colors;break;case k.PICTURE_COLUMN:f=b.pictureColumn&&b.pictureColumn.colors;break;case k.PICTURE_BAR:f=b.pictureBar&&b.pictureBar.colors}f&&f.length||(f=null);return 3>=e&&b.colors3series&&b.colors3series.length&&b.colors3series||f||b.colors||v}var h={},v=["#AAAAAA","#888888","#555555","#333333"];h.DEFAULT_LINE_THICKNESS=
1;h.DEFAULT_COLUMN_THICKNESS="Medium";h.DEFAULT_DONUT_HOLE_PERCENT=50;h.DEFAULT_DONUT_GAP=3;h.DEFAULT_DONUT_ARC_PERCENT=100;h.DEFAULT_GAUGE_HOLE_PERCENT=80;h.DEFAULT_GAUGE_GAP=2;h.DEFAULT_GAUGE_ANGLE=0;h.DEFAULT_GAUGE_ARC_PERCENT=100;h.getThemeForSettings=function(c,b,e){var f=e.isEditMode;e=e.isBenchmarked;var a=new z({colors:b.colors||v});if(!c)return a;var d=c.visualProperties;a.plotarea.fill=d.backgroundColor||b.backgroundColor;"number"!==typeof d.backgroundColorOpacity||p.isTransparent(a.plotarea.fill)||
(a.plotarea.fill=p.toColor(a.plotarea.fill),a.plotarea.fill.a=d.backgroundColorOpacity);a.plotarea.stroke={width:0};d.plotAreaOutlineColor&&(a.plotarea.stroke.color=d.plotAreaOutlineColor,"number"!==typeof d.plotAreaOutlineOpacity||p.isTransparent(a.plotarea.stroke.color)||(a.plotarea.stroke.color=p.toColor(a.plotarea.stroke.color),a.plotarea.stroke.color.a=d.plotAreaOutlineOpacity),a.plotarea.stroke.width=d.plotAreaOutlineThickness||0,d.plotAreaOutlineStyle&&(a.plotarea.stroke.style=A.toGFXValue(d.plotAreaOutlineStyle)));
a.chart.fill="transparent";a.axis.title.font="normal normal normal 11px Verdana";k.hasBackgroundImage(c.type)&&(a.plotarea.backgroundImageData=d.backgroundImageData);var g=l.mixin({},b.dataLabelsStyle,d.dataLabelsStyle);a.series.dataLabelsColor=g.color;a.series.dataLabelsAltColor=d.dataLabelsEnableAltColor&&(d.dataLabelsAltColor||b.dataLabelsAltColor);a.series.dataLabelsFont=h.combineFontString(g);a.series.dataLabelsHorizontalAlign=d.dataLabelsHorizontalAlign||"center";a.series.dataLabelsVerticalAlign=
d.dataLabelsVerticalAlign||"middle";a.series.dataLabelsAngle=d.dataLabelsAngle;a.series.dataLabelsMaxWidth=d.dataLabelsMaxWidth;var m=l.mixin({},g,d.dataLabelsLabelStyle);a.series.dataLabelsLabelColor=m.color;a.series.dataLabelsLabelFont=h.combineFontString(m);a.series.dataLabelsPercentColor=g.color;a.series.dataLabelsPercentFont=h.combineFontString(g);k.isColumnBarLike(c.type)&&(a.series.showColumnBarBackground=d.showColumnBarBackground,a.series.columnBarBackgroundColor=d.columnBarBackgroundColor||
b.columnBarBackground&&b.columnBarBackground.backgroundColor,a.series.columnBarBackgroundColor&&(a.series.columnBarBackgroundColor=1>d.columnBarBackgroundOpacity?p.getColorWithAlpha(a.series.columnBarBackgroundColor,d.columnBarBackgroundOpacity):a.series.columnBarBackgroundColor),a.series.renderColumnBarsInOppositeDirections=d.renderColumnBarsInOppositeDirections);k.hasAxis(c.type)&&(a.series.baseLineValue=d.yAxis.baseLineValue);c.type===k.DONUT&&(a.series.donutHolePercent=void 0!==d.donutHolePercent?
d.donutHolePercent:h.DEFAULT_DONUT_HOLE_PERCENT,a.series.donutGap=void 0!==d.donutGap?d.donutGap:h.DEFAULT_DONUT_GAP,a.series.donutArcPercent=void 0!==d.donutArcPercent?d.donutArcPercent:h.DEFAULT_DONUT_ARC_PERCENT,a.series.donutArcPercent=Math.min(100,Math.max(50,a.series.donutArcPercent)));c.type===k.GAUGE&&(a.series.donutHolePercent=void 0!==d.gaugeHolePercent?d.gaugeHolePercent:h.DEFAULT_GAUGE_HOLE_PERCENT,a.series.donutGap=void 0!==d.gaugeGap?d.gaugeGap:h.DEFAULT_GAUGE_GAP,a.series.startAngle=
void 0!==d.gaugeStartAngle?d.gaugeStartAngle:h.DEFAULT_GAUGE_ANGLE,a.series.donutArcPercent=void 0!==d.gaugeArcPercent?d.gaugeArcPercent:h.DEFAULT_GAUGE_ARC_PERCENT,a.series.donutArcPercent=Math.min(100,Math.max(50,a.series.donutArcPercent)),a.series.donutShowIcons=d.showChartIcons,d.gaugeShowArrow&&(a.series.gaugeShowArrowIndicator=!0,a.series.donutGap=0,100!==a.series.donutArcPercent&&(a.series.startAngle=0),a.series.gaugeArrowIndicatorLineColor=d.gaugeArrowLineColor||b.gauge&&b.gauge.arrowIndicator.lineColor,
a.series.gaugeArrowIndicatorFillColor=d.gaugeArrowFillColor||b.gauge&&b.gauge.arrowIndicator.backgroundColor),g=l.mixin({},b.gauge&&b.gauge.dataLabelStyle,d.gaugeLabelStyle),a.series.gaugeMainLabelPosition=d.gaugeLabelPlacement,a.series.gaugeMainLabelFont=h.combineFontString(g),a.series.gaugeMainLabelFontColor=d.gaugeConditionalStylingLabel?null:g.color,a.series.gaugeMainLabelFontColorFromConditionalStyling=d.gaugeConditionalStylingLabel&&!!d.conditionalStyling,a.series.gaugeMainLabelFontSize=d.gaugeLabelStyle&&
d.gaugeLabelStyle.fontSize,a.series.gaugeMainLabelTextDecoration=g.textDecoration,d.gaugeShowFromToLabels&&(a.series.gaugeShowFromToLabels=d.gaugeShowFromToLabels,g=l.mixin({},b.gauge&&b.gauge.dataLabelStyle,d.gaugeFromLabelStyle),a.series.gaugeFromLabelValue=d.gaugeRangeMin||0,a.series.gaugeFromLabelFont=h.combineFontString(g),a.series.gaugeFromLabelFontColor=g.color,a.series.gaugeFromLabelFontSize=g.fontSize,a.series.gaugeFromLabelTextDecoration=g.textDecoration,g=l.mixin({},b.gauge&&b.gauge.dataLabelStyle,
d.gaugeToLabelStyle),a.series.gaugeToLabelValue=d.gaugeRangeMax||"",a.series.gaugeToLabelFont=h.combineFontString(g),a.series.gaugeToLabelFontColor=g.color,a.series.gaugeToLabelFontSize=g.fontSize,a.series.gaugeToLabelTextDecoration=g.textDecoration));c.type===k.WAFFLE&&(a.series.waffleDirection=d.waffleDirection,a.series.waffleFlowStyle=d.waffleFlowStyle,a.series.waffleShowWholePictures=d.waffleShowWholePictures,a.series.waffleStretchIconsToFill=d.waffleStretchIconsToFill,a.series.waffleLabelPlacement=
d.waffleLabelPlacement,a.series.waffleLabelOffset=d.waffleLabelOffset,a.series.waffleColumnSpace=d.waffleColumnSpace,a.series.waffleRowSpace=d.waffleRowSpace,a.series.waffleNumIcons=d.waffleNumIcons,a.series.waffleNumRows=d.waffleNumRows,a.series.waffleNumColumns=d.waffleNumColumns,a.series.waffleHideValue=d.waffleHideValue,g=l.mixin({},b.waffle&&b.waffle.dataValueStyle,d.waffleValueStyle),a.series.waffleValueFont=h.combineFontString(g),a.series.waffleValueFontColor=d.waffleConditionalStylingValue?
null:g.color,a.series.waffleValueFontColorFromConditionalStyling=d.waffleConditionalStylingValue&&!!d.conditionalStyling,a.series.waffleValueFontSize=g.fontSize,a.series.waffleValueTextDecoration=g.textDecoration,a.series.waffleHideLabel=d.waffleHideLabel,g=l.mixin({},b.waffle&&b.waffle.dataLabelStyle,d.waffleLabelStyle),a.series.waffleLabelFont=h.combineFontString(g),a.series.waffleLabelFontColor=d.waffleConditionalStylingLabel?null:g.color,a.series.waffleLabelFontColorFromConditionalStyling=d.waffleConditionalStylingLabel&&
!!d.conditionalStyling,a.series.waffleLabelFontSize=g.fontSize,a.series.waffleLabelTextDecoration=g.textDecoration,a.series.waffleShowLabelAbove=d.waffleShowLabelAbove);c.type===k.RING&&(a.series.show100PercentLabel=!e,a.series.ringBackgroundColor=d.ringBackgroundColor||b.ring&&b.ring.ringBackground&&b.ring.ringBackground.backgroundColor,a.series.ringBackgroundColor&&(a.series.ringBackgroundColor=1>d.ringBackgroundOpacity?p.getColorWithAlpha(a.series.ringBackgroundColor,d.ringBackgroundOpacity):a.series.ringBackgroundColor));
k.isPictureLike(c.type)&&(a.series.columnBarShowWholePictures=d.columnBarShowWholePictures);a.marker.fill="#FFFFFF";a.series.outline=null;a.series.isEditMode=f;return a};h.getComparisonSymbol=function(c){return t.getMarkerPath(t.CIRCLE,c)};h.calcColorForPoint=function(c){var b=c.point,e=c.seriesItem,f=c.pointIndex,a=c.isOthersPoint,d=c.seriesIndex,g=c.numSeries,m=c.chartType,n=c.themeSettings,w=c.isComparisonSeries;c=c.comparisonInfo;var x=e&&e.points.length;m===k.WAFFLE&&x--;e=e&&e.color;var y=k.isSingleSeries(m)||
k.isColumnBarLike(m)&&!n.renderSingleDataSeriesWithSameColor&&1===g;g=u(m,n,y?x:g);if(k.isLineLike(m))if(w&&c)f=c.color||n.comparisonInfo.lineColor;else{var q=g[d%g.length];f=e||q||"#000000"}else if(w&&c&&c.color)f=c.color;else{b=k.isPictureLike(m)?b&&h.getPointIconStyle(b).fillColor:b&&b.color;if(m===k.GAUGE&&a&&n.gauge.othersColor)return b||n.gauge.othersColor;if(m===k.WAFFLE&&a&&n.waffle.othersColor)return b||n.waffle.othersColor;q=q||(y?g[f%g.length]:g[d%g.length]);f=b||!k.isSingleSeries(m)&&
e||q||"#000000"}return f};h.pointCanHaveColor=function(c){return k.isPictureLike(c.chartType)?!!(c.point.iconFieldInfo&&c.point.iconFieldInfo.shapeJson&&c.point.iconFieldInfo.shapeJson.g.length):!0};h.setPointColor=function(c,b){delete c.color;c.iconFieldInfo?c.iconFieldInfo.shapeJson&&(delete c.iconFieldInfo.shapeJson.style.fillColor,delete c.iconFieldInfo.shapeJson.style.borderColor,b&&(c.iconFieldInfo.shapeJson.style.fillColor=b,c.iconFieldInfo.shapeJson.style.borderColor=b)):b&&(c.color=b)};h.calcColorForSeries=
function(c){var b=c.seriesItem,e=c.seriesIndex,f=c.numSeries,a=c.chartType,d=c.themeSettings;if(k.isSingleSeries(a))return null;c=k.isColumnBarLike(a)&&!d.renderSingleDataSeriesWithSameColor&&1===f;f=u(a,d,f);e=k.isLineLike(a)?f[e%f.length]:c?null:f[e%f.length];return b&&b.color||e||"#000000"};h.provideMissingIconsForPoints=function(c,b){if(k.isPictureLike(b)){var e,f=[];c.forEach(function(a){a.iconFieldInfo?(e=a.iconFieldInfo,f.forEach(function(d){d.iconFieldInfo=l.clone(e)}),f.length=0):e?a.iconFieldInfo=
l.clone(e):f.push(a)})}};h.setWaffleChartPointIcon=function(c,b,e){var f=c&&c.shapeJson;0===b?e.forEach(function(a,d){if(a.fieldInfo||f){var g=h.getPointIconStyle(a);a.iconFieldInfo=0===d?c:c&&l.clone(c);a.iconFieldInfo&&a.iconFieldInfo.shapeJson&&0!==d&&(a.iconFieldInfo.shapeJson.style.fillColor=g.fillColor,a.iconFieldInfo.shapeJson.style.borderColor=g.borderColor)}}):e[b].iconFieldInfo=c;b=e[0];e=e[e.length-1];!e.iconFieldInfo&&b.iconFieldInfo&&b.iconFieldInfo.shapeJson&&(e.iconFieldInfo=l.clone(b.iconFieldInfo),
delete e.iconFieldInfo.shapeJson.style.fillColor,delete e.iconFieldInfo.shapeJson.style.borderColor)};h.getPointIconStyle=function(c,b){function e(a,d){return"number"===typeof a?a:d}var f=c&&(c.iconFieldInfo||c.icon);if(!f||!f.shapeJson)return{fillColor:null,fillAlpha:null,borderColor:null,borderAlpha:null,borderWidth:null,borderDashArray:null};c=f.shapeJson.style;b=b&&b.considerTheme&&f.shapeJson.themeStyle;return{fillColor:c&&c.fillColor||b&&b.fillColor,fillAlpha:e(c&&c.fillAlpha,b&&b.fillAlpha),
borderColor:c&&c.borderColor||b&&b.borderColor,borderAlpha:e(c&&c.borderAlpha,b&&b.borderAlpha),borderWidth:e(c&&c.borderWidth,b&&b.borderWidth),borderDashArray:c&&c.borderDashArray||b&&b.borderDashArray}};h.calcIconForPoint=function(c,b,e){if(!k.isPictureLike(e))return null;(c=c.iconFieldInfo)&&c.shapeJson&&b&&(c=l.clone(c),c.shapeJson.themeStyle={fillColor:b,borderColor:b});return c};h.calcBackgroundIconForPoint=function(c,b,e,f){if(!k.isPictureLike(b))return null;b=f.columnBarBackgroundColor||
e.columnBarBackground&&e.columnBarBackground.backgroundColor;return(c=c.iconFieldInfo)&&c.shapeJson&&b?(c=l.clone(c),c.shapeJson.themeStyle={fillColor:b,borderColor:b},c):null};h.combineFontString=function(c){c=c||{};return(c.fontStyle||"normal")+" normal "+(c.fontWeight||"normal")+" "+((c.fontSize||r.CHART_DATA_FONT_SIZE)+"px ")+(c.fontFamily||r.DEFAULT_FONT_FAMILY_CLASSIC)};return h});