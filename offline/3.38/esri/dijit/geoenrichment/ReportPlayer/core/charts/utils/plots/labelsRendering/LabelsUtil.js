// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/labelsRendering/LabelsUtil",["dojo/_base/lang","dojox/gfx","dojox/charting/plot2d/common"],function(y,w,z){var v={getLabelInfo:function(a,e,d,k){function n(b,c){return{font:b.isLabel&&d.series.dataLabelsLabelFont||b.isPercent&&d.series.dataLabelsPercentFont||d.series.dataLabelsFont,fontColor:c&&d.series.dataLabelsAltColor||b.isLabel&&d.series.dataLabelsLabelColor||b.isPercent&&d.series.dataLabelsPercentColor||d.series.dataLabelsColor}}
function p(b){b=y.mixin(b||{},k);var c={x:0,y:0,w:0,h:0},h="";f.forEach(function(q,t){var m=w._base._getTextBox(q.text,{font:n(q).font}),g=m.w,r=m.h,u=0;if(b.forceOneLine)0<t&&t===f.length-1&&(u=b.spaceToWidth?Math.max(0,b.spaceToWidth-c.w-g):b.minSpace||0),c.w+=g+u,c.h=Math.max(c.h,r);else{var l=q.isLabel&&b.dataLabelsMaxWidth||void 0;l&&l>=g&&(l=void 0);g=l?Math.min(g,l):g;l&&(r*=Math.ceil(m.w/g));c.w=Math.max(c.w,g);c.h+=r}m=n(q,b.isAltPosition);0<t&&!b.forceOneLine&&(h+="\x3cbr/\x3e");h+=v.getStyledLabel({w:g,
h:r,font:m.font,fontColor:m.fontColor,text:q.text,forceOneLine:b.forceOneLine,spaceBefore:u,isInlineBlock:!0,maxWidth:l})});var x="";"number"===typeof d.series.dataLabelsAngle&&0!==d.series.dataLabelsAngle&&(x="transform:rotate("+-d.series.dataLabelsAngle+"deg);");h="\x3cdiv style\x3d'font-size: 0px;text-align:"+(b.horizontalAlign||"left")+";"+(b.forceOneLine?"white-space:nowrap;":"")+x+"width:"+c.w+"px;height:"+c.h+"px;'\x3e"+h+"\x3c/div\x3e";delete c.l;delete c.t;!b.considerAngle||90!==d.series.dataLabelsAngle&&
-90!==d.series.dataLabelsAngle||(c={w:c.h,h:c.w+4});return{text:h,box:c}}var f=a.opt.labelFunc?a.opt.labelFunc.apply(a,[e,a.opt.fixed,a.opt.precision]):e.text||z.getLabel(e[e.valueProp],a.opt.fixed,a.opt.precision)||"";f="string"===typeof f?[{text:f}]:f;return{getText:function(b){return p(b).text},box:p().box,angle:k.considerAngle&&d.series.dataLabelsAngle}},getSimpleLabelInfo:function(a){var e=a.font.replace(/\s\w*px/," "+Math.round(a.fontSize)+"px"),d=w._base._getTextBox(a.text,{font:e});return{text:v.getStyledLabel({text:a.text,
font:e,fontColor:a.fontColor,w:d.w,h:d.h}),box:d}},getStyledLabel:function(a){var e=a.fontSize?a.font.replace(/\s\w*px/," "+Math.round(a.fontSize)+"px"):a.font;return"\x3cdiv style\x3d'"+(a.maxWidth?"max-width:"+a.maxWidth+"px;white-space:normal;":"white-space:nowrap;")+"width:"+Math.round(a.w)+"px;height:"+Math.round(a.h)+"px;font:"+e+";color:"+a.fontColor+";"+(a.textDecoration?"text-decoration:"+a.textDecoration+";text-decoration-color:"+a.fontColor+";":"")+(a.forceOneLine?"vertical-align:bottom;":
"")+(a.spaceBefore?"padding-left:"+Math.round(a.spaceBefore)+"px;":"")+(a.isInlineBlock||a.forceOneLine?"display:inline-block;":"")+"'\x3e"+String(a.text).replace(/\s/g," ")+"\x3c/div\x3e"},renderHTMLLabel:function(a,e,d,k,n,p,f){var b=document.createElement("div"),c=b.style;b.innerHTML=k;c.position="absolute";var h=k=0;if(90===f||-90===f)k=-(p-4-n)/2,h=-(n-(p-4))/2;c.left=Math.floor(e+k)+"px";c.top=Math.floor(d+h)+"px";c.pointerEvents="none";a.node.insertBefore(b,a.node.firstChild);return b}};return v});