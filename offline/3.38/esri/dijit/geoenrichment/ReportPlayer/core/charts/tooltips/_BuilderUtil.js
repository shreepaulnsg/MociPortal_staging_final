// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_BuilderUtil","dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../legends/ChartLegendSymbols ../legends/LegendSymbolRenderer ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer ../../../dataProvider/supportClasses/data/AreaDataUtil dojo/i18n!esri/nls/jsapi".split(" "),function(r,t,e,l,u,v,w,x,g){var m=g.geoenrichment.dijit.ReportPlayer.ChartContainer;g=g.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{addTitle:function(a,
c,b){a=e.create("div",{"class":"chartTooltip_title esriGERowHigh"},a);b&&this.addColor(b,a);this.addLabel(c,a)},addColor:function(a,c){a=a||{};a=v.renderSymbol({defaultSymbol:u.CIRCLE,fill:a.fill,stroke:a.stroke,marker:a.marker,width:8,height:10});t.add(a,"esriGESpaceAfterBig");e.place(a,c)},addRowOffset:function(a){this.addColor(null,a)},addLabel:function(a,c){return e.create("div",{"class":"chartTooltip_label dijitInline esriGESpaceAfterBig",innerHTML:a},c)},addValue:function(a,c){return e.create("div",
{"class":"chartTooltip_value dijitInline esriGESpaceAfterBig",innerHTML:a},c)},buildStatLabels:function(a,c,b,d,y,z,A){function f(n,p){if(a[n]&&p){var h=e.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);k.addColor(null,h);q.push(k.addLabel(p,h));k.addValue(a[n],h)}}var k=this,q=[];a.showWeight&&f("weightValueLabel",b);a.showMin&&f("minValueLabel",d);a.showMax&&f("maxValueLabel",y);a.showAvg&&f("avgValueLabel",z);a.showWeight&&f("weightInStackLabel",A);return q},formatTable:function(a){var c=
0;a.forEach(function(b){c=Math.max(c,l.get(b,"width"))});a.forEach(function(b){l.set(b,"width",c+"px")})},buildSeriesLabel:function(a){return!0===a.isThisAreaSpecific?a.seriesLabel&&!a.isThisAreaSingleSeries?r.substitute(g.thisAreaSeries,{seriesName:a.seriesLabel}):m.thisArea:a.seriesLabel},addBenchmarkValue:function(a,c){return this.addValue(a.unbenchmarkedValueLabel+" ("+(0<a.value?"+":"")+a.valueLabel+")",c)},buildRichText:function(a,c){a=w.renderFieldInfoInTableCell(a.richTextFieldInfo,{previewValues:!0,
fieldData:a.fieldData,isGraphicReport:!0,getPreviewValueFunction:this.buldPreviewValueFunction(a,{type:"tooltip"})});e.create("div",{"class":"chartTooltip_row esriGERow20",innerHTML:a.formattedValue},c)},buldPreviewValueFunction:function(a,c){return function(b){if(!b||!b.fieldInfo)return null;switch(b.fieldInfo.name){case "headers.CHART_POINT_VALUE":return{value:a.isBenchmarked?a.unbenchmarkedValue:a.value};case "headers.CHART_POINT_NAME":return{formattedValue:a.pointName};case "headers.CHART_SERIES_NAME":return{formattedValue:a.seriesName};
case "headers.CHART_AREA_NAME":return{formattedValue:a.areaName||m.thisArea}}if(!a.fieldData)return null;b=b.fieldInfo;if(b.expressionText&&-1!==b.expressionText.indexOf("!headers.CHART_POINT_VALUE!")){switch(c.type){case "tooltip":var d=a.tooltipTemplateValues;break;case "dataDrilling":d=a.dataDrillingPanelInfo.templateValues}(d=d&&d[b.templateName]&&d[b.templateName][a.fieldInfo&&a.fieldInfo.templateName])&&(b=d)}b=x.getAreaDataValue({featureAttributes:a.isComparisonPoint?a.comparisonFeatureAttribute:
null,fieldData:a.fieldData,featureIndex:a.featureIndex,fieldName:b.templateName||b.name});return"number"===typeof b?{value:b||0}:{formattedValue:b}}}}});