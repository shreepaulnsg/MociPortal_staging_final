// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ZoomSupportTooltip","dojo/_base/declare dojox/charting/action2d/Tooltip dojox/lang/functional dojox/gfx/matrix esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),function(l,m,f,n,p,q){var h=Math.PI/4,r=Math.PI/2,k={_tooltips:[],show:function(a,d,c,b){this.hide();if(a){a="string"===typeof a?{node:a}:a;var g=a.node,e=g?g.outerHTML||g.innerHTML||g:null;e&&"string"===typeof e&&((e=-1!==e.indexOf("href")||
-1!==e.indexOf("esriGELink"))||(b=(b||"")+" esriGENonInteractable"),this._tooltips.push(q.showTooltipForNode(c,g,{position:d,notRestricted:!0,stayOnHover:e,classes:b&&[b],style:a.style})))}},hide:function(){this._tooltips.forEach(function(a){a&&a.destroy()});this._tooltips.length=0}};return l(m,{tooltipClass:null,process:function(a){if("onplotreset"===a.type||"onmouseout"===a.type)"onplotreset"===a.type&&delete this.angles;else if(a.shape&&"onmouseover"===a.type){var d=["after-centered","before-centered"];
if(!this._needSetRectFromShape())switch(a.element){case "marker":case "circle":case "spider_circle":case "spider_plot":case "candlestick":break;case "column":d=["above-centered","below-centered","after-centered","before-centered"];case "bar":break;default:if(!this.angles){var c="number"===typeof a.run.data[0]?f.map(a.run.data,"x ? Math.max(x, 0) : 0"):f.map(a.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=f.map(f.scanl(c,"+",0),"* 2 * Math.PI / this",f.foldl(c,"+",0))}c=n._degToRad(a.plot.opt.startAngle);
var b=(this.angles[a.index]+this.angles[a.index+1])/2+c;c&&(0>b||b>2*Math.PI)&&(b=Math.abs(2*Math.PI-Math.abs(b)));b<h||(b<r+h?d=["below-centered","above-centered"]:b<Math.PI+h?d=["before-centered","after-centered"]:b<2*Math.PI-h&&(d=["above-centered","below-centered"]))}p.isMobileDevice()&&(d=["above-centered","below-centered"]);(c=this.text(a,this.plot))&&k.show("string"===typeof c?this._format(c):c,d,a.shape.rawNode,this.tooltipClass)}},_needSetRectFromShape:function(){return!1},_hide:function(){k.hide()}})});