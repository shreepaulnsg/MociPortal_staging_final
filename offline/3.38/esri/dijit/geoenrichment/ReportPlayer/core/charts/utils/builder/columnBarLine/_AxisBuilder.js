// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/columnBarLine/_AxisBuilder","dojo/_base/lang dojox/charting/axis2d/Default ../../ThemeCalculator ../../ChartTypes ../../AxisUtil ../../plots/labelsRendering/LabelsUtil ../../ChartDataLabelsTypes ./_PointLabelUtil".split(" "),function(n,t,q,p,w,x,y,u){return{createXAxis:function(m,b,d,c,a,l){b=b.xAxis;a="OtherSide"!==b.placement;var f=n.mixin({},c.xAxis.axisStyle,c.xAxis.style,b.style),e=n.mixin({},c.xAxis.titleStyle,b.titleStyle);
c=b.lineColor||c.xAxis.lineColor;d=p.isXAxisVertical(d);var g={width:b.show&&!b.hideLine?1:0,color:c},k=b.title,h=q.combineFontString(e);e=e.color;var r=b.show&&!b.hideLine&&b.showTicks?5:0;b.ticksInside&&(r*=-1);l={type:t,stroke:g,title:k,titleOrientation:!d&&a?"away":"axis",titleFont:h,titleFontColor:e,vertical:d,leftBottom:a,majorTicks:!0,majorTick:{length:r,color:c},majorTickStep:1,minorTicks:!1,microTicks:!1,minorTickStep:.5,microTickStep:.01,font:q.combineFontString(f),fontColor:f.color,dropLabels:!d,
majorLabels:b.show&&!b.hideLabels,minorLabels:!1,labelFunc:u.getXAxisLabelFunc(l),rotation:-b.labelsAngle||0};return n.mixin(l,m)},createYAxis:function(m,b,d,c,a,l){a=b.yAxis;var f="OtherSide"!==a.placement,e=n.mixin({},c.yAxis.axisStyle,c.yAxis.style,a.style),g=n.mixin({},c.yAxis.titleStyle,a.titleStyle);c=a.lineColor||c.yAxis.lineColor;var k=p.isXAxisVertical(d),h=!a.nonZeroInclusive,r={width:a.show&&!a.hideLine?1:0,color:c},z=a.title,A=q.combineFontString(g);g=g.color;var v=a.show&&!a.hideLine&&
a.showTicks?5:0;a.ticksInside&&(v*=-1);b={type:t,fixUpper:"major",includeZero:h,stroke:r,title:z,titleOrientation:k&&f?"away":"axis",titleFont:A,titleFontColor:g,vertical:!k,leftBottom:f,majorTicks:!0,majorTick:{length:v,color:c},majorTickStep:200,minorTicks:!1,microTicks:!1,minorTickStep:100,microTickStep:10,font:q.combineFontString(e),fontColor:e.color,dropLabels:!0,majorLabels:a.show&&!a.hideLabels,minorLabels:!1,rotation:-a.labelsAngle||0,labelFunc:u.getYAxisLabelFunc(l,b,d)};return n.mixin(b,
m)},prettifyYAxis:function(m,b,d,c,a,l,f,e,g,k){d.removeAxis("y");var h=g&&this._getDataLabelsSizes(a,d,c,e);d.addAxis("y",this.createYAxis(w.getPrettifyYAxisParameters(m,b,{baseLineValue:c.yAxis.baseLineValue,renderColumnBarsInOppositeDirections:p.isColumnBarLike(a)&&1<e.length&&c.renderColumnBarsInOppositeDirections,previewBelowZero:!f.dynamicReportInfo,dataLabelsSizeBelow:g&&h&&h.below,dataLabelsSizeAbove:g&&h&&h.above,chartSize:k,nonZeroInclusive:c.yAxis.nonZeroInclusive}),c,a,l,f,d))},_getDataLabelsSizes:function(m,
b,d,c){if(!p.isColumnBarLike(m)||d.dataLabels===y.NONE)return null;var a=b.getPlot("default"),l=d.yAxis.baseLineValue||0,f=0,e=0;c.forEach(function(g){g.data.forEach(function(k){var h=x.getLabelInfo(a,k,b.theme,{considerAngle:!0,dataLabelsMaxWidth:b.theme.series.dataLabelsMaxWidth}).box[p.isColumnLike(m)?"h":"w"];k[k.valueProp]<l?f=Math.max(f,h):e=Math.max(e,h)})});return{below:f?f+2*a.opt.labelOffset:0,above:e?e+2*a.opt.labelOffset:0}}}});