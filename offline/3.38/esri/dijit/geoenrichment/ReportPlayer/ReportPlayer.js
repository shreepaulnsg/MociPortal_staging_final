// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/promise/all":function(){define(["dojo/promise/all"],function(t){return t})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(t){return t})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(t){return t})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],function(t){function p(l){l=l.split(".");return Number((Number(l[0])+Number(l[1])/100).toFixed(2))}t=Math.max(p("3.37"),
p(t.version)).toFixed(2);return{jsapiVersion:t,esriDijitCssUrl:"https://js.arcgis.com/"+t+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+t+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+t+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,
showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1,skipCreditConsumption:!1},createPlayerCommand:{loadMapPortalItems:!0,compressData:!1,prettifyDataJson:!1,skipCreditConsumption:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,numVerticesPerFeature:5E4}}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_CommandSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(t,p,l,k,f,c,a){return t(null,{_initCommands:function(){a.isMobileDevice()||!c.modules.exportCommands?this.playerToolbar.notifyCommandButtonsAdded():k(this.dataProvider.getCommands&&this.dataProvider.getCommands(),function(b){this._createCommandButtons(b);this.playerToolbar&&this.playerToolbar.notifyCommandButtonsAdded()}.bind(this))},_lastNonPrintCommandId:null,_executeExportCallback:null,_executePrintCallback:null,_createCommandButtons:function(b){function d(m){var r=new l,n=new l;e.onCommandSettingsShown(r.promise);
e._saveVisualState();k(e._getPrintableContainer({commandId:m,showDialog:!0}),function(q){if(q){var u=q.getSelectedCommandId();u&&u!==f.PRINT&&(e._lastNonPrintCommandId=u);k(e._executeCommand(u,{printableContainer:q}),n.resolve,n.reject)}else k(e._applySavedVisualState(),function(){e.onCommandCanceled();n.resolve()})}).always(r.resolve);return n.promise}var e=this;if(b&&b.length){var g,h=b.filter(function(m){return m.id===f.PRINT?(g=m,!1):!0});h.length&&(this._executeExportCallback=function(){return d(e._lastNonPrintCommandId||
h[0].id)},this._createCommandButton(h[0],this._executeExportCallback));g&&(this._executePrintCallback=function(){return d(g.id)},this._createCommandButton(g,this._executePrintCallback))}},executeExport:function(){return this._executeExportCallback&&this._executeExportCallback()},executePrint:function(){return this._executePrintCallback&&this._executePrintCallback()},_createCommandButton:function(b,d){return this.playerToolbar&&this.playerToolbar.createCommandButton(b,d)},getCommandExportDialogSettings:function(){return this._getPrintDialogSettings()},
executeCommand:function(b,d){d=d||{};this._saveVisualState();var e=this._viewModel.dynamicReportInfo.fieldData;!this.isPlayerOnServer||b!==f.PDF&&b!==f.IMAGE||(d.exportSettings=p.mixin({},e.reportInfo&&e.reportInfo.exportSettings,d.exportSettings));var g=this;return k(this._getPrintableContainer({commandId:b,showDialog:!1,exportSettings:d.exportSettings}),function(h){return g._executeCommand(b,p.mixin({printableContainer:h},d))})},_executeCommand:function(b,d){function e(){k(g.dataProvider.executeCommand&&
g.dataProvider.executeCommand(b,g,d,function(n){g.onCommandProgress(n)}),m.resolve,m.reject)}var g=this,h=this._viewModel.dynamicReportInfo.fieldData;b!==f.PDF&&b!==f.DYNAMIC_HTML||!h.runReportTaskIDs||(d.creditsTaskIDs=h.runReportTaskIDs);var m=new l;this.isPlayerOnServer?e():setTimeout(e);var r=m.promise.then(function(n){return k(g._applySavedVisualState(),function(){return n})});this.onCommandStart(r,b);this._showWaiting(r,"executeCommand");r.always(function(){g.onCommandEnd(r)});return r},_visualStateMemo:null,
_saveVisualState:function(){this._visualStateMemo=this.getVisualState()},_applySavedVisualState:function(){var b=this;return this.setVisualState(this._visualStateMemo).then(function(){b._visualStateMemo=null})},onCommandSettingsShown:function(b){},onCommandCanceled:function(){},onCommandStart:function(b,d){},onCommandProgress:function(b){},onCommandEnd:function(b){}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerCommands":function(){define([],function(){var t={HTML:"createHTML",PDF:"createPDF",
PRINT:"print",DYNAMIC_HTML:"createDynamicHTML",IMAGE:"createImage",EXCEL:"exportToExcel",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1}};return t})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff","dojo/domReady!"],function(t){var p={},l=function(){var f=window,c=f.navigator.platform,a=f.navigator.userAgent,b={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!f.cordova&&
!f.phonegap),phonegap:!(!f.cordova&&!f.phonegap),electron:!1,nwjs:!1},d=f.screen.width,e=f.screen.height,g=a.match(/(Android);?[\s\/]+([\d.]+)?/),h=a.match(/(iPad).*OS\s([\d_]+)/),m=a.match(/(iPod)(.*OS\s([\d_]+))?/),r=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),n=0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/"),q=0<=a.indexOf("Edge/"),u=0<=a.indexOf("Gecko/")&&0<=a.indexOf("Firefox/"),w="Win32"===c,y=0<=a.toLowerCase().indexOf("electron"),C="undefined"!==typeof nw&&"undefined"!==typeof process&&"undefined"!==
typeof process.versions&&"undefined"!==typeof process.versions.nw;c="MacIntel"===c;var D="1024x1366 1366x1024 834x1194 1194x834 834x1112 1112x834 768x1024 1024x768".split(" ");!h&&c&&t("touch")&&0<=D.indexOf(d+"x"+e)&&((h=a.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),c=!1);b.ie=n;b.edge=q;b.firefox=u;g&&!w&&(b.os="android",b.osVersion=g[2],b.android=!0,b.androidChrome=0<=a.toLowerCase().indexOf("chrome"));if(h||r||m)b.os="ios",b.ios=!0;r&&!m&&(b.osVersion=r[2].replace(/_/g,"."),b.iphone=!0);
h&&(b.osVersion=h[2].replace(/_/g,"."),b.ipad=!0);m&&(b.osVersion=m[3]?m[3].replace(/_/g,"."):null,b.ipod=!0);b.ios&&b.osVersion&&0<=a.indexOf("Version/")&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=a.toLowerCase().split("version/")[1].split(" ")[0]);b.webView=!(!(r||h||m)||!a.match(/.*AppleWebKit(?!.*Safari)/i)&&!f.navigator.standalone)||f.matchMedia&&f.matchMedia("(display-mode: standalone)").matches;b.webview=b.webView;b.standalone=b.webView;b.desktop=!(b.ios||b.android)||y||C;b.desktop&&(b.electron=
y,b.nwjs=C,b.macos=c,b.windows=w,b.macos&&(b.os="macos"),b.windows&&(b.os="windows"));b.pixelRatio=f.devicePixelRatio||1;return b}();p.device=l;p.isMobileDevice=function(){return!l.desktop};p.isPCWithTouchScreen=function(){return l.desktop&&t("touch")};p.isLandscape=function(){return 90===Math.abs(window.orientation)};var k=null;p.isWebLayout=function(){if(!k){var f=document.createElement("div");f.style="visibility:hidden;height:1in;width:1in;position:absolute;left: -100%;top:-100%;";document.body.appendChild(f);
k=f.offsetHeight;f.parentNode.removeChild(f)}f=k;f*=7;var c=document.body.offsetWidth;if(c>=f)return!0;var a=document.body.offsetHeight;return c>=a&&Math.sqrt(c*c+a*a)>=f?!0:!1};p.press=l.desktop?"mousedown":"touchstart";p.release=l.desktop?"mouseup":"touchend";p.click=l.desktop?"click":"touchend";p.clickOrRelease=l.desktop?"click, mouseup":"touchend";p.move=l.desktop?"mousemove":"touchmove";return p})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_LogoSupport":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/when","../core/annotations/supportClasses/DynamicBehaviors","../core/supportClasses/images/DefaultLogoLoader"],function(t,p,l,k){return t(null,{_getReportLogo:function(f,c,a){function b(){return p(d._reportData.attachmentsStore&&d._reportData.attachmentsStore.getImages(),function(e){return p(e&&e[0]&&e[0].getThumbnail(),function(g){return g||d._getDefaultLogo(c,a)})})}var d=this;switch(f){case l.ATTACHMENTS:return b();default:return this._getDefaultLogo(c,a)}},_getDefaultLogo:function(f,
c){return this._reportData.customLogo||c||k.getDefaultLogo(this._viewModel.getDocumentDefaultStyles())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/annotations/supportClasses/DynamicBehaviors":function(){define([],function(){var t={ATTACHMENTS:"attachments",LOGO:"logo",toSupportedValue:function(p,l){return p===t.ATTACHMENTS?p:p||l?t.LOGO:null}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/DefaultLogoLoader":function(){define(["require","esri/dijit/geoenrichment/Deferred",
"esri/dijit/geoenrichment/utils/ColorUtil"],function(t,p,l){return{_identifyDefaultLogoBackground:function(k){return!k||l.isTransparent(k.backgroundColor)?"transparent":l.isLightColor(k.backgroundColor)?"light":"dark"},_loadLogo:function(k){var f=new p;t(["./"+k],function(c){f.resolve(c)});return f.promise},getDefaultLogo:function(k){switch(this._identifyDefaultLogoBackground(k)){case "light":return this._loadLogo("DefaultLogoGraphicReportDark");case "dark":return this._loadLogo("DefaultLogoGraphicReportLight");
default:return this._loadLogo("DefaultLogoGraphicReportGeneric")}}}})},"esri/dijit/geoenrichment/utils/ColorUtil":function(){define(["dojo/_base/Color","dojox/color/_base","dojox/color/Palette"],function(t,p,l){function k(c,a,b){return Math.round((c&255)*(1-b)+(a&255)*b)}var f={toCSSColor:function(c,a,b){"string"!==typeof c||/^0x/i.test(c)||(c=t.fromString(c));if(c instanceof t)return a||1===c.a?c.toHex():c.toCss(!0);if(null==c||isNaN(c))return b?f.toCSSColor(b,a):"#000000";c="00000"+Number(c).toString(16);
return"#"+c.substr(c.length-6)},toColor:function(c,a){return"object"===typeof c?(new t).setColor(c):t.fromString(f.toCSSColor(c,!1,a))},getCSSColorWithAlpha:function(c,a){return f.toCSSColor(f.getColorWithAlpha(c,a))},getColorWithAlpha:function(c,a){c=(new t).setColor(c);c.a=a;return c},transform:function(c,a){var b=new l;b.colors=[new t(c)];return b.transform({use:void 0!==a.dl?"hsl":"hsv",dh:a.dh||0,ds:a.ds||0,dv:a.dv||0,dl:a.dl||0}).colors[0]},generateAnalogousColorScheme:function(c,a,b){return l.generators.analogous({base:c,
high:a,low:b}).colors},applyColorHue:function(c,a){c=new p.Color(c);a=new p.Color(a);c=c.toHsl();var b=a.toHsl();c=p.fromHsl({h:c.h,s:0===c.s?0:0===b.s?c.s:b.s,l:b.l});c.a=a.a;return c},getColorParams:function(c){c=new p.Color(c);var a=c.toHsv();a.l=c.toHsl().l;return a},generateGradient:function(c,a){c=c.map(f.toRGBColor);var b=[];if(0===c.length-1||1===a){c=c[0];for(var d=0;d<a;d++)b.push(c);return b}var e=1/(a-1);for(d=0;d<a;d++)b.push(f.getGradientRGBColor(c,d*e));return b},getGradientRGBColor:function(c,
a,b){var d=c.length-1,e=1>d||0>=a?0:1<=a?d:-1;if(0<=e)return c[e];a*=d;e=Math.floor(a);e===d&&e--;return f.mixRGBColors(c[e],c[e+1],a-e,b)},mixRGBColors:function(c,a,b,d){1<b?b=1:0>b&&(b=0);var e=k(c,a,b),g=k(c>>8,a>>8,b),h=k(c>>16,a>>16,b);return((d?k(c>>24,a>>24,b):0)<<24)+(h<<16)+(g<<8)+e},toRGBColor:function(c,a){c=f.toCSSColor(c,!0,a);return parseInt("0x"+c.substr(1))},getContrastColor:function(c,a,b,d){return f.isLightColor(c,d)?f.toColor(a,"#000000"):f.toColor(b,"#FFFFFF")},getHighlightColor:function(c,
a){a=a||{};c=new p.Color(c);x=c.toHsl();if("darker"===a.method)x.l=50>x.l?x.l+30:x.l-20,0<x.s&&(x.s+=30);else{var b=a.saturation||100,d=a.luminosity1||75;a=a.luminosity2||50;0===x.s?x.l=50>x.l?x.l+30:x.l-20:(x.s=b,x.l=x.l<a?d:x.l>d?a:x.l-a>d-x.l?a:d)}a=p.fromHsl(x);a.a=c.a;return a},getLightness:function(c){c=f.toRGBColor(c);return(299*(c>>16&255)+587*(c>>8&255)+114*(c&255))/1E3},isLightColor:function(c,a){return f.getLightness(c)>=(void 0===a?128:a)},colorsEqual:function(c,a){c instanceof t||(c=
f.toColor(c));a instanceof t||(a=f.toColor(a));return c.a==a.a&&c.r==a.r&&c.g==a.g&&c.b==a.b},isTransparent:function(c){c=f.toCSSColor(c);return"rgba(0,0,0,0)"===c.toLowerCase().replace(/\s/g,"")},generateRandomColor:function(c){function a(){return b+Math.round((d-b)*Math.random())}c=c||{};var b=c.min||0,d=c.max||255,e=c.randomizeAlpha?a():1;return c.grayScheme?(c=a(),new t([c,c,c,e])):new t([a(),a(),a(),e])}};return f})},"dojox/color/_base":function(){define(["../main","dojo/_base/lang","dojo/_base/Color",
"dojo/colors"],function(t,p,l,k){t=p.getObject("color",!0,t);t.Color=l;t.blend=l.blendColors;t.fromRgb=l.fromRgb;t.fromHex=l.fromHex;t.fromArray=l.fromArray;t.fromString=l.fromString;t.greyscale=k.makeGrey;p.mixin(t,{fromCmy:function(f,c,a){p.isArray(f)?(c=f[1],a=f[2],f=f[0]):p.isObject(f)&&(c=f.m,a=f.y,f=f.c);return new l({r:Math.round(255*(1-f/100)),g:Math.round(255*(1-c/100)),b:Math.round(255*(1-a/100))})},fromCmyk:function(f,c,a,b){p.isArray(f)?(c=f[1],a=f[2],b=f[3],f=f[0]):p.isObject(f)&&(c=
f.m,a=f.y,b=f.b,f=f.c);b/=100;return new l({r:Math.round(255*(1-Math.min(1,f/100*(1-b)+b))),g:Math.round(255*(1-Math.min(1,c/100*(1-b)+b))),b:Math.round(255*(1-Math.min(1,a/100*(1-b)+b)))})},fromHsl:function(f,c,a){p.isArray(f)?(c=f[1],a=f[2],f=f[0]):p.isObject(f)&&(c=f.s,a=f.l,f=f.h);c/=100;for(a/=100;0>f;)f+=360;for(;360<=f;)f-=360;if(120>f){var b=(120-f)/60;var d=f/60;f=0}else 240>f?(b=0,d=(240-f)/60,f=(f-120)/60):(b=(f-240)/60,d=0,f=(360-f)/60);b=2*c*Math.min(b,1)+(1-c);d=2*c*Math.min(d,1)+(1-
c);f=2*c*Math.min(f,1)+(1-c);.5>a?(b*=a,d*=a,f*=a):(b=(1-a)*b+2*a-1,d=(1-a)*d+2*a-1,f=(1-a)*f+2*a-1);return new l({r:Math.round(255*b),g:Math.round(255*d),b:Math.round(255*f)})}});t.fromHsv=function(f,c,a){p.isArray(f)?(c=f[1],a=f[2],f=f[0]):p.isObject(f)&&(c=f.s,a=f.v,f=f.h);360==f&&(f=0);c/=100;a/=100;var b,d;if(0==c)var e=d=b=a;else{var g=f/60;f=Math.floor(g);var h=g-f;g=a*(1-c);var m=a*(1-c*h);c=a*(1-c*(1-h));switch(f){case 0:b=a;e=c;d=g;break;case 1:b=m;e=a;d=g;break;case 2:b=g;e=a;d=c;break;
case 3:b=g;e=m;d=a;break;case 4:b=c;e=g;d=a;break;case 5:b=a,e=g,d=m}}return new l({r:Math.round(255*b),g:Math.round(255*e),b:Math.round(255*d)})};p.extend(l,{toCmy:function(){return{c:Math.round(100*(1-this.r/255)),m:Math.round(100*(1-this.g/255)),y:Math.round(100*(1-this.b/255))}},toCmyk:function(){var f=this.r/255,c=this.g/255,a=this.b/255;var b=Math.min(1-f,1-c,1-a);return{c:Math.round((1-f-b)/(1-b)*100),m:Math.round((1-c-b)/(1-b)*100),y:Math.round((1-a-b)/(1-b)*100),b:Math.round(100*b)}},toHsl:function(){var f=
this.r/255,c=this.g/255,a=this.b/255,b=Math.min(f,a,c),d=Math.max(f,c,a),e=d-b,g=0,h=0;b=(b+d)/2;0<b&&1>b&&(h=e/(.5>b?2*b:2-2*b));0<e&&(d==f&&d!=c&&(g+=(c-a)/e),d==c&&d!=a&&(g+=2+(a-f)/e),d==a&&d!=f&&(g+=4+(f-c)/e),g*=60);return{h:g,s:Math.round(100*h),l:Math.round(100*b)}},toHsv:function(){var f=this.r/255,c=this.g/255,a=this.b/255,b=Math.max(f,c,a),d=b-Math.min(f,a,c),e=null,g=0==b?0:d/b;0==g?e=0:(e=f==b?60*(c-a)/d:c==b?120+60*(a-f)/d:240+60*(f-c)/d,0>e&&(e+=360));return{h:e,s:Math.round(100*g),
v:Math.round(100*b)}}});return t})},"dojox/main":function(){define(["dojo/_base/kernel"],function(t){return t.dojox})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(t,p,l,k){var f={};p.setObject("dojo.colors",f);var c=function(b,d,e){0>e&&++e;1<e&&--e;var g=6*e;return 1>g?b+(d-b)*g:1>2*e?d:2>3*e?b+(d-b)*(2/3-e)*6:b};t.colorFromRgb=l.fromRgb=function(b,d){var e=b.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(e){b=e[2].split(/\s*,\s*/);
var g=b.length;e=e[1];if("rgb"==e&&3==g||"rgba"==e&&4==g)return e=b[0],"%"==e.charAt(e.length-1)?(e=k.map(b,function(r){return 2.56*parseFloat(r)}),4==g&&(e[3]=b[3]),l.fromArray(e,d)):l.fromArray(b,d);if("hsl"==e&&3==g||"hsla"==e&&4==g){e=(parseFloat(b[0])%360+360)%360/360;var h=parseFloat(b[1])/100,m=parseFloat(b[2])/100;h=.5>=m?m*(h+1):m+h-m*h;m=2*m-h;e=[256*c(m,h,e+1/3),256*c(m,h,e),256*c(m,h,e-1/3),1];4==g&&(e[3]=b[3]);return l.fromArray(e,d)}}return null};var a=function(b,d,e){b=Number(b);return isNaN(b)?
e:b<d?d:b>e?e:b};l.prototype.sanitize=function(){this.r=Math.round(a(this.r,0,255));this.g=Math.round(a(this.g,0,255));this.b=Math.round(a(this.b,0,255));this.a=a(this.a,0,1);return this};f.makeGrey=l.makeGrey=function(b,d){return l.fromArray([b,b,b,d])};p.mixin(l.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],
cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],
darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,
92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,
153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,
245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,
82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return l})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(t,p,l){function k(d,e,g){var h=new l.Palette;h.colors=
[];p.forEach(d.colors,function(m){h.colors.push(new l.Color({r:Math.min(255,Math.max(0,"dr"==e?m.r+g:m.r)),g:Math.min(255,Math.max(0,"dg"==e?m.g+g:m.g)),b:Math.min(255,Math.max(0,"db"==e?m.b+g:m.b)),a:Math.min(1,Math.max(0,"da"==e?m.a+g:m.a))}))});return h}function f(d,e,g){var h=new l.Palette;h.colors=[];p.forEach(d.colors,function(m){m=m.toCmy();h.colors.push(l.fromCmy(Math.min(100,Math.max(0,"dc"==e?m.c+g:m.c)),Math.min(100,Math.max(0,"dm"==e?m.m+g:m.m)),Math.min(100,Math.max(0,"dy"==e?m.y+g:m.y))))});
return h}function c(d,e,g){var h=new l.Palette;h.colors=[];p.forEach(d.colors,function(m){m=m.toCmyk();h.colors.push(l.fromCmyk(Math.min(100,Math.max(0,"dc"==e?m.c+g:m.c)),Math.min(100,Math.max(0,"dm"==e?m.m+g:m.m)),Math.min(100,Math.max(0,"dy"==e?m.y+g:m.y)),Math.min(100,Math.max(0,"dk"==e?m.b+g:m.b))))});return h}function a(d,e,g){var h=new l.Palette;h.colors=[];p.forEach(d.colors,function(m){m=m.toHsl();h.colors.push(l.fromHsl(("dh"==e?m.h+g:m.h)%360,Math.min(100,Math.max(0,"ds"==e?m.s+g:m.s)),
Math.min(100,Math.max(0,"dl"==e?m.l+g:m.l))))});return h}function b(d,e,g){var h=new l.Palette;h.colors=[];p.forEach(d.colors,function(m){m=m.toHsv();h.colors.push(l.fromHsv(("dh"==e?m.h+g:m.h)%360,Math.min(100,Math.max(0,"ds"==e?m.s+g:m.s)),Math.min(100,Math.max(0,"dv"==e?m.v+g:m.v))))});return h}l.Palette=function(d){this.colors=[];d instanceof l.Palette?this.colors=d.colors.slice(0):d instanceof l.Color?this.colors=[null,null,d,null,null]:t.isArray(d)?this.colors=p.map(d.slice(0),function(e){return t.isString(e)?
new l.Color(e):e}):t.isString(d)&&(this.colors=[null,null,new l.Color(d),null,null])};t.extend(l.Palette,{transform:function(d){var e=k;if(d.use){var g=d.use.toLowerCase();0==g.indexOf("hs")?e="l"==g.charAt(2)?a:b:0==g.indexOf("cmy")&&(e="k"==g.charAt(3)?c:f)}else if("dc"in d||"dm"in d||"dy"in d)e="dk"in d?c:f;else if("dh"in d||"ds"in d)e="dv"in d?b:a;g=this;for(var h in d)"use"!=h&&(g=e(g,h,d[h]));return g},clone:function(){return new l.Palette(this)}});t.mixin(l.Palette,{generators:{analogous:function(d){var e=
d.high||60,g=d.low||18;d=(t.isString(d.base)?new l.Color(d.base):d.base).toHsv();var h=Math.max(10,95>=d.s?d.s+5:100-(d.s-95)),m=92<=d.v?d.v-9:Math.max(d.v+9,20),r=90>=d.v?Math.max(d.v+5,20):95+Math.ceil((d.v-90)/2),n=[h,1<d.s?d.s-1:21-d.s,d.s,h,h],q=[m,r,d.v,m,r];return new l.Palette(p.map([(d.h+g+360)%360,(d.h+Math.round(g/2)+360)%360,d.h,(d.h-Math.round(e/2)+360)%360,(d.h-e+360)%360],function(u,w){return l.fromHsv(u,n[w],q[w])}))},monochromatic:function(d){d=t.isString(d.base)?new l.Color(d.base):
d.base;var e=d.toHsv(),g=9<e.s-30?e.s-30:e.s+30,h=e.s,m=20<e.v-20?e.v-20:e.v+60,r=20<e.v-50?e.v-50:e.v+30;return new l.Palette([l.fromHsv(e.h,g,100-.8*(100-e.v)),l.fromHsv(e.h,h,r),d,l.fromHsv(e.h,g,r),l.fromHsv(e.h,h,m)])},triadic:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var e=d.toHsv(),g=(e.h-157+360)%360,h=90<e.s?e.s-10:e.s+10,m=95<e.s?e.s-5:e.s+5,r=20<e.v-20?e.v-20:e.v+20,n=20<e.v-30?e.v-30:e.v+30,q=70<e.v-30?e.v-30:e.v+30;return new l.Palette([l.fromHsv((e.h+57+360)%360,20<
e.s?e.s-10:e.s+10,e.v),l.fromHsv(e.h,h,n),d,l.fromHsv(g,h,r),l.fromHsv(g,m,q)])},complementary:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var e=d.toHsv(),g=360>2*e.h+137?2*e.h+137:Math.floor(e.h/2)-137,h=100-.9*(100-e.s),m=Math.min(100,e.s+20),r=20<e.v?e.v-30:e.v+30;return new l.Palette([l.fromHsv(e.h,Math.max(e.s-10,0),Math.min(100,e.v+30)),l.fromHsv(e.h,h,r),d,l.fromHsv(g,m,r),l.fromHsv(g,e.s,e.v)])},splitComplementary:function(d){var e=t.isString(d.base)?new l.Color(d.base):d.base,
g=d.da||30;d=e.toHsv();var h=360>2*d.h+137?2*d.h+137:Math.floor(d.h/2)-137,m=(h-g+360)%360;g=(h+g)%360;h=100-.9*(100-d.s);var r=Math.min(100,d.s+20),n=20<d.v?d.v-30:d.v+30;return new l.Palette([l.fromHsv(m,Math.max(d.s-10,0),Math.min(100,d.v+30)),l.fromHsv(m,h,n),e,l.fromHsv(g,r,n),l.fromHsv(g,d.s,d.v)])},compound:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var e=d.toHsv(),g=360>2*e.h+18?2*e.h+18:Math.floor(e.h/2)-18,h=360>2*e.h+120?2*e.h+120:Math.floor(e.h/2)-120,m=360>2*e.h+99?2*
e.h+99:Math.floor(e.h/2)-99,r=80<e.s-10?e.s-10:e.s+10,n=10<e.s-25?e.s-25:e.s+25,q=80<e.v-20?e.v-20:e.v+20,u=Math.max(e.v,20);return new l.Palette([l.fromHsv(g,10<e.s-40?e.s-40:e.s+40,10<e.v-40?e.v-40:e.v+40),l.fromHsv(g,r,q),d,l.fromHsv(h,n,u),l.fromHsv(m,r,q)])},shades:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var e=d.toHsv(),g=100==e.s&&0==e.v?0:e.s,h=20<=e.v-25?e.v-25:e.v+55,m=20<=e.v-75?e.v-75:e.v+5,r=Math.max(e.v-10,20);return new l.Palette([new l.fromHsv(e.h,g,20<e.v-50?e.v-
50:e.v+30),new l.fromHsv(e.h,g,h),d,new l.fromHsv(e.h,g,m),new l.fromHsv(e.h,g,r)])}},generate:function(d,e){if(t.isFunction(e))return e({base:d});if(l.Palette.generators[e])return l.Palette.generators[e]({base:d});throw Error("dojox.color.Palette.generate: the specified generator ('"+e+"') does not exist.");}});return l.Palette})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_MapSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],
function(t,p,l,k){return p(null,{_initBuilderPromise:null,_mapBuilder:null,_initMapBuilder:function(){var f=this;if(this._initBuilderPromise)return this._initBuilderPromise;var c=new l;t([f.isPlayerOnServer?"../core/supportClasses/map/ServerMapBuilder":"../core/supportClasses/map/MapBuilder"],function(a){f._mapBuilder=new a({getPlayerZoomScale:function(b){var d=f.getCurrentReportContainer();return d&&d.getPanelZoomScale?d.getPanelZoomScale(b):d&&d.getZoomInfo&&d.getZoomInfo().scale}});c.resolve()});
return this._initBuilderPromise=c.promise},collectMaps:function(f){return this._mapBuilder?f&&f.allAreas?this._mapBuilder.collectAllAreasMaps():this._mapBuilder.collectAreaMaps(this.getCurrentAnalysisAreaIndex()):[]},_resetMapBuilder:function(){this._mapBuilder&&this._mapBuilder.reset()},_createMap:function(f,c){c=c||{};return k(this._initMapBuilder(),function(){this._mapBuilder.setFallbackMapImageInfos(this._reportData.mapImageInfos);return this._mapBuilder.createMap(f,{reportData:this._reportData,
areaIndex:c.areaIndex,defaultBasemapId:this._getDefaultBasemapId()||c.defaultBasemapId,defaultBasemapName:c.defaultBasemapName,webMapId:c.webMapId,webMapName:c.webMapName,additionalLayerInfos:c.additionalLayerInfos,calculatorFieldName:c.calculatorFieldName,pinSymbolJson:c.pinSymbolJson,areaSymbolJsons:c.areaSymbolJsons,areaSymbolRamp:c.areaSymbolRamp,locatorPointsControllers:c.locatorPointsControllers,stdPolygonsControllers:c.stdPolygonsControllers,thisAreasHighlightController:c.thisAreasHighlightController,
legendController:c.legendController,fieldData:this._viewModel.dynamicReportInfo.fieldData,geClient:this._viewModel.dynamicReportInfo.geClient,countryID:this._viewModel.dynamicReportInfo.countryID,hierarchy:this._viewModel.dynamicReportInfo.hierarchy,waitForLoad:c.waitForLoad,extent:c.extent,attachmentsStore:this._viewModel.dynamicReportInfo.attachmentsStore,onPanContainer:function(a,b){}})}.bind(this))},_getDefaultBasemapId:function(){return null}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PageNavigationSupport":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-geometry dojo/dom-style ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e){e=e.geoenrichment.dijit.ReportPlayer.ReportPlayer;return t(null,{_currentPageIndex:null,_initPageNavigationControls:function(){var g=this;p(this.prevPageButton,"click",function(){g._showPrevPage()});p(this.nextPageButton,"click",function(){g._showNextPage()});b.hide(this.sidePageNavigator);d.setTooltipToNode(this.prevPageButton,e.previousPage);d.setTooltipToNode(this.nextPageButton,e.nextPage)},showPageAt:function(g){this.viewMode!==a.FULL_PAGES||this.isPlayerOnServer||
(g=Math.max(0,g),this._currentPageIndex=g=Math.min(this.getCurrentReportContainer().getNumberOfPages()-1,g),this.getCurrentReportContainer().showPageAt(g),this._updatePageNavigator())},_updatePageNavigator:function(){if(this.playerToolbar){var g=this.getCurrentReportContainer()&&this.getCurrentReportContainer().getNumberOfPages&&this.viewMode===a.FULL_PAGES;this.playerToolbar.setPageControlsVisible(g);if(g){g=this.getCurrentReportContainer().getNumberOfPages();var h=1<g;h&&this._provideSideNavigationNodes();
b.display(this.sidePageNavigator,h);h&&(l[0===this._currentPageIndex?"add":"remove"](this.prevPageButton,"disabled"),l[this._currentPageIndex===g-1?"add":"remove"](this.nextPageButton,"disabled"),this.resizeMode===c.FIT_WINDOW&&(h=k.position(this.getCurrentReportContainer().stackContainer),f.set(this.sidePageNavigator,"left",Math.min(h.x+h.w+20,document.body.clientWidth-70)+"px"),f.set(this.sidePageNavigator,"top",Math.max(60,h.y+10)+"px")));this.playerToolbar.updatePageSelect(g,this._currentPageIndex)}else b.hide(this.sidePageNavigator)}},
_provideSideNavigationNodes:function(){var g=this;this.sidePageNavigator||(this.sidePageNavigator=b.create("div",{"class":"reportPlayer_sidePageNavigator"},this.domNode),this.prevPageButton=b.create("div",{"class":"reportPlayer_paginationArrowUp"},this.sidePageNavigator),this.nextPageButton=b.create("div",{"class":"reportPlayer_paginationArrowDown"},this.sidePageNavigator),p(this.prevPageButton,"click",function(){g._showPrevPage()}),p(this.nextPageButton,"click",function(){g._showNextPage()}),d.setTooltipToNode(this.prevPageButton,
e.previousPage),d.setTooltipToNode(this.nextPageButton,e.nextPage))},_showPrevPage:function(){0!==this._currentPageIndex&&(this._currentPageIndex--,this.showPageAt(this._currentPageIndex))},_showNextPage:function(){this._currentPageIndex!==this.getCurrentReportContainer().getNumberOfPages()-1&&(this._currentPageIndex++,this.showPageAt(this._currentPageIndex))}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes":function(){define([],function(){var t={AUTO:"auto",FIT_WINDOW:"fitWindow",MANUAL:"manual",
isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.FIT_WINDOW}};return t})},"esri/dijit/geoenrichment/ReportPlayer/PlayerViewModes":function(){define([],function(){var t={FULL_PAGES:"fullPages",PANELS_IN_SLIDES:"panelsInSlides",PANELS_IN_STACK:"panelsInStack",PANELS_IN_STACK_ALL:"panelsInStackAll",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.FULL_PAGES},
isMobileSupported:function(p){return p===t.PANELS_IN_SLIDES||p===t.PANELS_IN_STACK||p===t.PANELS_IN_STACK_ALL},isStackLike:function(p){return p===t.PANELS_IN_STACK||p===t.PANELS_IN_STACK_ALL},isStack:function(p){return p===t.PANELS_IN_STACK||p===t.PANELS_IN_STACK_ALL}};return t})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(t,
p,l,k,f,c,a){function b(n,q){Array.isArray(n)?n.forEach(q):q(n);return n}function d(n,q,u){var w=!1,y=function(C){!C||u&&!u(C)||(C.parentNode===q?w=!0:y(C.parentNode))};y(n);return w}function e(n){return!h.isHidden(n)&&"none"!==f.get(n,"display")&&!p.contains(n,"dijitHidden")}function g(){m||(m=l.create("div",{"class":"esriGEOffscreen"},document.body));return m}var h={isHidden:function(n){return n&&p.contains(n,"esriGEHidden")},hasVisibleChildren:function(n){if(!n||!n.children.length)return!1;for(var q=
0;q<n.children.length;q++)if(!h.isHidden(n.children[q]))return!0;return!1},hide:function(n){return h.addTag(n,"esriGEHidden")},show:function(n){return h.removeTag(n,"esriGEHidden")},display:function(n,q){return h[q?"show":"hide"](n)},addTag:function(n,q){return b(n,function(u){u&&p.add(u,q)})},removeTag:function(n,q){return b(n,function(u){u&&p.remove(u,q)})},getChildIndex:function(n,q){if(!n||!n.children||!q)return-1;for(var u=0;u<n.children.length;u++)if(n.children[u]===q)return u;return-1},isChildOf:function(n,
q){return d(n,q)},isNodeInLayout:function(n){return d(n,document.body,function(q){return e(q)})},isNodeVisible:function(n){return d(n,document.body,function(q){return e(q)&&"hidden"!==f.get(q,"visibility")})},isNodeOnscreen:function(n){return d(n,document.body,function(q){return!p.contains(q,"esriGEOffscreen")})},enableContent:function(n,q,u){if(n){u=u||{};var w=n.children.length-1;if(!(0>w||(w=n.children[w],p.contains(w,"esriGEDisabledContent")||(w=null),w&&n.removeChild(w),q)))return w=l.create("div",
{"class":"esriGEDisabledContent"+(u.overlayClass?" "+u.overlayClass:"")},n),u.textContent&&(w.textContent=u.textContent),!1!==u.fitParent&&(n=k[u.marginBox?"getMarginBox":"getContentBox"](n).h)&&f.set(w,{height:n+"px",marginTop:-n+"px"}),w}},enableContentAbsolute:function(n,q,u){if(n){u=u||{};var w=f.get(n,"position");"relative"===w||"absolute"===w||q||f.set(n,"position","relative");return h.enableContent(n,q,{overlayClass:"esriGEAbsoluteStretched"+(u.overlayClass?" "+u.overlayClass:"")+(u.isTransparent?
" esriGEDisabledContentTransparent":""),fitParent:!1,textContent:u.textContent})}}},m;h.hideNodeInBackground=function(n,q){if(n){if(n._hideNodeInBackgroundUndoController)return n._hideNodeInBackgroundUndoController;var u=l.create("div",null,n,"after"),w=l.create("div",{style:"position: absolute; left: 0px; top: 0px;"},g());l.place(n,w);q="DomUtil.hideNodeInBackground"+(q?"."+q:"");t.set(u,"_bg_memo_node",q);t.set(w,"_bg_temp_node",q);q={remove:function(){u&&(u.parentNode&&l.place(n,u,"replace"),l.destroy(u),
l.destroy(w),m.children.length||(l.destroy(m),m=null),u=null,delete n._hideNodeInBackgroundUndoController)}};return n._hideNodeInBackgroundUndoController=q}};h.showNodeFromBackground=function(n){n&&n._hideNodeInBackgroundUndoController&&n._hideNodeInBackgroundUndoController.remove()};h.noTransformPosition=function(n){function q(C){for(var D={x:0,y:0};C.offsetParent;)D.x+=C.offsetLeft,D.y+=C.offsetTop,C=C.offsetParent,D.x+=f.get(C,"borderLeftWidth"),D.y+=f.get(C,"borderTopWidth");return D}function u(C){return f.get(C,
"width")+f.get(C,"paddingLeft")+f.get(C,"paddingRight")+f.get(C,"borderLeftWidth")+f.get(C,"borderRightWidth")}function w(C){return f.get(C,"height")+f.get(C,"paddingTop")+f.get(C,"paddingBottom")+f.get(C,"borderTopWidth")+f.get(C,"borderBottomWidth")}if(n){if(n instanceof SVGElement&&n.getBBox){var y=(y=n.ownerSVGElement&&n.ownerSVGElement.parentNode)&&q(y);n=n.getBBox();return{x:(n.x||0)+y.x,y:(n.y||0)+y.y,w:n.width||0,h:n.height||0}}y=q(n);return{x:y.x,y:y.y,w:u(n),h:w(n)}}};h.getNodesBox=function(n,
q){if(!n||!n.length)return null;q=q||{};for(var u=1E6,w=-1E6,y=1E6,C=-1E6,D=0;D<n.length;D++){var G=n[D];G=q.ignoreTransformation?h.noTransformPosition(G):k.position(G);u=Math.min(u,G.x);y=Math.min(y,G.y);w=Math.max(w,G.x+G.w);C=Math.max(C,G.y+G.h)}n={x:u,y:y,w:w-u,h:C-y};q.originNode&&(q=q.ignoreTransformation?h.noTransformPosition(q.originNode):k.position(q.originNode),n.x-=q.x,n.y-=q.y);return n};h.traverseChildren=function(n,q){function u(w){if(w&&w.children)for(var y=0;y<w.children.length;y++){var C=
w.children[y];if(q(C))break;u(C)}}u(n)};h.scrollToListNode=function(n,q,u){var w=q.offsetTop+q.clientHeight,y=w-(n.scrollTop+n.clientHeight);0<y&&(n.scrollTop+=y);u&&(w-=q.clientHeight-u.offsetTop,y=n.scrollTop-w,0<y&&(n.scrollTop-=y))};var r;h.getScrollbarSize=function(){if(!r){var n=l.create("div",null,document.body);n.style.width="100px";n.style.height="100px";n.style.overflow="scroll";n.style.position="absolute";n.style.top="9999px";r={w:n.offsetWidth-n.clientWidth,h:n.offsetHeight-n.clientHeight};
l.destroy(n)}return r};h.hasScrollbars=function(n){var q=f.getComputedStyle(n);return{w:"scroll"===q.overflowX||n.offsetWidth>n.clientWidth&&"auto"===q.overflowX,h:"scroll"===q.overflowY||n.offsetHeight>n.clientHeight&&"auto"===q.overflowY}};h.getMeasureContext=function(n){n=n||{};n.style=n.style?n.style+" ":"";n.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:l.create("div",n,document.body),measureText:function(q){this.div.innerHTML=q;q=k.getMarginBox(this.div);delete q.l;
delete q.t;return q},destroy:function(){l.destroy(this.div)}}};h.getTextBox=function(n,q){q=h.getMeasureContext(q);n=q.measureText(n);q.destroy();return n};h.getNodeFontFamily=function(n){return(n=f.get(n,"fontFamily")||f.getComputedStyle(n).fontFamily)&&n.replace(/'|"/g,"").split(",")[0]};h.getNodeFontSize=function(n){return f.toPixelValue(n,f.get(n,"fontSize"))};h.stealFocus=function(){var n=new a;try{var q=l.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});l.place(q,
document.body);q.select();l.destroy(q)}catch(u){}setTimeout(n.resolve,0);return n.promise};h.getWindowBox=function(){for(var n=[],q=0,u=document.body.children.length;q<u;q++){var w=document.body.children[q];h.isHidden(w)||(h.hide(w),n.push(w))}q={w:document.body.clientWidth,h:document.body.clientHeight};n.forEach(function(y){h.show(y)});return q};h.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};h.setAttribute=function(n,q,u){return 2===arguments.length?t.set(n,q):t.set(n,
q,u)};h.getAttribute=function(n,q,u){return 2===arguments.length?t.get(n,q):t.get(n,q,u)};h.addClass=function(n,q){p.add(n,q)};h.removeClass=function(n,q){p.remove(n,q||"")};h.toggleClass=function(n,q,u){p[u?"add":"remove"](n,q||"")};h.replaceClass=function(n,q,u){return p.replace(n,q,u)};h.containsClass=function(n,q){return p.contains(n,q)};h.getStyle=function(n,q){return f.get(n,q)};h.setStyle=function(n,q,u){return 2===arguments.length?f.set(n,q):f.set(n,q,u)};h.setFullTextStyle=function(n,q){q.fontSize&&
(q=Object.assign({},q),q.fontSize+="px");h.setStyle(n,q)};h.getStylePixelValue=function(n,q){n=h.getStyle(n,q);return"number"===typeof n?n:parseFloat(n)||0};h.getComputedStyle=function(n){return n&&1===n.nodeType&&window.getComputedStyle(n)};h.position=function(n,q){return k.position(n,q)};h.getMarginBox=function(n,q){return k.getMarginBox(n,q)};h.getMarginExtents=function(n,q){return k.getMarginExtents(n,q)};h.getContentBox=function(n,q){return k.getContentBox(n,q)};h.getPadBorderExtents=function(n,
q){return k.getPadBorderExtents(n,q)};h.getPadExtents=function(n,q){return k.getPadExtents(n,q)};h.getBorderExtents=function(n,q){return k.getBorderExtents(n,q)};h.docScroll=function(){return k.docScroll()};h.create=function(n,q,u,w){return l.create(n,q,u,w)};h.toDom=function(n){return l.toDom(n)};h.place=function(n,q,u){return l.place(n,q,u)};h.empty=function(n){return l.empty(n)};h.destroy=function(n){return l.destroy(n)};h.query=function(n,q){n=c(n,q);q=[];for(var u=0,w=n.length;u<w;u++)q.push(n[u]);
return q};return h})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/domReady!".split(" "),function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u){function w(){}var y={},C=t(e._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,
addCustomClasses:function(E){E&&(l.add(this.domNode,E),this._customClasses=E)},setCustomStyle:function(E){this._customStyle=E},show:function(E,I,L,M,O,Q,T){if(!this.aroundNode||this.aroundNode!==I||this.containerNode.innerHTML!=E)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof E?this.containerNode.innerHTML=E:(this.containerNode.innerHTML="",k.place(E.domNode||E,this.containerNode));O&&this.set("textDir",O);this.containerNode.align=M?"right":"left";var X=g.around(this.domNode,
I,L&&L.length?L:e.defaultPosition,!M,p.hitch(this,"orient")),U=X.aroundNodePos;"M"==X.corner.charAt(0)&&"M"==X.aroundCorner.charAt(0)?(this.connectorNode.style.top=U.y+(U.h-this.connectorNode.offsetHeight>>1)-X.y+"px",this.connectorNode.style.left=""):"M"==X.corner.charAt(1)&&"M"==X.aroundCorner.charAt(1)?this.connectorNode.style.left=U.x+(U.w-this.connectorNode.offsetWidth>>1)-X.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity=
"0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=I;this.onMouseEnter=Q||w;this.onMouseLeave=T||w}},orient:function(E,I,L,M,O){this.connectorNode.style.top="";var Q=M.h;M=M.w;E.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=I+"-"+L];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var T=f.position(this.domNode);T.w=Math.ceil(T.w);if(d("ie")||d("trident"))T.w+=2;f.setMarginBox(this.domNode,{w:Math.min(Math.max(M,1),T.w)});"B"==L.charAt(0)&&"B"==I.charAt(0)?(E=f.position(E),I=this.connectorNode.offsetHeight,E.h>Q?(this.connectorNode.style.top=Q-(O.h+I>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=
Math.min(Math.max(O.h/2-I/2,0),E.h-I)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,T.w-M)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var E=this.domNode.clientWidth,I=this.domNode.clientHeight,L=f.position(this.domNode),M=f.position(this.connectorNode),O=f.position(this.containerNode);M.x-=L.x;M.y-=L.y;O.x-=L.x;O.y-=L.y;O.x+=1;O.y+=1;O.w-=2;O.h-=2;this._surface&&
this._surface.destroy();this._surfaceContainer&&k.destroy(this._surfaceContainer);L=this._surfaceContainer=k.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");L.style.pointerEvents="none";E=this._surface=h.createSurface(L,E,I);I=[{x:O.x,y:O.y},{x:O.x+O.w,y:O.y},{x:O.x+O.w,y:O.y+O.h},{x:O.x,y:O.y+O.h},{x:O.x,y:O.y}];L=M.x+M.w/2;M=M.y+M.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":O=[{x:L-5,y:O.y},{x:L,y:M},{x:L+5,y:O.y}];I.splice.apply(I,[1,0].concat(O));
break;case "ML-MR":case "BL-BR":O=[{x:O.x+O.w,y:M-5},{x:L,y:M},{x:O.x+O.w,y:M+5}];I.splice.apply(I,[2,0].concat(O));break;case "TM-BM":case "TL-BL":case "TR-BR":O=[{x:L+5,y:O.y+O.h},{x:L,y:M},{x:L-5,y:O.y+O.h}];I.splice.apply(I,[3,0].concat(O));break;case "MR-ML":case "BR-BL":O=[{x:O.x,y:M+5},{x:L,y:M},{x:O.x,y:M-5}],I.splice.apply(I,[4,0].concat(O))}O=E.createPolyline(I);M="function"===typeof this._customStyle?this._customStyle():this._customStyle;O.setFill(M&&M.backgroundColor||"white").setStroke({color:"#d3d3d3",
width:1,join:"round"});M&&M.color&&(this.containerNode.style.color=M.color)}}}),D={show:function(E,I,L,M,O){"string"===typeof L&&(L=[L]);L=L&&L.map(function(T){return{after:"after-centered",before:"before-centered"}[T]||T});var Q=new C;O&&Q.setCustomStyle(O);Q.addCustomClasses(M);Q.show(E,I,L);return Q}};y.setTooltipToNode=function(E,I,L){function M(){!O&&y.showTooltipForNode(E,I,L)}L=L||{};if(E&&!u.isPlayerOnServer&&(y.hideTooltipForNode(E),E.__setTooltipToNodeMouseEnterHandle&&E.__setTooltipToNodeMouseEnterHandle.remove(),
I)){var O=!1;m.isMobileDevice()?E.__setTooltipToNodeMouseEnterHandle=r.addNoDragClickHandler(E,M):E.__setTooltipToNodeMouseEnterHandle=a(E,b.enter,M);L.showTooltip&&M();return{remove:function(){I=null;y.hideTooltipForNode(E)},suspend:function(){y.hideTooltipForNode(E);O=!0},resume:function(){O=!1},refresh:function(){E._shownTooltip&&M()}}}};y.showTooltipForNode=function(E,I,L){function M(){y.hideTooltipForNode(E);var X=Array.isArray(L.classes)?L.classes.join(" "):L.classes;X=(X||"")+" esriGETooltip";
L.notRestricted&&(X+=" notRestricted");E._shownTooltip=Q=D.show(O,E,L.position||["after","before"],X,L.style)}L=L||{};if(E&&!u.isPlayerOnServer){E.title="";y.hideTooltipForNode(E);var O="function"==typeof I?I():I;if(O){"string"===typeof O&&L.textAlign&&(O="\x3cdiv class\x3d'"+("start"===L.textAlign?"esriGEStart":"end"===L.textAlign?"esriGEEnd":"")+"'\x3e"+O+"\x3c/div\x3e");l.add(E,"esriGESimpleTextTooltip");var Q;M();var T=y.hideTooltipForNode.bind(y,E);I=function(X,U){var aa=setInterval(X,U);Q.own({remove:function(){clearInterval(aa)}})};
m.isMobileDevice()?Q.own(a(document.body,"touchstart",function(X){!q.isMouseOver(E,{event:X})&&T()})):Q.own(a.once(E,b.leave,function(){!L.stayOnHover&&T()}));L.ignoreNodeRemoval||I(function(){!n.isNodeInLayout(E)&&T()},300);m.isMobileDevice()||(I(function(){L.stayOnHover&&q.isMouseOver(Q.domNode)||q.isMouseOver(E)||T()},300),Q.own(a(E,"click",function(X){L.hideOnClick?T():!E._shownTooltip&&M()})),L.stayOnHover&&Q.own(a(Q.domNode,b.leave,T)));return E._shownTooltip}}};y.hideTooltipForNode=function(E){E&&
E._shownTooltip&&(l.remove(E,"esriGESimpleTextTooltip"),E._shownTooltip.destroy(),delete E._shownTooltip)};var G,F;y.autoTooltip=function(E){u.isPlayerOnServer||a(E,".TrimWithEllipses:mouseover",function(){if(this!==G&&this.offsetWidth<this.scrollWidth){var I=function(){G=null;F&&(F.tooltip.destroy(),F.mouseOutH.remove(),F.mouseMoveH.remove(),F=null)};I();G=this;F={tooltip:D.show(G.textContent,G,["above","below"]),mouseOutH:a.once(G,"mouseout, mousedown, touchstart",I),mouseMoveH:a(document.body,
"mousemove",function(){q.isMouseOver(G)||I()})}}})};y.showClosableTooltip=function(E){var I="rtl"===document.dir&&"after"!==E.position||"rtl"!==document.dir&&"after"===E.position,L=B(E.message,E.tooltipClass,E.position,I);return z(L,E.node,E.timeout,I,E.onClosed)};y.removeClosableTooltip=function(E){E&&E._removeFunc&&E._removeFunc()};var B=function(E,I,L,M){function O(){var aa=k.create("div",{"class":"esriGEClosableTooltipTip"},T);l.add(aa,M?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}
function Q(){X=k.create("div",{"class":"esriGEClosableTooltipBody"},T);k.create("div",{innerHTML:E,"class":"esriGEClosableTooltipLabel"},X);U=k.create("div",{"class":"esriGEClosableTooltipCloseButton"},X)}var T=k.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable"+(I?" "+I:"")},document.body),X,U;"after"!==L?(Q(),O()):(O(),Q());T.style.position="fixed";return{tooltip:T,body:X,closeButton:U}},z=function(E,I,L,M,O){function Q(){var V=f.position(I),N=V.x+";"+V.y+";"+V.w+";"+V.h;N!==T&&
(T=N,N=f.getMarginBox(E.tooltip),c.set(E.tooltip,{left:(M?V.x+V.w:V.x-N.w)+"px",top:V.y+V.h/2-N.h/2+"px"}))}var T;Q();var X,U,aa=function(){X&&clearTimeout(X);Y&&clearInterval(Y);ea&&clearInterval(ea);K&&K.remove();E.tooltip.parentNode&&E.tooltip.parentNode.removeChild(E.tooltip)};var Y=setInterval(function(){n.isNodeInLayout(I)&&I.parentNode||(U=!1,aa());n.isNodeVisible(I)&&n.isNodeOnscreen(I)?(U=!0,n.show(E.tooltip)):(U=!1,n.hide(E.tooltip))},0);var ea=setInterval(function(){U&&Q()},0);L&&(X=setTimeout(aa,
L));var K=a(E.closeButton,"click",function(){aa();O&&O()});E.tooltip._removeFunc=aa;return E.tooltip};y.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});y.hideTooltipForNode(document.body);return y})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],function(t,p,l,k){var f={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(c,a,b){b=b||{};return l.isMobileDevice()?
f._addMobile(c,a,b):f._addPC(c,a,b)},_addPC:function(c,a,b){var d=b.tolerance||0,e,g,h=t(c,"mousedown",function(m){g&&g.remove();var r=m.clientX,n=m.clientY,q;e=t(document.body,"mousemove",function(u){if(!u.shiftKey&&!k.isCtrl(u)){var w=u.clientY;if(0<Math.abs(u.clientX-r)||0<Math.abs(w-n))q=!0}});g=t.once(document.body,"mouseup",function(u){e.remove();var w=u.clientX,y=u.clientY;!q&&Math.abs(w-r)<=d&&Math.abs(y-n)<=d&&a(u)})});return{remove:function(){e&&e.remove();g&&g.remove();h&&h.remove()}}},
_addMobile:function(c,a,b){function d(){g&&g.remove();h&&h.remove();m&&m.remove();clearTimeout(r)}var e=b.tolerance||f.MOBILE_TOLERANCE,g,h,m,r;var n=t(c,"touchstart",function(q){function u(C){return Math.abs(q.clientX-C.clientX)<e&&Math.abs(q.clientY-C.clientY)<e}d();var w;if(b.detectLongPress){var y;h=t(c,"touchmove",function(C){y=C});r=setTimeout(function(){u(y||q)&&(b.ignoreReleaseIfLongPressHappened&&(w=!0),b.longPressCallback(q))},b.longPressTimeout||f.LONG_PRESS_TIMEOUT)}g=t.once(c,"touchend",
function(C){!w&&u(C)&&a(C);d()});m=t.once(c,"touchcancel",d)});return{remove:function(){n&&n.remove();d()}}},addGlobalDragHanlder:function(c){function a(){b&&b.remove();d&&d.remove();e&&e.remove();g&&g.remove();h&&c.destroyDnDBox&&c.destroyDnDBox(h)}c.tolerance=0<c.tolerance?c.tolerance:5;var b,d,e,g,h;return t(c.node,c.downEventName||l.press,function(m){a();if(!c.onMouseDown||c.onMouseDown(m)){var r=m.clientX,n=m.clientY,q=r,u=n;b=t(document.body,l.move,function(w){function y(){a();c.dragEnded&&
c.dragEnded()}w.shiftKey||k.isCtrl(w)||!(Math.abs(r-w.clientX)>=c.tolerance||Math.abs(n-w.clientY)>=c.tolerance)||(b.remove(),c.dragStarted&&!c.dragStarted(w,w.clientX-q,w.clientY-u))||(q=w.clientX,u=w.clientY,h=c.createDnDBox&&c.createDnDBox(),d=t(document.body,l.move,function(C){c.dragMoved&&c.dragMoved(C,C.clientX-q,C.clientY-u,y);q=C.clientX;u=C.clientY}),e=t.once(document.body,p("ie")||p("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){y()}),g=t(document.body,"keyup",function(C){27==
C.keyCode&&(a(),c.dragCanceled&&c.dragCanceled())}))});t.once(document.body,p("ie")||p("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){b.remove()})}})}};return f})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(t,p,l){var k={listenToKeyboardCombinationOverNode:function(f){return t(document.body,"keydown",function(c){if(!f.isCtrl||k.isCtrl(c))if(!f.isShift||c.shiftKey)if(!f.isAlt||c.altKey)String.fromCharCode(c.keyCode).toLowerCase()!==
f["char"]||f.node&&!l.isNodeInLayout(f.node)||f.callback(c)})},isCtrl:function(f){return p("mac")?f.metaKey:f.ctrlKey}};return k})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(t,p,l,k,f,c){var a={_latestEvent:null,_setLatestEvent:function(g){a._latestEvent=g},_getLatestEvent:function(){return a._latestEvent}};l("touch")?(p(document.body,k.press,function(g){a._setLatestEvent(e(g))}),
p(document.body,k.move,function(g){a._setLatestEvent(e(g))})):p(document.body,"mousemove",function(g){a._setLatestEvent(e(g))});var b;p(document.body,"mousedown",function(){b||(b=!0,p.once(document.body,"mouseup, click",function(){b=!1}))});a.getCursorPosition=function(){return a._latestEvent};a.isMouseOver=function(g,h){var m=h&&h.event||a._latestEvent;if(!(g&&g.parentNode&&g.getBoundingClientRect&&m))return!1;if(h&&h.checkAllChildren){h=t.mixin({},h);delete h.checkAllChildren;var r=!1;c.traverseChildren(g,
function(n){if(a.isMouseOver(n,h))return r=!0});return r}return a.isMouseOverBox(f.position(g),h)};a.isMouseOverBox=function(g,h){if(!g)return!1;var m=h&&h.event||a._latestEvent;h&&h.ignoreBorderTolerance&&(h=h.ignoreBorderTolerance,g=t.mixin({},g),g.x+=h,g.y+=h,g.w-=2*h,g.h-=2*h);return g.x<=m.clientX&&g.x+g.w>=m.clientX&&g.y<=m.clientY&&g.y+g.h>=m.clientY};var d=function(g){if(g.touches){if(!g.touches.length)return g.changedTouches[0];for(var h=g.touches[0].identifier,m,r=0;r<g.changedTouches.length;r++)if(g.changedTouches[r].identifier===
h){m=g.changedTouches[r];break}return m||g.touches[0]}},e=function(g){var h=d(g);h&&(h.type=g.type);return h||g};a.fixTouchEvent=function(g){var h=d(g);h&&(g.screenX=h.screenX,g.screenY=h.screenY,g.clientX=h.clientX,g.clientY=h.clientY,g.pageX=h.pageX,g.pageY=h.pageY);return g};a.isBeingDragged=function(){return b};a.addOverOutHandler=function(g){function h(){clearTimeout(r);m&&m.remove()}var m,r,n=p(g.node,"mouseover",function(q){function u(){a.isMouseOver(g.node)&&(g.onMouseOver(q),m=p(document.body,
"mousemove",function(w){a.isMouseOver(g.node)||(h(),g.onMouseOut(w))}))}h();g.delayTimeout?r=setTimeout(u,g.delayTimeout):u()});return{remove:function(){n.remove();h()}}};a.addOutHandler=function(g,h){return p(document.body,"mousemove",function(m){a.isMouseOver(g,{checkAllChildren:!0})||h(m)})};return a})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PrintSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","../ReportPlayerState"],
function(t,p,l,k,f){function c(){var a=new l;t(["../printing/PrintableContainer"],function(b){a.resolve(b)});return a.promise}return p(null,{_getPrintableContainer:function(a){var b=this;f.isAnimationSuspended=!0;return b._showWaiting(c(),"loadPrintModules").then(function(d){var e=new d(b,b._viewModel);a.onShowWaiting=function(g){b._showWaiting(g,"initPrintContainer")};return k(e.initialize(a),function(g){f.isAnimationSuspended=!1;return g?g:k(e.stop(),function(){return null})})})},_getPrintDialogSettings:function(){var a=
this;return c().then(function(b){return(new b(a,a._viewModel)).getPrintDialogSettings()})}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState":function(){define([],function(){return{isImageViewerShown:!1,isViewingDataDrillingZoom:!1,isViewingDynamicSettings:!1,isAnimationSuspended:!1}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ReportContainersSwitcher":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(t,p,l,k,f,c){var a={createContainer:function(e,g){var h=e.getCurrentAnalysisAreaIndex();e.viewMode===f.PANELS_IN_STACK_ALL&&(h=0);var m=g.getContainer(h);if(!m){switch(e.viewMode){case f.PANELS_IN_SLIDES:m=this._createPaginationReportContainer(e);break;case f.PANELS_IN_STACK:m=this._createStackReportContainer(e);break;case f.PANELS_IN_STACK_ALL:m=this._createStackReportContainerAll(e);break;default:m=this._createFullPageReportContainer(e)}m.isCurrentContainer=function(){return e.getCurrentReportContainer()===
m}}g.setContainer(m,h);return m},_createPaginationReportContainer:function(e){var g=e._viewModel;return g.layoutBuilder.createElement("reportContainerPagination",{viewModel:g,parentWidget:e,currentFeatureIndex:e.getCurrentAnalysisAreaIndex(),scaleSectionsToFit:e.scaleSlidesToFitWindow,onResized:function(h){e.playerToolbar.update();e._emitResizedEvent(h)},onPendingDataApplied:function(){e._emitResizedEvent()}},e.reportContainerDiv)},_createStackReportContainer:function(e){var g=e._viewModel,h={center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:e.showToolbarInPopup?43:10};return g.layoutBuilder.createElement("reportContainerStack",{viewModel:g,parentWidget:e,currentFeatureIndex:e.getCurrentAnalysisAreaIndex(),isVertical:!0,renderOptions:h,onPendingDataApplied:function(){e._emitResizedEvent()}},e.reportContainerDiv)},_createStackReportContainerAll:function(e){var g=e._viewModel;return g.layoutBuilder.createElement("reportContainerStackAll",{viewModel:g,parentWidget:e,isVertical:!0,renderOptions:{center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:e.showToolbarInPopup?43:0},comparisonSettings:e.comparisonSettings,onPendingDataApplied:function(){e._emitResizedEvent()},onSwitchToSingleAreaView:function(){e.showAnalysisAreaAt(0)}},e.reportContainerDiv)},_createFullPageReportContainer:function(e){var g=e._viewModel,h={viewModel:g,parentWidget:e,currentFeatureIndex:e.getCurrentAnalysisAreaIndex(),onPendingDataApplied:function(){e._emitResizedEvent()}};h.renderOptions={center:!0,minRight:10,minBottom:10,
minLeft:10,minTop:e.showToolbarInPopup?43:10};return g.layoutBuilder.createElement(e.getReportData().reportObject.isGraphicReport?"reportContainerGrid":"reportContainer",h,e.reportContainerDiv)}},b=t(null,{_containerInfos:null,constructor:function(){this._containerInfos=[]},getContainer:function(e){return this._getInfo(e,"container")},getContainers:function(){return this._containerInfos.map(function(e){return e.container})},getContainerIndex:function(e){return this.getContainers().indexOf(e)},setContainer:function(e,
g){p.set(e.domNode,"area-index",g);this._getInfo(g,null,e)},isLoaded:function(e){return this._getInfo(e,"loaded")},setLoaded:function(e){if(e=this._getInfo(e))e.loaded=!0},resetAllLoaded:function(){this._containerInfos.forEach(function(e){e.loaded=!1})},destroyAllContainers:function(){this._containerInfos.forEach(function(e){e.container.destroy()});this._containerInfos.length=0},_getInfo:function(e,g,h){var m=this._containerInfos[e];!m&&h&&(m=this._containerInfos[e]={container:h,loaded:!1});return g?
m&&m[g]:m}}),d=t(null,{_lastVisuals:null,reset:function(){this._lastVisuals=null},rememberCurrentContainerVisuals:function(e){this._lastVisuals=e?{scrollTop:e.getScrollableContainer&&e.getScrollableContainer().scrollTop||0,pageIndex:e.getCurrentPageIndex&&e.getCurrentPageIndex()||0,slideIndex:e.getCurrentSlideIndex&&e.getCurrentSlideIndex()||0,zoomInfo:e.getZoomInfo&&e.getZoomInfo()}:null},applyCurrentContainerVisuals:function(e){this._lastVisuals&&(e.getScrollableContainer&&(e.getScrollableContainer().scrollTop=
this._lastVisuals.scrollTop||0),e.showSlideAt&&e.showSlideAt(this._lastVisuals.slideIndex||0),e.showPageAt?e.showPageAt(this._lastVisuals.pageIndex||0):e.notifyShown(),e.setZoomInfo&&e.setZoomInfo(this._lastVisuals.zoomInfo))}});return t(null,{_containerDict:null,_visualsHelper:null,_initContainerSwither:function(){this._containerDict=new b;this._visualsHelper=new d},getCurrentReportContainer:function(){return this._currentReportContainer},getAllReportContainers:function(){return this._containerDict.getContainers()},
_destroyAllContainers:function(){this._containerDict.destroyAllContainers();this._currentReportContainer=null},_setReportContainer:function(e){e?this._resetLoadedFlags():this._visualsHelper.rememberCurrentContainerVisuals(this._currentReportContainer);this._switchToCurrentReportContainer();return!e&&this._containerDict.isLoaded(this.getCurrentAnalysisAreaIndex())?(this._resize({isPaginating:!0}),this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer),!1):!0},_switchToCurrentReportContainer:function(){this._currentReportContainer&&
this._hideContainer(this._currentReportContainer);this._currentReportContainer=a.createContainer(this,this._containerDict);l.remove(this.domNode,"esriGEReportPlayerFullView esriGEReportPlayerPaginationView esriGEReportPlayerStackView");switch(this.viewMode){case f.PANELS_IN_SLIDES:l.add(this.domNode,"esriGEReportPlayerPaginationView");break;case f.PANELS_IN_STACK:l.add(this.domNode,"esriGEReportPlayerStackView");break;case f.PANELS_IN_STACK_ALL:l.add(this.domNode,"esriGEReportPlayerStackAllView");
break;default:l.add(this.domNode,"esriGEReportPlayerFullView")}this._showContainer(this._currentReportContainer);this._connectZoomToCurrentContainer();this.notifyShown()},_hideContainer:function(e){this.isPlayerOnServer||(e.__undoHideContainerHandle=c.hideNodeInBackground(e.domNode,"reportContainer_"+this._containerDict.getContainerIndex(e)),e.own(e.__undoHideContainerHandle))},_showContainer:function(e){!this.isPlayerOnServer&&e.__undoHideContainerHandle&&(e.__undoHideContainerHandle.remove(),delete e.__undoHideContainerHandle)},
_showAllContainers:function(){var e=this;this.getAllReportContainers().forEach(function(g){e._showContainer(g);e.reportContainerDiv.removeChild(g.domNode);k.place(g.domNode,e.reportContainerDiv)});return{undo:function(){e.getAllReportContainers().forEach(function(g){e._hideContainer(g)});e._switchToCurrentReportContainer()}}},_resetLoadedFlags:function(){this._visualsHelper.reset();this._containerDict.resetAllLoaded()},_setCurrentContainerLoaded:function(){this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer);
this._containerDict.setLoaded(this.getCurrentAnalysisAreaIndex())}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_SmartLayoutSupport":function(){define("dojo/_base/declare dojo/dom-class dojo/on esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil ../PlayerResizeModes ../PlayerViewModes".split(" "),function(t,p,l,k,f,c,a){return t(null,{_width:0,_height:0,_measuredWinBox:null,_initSmartLayout:function(){var b=this;this.resizeMode===c.FIT_WINDOW&&this.own(l(window,
"resize, orientationchange",function(){setTimeout(function(){b._measuredWinBox=null;b.resize()})}));this._resize()},_resize:function(b){b=b||{};p.remove(this.domNode,"esriGEReportPlayerFullScreen esriGEReportPlayerAutoResize esriGEReportPlayerManualResize");switch(this.resizeMode){case c.FIT_WINDOW:return this._resize_fitWindow(b);case c.AUTO:return this._resize_auto(b);case c.MANUAL:return this._resize_manual(b)}},_resize_fitWindow:function(b){this._measuredWinBox=this._measuredWinBox||f.getWindowBox();
this._width=this._maxWidth=this._measuredWinBox.w;this._height=this._maxHeight=this._measuredWinBox.h;p.add(this.domNode,"esriGEReportPlayerFullScreen");this.domNode.style.width=this._width+"px";this.domNode.style.height=this._height+"px";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,
this._height-this._getToolbarHeight()),this._emitResizedEvent(b.isPaginating))},_resize_auto:function(b){this._height=this._width=0;p.add(this.domNode,"esriGEReportPlayerAutoResize");this.domNode.style.width="auto";this.domNode.style.height="auto";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),
this._currentReportContainer.resize(0,0),this._emitResizedEvent(b.isPaginating))},_resize_manual:function(b){this._width=void 0!==b.width?b.width:this._width;this._height=void 0!==b.height?b.height:this._height;this._width&&this._height&&(this._maxWidth&&(this._width=Math.min(this._maxWidth,this._width)),this._maxHeight&&(this._height=Math.min(this._maxHeight,this._height)),p.add(this.domNode,"esriGEReportPlayerManualResize"),this.domNode.style.width=this._width+"px",this.domNode.style.height=this._height+
"px",this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth||this._width),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight((this._maxHeight||this._height)-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),this._emitResizedEvent(b.isPaginating)))},_getToolbarHeight:function(){if(this.showToolbarInPopup)return 0;var b=this.playerToolbar&&
0===this.playerToolbar.toolbarHolder.infographicsSelectDiv.children.length,d=!this.showAreaTitle,e=this._reportData&&(this._reportData.isMultiFeature||1===this._reportData.analysisAreas.length),g=this.viewMode===a.PANELS_IN_SLIDES,h=k.isMobileDevice();return b&&d&&e&&g&&h?0:50},_maxWidth:0,_maxHeight:0,setMaxWidth:function(b){this._maxWidth=b},setMaxHeight:function(b){this._maxHeight=b}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ZoomSupport":function(){define(["dojo/_base/declare",
"dojo/aspect","../PlayerResizeModes","../PlayerViewModes","../PlayerZoomBehaviors"],function(t,p,l,k,f){return t(null,{_initZoomControls:function(){var c=this;this.playerToolbar.onZoomToFitPage=function(){c.getCurrentReportContainer().zoomToFitPage({showAnimation:!0})};this.playerToolbar.onZoomToFitPageWidth=function(){c.getCurrentReportContainer().zoomToFitPageWidth({showAnimation:!0})};this.playerToolbar.onZoomToFitPageHeight=function(){c.getCurrentReportContainer().zoomToFitPageHeight({showAnimation:!0})};
this.playerToolbar.onSetZoomPercent=function(a){c.getCurrentReportContainer().setZoomPercent(a,{showAnimation:!0})};this._refreshZoomControls()},_refreshZoomControls:function(){this.playerToolbar&&this.playerToolbar.setZoomSupportsInfo(this._getZoomSupportsInfo())},setBestZoom:function(){this._callZoomMethod("setBestZoom")},zoomToFitPage:function(){this._callZoomMethod("zoomToFitPage")},zoomToFitPageWidth:function(){this._callZoomMethod("zoomToFitPageWidth")},zoomToFitPageHeight:function(){this._callZoomMethod("zoomToFitPageHeight")},
resetZoom:function(){this._callZoomMethod("resetZoom")},_callZoomMethod:function(c){if(this._getZoomSupportsInfo().supported){var a=this.getCurrentReportContainer();a&&a[c]&&a[c]()}},_getZoomSupportsInfo:function(){var c={supported:!1,canFitPage:!1,canFitPageWidth:!1,canFitPageHeight:!1};this.viewMode!==k.PANELS_IN_SLIDES&&(c.supported=!0,this.resizeMode!==l.AUTO&&(c.canFitPage=!k.isStackLike(this.viewMode),c.canFitPageWidth=!0,c.canFitPageHeight=!1));return c},_updateZoomControls:function(){this._connectZoomToCurrentContainer();
this._applyDefaultZoomBehavior()},_reportContainerZoomChangedHandle:null,_connectZoomToCurrentContainer:function(){var c=this.getCurrentReportContainer();this._reportContainerZoomChangedHandle&&this._reportContainerZoomChangedHandle.remove();this._reportContainerZoomChangedHandle=c&&p.after(c,"onZoomChanged",function(){if(this.playerToolbar){var a=this.getCurrentReportContainer();a&&a.getZoomInfo&&this.playerToolbar.setZoomInfo(this.getCurrentReportContainer().getZoomInfo());this._updatePageNavigator();
this.playerToolbar.update()}}.bind(this));c&&c.own(this._reportContainerZoomChangedHandle)},_applyDefaultZoomBehavior:function(){var c=this._getZoomSupportsInfo();c.supported&&c.canFitPage&&this.defaultZoomBehavior===f.FIT_PAGE?this.zoomToFitPage():c.supported&&c.canFitPageWidth&&this.defaultZoomBehavior===f.FIT_PAGE_WIDTH?this.zoomToFitPageWidth():c.supported&&c.canFitPageHeight&&this.defaultZoomBehavior===f.FIT_PAGE_HEIGHT?this.zoomToFitPageHeight():this.resetZoom()}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerZoomBehaviors":function(){define([],
function(){var t={RESET:"reset",FIT_PAGE:"fitPage",FIT_PAGE_WIDTH:"fitPageWidth",FIT_PAGE_HEIGHT:"fitPageHeight",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.RESET}};return t})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_WaitingSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct ../PlayerResizeModes esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/progress/SmoothProgress".split(" "),
function(t,p,l,k,f,c,a,b,d,e){var g=t(null,{_dataProgress:0,_areaProgresses:null,_numAreas:0,constructor:function(h){p.mixin(this,h);this.reset()},reset:function(){this._dataProgress=0;this._areaProgresses={};this._fireProgress()},setLoadDataProgress:function(h){this._dataProgress=h;this._fireProgress()},setNumAreas:function(h){this._numAreas=h},setProgressForAreaAt:function(h,m){this._areaProgresses[m]=h;this._fireProgress()},finalize:function(){this.onChange(1);return a.delay(300)},_fireProgress:function(){var h=
.25*this._dataProgress,m=.75/this._numAreas,r;for(r in this._areaProgresses)h+=m*(this._areaProgresses[r]||0);h=Math.min(.999999,Math.max(0,h));this.onChange(h);this._printProgress()},_printProgress:function(){},onChange:function(h){}});return t(null,{_progressController:null,_initProgressController:function(){var h=this;this.showProgressBar&&(this._progressController=new g,(new e(this._progressController)).onChange=function(m){d.showProgressBar({value:m,node:h.domNode,position:"top"})})},_waitingCount:0,
_hideUndoHandle:null,_waitNode:null,getWaitingPromise:function(){return d.getProgressPromiseForNode(this._waitNode||this.domNode)},_showWaiting:function(h,m){var r=this;if(this.isPlayerOnServer)return h;this.onWaitingShown(h);return this.resizeMode!==c.FIT_WINDOW?(0===this._waitingCount++&&(this._updateElementsVisibility(),this._waitNode=f.create("div",{"class":"esriGEReportPlayerWaitingNode"},this.domNode.parentNode),this._waitNode.style.width=this.domNode.clientWidth?this.domNode.clientWidth+"px":
"",this._waitNode.style.height=this.domNode.clientHeight?this.domNode.clientHeight+"px":"",this._waitNode.style.position="relative",this._hideUndoHandle=b.hideNodeInBackground(this.domNode)),l(h)["finally"](function(){0===--r._waitingCount&&(r._hideUndoHandle.remove(),r._hideUndoHandle=null,f.destroy(r._waitNode),r._updateElementsVisibility())}),d.showProgressPromise(this._waitNode,h,{progressClass:"esriGEReportPlayerProgress"})):this._showWaitingFullScreen(h,m)},_showWaitingFullScreen:function(h,
m){return d.showProgressPromise(this.domNode,h,{progressClass:"esriGEReportPlayerProgress",onShowProgress:function(){this._waitingCount++;this._updateElementsVisibility()}.bind(this),onRemoveProgress:function(){if(this.domNode){this._waitingCount--;this._updateElementsVisibility();var r=this.getCurrentReportContainer();r&&!r.__isBeingAnimated&&(r.__isBeingAnimated=!0,r.domNode&&k.add(r.domNode,"esriGEReportPlayer_fadeIn1000"),r.notifyShown(),a.delay(1500).then(function(){r.__isBeingAnimated=!1;r.domNode&&
k.remove(r.domNode,"esriGEReportPlayer_fadeIn1000")}))}}.bind(this)})},onWaitingShown:function(h){}})})},"esri/dijit/geoenrichment/utils/DelayUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p){return{delay:function(l,k,f){var c=new t;k="number"===typeof l?l:k;var a="function"===typeof l?l:null,b=f&&a&&a();setTimeout(function(){p(f?b:a&&a()).then(c.resolve,c.reject)},k||0);return c.promise}}})},"esri/dijit/geoenrichment/utils/WaitingUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(t,p,l,k,f,c){var a={showProgress:function(b,d){c.isPlayerOnServer||b&&!b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]=l.create("div",{"class":"esriGEProgress esriGEProgressAbsolute "+(d||"")},b))},removeProgress:function(b){b&&b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(l.destroy(b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]),delete b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"])},
showProgressBar:function(b){var d=b.node;if(d){d._progressBar&&l.destroy(d._progressBar);delete d._progressBar;var e=Number(b.value);0>=e||isNaN(e)||(e=Math.min(e,1),d._progressBar=l.create("div",{"class":"esriGEWaitingMessageProgressBar esriGEWaitingMessageProgressBar_"+(b.position||"bottom")},d),f.set(d._progressBar,"width",k.position(d).w*e+"px"))}},showProgressPromise:function(b,d,e){if(!b)return d;e=e||{};void 0===b.__progressIndex&&(b.__progressIndex=0);0===b.__progressIndex&&(b.__progressDfd=
new t,a.showProgress(b,e.progressClass),e.onShowProgress&&e.onShowProgress());b.__progressIndex++;p(d)["finally"](function(){b.__progressIndex=Math.max(0,--b.__progressIndex);0===b.__progressIndex&&(b.__progressDfd&&b.__progressDfd.resolve(),delete b.__progressDfd,a.removeProgress(b),e.onRemoveProgress&&e.onRemoveProgress())});return d},getProgressPromiseForNode:function(b){return b&&b.__progressDfd&&b.__progressDfd.promise}};return a})},"esri/dijit/geoenrichment/utils/progress/SmoothProgress":function(){define(["dojo/_base/declare",
"dojo/aspect"],function(t,p){return t(null,{elasticTime:1E3,fireInterval:30,_intervalHandle:null,_progressHandle:null,_realProgress:0,_smoothProgress:0,_runAheadSpeed:2.5E-4,_currentSpeed:0,constructor:function(l){0<l.fireInterval&&(this.fireInterval=l.fireInterval);0<l.elasticTime&&(this.elasticTime=l.elasticTime);0<l.timeEstimate&&(this._runAheadSpeed=Math.min(this.fireInterval/l.timeEstimate,.5));var k=this;this._progressHandle=p.after(l,"onChange",function(f){1<=f?k._finalize():k._updateProgress(f)},
!0)},start:function(){this._updateProgress(0,!0)},_updateProgress:function(l,k){this._realProgress=Math.max(l,0);if(0===this._realProgress&&(this._smoothProgress=0,this._setIntervalHandle(!1),this.onChange(0),!k))return;this._setIntervalHandle(!0);this._currentSpeed=this._smoothProgress>=this._realProgress?this._runAheadSpeed:(this._realProgress-this._smoothProgress)*this.fireInterval/this.elasticTime},_setIntervalHandle:function(l){l!==!!this._intervalHandle&&(l?this._intervalHandle=setInterval(this._tryFireProgress.bind(this),
this.fireInterval):(clearInterval(this._intervalHandle),this._intervalHandle=null))},_tryFireProgress:function(){0!==this._currentSpeed&&(this._smoothProgress+=this._currentSpeed,this._smoothProgress=Math.min(1-this._runAheadSpeed,this._smoothProgress),this._smoothProgress>=this._realProgress&&(this._currentSpeed=this._runAheadSpeed),this.onChange(this._smoothProgress))},_finalize:function(){this._smoothProgress=this._realProgress=1;this.onChange(1)},onChange:function(l){},destroy:function(){this._progressHandle.remove();
this._setIntervalHandle(!1)}})})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerConfigurator":function(){define("../PlayerResizeModes ../PlayerZoomBehaviors ../PlayerThemes ../PlayerViewModes ../config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(t,p,l,k,f,c){var a={configurePlayer:function(b,d){b._originalConfigurationSettings||(b.theme=b.theme&&l.toSupportedValue(b.theme)||l.DARK,b.viewMode=b.viewMode&&k.toSupportedValue(b.viewMode),b.resizeMode=b.resizeMode&&t.toSupportedValue(b.resizeMode)||
t.FIT_WINDOW,b.defaultZoomBehavior=b.defaultZoomBehavior&&p.toSupportedValue(b.defaultZoomBehavior),b._originalConfigurationSettings={viewMode:b.viewMode,defaultZoomBehavior:b.defaultZoomBehavior,scaleSlidesToFitWindow:b.scaleSlidesToFitWindow,showAreaTitle:b.showAreaTitle});b.viewMode=d||b._originalConfigurationSettings.viewMode||a.getDefaultViewMode(b);switch(b.viewMode){case k.FULL_PAGES:a._configure_fullPages(b);break;case k.PANELS_IN_SLIDES:a._configure_panelsInSlides(b);break;case k.PANELS_IN_STACK:a._configure_panelsInStack(b);
break;case k.PANELS_IN_STACK_ALL:a._configure_panelsInStackAll(b)}b._viewModel.setAnimationSuspended(b.viewMode===k.PANELS_IN_STACK_ALL);c.isMobileDevice()&&(f.modules.exportCommands=!1);f.modules.complexCellTooltips=b.viewMode===k.FULL_PAGES||b.viewMode===k.PANELS_IN_STACK_ALL},getDefaultViewMode:function(b){return c.isMobileDevice()&&!c.isWebLayout()?c.isLandscape()?k.PANELS_IN_SLIDES:k.PANELS_IN_STACK:k.FULL_PAGES},_configure_fullPages:function(b){b.showAreaTitle=!1!==b._originalConfigurationSettings.showAreaTitle;
b.scaleSlidesToFitWindow=!1;switch(b.resizeMode){case t.FIT_WINDOW:b.defaultZoomBehavior=b._originalConfigurationSettings.defaultZoomBehavior||(c.isMobileDevice()?p.FIT_PAGE_WIDTH:null)||p.FIT_PAGE;break;case t.AUTO:b.defaultZoomBehavior=p.RESET;break;case t.MANUAL:b.defaultZoomBehavior=b._originalConfigurationSettings.defaultZoomBehavior||p.FIT_PAGE}},_configure_panelsInSlides:function(b){b.showAreaTitle=!!b._originalConfigurationSettings.showAreaTitle;b.defaultZoomBehavior=null;switch(b.resizeMode){case t.FIT_WINDOW:b.scaleSlidesToFitWindow=
!1!==b._originalConfigurationSettings.scaleSlidesToFitWindow;break;case t.AUTO:b.scaleSlidesToFitWindow=!1;break;case t.MANUAL:b.scaleSlidesToFitWindow=!1!==b._originalConfigurationSettings.scaleSlidesToFitWindow}},_configure_panelsInStack:function(b){b.showAreaTitle=!!b._originalConfigurationSettings.showAreaTitle;b.scaleSlidesToFitWindow=!1;switch(b.resizeMode){case t.FIT_WINDOW:b.defaultZoomBehavior=p.FIT_PAGE_WIDTH;break;case t.AUTO:b.defaultZoomBehavior=p.RESET;break;case t.MANUAL:b.defaultZoomBehavior=
p.FIT_PAGE_WIDTH}},_configure_panelsInStackAll:function(b){b.showAreaTitle=!1!==b._originalConfigurationSettings.showAreaTitle;b.scaleSlidesToFitWindow=!1;switch(b.resizeMode){case t.FIT_WINDOW:b.defaultZoomBehavior=p.FIT_PAGE_WIDTH;break;case t.AUTO:b.defaultZoomBehavior=p.RESET;break;case t.MANUAL:b.defaultZoomBehavior=p.FIT_PAGE_WIDTH}},configurePlayerForCustomBuild:function(b,d){d=d||f;d.esriDijitCssUrl=b+"/dijit/themes/claro/claro.css";d.esriCssUrl=b+"/esri/css/esri.css";d.playerSourceRootUrl=
b+"/dojo/dojo.js";d.configScriptText='var dojoConfig \x3d { baseUrl: "'+b+'/", waitSeconds: 60, async: true, locale: typeof dojoConfig !\x3d\x3d "undefined" \x26\x26 dojoConfig.locale || null, packages: [{ name: "dojo", location: "./dojo" }, { name: "dijit", location: "./dijit" }, { name: "dojox", location: "./dojox" }, { name: "dgrid1", location: "./dgrid1" }, { name: "dstore", location: "./dstore" }, { name: "xstyle", location: "./xstyle" }, { name: "esri", location: "./esri" }, { name: "moment", location: "./moment", main: "moment/moment" }] }'}};
return a})},"esri/dijit/geoenrichment/ReportPlayer/PlayerThemes":function(){define([],function(){var t={LIGHT:"light",DARK:"dark",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.DARK}};return t})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerToFullScreenAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/AnimationUtil","esri/dijit/geoenrichment/utils/DelayUtil"],function(t,p){return{animateTo:function(l){if(!l._isAnimatedTo){l._isAnimatedTo=
!0;var k=t.animateResize({duration:300,domNode:l.domNode,startScaleX:.3,startScaleY:.3,fromOffset:{x:"c",y:"c"},toBox:{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}});t.animateFadeIn({domNode:l.domNode,duration:300});return k.then(function(){return p.delay(100)})}},animateFrom:function(l){if(l._isAnimatedTo){l._isAnimatedTo=!1;var k=t.animateResize({duration:300,domNode:l.domNode,endScaleX:.3,endScaleY:.3,toOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-300)/2,y:(document.body.clientHeight-
200)/2,w:300,h:200}});t.animateFadeOut({domNode:l.domNode,duration:300});return k.then(function(){return p.delay(100)})}}}})},"esri/dijit/geoenrichment/utils/animation/AnimationUtil":function(){define(["dojo/dom-construct","dojo/dom-style","dojo/sniff","./Animator","esri/dijit/geoenrichment/utils/DomUtil"],function(t,p,l,k,f){var c={animateResize:function(a){function b(q){a.domNode=t.create("div",{"class":a.ghostClass},document.body);p.set(a.domNode,{width:q.w+"px",height:q.h+"px"})}function d(q,
u,w){var y=a.fromOffset.x,C=a.fromOffset.y;if("number"!==typeof y){var D=u.w*w.x;switch(y){case "l":y=0;break;case "r":y=(q.w||0)-D;break;default:y=((q.w||0)-D)/2}}if("number"!==typeof C)switch(D=u.h*w.y,C){case "t":C=0;break;case "b":C=(q.h||0)-D;break;default:C=((q.h||0)-D)/2}return{x:q.x+y,y:q.y+C}}function e(q,u,w){var y=a.toOffset.x,C=a.toOffset.y;if("number"!==typeof y){var D=q.w*w.x;switch(y){case "l":y=0;break;case "r":y=(u.w||0)-D;break;default:y=((u.w||0)-D)/2}}if("number"!==typeof C)switch(D=
q.h*w.y,C){case "t":C=0;break;case "b":C=(u.h||0)-D;break;default:C=((u.h||0)-D)/2}return{x:u.x+y,y:u.y+C}}var g=a.fromBox||(a.domFrom||a.domNode)&&f.noTransformPosition(a.domFrom||a.domNode);a.animateGhost&&b(g);var h=a.toBox||f.noTransformPosition(a.domTo);if(g&&h){var m=function(q,u){var w={x:a.startScaleX,y:a.startScaleY},y=0;"fit"===w.x&&(q.w?y=w.x=q.w/u.w:w.x=0);"fit"===w.y&&(q.h?y=Math.max(w.y=q.h/u.h,y):w.y=0);w.x=w.x||y||1;w.y=w.y||y||1;return w}(g,h),r=function(q,u){var w={x:a.endScaleX,
y:a.endScaleY},y=0;"fit"===w.x&&(u.w?y=w.x=u.w/q.w:w.x=0);"fit"===w.y&&(u.h?y=Math.max(w.y=u.h/q.h,y):w.y=0);w.x=w.x||y||1;w.y=w.y||y||1;return w}(g,h);a.fromOffset&&(g=d(g,h,m));a.toOffset&&(h=e(g,h,r));var n=l("webkit")?"webkitTransformOrigin":"transformOrigin";a.domNode.style[n]="0% 0%";return k.animateProperty({obj:a.domNode,duration:a.duration||250,properties:{__x:{start:g.x,end:h.x},__y:{start:g.y,end:h.y},__scaleX:{start:m.x||1,end:r.x},__scaleY:{start:m.y||1,end:r.y}},endFunction:function(){a.animateGhost&&
t.destroy(a.domNode);a.onEnd&&a.onEnd()},progressFunction:function(q,u){var w=l("webkit")?"webkitTransform":"transform";"__x"==q?a.domNode.style.left=u+"px":"__y"==q?a.domNode.style.top=u+"px":"__scaleX"==q?a.domNode.style[w]="scaleX("+u+") scaleY("+(a.domNode.__scaleY||1)+")":"__scaleY"==q&&(a.domNode.style[w]="scaleX("+(a.domNode.__scaleX||1)+") scaleY("+u+")")}}).promise}a.onEnd&&a.onEnd()},animateShrinkResize:function(a){a.endScaleX=a.endScaleX||.1;a.endScaleY=a.endScaleY||.05;return c.animateResize(a)},
animateFadeIn:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:0,end:1}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateFadeOut:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:1,end:0}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateSlide:function(a,b,d){var e=d.width;k.animateProperty({obj:a.style,duration:d.duration||250,properties:{left:{start:d.leftToRight?
0:-e,end:d.leftToRight?-e:0,units:"px"},right:{start:d.leftToRight?0:e,end:d.leftToRight?e:0,units:"px"}},endFunction:function(){d.onEnd&&d.onEnd()}});return k.animateProperty({obj:b.style,duration:d.duration||250,properties:{left:{start:d.leftToRight?e:0,end:d.leftToRight?0:e,units:"px"},right:{start:d.leftToRight?-e:0,end:d.leftToRight?0:-e,units:"px"}}}).promise},animateExpand:function(a,b,d){d=d||{};a.style.overflow="hidden";b&&f.show(a);var e=p.get(a,"height");return k.animateProperty({obj:a.style,
duration:d.duration,properties:{height:{start:b?0:e,end:b?e:0,units:"px"}},progressFunction:d.progressFunction,endFunction:function(){!b&&f.hide(a);p.set(a,"height","");p.set(a,"overflow","")}}).promise}};return c})},"esri/dijit/geoenrichment/utils/animation/Animator":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/fx/easing","dojox/gfx/matrix"],function(t,p,l){function k(b){1>b.progress&&!b.isStopped?a.setTimeout(function(){if(b.isStopped)b.endFunction();else{var d=(new Date).getTime();
b.progress=1-(b.endTime-d)/b.duration;b.progress=Math.min(1,b.progress);f(b);k(b)}}):b.endFunction()}function f(b){for(var d in b.params.properties){var e=b.params.properties[d],g=e.easing?"function"===typeof e.easing?e.easing:p[e.easing]:null;g=g?g(b.progress):b.progress;var h=e.start+g*(e.end-e.start);b.obj[d]=e.units?h+e.units:h;b.progressFunction&&b.progressFunction(d,h,g)}}var c={},a={_funcs:null,setTimeout:function(b){var d=this;this._funcs?this._funcs.push(b):(this._funcs=[b],setTimeout(function(){var e=
d._funcs;d._funcs=null;e.forEach(function(g){g()})},33))}};c.animateProperty=function(b){var d={},e=new t;d.promise=e.promise;d.params=b;d.obj=b.obj||b.node||{};d.duration=void 0!==b.duration?b.duration:1E3;d.startTime=(new Date).getTime();d.endTime=d.startTime+d.duration;d.progress=0;d.endFunction=function(){b.endFunction&&b.endFunction();e.resolve()};d.progressFunction=b.progressFunction;d.stop=function(){d.isStopped=!0};f(d);k(d);return d};c.animateTransform=function(b){var d=b.shape;d.setTransform(null);
return c.animateProperty({duration:b.duration,properties:{p:{start:0,end:1,easing:b.easing}},progressFunction:function(e,g,h){var m,r,n,q;b.transform.forEach(function(u){var w=u.start[0]+(u.end[0]-u.start[0])*h,y=u.start[1]+(u.end[1]-u.start[1])*h;"translate"===u.name?(m=w,r=y):"scale"===u.name&&(n=w,q=y)});d.setTransform(new l.Matrix2D({dx:m,dy:r,xx:n,yy:q}))},endFunction:function(){d.setTransform(null);b.onEnd&&b.onEnd()}}).promise};return c})},"dojo/fx/easing":function(){define(["../_base/lang"],
function(t){var p={linear:function(l){return l},quadIn:function(l){return Math.pow(l,2)},quadOut:function(l){return l*(l-2)*-1},quadInOut:function(l){l*=2;return 1>l?Math.pow(l,2)/2:-1*(--l*(l-2)-1)/2},cubicIn:function(l){return Math.pow(l,3)},cubicOut:function(l){return Math.pow(l-1,3)+1},cubicInOut:function(l){l*=2;return 1>l?Math.pow(l,3)/2:(Math.pow(l-2,3)+2)/2},quartIn:function(l){return Math.pow(l,4)},quartOut:function(l){return-1*(Math.pow(l-1,4)-1)},quartInOut:function(l){l*=2;return 1>l?
Math.pow(l,4)/2:-.5*(Math.pow(l-2,4)-2)},quintIn:function(l){return Math.pow(l,5)},quintOut:function(l){return Math.pow(l-1,5)+1},quintInOut:function(l){l*=2;return 1>l?Math.pow(l,5)/2:(Math.pow(l-2,5)+2)/2},sineIn:function(l){return-1*Math.cos(Math.PI/2*l)+1},sineOut:function(l){return Math.sin(Math.PI/2*l)},sineInOut:function(l){return-1*(Math.cos(Math.PI*l)-1)/2},expoIn:function(l){return 0==l?0:Math.pow(2,10*(l-1))},expoOut:function(l){return 1==l?1:-1*Math.pow(2,-10*l)+1},expoInOut:function(l){if(0==
l)return 0;if(1==l)return 1;l*=2;if(1>l)return Math.pow(2,10*(l-1))/2;--l;return(-1*Math.pow(2,-10*l)+2)/2},circIn:function(l){return-1*(Math.sqrt(1-Math.pow(l,2))-1)},circOut:function(l){return Math.sqrt(1-Math.pow(l-1,2))},circInOut:function(l){l*=2;return 1>l?-.5*(Math.sqrt(1-Math.pow(l,2))-1):.5*(Math.sqrt(1-Math.pow(l-2,2))+1)},backIn:function(l){return Math.pow(l,2)*(2.70158*l-1.70158)},backOut:function(l){--l;return Math.pow(l,2)*(2.70158*l+1.70158)+1},backInOut:function(l){l*=2;if(1>l)return Math.pow(l,
2)*(3.5949095*l-2.5949095)/2;l-=2;return(Math.pow(l,2)*(3.5949095*l+2.5949095)+2)/2},elasticIn:function(l){if(0==l||1==l)return l;--l;return-1*Math.pow(2,10*l)*Math.sin(2*(l-.075)*Math.PI/.3)},elasticOut:function(l){return 0==l||1==l?l:Math.pow(2,-10*l)*Math.sin(2*(l-.075)*Math.PI/.3)+1},elasticInOut:function(l){if(0==l)return 0;l*=2;if(2==l)return 1;var k=.3*1.5,f=k/4;if(1>l)return--l,-.5*Math.pow(2,10*l)*Math.sin(2*(l-f)*Math.PI/k);--l;return.5*Math.pow(2,-10*l)*Math.sin(2*(l-f)*Math.PI/k)+1},bounceIn:function(l){return 1-
p.bounceOut(1-l)},bounceOut:function(l){return l<1/2.75?7.5625*Math.pow(l,2):l<2/2.75?7.5625*Math.pow(l-1.5/2.75,2)+.75:l<2.5/2.75?7.5625*Math.pow(l-2.25/2.75,2)+.9375:7.5625*Math.pow(l-2.625/2.75,2)+.984375},bounceInOut:function(l){return.5>l?p.bounceIn(2*l)/2:p.bounceOut(2*l-1)/2+.5}};t.setObject("dojo.fx.easing",p);return p})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/PlayerToolbar":function(){define("dojo/_base/declare dojo/on dojo/string esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ../PlayerCommands ../PlayerThemes ./Select ./AreasSelect ./ZoomSelect ./ToolbarArranger ./ZoomUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/PlayerToolbarHolder.html dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y,C,D,G,F){F=F.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var B=t([a,b],{templateString:G,nls:F,player:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showAreaTitle:!1,stretchToolbarNode:null,canAddMoreAreas:!1,areasSelectButtons:null,areasSelect:null,pageSelect:null,zoomSelect:null,_toolbarArranger:null,_infographicSelect:null,postCreate:function(){u.hide(this.commandButtonsContainer);this._toolbarArranger=new r({showAreaTitle:this.showAreaTitle,
stretchToolbarNode:this.stretchToolbarNode,domNode:this.domNode,infographicsSelectDiv:this.infographicsSelectDiv,areaTitleDiv:this.areaTitleDiv,areaTitleInnerDiv:this.areaTitleInnerDiv,rightSideControlsBlock:this.rightSideControlsBlock,areasSelectDiv:this.areasSelectDiv,zoomSelectDiv:this.zoomSelectDiv,pageSelectDiv:this.pageSelectDiv,commandButtonsContainer:this.commandButtonsContainer});this._initAreaSelect();this._initPageSelect();this._initZoomSelect();D.autoTooltip(this.domNode)},_initAreaSelect:function(){var z=
this;this.areasSelect=(new h({player:this.player,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onChange:function(E){z.onShowAnalysisAreaAt(E.value);z.onClosePopup()},onAddMoreAreas:function(){z.onAddMoreAreas();z.onClosePopup()},onRemoveAreas:function(E,I){z.onRemoveAreas(E);I&&z.onClosePopup()},onCompareAreasSideBySide:function(){z.onCompareAreasSideBySide();z.onClosePopup()},onStopComparison:function(E){z.onShowAnalysisAreaAt(E);z.onClosePopup()}})).placeAt(this.areasSelectDiv);
this.own(this.areasSelect)},updateAreaSelect:function(z){var E=z.analysisAreas,I=z.combinedAreasInfo,L=z.currentAreaIndex,M=z.isMultiFeature;this.areasSelect.buildAreaOptions(z);this.areasSelect.set("value",L);z=1<this.areasSelect.get("options").length&&!M;u[z?"show":"hide"](this.areasSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.player.showReportTitle?500<document.body.clientWidth||!z?(this.infographicsSelectDiv.innerHTML="\x3cdiv class\x3d'TrimWithEllipses' style\x3d'max-width:"+
.4*document.body.clientWidth+"px;'\x3e"+this.player.getReportTitle()+"\x3c/div\x3e",this._toolbarArranger.showAreaTitle=!0):(this.infographicsSelectDiv.innerHTML="",this._toolbarArranger.showAreaTitle=!1):M?this.areaTitleMultiFormatter?this.areaTitleMultiFormatter(this.areaTitleInnerDiv,I):this._formatAreaTitleMulti(I):(E=E["all"===L?0:L],this.areaTitleFormatter?this.areaTitleFormatter(this.areaTitleInnerDiv,E):this._formatAreaTitle(E,L))},_formatAreaTitle:function(z,E){this.areaTitleInnerDiv.innerHTML=
"all"===E?F.allAreas:z.locationName||z.name},_formatAreaTitleMulti:function(z){this.areaTitleInnerDiv.innerHTML=z.locationName||z.name||z.shortName||""},_pageControlsVisible:!0,_initPageSelect:function(){var z=this;this.pageSelect=(new g({onChange:function(E){z.onShowPageAt(E.value);z.onClosePopup()}})).placeAt(this.pageSelectDiv);this.own(this.pageSelect)},setPageControlsVisible:function(z){this._pageControlsVisible=z;u[z?"show":"hide"](this.pageSelectDiv)},updatePageSelect:function(z,E){for(var I=
[],L=0;L<z;L++)I.push({label:l.substitute(F.pageIndex,{index:L+1}),value:L});this.pageSelect.set("options",I);this.pageSelect.set("value",E);u[this._pageControlsVisible&&1<z&&500<document.body.clientWidth?"show":"hide"](this.pageSelectDiv)},_initZoomSelect:function(){var z=this;this.zoomSelect=(new m({onChange:function(E){if(E.value===n.FIT_PAGE)z.onZoomToFitPage();else if(E.value===n.FIT_PAGE_WIDTH)z.onZoomToFitPageWidth();else if(E.value===n.FIT_PAGE_HEIGHT)z.onZoomToFitPageHeight();else z.onSetZoomPercent(E.value);
z.onClosePopup()}})).placeAt(this.zoomSelectDiv);this.own(this.zoomSelect)},setZoomSupportsInfo:function(z){u[z.supported?"show":"hide"](this.zoomSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.zoomSelect.options.forEach(function(E){E.hidden=!1;E.value!==n.FIT_PAGE||z.canFitPage?E.value!==n.FIT_PAGE_WIDTH||z.canFitPageWidth?E.value!==n.FIT_PAGE_HEIGHT||z.canFitPageHeight||(E.hidden=!0):E.hidden=!0:E.hidden=!0})},setZoomInfo:function(z){z=z.isFitPageScale?n.FIT_PAGE:z.isFitPageWidthScale?
n.FIT_PAGE_WIDTH:z.isFitPageHeightScale?n.FIT_PAGE_HEIGHT:n.getClosestZoomAndUpdateOptions(100*z.scale,this.zoomSelect.get("options"));z!==this.zoomSelect.get("value")&&this.zoomSelect.set("value",z)},createCommandButton:function(z,E){return this.createCustomCommandButton({callback:E,buttonClass:z.id===d.PRINT?"playerPrintButton":"playerExportButton",tooltip:z.id===d.PRINT?F.printInfographic:F.exportInfographic,visibleOnError:!1})},createCustomCommandButton:function(z){u.show(this.commandButtonsContainer);
var E=c.create("div",{"class":"playerToolbar_commandButtonContainer dijitInline"},this.commandButtonsContainer,z.addFirst?"first":"last");E.__visibleOnError=z.visibleOnError;E=c.create("div",{"class":"playerToolbar_commandButton"},E);z.buttonClass&&f.add(E,z.buttonClass);z.tooltip&&D.setTooltipToNode(E,z.tooltip);p(E,"click",z.callback);return E},setTheme:function(z){f.remove(this.domNode,"playerThemeDark playerThemeLight");f.add(this.domNode,z===e.DARK?"playerThemeDark":"playerThemeLight");this.areasSelect.setTheme(z);
this.pageSelect.setTheme(z);this.zoomSelect.setTheme(z)},setErrorShown:function(z){if(z)for(u.hide([this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv]),z=0;z<this.commandButtonsContainer.children.length;z++){var E=this.commandButtonsContainer.children[z];u[E.__visibleOnError?"show":"hide"](E)}},arrangeControls:function(){this._toolbarArranger.arrangeControls()},hasVisibleControls:function(){return this._toolbarArranger.hasVisibleControls()},addInfographicsSelect:function(z){this._infographicSelect=
z;z.placeAt(this.infographicsSelectDiv)},isMouseOver:function(){return y.isMouseOver(this.domNode)||this.areasSelect&&this.areasSelect.isMouseOver()||this.pageSelect&&this.pageSelect.isMouseOver()||this.zoomSelect&&this.zoomSelect.isMouseOver()||this._infographicSelect&&this._infographicSelect.isMouseOver&&this._infographicSelect.isMouseOver()},setContentLoadPromise:function(z){u.enableContentAbsolute(this.commandButtonsContainer,!1);u.enableContentAbsolute(this.infographicsSelectDiv,!1);k(z,function(){u.enableContentAbsolute(this.commandButtonsContainer,
!0);u.enableContentAbsolute(this.infographicsSelectDiv,!0)}.bind(this))},onShowPageAt:function(z){},onShowAnalysisAreaAt:function(z){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(z){},onClosePopup:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(z){}});return t([a,b],{templateString:"\x3cdiv class\x3d'esriGEPlayerToolbarOuter'\x3e\x3c/div\x3e",player:null,popupButtonDiv:null,
areaTitleFormatter:null,areaTitleMultiFormatter:null,showToolbarInPopup:!1,showAreaTitle:!1,stretchToolbarNode:null,showCloseButton:!1,canAddMoreAreas:!1,areasSelectButtons:null,toolbarHolder:null,postCreate:function(){var z=this;this.inherited(arguments);this.toolbarHolder=(new B({player:this.player,showAreaTitle:this.showAreaTitle,stretchToolbarNode:this.stretchToolbarNode,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowPageAt:function(E){z.onShowPageAt(E)},
onShowAnalysisAreaAt:function(E){z.onShowAnalysisAreaAt(E)},onCompareAreasSideBySide:function(){z.onCompareAreasSideBySide()},onZoomToFitPage:function(){z.onZoomToFitPage()},onZoomToFitPageWidth:function(){z.onZoomToFitPageWidth()},onZoomToFitPageHeight:function(){z.onZoomToFitPageHeight()},onSetZoomPercent:function(E){z.onSetZoomPercent(E)},onClosePopup:function(){z.closePopup()},onAddMoreAreas:function(){z.onAddMoreAreas()},onRemoveAreas:function(E){z.onRemoveAreas(E)}})).placeAt(this.domNode);
this.own(this.toolbarHolder)},updateAreaSelect:function(z){this.toolbarHolder.areaTitleFormatter=this.areaTitleFormatter;this.toolbarHolder.areaTitleMultiFormatter=this.areaTitleMultiFormatter;this.toolbarHolder.updateAreaSelect(z)},setPageControlsVisible:function(z){this.toolbarHolder.setPageControlsVisible(z)},updatePageSelect:function(z,E){this.toolbarHolder.updatePageSelect(z,E)},setZoomSupportsInfo:function(z){this.toolbarHolder.setZoomSupportsInfo(z)},setZoomInfo:function(z){this.toolbarHolder.setZoomInfo(z)},
createCommandButton:function(z,E){return this.toolbarHolder.createCommandButton(z,E)},setTheme:function(z){this.toolbarHolder.setTheme(z)},setErrorShown:function(z){this.toolbarHolder.setErrorShown(z);this._arrangeControls()},_arrangeControls:function(){u.show(this.domNode);this.toolbarHolder.arrangeControls();u[this.toolbarHolder.hasVisibleControls()?"show":"hide"]([this._popupButton,this.domNode])},_popupHandle:null,_popupButton:null,update:function(){w.invoke(this,"_doUpdateToolbar")},_doUpdateToolbar:function(){f[this.isScrollShown()?
"add":"remove"](this.popupButtonDiv,"playerToolbar_parentHasScroll");f[q.isMobileDevice()?"add":"remove"](this.popupButtonDiv,"isMobileDevice");f[q.isMobileDevice()?"add":"remove"](this.toolbarHolder.domNode,"isMobileDevice");this._resetToolbarNode();var z=C.isOpen(this.toolbarHolder);this._popupHandle&&this._popupHandle.remove();this._popupHandle=null;this.showToolbarInPopup?(this._popupButton=c.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_settingsButton"},this.popupButtonDiv,
"first"),this._popupHandle=C.makePopup(this.toolbarHolder,this,this._popupButton,{orient:["before","below"],openPopup:z})):c.place(this.toolbarHolder.domNode,this.domNode);this._arrangeControls()},_resetToolbarNode:function(){this.toolbarHolder.domNode.parentNode&&this.toolbarHolder.domNode.parentNode.removeChild(this.toolbarHolder.domNode);this.domNode.innerHTML="";this._popupButton&&c.destroy(this._popupButton);this._popupButton=null},closePopup:function(){this.showToolbarInPopup&&C.close(this.toolbarHolder)},
isScrollShown:function(){return!1},createCustomCommandButton:function(z){return this.toolbarHolder.createCustomCommandButton(z)},notifyCommandButtonsAdded:function(){if(this.showCloseButton)if(this.showToolbarInPopup){var z=c.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_closeButtonOuter"},this.popupButtonDiv);D.setTooltipToNode(z,F.close);p(z,"click",function(){this.onClose()}.bind(this))}else this.createCustomCommandButton({buttonClass:"playerToolbar_closeButton",tooltip:F.close,
callback:function(){this.closePopup();this.onClose()}.bind(this),visibleOnError:!0})},addInfographicsSelect:function(z){this.toolbarHolder.addInfographicsSelect(z)},isMouseOver:function(){return y.isMouseOver(this.domNode)||this.toolbarHolder.isMouseOver()},setContentLoadPromise:function(z){this.toolbarHolder.setContentLoadPromise(z)},onShowPageAt:function(z){},onShowAnalysisAreaAt:function(z){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},
onSetZoomPercent:function(z){},onClose:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(z){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/Select":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/OnDemandSelect","../PlayerThemes"],function(t,p,l,k){return t(l,{"class":"esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList esriGEOnDemandSelectSpacedOut",allowRepetitiveSelection:!1,setTheme:function(f){p[f===k.DARK?"add":
"remove"](this.domNode,"esriGEOnDemandSelectWhite")}})})},"esri/dijit/geoenrichment/OnDemandSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/store/Memory dijit/_WidgetBase dijit/_TemplatedMixin ./lists/FlowList ./lists/FlowListDefaultItemRenderer ./lists/_FlowListHoverSupport ./utils/DeviceUtil ./utils/DomUtil ./utils/MouseUtil ./utils/PopupUtil ./utils/TooltipUtil ./utils/AccessibilitySupport dojo/text!./templates/OnDemandSelect.html".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y,C){var D=t([g,m]),G={_currentSelect:null,_keyHandler:null,_mouseMoveHandler:null,_currentItemIndex:-1,_currentSearchLetter:null,setFocusedSelect:function(F){this._currentSelect=F;this._updateHandlers()},_updateHandlers:function(){var F=this;this._keyHandler&&this._keyHandler.remove();this._keyHandler=null;this._mouseMoveHandler&&this._mouseMoveHandler.remove();this._mouseMoveHandler=null;this._currentItemIndex=-1;this._currentSearchLetter=null;this._setNodeFocused(null);
this._currentSelect&&(this._keyHandler=l(document.body,"keyup",function(B){B=String.fromCharCode(B.keyCode);1===B.length&&(B=B.toLowerCase(),F._tryHighlightNextItemForKey(B))}),this._mouseMoveHandler=l(this._currentSelect.popupList.domNode,"mousemove",function(){F._setNodeFocused(null)}))},_tryHighlightNextItemForKey:function(F){F===this._currentSearchLetter?this._currentItemIndex++:this._currentItemIndex=0;this._currentSearchLetter=F;var B=this,z=this._currentSelect.store.query(function(I){return(I=
I[B._currentSelect.labelProperty])&&I.toLowerCase().charAt(0)===F});if(z.length){this._currentItemIndex>z.length-1&&(this._currentItemIndex=0);var E=(z=z[this._currentItemIndex])&&this._currentSelect.popupList.getItemNode(z);z&&this._currentSelect.popupList.scrollToItem(z);this._setNodeFocused(E)}},_currentFocusedNode:null,_setNodeFocused:function(F){this._currentFocusedNode&&(f.remove(this._currentFocusedNode,"listItemFocused"),this._currentFocusedNode=null);F&&(f.add(F,"listItemFocused"),this._currentFocusedNode=
F)}};return t([d,e],{templateString:C,value:null,popupList:null,listClass:null,placeHolderClass:"placeHolder",idProperty:"value",labelProperty:"label",options:null,store:null,itemRenderer:null,itemClass:null,placeHolder:null,requireSelection:!0,renderSelectionAsItem:!1,makePopupListWidthMatchOpenButtonWidth:!0,orient:null,noPopupOverflow:!1,stopOpenEventPropagation:!1,stopPopupInteractionEventPropagation:!0,onClickComponent:null,clearPopupOnClose:!0,detectItemHover:!1,hasSelectableItems:!0,allowRepetitiveSelection:!0,
labelTextToKeep:null,nodeToKeepAsSelected:null,openMouseEvent:null,toggleOnClick:!0,supportsKeyNavigation:!0,_closePopupOnChangeFunc:null,enableTabbing:!1,_lastPopupListScrollTop:0,postCreate:function(){var F=this;this.inherited(arguments);this._normalizeValue();this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:this.requireSelection||this._tryAssignPlaceholder();this.nodeToKeepAsSelected?this._updateSelection():n.hide(this.selectedItemHolder);this._createPopupList();this.own(this.popupList);
this.listClass&&f.add(this.popupList.domNode,this.listClass);this._popupCreationHandler=l(this.openButton,this.openMouseEvent||r.click,function(B){F.stopOpenEventPropagation&&("function"===typeof F.stopOpenEventPropagation?F.stopOpenEventPropagation(B):B.stopPropagation());F.openPopup()});this.enableTabbing&&y.registerButton(this.openButton,F.openPopup.bind(F));this.popupList.startup();this._trySelectValue();l(this.popupList.domNode,r.clickOrRelease,function(B){F.stopPopupInteractionEventPropagation&&
B.stopPropagation()});l(this.popupList.domNode,"scroll",function(B){F._lastPopupListScrollTop=F.popupList.domNode.scrollTop});w.autoTooltip(this.domNode)},_createPopupList:function(){var F=this,B=this.itemRenderer||new h;this.popupList=new (this.detectItemHover?D:g)(p.mixin({"class":"esriGEOnDemandSelectFlowList",idProperty:this.idProperty,labelProperty:this.labelProperty,itemRenderer:B,itemClass:this.itemClass,stopMouseEventPropagation:this.stopPopupInteractionEventPropagation,hasSelectableItems:this.hasSelectableItems,
enableTabbing:this.enableTabbing,allowRepetitiveSelection:this.allowRepetitiveSelection,onChange:function(){F._processOnChangeEvent()},onItemHovered:function(z){F.onItemHovered(z)}},this._buildAdditionalPopupListProperties()))},_buildAdditionalPopupListProperties:function(){return null},setValueWithEvent:function(F){var B=this.get("value");this.set("value",F);this.onChange&&this.onChange({type:"change",value:this.get("value"),previousValue:B,selectedItem:this.popupList.selectedItem})},_processOnChangeEvent:function(){if(this.popupList.selectedItem){var F=
this.value,B=this.popupList.selectedItem;this.value=B[this.idProperty];this._updateSelection();this.onChange&&this.onChange({type:"change",value:this.value,previousValue:F,selectedItem:B})}this._closePopupOnChangeFunc&&!this._closePopupOnChangeFunc(this.value)||u.close(this.popupList)},_makePopup:function(){if(this._popupCreationHandler){this._popupCreationHandler.remove();delete this._popupCreationHandler;var F=this;u.makePopup(this.popupList,this,this.openButton,{openMouseEvent:this.openMouseEvent,
stopEventPropagation:this.stopOpenEventPropagation,toggleOnClick:this.toggleOnClick,wrapperClass:this.listClass?this.listClass.split(" ").map(function(B){return B+"Popup"}).join(" "):null,orient:this.orient,allowAutoOrientation:this.allowAutoOrientation,noOverflow:this.noPopupOverflow,onClickComponent:this.onClickComponent,onPreShow:function(){F.onPopupListPreBuild();F.makePopupListWidthMatchOpenButtonWidth&&c.set(F.popupList.domNode,"minWidth",a.getContentBox(F.domNode).w+"px");F._updatePopupListStore();
F.onPopupPreOpened()},onShow:function(){F.onPopupOpened();G.setFocusedSelect(F);F._onPopupOpened()},onClose:function(){F.onPopupClosed();G.setFocusedSelect(null);F.clearPopupOnClose&&F._clearPopup()},isMouseOver:function(){return F.isMouseOverList()}})}},_clearPopup:function(){this.popupList&&this.popupList.clear&&this.popupList.clear()},_tryAssignPlaceholder:function(){if(this.placeHolder&&null===this.value)return this.selectedLabel.innerHTML=this.placeHolder,f.add(this.selectedLabel,this.placeHolderClass),
!0;f.remove(this.selectedLabel,this.placeHolderClass);return!1},_normalizeValue:function(){null!==this.value&&(void 0===this.value?this.value=null:("string"===typeof this.value&&(this.value=this.value.trim()),String(this.value)||(this.value=null)))},trySelectValue:function(F){this.value=F;this._normalizeValue();return this._trySelectValue()},_trySelectValue:function(){if(null!==this.value&&this._setValueAttr(this.value,!0))return!0;if(this.requireSelection){var F=this.store&&this.store.query();if(F&&
F.length){var B=this;this.value&&F.some(function(z){return B.value===z[B.idProperty]})?this._setValueAttr(this.value,!0):this._setValueAttr(F[0][this.idProperty],!0)}}return!1},_setValueAttr:function(F,B){this.value=F;this._normalizeValue();if(!this.store||!this.popupList)return!1;var z=this;(F=this.store.query(function(E){return E[z.idProperty]===z.value})[0])&&this.popupList.setSelectedItem(F);this._updateSelection(F);return!!F},_setOptionsAttr:function(F){this.options=F;this.store=this._createStore(F);
this._updatePopupListStore();this._trySelectValue()},_setStoreAttr:function(F){this.options=(this.store=this._createStore(F))&&this.store.query();F.idProperty&&(this.idProperty=F.idProperty);this._updatePopupListStore();this._trySelectValue()},_createStore:function(F){return F instanceof Array?new b({data:F,idProperty:this.idProperty}):F},_updatePopupListStore:function(){this.popupList&&(this.popupList.store&&this.popupList.store===this.store&&!this.clearPopupOnClose||this.popupList.setStore(this.store,
!0),this.popupList.setSelectedItem(this.getSelectedItem()),this._lastPopupListScrollTop&&(this.popupList.domNode.scrollTop=this._lastPopupListScrollTop))},getSelectedItem:function(){if(!this.store)return null;var F=this.get("value"),B=this;return void 0!==F&&this.store.query(function(z){return z[B.idProperty]===F})[0]},setSelectedItem:function(F){this.store&&this.popupList&&F&&this._setValueAttr(F[this.idProperty],!0)},getSelectedIndex:function(){var F=this,B=-1;if(this.store){var z=this.get("value");
void 0!==z&&this.store.query().some(function(E,I){if(E[F.idProperty]==z)return B=I,!0})}return B},setSelectedIndex:function(F){this.setSelectedItem(this.store&&this.store.data[F])},_nodeToKeepAsSelectedPlacedFlag:!1,_updateSelection:function(F){F=F||this.getSelectedItem();this.nodeToKeepAsSelected?this._nodeToKeepAsSelectedPlacedFlag||(n.hide(this.selectedLabel),n.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",k.place(this.nodeToKeepAsSelected,this.selectedItemHolder),this._nodeToKeepAsSelectedPlacedFlag=
!0):this.renderSelectionAsItem?(n.hide(this.selectedLabel),n.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",F&&this.popupList.itemRenderer.createPresentation(F,!1,this.selectedItemHolder,this.popupList)):(n.hide(this.selectedItemHolder),this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:(this.selectedLabel.innerHTML=F?F[this.labelProperty]:"",this.selectedLabel.innerHTML&&f.remove(this.selectedLabel,this.placeHolderClass),n[this.selectedLabel.innerHTML||this._tryAssignPlaceholder()?
"show":"hide"](this.selectedLabel)))},refresh:function(){this.popupList.refresh();this._updateSelection()},isPopupOpen:function(){return u.isOpen(this.popupList)},openPopup:function(){this.isPopupOpen()||(this._makePopup(),u.open(this.popupList))},closePopup:function(){this._popupCreationHandler||u.close(this.popupList)},refreshPopup:function(){this.isPopupOpen()&&u.refresh(this.popupList)},isMouseOver:function(F){return q.isMouseOver(this.domNode,{event:F})||this.isMouseOverList(F)},isMouseOverList:function(F){return this.popupList&&
q.isMouseOver(this.popupList.domNode,{event:F})},onPopupListPreBuild:function(){},onPopupPreOpened:function(){},onPopupOpened:function(){},_onPopupOpened:function(){},onPopupClosed:function(){},onChange:function(F){},onItemHovered:function(F){},destroy:function(){this._popupCreationHandler&&this._popupCreationHandler.remove();this.closePopup(this.popupList);this.popupList.destroy();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/lists/FlowList":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on ../utils/DeviceUtil ../utils/DnDUtil ../utils/MouseUtil ../utils/TooltipUtil ./FlowListDefaultItemRenderer ../utils/PopupUtil ../utils/AccessibilitySupport dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r){var n=t([m,r],{templateString:"\x3cdiv class\x3d'esriGEFlowList esriGENonSelectable'\x3e\x3c/div\x3e",idProperty:"value",labelProperty:"label",selectedIndex:-1,selectedItem:null,items:null,store:null,defaultItemRendererClass:e,itemRenderer:null,itemClass:null,itemClassSelected:null,keepScrollPosition:!1,allowRepetitiveSelection:!0,selectOnMouseDown:!1,noDragTolerance:0,selectionValidator:null,allowManualSelection:!0,stopMouseEventPropagation:!0,hasSelectableItems:!0,
autoDetectUrlsInLabels:!1,storeItemsInInnerDiv:!1,enableTabbing:!1,_addedWrappers:null,_clickHandles:null,_valueOnCreation:null,_isCreated:!1,itemsDiv:null,postCreate:function(){this.inherited(arguments);this.itemsDiv=this.storeItemsInInnerDiv?l.create("div",{"class":"esriGEFlowList_innerDiv"},this.domNode):this.domNode;this._clearHandlers();this._setUpItemRenderer();d.autoTooltip(this.domNode);this._isCreated=!0;this._valueOnCreation?this._setValueAttr(this._valueOnCreation):this.refresh()},_setUpItemRenderer:function(){this.itemRenderer||
(this.itemRenderer=new this.defaultItemRendererClass);this.itemClass&&(this.itemRenderer.itemClass=this.itemClass);this.itemClassSelected&&(this.itemRenderer.itemClassSelected=this.itemClassSelected)},_getValueAttr:function(){return this.selectedItem&&this.selectedItem[this.idProperty]},_setValueAttr:function(q){var u=this;if(this._isCreated){var w=this.items||this.store&&this.store.data;w&&w.some(function(y){if(y[u.idProperty]==q)return u.setSelectedItem(y),!0})}else this._valueOnCreation=q},_scrollTopMemo:0,
memoScroll:function(){this._scrollTopMemo=this.domNode.scrollTop},applyScrollFromMemo:function(){this.domNode.scrollTop=this._scrollTopMemo||0},_setItemsAttr:function(q){this.setItems(q)},setItems:function(q,u){this.keepScrollPosition&&this.memoScroll();this.clear();this.items=q;u||(this.items&&this._isCreated?(this._addItems(q),this._checkIfStillSelected(),this.keepScrollPosition&&this.applyScrollFromMemo(),this.onItemsSet()):this._checkIfStillSelected())},_checkIfStillSelected:function(){if(-1!=
this.selectedIndex||this.selectedItem){var q=this;this._addedWrappers&&this._addedWrappers.some(function(u,w){return q._isItemSelected(u,w)})||(this.selectedIndex=-1,this.selectedItem=null)}},refresh:function(){this.store?this.setStore(this.store):this.setItems(this.items)},setSelectedItem:function(q,u){this.hasSelectableItems&&(this.selectedItem=q,this.selectedIndex=-1,this.refresh(),u&&this._dispatchChangeEvent())},setSelectedIndex:function(q,u){this.hasSelectableItems&&(this.selectedIndex=q,this.selectedItem=
null,this.refresh(),u&&this._dispatchChangeEvent())},getItemNode:function(q){var u;this._addedWrappers&&this._addedWrappers.some(function(w){if(w.itemRef===q)return u=w.__itemPresentation,!0});return u},getItemByNode:function(q){var u;this._addedWrappers&&this._addedWrappers.some(function(w){if(w.__itemPresentation===q)return u=w.itemRef,!0});return u},getItemByValue:function(q){var u,w=this;this._addedWrappers&&this._addedWrappers.some(function(y){if(y[w.idProperty]===q)return u=y.itemRef,!0});return u},
__selectedPresentation:null,_addItems:function(q){this._addedWrappers=this._addedWrappers||[];var u=this;q.forEach(function(w){var y=p.mixin({},w);y.itemRef=w;u.__addWrapper(y)})},__addWrapper:function(q){var u=this._addedWrappers.length,w=this.itemRenderer.createPresentation(q.itemRef,this._isItemSelected(q,u),this.itemsDiv,this,q);w&&(w.index=u,w.item=q.itemRef,q.__itemPresentation=w,this._isItemSelected(q,u)&&(this.selectedItem=q.itemRef,this.selectedIndex=u,this.__selectedPresentation=w),this._addClickHandler(w),
this._addedWrappers.push(q),q=this._addedWrappers.length-1,k.add(w,"listItem_"+q),k.add(w,"listItem_"+(0==q%2?"even":"odd")))},_isItemSelected:function(q,u){return this.hasSelectableItems&&this._isItemClickable(q)?u==this.selectedIndex||q.itemRef===this.selectedItem?!0:q.itemRef&&this.selectedItem?(q=q.itemRef[this.idProperty],u=this.selectedItem[this.idProperty],void 0!==q&&q===u):!1:!1},_isItemClickable:function(q){return this.selectionValidator?this.selectionValidator(q):this._selectionValidatorDefault(q)},
_selectionValidatorDefault:function(q){return!!q&&!q.isSeparator&&!1!==q.enabled},_addClickHandler:function(q){function u(){(w.allowRepetitiveSelection||w.__selectedPresentation!=q)&&w._isItemClickable(q.item)&&(w.__selectedPresentation&&w.itemRenderer.selectPresentation&&w.itemRenderer.selectPresentation(w.__selectedPresentation,!1,w.__selectedPresentation.item),w.itemRenderer.selectPresentation&&w.itemRenderer.selectPresentation(q,w.hasSelectableItems,q.item),w.__selectedPresentation=q,w.selectedIndex=
q.index,w.selectedItem=q.item,w._dispatchChangeEvent())}var w=this;if(this.allowManualSelection){var y=this.selectOnMouseDown||!this.noDragTolerance?f(q,this.selectOnMouseDown?c.press:c.click,function(C){w.stopMouseEventPropagation&&C.stopPropagation();u()}):a.addNoDragClickHandler(q,u,{tolerance:this.noDragTolerance});this._clickHandles.push(y);this.enableTabbing&&h.registerButton(q,u,q.item[this.labelProperty])}},_dispatchChangeEvent:function(){this.onChange({type:"change",selectedIndex:this.selectedIndex,
selectedItem:this.selectedItem,value:this.selectedItem&&this.selectedItem[this.idProperty]})},clear:function(){this.__selectedPresentation=null;this._addedWrappers=this._addedWrappers||[],this._addedWrappers.forEach(function(q){q.destroyPresentation&&q.destroyPresentation()});this._addedWrappers.length=0;this.itemsDiv&&(this.itemsDiv.innerHTML="");this._clearHandlers()},_clearHandlers:function(){this._clickHandles=this._clickHandles||[];this._clickHandles.forEach(function(q){q.remove()});this._clickHandles.length=
0},scrollToItem:function(q){if(q=this.getItemNode(q))this.domNode.scrollTop=q.offsetTop},store:null,onDemandModeLoadStep:1E3,onDemandPopulateLimit:1E3,onDemandPopulatePeriod:200,_storeScrollHandler:null,_setStoreAttr:function(q){this.setStore(q)},setStore:function(q){if(this.domNode)if(this.keepScrollPosition&&this._memoScroll(),this.clear(),this.idProperty=(this.store=q)&&q.idProperty,this.store&&this._isCreated){this._loadNextPart();this._checkIfStillSelected();this.keepScrollPosition&&this.applyScrollFromMemo();
var u=this;this._storeScrollHandler=this._storeScrollHandler||f(this.domNode,"scroll",function(){var w=u._addedWrappers[u._addedWrappers.length-30];(w=w?w.__itemPresentation:null)&&w.offsetTop<u.domNode.scrollTop&&u._loadNextPart()})}else this._checkIfStillSelected()},_loadNextPart:function(){if(this.store&&this.store.query().length!=this._addedWrappers.length){var q=this.store.query(null,{start:this._addedWrappers.length,count:this.onDemandModeLoadStep});delete q.total;this._addItems(q);q.length&&
this._addedWrappers.length<this.onDemandPopulateLimit&&(q=this._loadNextPart.bind(this),setTimeout(q,this.onDemandPopulatePeriod))}},isMouseOver:function(q){return b.isMouseOver(this.domNode,{event:q})},onChange:function(q){},onItemsSet:function(){},destroy:function(){this.clear();this.inherited(arguments)}});n.createPopup=function(q){function u(){w||(w=new n({"class":q.listClass,itemRenderer:q.itemRenderer,items:q.options,onChange:function(y){q.onChange(y);!q.keepSelection&&w.setSelectedItem(null);
g.close(w)}}),q.doNotOwn||q.wizard.own(w),q.isDeferred&&q.isDeferred(w));return w}var w;g.makePopup(q.isDeferred?u:u(),q.wizard,q.aroundNode,q.popupOptions||{});return w};return n})},"esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct ../utils/DomUtil ../utils/TooltipUtil ../utils/RegExpUtil ../utils/UrlUtil".split(" "),function(t,p,l,k,f,c,a,b){return t(null,{itemClass:"",itemClassSelected:"",labelClass:"",
createLabelNode:!1,createImageAfterLabel:!1,constructor:function(d){p.mixin(this,d)},createPresentation:function(d,e,g,h,m){if(d.isSeparator)return e=k.create("div",{"class":"flowList_listSeparator"},g),d.hidden&&f.hide(e),e;g=k.create("div",{"class":"listItem "+(this.itemClass||" ")+(d.itemClass||""),style:d.style},g);d.isLink&&l.add(g,"esriGELink");!1===d.enabled&&l.add(g,"disabled");this._createParts(d,g,h);this._setTooltip(d,g,h);this.selectPresentation(g,e,d);d.hidden&&f.hide(g);return g},_setTooltip:function(d,
e,g){d.tooltip&&g.own(c.setTooltipToNode(e,d.tooltip))},_createParts:function(d,e,g){if(this.createImageAfterLabel){this._createLabel(d,e,g);var h=!0}this._createImage(d,e,g);!h&&this._createLabel(d,e,g)},_createImage:function(d,e,g){if(e=this._createImageNode(d,e,g))d.imageClass&&l.add(e,d.imageClass),d.imageUrl&&(e.style="background-image: url("+d.imageUrl+");")},_createImageNode:function(d,e,g){return e},_createLabel:function(d,e,g){if(this.createLabelNode)return e=k.create("div",{innerHTML:d[g.labelProperty],
"class":"dijitInline TrimWithEllipses listItemLabel"},e),d.labelClass&&l.add(e,d.labelClass),this.labelClass&&l.add(e,this.labelClass),g.autoDetectUrlsInLabels&&this._tryConvertToUrls(e),e;d[g.labelProperty]&&(e.innerHTML=d[g.labelProperty],g.autoDetectUrlsInLabels&&this._tryConvertToUrls(e))},_tryConvertToUrls:function(d){var e=d.innerHTML.match(a.IS_URL_RE);if(e=e&&e[0])d.innerHTML=d.innerHTML.replace(e,"\x3ca href\x3d'"+b.toHttpsUrl(e)+"' target\x3d'_blank'\x3e"+e+"\x3c/a\x3e")},selectPresentation:function(d,
e,g){l[e?"add":"remove"](d,"listItemSelected "+this.itemClassSelected)}})})},"esri/dijit/geoenrichment/utils/RegExpUtil":function(){define([],function(){var t={createRegExp:function(b,d,e){b=t.trimText(b);return!b&&e?null:new RegExp(b,d)},trimText:function(b){return b?b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,"").trim():""},replace:function(b,d,e){return null==b?"":(""+b).replace(d,function(g){return e[g]||""})}},p=/&|<|>/g,l=/&|<|>|"|'/g,k={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;",
"'":"\x26apos;"};t.encodeXML=function(b,d){return t.replace(b,d?l:p,k)};var f=/&amp;|&lt;|&gt;|&quot;|&apos;/g,c={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26apos;":"'"};t.decodeXML=function(b){return t.replace(b,f,c)};t.IS_RICH_TEXT_RE=/<\w/;t.IS_URL_RE=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;t.isRichText=function(b){return b&&t.IS_RICH_TEXT_RE.test(b)};t.isUrl=function(b){return b&&t.IS_URL_RE.test(b)};
var a=/^[0-9a-fA-F]{32}$/;t.isId=function(b){return b&&a.test(b)};return t})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils","esri/arcgis/utils"],function(t,p,l,k,f){var c={getDomain:function(b){if("string"!==typeof b)return null;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");var d=b.indexOf("/");return 0>d?b:b.substr(0,d)},getPortalUrl:function(b){if("string"!==typeof b)return null;b=b.replace(/\?.*$/,"");var d=b.match(/^(.+)\/sharing(\/|$)/i);
return d||(d=b.match(/^(.+)\/home$/i))?d[1]:(d=b.match(/^(.+)\/portal(\/|$)/i))?d[1]+"/portal":b},getProxyUrl:function(b){var d=p.defaults.io.proxyUrl;d&&!/^http/i.test(d)&&(d=k.getAbsoluteUrl(d));d&&b&&(d=c.toHttpsUrl(d));return d},registerCORS:function(b){(b=c.getDomain(b))&&-1==p.defaults.io.corsEnabledServers.indexOf(b)&&p.defaults.io.corsEnabledServers.push(b);c._fixCORS()},_fixCORS:function(){p.defaults.io.corsEnabledServers=p.defaults.io.corsEnabledServers.filter(function(b){return b.indexOf&&
0===b.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+b),!1):!0})},indexOfQuery:function(b){var d=b.indexOf("?");0<=d&&(b=b.substr(d+1),/^(http:\/\/|https:\/\/)/i.test(b)&&(b=b.indexOf("?"),d=0<=b?d+1+b:-1));return d},removeQuery:function(b){var d=c.indexOfQuery(b);return 0>d?b:b.substr(0,d)},addQueryPart:function(b,d){var e=0>c.indexOfQuery(b)?"?":"\x26";return b+e+d},getVariableValue:function(b,d){if(b&&"string"===typeof d){var e=k.urlToObject(b);if(e.query){var g={};Object.keys(e.query).forEach(function(h){g[h.toLowerCase()]=
e.query[h]});return g[d.toLowerCase()]}}},addUrlVariable:function(b,d,e){d=encodeURIComponent(d);e=encodeURIComponent(e);return c.addQueryPart(b,d+"\x3d"+e)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(b){return!b||/^http/i.test(b)?b:"http://"+b},toHttpsUrl:function(b){b&&(b=c.toHttpUrl(b));if(!b||!/^http:\/\//i.test(b))return b;var d=new t(b);b=b.replace(/^http/i,"https");var e=c.securePortsMap[d.port];e&&(b=b.replace(":"+d.port,":"+e));return b},combine:function(b,d){"number"===typeof d&&
(d+="");if(d){if(/^(http:\/\/|https:\/\/)/i.test(d)||!b)return d;"/"!=d.charAt(0)&&(d="/"+d);if(1==d.length)return b;var e=b.length-1;"/"==b.charAt(e)&&(b=b.substr(0,e));var g=k.urlToObject(b);b=c.removeQuery(b);e=b.length-d.length;0<=e&&b.substr(e).toLowerCase()==d.toLowerCase()&&(b=b.substr(0,e));b+=d;for(var h in g.query)c.addQueryPart(b,g.query[h])}return b},combineMulti:function(b){for(var d=b[0],e=1;e<b.length;e++)d=c.combine(d,b[e]);return d},openUrl:function(b,d){if(d)return window.open(b,
"_blank");d=window.open();d.opener=null;d.referrer=null;d.location=b;return d},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},getToken:function(b){return(b=b&&l.id.findCredential(b)||l.id.credentials[0])&&b.token}},a;c.getArcgisUrl=function(){return a};c.setArcgisUrl=function(b){b&&(a=b,f.arcgisUrl=c.combine(b,"/sharing/rest/content/items"))};return c})},"esri/dijit/geoenrichment/utils/PopupUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/onClickTouch dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config dijit/popup dijit/place dijit/Viewport ./DeviceUtil ./DnDUtil ./MouseUtil dojo/domReady!".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r){function n(u){if(!u)return["below"];var w=[];u.forEach(function(y){var C=f.isBodyLtr();switch(y){case "before-alt":C=!C;case "after-alt":w.push(C?{aroundCorner:"BR",corner:"BL"}:{aroundCorner:"BL",corner:"BR"});w.push(C?{aroundCorner:"TR",corner:"TL"}:{aroundCorner:"TL",corner:"TR"});return}w.push(y)});return w}var q={makePopup:function(u,w,y,C){function D(T){if(C.overlay&&T._popupWrapper){var X=k.create("div",{"class":C.overlay.overlayClass});if(C.overlay.overlayParent)k.place(X,
C.overlay.overlayParent);else{k.place(X,I,"before");var U=c.get(T._popupWrapper,"zIndex");c.set(X,"zIndex",U)}T.__popupOverlay=X}}function G(T){T.__popupOverlay&&(k.destroy(T.__popupOverlay),T.__popupOverlay=null)}function F(T){L=!1;T.__bodyClickHandler&&T.__bodyClickHandler.remove();T.__bodyClickHandler=null;T.__popupWidgetOpenFlag=!1;G(T);C.onClose&&C.onClose()}function B(T){T&&C.stopEventPropagation&&T.stopPropagation();L||(L=!0,a(E||("function"==typeof u?u():u),function(X){E=X;E.domNode?(E.__openPopupWidgetFunc=
B,I=d.moveOffScreen(E),a(C.onPreShow&&C.onPreShow(),function(){var U=n(C.orient);if(I&&!1!==C.allowAutoOrientation){var aa=U.indexOf("below");-1!==aa&&-1===U.indexOf("above")&&U.splice(aa+1,0,"above")}aa=-1;if(-1!==U.indexOf("after")||-1!==U.indexOf("before")){aa=g.getEffectiveBox(this.ownerDocument);var Y=f.position(y,!1);aa=Math.floor(Math.max(Y.y+Y.h,aa.h-Y.y))-10}C.noOverflow&&(E.baseClass="esriGENoOverflow "+E.baseClass);w.isLeftToRight=w.isLeftToRight=function(){return"rtl"!==document.dir};
d.open({parent:w,popup:E,around:y,maxHeight:aa,orient:U,onClose:function(){F(E)}});d._stack[d._stack.length-1].handlers.forEach(function(K){K.remove()});C.suppressReposition&&clearTimeout(d._aroundMoveListener);C.noOverflow&&(E.baseClass=E.baseClass.replace("esriGENoOverflow ",""));I&&C.wrapperClass&&l.add(I,C.wrapperClass);E.__popupInfo=t.mixin({},d.getTopPopup());E.__popupInfo.orient=U;E.__popupInfo.around=y;G(E);D(E);C.onShow&&C.onShow(E);E.__popupWidgetOpenFlag=!0;Q&&E.own&&E.own(Q);E.__bodyClickHandler&&
E.__bodyClickHandler.remove();if(!1!==C.closeOnClickOutside){var ea="function"===typeof C.closeOnClickOutside?C.closeOnClickOutside:null;setTimeout(function(){E.__bodyClickHandler&&E.__bodyClickHandler.remove();E.__bodyClickHandler=p(document.body,h.isMobileDevice()?h.press:z,function(K){L&&(r.fixTouchEvent(K),ea&&!ea(K)||r.isMouseOver(I)||C.isMouseOver&&C.isMouseOver()||E.isMouseOver&&E.isMouseOver()||E.__lockPopupWidgetFlag||q.close(E))})})}})):L=!1}))}if(u){if(b.isPlayerOnServer)return{remove:function(){}};
C=C||{};var z=C.openMouseEvent?C.openMouseEvent:h.clickOrRelease,E="function"!==typeof u?u:null;if(E)var I=d.moveOffScreen(E);var L=!1;E&&(E.__openPopupWidgetFunc=B);if(!1!==C.openOnMouseEvent){var M=B;if(C.toggleOnClick){var O;M=function(T){O=O||T.type;E?O===T.type&&q.toggle(E):B()}}var Q=!1===C.onClickComponent?null:void 0!==C.noDragClickTolerance?m.addNoDragClickHandler(C.onClickComponent||y,M,{tolerance:C.noDragClickTolerance}):p(C.onClickComponent||y,z,M)}C.openPopup&&B();return{remove:function(){E&&
"function"!==typeof E&&(q.close(E),F(E),E._popupWrapper&&(E.domNode&&E.domNode.parentNode===E._popupWrapper&&E._popupWrapper.removeChild(E.domNode),k.destroy(E._popupWrapper),delete E._popupWrapper),delete E.__openPopupWidgetFunc,delete E.__popupWidgetOpenFlag);Q&&Q.remove()}}}},setLocked:function(u,w){u.__lockPopupWidgetFlag=w},open:function(u){u&&!u.__lockPopupWidgetFlag&&!u.__popupWidgetOpenFlag&&u.__openPopupWidgetFunc&&u.__openPopupWidgetFunc()},close:function(u){u&&!u.__lockPopupWidgetFlag&&
d.close(u)},isOpen:function(u){return!(!u||!u.__popupWidgetOpenFlag)},toggle:function(u){q.isOpen(u)?q.close(u):q.open(u)},refresh:function(u){if(u){u=u.__popupInfo;var w=f.isBodyLtr();u&&e.around(u.wrapper,u.around,u.orient,w)}},getWrapper:function(u){return u&&u._popupWrapper}};return q})},"esri/dijit/geoenrichment/utils/onClickTouch":function(){define(["dojo/_base/lang","dojo/on","dojo/sniff"],function(t,p,l){var k=l("touch");return t.mixin(function(f,c,a,b){if(k){switch(c){case "click":c="touchstart,click";
break;case "mousedown":c="touchstart,mousedown";break;case "mouseup":c="touchend,mouseup";break;case "clickend":c="touchend,click";break;default:return p(f,c,a,b)}var d=!1;return p(f,c,function(e){"touchstart"===e.type||"touchend"===e.type?(a.call(this,e),d=!0,setTimeout(function(){d=!1},500)):d||a.call(this,e)},b)}"clickend"===c&&(c="click");return p(f,c,a,b)},p)})},"esri/dijit/geoenrichment/utils/AccessibilitySupport":function(){define([],function(){var t=null;return{initialize:function(p){t=p},
registerButton:function(p,l,k){t&&t(p,l,k)}}})},"esri/dijit/geoenrichment/lists/_FlowListHoverSupport":function(){define(["dojo/_base/declare","dojo/on","../utils/MouseUtil"],function(t,p,l){var k=t(null,{_list:null,_checkIntervalH:null,constructor:function(f){this._list=f},setHoveredItem:function(f){clearInterval(this._checkIntervalH);this._emitHoverEvent(f);this._checkIntervalH=setInterval(function(){l.isMouseOver(f)||this.setHoveredItem(null)}.bind(this),100)},_emitHoverEvent:function(f){this._list.onItemHovered({type:"itemHover",
index:f?f.index:-1,item:f?f.item:null,value:f?f.item[this._list.idProperty]:void 0})}});return t(null,{_mouseHelper:null,postCreate:function(){this._mouseHelper=new k(this);this.inherited(arguments)},_addClickHandler:function(f){this.inherited(arguments);this._clickHandles.push(p(f,"mouseover",function(){this._mouseHelper.setHoveredItem(f)}.bind(this)))},onItemHovered:function(f){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/AreasSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/ToggleButton esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../PlayerViewModes ./Select ./ComparisonSettings ../dataProvider/supportClasses/areas/AnalysisAreaUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n){n=n.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var q=t(a,{canRemoveAreas:!1,canMoveAreas:!1,wrapInCards:!1,nls:null,createPresentation:function(u,w,y,C){var D=this,G=this.inherited(arguments);if(u.isSeparator)return G;G.innerHTML="";if("all"===u.value){G.style.cursor="pointer";var F=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},G);(new c(F,{mode:"toggle"})).set("checked",this.isCompareAll());k.create("div",{"class":"dijitInline",
innerHTML:u.label},G);G.addEventListener("click",function(){if(D.isCompareAll())D.onStopComparison();else D.onCompareAreasSideBySide()});r.setTooltipToNode(G,this.isCompareAll()?this.nls.compareAreasSideBySideTooltipOff:this.nls.compareAreasSideBySideTooltipOn,{position:["before","after"]});return G}if("addAreas"===u.value)return G.style.cursor="pointer",k.create("div",{"class":"dijitInline esriGESpaceAfterBig esriGEReportPlayerToolbar_addMoreAreasIcon"},G),k.create("div",{"class":"dijitInline",innerHTML:u.label},
G),G.addEventListener("click",function(){D.onAddMoreAreas()}),G;if(u.isAdditional)return G.style.cursor="pointer",u.buttonInfo.imageClass&&k.create("div",{"class":"dijitInline esriGESpaceAfterBig "+u.buttonInfo.imageClass},G),k.create("div",{"class":"dijitInline",innerHTML:u.label},G),G.addEventListener("click",function(z){u.buttonInfo.callback(z);D.onClosePopup()}),u.buttonInfo.tooltip&&(F=k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEInfoIcon"},G),r.setTooltipToNode(F,u.buttonInfo.tooltip,
u.buttonInfo.tooltipParams)),u.buttonInfo.onCreated&&u.buttonInfo.onCreated(G),G;if(u.canSelect){F=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},G);var B=new f(F);B.autoToggle=!1;B.set("checked",u.selected);G.addEventListener("click",function(){u.selected=!u.selected;B.set("checked",u.selected);u.isGroup?u.children.forEach(function(z){z.selected=u.selected}):u.parent&&(u.parent.selected=u.parent.children.some(function(z){return z.selected}));D.onVisibilityChanged()})}this.canRemoveAreas&&
u.isHost&&(F=k.create("div",{"class":"esriGEFloatEnd esriGESpaceBeforeBig esriGEReportPlayerToolbar_removeAreaButton"},G),F.addEventListener("click",function(z){z.stopPropagation();D.onRemoveAreas(u.isArea?[u.analysisArea]:u.analysisAreas)}),r.setTooltipToNode(F,u.isGroup?this.nls.removeAreasFromInfographic:this.nls.removeAreaFromInfographic));this.canMoveAreas&&u.isHost&&this.isCompareAll()&&(F=k.create("div",{"class":"esriGEFloatEnd upDownArrowsBlock"},G),0<u.hostIndex&&k.create("div",{"class":"dijitInline upArrow"},
F).addEventListener("click",function(z){z.stopPropagation();D.onMoveUp(u)}),u.hostIndex<this.getNumHostItems()-1&&k.create("div",{"class":"dijitInline downArrow"},F).addEventListener("click",function(z){z.stopPropagation();D.onMoveDown(u)}));F=k.create("div",{"class":"dijitInline",innerHTML:u.label},G);u.parent&&(F.style.paddingLeft="20px");this.wrapInCards&&(u.isArea&&!u.parent?l.add(G,"areaCard_only"):u.isGroup?l.add(G,"areaCard_groupTop"):u.isArea&&l.add(G,u.parent.children.indexOf(u)===u.parent.children.length-
1?"areaCard_groupBottom":"areaCard_groupMiddle"));this.selectPresentation(G,w,u);return G},isCompareAll:function(){return!1},getNumHostItems:function(){return 0},onAddMoreAreas:function(){},onRemoveAreas:function(u){},onVisibilityChanged:function(){},onMoveUp:function(u){},onMoveDown:function(u){},onCompareAreasSideBySide:function(){},onStopComparison:function(){},onClosePopup:function(){}});return t(d,{"class":"dijitInline esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList800 esriGEOnDemandSelectSpacedOut esriGEReportPlayerToolbar_areasSelectList",
player:null,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettingsBlock:null,comparisonSettings:null,_nls:null,buildRendering:function(){var u=this;this.inherited(arguments);this._nls=p.mixin({},n,this.player.nlsMap);this.itemRenderer=new q({nls:this._nls,onAddMoreAreas:function(){u.onAddMoreAreas();u.closePopup()},onRemoveAreas:function(w){var y=2>=u._getNumHostItems();u.onRemoveAreas(w,y);y&&u.closePopup()},isCompareAll:function(){return u.player.viewMode===b.PANELS_IN_STACK_ALL},getNumHostItems:function(){return u._getNumHostItems()},
onVisibilityChanged:function(){var w={};u.get("options").forEach(function(y){y.isArea&&(w[y.analysisArea.index]=y.selected)});u.refresh();u.player.getCurrentReportContainer().setAreasVisibilityState(w,{append:!0})},onMoveUp:function(w){},onMoveDown:function(w){},onCompareAreasSideBySide:function(){u.onCompareAreasSideBySide();u.closePopup()},onStopComparison:function(){var w=-1;u.get("options").some(function(y){if(y.analysisArea&&!y.analysisArea.hidden)return w=y.analysisArea.index,!0});u.onStopComparison(w);
u.closePopup()},onClosePopup:function(){u.closePopup()}})},_buildAdditionalPopupListProperties:function(){var u=this;return{selectionValidator:function(w){return u.player.viewMode!==b.PANELS_IN_STACK_ALL&&!!w&&!w.isSeparator&&!1!==w.enabled}}},buildAreaOptions:function(u){var w=g.groupAreas(u),y=1<w.groupInfos.length&&!w.isOnlyAreasInOnlyGroup;this.itemRenderer.wrapInCards=y;this.itemRenderer.canRemoveAreas=y&&!h.isMobileDevice();this.itemRenderer.canMoveAreas=!1;var C=[],D=0;w.groupInfos.forEach(function(G,
F){if(G.isRealGroup){var B={isGroup:!0,isHost:!0,hostIndex:D++,label:G.label,value:"group_"+F,enabled:!1,analysisAreas:G.areas,children:[]};C.push(B)}G.areas.forEach(function(z){z={isArea:!0,label:z.shortName||z.name||"",value:z.index,analysisArea:z,parent:B,isHost:!B};z.isHost&&(z.hostIndex=D++);C.push(z);B&&B.children.push(z)})});w={isSeparator:!0};C.push(w);this.player.viewMode!==b.PANELS_IN_SLIDES&&(!h.isMobileDevice()&&1<u.analysisAreas.filter(function(G){return!G.hidden}).length&&C.push({label:this._nls.compareAreasSideBySide,
value:"all"}),this.canAddMoreAreas&&C.push({label:this._nls.addMoreAreas,value:"addAreas"}));this.areasSelectButtons&&this.areasSelectButtons.forEach(function(G){G.isVisible&&!G.isVisible()||C.push({label:G.label,value:G.id,isAdditional:!0,buttonInfo:G})});C[C.length-1]===w&&C.pop();this._updateTreeSelection(C);this.set("options",C);this._updateComparisonSettings()},_getNumHostItems:function(){var u=0;this.get("options").some(function(w){w.isHost&&u++});return u},onPopupListPreBuild:function(){this._updateTreeSelection()},
_updateTreeSelection:function(u){if(this.player.viewMode===b.PANELS_IN_STACK_ALL){var w=this.player.getCurrentReportContainer().getAreasVisibilityState();u=u||this.get("options");u.forEach(function(y){if(y.isGroup||y.isArea)y.canSelect=!0,y.isGroup?(y.children.forEach(function(C){C.selected=w[C.analysisArea.index]}),y.selected=y.children.some(function(C){return C.selected})):y.selected=w[y.analysisArea.index]})}},_updateComparisonSettings:function(){var u=this;this.comparisonSettings&&this.comparisonSettings.destroy();
this.comparisonSettings=null;this.comparisonSettingsBlock&&k.destroy(this.comparisonSettingsBlock);this.comparisonSettingsBlock=null;this.player.viewMode===b.PANELS_IN_STACK_ALL&&(this.comparisonSettingsBlock=k.create("div",{"class":"dijitInline esriGEClickable"},this.domNode.parentNode),k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEIcon16 esriGEReportPlayerToolbar_comparisonSettingsIcon"},this.comparisonSettingsBlock),m.makePopup(function(){u.comparisonSettings||(u.comparisonSettings=
new e({player:u.player,onChange:function(){u.player.getCurrentReportContainer().setComparisonSettings(u.comparisonSettings.getSettings())}}));u.comparisonSettings.setSettings(u.player.getCurrentReportContainer().getComparisonSettings());return u.comparisonSettings},this,this.comparisonSettingsBlock))},onAddMoreAreas:function(){},onRemoveAreas:function(u,w){},onCompareAreasSideBySide:function(){},onStopComparison:function(u){},destroy:function(){this.comparisonSettings&&this.comparisonSettings.destroy();
this.inherited(arguments)}})})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil ./utils/AccessibilitySupport".split(" "),function(t,p,l,k,f,c,a,b,d){return t(k,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(e,g,h,m){var r=b.isMobileDevice()?"touchstart":"click";g=g||{};var n=g["class"];
g["class"]=(n?n+" ":"")+"esriTriStateCheckBoxIcon";if(n=g.label){if(e instanceof HTMLLabelElement)e.innerHTML="\x26nbsp;"+n;else{var q=g.labelAttrs||{};q.innerHTML="\x26nbsp;"+n;q=c.create("label",q);e&&c.place(q,e);e=q}g=l.mixin({},g);delete g.label;delete g.labelAttrs}this.checkboxNode=c.create("div",g,e,e instanceof HTMLLabelElement?"first":h);this._currentClass=this._composeClass();a.add(this.checkboxNode,this._currentClass);e instanceof HTMLLabelElement?(f(e,r,l.hitch(this,this._onClick)),a.add(e,
"esriTriStateCheckBoxLabel"),m&&d.registerButton(e,this._onClick.bind(this),n)):(f(this.checkboxNode,r,l.hitch(this,this._onClick)),m&&d.registerButton(this.checkboxNode,this._onClick.bind(this),n));this.domNode=n?e:this.checkboxNode},postscript:function(){},_onClick:function(e){this.disabled||(this.autoToggle&&this.toggle(),e&&(e.checked=this.checked),this.onClick(p.fix(e)))},onClick:function(e){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(e){e!==
this.checked&&(this.checked="mixed"===e?e:this._lastChecked=!!e,this._updateClass())},_disabledSetter:function(e){this.disabled=!!e;this._updateClass()},_updateClass:function(){var e=this._composeClass();e!==this._currentClass&&(a.replace(this.checkboxNode,e,this._currentClass),this._currentClass=e)},_composeClass:function(){var e="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?e+"Disabled":e}})})},"esri/dijit/geoenrichment/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/Stateful","dojo/on","dojo/dom-construct","dojo/dom-class"],function(t,p,l,k,f){return t(p,{domNode:null,checked:!1,disabled:!1,mode:"toggle",constructor:function(c,a,b){a=a||{};var d=a["class"];this.checked=!!a.checked;this.mode=a.mode||"toggle";this.domNode=k.create("div",{"class":(d?d+" ":"")+"esriGEToggleButton"},c,b);this._updateClass();l(this.domNode,"click",function(e){this.disabled||(e.checked=this.toggle(),this.onClick(e))}.bind(this))},postscript:function(){},_checkedSetter:function(c){this.checked=
!!c;this._updateClass()},_modeSetter:function(c){this.mode=c;this._updateClass()},_disabledSetter:function(c){this.disabled=c;this._updateClass()},_updateClass:function(){f.remove(this.domNode,"checked unchecked switch toggle");f.add(this.domNode,"toggle"===this.mode?"toggle":"switch");f.add(this.domNode,this.checked?"checked":"unchecked");f[this.disabled?"add":"remove"](this.domNode,"disabled")},onClick:function(c){},toggle:function(){this.set("checked",!this.checked);return this.checked}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ComparisonSettings":function(){define("dojo/_base/declare esri/dijit/geoenrichment/TriStateItem dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/ComparisonSettings.html dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d){d=d.geoenrichment.dijit.ReportPlayer.PlayerToolbar;return t([l,k],{templateString:b,nls:d,player:null,showBackgroundImageCheckbox:null,splitPanelsCheckbox:null,postCreate:function(){var e=this;this.inherited(arguments);this.showBackgroundImageCheckbox=new p(this.showBackgroundImageLabel);this.showBackgroundImageCheckbox.onClick=function(){e._onChange()};this.splitPanelsCheckbox=new p(this.splitPanelsLabel);this.splitPanelsCheckbox.onClick=function(){e._update();e._onChange()};
a.setTooltipToNode(this.splitPanelsInfoIcon,d.splitPanelsTooltip);var g=this.player.nlsMap&&this.player.nlsMap.zoomPanelsTooltip||d.zoomPanelsTooltip;f[g?"show":"hide"](this.zoomPanelsInfoIcon);a.setTooltipToNode(this.zoomPanelsInfoIcon,g);this._initZoomControls();this._initZoomSplitControls()},_zoomEditor:null,_zoom:0,_initZoomControls:function(){var e=this;this._zoomEditor=new c({numericOnly:!0,onApply:function(g){e._setZoom(g)},onCancel:function(){e._updateZoomLabel()}});this.zoomLabel.addEventListener("click",
function(){e._zoomEditor.range={min:10,max:500};e._zoomEditor.editNodeLabel({node:e.zoomLabel,initialText:e._zoom})});this.zoomOutButton.addEventListener("click",function(){e._setZoom(Math.max(10,e._zoom-10))});this.zoomInButton.addEventListener("click",function(){e._setZoom(Math.min(500,e._zoom+10))});this.resetButton.addEventListener("click",function(){e._setZoom(100)})},_setZoom:function(e,g){e=Math.round(e);this._zoom!==e&&(this._zoom=e,this._updateZoomLabel(),this._update(),!g&&this._onChange())},
_updateZoomLabel:function(){this.zoomLabel.innerHTML=this._zoom+"%"},_zoomSplitEditor:null,_zoomSplit:0,_initZoomSplitControls:function(){var e=this;this._zoomSplitEditor=new c({numericOnly:!0,onApply:function(g){e._setZoomSplit(g)},onCancel:function(){e._updateZoomSplitLabel()}});this.zoomSplitLabel.addEventListener("click",function(){e._zoomSplitEditor.range={min:10,max:500};e._zoomSplitEditor.editNodeLabel({node:e.zoomSplitLabel,initialText:e._zoomSplit})});this.zoomOutSplitButton.addEventListener("click",
function(){e._setZoomSplit(Math.max(10,e._zoomSplit-10))});this.zoomInSplitButton.addEventListener("click",function(){e._setZoomSplit(Math.min(500,e._zoomSplit+10))});this.resetSplitButton.addEventListener("click",function(){e._setZoomSplit(100)})},_setZoomSplit:function(e,g){e=Math.round(e);this._zoomSplit!==e&&(this._zoomSplit=e,this._updateZoomSplitLabel(),this._update(),!g&&this._onChange())},_updateZoomSplitLabel:function(){this.zoomSplitLabel.innerHTML=this._zoomSplit+"%"},_update:function(){this.resetButton.style.visibility=
100===this._zoom?"hidden":"visible";this.resetSplitButton.style.visibility=100===this._zoomSplit?"hidden":"visible";f.hide([this.zoomBlock,this.zoomSplitBlock]);f.show(this.splitPanelsCheckbox.get("checked")?this.zoomSplitBlock:this.zoomBlock)},setSettings:function(e){this.showBackgroundImageCheckbox.set("checked",!e.hideBackgroundImage);this.splitPanelsCheckbox.set("checked",e.splitPanels);this._setZoom(100*(e.scale||1),!0);this._setZoomSplit(100*(e.scaleSplit||1),!0);this._update()},getSettings:function(){return{hideBackgroundImage:!this.showBackgroundImageCheckbox.get("checked"),
splitPanels:this.splitPanelsCheckbox.get("checked"),scale:this._zoom/100,scaleSplit:this._zoomSplit/100}},_onChange:function(){this._update();this.onChange()},onChange:function(){}})})},"esri/dijit/geoenrichment/utils/NodeLabelEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/ObjectUtil".split(" "),function(t,
p,l,k,f,c,a,b,d,e){return t(null,{_textMemo:null,_handlers:null,_textBox:null,_node:null,numericOnly:!1,range:null,keepLabelDimensions:!0,constructor:function(g){p.mixin(this,g)},editNodeLabel:function(g){var h=g.node,m=g.overNode||h,r=g.initialText,n=this;this._stopEdit();this._node=h;this._textMemo="string"===typeof r||"number"===typeof r?r:h.innerHTML;r=c.position(h).w;h.innerHTML="";this._textBox=g.multiline?f.create("textarea",{"class":"esriGETextBoxArea"},h):f.create("input",{type:"text"},h);
this._textBox.name="node-label";this._textBox.value=this._textMemo;this._textBox.focus();this._textBox.select();g.box?(h=g.box,this._textBox.style.position="absolute",this._textBox.style.left=h.x+"px",this._textBox.style.top=h.y+"px",this._textBox.style.width=h.w+"px",this._textBox.style.height=h.h+"px",this._textBox.style.width=h.w+"px",this._textBox.style.height=h.h-2+"px"):this.keepLabelDimensions&&a.set(this._textBox,"width",r+"px");g.textStyle&&b.setFullTextStyle(this._textBox,g.textStyle);this._handlers=
[l(document.body,"keyup",function(q){q.keyCode===k.ESCAPE?n._cancelEdit():q.keyCode!==k.ENTER||q.shiftKey||n._applyEdit()}),l(document.body,"click",function(){d.isMouseOver(m)||(g.applyWhenClickedOutside?n._applyEdit():n._cancelEdit())})]},_checkCanApply:function(g){if(!this.numericOnly)return!0;g=e.parseNumber(g);return isNaN(g)||this.range&&void 0!==this.range.min&&this.range.min>g||this.range&&void 0!==this.range.max&&this.range.max<g?!1:!0},_applyEdit:function(){var g=this._textBox.value;this._checkCanApply(g)?
(this._node.innerHTML=g,this._stopEdit(),this.onApply(g)):this._cancelEdit()},_cancelEdit:function(){this._node.innerHTML=this._textMemo;this._stopEdit();this.onCancel()},_stopEdit:function(){this._handlers&&this._handlers.forEach(function(g){g.remove()});this._textMemo=this._handlers=null;f.destroy(this._textBox);this._node=this._textBox=null},onApply:function(g){},onCancel:function(){}})})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number","./DateUtil"],function(t,p){var l=
{};Math.log10=Math.log10||function(f){return Math.log(f)*Math.LOG10E};l.populateObject=function(f,c,a){function b(d,e){function g(m){var r=d[m],n=e[m],q=r&&"object"===typeof r;void 0!==r&&(void 0===n?e[m]=r:n&&"object"===typeof n&&q?b(r,n):a&&(q?(n=e[m]={},b(r,n)):e[m]=d[m]))}if(d&&e&&!(Array.isArray(d)&&!Array.isArray(e)||Array.isArray(e)&&!Array.isArray(d)))if(Array.isArray(d))d.forEach(function(m,r){g(r)});else for(var h in d)g(h)}b(c,f);return f};l.filterByPattern=function(f,c){function a(d,e,
g){for(var h in d){var m=d[h],r=e[h];if(Array.isArray(m)){var n=m[0];if(r&&Array.isArray(r)){var q=g[h]=[];r.forEach(function(w){if(w&&"object"===typeof w){var y=Array.isArray(w)?[]:{};a(n,w,y);q.push(y)}})}}else if("object"===typeof m){if(r&&"object"===typeof r){var u=g[h]={};a(m,r,u)}}else void 0!==r&&(g[h]=r)}}var b={};a(c,f,b);return b};l.traverseObject=function(f,c){for(var a in f){var b=f[a];c(b,a,f);b&&"object"===typeof b&&l.traverseObject(b,c)}};l.copyOwnJsonProperties=function(f,c,a){c=c||
{};for(var b in f){var d=f[b];f.hasOwnProperty(b)&&"function"!=typeof d&&(d&&"object"==typeof d&&a&&(d=a(b,d)),void 0!==d&&(c[b]=d))}return c};l.removeUndefinedProperties=function(f){f&&Object.keys(f).forEach(function(c){void 0===f[c]&&delete f[c]});return f};l.getValue=function(f,c){if("string"!==typeof c)return f;c=c.split(".");for(var a=0;a<c.length;a++)f=f&&f[c[a]];return f};l.setValue=function(f,c,a){if("string"===typeof c&&(c=c.split("."),c.length)){for(var b=0;b<c.length-1;b++)f=f&&f[c[b]];
f&&(f[c[c.length-1]]=a)}};l.isNumber=function(f){return!isNaN(parseFloat(f))&&isFinite(f)};l.roundNumber=function(f,c){return"number"!==typeof f?f:parseFloat(f.toFixed(void 0!==c?c:0))};l.getBestPrecision=function(f){return 0===f?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(f))))};l.getPlaces=function(f,c){function a(h,m){var r=f.indexOf(h,b);if(0>r)return d;h=f.charAt(r+h.length);return!h||0>m.indexOf(h)?d:r-b}f=+f;if(isNaN(f))return-1;f+="";var b=f.indexOf(".")+1,d=b?f.length-b:0;if(2>=d||!c)return d;
c=0;if(!+f.substr(0,b-1))for(;"0"===f.charAt(b);)b++,c++,d--;for(var e=d-1;2<=e;e--){var g=Math.min(a("000000000000000".substr(0,e),"01234"),a("999999999999999".substr(0,e),"56789"));if(g!==d){d=g;break}}return d+c};l.formatNumber=function(f,c){c="number"===typeof c?{places:c}:c||{};var a=c.places,b={};0<=a?b.places=a:a=-1;b.locale=c.locale||p.getDateNumberLocale();f=t.format(f,b);if(c.noSeparator){b=l.getSeparator();var d;if(b)for(;0<=(d=f.indexOf(b));)f=f.substr(0,d)+f.substr(d+1)}if(c.preserveTrailingZeroes||
0>=a||!f)return f;for(c=f.length;0<a&&"0"==f.charAt(c-1);)c--,--a||c--;return f.substr(0,c)};l.formatNumberAsCurrency=function(f,c,a){return c?c.split(";")[0>f?1:0].replace("0",l.formatNumber(Math.abs(f),a)):l.formatNumber(f,a)};var k;l.getSeparator=function(){void 0===k&&(k=t.format(9999,{places:0}).replace(/9/g,""));return k};l.parseNumber=function(f,c,a,b){if(""===f)return"undefined"!==typeof a?a:NaN;if(null==f||"string"!==typeof f&&isNaN(f))return NaN;f=String(f);if(!f.trim())return void 0!==
a?a:NaN;a=t.parse(f,{strict:b,locale:p.getDateNumberLocale()});isNaN(a)&&f.trim().length&&(a=b?t.parse(f,{strict:b,locale:"en-US"}):Number(f));return isNaN(a)||void 0===c||0>c?a:t.round(a,c)};l.parsePercentOrCurrency=function(f,c,a,b,d){"string"===typeof f&&(f=f.replace("%",""),c&&(c=c.split(";")[0].replace("0",""),f=f.replace(c,"")));return l.parseNumber(f,a,b,d)};l.compareEqual=function(f,c,a){return void 0===a?f===c:Number(Number(f).toFixed(a))===Number(Number(c).toFixed(a))};return l})},"esri/dijit/geoenrichment/utils/DateUtil":function(){define(["dojo/date/locale",
"esri/moment"],function(t,p){var l={formatDate:function(k,f){k=l.objectToDate(k);f.locale=f.locale||l.getDateNumberLocale();return k?t.format(k,f):""},formatMoment:function(k,f){return(k=l.objectToTime(k))?p(k).format(f):""},formatDateShort:function(k){return l.formatMoment(k,"L")},formatDateTimeShort:function(k){return l.formatMoment(k,"L LT")},formatLiveTime:function(k){var f=l.formatMoment(k,"l, LT").replace(/\d\d\d\d/,function(c){return c.substr(2)});return f?f+" "+l.formatDate(k,{datePattern:"ZZZZ",
selector:"date"}):""},formatTypicalTime:function(k){return l.formatMoment(k,"ddd LT")},parseDateShort:function(k){return(k=+p(k,"L"))?new Date(k):null},getReportFooterDate:function(k){return t.format(k||new Date,{datePattern:"MMMM d, yyyy",selector:"date"})},getFullYear:function(){return(new Date).getFullYear()},objectToTime:function(k){if(!k)return null;k="string"===typeof k?new Date(k):k;return k.getTime?k.getTime():Number(k)||null},objectToDate:function(k){return k?k.getTime?k:new Date(k):null},
getDateNumberLocale:function(){return window.dojoConfig&&window.dojoConfig.extraLocale&&window.dojoConfig.extraLocale[0]||window.dojo.locale}};return l})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(t,p,l){return l})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(t,p,l,k){Object.defineProperty(p,"__esModule",{value:!0});var f={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,
cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};p.load=function(c,a,b){c=l.locale;var d=c in f;if(!d){var e=c.split("-");1<e.length&&e[0]in f&&(c=e[0],d=!0)}d?a(["moment/locale/"+
c],function(){b(k)}):b(k)}})},"moment/moment":function(){(function(t,p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define(p):t.moment=p()})(this,function(){function t(){return yc.apply(null,arguments)}function p(v){return v instanceof Array||"[object Array]"===Object.prototype.toString.call(v)}function l(v){return null!=v&&"[object Object]"===Object.prototype.toString.call(v)}function k(v,A){return Object.prototype.hasOwnProperty.call(v,
A)}function f(v){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(v).length;for(var A in v)if(k(v,A))return!1;return!0}function c(v){return void 0===v}function a(v){return"number"===typeof v||"[object Number]"===Object.prototype.toString.call(v)}function b(v){return v instanceof Date||"[object Date]"===Object.prototype.toString.call(v)}function d(v,A){var H=[],J;for(J=0;J<v.length;++J)H.push(A(v[J],J));return H}function e(v,A){for(var H in A)k(A,H)&&(v[H]=A[H]);k(A,"toString")&&
(v.toString=A.toString);k(A,"valueOf")&&(v.valueOf=A.valueOf);return v}function g(v,A,H,J){return Ob(v,A,H,J,!0).utc()}function h(v){null==v._pf&&(v._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return v._pf}function m(v){if(null==v._isValid){var A=h(v),H=zc.call(A.parsedDateParts,function(J){return null!=J});
H=!isNaN(v._d.getTime())&&0>A.overflow&&!A.empty&&!A.invalidEra&&!A.invalidMonth&&!A.invalidWeekday&&!A.weekdayMismatch&&!A.nullInput&&!A.invalidFormat&&!A.userInvalidated&&(!A.meridiem||A.meridiem&&H);v._strict&&(H=H&&0===A.charsLeftOver&&0===A.unusedTokens.length&&void 0===A.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(v))return H;v._isValid=H}return v._isValid}function r(v){var A=g(NaN);null!=v?e(h(A),v):h(A).userInvalidated=!0;return A}function n(v,A){var H;c(A._isAMomentObject)||(v._isAMomentObject=
A._isAMomentObject);c(A._i)||(v._i=A._i);c(A._f)||(v._f=A._f);c(A._l)||(v._l=A._l);c(A._strict)||(v._strict=A._strict);c(A._tzm)||(v._tzm=A._tzm);c(A._isUTC)||(v._isUTC=A._isUTC);c(A._offset)||(v._offset=A._offset);c(A._pf)||(v._pf=h(A));c(A._locale)||(v._locale=A._locale);if(0<qb.length)for(H=0;H<qb.length;H++){var J=qb[H];var R=A[J];c(R)||(v[J]=R)}return v}function q(v){n(this,v);this._d=new Date(null!=v._d?v._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===rb&&(rb=!0,t.updateOffset(this),
rb=!1)}function u(v){return v instanceof q||null!=v&&null!=v._isAMomentObject}function w(v){!1===t.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+v)}function y(v,A){var H=!0;return e(function(){null!=t.deprecationHandler&&t.deprecationHandler(null,v);if(H){var J=[],R,W;for(R=0;R<arguments.length;R++){var Z="";if("object"===typeof arguments[R]){Z+="\n["+R+"] ";for(W in arguments[0])k(arguments[0],W)&&(Z+=W+": "+arguments[0][W]+", ");Z=
Z.slice(0,-2)}else Z=arguments[R];J.push(Z)}w(v+"\nArguments: "+Array.prototype.slice.call(J).join("")+"\n"+Error().stack);H=!1}return A.apply(this,arguments)},A)}function C(v,A){null!=t.deprecationHandler&&t.deprecationHandler(v,A);Pb[v]||(w(A),Pb[v]=!0)}function D(v){return"undefined"!==typeof Function&&v instanceof Function||"[object Function]"===Object.prototype.toString.call(v)}function G(v,A){var H=e({},v),J;for(J in A)k(A,J)&&(l(v[J])&&l(A[J])?(H[J]={},e(H[J],v[J]),e(H[J],A[J])):null!=A[J]?
H[J]=A[J]:delete H[J]);for(J in v)k(v,J)&&!k(A,J)&&l(v[J])&&(H[J]=e({},H[J]));return H}function F(v){null!=v&&this.set(v)}function B(v,A,H){var J=""+Math.abs(v);return(0<=v?H?"+":"":"-")+Math.pow(10,Math.max(0,A-J.length)).toString().substr(1)+J}function z(v,A,H,J){var R=J;"string"===typeof J&&(R=function(){return this[J]()});v&&(Pa[v]=R);A&&(Pa[A[0]]=function(){return B(R.apply(this,arguments),A[1],A[2])});H&&(Pa[H]=function(){return this.localeData().ordinal(R.apply(this,arguments),v)})}function E(v){return v.match(/\[[\s\S]/)?
v.replace(/^\[|\]$/g,""):v.replace(/\\/g,"")}function I(v){var A=v.match(sb),H;var J=0;for(H=A.length;J<H;J++)A[J]=Pa[A[J]]?Pa[A[J]]:E(A[J]);return function(R){var W="",Z;for(Z=0;Z<H;Z++)W+=D(A[Z])?A[Z].call(R,v):A[Z];return W}}function L(v,A){if(!v.isValid())return v.localeData().invalidDate();A=M(A,v.localeData());tb[A]=tb[A]||I(A);return tb[A](v)}function M(v,A){function H(R){return A.longDateFormat(R)||R}var J=5;for(cb.lastIndex=0;0<=J&&cb.test(v);)v=v.replace(cb,H),cb.lastIndex=0,--J;return v}
function O(v,A){var H=v.toLowerCase();Wa[H]=Wa[H+"s"]=Wa[A]=v}function Q(v){return"string"===typeof v?Wa[v]||Wa[v.toLowerCase()]:void 0}function T(v){var A={},H,J;for(J in v)k(v,J)&&(H=Q(J))&&(A[H]=v[J]);return A}function X(v){var A=[],H;for(H in v)k(v,H)&&A.push({unit:H,priority:sa[H]});A.sort(function(J,R){return J.priority-R.priority});return A}function U(v){return 0===v%4&&0!==v%100||0===v%400}function aa(v){return 0>v?Math.ceil(v)||0:Math.floor(v)}function Y(v){v=+v;var A=0;0!==v&&isFinite(v)&&
(A=aa(v));return A}function ea(v,A){return function(H){return null!=H?(V(this,v,H),t.updateOffset(this,A),this):K(this,v)}}function K(v,A){return v.isValid()?v._d["get"+(v._isUTC?"UTC":"")+A]():NaN}function V(v,A,H){if(v.isValid()&&!isNaN(H))if("FullYear"===A&&U(v.year())&&1===v.month()&&29===v.date())H=Y(H),v._d["set"+(v._isUTC?"UTC":"")+A](H,v.month(),ta(H,v.month()));else v._d["set"+(v._isUTC?"UTC":"")+A](H)}function N(v,A,H){ub[v]=D(A)?A:function(J,R){return J&&H?H:A}}function P(v,A){return k(ub,
v)?ub[v](A._strict,A._locale):new RegExp(S(v))}function S(v){return ca(v.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(A,H,J,R,W){return H||J||R||W}))}function ca(v){return v.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function da(v,A){var H,J=A;"string"===typeof v&&(v=[v]);a(A)&&(J=function(R,W){W[A]=Y(R)});for(H=0;H<v.length;H++)vb[v[H]]=J}function oa(v,A){da(v,function(H,J,R,W){R._w=R._w||{};A(H,R._w,R,W)})}function ta(v,A){if(isNaN(v)||isNaN(A))return NaN;var H=(A%12+
12)%12;return 1===H?U(v+(A-H)/12)?29:28:31-H%7%2}function Ga(v,A){if(!v.isValid())return v;if("string"===typeof A)if(/^\d+$/.test(A))A=Y(A);else if(A=v.localeData().monthsParse(A),!a(A))return v;var H=Math.min(v.date(),ta(v.year(),A));v._d["set"+(v._isUTC?"UTC":"")+"Month"](A,H);return v}function Ja(v){return null!=v?(Ga(this,v),t.updateOffset(this,!0),this):K(this,"Month")}function Qa(){function v(Z,fa){return fa.length-Z.length}var A=[],H=[],J=[],R;for(R=0;12>R;R++){var W=g([2E3,R]);A.push(this.monthsShort(W,
""));H.push(this.months(W,""));J.push(this.months(W,""));J.push(this.monthsShort(W,""))}A.sort(v);H.sort(v);J.sort(v);for(R=0;12>R;R++)A[R]=ca(A[R]),H[R]=ca(H[R]);for(R=0;24>R;R++)J[R]=ca(J[R]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+J.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+H.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+A.join("|")+")","i")}function wb(v,A,H,J,R,W,Z){100>v&&0<=v?(A=new Date(v+400,A,H,J,R,W,Z),isFinite(A.getFullYear())&&A.setFullYear(v)):
A=new Date(v,A,H,J,R,W,Z);return A}function Ka(v){if(100>v&&0<=v){var A=Array.prototype.slice.call(arguments);A[0]=v+400;A=new Date(Date.UTC.apply(null,A));isFinite(A.getUTCFullYear())&&A.setUTCFullYear(v)}else A=new Date(Date.UTC.apply(null,arguments));return A}function Xa(v,A,H){H=7+A-H;return-((7+Ka(v,0,H).getUTCDay()-A)%7)+H-1}function Ya(v,A,H,J,R){H=(7+H-J)%7;J=Xa(v,J,R);J=1+7*(A-1)+H+J;0>=J?(A=v-1,v=(U(A)?366:365)+J):J>(U(v)?366:365)?(A=v+1,v=J-(U(v)?366:365)):(A=v,v=J);return{year:A,dayOfYear:v}}
function La(v,A,H){var J=Xa(v.year(),A,H);J=Math.floor((v.dayOfYear()-J-1)/7)+1;1>J?(v=v.year()-1,A=J+wa(v,A,H)):J>wa(v.year(),A,H)?(A=J-wa(v.year(),A,H),v=v.year()+1):(v=v.year(),A=J);return{week:A,year:v}}function wa(v,A,H){var J=Xa(v,A,H);A=Xa(v+1,A,H);return((U(v)?366:365)-J+A)/7}function xb(v,A){return v.slice(A,7).concat(v.slice(0,A))}function Ac(v,A,H){var J;v=v.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],J=0;7>
J;++J){var R=g([2E3,1]).day(J);this._minWeekdaysParse[J]=this.weekdaysMin(R,"").toLocaleLowerCase();this._shortWeekdaysParse[J]=this.weekdaysShort(R,"").toLocaleLowerCase();this._weekdaysParse[J]=this.weekdays(R,"").toLocaleLowerCase()}if(H)A="dddd"===A?pa.call(this._weekdaysParse,v):"ddd"===A?pa.call(this._shortWeekdaysParse,v):pa.call(this._minWeekdaysParse,v);else if("dddd"===A){A=pa.call(this._weekdaysParse,v);if(-1!==A)return A;A=pa.call(this._shortWeekdaysParse,v);if(-1!==A)return A;A=pa.call(this._minWeekdaysParse,
v)}else if("ddd"===A){A=pa.call(this._shortWeekdaysParse,v);if(-1!==A)return A;A=pa.call(this._weekdaysParse,v);if(-1!==A)return A;A=pa.call(this._minWeekdaysParse,v)}else{A=pa.call(this._minWeekdaysParse,v);if(-1!==A)return A;A=pa.call(this._weekdaysParse,v);if(-1!==A)return A;A=pa.call(this._shortWeekdaysParse,v)}return-1!==A?A:null}function yb(){function v(ha,qa){return qa.length-ha.length}var A=[],H=[],J=[],R=[],W;for(W=0;7>W;W++){var Z=g([2E3,1]).day(W);var fa=ca(this.weekdaysMin(Z,""));var ka=
ca(this.weekdaysShort(Z,""));Z=ca(this.weekdays(Z,""));A.push(fa);H.push(ka);J.push(Z);R.push(fa);R.push(ka);R.push(Z)}A.sort(v);H.sort(v);J.sort(v);R.sort(v);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+R.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+J.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+H.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+A.join("|")+")","i")}function zb(){return this.hours()%12||12}
function Qb(v,A){z(v,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),A)})}function Rb(v,A){return A._meridiemParse}function Sb(v){return v?v.toLowerCase().replace("_","-"):v}function db(v){var A=null;if(void 0===na[v]&&"undefined"!==typeof module&&module&&module.exports)try{A=Za._abbr;var H=require;H("./locale/"+v);Ha(A)}catch(J){na[v]=null}return na[v]}function Ha(v,A){v&&((A=c(A)?Aa(v):Ab(v,A))?Za=A:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+
v+" not found. Did you forget to load it?"));return Za._abbr}function Ab(v,A){if(null!==A){var H=Tb;A.abbr=v;if(null!=na[v])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),H=na[v]._config;else if(null!=A.parentLocale)if(null!=na[A.parentLocale])H=na[A.parentLocale]._config;else if(H=db(A.parentLocale),
null!=H)H=H._config;else return $a[A.parentLocale]||($a[A.parentLocale]=[]),$a[A.parentLocale].push({name:v,config:A}),null;na[v]=new F(G(H,A));$a[v]&&$a[v].forEach(function(J){Ab(J.name,J.config)});Ha(v);return na[v]}delete na[v];return null}function Aa(v){var A;v&&v._locale&&v._locale._abbr&&(v=v._locale._abbr);if(!v)return Za;if(!p(v)){if(A=db(v))return A;v=[v]}a:{A=0;for(var H,J,R,W;A<v.length;){W=Sb(v[A]).split("-");H=W.length;for(J=(J=Sb(v[A+1]))?J.split("-"):null;0<H;){if(R=db(W.slice(0,H).join("-"))){v=
R;break a}if(R=J&&J.length>=H){b:{R=void 0;var Z=Math.min(W.length,J.length);for(R=0;R<Z;R+=1)if(W[R]!==J[R])break b;R=Z}R=R>=H-1}if(R)break;H--}A++}v=Za}return v}function Bb(v){var A;(A=v._a)&&-2===h(v).overflow&&(A=0>A[Ba]||11<A[Ba]?Ba:1>A[za]||A[za]>ta(A[ua],A[Ba])?za:0>A[ra]||24<A[ra]||24===A[ra]&&(0!==A[xa]||0!==A[Ca]||0!==A[Ma])?ra:0>A[xa]||59<A[xa]?xa:0>A[Ca]||59<A[Ca]?Ca:0>A[Ma]||999<A[Ma]?Ma:-1,h(v)._overflowDayOfYear&&(A<ua||A>za)&&(A=za),h(v)._overflowWeeks&&-1===A&&(A=Bc),h(v)._overflowWeekday&&
-1===A&&(A=Cc),h(v).overflow=A);return v}function Ub(v){var A;var H=v._i;var J=Dc.exec(H)||Ec.exec(H);if(J){h(v).iso=!0;H=0;for(A=eb.length;H<A;H++)if(eb[H][1].exec(J[1])){var R=eb[H][0];var W=!1!==eb[H][2];break}if(null==R)v._isValid=!1;else{if(J[3]){H=0;for(A=Cb.length;H<A;H++)if(Cb[H][1].exec(J[3])){var Z=(J[2]||" ")+Cb[H][0];break}if(null==Z){v._isValid=!1;return}}if(W||null==Z){if(J[4])if(Fc.exec(J[4]))var fa="Z";else{v._isValid=!1;return}v._f=R+(Z||"")+(fa||"");Db(v)}else v._isValid=!1}}else v._isValid=
!1}function Vb(v){var A=Gc.exec(v._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(A){var H=A[3],J=A[2],R=A[5],W=A[6],Z=A[7],fa=parseInt(A[4],10);H=[49>=fa?2E3+fa:999>=fa?1900+fa:fa,Wb.indexOf(H),parseInt(J,10),parseInt(R,10),parseInt(W,10)];Z&&H.push(parseInt(Z,10));a:{if(Z=A[1])if(Z=Xb.indexOf(Z),J=(new Date(H[0],H[1],H[2])).getDay(),Z!==J){h(v).weekdayMismatch=!0;Z=v._isValid=!1;break a}Z=!0}Z&&(v._a=H,(Z=A[8])?A=Hc[Z]:A[9]?A=0:(A=parseInt(A[10],
10),Z=A%100,A=(A-Z)/100*60+Z),v._tzm=A,v._d=Ka.apply(null,v._a),v._d.setUTCMinutes(v._d.getUTCMinutes()-v._tzm),h(v).rfc2822=!0)}else v._isValid=!1}function Ic(v){var A=Jc.exec(v._i);null!==A?v._d=new Date(+A[1]):(Ub(v),!1===v._isValid&&(delete v._isValid,Vb(v),!1===v._isValid&&(delete v._isValid,v._strict?v._isValid=!1:t.createFromInputFallback(v))))}function Ra(v,A,H){return null!=v?v:null!=A?A:H}function Eb(v){var A=[];if(!v._d){var H=new Date(t.now());H=v._useUTC?[H.getUTCFullYear(),H.getUTCMonth(),
H.getUTCDate()]:[H.getFullYear(),H.getMonth(),H.getDate()];if(v._w&&null==v._a[za]&&null==v._a[Ba]){var J=v._w;if(null!=J.GG||null!=J.W||null!=J.E){var R=1;var W=4;var Z=Ra(J.GG,v._a[ua],La(la(),1,4).year);var fa=Ra(J.W,1);var ka=Ra(J.E,1);if(1>ka||7<ka)var ha=!0}else if(R=v._locale._week.dow,W=v._locale._week.doy,fa=La(la(),R,W),Z=Ra(J.gg,v._a[ua],fa.year),fa=Ra(J.w,fa.week),null!=J.d){if(ka=J.d,0>ka||6<ka)ha=!0}else if(null!=J.e){if(ka=J.e+R,0>J.e||6<J.e)ha=!0}else ka=R;1>fa||fa>wa(Z,R,W)?h(v)._overflowWeeks=
!0:null!=ha?h(v)._overflowWeekday=!0:(ha=Ya(Z,fa,ka,R,W),v._a[ua]=ha.year,v._dayOfYear=ha.dayOfYear)}if(null!=v._dayOfYear){ha=Ra(v._a[ua],H[ua]);if(v._dayOfYear>(U(ha)?366:365)||0===v._dayOfYear)h(v)._overflowDayOfYear=!0;ha=Ka(ha,0,v._dayOfYear);v._a[Ba]=ha.getUTCMonth();v._a[za]=ha.getUTCDate()}for(ha=0;3>ha&&null==v._a[ha];++ha)v._a[ha]=A[ha]=H[ha];for(;7>ha;ha++)v._a[ha]=A[ha]=null==v._a[ha]?2===ha?1:0:v._a[ha];24===v._a[ra]&&0===v._a[xa]&&0===v._a[Ca]&&0===v._a[Ma]&&(v._nextDay=!0,v._a[ra]=
0);v._d=(v._useUTC?Ka:wb).apply(null,A);A=v._useUTC?v._d.getUTCDay():v._d.getDay();null!=v._tzm&&v._d.setUTCMinutes(v._d.getUTCMinutes()-v._tzm);v._nextDay&&(v._a[ra]=24);v._w&&"undefined"!==typeof v._w.d&&v._w.d!==A&&(h(v).weekdayMismatch=!0)}}function Db(v){if(v._f===t.ISO_8601)Ub(v);else if(v._f===t.RFC_2822)Vb(v);else{v._a=[];h(v).empty=!0;var A=""+v._i,H,J,R=A.length,W=0;var Z=M(v._f,v._locale).match(sb)||[];for(H=0;H<Z.length;H++){var fa=Z[H];if(J=(A.match(P(fa,v))||[])[0]){var ka=A.substr(0,
A.indexOf(J));0<ka.length&&h(v).unusedInput.push(ka);A=A.slice(A.indexOf(J)+J.length);W+=J.length}if(Pa[fa]){if(J?h(v).empty=!1:h(v).unusedTokens.push(fa),ka=v,null!=J&&k(vb,fa))vb[fa](J,ka._a,ka,fa)}else v._strict&&!J&&h(v).unusedTokens.push(fa)}h(v).charsLeftOver=R-W;0<A.length&&h(v).unusedInput.push(A);12>=v._a[ra]&&!0===h(v).bigHour&&0<v._a[ra]&&(h(v).bigHour=void 0);h(v).parsedDateParts=v._a.slice(0);h(v).meridiem=v._meridiem;A=v._a;H=ra;R=v._locale;Z=v._a[ra];W=v._meridiem;null!=W&&(null!=R.meridiemHour?
Z=R.meridiemHour(Z,W):null!=R.isPM&&((R=R.isPM(W))&&12>Z&&(Z+=12),R||12!==Z||(Z=0)));A[H]=Z;A=h(v).era;null!==A&&(v._a[ua]=v._locale.erasConvertYear(A,v._a[ua]));Eb(v);Bb(v)}}function Kc(v){if(!v._d){var A=T(v._i);v._a=d([A.year,A.month,void 0===A.day?A.date:A.day,A.hour,A.minute,A.second,A.millisecond],function(H){return H&&parseInt(H,10)});Eb(v)}}function Yb(v){var A=v._i,H=v._f;v._locale=v._locale||Aa(v._l);if(null===A||void 0===H&&""===A)return r({nullInput:!0});"string"===typeof A&&(v._i=A=v._locale.preparse(A));
if(u(A))return new q(Bb(A));if(b(A))v._d=A;else if(p(H)){var J=!1;if(0===v._f.length)h(v).invalidFormat=!0,v._d=new Date(NaN);else{for(A=0;A<v._f.length;A++){H=0;var R=!1;var W=n({},v);null!=v._useUTC&&(W._useUTC=v._useUTC);W._f=v._f[A];Db(W);m(W)&&(R=!0);H+=h(W).charsLeftOver;H+=10*h(W).unusedTokens.length;h(W).score=H;if(J)H<Z&&(Z=H,fa=W);else if(null==Z||H<Z||R){var Z=H;var fa=W;R&&(J=!0)}}e(v,fa||W)}}else H?Db(v):Lc(v);m(v)||(v._d=null);return v}function Lc(v){var A=v._i;c(A)?v._d=new Date(t.now()):
b(A)?v._d=new Date(A.valueOf()):"string"===typeof A?Ic(v):p(A)?(v._a=d(A.slice(0),function(H){return parseInt(H,10)}),Eb(v)):l(A)?Kc(v):a(A)?v._d=new Date(A):t.createFromInputFallback(v)}function Ob(v,A,H,J,R){var W={};if(!0===A||!1===A)J=A,A=void 0;if(!0===H||!1===H)J=H,H=void 0;if(l(v)&&f(v)||p(v)&&0===v.length)v=void 0;W._isAMomentObject=!0;W._useUTC=W._isUTC=R;W._l=H;W._i=v;W._f=A;W._strict=J;v=new q(Bb(Yb(W)));v._nextDay&&(v.add(1,"d"),v._nextDay=void 0);return v}function la(v,A,H,J){return Ob(v,
A,H,J,!1)}function Zb(v,A){var H;1===A.length&&p(A[0])&&(A=A[0]);if(!A.length)return la();var J=A[0];for(H=1;H<A.length;++H)if(!A[H].isValid()||A[H][v](J))J=A[H];return J}function fb(v){var A=T(v);v=A.year||0;var H=A.quarter||0,J=A.month||0,R=A.week||A.isoWeek||0,W=A.day||0,Z=A.hour||0,fa=A.minute||0,ka=A.second||0,ha=A.millisecond||0;a:{var qa,$b=!1;for(qa in A)if(k(A,qa)&&(-1===pa.call(ab,qa)||null!=A[qa]&&isNaN(A[qa]))){A=!1;break a}for(qa=0;qa<ab.length;++qa)if(A[ab[qa]]){if($b){A=!1;break a}parseFloat(A[ab[qa]])!==
Y(A[ab[qa]])&&($b=!0)}A=!0}this._isValid=A;this._milliseconds=+ha+1E3*ka+6E4*fa+36E5*Z;this._days=+W+7*R;this._months=+J+3*H+12*v;this._data={};this._locale=Aa();this._bubble()}function gb(v){return v instanceof fb}function Fb(v){return 0>v?-1*Math.round(-1*v):Math.round(v)}function ac(v,A){z(v,0,0,function(){var H=this.utcOffset(),J="+";0>H&&(H=-H,J="-");return J+B(~~(H/60),2)+A+B(~~H%60,2)})}function Gb(v,A){v=(A||"").match(v);if(null===v)return null;v=((v[v.length-1]||[])+"").match(Mc)||["-",0,
0];A=+(60*v[1])+Y(v[2]);return 0===A?0:"+"===v[0]?A:-A}function Hb(v,A){return A._isUTC?(A=A.clone(),v=(u(v)||b(v)?v.valueOf():la(v).valueOf())-A.valueOf(),A._d.setTime(A._d.valueOf()+v),t.updateOffset(A,!1),A):la(v).local()}function bc(){return this.isValid()?this._isUTC&&0===this._offset:!1}function ya(v,A){var H=v,J=null;gb(v)?H={ms:v._milliseconds,d:v._days,M:v._months}:a(v)||!isNaN(+v)?(H={},A?H[A]=+v:H.milliseconds=+v):(J=Nc.exec(v))?(H="-"===J[1]?-1:1,H={y:0,d:Y(J[za])*H,h:Y(J[ra])*H,m:Y(J[xa])*
H,s:Y(J[Ca])*H,ms:Y(Fb(1E3*J[Ma]))*H}):(J=Oc.exec(v))?(H="-"===J[1]?-1:1,H={y:Na(J[2],H),M:Na(J[3],H),w:Na(J[4],H),d:Na(J[5],H),h:Na(J[6],H),m:Na(J[7],H),s:Na(J[8],H)}):null==H?H={}:"object"===typeof H&&("from"in H||"to"in H)&&(J=la(H.from),H=la(H.to),J.isValid()&&H.isValid()?(H=Hb(H,J),J.isBefore(H)?H=cc(J,H):(H=cc(H,J),H.milliseconds=-H.milliseconds,H.months=-H.months),J=H):J={milliseconds:0,months:0},H={},H.ms=J.milliseconds,H.M=J.months);H=new fb(H);gb(v)&&k(v,"_locale")&&(H._locale=v._locale);
gb(v)&&k(v,"_isValid")&&(H._isValid=v._isValid);return H}function Na(v,A){v=v&&parseFloat(v.replace(",","."));return(isNaN(v)?0:v)*A}function cc(v,A){var H={};H.months=A.month()-v.month()+12*(A.year()-v.year());v.clone().add(H.months,"M").isAfter(A)&&--H.months;H.milliseconds=+A-+v.clone().add(H.months,"M");return H}function dc(v,A){return function(H,J){if(null!==J&&!isNaN(+J)){C(A,"moment()."+A+"(period, number) is deprecated. Please use moment()."+A+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");
var R=H;H=J;J=R}H=ya(H,J);ec(this,H,v);return this}}function ec(v,A,H,J){var R=A._milliseconds,W=Fb(A._days);A=Fb(A._months);v.isValid()&&(J=null==J?!0:J,A&&Ga(v,K(v,"Month")+A*H),W&&V(v,"Date",K(v,"Date")+W*H),R&&v._d.setTime(v._d.valueOf()+R*H),J&&t.updateOffset(v,W||A))}function fc(v){return"string"===typeof v||v instanceof String}function Pc(v){var A=p(v),H=!1;A&&(H=0===v.filter(function(J){return!a(J)&&fc(v)}).length);return A&&H}function hb(v,A){if(v.date()<A.date())return-hb(A,v);var H=12*
(A.year()-v.year())+(A.month()-v.month()),J=v.clone().add(H,"months");0>A-J?(v=v.clone().add(H-1,"months"),A=(A-J)/(J-v)):(v=v.clone().add(H+1,"months"),A=(A-J)/(v-J));return-(H+A)||0}function gc(v){if(void 0===v)return this._locale._abbr;v=Aa(v);null!=v&&(this._locale=v);return this}function hc(){return this._locale}function Sa(v,A){return(v%A+A)%A}function ic(v,A,H){return 100>v&&0<=v?new Date(v+400,A,H)-jc:(new Date(v,A,H)).valueOf()}function kc(v,A,H){return 100>v&&0<=v?Date.UTC(v+400,A,H)-jc:
Date.UTC(v,A,H)}function Ib(v,A){return A.erasAbbrRegex(v)}function Jb(){var v=[],A=[],H=[],J=[],R,W=this.eras();var Z=0;for(R=W.length;Z<R;++Z)A.push(ca(W[Z].name)),v.push(ca(W[Z].abbr)),H.push(ca(W[Z].narrow)),J.push(ca(W[Z].name)),J.push(ca(W[Z].abbr)),J.push(ca(W[Z].narrow));this._erasRegex=new RegExp("^("+J.join("|")+")","i");this._erasNameRegex=new RegExp("^("+A.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+v.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+H.join("|")+")",
"i")}function ib(v,A){z(0,[v,v.length],0,A)}function lc(v,A,H,J,R){if(null==v)return La(this,J,R).year;var W=wa(v,J,R);A>W&&(A=W);v=Ya(v,A,H,J,R);v=Ka(v.year,0,v.dayOfYear);this.year(v.getUTCFullYear());this.month(v.getUTCMonth());this.date(v.getUTCDate());return this}function Qc(v,A){A[Ma]=Y(1E3*("0."+v))}function mc(v){return v}function jb(v,A,H,J){var R=Aa();A=g().set(J,A);return R[H](A,v)}function nc(v,A,H){a(v)&&(A=v,v=void 0);v=v||"";if(null!=A)return jb(v,A,H,"month");var J=[];for(A=0;12>A;A++)J[A]=
jb(v,A,H,"month");return J}function Kb(v,A,H,J){"boolean"!==typeof v&&(H=A=v,v=!1);a(A)&&(H=A,A=void 0);A=A||"";var R=Aa();v=v?R._week.dow:0;R=[];if(null!=H)return jb(A,(H+v)%7,J,"day");for(H=0;7>H;H++)R[H]=jb(A,(H+v)%7,J,"day");return R}function oc(v,A,H,J){A=ya(A,H);v._milliseconds+=J*A._milliseconds;v._days+=J*A._days;v._months+=J*A._months;return v._bubble()}function pc(v){return 0>v?Math.floor(v):Math.ceil(v)}function Da(v){return function(){return this.as(v)}}function Oa(v){return function(){return this.isValid()?
this._data[v]:NaN}}function Rc(v,A,H,J,R){return R.relativeTime(A||1,!!H,v,J)}function Ta(v){return(0<v)-(0>v)||+v}function kb(){if(!this.isValid())return this.localeData().invalidDate();var v=Lb(this._milliseconds)/1E3,A=Lb(this._days),H=Lb(this._months),J=this.asSeconds();if(!J)return"P0D";var R=aa(v/60);var W=aa(R/60);v%=60;R%=60;var Z=aa(H/12);H%=12;var fa=v?v.toFixed(3).replace(/\.?0+$/,""):"";var ka=0>J?"-":"";var ha=Ta(this._months)!==Ta(J)?"-":"";var qa=Ta(this._days)!==Ta(J)?"-":"";J=Ta(this._milliseconds)!==
Ta(J)?"-":"";return ka+"P"+(Z?ha+Z+"Y":"")+(H?ha+H+"M":"")+(A?qa+A+"D":"")+(W||R||v?"T":"")+(W?J+W+"H":"")+(R?J+R+"M":"")+(v?J+fa+"S":"")}var zc=Array.prototype.some?Array.prototype.some:function(v){var A=Object(this),H=A.length>>>0,J;for(J=0;J<H;J++)if(J in A&&v.call(this,A[J],J,A))return!0;return!1};var qb=t.momentProperties=[],rb=!1,Pb={};t.suppressDeprecationWarnings=!1;t.deprecationHandler=null;var Sc=Object.keys?Object.keys:function(v){var A,H=[];for(A in v)k(v,A)&&H.push(A);return H};var sb=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,cb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,tb={},Pa={},Wa={},sa={},qc=/\d/,va=/\d\d/,rc=/\d{3}/,Mb=/\d{4}/,lb=/[+-]?\d{6}/,ma=/\d\d?/,sc=/\d\d\d\d?/,tc=/\d\d\d\d\d\d?/,mb=/\d{1,3}/,Nb=/\d{1,4}/,nb=/[+-]?\d{1,6}/,Ua=/\d+/,ob=/[+-]?\d+/,Tc=/Z|[+-]\d\d:?\d\d/gi,pb=/Z|[+-]\d\d(?::?\d\d)?/gi,bb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;
var ub={};var vb={},ua=0,Ba=1,za=2,ra=3,xa=4,Ca=5,Ma=6,Bc=7,Cc=8;var pa=Array.prototype.indexOf?Array.prototype.indexOf:function(v){var A;for(A=0;A<this.length;++A)if(this[A]===v)return A;return-1};z("M",["MM",2],"Mo",function(){return this.month()+1});z("MMM",0,0,function(v){return this.localeData().monthsShort(this,v)});z("MMMM",0,0,function(v){return this.localeData().months(this,v)});O("month","M");sa.month=8;N("M",ma);N("MM",ma,va);N("MMM",function(v,A){return A.monthsShortRegex(v)});N("MMMM",
function(v,A){return A.monthsRegex(v)});da(["M","MM"],function(v,A){A[Ba]=Y(v)-1});da(["MMM","MMMM"],function(v,A,H,J){J=H._locale.monthsParse(v,J,H._strict);null!=J?A[Ba]=J:h(H).invalidMonth=v});var Wb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),uc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;z("Y",0,0,function(){var v=this.year();return 9999>=v?B(v,4):"+"+v});z(0,["YY",2],0,function(){return this.year()%100});z(0,["YYYY",4],0,"year");z(0,["YYYYY",5],0,"year");z(0,["YYYYYY",6,!0],0,"year");O("year",
"y");sa.year=1;N("Y",ob);N("YY",ma,va);N("YYYY",Nb,Mb);N("YYYYY",nb,lb);N("YYYYYY",nb,lb);da(["YYYYY","YYYYYY"],ua);da("YYYY",function(v,A){A[ua]=2===v.length?t.parseTwoDigitYear(v):Y(v)});da("YY",function(v,A){A[ua]=t.parseTwoDigitYear(v)});da("Y",function(v,A){A[ua]=parseInt(v,10)});t.parseTwoDigitYear=function(v){return Y(v)+(68<Y(v)?1900:2E3)};var vc=ea("FullYear",!0);z("w",["ww",2],"wo","week");z("W",["WW",2],"Wo","isoWeek");O("week","w");O("isoWeek","W");sa.week=5;sa.isoWeek=5;N("w",ma);N("ww",
ma,va);N("W",ma);N("WW",ma,va);oa(["w","ww","W","WW"],function(v,A,H,J){A[J.substr(0,1)]=Y(v)});z("d",0,"do","day");z("dd",0,0,function(v){return this.localeData().weekdaysMin(this,v)});z("ddd",0,0,function(v){return this.localeData().weekdaysShort(this,v)});z("dddd",0,0,function(v){return this.localeData().weekdays(this,v)});z("e",0,0,"weekday");z("E",0,0,"isoWeekday");O("day","d");O("weekday","e");O("isoWeekday","E");sa.day=11;sa.weekday=11;sa.isoWeekday=11;N("d",ma);N("e",ma);N("E",ma);N("dd",
function(v,A){return A.weekdaysMinRegex(v)});N("ddd",function(v,A){return A.weekdaysShortRegex(v)});N("dddd",function(v,A){return A.weekdaysRegex(v)});oa(["dd","ddd","dddd"],function(v,A,H,J){J=H._locale.weekdaysParse(v,J,H._strict);null!=J?A.d=J:h(H).invalidWeekday=v});oa(["d","e","E"],function(v,A,H,J){A[J]=Y(v)});var Xb="Sun Mon Tue Wed Thu Fri Sat".split(" ");z("H",["HH",2],0,"hour");z("h",["hh",2],0,zb);z("k",["kk",2],0,function(){return this.hours()||24});z("hmm",0,0,function(){return""+zb.apply(this)+
B(this.minutes(),2)});z("hmmss",0,0,function(){return""+zb.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)});z("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)});z("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)});Qb("a",!0);Qb("A",!1);O("hour","h");sa.hour=13;N("a",Rb);N("A",Rb);N("H",ma);N("h",ma);N("k",ma);N("HH",ma,va);N("hh",ma,va);N("kk",ma,va);N("hmm",sc);N("hmmss",tc);N("Hmm",sc);N("Hmmss",tc);da(["H","HH"],ra);da(["k","kk"],function(v,
A,H){v=Y(v);A[ra]=24===v?0:v});da(["a","A"],function(v,A,H){H._isPm=H._locale.isPM(v);H._meridiem=v});da(["h","hh"],function(v,A,H){A[ra]=Y(v);h(H).bigHour=!0});da("hmm",function(v,A,H){var J=v.length-2;A[ra]=Y(v.substr(0,J));A[xa]=Y(v.substr(J));h(H).bigHour=!0});da("hmmss",function(v,A,H){var J=v.length-4,R=v.length-2;A[ra]=Y(v.substr(0,J));A[xa]=Y(v.substr(J,2));A[Ca]=Y(v.substr(R));h(H).bigHour=!0});da("Hmm",function(v,A,H){H=v.length-2;A[ra]=Y(v.substr(0,H));A[xa]=Y(v.substr(H))});da("Hmmss",
function(v,A,H){H=v.length-4;var J=v.length-2;A[ra]=Y(v.substr(0,H));A[xa]=Y(v.substr(H,2));A[Ca]=Y(v.substr(J))});var Uc=ea("Hours",!0),Tb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Wb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Xb,
meridiemParse:/[ap]\.?m?\.?/i},na={},$a={},Za,Dc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ec=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fc=/Z|[+-]\d\d(?::?\d\d)?/,eb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,
!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Cb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jc=
/^\/?Date\((-?\d+)/i,Gc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Hc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(v){v._d=new Date(v._i+(v._useUTC?" UTC":""))});t.ISO_8601=function(){};t.RFC_2822=function(){};var Vc=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var v=la.apply(null,arguments);return this.isValid()&&v.isValid()?v<this?this:v:r()}),Wc=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var v=la.apply(null,arguments);return this.isValid()&&v.isValid()?v>this?
this:v:r()}),ab="year quarter month week day hour minute second millisecond".split(" ");ac("Z",":");ac("ZZ","");N("Z",pb);N("ZZ",pb);da(["Z","ZZ"],function(v,A,H){H._useUTC=!0;H._tzm=Gb(pb,v)});var Mc=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Nc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Oc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ya.fn=fb.prototype;ya.invalid=
function(){return ya(NaN)};var Xc=dc(1,"add"),Yc=dc(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var wc=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(v){return void 0===v?this.localeData():this.locale(v)}),jc=126227808E5;z("N",0,0,"eraAbbr");z("NN",0,0,"eraAbbr");z("NNN",0,0,"eraAbbr");z("NNNN",0,0,"eraName");z("NNNNN",0,0,"eraNarrow");
z("y",["y",1],"yo","eraYear");z("y",["yy",2],0,"eraYear");z("y",["yyy",3],0,"eraYear");z("y",["yyyy",4],0,"eraYear");N("N",Ib);N("NN",Ib);N("NNN",Ib);N("NNNN",function(v,A){return A.erasNameRegex(v)});N("NNNNN",function(v,A){return A.erasNarrowRegex(v)});da(["N","NN","NNN","NNNN","NNNNN"],function(v,A,H,J){(A=H._locale.erasParse(v,J,H._strict))?h(H).era=A:h(H).invalidEra=v});N("y",Ua);N("yy",Ua);N("yyy",Ua);N("yyyy",Ua);N("yo",function(v,A){return A._eraYearOrdinalRegex||Ua});da(["y","yy","yyy","yyyy"],
ua);da(["yo"],function(v,A,H,J){var R;H._locale._eraYearOrdinalRegex&&(R=v.match(H._locale._eraYearOrdinalRegex));A[ua]=H._locale.eraYearOrdinalParse?H._locale.eraYearOrdinalParse(v,R):parseInt(v,10)});z(0,["gg",2],0,function(){return this.weekYear()%100});z(0,["GG",2],0,function(){return this.isoWeekYear()%100});ib("gggg","weekYear");ib("ggggg","weekYear");ib("GGGG","isoWeekYear");ib("GGGGG","isoWeekYear");O("weekYear","gg");O("isoWeekYear","GG");sa.weekYear=1;sa.isoWeekYear=1;N("G",ob);N("g",ob);
N("GG",ma,va);N("gg",ma,va);N("GGGG",Nb,Mb);N("gggg",Nb,Mb);N("GGGGG",nb,lb);N("ggggg",nb,lb);oa(["gggg","ggggg","GGGG","GGGGG"],function(v,A,H,J){A[J.substr(0,2)]=Y(v)});oa(["gg","GG"],function(v,A,H,J){A[J]=t.parseTwoDigitYear(v)});z("Q",0,"Qo","quarter");O("quarter","Q");sa.quarter=7;N("Q",qc);da("Q",function(v,A){A[Ba]=3*(Y(v)-1)});z("D",["DD",2],"Do","date");O("date","D");sa.date=9;N("D",ma);N("DD",ma,va);N("Do",function(v,A){return v?A._dayOfMonthOrdinalParse||A._ordinalParse:A._dayOfMonthOrdinalParseLenient});
da(["D","DD"],za);da("Do",function(v,A){A[za]=Y(v.match(ma)[0])});var xc=ea("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear");O("dayOfYear","DDD");sa.dayOfYear=4;N("DDD",mb);N("DDDD",rc);da(["DDD","DDDD"],function(v,A,H){H._dayOfYear=Y(v)});z("m",["mm",2],0,"minute");O("minute","m");sa.minute=14;N("m",ma);N("mm",ma,va);da(["m","mm"],xa);var Zc=ea("Minutes",!1);z("s",["ss",2],0,"second");O("second","s");sa.second=15;N("s",ma);N("ss",ma,va);da(["s","ss"],Ca);var $c=ea("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/
100)});z(0,["SS",2],0,function(){return~~(this.millisecond()/10)});z(0,["SSS",3],0,"millisecond");z(0,["SSSS",4],0,function(){return 10*this.millisecond()});z(0,["SSSSS",5],0,function(){return 100*this.millisecond()});z(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});z(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});z(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});z(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});O("millisecond","ms");sa.millisecond=
16;N("S",mb,qc);N("SS",mb,va);N("SSS",mb,rc);var Ia;for(Ia="SSSS";9>=Ia.length;Ia+="S")N(Ia,Ua);for(Ia="S";9>=Ia.length;Ia+="S")da(Ia,Qc);var ad=ea("Milliseconds",!1);z("z",0,0,"zoneAbbr");z("zz",0,0,"zoneName");var ba=q.prototype;ba.add=Xc;ba.calendar=function(v,A){if(1===arguments.length)if(arguments[0]){var H=arguments[0],J;if(!(J=u(H)||b(H)||fc(H)||a(H)||Pc(H))){J=l(H)&&!f(H);var R=!1,W="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),
Z;for(Z=0;Z<W.length;Z+=1){var fa=W[Z];R=R||k(H,fa)}J=J&&R}if(J||null===H||void 0===H)v=arguments[0],A=void 0;else{H=arguments[0];J=l(H)&&!f(H);R=!1;W="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(Z=0;Z<W.length;Z+=1)fa=W[Z],R=R||k(H,fa);J&&R&&(A=arguments[0],v=void 0)}}else A=v=void 0;H=v||la();J=Hb(H,this).startOf("day");J=t.calendarFormat(this,J)||"sameElse";R=A&&(D(A[J])?A[J].call(this,H):A[J]);return this.format(R||this.localeData().calendar(J,this,la(H)))};ba.clone=function(){return new q(this)};
ba.diff=function(v,A,H){if(!this.isValid())return NaN;v=Hb(v,this);if(!v.isValid())return NaN;var J=6E4*(v.utcOffset()-this.utcOffset());A=Q(A);switch(A){case "year":A=hb(this,v)/12;break;case "month":A=hb(this,v);break;case "quarter":A=hb(this,v)/3;break;case "second":A=(this-v)/1E3;break;case "minute":A=(this-v)/6E4;break;case "hour":A=(this-v)/36E5;break;case "day":A=(this-v-J)/864E5;break;case "week":A=(this-v-J)/6048E5;break;default:A=this-v}return H?A:aa(A)};ba.endOf=function(v){v=Q(v);if(void 0===
v||"millisecond"===v||!this.isValid())return this;var A=this._isUTC?kc:ic;switch(v){case "year":var H=A(this.year()+1,0,1)-1;break;case "quarter":H=A(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":H=A(this.year(),this.month()+1,1)-1;break;case "week":H=A(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":H=A(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":H=A(this.year(),this.month(),this.date()+1)-1;break;
case "hour":H=this._d.valueOf();H+=36E5-Sa(H+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":H=this._d.valueOf();H+=6E4-Sa(H,6E4)-1;break;case "second":H=this._d.valueOf(),H+=1E3-Sa(H,1E3)-1}this._d.setTime(H);t.updateOffset(this,!0);return this};ba.format=function(v){v||(v=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);v=L(this,v);return this.localeData().postformat(v)};ba.from=function(v,A){return this.isValid()&&(u(v)&&v.isValid()||la(v).isValid())?ya({to:this,from:v}).locale(this.locale()).humanize(!A):
this.localeData().invalidDate()};ba.fromNow=function(v){return this.from(la(),v)};ba.to=function(v,A){return this.isValid()&&(u(v)&&v.isValid()||la(v).isValid())?ya({from:this,to:v}).locale(this.locale()).humanize(!A):this.localeData().invalidDate()};ba.toNow=function(v){return this.to(la(),v)};ba.get=function(v){v=Q(v);return D(this[v])?this[v]():this};ba.invalidAt=function(){return h(this).overflow};ba.isAfter=function(v,A){v=u(v)?v:la(v);if(!this.isValid()||!v.isValid())return!1;A=Q(A)||"millisecond";
return"millisecond"===A?this.valueOf()>v.valueOf():v.valueOf()<this.clone().startOf(A).valueOf()};ba.isBefore=function(v,A){v=u(v)?v:la(v);if(!this.isValid()||!v.isValid())return!1;A=Q(A)||"millisecond";return"millisecond"===A?this.valueOf()<v.valueOf():this.clone().endOf(A).valueOf()<v.valueOf()};ba.isBetween=function(v,A,H,J){v=u(v)?v:la(v);A=u(A)?A:la(A);if(!(this.isValid()&&v.isValid()&&A.isValid()))return!1;J=J||"()";return("("===J[0]?this.isAfter(v,H):!this.isBefore(v,H))&&(")"===J[1]?this.isBefore(A,
H):!this.isAfter(A,H))};ba.isSame=function(v,A){v=u(v)?v:la(v);if(!this.isValid()||!v.isValid())return!1;A=Q(A)||"millisecond";if("millisecond"===A)return this.valueOf()===v.valueOf();v=v.valueOf();return this.clone().startOf(A).valueOf()<=v&&v<=this.clone().endOf(A).valueOf()};ba.isSameOrAfter=function(v,A){return this.isSame(v,A)||this.isAfter(v,A)};ba.isSameOrBefore=function(v,A){return this.isSame(v,A)||this.isBefore(v,A)};ba.isValid=function(){return m(this)};ba.lang=wc;ba.locale=gc;ba.localeData=
hc;ba.max=Wc;ba.min=Vc;ba.parsingFlags=function(){return e({},h(this))};ba.set=function(v,A){if("object"===typeof v){v=T(v);A=X(v);var H;for(H=0;H<A.length;H++)this[A[H].unit](v[A[H].unit])}else if(v=Q(v),D(this[v]))return this[v](A);return this};ba.startOf=function(v){v=Q(v);if(void 0===v||"millisecond"===v||!this.isValid())return this;var A=this._isUTC?kc:ic;switch(v){case "year":var H=A(this.year(),0,1);break;case "quarter":H=A(this.year(),this.month()-this.month()%3,1);break;case "month":H=A(this.year(),
this.month(),1);break;case "week":H=A(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":H=A(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":H=A(this.year(),this.month(),this.date());break;case "hour":H=this._d.valueOf();H-=Sa(H+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":H=this._d.valueOf();H-=Sa(H,6E4);break;case "second":H=this._d.valueOf(),H-=Sa(H,1E3)}this._d.setTime(H);t.updateOffset(this,!0);return this};ba.subtract=
Yc;ba.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};ba.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};ba.toDate=function(){return new Date(this.valueOf())};ba.toISOString=function(v){if(!this.isValid())return null;var A=(v=!0!==v)?this.clone().utc():this;return 0>A.year()||9999<A.year()?
L(A,v?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?v?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",L(A,"Z")):L(A,v?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};ba.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var v="moment",A="";this.isLocal()||(v=0===this.utcOffset()?"moment.utc":"moment.parseZone",A="Z");v="["+v+'("]';var H=0<=this.year()&&
9999>=this.year()?"YYYY":"YYYYYY";return this.format(v+H+"-MM-DD[T]HH:mm:ss.SSS"+(A+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(ba[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});ba.toJSON=function(){return this.isValid()?this.toISOString():null};ba.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};ba.unix=function(){return Math.floor(this.valueOf()/1E3)};ba.valueOf=function(){return this._d.valueOf()-
6E4*(this._offset||0)};ba.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};ba.eraName=function(){var v,A=this.localeData().eras();var H=0;for(v=A.length;H<v;++H){var J=this.clone().startOf("day").valueOf();if(A[H].since<=J&&J<=A[H].until||A[H].until<=J&&J<=A[H].since)return A[H].name}return""};ba.eraNarrow=function(){var v,A=this.localeData().eras();var H=0;for(v=A.length;H<v;++H){var J=this.clone().startOf("day").valueOf();if(A[H].since<=
J&&J<=A[H].until||A[H].until<=J&&J<=A[H].since)return A[H].narrow}return""};ba.eraAbbr=function(){var v,A=this.localeData().eras();var H=0;for(v=A.length;H<v;++H){var J=this.clone().startOf("day").valueOf();if(A[H].since<=J&&J<=A[H].until||A[H].until<=J&&J<=A[H].since)return A[H].abbr}return""};ba.eraYear=function(){var v,A=this.localeData().eras();var H=0;for(v=A.length;H<v;++H){var J=A[H].since<=A[H].until?1:-1;var R=this.clone().startOf("day").valueOf();if(A[H].since<=R&&R<=A[H].until||A[H].until<=
R&&R<=A[H].since)return(this.year()-t(A[H].since).year())*J+A[H].offset}return this.year()};ba.year=vc;ba.isLeapYear=function(){return U(this.year())};ba.weekYear=function(v){return lc.call(this,v,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};ba.isoWeekYear=function(v){return lc.call(this,v,this.isoWeek(),this.isoWeekday(),1,4)};ba.quarter=ba.quarters=function(v){return null==v?Math.ceil((this.month()+1)/3):this.month(3*(v-1)+this.month()%3)};ba.month=Ja;ba.daysInMonth=
function(){return ta(this.year(),this.month())};ba.week=ba.weeks=function(v){var A=this.localeData().week(this);return null==v?A:this.add(7*(v-A),"d")};ba.isoWeek=ba.isoWeeks=function(v){var A=La(this,1,4).week;return null==v?A:this.add(7*(v-A),"d")};ba.weeksInYear=function(){var v=this.localeData()._week;return wa(this.year(),v.dow,v.doy)};ba.weeksInWeekYear=function(){var v=this.localeData()._week;return wa(this.weekYear(),v.dow,v.doy)};ba.isoWeeksInYear=function(){return wa(this.year(),1,4)};ba.isoWeeksInISOWeekYear=
function(){return wa(this.isoWeekYear(),1,4)};ba.date=xc;ba.day=ba.days=function(v){if(!this.isValid())return null!=v?this:NaN;var A=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=v){var H=this.localeData();"string"===typeof v&&(isNaN(v)?(v=H.weekdaysParse(v),v="number"===typeof v?v:null):v=parseInt(v,10));return this.add(v-A,"d")}return A};ba.weekday=function(v){if(!this.isValid())return null!=v?this:NaN;var A=(this.day()+7-this.localeData()._week.dow)%7;return null==v?A:this.add(v-A,
"d")};ba.isoWeekday=function(v){if(!this.isValid())return null!=v?this:NaN;if(null!=v){var A=this.localeData();v="string"===typeof v?A.weekdaysParse(v)%7||7:isNaN(v)?null:v;return this.day(this.day()%7?v:v-7)}return this.day()||7};ba.dayOfYear=function(v){var A=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==v?A:this.add(v-A,"d")};ba.hour=ba.hours=Uc;ba.minute=ba.minutes=Zc;ba.second=ba.seconds=$c;ba.millisecond=ba.milliseconds=ad;ba.utcOffset=function(v,
A,H){var J=this._offset||0,R;if(!this.isValid())return null!=v?this:NaN;if(null!=v){if("string"===typeof v){if(v=Gb(pb,v),null===v)return this}else 16>Math.abs(v)&&!H&&(v*=60);!this._isUTC&&A&&(R=-Math.round(this._d.getTimezoneOffset()));this._offset=v;this._isUTC=!0;null!=R&&this.add(R,"m");J!==v&&(!A||this._changeInProgress?ec(this,ya(v-J,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?J:-Math.round(this._d.getTimezoneOffset())};
ba.utc=function(v){return this.utcOffset(0,v)};ba.local=function(v){this._isUTC&&(this.utcOffset(0,v),this._isUTC=!1,v&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};ba.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var v=Gb(Tc,this._i);null!=v?this.utcOffset(v):this.utcOffset(0,!0)}return this};ba.hasAlignedHourOffset=function(v){if(!this.isValid())return!1;v=v?la(v).utcOffset():0;return 0===(this.utcOffset()-
v)%60};ba.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};ba.isLocal=function(){return this.isValid()?!this._isUTC:!1};ba.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};ba.isUtc=bc;ba.isUTC=bc;ba.zoneAbbr=function(){return this._isUTC?"UTC":""};ba.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};ba.dates=y("dates accessor is deprecated. Use date instead.",xc);ba.months=y("months accessor is deprecated. Use month instead",
Ja);ba.years=y("years accessor is deprecated. Use year instead",vc);ba.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(v,A){return null!=v?("string"!==typeof v&&(v=-v),this.utcOffset(v,A),this):-this.utcOffset()});ba.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var v={};n(v,this);v=Yb(v);
if(v._a){var A=v._isUTC?g(v._a):la(v._a);var H;if(H=this.isValid()){v=v._a;A=A.toArray();H=Math.min(v.length,A.length);var J=Math.abs(v.length-A.length),R=0,W;for(W=0;W<H;W++)Y(v[W])!==Y(A[W])&&R++;H=0<R+J}this._isDSTShifted=H}else this._isDSTShifted=!1;return this._isDSTShifted});var ja=F.prototype;ja.calendar=function(v,A,H){v=this._calendar[v]||this._calendar.sameElse;return D(v)?v.call(A,H):v};ja.longDateFormat=function(v){var A=this._longDateFormat[v],H=this._longDateFormat[v.toUpperCase()];
if(A||!H)return A;this._longDateFormat[v]=H.match(sb).map(function(J){return"MMMM"===J||"MM"===J||"DD"===J||"dddd"===J?J.slice(1):J}).join("");return this._longDateFormat[v]};ja.invalidDate=function(){return this._invalidDate};ja.ordinal=function(v){return this._ordinal.replace("%d",v)};ja.preparse=mc;ja.postformat=mc;ja.relativeTime=function(v,A,H,J){var R=this._relativeTime[H];return D(R)?R(v,A,H,J):R.replace(/%d/i,v)};ja.pastFuture=function(v,A){v=this._relativeTime[0<v?"future":"past"];return D(v)?
v(A):v.replace(/%s/i,A)};ja.set=function(v){var A;for(A in v)if(k(v,A)){var H=v[A];D(H)?this[A]=H:this["_"+A]=H}this._config=v;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};ja.eras=function(v,A){var H=this._eras||Aa("en")._eras;v=0;for(A=H.length;v<A;++v){switch(typeof H[v].since){case "string":var J=t(H[v].since).startOf("day");H[v].since=J.valueOf()}switch(typeof H[v].until){case "undefined":H[v].until=Infinity;
break;case "string":J=t(H[v].until).startOf("day").valueOf(),H[v].until=J.valueOf()}}return H};ja.erasParse=function(v,A,H){var J,R=this.eras();v=v.toUpperCase();var W=0;for(J=R.length;W<J;++W){var Z=R[W].name.toUpperCase();var fa=R[W].abbr.toUpperCase();var ka=R[W].narrow.toUpperCase();if(H)switch(A){case "N":case "NN":case "NNN":if(fa===v)return R[W];break;case "NNNN":if(Z===v)return R[W];break;case "NNNNN":if(ka===v)return R[W]}else if(0<=[Z,fa,ka].indexOf(v))return R[W]}};ja.erasConvertYear=function(v,
A){var H=v.since<=v.until?1:-1;return void 0===A?t(v.since).year():t(v.since).year()+(A-v.offset)*H};ja.erasAbbrRegex=function(v){k(this,"_erasAbbrRegex")||Jb.call(this);return v?this._erasAbbrRegex:this._erasRegex};ja.erasNameRegex=function(v){k(this,"_erasNameRegex")||Jb.call(this);return v?this._erasNameRegex:this._erasRegex};ja.erasNarrowRegex=function(v){k(this,"_erasNarrowRegex")||Jb.call(this);return v?this._erasNarrowRegex:this._erasRegex};ja.months=function(v,A){return v?p(this._months)?
this._months[v.month()]:this._months[(this._months.isFormat||uc).test(A)?"format":"standalone"][v.month()]:p(this._months)?this._months:this._months.standalone};ja.monthsShort=function(v,A){return v?p(this._monthsShort)?this._monthsShort[v.month()]:this._monthsShort[uc.test(A)?"format":"standalone"][v.month()]:p(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};ja.monthsParse=function(v,A,H){var J;if(this._monthsParseExact){a:{v=v.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=
[],this._longMonthsParse=[],this._shortMonthsParse=[],J=0;12>J;++J){var R=g([2E3,J]);this._shortMonthsParse[J]=this.monthsShort(R,"").toLocaleLowerCase();this._longMonthsParse[J]=this.months(R,"").toLocaleLowerCase()}if(H)A="MMM"===A?pa.call(this._shortMonthsParse,v):pa.call(this._longMonthsParse,v);else if("MMM"===A){A=pa.call(this._shortMonthsParse,v);if(-1!==A)break a;A=pa.call(this._longMonthsParse,v)}else{A=pa.call(this._longMonthsParse,v);if(-1!==A)break a;A=pa.call(this._shortMonthsParse,v)}A=
-1!==A?A:null}return A}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(J=0;12>J;J++)if(R=g([2E3,J]),H&&!this._longMonthsParse[J]&&(this._longMonthsParse[J]=new RegExp("^"+this.months(R,"").replace(".","")+"$","i"),this._shortMonthsParse[J]=new RegExp("^"+this.monthsShort(R,"").replace(".","")+"$","i")),H||this._monthsParse[J]||(R="^"+this.months(R,"")+"|^"+this.monthsShort(R,""),this._monthsParse[J]=new RegExp(R.replace(".",""),"i")),H&&"MMMM"===A&&
this._longMonthsParse[J].test(v)||H&&"MMM"===A&&this._shortMonthsParse[J].test(v)||!H&&this._monthsParse[J].test(v))return J};ja.monthsRegex=function(v){if(this._monthsParseExact)return k(this,"_monthsRegex")||Qa.call(this),v?this._monthsStrictRegex:this._monthsRegex;k(this,"_monthsRegex")||(this._monthsRegex=bb);return this._monthsStrictRegex&&v?this._monthsStrictRegex:this._monthsRegex};ja.monthsShortRegex=function(v){if(this._monthsParseExact)return k(this,"_monthsRegex")||Qa.call(this),v?this._monthsShortStrictRegex:
this._monthsShortRegex;k(this,"_monthsShortRegex")||(this._monthsShortRegex=bb);return this._monthsShortStrictRegex&&v?this._monthsShortStrictRegex:this._monthsShortRegex};ja.week=function(v){return La(v,this._week.dow,this._week.doy).week};ja.firstDayOfYear=function(){return this._week.doy};ja.firstDayOfWeek=function(){return this._week.dow};ja.weekdays=function(v,A){A=p(this._weekdays)?this._weekdays:this._weekdays[v&&!0!==v&&this._weekdays.isFormat.test(A)?"format":"standalone"];return!0===v?xb(A,
this._week.dow):v?A[v.day()]:A};ja.weekdaysMin=function(v){return!0===v?xb(this._weekdaysMin,this._week.dow):v?this._weekdaysMin[v.day()]:this._weekdaysMin};ja.weekdaysShort=function(v){return!0===v?xb(this._weekdaysShort,this._week.dow):v?this._weekdaysShort[v.day()]:this._weekdaysShort};ja.weekdaysParse=function(v,A,H){var J;if(this._weekdaysParseExact)return Ac.call(this,v,A,H);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=
[]);for(J=0;7>J;J++){var R=g([2E3,1]).day(J);H&&!this._fullWeekdaysParse[J]&&(this._fullWeekdaysParse[J]=new RegExp("^"+this.weekdays(R,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[J]=new RegExp("^"+this.weekdaysShort(R,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[J]=new RegExp("^"+this.weekdaysMin(R,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[J]||(R="^"+this.weekdays(R,"")+"|^"+this.weekdaysShort(R,"")+"|^"+this.weekdaysMin(R,""),this._weekdaysParse[J]=new RegExp(R.replace(".",
""),"i"));if(H&&"dddd"===A&&this._fullWeekdaysParse[J].test(v)||H&&"ddd"===A&&this._shortWeekdaysParse[J].test(v)||H&&"dd"===A&&this._minWeekdaysParse[J].test(v)||!H&&this._weekdaysParse[J].test(v))return J}};ja.weekdaysRegex=function(v){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||yb.call(this),v?this._weekdaysStrictRegex:this._weekdaysRegex;k(this,"_weekdaysRegex")||(this._weekdaysRegex=bb);return this._weekdaysStrictRegex&&v?this._weekdaysStrictRegex:this._weekdaysRegex};ja.weekdaysShortRegex=
function(v){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||yb.call(this),v?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;k(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=bb);return this._weekdaysShortStrictRegex&&v?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ja.weekdaysMinRegex=function(v){if(this._weekdaysParseExact)return k(this,"_weekdaysRegex")||yb.call(this),v?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;k(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=
bb);return this._weekdaysMinStrictRegex&&v?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ja.isPM=function(v){return"p"===(v+"").toLowerCase().charAt(0)};ja.meridiem=function(v,A,H){return 11<v?H?"pm":"PM":H?"am":"AM"};Ha("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(v){var A=v%10;A=1===Y(v%
100/10)?"th":1===A?"st":2===A?"nd":3===A?"rd":"th";return v+A}});t.lang=y("moment.lang is deprecated. Use moment.locale instead.",Ha);t.langData=y("moment.langData is deprecated. Use moment.localeData instead.",Aa);var Ea=Math.abs,bd=Da("ms"),cd=Da("s"),dd=Da("m"),ed=Da("h"),fd=Da("d"),gd=Da("w"),hd=Da("M"),id=Da("Q"),jd=Da("y"),kd=Oa("milliseconds"),ld=Oa("seconds"),md=Oa("minutes"),nd=Oa("hours"),od=Oa("days"),pd=Oa("months"),qd=Oa("years"),Fa=Math.round,Va={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},
Lb=Math.abs,ia=fb.prototype;ia.isValid=function(){return this._isValid};ia.abs=function(){var v=this._data;this._milliseconds=Ea(this._milliseconds);this._days=Ea(this._days);this._months=Ea(this._months);v.milliseconds=Ea(v.milliseconds);v.seconds=Ea(v.seconds);v.minutes=Ea(v.minutes);v.hours=Ea(v.hours);v.months=Ea(v.months);v.years=Ea(v.years);return this};ia.add=function(v,A){return oc(this,v,A,1)};ia.subtract=function(v,A){return oc(this,v,A,-1)};ia.as=function(v){if(!this.isValid())return NaN;
var A=this._milliseconds;v=Q(v);if("month"===v||"quarter"===v||"year"===v){var H=this._days+A/864E5;H=this._months+4800*H/146097;switch(v){case "month":return H;case "quarter":return H/3;case "year":return H/12}}else switch(H=this._days+Math.round(146097*this._months/4800),v){case "week":return H/7+A/6048E5;case "day":return H+A/864E5;case "hour":return 24*H+A/36E5;case "minute":return 1440*H+A/6E4;case "second":return 86400*H+A/1E3;case "millisecond":return Math.floor(864E5*H)+A;default:throw Error("Unknown unit "+
v);}};ia.asMilliseconds=bd;ia.asSeconds=cd;ia.asMinutes=dd;ia.asHours=ed;ia.asDays=fd;ia.asWeeks=gd;ia.asMonths=hd;ia.asQuarters=id;ia.asYears=jd;ia.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*Y(this._months/12):NaN};ia._bubble=function(){var v=this._milliseconds,A=this._days,H=this._months,J=this._data;0<=v&&0<=A&&0<=H||0>=v&&0>=A&&0>=H||(v+=864E5*pc(146097*H/4800+A),H=A=0);J.milliseconds=v%1E3;v=aa(v/1E3);J.seconds=v%60;v=aa(v/60);
J.minutes=v%60;v=aa(v/60);J.hours=v%24;A+=aa(v/24);v=aa(4800*A/146097);H+=v;A-=pc(146097*v/4800);v=aa(H/12);J.days=A;J.months=H%12;J.years=v;return this};ia.clone=function(){return ya(this)};ia.get=function(v){v=Q(v);return this.isValid()?this[v+"s"]():NaN};ia.milliseconds=kd;ia.seconds=ld;ia.minutes=md;ia.hours=nd;ia.days=od;ia.weeks=function(){return aa(this.days()/7)};ia.months=pd;ia.years=qd;ia.humanize=function(v,A){if(!this.isValid())return this.localeData().invalidDate();var H=!1,J=Va;"object"===
typeof v&&(A=v,v=!1);"boolean"===typeof v&&(H=v);"object"===typeof A&&(J=Object.assign({},Va,A),null!=A.s&&null==A.ss&&(J.ss=A.s-1));v=this.localeData();A=!H;var R=ya(this).abs(),W=Fa(R.as("s")),Z=Fa(R.as("m")),fa=Fa(R.as("h")),ka=Fa(R.as("d")),ha=Fa(R.as("M")),qa=Fa(R.as("w"));R=Fa(R.as("y"));W=W<=J.ss&&["s",W]||W<J.s&&["ss",W]||1>=Z&&["m"]||Z<J.m&&["mm",Z]||1>=fa&&["h"]||fa<J.h&&["hh",fa]||1>=ka&&["d"]||ka<J.d&&["dd",ka];null!=J.w&&(W=W||1>=qa&&["w"]||qa<J.w&&["ww",qa]);W=W||1>=ha&&["M"]||ha<J.M&&
["MM",ha]||1>=R&&["y"]||["yy",R];W[2]=A;W[3]=0<+this;W[4]=v;A=Rc.apply(null,W);H&&(A=v.pastFuture(+this,A));return v.postformat(A)};ia.toISOString=kb;ia.toString=kb;ia.toJSON=kb;ia.locale=gc;ia.localeData=hc;ia.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",kb);ia.lang=wc;z("X",0,0,"unix");z("x",0,0,"valueOf");N("x",ob);N("X",/[+-]?\d+(\.\d{1,3})?/);da("X",function(v,A,H){H._d=new Date(1E3*parseFloat(v))});da("x",function(v,A,H){H._d=new Date(Y(v))});
t.version="2.29.1";var yc=la;t.fn=ba;t.min=function(){var v=[].slice.call(arguments,0);return Zb("isBefore",v)};t.max=function(){var v=[].slice.call(arguments,0);return Zb("isAfter",v)};t.now=function(){return Date.now?Date.now():+new Date};t.utc=g;t.unix=function(v){return la(1E3*v)};t.months=function(v,A){return nc(v,A,"months")};t.isDate=b;t.locale=Ha;t.invalid=r;t.duration=ya;t.isMoment=u;t.weekdays=function(v,A,H){return Kb(v,A,H,"weekdays")};t.parseZone=function(){return la.apply(null,arguments).parseZone()};
t.localeData=Aa;t.isDuration=gb;t.monthsShort=function(v,A){return nc(v,A,"monthsShort")};t.weekdaysMin=function(v,A,H){return Kb(v,A,H,"weekdaysMin")};t.defineLocale=Ab;t.updateLocale=function(v,A){if(null!=A){var H=Tb;if(null!=na[v]&&null!=na[v].parentLocale)na[v].set(G(na[v]._config,A));else{var J=db(v);null!=J&&(H=J._config);A=G(H,A);null==J&&(A.abbr=v);A=new F(A);A.parentLocale=na[v];na[v]=A}Ha(v)}else null!=na[v]&&(null!=na[v].parentLocale?(na[v]=na[v].parentLocale,v===Ha()&&Ha(v)):null!=na[v]&&
delete na[v]);return na[v]};t.locales=function(){return Sc(na)};t.weekdaysShort=function(v,A,H){return Kb(v,A,H,"weekdaysShort")};t.normalizeUnits=Q;t.relativeTimeRounding=function(v){return void 0===v?Fa:"function"===typeof v?(Fa=v,!0):!1};t.relativeTimeThreshold=function(v,A){if(void 0===Va[v])return!1;if(void 0===A)return Va[v];Va[v]=A;"s"===v&&(Va.ss=A-1);return!0};t.calendarFormat=function(v,A){v=v.diff(A,"days",!0);return-6>v?"sameElse":-1>v?"lastWeek":0>v?"lastDay":1>v?"sameDay":2>v?"nextDay":
7>v?"nextWeek":"sameElse"};t.prototype=ba;t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaUtil":function(){define(["dojo/_base/lang","esri/geometry/webMercatorUtils","esri/dijit/geoenrichment/utils/CoordinateUtil"],
function(t,p,l){var k={geometryToLatLong:function(f){var c=f.spatialReference.wkid;return c===l.WGS_84_WKID?{STORE_LONG:f.x,STORE_LAT:f.y}:l.isWebMercator(c)?(f=p.xyToLngLat(f.x,f.y),{STORE_LONG:f[0],STORE_LAT:f[1]}):null},populateCombinedAreasInfo:function(f,c){var a={},b={};c.forEach(function(d){d.latitude&&(a[d.latitude]=1);d.longitude&&(b[d.longitude]=1)});f.name=f.name||c.map(function(d){return d.name}).join(", ");f.shortName=f.shortName||c.map(function(d){return d.shortName||d.name}).join(", ");
f.description=f.description||c.map(function(d){return d.description||d.name}).join(", ");f.address=f.address||c.map(function(d){return d.address||d.name}).join(", ");f.latitude=f.latitude||Object.keys(a).join(", ");f.longitude=f.longitude||Object.keys(b).join(", ");return f},groupAreas:function(f){function c(h){var m=h.locationName||h.name;return{isSingleAreaGroup:!0,label:m,hideGroupLabel:m===(h.shortName||h.name),areas:[h]}}var a=f.combinedAreasInfo&&f.combinedAreasInfo.groups||[],b=[],d=[],e={};
f.analysisAreas.forEach(function(h){if((!f.filter||f.filter(h))&&!h.hidden)if(h.isGrouped){if(!e[h.groupIndex]){var m=a[h.groupIndex];m=e[h.groupIndex]={isRealGroup:!0,label:m.locationName||m.name,areas:[]};d.push(m);b.push(m)}e[h.groupIndex].areas.push(h)}else b.push(c(h))});if(1===b.length&&b[0].isRealGroup){b=b[0].areas.map(c);d.length=0;var g=!0}return{groupInfos:b,isOnlyAreasInOnlyGroup:g}},parseSites:function(f){if(f.sites){f.analysisAreas=[];f.sites.forEach(function(a){a.areas.forEach(function(b){f.analysisAreas.push(b)})});
f.combinedAreasInfo={groups:f.sites.map(function(a){var b=t.mixin({},a);delete b.areas;delete b.attributes;delete b.notes;delete b.images;b.indexes=a.areas.map(function(d){return f.analysisAreas.indexOf(d)});return b})};k.populateCombinedAreasInfo(f.combinedAreasInfo,f.sites);if(!f.attachmentsProvider||!f.attachmentsProvider.getAttributesForAreaAt){f.attachmentsProvider={};f.attachmentsProvider.supportsMultipleAreas=1<f.sites.length;var c=f.attachmentsProvider.areaAttachments=[];f.sites.forEach(function(a){a.areas.forEach(function(b){c.push({attributes:a.attributes,
notes:a.notes,images:a.images})})})}delete f.sites}}};return k})},"esri/dijit/geoenrichment/utils/CoordinateUtil":function(){define(["esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(t,p){var l={},k=[4326,102100,102113,3857];l.WGS_84_WKID=4326;l.WEB_MERCATOR_WKID=102100;l.getSupportedWKIDs=function(){return k.slice()};l.testSpatialReferenceWKID=function(f){f=k.indexOf(Number(f&&"object"===typeof f?f.wkid:f));return 0<=f?k[0===f?0:1]:0};l.isWebMercator=function(f){return 102100===
l.testSpatialReferenceWKID(f)};l.isWGS84=function(f){return 4326===l.testSpatialReferenceWKID(f)};l.getGeometryConverter=function(f,c){f=l.testSpatialReferenceWKID(f);c=l.testSpatialReferenceWKID(c);return f&&c&&f!==c?4326===f?t.geographicToWebMercator:t.webMercatorToGeographic:null};l.toWGS84=function(f){return l.toSpatialReference(f,4326)};l.toWebMercator=function(f){return l.toSpatialReference(f,102100)};l.toSpatialReference=function(f,c){f&&!f.toJson&&(f=p.fromJson(f));c=l.getGeometryConverter(f&&
f.spatialReference,c);return null!=c?c(f):f};return l})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomSelect":function(){define("dojo/_base/declare dojo/dom-construct esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ./Select ./ZoomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor dojo/i18n!esri/nls/jsapi".split(" "),function(t,p,l,k,f,c,a){a=a.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var b=t(l,{createPresentation:function(d,e,g,h){var m=this,r=this.inherited(arguments);if(d.isCustomZoom){r.innerHTML=
"";var n=p.create("div",{"class":"esriGELink",innerHTML:a.customZoom},r),q=new c({numericOnly:!0,onApply:function(u){m.onCustomZoomApplied(u);n.innerHTML=a.customZoom},onCancel:function(){n.innerHTML=a.customZoom}});n.addEventListener("click",function(){q.range={min:10,max:1E3};q.editNodeLabel({node:n,initialText:""})})}else this.selectPresentation(r,e);return r},onCustomZoomApplied:function(d){}});return t(k,{listClass:"esriGEOnDemandSelectUnlimitedTallList esriGEOnDemandSelectSpacedOut",buildRendering:function(){var d=
this;this.inherited(arguments);this.itemRenderer=new b({onCustomZoomApplied:function(e){d.set("value",e);d.onChange({value:e});d.closePopup()}})},postCreate:function(){this.inherited(arguments);var d=f.getOptions().slice();d.push({isCustomZoom:!0,enabled:!1});this.set("options",d);this.set("value",100)}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomUtil":function(){define(["dojo/i18n!esri/nls/jsapi"],function(t){var p={};t=t.geoenrichment.dijit.ReportPlayer.PlayerToolbar;p.FIT_PAGE="fitPage";
p.FIT_PAGE_WIDTH="fitPageWidth";p.FIT_PAGE_HEIGHT="fitPageHeight";p.getOptions=function(){var l=[{value:p.FIT_PAGE,label:t.fitPage},{value:p.FIT_PAGE_WIDTH,label:t.fitPageWidth},{value:p.FIT_PAGE_HEIGHT,label:t.fitPageHeight}];[{value:400,label:"400%"},{value:200,label:"200%"},{value:150,label:"150%"},{value:125,label:"125%"},{value:100,label:"100%"},{value:90,label:"90%"},{value:80,label:"80%"},{value:70,label:"70%"},{value:60,label:"60%"},{value:50,label:"50%"}].forEach(function(k){l.push({isCustom:!0,
value:-1,label:""});l.push(k)});l.push({isCustom:!0,value:-1,label:""});return l};p.getClosestZoomAndUpdateOptions=function(l,k){k.forEach(function(b){b.isCustom&&(b.value=-1,b.hidden=!0)});var f=[];k.forEach(function(b){b.isCustom||"number"!==typeof b.value||f.push({option:b,value:b.value,score:l<b.value?l/b.value:b.value/l})});f.sort(function(b,d){return d.score-b.score});var c=f[0];if(1===c.score)return c.value;var a=k.indexOf(c.option);k=k[a+(l>c.value?-1:1)];k.value=l;k.label=Math.round(l)+"%";
k.hidden=!1;return k.value};return p})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ToolbarArranger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","esri/dijit/geoenrichment/utils/DomUtil"],function(t,p,l,k){return t(null,{showAreaTitle:!1,stretchToolbarNode:null,domNode:null,infographicsSelectDiv:null,areaTitleDiv:null,areaTitleInnerDiv:null,rightSideControlsBlock:null,areasSelectDiv:null,zoomSelectDiv:null,pageSelectDiv:null,commandButtonsContainer:null,constructor:function(f){p.mixin(this,
f)},arrangeControls:function(){k[0<this.infographicsSelectDiv.children.length?"show":"hide"](this.infographicsSelectDiv);k[this.showAreaTitle?"show":"hide"](this.areaTitleDiv);this.domNode.style.width="";this.areaTitleDiv.style.marginLeft="";this.areaTitleInnerDiv.style.maxWidth="";this.rightSideControlsBlock.style.position=this.stretchToolbarNode?"absolute":"static";this.stretchToolbarNode&&(this.domNode.style.width=this.stretchToolbarNode.clientWidth+"px",this._processStretchSpecialCases(this.stretchToolbarNode));
this.syncRightSideVisibility()},_processStretchSpecialCases:function(f){function c(b){return k.isHidden(b)?0:b.clientWidth+a(b)}function a(b){return k.isHidden(b)?0:l.get(b,"marginLeft")+l.get(b,"marginRight")}this.showAreaTitle&&(f=f.clientWidth,f-=c(this.infographicsSelectDiv),f-=c(this.rightSideControlsBlock),f-=c(this.areasSelectDiv),f-=a(this.areaTitleDiv),this.areaTitleInnerDiv.style.maxWidth=f+"px",k.isHidden(this.infographicsSelectDiv)||k.isHidden(this.infographicsSelectDiv)||(this.areaTitleDiv.style.marginLeft=
Math.min(f-this.areaTitleDiv.clientWidth,(this.domNode.clientWidth-this.areaTitleDiv.clientWidth)/2-c(this.infographicsSelectDiv))+"px"))},hasVisibleControls:function(){return[this.infographicsSelectDiv,this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout)},syncRightSideVisibility:function(){k.show(this.rightSideControlsBlock);var f=[this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout);
k[f?"show":"hide"](this.rightSideControlsBlock)}})})},"esri/dijit/geoenrichment/utils/InvokeUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p){return{invoke:function(l,k,f,c,a){l.__invokeTimeoutIDs||(l.__invokeTimeoutIDs={});var b=l.__invokeTimeoutIDs[k];if(b){if(null==f||!1===c)return b.dfd.promise;clearTimeout(b.handle)}b||(b=l.__invokeTimeoutIDs[k]={dfd:new t});b.handle=setTimeout(function(){delete l.__invokeTimeoutIDs[k];p(a?l[k].apply(l,
a):l[k](),function(d){b.dfd.resolve(d)},function(d){b.dfd.reject(d)})},f||0);return b.dfd.promise},hasPendingInvoke:function(l,k){return!(!l.__invokeTimeoutIDs||!l.__invokeTimeoutIDs[k])},cancelInvoke:function(l,k){l.__invokeTimeoutIDs&&l.__invokeTimeoutIDs[k]&&(clearTimeout(l.__invokeTimeoutIDs[k].handle),delete l.__invokeTimeoutIDs[k])}}})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerViewModel":function(){define("dojo/_base/declare dojo/aspect esri/dijit/geoenrichment/promise/all ./core/layout/LayoutBuilder ./core/themes/ThemeLibrary ./core/themes/ReportThemes ./core/supportClasses/map/layers/locator/LocatorPointsController ./core/supportClasses/map/layers/std/StdPolygonsController ./core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController ./core/supportClasses/EditorUnits ../utils/ColorUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g){return t(null,{isReportPlayerViewModel:!0,layoutBuilder:null,dynamicReportInfo:null,enableDataDrilling:!1,preInitialize:function(){this.layoutBuilder=this.layoutBuilder||new k;return this.layoutBuilder.initCoreComponents()},initialize:function(h,m){this.preInitialize();return this.layoutBuilder[h?"initClassicComponents":"initGraphicComponents"](m)},_animationAllowed:!1,_animationSuspended:!1,isAnimationAllowed:function(){return this._animationAllowed&&!this._animationSuspended},
setAnimationAllowed:function(h){this._animationAllowed=h},setAnimationSuspended:function(h){this._animationSuspended=h},_theme:null,getTheme:function(h){return h||this._theme},setTheme:function(h){this._theme=h||f.getReportThemeById(c.GRAPHIC)},getTableDefaultStyles:function(h,m){h=this.getTheme(h).table.overrideStyles;return m?h[m]:h},getChartDefaultStyles:function(h){return this.getTheme(h).chart},getDocumentDefaultStyles:function(h){return this.getTheme(h).document},getInfographicDefaultStyles:function(h){return this.getTheme(h).infographic},
getStaticInfographicDefaultStyles:function(h){return(h=this.getInfographicDefaultStyles(h))&&h.staticInfographic},isLightDocumentTheme:function(h){return g.isLightColor(this.getTheme(h).document.backgroundColor)},_isGraphicStyle:!1,isGraphicStyle:function(){return this._isGraphicStyle},setDynamicReportInfo:function(h){this.dynamicReportInfo=h;this._isGraphicStyle=h.reportObject.isGraphicReport},getDynamicBehaviorImage:function(h,m,r){},_locatorPointsControllers:null,getLocatorPointsController:function(h,
m){var r=h.calculatorName+"_"+m;this._locatorPointsControllers=this._locatorPointsControllers||{};var n=this._locatorPointsControllers[r];n||(n=this._locatorPointsControllers[r]=new a(h,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,m),p.after(n,"destroy",function(){delete this._locatorPointsControllers[r]}.bind(this)));return n},_stdPolygonsControllers:null,getStdPolygonsController:function(h,m){this._stdPolygonsControllers=this._stdPolygonsControllers||{};var r=h+"_"+(m||
0),n=this._stdPolygonsControllers[r];n||(n=this._stdPolygonsControllers[r]=new b(h,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,m),p.after(n,"destroy",function(){delete this._stdPolygonsControllers[r]}.bind(this)));return n},loadAllStdFeatures:function(){var h=[],m;for(m in this._stdPolygonsControllers)h.push(this._stdPolygonsControllers[m].loadAllFeatures());return l(h)},_thisAreasHighlightController:null,getThisAreasHighlightController:function(){this._thisAreasHighlightController||
(this._thisAreasHighlightController=new d,p.after(this._thisAreasHighlightController,"destroy",function(){this._thisAreasHighlightController=null}.bind(this)));return this._thisAreasHighlightController},_legendControllers:null,registerLegendController:function(h,m,r){this._legendControllers=this._legendControllers||{};var n=this._legendControllers[m]=this._legendControllers[m]||{};n[r]=h;var q=h.addCallback(function(u,w){if(w)for(var y in n)w=n[y],w!==h&&w.setLegendVisible(u)},"viewModel");return{remove:function(){delete n[r];
q.remove()}}},_benchmarkController:null,_benchmarkDisabled:!1,getBenchmarkController:function(){return!this._benchmarkDisabled&&this._benchmarkController},registerBenchmarkController:function(h){this._benchmarkController&&this._benchmarkController.destroy();this._benchmarkController=h;p.after(this._benchmarkController,"destroy",function(){this._benchmarkController=null}.bind(this))},isBenchmarkedArea:function(h){return this._benchmarkDisabled?!1:"number"===typeof h&&this._benchmarkController&&0<=
this._benchmarkController.getAreaIndex()&&this._benchmarkController.getAreaIndex()!==h},setBenchmarkDisabled:function(h){this._benchmarkDisabled=h},reset:function(){[this._locatorPointsControllers,this._stdPolygonsControllers].forEach(function(h){h&&Object.keys(h).forEach(function(m){(m=h[m])&&m.destroy()})});this._stdPolygonsControllers=this._locatorPointsControllers=null;this._thisAreasHighlightController&&this._thisAreasHighlightController.destroy();this._thisAreasHighlightController=null},canExportToExcel:function(){return!1},
exportToExcel:function(h){},prepareExportToExcelParameters:function(h){},getUnits:function(){return"px"},provideUnits:function(h){return e.provideUnits(h,this.getUnits())},roundForUnits:function(h){return e.round(h,this.getUnits())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/layout/LayoutBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/Deferred","dojo/dom-construct"],function(t,p,l,k){return t(null,{_moduleMap:null,_getModulePaths:function(){return{core:{section:"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionRenderer",
grid:"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid",image:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/image/ImageRenderer",chart:"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartRenderer",map:"esri/dijit/geoenrichment/ReportPlayer/core/map/MapRenderer"},classic:{reportContainer:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainer/ReportContainer"},graphicCore:{shape:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/shape/ShapeRenderer",infographic:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicRenderer"},
graphic_fullPages:{reportContainerGrid:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/ReportContainerGrid"},graphic_panelsInSlides:{reportContainerPagination:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerPagination/ReportContainerPagination",infographicPage:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPage"},graphic_panelsInStack:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},
graphic_panelsInStackAll:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",reportContainerStackAll:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStackAll",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},graphic_panelsInRow:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"}}},
initCoreComponents:function(){var f=this._getModulePaths();return this._initPaths(p.mixin({},f.core,f.graphicCore))},initClassicComponents:function(){var f=this._getModulePaths();return this._initPaths(p.mixin({},f.core,f.classic))},initGraphicComponents:function(f){var c=this._getModulePaths();return this._initPaths(p.mixin({},c.core,c.graphicCore,c["graphic_"+f]||c.graphic_fullPages))},_initPaths:function(f){var c=this;this._moduleMap=this._moduleMap||{};var a=[],b;for(b in f)a.push({id:b,path:f[b]});
var d=new l;require(a.map(function(e){return e.path}),function(){for(var e=0;e<arguments.length;e++)c._moduleMap[a[e].id]=arguments[e];d.resolve()});return d.promise},createElement:function(f,c,a,b){switch(f){case "grid":case "reportContainer":case "reportContainerGrid":case "reportContainerPagination":case "reportContainerStack":case "reportContainerStackAll":case "infographicPage":case "infographicPageStack":return new this._moduleMap[f](c,a?k.create("div",null,a,b):void 0);case "section":return this._moduleMap.section.createSection(c,
a,b);case "emptySection":return this._moduleMap.section.createEmptySection(c,a,b);case "image":return this._moduleMap.image.createImageContainer(c);case "shape":return this._moduleMap.shape.createShapeContainer(c);case "chart":return this._moduleMap.chart.createChartPage(c);case "infographic":return this._moduleMap.infographic.createInfographicPage(c);case "map":return this._moduleMap.map.createMapContainer(c)}return!1},getClass:function(f){return this._moduleMap[f]}})})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeLibrary":function(){define("dojo/_base/lang ./PageBorderStyles ../charts/utils/ChartLineStyles ./ReportThemes ./ThemeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a){function b(m){m=m||{};m=m.defaultFontFamilty||"Avenir Next";return{backgroundColor:"#FFFFFF",padding:5,icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},iconBarBackground:{backgroundColor:"#AAAAAA",borderColor:"#AAAAAA"},titleLine:{color:"#A8A7A8"},titleStyle:{fontFamily:m,color:"#828282",fontSize:16,backgroundColor:"transparent"},variableLabelStyle:{fontFamily:m,color:"#56a5d8",fontSize:24,backgroundColor:"transparent"},variableLabelStyleHighlighted:{fontFamily:m,
fontSize:24},variableLabelStyleContrast:{fontFamily:m,fontSize:24},variableDescriptionStyle:{fontFamily:m,color:"#828282",fontSize:13,backgroundColor:"transparent"}}}function d(){return{style:p.ALL,lineStyle:"dashed",thickness:1,color:"#b2b2b2"}}function e(m){m=m||{};var r=m.defaultFontFamilty||"Avenir Next",n=m.defaultFontSize||13;return{document:{fontSize:n,fontFamily:r,backgroundImage:{data:null,position:"center",repeat:!1,scale:!0,opacity:1,size:null},border:d()},icon:{backgroundColor:"#56a5d8"},
highlightedIcon:{backgroundColor:"#D6851A"},table:{dataTablePadding:5,tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},chart:{renderSingleDataSeriesWithSameColor:!0,outlineStyle:l.SOLID,titleStyle:{fontFamily:r,fontSize:16},xAxis:{gridLinesStyle:l.SOLID,axisStyle:{fontFamily:r,fontSize:9},titleStyle:{fontFamily:r,fontSize:n}},yAxis:{gridLinesStyle:l.SOLID,baseLineStyle:l.SOLID,axisStyle:{fontFamily:r,fontSize:9},titleStyle:{fontFamily:r,fontSize:n}},dataLabelsStyle:{fontFamily:r,
fontSize:10},legendStyle:{fontFamily:r,fontSize:10},minMaxLegend:{titleStyle:{fontFamily:r,fontSize:10},minVariableLabelStyle:{fontFamily:r,fontSize:16},maxVariableLabelStyle:{fontFamily:r,fontSize:16}},icon:{backgroundColor:"#56a5d8"},line:{},column:{},bar:{},pie:{},donut:{},ring:{},pictureColumn:{},pictureBar:{},gauge:{dataLabelStyle:{fontFamily:r}},waffle:{dataValueStyle:{fontFamily:r,fontSize:30},dataLabelStyle:{fontFamily:r,fontSize:16}},tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},
infographic:{staticInfographic:b(m)}}}var g={DEFAULT_FONT_FAMILY_CLASSIC:"Verdana",DEFAULT_FONT_FAMILY_GRAPHIC:"Avenir Next",DEFAULT_FONT_SIZE_CLASSIC:10,DEFAULT_FONT_SIZE_GRAPHIC:13,CHART_DATA_FONT_SIZE:10,defaultStaticInfographic:b(),standardRamps:[{id:k.CLASSIC,colors:["#FFFFFF","#13729F","#DEA429"],additional:{table:{overrideStyles:{Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"},ReportTitle:{color:"#FFFFFF",backgroundColor:"#00436D"},TableHeader:{color:"#4C4C4C",backgroundColor:"#CCCCCC"},
GreyText:{color:"#AAAAAA",backgroundColor:"#FFFFFF"},BlueText:{color:"#00436D",backgroundColor:"#FFFFFF"},AlternatingRow:{color:"#4C4C4C",backgroundColor:"#EEEEEE"}}},chart:{renderSingleDataSeriesWithSameColor:!1,colors:"#13729F #DEA429 #6A9741 #A75523 #456E35 #D7DF22 #868686 #3C546D #829AB3 #DEDEDE #03406E #B1B1B1".split(" ")}}},{id:k.GRAPHIC,colors:["#FFFFFF","#56A5D8","#D6851A"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}},
{id:"red",colors:["#d3d3d3","#8b4513","#ff4500"],additional:{chart:{colors3series:["#8b4513","#F1948A","#E74C3C"],colors:"#8b4513 #F1948A #EC7063 #E74C3C #CB4335 #B03A2E #943126 #78281F".split(" ")}}},{id:"dark",colors:["#6A6A6A","#FFFFFF","#EEEEEE"],additional:{chart:{colors3series:["#FFFFFF","#CACFD2","#A6ACAF"],colors:"#FFFFFF #D7DBDD #CACFD2 #BDC3C7 #A6ACAF #909497 #797D7F #626567 #4d4d4d #3e3e3e #262626".split(" ")}}},{id:"green",colors:["#556b2f","#90ee90","#ffffe0"],additional:{chart:{colors3series:["#E9F7EF",
"#A9DFBF","#27AE60"],colors:"#E9F7EF #A9DFBF #7DCEA0 #52BE80 #27AE60 #229954 #1E8449 #196F3D #145A32".split(" ")}}},{id:"green2",colors:["#FFFFFF","#0B7AC0","#35AC46"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#56A5D8 #AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}}]},h={};g.standardRamps.forEach(function(m){var r=t.mixin({},m.additional);r.id=m.id;var n=e({defaultFontFamilty:m.id===k.CLASSIC?"Verdana":"Avenir Next",defaultFontSize:m.id===
k.CLASSIC?10:13});f.applyThemeColorsToTheme({theme:n,colors:m.colors});c.populateObject(n,r,!0);g[m.id]=n;h[m.id]=n});g.TABLE_STYLES="Default ReportTitle TableHeader GreyText BlueText AlternatingRow".split(" ");g.getReportThemeById=function(m){return h[m]};g.isStandardTheme=function(m){return!!h[m]};g.getStandardThemes=function(){return Object.keys(h).map(function(m){return h[m]})};g.getDefaultStaticInfographicSettings=function(){return t.clone(g.defaultStaticInfographic)};g.getDefaultBorderSettings=
function(){return d()};g.getDefaultTheme=function(m){return e(m)};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/PageBorderStyles":function(){define([],function(){var t={NONE:"none",ALL:"all",INNER_ONLY:"innerOnly",OUTER_ONLY:"outerOnly",HORIZONTAL_INNER_ONLY:"horizontalInnerOnly",VERTICAL_INNER_ONLY:"verticalInnerOnly",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.ALL}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineStyles":function(){define([],
function(){var t={SOLID:"Solid",DASHED:"Dashed",DOTTED:"Dotted",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toGFXValue:function(p,l){switch(p){case "Dashed":return 1>l?"LongDash":"Dash";case "Dotted":return 1>l?"Dash":"Dot";default:return"Solid"}}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ReportThemes":function(){define([],function(){return{GRAPHIC:"graphic",CLASSIC:"classic",COMPARISON:"comparison"}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(t,p,l){function k(b){var d=p.isLightColor(b);return p.transform(b,{dv:d?-7:7}).toHex()}var f={getPanelTitleColor:function(b){var d=p.isLightColor(b);return p.transform(b,{dv:d?-50:50}).toHex()},getChartElementBackgroundColor:function(b){var d=p.isLightColor(b);return p.transform(b,{dv:d?-13:13}).toHex()}},c={getThemeColors:function(b){return[b.document.backgroundColor,b.icon.backgroundColor,b.highlightedIcon.backgroundColor]},
generateChartColors:function(b,d,e){e=e||{};var g=e.gradientFactor||1,h=[d,p.transform(d,{dv:-20*g}).toHex(),p.transform(d,{dv:-40*g}).toHex(),p.transform(d,{dv:-50*g}).toHex(),p.transform(d,{dv:-55*g}).toHex(),p.transform(d,{dv:-60*g}).toHex(),p.transform(d,{dv:-65*g}).toHex(),p.transform(d,{dv:-70*g}).toHex()];if(e.numLighterColors)for(var m=0;m<e.numLighterColors;m++)h.unshift(p.transform(d,{dv:20*g*(m+1),ds:-20*(m+1)}).toHex());b&&b!==d&&h.unshift(b);var r={};return h.filter(function(n){return r[n]?
!1:r[n]=!0})},applyThemeColorsToTheme:function(b){var d=b.theme,e=b.colors,g=b.preserveForegroundColor,h=b.chartColors,m=b.colors3series;b=b.preprocessGeneratedThemeFunc;var r=e[0],n=e[1];e=e[2];var q=g&&d.chart&&d.chart.dataLabelsStyle&&d.chart.dataLabelsStyle.color||p.getContrastColor(r).toHex();g=g&&d.document.color||("#FFFFFF"===r.toUpperCase()?"#4C4C4C":q);var u=p.isLightColor(r),w=f.getChartElementBackgroundColor(r),y=f.getPanelTitleColor(r),C=p.transform(r,{dv:u?-33:33}).toHex(),D={overrideStyles:{Default:{color:g,
backgroundColor:"transparent"},TableHeader:{color:p.getContrastColor(n,void 0,void 0,200).toHex(),backgroundColor:n},AlternatingRow:{color:g,backgroundColor:p.transform(r,{dv:u?-7:7}).toHex()},ReportTitle:{color:e,backgroundColor:"transparent"},GreyText:{color:C,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},G={lineColor:q,gridLinesColor:q,gridStripesColor:k(r),gridStripesColorAlt:"transparent",axisStyle:{color:q},titleStyle:{color:q}},F={lineColor:q,gridLinesColor:q,
gridStripesColor:k(r),gridStripesColorAlt:"transparent",baseLineColor:q,axisStyle:{color:q},titleStyle:{color:q}};var B=p.isLightColor(r)?"#666666":"#BBBBBB";r={document:{color:g,backgroundColor:r,border:{color:C}},icon:{backgroundColor:n},highlightedIcon:{backgroundColor:e},table:D,chart:{backgroundColor:"transparent",outlineColor:void 0,titleStyle:{color:y},dataLabelsAltColor:q,dataLabelsStyle:{color:q},xAxis:G,yAxis:F,legendStyle:{color:q,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:q}},
comparisonInfo:{lineColor:B},icon:{backgroundColor:n},ring:{ringBackground:{backgroundColor:w}},gauge:{dataLabelStyle:{color:n},othersColor:w,arrowIndicator:{lineColor:y,backgroundColor:y}},waffle:{dataValueStyle:{color:n},dataLabelStyle:{color:n},othersColor:w},columnBarBackground:{backgroundColor:w}},infographic:{backgroundColor:"transparent",agePyramid:{theme:u?"light":"common",male:{backgroundColor:n},female:{backgroundColor:e}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:n},
highlightedIcon:{backgroundColor:e},iconBarBackground:{},titleLine:{color:p.transform(r,{dv:u?-40:40}).toHex()},titleStyle:{color:y},variableLabelStyle:{color:n},variableLabelStyleHighlighted:{color:e},variableLabelStyleContrast:{color:r},variableDescriptionStyle:{color:p.transform(r,{dv:u?-50:50}).toHex()}}}};b&&b(r);l.populateObject(d,r,!0);d.chart.colors=h&&h.length?h:c.generateChartColors(n,e);d.chart.colors3series=m},applyTextStyleToTheme:function(b,d){function e(h,m){var r=t.mixin({},d);h&&
delete r.color;m||delete r.fontSize;return r}d=c.filterTextStyles(d);var g={document:e(!1,!0),table:{overrideStyles:{Default:e(!1,!0),TableHeader:e(!1,!0),AlternatingRow:e(!1,!0),ReportTitle:e(!1,!0),GreyText:e(!1,!0),BlueText:e(!1,!0)}},chart:{titleStyle:e(),dataLabelsStyle:e(),xAxis:{axisStyle:e(),titleStyle:e()},yAxis:{axisStyle:e(),titleStyle:e()},legendStyle:e(),minMaxLegend:{titleStyle:e(),minVariableLabelStyle:e(!0),maxVariableLabelStyle:e(!0)},gauge:{dataLabelStyle:e()},waffle:{dataValueStyle:e(),
dataLabelStyle:e()}},infographic:{staticInfographic:{titleStyle:e(),variableLabelStyle:e(),variableLabelStyleHighlighted:e(),variableLabelStyleContrast:e(),variableDescriptionStyle:e()}}};l.populateObject(b,g,!0)}},a={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};c.filterTextStyles=function(b){var d={},e;for(e in a){var g=b[e];void 0!==g&&(d[e]=g)}return d};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/locator/LocatorPointsController":function(){define("dojo/_base/declare dojo/on dijit/Destroyable ../../../../../dataProvider/supportClasses/data/AreaDataUtil ../../MapEventUtil esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(t,p,l,k,f,c){return t(l,{_info:null,_fieldData:null,_isMultiFeature:null,_calcDataArray:null,_currentFeatureIndex:null,_layerNames:null,constructor:function(a,b,d,e){this._info=a;this._fieldData=b;this._isMultiFeature=d;this._currentFeatureIndex=e;this._layerIndexes={};this._layerNames={};this._rendererJsons={};this._mapInfos={};this._graphicLayerInfos={}},_getCalculatorName:function(){return this._info.calculatorName},getVariableObjects:function(){return this._info.variableObjects},getLayerID:function(){return this._info.layerID},
getLayerUrl:function(){return this._info.layerUrl},getLayerName:function(a){return this._layerNames[a]||this._info.layerName},setLayerName:function(a,b){this._layerNames[a]=b},getCalculatorDataArray:function(){if(!this._calcDataArray)if(this._isMultiFeature){var a=k.combineAreaDataObjectCalculators(this._fieldData.areaData,this._getCalculatorName());this._calcDataArray=k.removeDuplicacatedCalcData(a.thisAreas.concat(a.comparisonLevels))}else this._calcDataArray=(a=k.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],
this._getCalculatorName()))&&[a.data].concat(a.comparisonLevels);return this._calcDataArray},_rendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a){return this._layerIndexes[a]},setLayerIndex:function(a,b){this._layerIndexes[a]=b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);
return a},setMapInfo:function(a,b){this._mapInfos[a]=b},_getPointIndexForCellFunc:null,_getCellForPointAtFunc:null,_highlightedCell:null,setLocatorTableCallbacks:function(a){this._getPointIndexForCellFunc=a.getPointIndexForCellFunc;this._getCellForPointAtFunc=a.getCellForPointAtFunc},registerLocatorTable:function(a){var b=this,d;a.set("highlightRowsOnHover",!0);p(a.domNode,"mouseover,mousemove",function(){var e=a.getOverFieldCell();e&&e!==d&&(d=e,b._highlightGraphicForFieldCell(d))});p(a.domNode,
"mouseout",function(){b._highlightGraphicForFieldCell(null);d=null})},_highlightRowForGraphic:function(a,b){this._highlightedCell&&(this._highlightedCell.parentGrid&&this._highlightedCell.parentGrid.setCellRowHighlighted(this._highlightedCell,!1),this._highlightedCell=null);b&&this._getCellForPointAtFunc&&(a=a.getPointIndexForGraphicFunc(b),(a=this._getCellForPointAtFunc(a))&&a.parentGrid&&(a.parentGrid.setCellRowHighlighted(a,!0),this._highlightedCell=a))},_graphicLayerInfos:null,setLocatorPointsLayer:function(a,
b,d,e){this._unSetInfo(a);b={map:d,graphicsLayer:b,getPointIndexForGraphicFunc:e.getPointIndexForGraphicFunc,getGraphicForPointAtFunc:e.getGraphicForPointAtFunc,setGraphicHighlightedFunc:e.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,overGraphic:null};this._graphicLayerInfos[a]=b;this._addLayerListeners(b)},_addLayerListeners:function(a){var b=this,d=a.map,e=a.graphicsLayer;a.layerMouseOverHandle=f.onLayerMouseOver(e,d,function(g){g.graphic&&
g.graphic._graphicsLayer===e&&a.overGraphic!==g.graphic&&((a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,b._removeHighlight(a),a.overGraphic=g.graphic,b._highlightRowForGraphic(a,a.overGraphic),a.setGraphicHighlightedFunc(a.overGraphic,!0),c.isMobileDevice())?d.infoWindow&&(d.infoWindow.setFeatures([a.overGraphic]),d.infoWindow.show(g.mapPoint,{closestFirst:!0})):a.layerMouseOutHandle=p.once(e,"mouse-out",function(h){b._removeHighlight(a,!0)}))})},_highlightGraphicForFieldCell:function(a){for(var b in this._graphicLayerInfos){var d=
this._graphicLayerInfos[b];this._removeHighlight(d);if(a){var e=this._getPointIndexForCellFunc(a);if(e=d.getGraphicForPointAtFunc(e))d.setGraphicHighlightedFunc(e,!0),d.highlightedGraphic=e}}},_removeHighlight:function(a,b){this._highlightRowForGraphic(a,null);a.highlightedGraphic&&(a.setGraphicHighlightedFunc(a.highlightedGraphic,!1),a.highlightedGraphic=null);a.overGraphic&&a.setGraphicHighlightedFunc(a.overGraphic,!1);a.overGraphic=null;!b&&a.map.infoWindow&&a.map.infoWindow.hide()},setPointVisibleAt:function(a,
b){for(var d in this._graphicLayerInfos){var e=this._graphicLayerInfos[d].getGraphicForPointAtFunc(a);if(e)e[b?"show":"hide"]()}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaDataUtil":function(){define(["dojo/_base/lang","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../../../_devConfig"],function(t,p,l){var k={getAreaDataValue:function(f){function c(C){!1!==u&&(w=C[u]);void 0===w&&(w=C[b])}function a(){if(m)c(m);else{var C=e[g];C&&c(C.data)}}var b=f.fieldName,d=f.fieldData,e=f.areaDataObject,g=f.calculatorName,h=f.featureIndex,m=f.featureAttributes,r=f.ignoreMetadata,
n=f.isMultiFeature;if(!l.showAreaDataUtilUndefinedData&&b){var q=b.indexOf("."),u=!1;-1!==q&&(u=b.substr(q+1));g||-1===q||(g=b.substr(0,q));h=void 0===h?0:Number(h)||0;if((e=f.areaDataObject||d.areaData[h])||m){var w;n&&g===p.AREA_ATTRIBUTES_CALCULATOR_NAME&&!r&&d&&c(d.metadata);void 0===w&&a();if(g)return w;void 0===w&&!r&&d&&c(d.metadata);if(void 0===w&&!m)for(var y in e)if(c(e[y].data),void 0!==w)break;return w}}},getAreaDataObjectCalculator:function(f,c,a){if(!f)return null;var b=f[c];!b&&a&&
(b=f[c]=k.createCalculator());return b},createCalculator:function(f,c){return{data:f||{},comparisonLevels:c||[]}},combineAreaDataObjectCalculators:function(f,c,a){var b=[],d=[];f.forEach(function(e){if(e=k.getAreaDataObjectCalculator(e,c))b.push(e.data),d=d.concat(e.comparisonLevels)});a&&a.removeDuplicates&&(d=k.removeDuplicacatedCalcData(d));return{thisAreas:b,comparisonLevels:d}},removeDuplicacatedCalcData:function(f){if(!f.length)return f;var c=[],a={},b=Object.keys(f[0]);f.forEach(function(d){var e=
function(g){var h="";b.forEach(function(m){h+=g[m]+";"});return h}(d);a[e]||(a[e]=!0,c.push(d))});return c},setAreaDataValue:function(f,c,a,b,d){d=void 0===d?0:Number(d)||0;k.setAreaDataObjectValue(f,c,a[d],b)},setAreaDataObjectValue:function(f,c,a,b){a&&b&&null!==c&&void 0!==c&&(k.getAreaDataObjectCalculator(a,b,!0).data[f]=c)},mergeAreaData:function(f,c){c.forEach(function(a,b){(b=f[b])&&k.mergeAreaDataObjects(b,a)})},mergeAreaDataObjects:function(f,c){for(var a in f){var b=f[a],d=c[a];d?b.comparisonLevels.length!==
d.comparisonLevels.length?console.log("Error: can't merge calculators with different comparison levels!"):(t.mixin(d.data,b.data),b.comparisonLevels.forEach(function(e,g){t.mixin(d.comparisonLevels[g],e)})):c[a]=b}console.log("AreaDataUtil.js merging area data \x3d\x3e areaData");console.log(c)}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil":function(){define(["esri/dijit/geoenrichment/utils/MaskUtil","./FieldLibrary"],function(t,
p){var l={SCRIPT_PREFIX:"",DEFAULT_SCRIPT_NAME:"Custom",TOTAL_SCRIPT_NAME:"Total",AVG_SCRIPT_NAME:"Average",SCRIPT_PREFIX_RE:/^SCRIPT_/i,FIRST_SYMBOL_IS_NUMBER_RE:/^[0-9]/,DATA_COLLECTIONS_CALCULATOR_NAME:"dataCollectionsCalculator",MAPS_CALCULATOR_NAME:"mapsCalculator",UNITED_MAPS_CALCULATOR_NAME:"unitedMapsCalculator",AREA_ATTRIBUTES_CALCULATOR_NAME:"headers",ENRICHED_DATA_NO_LEVELS:"enrichFieldData_noLevels",SCRIPTS_CALCULATOR_NAME:"scripts",createFieldNameFromSource:function(k,f){if(!k)return"";
var c="";k.isSiteAttribute?c=k.attribute.name:k.isChartAttribute?c=k.id:k.isWebMap?c=k.webMapFieldName||k.fieldName:(k=(k.fullName||k).replace(/_|\.|\s/g,""),f=f||"n",k+="n"===f?"":"_"+f,l.FIRST_SYMBOL_IS_NUMBER_RE.test(k)&&(k="_"+k),c=k.toUpperCase());return l._validateName(c)},createFieldNameFromScript:function(k){k=k.name;l.SCRIPT_PREFIX_RE.test(k)&&(k=k.replace(l.SCRIPT_PREFIX_RE,""));return l._validateName(l.SCRIPT_PREFIX+k.replace(/\.|-/g,""))},_validateName:function(k){return l._checkXMLValidName(l._maskUnicodeInName(k))},
_XML_MASK_NAME_RE:/(_X)(\d\d\d\d)/i,_checkXMLValidName:function(k){return l._XML_MASK_NAME_RE.test(k)?k.replace(l._XML_MASK_NAME_RE,"$1_$2"):k},_XML_UNICODE_RE:/&#x|;/ig,_maskUnicodeInName:function(k){return t.maskWithUnicodeXML(k).replace(l._XML_UNICODE_RE,"")},renderScriptName:function(k){return k.replace(l.SCRIPT_PREFIX_RE,"")},provideQualifiedFieldInfoTemplateName:function(k,f){k&&(k.templateName=f?f+"."+k.name:k.isWebMap?l.AREA_ATTRIBUTES_CALCULATOR_NAME+"."+k.name:k.isSiteAttribute?l.AREA_ATTRIBUTES_CALCULATOR_NAME+
"."+k.name:l.DATA_COLLECTIONS_CALCULATOR_NAME+"."+k.name)},getCalculatorName:function(k){return k&&k.templateName&&k.templateName.substr(0,k.templateName.indexOf("."))},isAreaAttributesFieldInfo:function(k){return l.getCalculatorName(k)===l.AREA_ATTRIBUTES_CALCULATOR_NAME},updateCalculatorName:function(k,f){k&&(k.hasVariable||k.script)&&(k.templateName=f+k.templateName.substr(k.templateName.indexOf(".")))},refreshNameAndTemplateName:function(k){k.statefulName&&k.fullName&&(k.name=l.createFieldNameFromSource(k,
k.statefulName.charAt(0)),k.templateName=k.templateName.substr(0,k.templateName.lastIndexOf(".")+1)+k.name)},getFieldInfoAlias:function(k){return k?k.script?k.script.alias:k.hasVariable||k.isMissing?k.alias:p.getFieldLabel(k.name):null},getTemplateNameParts:function(k){if(!k)return null;var f=k.indexOf(".");return-1===f?{calcName:null,fieldName:k}:{calcName:k.substr(0,f),fieldName:k.substr(f+1)}}};return l})},"esri/dijit/geoenrichment/utils/MaskUtil":function(){define([],function(){function t(p,l){return"string"!==
typeof p?p:String(p).replace(/[^\x20-\x7f]/g,function(k){k=k.charCodeAt(0).toString(16).toUpperCase();return l(k)})}return{maskWithUnicode:function(p){return t(p,function(l){return"\\u000".substr(0,6-l.length)+l})},maskWithUnicodeXML:function(p){return t(p,function(l){return"\x26#x000".substr(0,7-l.length)+l+";"})},removeUnicode:function(p,l){return t(p,function(k){return l||""})},removeXMLMasks:function(p,l){return p.replace(/&#x.*?;/g,l||"")}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary":function(){define(["dojo/string",
"dojo/i18n!esri/nls/jsapi"],function(t,p){var l=p.geoenrichment.dijit.ReportPlayer.FieldInfoLabels;p=p.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;l={_SPECIAL_HEADER_FIELDS_NAME_MAP:{SITE_NAME:"SiteName",STORE_ADDR:"SiteAddr",AREA_DESC2:"SiteDesc",STORE_LAT:"Latitude",STORE_LONG:"Longitude",AREA_ID:"AreaID",AREA_DESC:"AreaDesc",STORE_ID:"StoreID",RING:"Ring",STORE_NAME:"StoreName",GROUPCOUNT:"PointCount"},_ADDITIONAL_HEADER_FIELDS_MAP:{SITENOTE:"SiteNote",SITENOTE2:"SiteNote2",SITENOTE3:"SiteNote3",
SITENOTE4:"SiteNote4",SITENOTE5:"SiteNote5",SITENOTE6:"SiteNote6",SITENOTE7:"SiteNote7",SITENOTE8:"SiteNote8",SITENOTE9:"SiteNote9",SITENOTE10:"SiteNote10",SITENOTES:"SiteNotes",CHART_AREA_NAME:"ChartAreaName",CHART_SERIES_NAME:"ChartSeriesName",CHART_POINT_NAME:"ChartVariableName",CHART_POINT_VALUE:"ChartVariableValue"},_REPORT_VAR_FIELDS_MAP:{REPORTNAME:"Name",REPORTTITLE:"Title",REPORTTITLE2:"Subtitle",CURRPAGE:"Page",COPYRIGHT:"Copyright",TRIALURLTEXT:"TrialUrlText",PHONENUMBER:"PhoneNumber",
PRODUCTURL:"ProductUrl",PRODUCTLABEL:"ProductLabel",SOURCE:"Source",DATASOURCES:"DataSources",DATAVINTAGE:"DataVintage",CURRDATE:"Date",LOCATORSUMMARY:"LocatorSummary",CENSUSYEAR:"CensusYear",CURRENTYEAR:"CurrentYear",FUTUREYEAR:"FutureYear",LATITUDELABEL:"LatitudeLabel",LONGITUDELABEL:"LongitudeLabel",PAGEFORMAT:"PageFormat",BANDFROM0TO1UNIT2:"BandFrom0To1Unit2",RADIUS0UNIT1:"Radius0Unit1",AREADELIMITER:"AreaDelimiter",BANDREGIONFROM0TO1:"BandRegionFrom0To1",ET_AL:"ET_AL",LINEBUFFERSEGMENTFROM0TO1UNIT2RADIUS:"LineBufferSegmentFrom0To1Unit2Radius",
LINEBUFFERRADIUS0UNIT1RADIUS:"LineBufferRadius0Unit1Radius",RINGVALUE0UNIT1RADIUS:"RingValue0Unit1Radius",RINGSVALUES0UNIT1RADII:"RingsValues0Unit1Radii",RINGBUFFERBANDFROM0TO1UNIT2RADIUS:"RingBufferBandFrom0To1Unit2Radius",DRIVETIMEBANDFROM0TO1UNIT2RADIUS:"DriveTimeBandFrom0To1Unit2Radius",RINGBUFFERBANDSBANDS0UNIT1RADII:"RingBufferBandsBands0Unit1Radii",RINGBUFFERBANDRING0UNIT1RADIUS:"RingBufferBandRing0Unit1Radius",DRIVETIMEBANDBAND0UNIT1RADIUS:"DriveTimeBandBand0Unit1Radius",DRIVETIMESRINGS0UNIT1RADII:"DriveTimesRings0Unit1Radii",
DRIVETIMERING0UNIT1RADIUS:"DriveTimeRing0Unit1Radius",DRIVEDISTANCEVALUE0UNIT1RADIUS:"DriveDistanceValue0Unit1Radius",DRIVEDISTANCESRINGS0UNIT1RADII:"DriveDistancesRings0Unit1Radii",DRIVEDISTANCERING0UNIT1RADIUS:"DriveDistanceRing0Unit1Radius"},_SPECIAL_HEADER_FIELDS_NAME_MAP_BACK:{},_ADDITIONAL_HEADER_FIELDS_MAP_BACK:{},_REPORT_VAR_FIELDS_MAP_BACK:{},_PREVIEW:{Title:p.fieldPreviewTitle,Title_graphic:p.fieldPreviewTitleGraphic,Name:p.fieldPreviewTitle,Name_graphic:p.fieldPreviewTitleGraphic,Subtitle:p.fieldPreviewSubtitle,
Date:p.fieldPreviewDate,Page:p.fieldPreviewPage,Count:p.fieldPreviewLocationsCount,Copyright:"\u00a9 "+(new Date).getFullYear()+" Esri",TrialUrlText:p.fieldPreviewTrialUrlText,PhoneNumber:p.fieldPreviewPhoneNumber,ProductUrl:p.fieldPreviewProductUrl,ProductLabel:p.fieldPreviewProductLabel,Source:p.fieldPreviewSource,DataSources:p.fieldPreviewDataSources,DataVintage:p.fieldPreviewDataVintage,SITE_NAME:p.fieldPreviewSiteName,SITE_NAME_multi:p.fieldPreviewSiteNameMulti,STORE_LAT:p.fieldPreviewLat,STORE_LONG:p.fieldPreviewLong,
AREA_DESC2:p.fieldPreviewAreaDesc2,STORE_ADDR:p.fieldPreviewStoreAddr,AREA_DESC:p.fieldPreviewAreaDesc,CHART_AREA_NAME:p.fieldPreview_chartArea,CHART_SERIES_NAME:p.fieldPreview_seriesName,CHART_POINT_NAME:p.fieldPreview_pointName},_LABELS:{CHART_AREA_NAME:l.chartAreaName,CHART_SERIES_NAME:l.chartSeriesName,CHART_POINT_NAME:l.chartPointName,CHART_POINT_VALUE:l.chartPointValue},DATE_FIELD_NAME:"Date",DATE_FIELD_ALIAS:"Date",DATE_FIELD_DEFAULT_FORMAT:"d-MMMM dd, yyyy",GROUPCOUNT_FIELD_NAME:"PointCount",
GROUPCOUNT_FIELD_ALIAS:"PointCount",LOCATORSUMMARY_FIELD_NAME:"LocatorSummary",LOCATORSUMMARY_FIELD_ALIAS:"LocatorSummary",SITENOTES_FIELD_NAME:"SiteNotes",SITENOTES_FIELD_ALIAS:"SiteNotes",init:function(){for(var k in this._SPECIAL_HEADER_FIELDS_NAME_MAP)this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[this._SPECIAL_HEADER_FIELDS_NAME_MAP[k].toUpperCase()]=k;for(k in this._ADDITIONAL_HEADER_FIELDS_MAP)this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[this._ADDITIONAL_HEADER_FIELDS_MAP[k].toUpperCase()]=k;for(k in this._REPORT_VAR_FIELDS_MAP)this._REPORT_VAR_FIELDS_MAP_BACK[this._REPORT_VAR_FIELDS_MAP[k].toUpperCase()]=
k},templateToUIHeader:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP[k]||this._ADDITIONAL_HEADER_FIELDS_MAP[k]},qualifyTemplateHeaderName:function(k){return k&&0!==k.indexOf("headers.")?"headers."+k:k},trimTemplateHeaderName:function(k){if(!k)return k;0===k.indexOf("headers.")&&(k=k.substr(k.indexOf(".")+1));return k},templateToUIReportVar:function(k){k=k&&k.toUpperCase();return this._REPORT_VAR_FIELDS_MAP[k]},uiToTemplate:function(k){k=k&&
k.toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[k]||this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[k]||this._REPORT_VAR_FIELDS_MAP_BACK[k]},getPreview:function(k,f,c){k=this.trimTemplateHeaderName(k);if(!k)return null;!f||"Title"!==k&&"Name"!==k||(k+="_graphic");c&&"SITE_NAME"===k&&(k+="_multi");return"SiteNotes"===k?p.fieldPreviewSiteNotes:0===k.indexOf("SiteNote")?t.substitute(p.fieldPreviewSiteNote,{index:k.replace("SiteNote","")||1}):this._PREVIEW[k]},hasField:function(k){return!!(this.uiToTemplate(k)||
this.templateToUIHeader(k)||this.templateToUIReportVar(k))},isAdditionalHeadersField:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._ADDITIONAL_HEADER_FIELDS_MAP[k]},isChartAttribute:function(k){return this.isAdditionalHeadersField(k)&&-1!==k.toUpperCase().indexOf("CHART_")},getSiteNoteFieldNameAt:function(k){return"SiteNote"+(!k||1>=Number(k)?"":k)},getFieldLabel:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._LABELS[k]},getReportVarSelfTagsMap:function(){return{Page:"currPage",
Title:"reportName",Name:"reportName",Subtitle:"reportTitle2"}},getReportVarTextTagsMap:function(){var k=this.getReportVarSelfTagsMap(),f={},c;for(c in this._REPORT_VAR_FIELDS_MAP){var a=this._REPORT_VAR_FIELDS_MAP[c];k[a]||(f[a]=a)}return f}};l.init();return l})},"esri/dijit/geoenrichment/ReportPlayer/_devConfig":function(){define([],function(){return{logData:!0,showAreaDataUtilUndefinedData:!1,createPlayerCommand:{saveDataJsonAsTextFile:!1,useTestBuild:!1,configUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/config.js",
baseUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release",mainUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/dojo/dojo.js",esriDijitCssUrl:"https://js.arcgis.com/3.31/dijit/themes/claro/claro.css",esriCssUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/reportPlayer.css"},createPDFCommand:{removeUnicodeChars:!1},preview:{bigValues:!1},charts:{enableEffects:!1},
table:{printGridRefresh:!1},emulateErrors:{playerError:!1,contentErrors:!1,themeParseError:!1,metadataParseError:!1,layoutParseError:0,reportContainerRenderError:!1,createReportError:!1,createReportNaN:!1,createReportNull:!1,getMapItemError:!1,emptyDataProviderResponse:!1,emptyTemplateJson:!1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/MapEventUtil":function(){define(["dojo/on","dojo/sniff","esri/dijit/geoenrichment/utils/DeviceUtil"],function(t,p,l){return{onLayerMouseOver:function(k,
f,c){var a=l.isMobileDevice();k=a?k:p("touch")?f:k;a=a?"mouse-over":p("touch")?"mouse-down, mouse-move":"mouse-move";return t(k,a,c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsController":function(){define("dojo/_base/declare esri/dijit/geoenrichment/Deferred dojo/on esri/dijit/geoenrichment/promise/all dijit/Destroyable ../../MapEventUtil ../../../../comparison/ComparisonUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig".split(" "),function(t,
p,l,k,f,c,a,b){return t(f,{currentFeatureIndex:null,_calculatorName:null,_fieldData:null,_isMultiFeature:null,_hasRegisteredLayers:!1,_hasRegisteredInfographics:!1,constructor:function(d,e,g,h){this._calculatorName=d;this._fieldData=e;this._isMultiFeature=g;this.currentFeatureIndex=h;this._layerIndexes={};this._rendererJsons={};this._labelRendererJsons={};this._mapInfos={};this._graphicLayerInfos={};this._pendingLayerInfos={}},getCalculatorName:function(){return this._calculatorName},_rendererJsons:null,
_labelRendererJsons:null,getRendererJson:function(d){return this._rendererJsons[d]},getLabelRendererJson:function(d){return this._labelRendererJsons[d]},setRendererJson:function(d,e){this._rendererJsons[d]=e},setLabelRendererJson:function(d,e){this._labelRendererJsons[d]=e},_layerIndexes:null,getLayerIndex:function(d,e){var g=b.getGeographiesModel().getLevels(),h=-1;g.some(function(m,r){if(m.id===e)return h=r,!0});return this._layerIndexes[d]+h/g.length},setLayerIndex:function(d,e){this._layerIndexes[d]=
e},_mapInfos:null,getMapInfo:function(d){return this._mapInfos[d]},getMapInfos:function(){var d=[],e;for(e in this._mapInfos)d.push(this._mapInfos[e]);return d},setMapInfo:function(d,e){this._mapInfos[d]=e},_attributeFields:null,getAttributeFields:function(){return this._attributeFields},setAttributeFields:function(d){this._attributeFields=d},_shownFeatureAttributes:null,_featuresChangedHandlers:null,getShownFeatureAttributes:function(){return this._shownFeatureAttributes},setShownFeaturesChangedListener:function(d){var e=
this;this._featuresChangedHandlers=this._featuresChangedHandlers||[];this._featuresChangedHandlers.push(d);return{remove:function(){var g=e._featuresChangedHandlers;if(g){var h=g.indexOf(d);-1!==h&&g.splice(h,1)}}}},setShownFeatureAttributes:function(d){this._shownFeatureAttributes=d||[];this._featuresChangedHandlers&&this._featuresChangedHandlers.forEach(function(e){e()})},_allFeatureAttributes:null,_loadAllFeaturesHandlers:null,getAllFeatureAttributes:function(){return this._allFeatureAttributes||
[]},setAllFeatureAttributes:function(d){this._allFeatureAttributes=d},setLoadAllFeaturesListener:function(d){var e=this;this._loadAllFeaturesHandlers=this._loadAllFeaturesHandlers||[];this._loadAllFeaturesHandlers.push(d);return{remove:function(){var g=e._loadAllFeaturesHandlers;if(g){var h=g.indexOf(d);-1!==h&&g.splice(h,1)}}}},loadAllFeatures:function(){return this._loadAllFeaturesHandlers&&k(this._loadAllFeaturesHandlers.map(function(d){return d()}))},buildGeometryFieldName:function(d){return"__stdGeometry_"+
d},saveGeometryInCalculatorData:function(d,e){a.copyValueToCalculatorData(d,{fieldName:e,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},provideGeometryFromCalculatorData:function(d,e){a.copyValueFromCalculatorData(d,{fieldName:e,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},_highlightInfographicForAttributesFunc:null,
_registerInfographicDfd:null,registerInfographic:function(d){this._highlightInfographicForAttributesFunc=d.highlightInfographicForAttributes;this._registerInfographicDfd=new p;this._hasRegisteredLayers&&this._registerInfographicDfd.resolve();this._hasRegisteredInfographics||(this._hasRegisteredInfographics=!0,this._doRegisterLayers());return this._registerInfographicDfd.promise},_graphicLayerInfos:null,_pendingLayerInfos:null,setStdPolygonsLayer:function(d,e,g,h){this._unSetInfo(d);this._pendingLayerInfos[d]=
{map:g,graphicsLayer:e,getGraphicForAttributesFunc:h.getGraphicForAttributesFunc,setGraphicHighlightedFunc:h.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null};this._hasRegisteredInfographics&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._registerInfographicDfd&&this._registerInfographicDfd.resolve())},_doRegisterLayers:function(){for(var d in this._pendingLayerInfos){var e=this._pendingLayerInfos[d];this._graphicLayerInfos[d]=
e;this._addLayerListeners(e)}this._pendingLayerInfos={}},_addLayerListeners:function(d){var e=this,g=d.graphicsLayer,h;d.layerMouseOverHandle=c.onLayerMouseOver(g,d.map,function(m){m.graphic&&m.graphic._graphicsLayer===g&&h!==m.graphic&&(d.layerMouseOutHandle&&d.layerMouseOutHandle.remove(),d.layerMouseOutHandle=null,h&&d.setGraphicHighlightedFunc(h,!1),h=m.graphic,e._highlightInfographicForAttributesFunc(h.attributes),d.setGraphicHighlightedFunc(h,!0),d.layerMouseOutHandle=l.once(g,"mouse-out",function(r){e._highlightInfographicForAttributesFunc(null);
h&&d.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAttributes:function(d){for(var e in this._graphicLayerInfos){var g=this._graphicLayerInfos[e];g.highlightedGraphic&&(g.setGraphicHighlightedFunc(g.highlightedGraphic,!1),g.highlightedGraphic=null);if(d){var h=g.getGraphicForAttributesFunc(d);h&&(g.setGraphicHighlightedFunc(h,!0),g.highlightedGraphic=h)}}},_unSetInfo:function(d){var e=this._graphicLayerInfos[d];delete this._graphicLayerInfos[d];e&&(e.layerMouseOverHandle&&e.layerMouseOverHandle.remove(),
e.layerMouseOutHandle&&e.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonUtil":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","../../dataProvider/supportClasses/data/AreaDataUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l){l=l.geoenrichment.dijit.ReportPlayer.ReportPlayer;
var k={valueFormatFunction:function(f,c){return c&&c.isMissing?l.missingVariable:void 0===f||"string"===typeof f?f:t.formatNumber(f,{places:c.decimals,preserveTrailingZeroes:!0})},copyValueToCalculatorData:function(f,c){var a=k._findAttrsInCalcData(c,f);a&&(a[c.fieldName]=f[c.fieldName])},copyValueFromCalculatorData:function(f,c){var a=k._findAttrsInCalcData(c,f);a&&(f[c.fieldName]=a[c.fieldName])},_findAttrsInCalcData:function(f,c){f=f.isMultiFeature?(f=p.combineAreaDataObjectCalculators(f.fieldData.areaData,
f.calculatorName))&&f.comparisonLevels||[]:(f=p.getAreaDataObjectCalculator(f.fieldData.areaData[f.currentFeatureIndex],f.calculatorName))&&f.comparisonLevels||[];var a;f.some(function(b){if(b.StdGeographyLevel&&b.StdGeographyLevel===c.StdGeographyLevel&&b.StdGeographyID===c.StdGeographyID)return a=b,!0});return a}};return k})},"esri/dijit/geoenrichment/ReportPlayer/countryConfig":function(){define(["./dataProvider/supportClasses/stdGeographies/StdGeographiesModel"],function(t){function p(){if(!k||
!k.hierarchies)return"census";var d=k.hierarchies[0].ID;if(1==k.hierarchies.length)return d;if(k.defaultDatasetID)for(var e in k.hierarchies){var g=k.hierarchies[e];if(g.datasets&&g.datasets.some(function(h){return h==k.defaultDatasetID})){d=g.ID;break}}return d}var l={},k;l.getCurrentCountry=function(){return k};l.getCountryID=function(){return k&&k.id};l.getCurrencySymbol=function(){return k&&k.currencySymbol||"$"};l.getCurrencyFormat=function(){if(k&&k.currencyFormat)return k.currencyFormat;var d=
l.getCurrencySymbol();return d+"0;-"+d+"0"};l.setCountry=function(d){k=d};var f,c;l.getSingleUnits=function(){return f};l.getPluralUnits=function(){return c};l.setSingleAndPluralUnits=function(d,e){f=d;c=e};var a;l.getHierarchyID=function(){return a};l.setHierarchyID=function(d){a=d||p()};var b;l.getGeographiesModel=function(){return b};l.setGeographiesModel=function(d){b=d};l.reset=function(){b=c=f=a=k=null};l.toJson=function(){return{country:{id:l.getCountryID(),currencySymbol:l.getCurrencySymbol(),
currencyFormat:l.getCurrencyFormat()},hierarchy:a,geographiesModel:b&&b.toJson()}};l.fromJson=function(d){d&&(k=d.country,a=d.hierarchy,b=d.geographiesModel&&new t(d.geographiesModel))};return l})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesModel":function(){define(["dojo/_base/declare"],function(t){return t(null,{_levelsCache:null,_levels:null,constructor:function(p){this._initWithLevels(p.levels)},_initWithLevels:function(p){this._levels=p;this._levelsCache=
{};this._levels.forEach(function(l){delete l.description;this._levelsCache[l.id]=l;l.adminLevel&&(this._levelsCache[l.adminLevel]=l)},this)},getLevels:function(p){return p?this._levels.filter(function(l){return!l.isWholeCountry}):this._levels.slice()},getLevel:function(p){return this._levelsCache[p]},getLevelPluralName:function(p){return(p=this.getLevel(p))?p.name||p.pluralName:null},toJson:function(){return{levels:this._levels}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","dojo/on","dijit/Destroyable","../../MapEventUtil"],function(t,p,l,k,f){return t(k,{_hasRegisteredLayers:!1,_hasRegisteredTables:!1,constructor:function(c){this._graphicLayerInfos={};this._registerTableDfds=[];this._highlightTableForAreaIndexFuncs=[];this._pendingLayerInfos={}},_highlightTableForAreaIndexFuncs:null,_registerTableDfds:null,registerTable:function(c){this._highlightTableForAreaIndexFuncs.push(c.highlightTableForAreaIndex);c=new p;this._registerTableDfds.push(c);
this._hasRegisteredLayers&&this._doRegisterTables();this._hasRegisteredTables||(this._hasRegisteredTables=!0,this._doRegisterLayers());return c.promise},_doRegisterTables:function(){this._registerTableDfds.forEach(function(c){c.resolve()});this._registerTableDfds.length=0},_graphicLayerInfos:null,_pendingLayerInfos:null,setThisAreaLayer:function(c,a,b,d){this._unSetInfo(c);this._pendingLayerInfos[c]={graphicsLayer:a,areaIndex:d.thisAreaIndex,getGraphicForAreaIndexFunc:d.getGraphicForAreaIndexFunc,
setGraphicHighlightedFunc:d.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,map:b};this._hasRegisteredTables&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._doRegisterTables())},_doRegisterLayers:function(){for(var c in this._pendingLayerInfos){var a=this._pendingLayerInfos[c];this._graphicLayerInfos[c]=a;this._addLayerListeners(a)}this._pendingLayerInfos={}},_addLayerListeners:function(c){var a=this,b=c.graphicsLayer,
d;c.layerMouseOverHandle=f.onLayerMouseOver(b,c.map,function(e){e.graphic&&e.graphic._graphicsLayer===b&&d!==e.graphic&&(c.layerMouseOutHandle&&c.layerMouseOutHandle.remove(),c.layerMouseOutHandle=null,d&&c.setGraphicHighlightedFunc(d,!1),d=e.graphic,a._highlightTableForAreaIndexFuncs.forEach(function(g){g(c.areaIndex)}),c.setGraphicHighlightedFunc(d,!0),c.layerMouseOutHandle=l.once(b,"mouse-out",function(g){a._highlightTableForAreaIndexFuncs.forEach(function(h){h(null)});d&&c.setGraphicHighlightedFunc(d,
!1);d=null}))})},highlightGraphicForAreaIndex:function(c){for(var a in this._graphicLayerInfos){var b=this._graphicLayerInfos[a];b.highlightedGraphic&&(b.setGraphicHighlightedFunc(b.highlightedGraphic,!1),b.highlightedGraphic=null);var d=b.getGraphicForAreaIndexFunc(c);d&&(b.setGraphicHighlightedFunc(d,!0),b.highlightedGraphic=d)}},_unSetInfo:function(c){var a=this._graphicLayerInfos[c];delete this._graphicLayerInfos[c];a&&(a.layerMouseOverHandle&&a.layerMouseOverHandle.remove(),a.layerMouseOutHandle&&
a.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/EditorUnits":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","dojo/i18n!esri/nls/jsapi"],function(t,p){p=p.geoenrichment.dijit.ReportPlayer.units;var l={},k=["px","pt","mm","cm","in"],f={px:0,pt:1,mm:1,cm:2,"in":2};l.getSupportedUnits=
function(){return k};l.getShortName=function(c){return p.shortNames[c]};l.getLongName=function(c){return p.longNames[c]};l.getLongNameWithUnits=function(c){return p.longNamesWithUnits[c]};l.getPlaces=function(c){return f[c]||0};l.round=function(c,a){return t.roundNumber(c,l.getPlaces(a))};l.provideUnits=function(c,a){return c.replace("${units}",l.getShortName(a))};return l})},"esri/dijit/geoenrichment/ReportPlayer/DataProviderGE":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/kernel ./dataProvider/_CommandSupport ./dataProvider/_SerializationSupport ./dataProvider/_ServerSerializationSupport ./dataProvider/supportClasses/areas/AnalysisAreaUtil ./dataProvider/supportClasses/areas/AnalysisAreaJsonUtil ./dataProvider/supportClasses/areas/AreasPreprocessor ./dataProvider/supportClasses/CustomReportsManager ./dataProvider/supportClasses/TemplateJsonLoader ./dataProvider/supportClasses/ReportDataProcessor ./dataProvider/supportClasses/GEUtil ./dataProvider/supportClasses/attachments/DefaultAttachmentsStore ./dataProvider/supportClasses/attachments/CustomAttachmentsStore ./dataProvider/supportClasses/data/VariablesUtil ./dataProvider/commands/mapToImage/MapToURLUtil ./core/themes/ThemeLibrary ./core/themes/ReportThemes esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/ProjectionUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y,C,D,G,F,B,z,E){return t([c,a,b],{analysisAreasLimit:-1,cacheTemplates:!0,printMapTaskUrl:null,resetReportItemsCache:!0,constructor:function(I){p.mixin(this,I)},_getAttachmentsStore:function(I){return(new q(I)).initialize()},_currentContext:null,getReportData:function(I,L){var M=this,O=L&&L.progressCallback||function(){},Q=p.mixin({},I);Q.portalUrl=E.getPortalUrl(Q.portalUrl);G.isPlayerOnServer||E.setArcgisUrl(Q.portalUrl);d.parseSites(Q);F.reset();Q.hierarchy||
Q.analysisAreas.some(function(T){if(T.geographies&&T.geographies[0].hierarchy)return Q.hierarchy=T.geographies[0].hierarchy,!0});M.resetReportItemsCache&&h.resetCache();M._currentContext=Q;Q.analysisAreas=e.areasFromJson(Q.analysisAreas);Q.combinedAreasInfo=Q.combinedAreasInfo&&e.combinedAreasInfoFromJson(Q.combinedAreasInfo)||{};d.populateCombinedAreasInfo(Q.combinedAreasInfo,Q.analysisAreas);Q.fieldData={specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],
reportInfo:null};return l([k(h.tryFindReportIdByAlias(Q),function(T){Q.reportID=T||Q.reportID}),this._discoverPortal(Q),function(){return Q.variables&&k(w.preprocessVariables(Q.variables,Q.portalUrl),function(T){Q.variables=T})}()]).then(function(){return k(g.preprocessAreas(Q,{analysisAreasLimit:M.analysisAreasLimit}),function(){O(.25);setTimeout(function(){M._onCreateReportStarted()});var T=Q.attachmentsProvider?u(Q.attachmentsProvider):M._getAttachmentsStore(Q.analysisAreas),X={initGE:n.initialize(),
countryInfo:n.getCountryInfo(Q.countryID),attachmentsStore:T};Q.reportID?(X.reportObject=h.getCustomReportByID(Q),X.templateJsonInfo=m.getTemplateJsonByID(Q,M.cacheTemplates),X.runReportResult=r.runReportAndGetData(Q,T)):Q.variables&&(X.reportObject=h.getFakeCustomReportByContext(Q),X.templateJsonInfo=m.createTemplateJsonFromVariables(Q),X.runReportResult=r.runReportFromVariables(Q));return l(X).then(function(U){var aa=U.reportObject,Y=U.attachmentsStore,ea=U.templateJsonInfo.templateJson,K=U.templateJsonInfo.templateVariableProvider,
V=U.runReportResult;O(.75);if(!ea||!aa||!Q.fieldData)return null;F.setCountry(U.countryInfo.country);F.setHierarchyID(Q.hierarchy);F.setGeographiesModel(U.countryInfo.geographiesModels[F.getHierarchyID()]);ea.theme||(ea.theme=C.getReportThemeById(aa.isGraphicReport?D.GRAPHIC:D.CLASSIC));var N={isMultiFeature:aa.isMultiFeature&&1<Q.analysisAreas.length,reportTitle:Q.reportTitle||aa.title,templateJson:ea,reportObject:aa,fieldData:Q.fieldData,analysisAreas:Q.analysisAreas,combinedAreasInfo:Q.combinedAreasInfo,
reverseAnalysisAreasOnMap:Q.reverseAnalysisAreasOnMap,attachmentsStore:Y,geClient:n.getClient(),templateVariableProvider:K,customLogo:Q.customLogo,config:{portalUrl:Q.portalUrl,geoenrichmentUrl:Q.geoenrichmentUrl,geometryServiceUrl:Q.geometryServiceUrl,printMapTaskUrl:Q.printMapTaskUrl,countryID:Q.countryID,hierarchy:Q.hierarchy,reportID:Q.reportID,variables:Q.variables}};return k(r.applyRunReportAndGetDataResults(V,N),function(){O(1);return N})})})})},_discoverPortal:function(I){return z.getPortalSelf(I.portalUrl).then(function(L){I.geoenrichmentUrl=
I.geoenrichmentUrl||L.helperServices.geoenrichment.url;var M=f.id.findCredential(I.portalUrl);n.setGeoenrichmentUrl(I.geoenrichmentUrl,M&&M.token);I.geometryServiceUrl=I.geometryServiceUrl||L.helperServices.geometry.url;B.setGeometryServiceUrl(I.geometryServiceUrl);I.printMapTaskUrl=I.printMapTaskUrl||L.helperServices.printTask.url;y.setPrintMapTaskUrl(I.printMapTaskUrl)})},reportDataToSingleAreaReportData:function(I,L){var M=L.currentFeatureIndex||0,O=p.mixin({},I.fieldData);O.areaData=[O.areaData[M]];
var Q=[p.mixin({},I.analysisAreas[M])];g.removeGroupInfo(Q);var T=I.attachmentsStore;return{isMultiFeature:!1,reportTitle:L.reportTitle,templateJson:L.templateJson,reportObject:I.reportObject,fieldData:O,analysisAreas:Q,combinedAreasInfo:null,reverseAnalysisAreasOnMap:!1,attachmentsStore:T&&{getImages:function(){T.supportsMultipleAreas&&T.setCurrentAnalysisAreaIndex(M);return T.getImages()},getAttributes:function(){T.supportsMultipleAreas&&T.setCurrentAnalysisAreaIndex(M);return T.getAttributes()},
getNotes:function(){T.supportsMultipleAreas&&T.setCurrentAnalysisAreaIndex(M);return T.getNotes()}},geClient:I.geClient,templateVariableProvider:I.templateVariableProvider,config:I.config}},_getCurrentContext:function(){return this._currentContext},_onCreateReportStarted:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_CommandSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ../PlayerCommands ./supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(t,p,l,k,f,c,a,b){var d={};return p(null,{_commands:null,_commandIndex:0,_initCommandsPromise:null,constructor:function(){this._commands={}},_initCommands:function(){var e=this;if(this._initCommandsPromise)return f(this._initCommandsPromise);var g=new k;if(b.modules.exportCommands)t(["./commands/CreateHTMLCommand","./commands/CreatePDFCommand","./commands/CreateImageCommand","./commands/PrintReportCommand","./commands/CreatePlayerCommand"],function(h,m,r,n,q){d[c.HTML]=h;d[c.PDF]=m;d[c.IMAGE]=
r;d[c.PRINT]=n;d[c.DYNAMIC_HTML]=q;a.getInitPromise().then(g.resolve)});else return g.resolve();g.promise.then(function(){e._initCommandsPromise=!0});return this._initCommandsPromise=g.promise},registerCommand:function(e,g,h){function m(n){if(!n.isBrowserSupported||n.isBrowserSupported())r._commands[e]||(r._commands[e]={index:r._commandIndex++,id:e,label:g||n.label,command:n})}var r=this;if(h)m(h);else return this._initCommands().then(function(){var n=d[e];n&&m(new n)})},getCommands:function(){return this._initCommands().then(function(){var e=
[],g=this._commands[c.PDF],h;for(h in this._commands)e.push(this._commands[h]);e.sort(function(m,r){return m.index-r.index});return(h=this._getCurrentContext())&&h.geoenrichmentUrl&&g?f(a.hasCapability("FormatInfographics"),function(m){m||(e=e.filter(function(r){return r!==g}));return e}):f(e)}.bind(this))},getCommandById:function(e){return this._commands[e]&&this._commands[e].command},executeCommand:function(e,g,h,m){return this._initCommands().then(function(){h=l.mixin({printMapTaskUrl:this.printMapTaskUrl},
h);return this._commands[e]&&this._commands[e].command&&this._commands[e].command.execute(g,h||{},m)}.bind(this))},executeCommandOnData:function(e,g,h,m){return this._initCommands().then(function(){h=l.mixin({printMapTaskUrl:this.printMapTaskUrl},h);return this._commands[e]&&this._commands[e].command&&this._commands[e].command.executeOnData(this,g,h||{},m)}.bind(this))}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojox/uuid/generateRandomUuid esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/UrlUtil ./stdGeographies/StdGeographiesModel".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r){function n(B){return D?D:(B=B&&a.id.findCredential(B)||a.id.credentials[0])&&B.token}function q(B,z){var E=d.urlToObject(B);z=p.mixin({f:"json",token:n(B),langCode:dojo.locale},E.query||{},z);for(var I in z)B=z[I],B instanceof g||B&&"object"===typeof B&&(z[I]=JSON.stringify("function"===typeof B.toJson?B.toJson():B));return{url:E.path,taskParams:z}}function u(B){F||(F=new w(C));return!B||F.initialized?F:F.initialize()}var w=t(null,{url:null,_geInfo:null,_capabilities:null,
_supportedOperations:null,constructor:function(B){this._capabilities={};this._supportedOperations={};this.url=B},_initDfd:null,initialized:!1,initialize:function(){var B=this;if(this._initDfd)return this._initDfd.promise;this._initDfd=new l;h.requestPublicFirst(q(this.url).url+"/Geoenrichment",{content:{f:"json"},handleAs:"json"},{retryOnAnyError:!0}).then(function(z){B.initWithJson(z)});return this._initDfd.promise},initWithJson:function(B){this._geInfo=B;this._capabilities={};this._supportedOperations=
{};B.capabilities&&B.capabilities.forEach(function(z){this._capabilities[z.toLowerCase()]=!0},this);B.supportedOperations&&B.supportedOperations.forEach(function(z){this._supportedOperations[z.toLowerCase()]=!0},this);this._initDfd=this._initDfd||new l;this._initDfd.resolve();this.initialized=!0},hasCapability:function(B){return!!this._capabilities[B.toLowerCase()]},addCapability:function(B){this._capabilities[B.toLowerCase()]=!0},supportsOperation:function(B){return!!this._supportedOperations[B.toLowerCase()]},
enrich:function(B){B=q(this.url,B);B.taskParams.AddDerivativeVariables="all";return b({url:B.url+"/Geoenrichment/Enrich",content:B.taskParams,handleAs:"json"}).then(function(z){return z.results[0].value.FeatureSet||[]})},stdGeographyQuery:function(B){B=q(this.url,B);return b({url:B.url+"/StandardGeographyQuery/execute",content:B.taskParams,handleAs:"json"}).then(function(z){return z.results[0].value.features||[]})},getDataCollections:function(B,z,E){E=q(this.url,E);return b({url:E.url+"/Geoenrichment/DataCollections/"+
B+(z?"/"+z:""),content:E.taskParams,handleAs:"json"}).then(function(I){return I.DataCollections})},getCountries:function(){var B=q(this.url);return b({url:B.url+"/Geoenrichment/Countries",content:B.taskParams,handleAs:"json"}).then(function(z){return z.countries})},getCountryInfo:function(B){var z=this,E=e.get("GEUtil.countries");if(!E[B]){var I=q(this.url);E[B]=b({url:I.url+"/Geoenrichment/Countries/"+B,content:I.taskParams,handleAs:"json"}).then(function(L){var M=L.countries[0],O={};return f(M.hierarchies.map(function(Q){return k(z._getStdGeographyModel(B,
Q.ID),function(T){O[Q.ID]=T})})).then(function(){return{country:M,geographiesModels:O}})})}return E[B]},_getStdGeographyModel:function(B,z){var E=e.get("GEUtil.stdModels"),I=B+z;if(!E[I]){var L=q(this.url);E[I]=b({url:L.url+"/Geoenrichment/StandardGeographyLevels/"+B+"/"+z,content:L.taskParams,handleAs:"json"}).then(function(M){return new r({countryID:B,hierarchyID:z,levels:M.geographyLevels[0].hierarchies[0].levels})})}return E[I]},formatReport:function(B){B=q(this.url,B);return h.request({url:B.url,
urlSuffix:"Geoenrichment/FormatReport"},{handleAs:"bin",content:B.taskParams}).then(function(z){return z&&z.data&&"text/plain"===z.data.type?null:z})},getReports:function(B){var z=q(this.url);return b({url:z.url+"/Geoenrichment/reports/"+B,content:z.taskParams,handleAs:"json"}).then(function(E){return E.reports})},createReport:function(B){var z=q(this.url,B),E=c();!1===B.forStorage&&(e.get("GEUtil.tasks")[E]={taskName:"createReport",taskParams:p.clone(B)});return h.request({url:z.url,urlSuffix:"Geoenrichment/createReport"},
{handleAs:"xml"===B.format?"text":"bin",content:z.taskParams}).then(function(I){return{taskID:E,result:I}})},consumeCredits:function(B){var z=e.get("GEUtil.tasks")[B];if(z)return delete z.taskParams.forStorage,delete e.get("GEUtil.tasks")[B],this[z.taskName](z.taskParams)},getLayerInfos:function(B){var z=e.get("GEUtil.dataLayers");z[B]||(z[B]=this._getLayerInfos(B));return z[B]},_getLayerInfos:function(B){var z=q(this.url);return b({url:z.url+"/Geoenrichment/DataLayers/"+B,content:z.taskParams,handleAs:"json"}).then(function(E){return E&&
E.layers||[]}).otherwise(function(E){console.log(E);return[]})},getLayerInfo:function(B,z){var E=e.get("GEUtil.dataLayers"),I=B+"_"+z;E[I]||(E[I]=this._getLayerInfo(B,z));return E[I]},_getLayerInfo:function(B,z){var E=q(this.url);return b({url:E.url+"/Geoenrichment/DataLayers/"+B+"/"+z,content:E.taskParams,handleAs:"json"}).then(function(I){return I&&I.layer}).otherwise(function(I){console.log(I);return null})}}),y={},C,D,G=new l;y.setGeoenrichmentUrl=function(B,z){(C=B||C)&&m.registerCORS(C);D=z||
D;!G.promise.isFulfilled()&&G.resolve()};y.canMakeRequests=function(){return!!C};y.getInitPromise=function(){return G.promise};y.GEClient=w;var F;y.getClient=function(){return u()};y.initialize=function(){return k(u(!0))};y.initWithJson=function(B,z){y.setGeoenrichmentUrl(B);u().initWithJson(z)};y.enrich=function(B){return u().enrich(B)};y.stdGeographyQuery=function(B){return u().stdGeographyQuery(B)};y.getDataCollections=function(B,z,E){return u().getDataCollections(B,z,E)};y.formatReport=function(B){return u().formatReport(B)};
y.createReport=function(B){return u().createReport(B)};y.consumeCredits=function(B){return u().consumeCredits(B)};y.getLayerInfos=function(B){return u().getLayerInfos(B)};y.hasCapability=function(B){return k(u(!0),function(){return F&&F.hasCapability(B)})};y.addCapability=function(B){return u().addCapability(B)};y.supportsOperation=function(B){return k(u(!0),function(){return F&&F.supportsOperation(B)})};y.getCountryInfo=function(B){return u().getCountryInfo(B)};return y})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],
function(){dojox.uuid.generateRandomUuid=function(){function t(){for(var c=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>c.length;)c="0"+c;return c}var p=t(),l=t();l=l.substring(0,4)+"-4"+l.substring(5,8);var k=t();k="8"+k.substring(1,4)+"-"+k.substring(4,8);var f=t();return(p+"-"+l+"-"+k+f).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(t){t.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";
dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(p,l){if(!p)throw l||(l="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(l);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=function(p){p=p.toString();var l=t.isString(p)&&36==p.length&&p==p.toLowerCase();if(l){p=
p.split("-");l=5==p.length&&8==p[0].length&&4==p[1].length&&4==p[2].length&&4==p[3].length&&12==p[4].length;for(var k in p){var f=parseInt(p[k],16);l=l&&isFinite(f)}}return l};dojox.uuid.getVariant=function(p){if(!dojox.uuid._ourVariantLookupTable){var l=dojox.uuid.variant,k=[];k[0]=l.NCS;k[1]=l.NCS;k[2]=l.NCS;k[3]=l.NCS;k[4]=l.NCS;k[5]=l.NCS;k[6]=l.NCS;k[7]=l.NCS;k[8]=l.DCE;k[9]=l.DCE;k[10]=l.DCE;k[11]=l.DCE;k[12]=l.MICROSOFT;k[13]=l.MICROSOFT;k[14]=l.UNKNOWN;k[15]=l.UNKNOWN;dojox.uuid._ourVariantLookupTable=
k}p=p.toString();p=p.charAt(19);p=parseInt(p,16);dojox.uuid.assert(0<=p&&16>=p);return dojox.uuid._ourVariantLookupTable[p]};dojox.uuid.getVersion=function(p){dojox.uuid.assert(dojox.uuid.getVariant(p)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");p=p.toString();p=p.charAt(14);return parseInt(p,16)};dojox.uuid.getNode=function(p){dojox.uuid.assert(dojox.uuid.getVersion(p)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");
p=p.toString();return p.split("-")[4]};dojox.uuid.getTimestamp=function(p,l){dojox.uuid.assert(dojox.uuid.getVersion(p)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");p=p.toString();l||(l=null);switch(l){case "string":case String:return dojox.uuid.getTimestamp(p,Date).toUTCString();case "hex":var k=p.split("-");p=k[0];l=k[1];k=k[2];k=k.slice(1);p=k+l+p;dojox.uuid.assert(15==p.length);return p;case null:case "date":case Date:return k=p.split("-"),p=parseInt(k[0],
16),l=parseInt(k[1],16),k=(parseInt(k[2],16)&4095)<<16,k=4294967296*(k+l),k+=p,new Date(k/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+l)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/CacheUtil":function(){define([],function(){var t={},p={};t.get=function(l,k){var f=p[l];f||k||(f=p[l]={});return f};t.set=function(l,k){return p[l]=k};t.clear=function(l,k){p={}};return t})},"esri/dijit/geoenrichment/utils/requests/FileContent":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/utils/DataUtil"],function(t,p){function l(f){return f?/^image\//.test(f)?"base64":/^text\//.test(f)?"text":/application\/json/.test(f)?"json":"bin":"bin"}var k=t(null,{data:null,filename:null,contentType:"application/octet-stream",contentTransferEncoding:"binary",constructor:function(f,c,a){this.data=f;c&&(this.contentType=c);a&&(this.contentTransferEncoding=a)},getBase64Data:function(){return this.data?"base64"==this.contentTransferEncoding?this.data:p.base64FromByteSource(this.data):
null},toString:function(){return this.filename||"\x3cunknown\x3e"}});k.fromArrayBuffer=function(f,c){return new k(p.binaryStringFromByteSource(f),c)};k.fromBlob=function(f,c){return p.arrayBufferFromBlob(f).then(function(a){return new k(p.binaryStringFromByteSource(a),c||f.type)})};k.fromFileData=function(f,c,a){a=a||p.getContentType(f);if("object"==typeof c&&window.ArrayBuffer&&(c instanceof ArrayBuffer||c.buffer instanceof ArrayBuffer))c=p.binaryStringFromByteSource(c.buffer||c);else{var b=l(a);
"json"==b&&"object"==typeof c&&(c=JSON.stringify(c));if("string"!=typeof c)throw Error("Wrong file data.");switch(b){case "base64":c=atob(c);break;case "text":case "json":c=unescape(encodeURIComponent(c))}}c=new k(c,a);c.filename=f;return c};k.getContentConversionType=l;return k})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p){function l(a){return"string"==typeof a?{source:a,getLength:function(){return this.source.length},
getByte:function(b){return this.source.charCodeAt(b)&255}}:window.ArrayBuffer&&a instanceof ArrayBuffer?{source:new Uint8Array(a),getLength:function(){return this.source.byteLength},getByte:function(b){return this.source[b]}}:a}function k(a){for(var b=a.length,d=new Uint8Array(a.length),e=0;e<b;e++)d[e]=a.charCodeAt(e);return d}function f(a,b){a=new Uint8Array(a);b=Math.min(b,a.byteLength);for(var d="",e=0;e<b;e++)d+=String.fromCharCode(a[e]);return d}var c={arrayBufferFromBlob:function(a){var b=
new t,d=new FileReader;d.onloadend=function(){d.error?b.reject(d.error):b.resolve(d.result)};d.readAsArrayBuffer(a);return b.promise},arrayBuffersToBlob:function(a,b){return new Blob(a,{type:b||"application/octet-stream"})},binaryStringFromByteSource:function(a){if("string"==typeof a)return a;a=l(a);var b=a.getLength(),d=b%4;b-=d;for(var e="",g=0,h,m,r,n;g<b;)h=a.getByte(g++),m=a.getByte(g++),r=a.getByte(g++),n=a.getByte(g++),e+=String.fromCharCode(h,m,r,n);1==d?e+=String.fromCharCode(a.getByte(g)):
2==d?e+=String.fromCharCode(a.getByte(g),a.getByte(g+1)):3==d&&(e+=String.fromCharCode(a.getByte(g),a.getByte(g+1),a.getByte(g+2)));return e},base64FromByteSource:function(a){a=l(a);var b=a.getLength(),d=b%3;b-=d;for(var e,g,h,m,r="",n=0;n<b;n+=3)m=a.getByte(n)<<16|a.getByte(n+1)<<8|a.getByte(n+2),e=m>>18&63,g=m>>12&63,h=m>>6&63,m&=63,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m];1==d?(m=a.getByte(n),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m<<4&63]+"\x3d\x3d"):2==d&&(m=a.getByte(n)<<8|a.getByte(n+1),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m<<
2&63]+"\x3d");return r},base64FromJson:function(a){return btoa(unescape(encodeURIComponent("string"===typeof a?a:JSON.stringify(a))))}};c.binaryStringToByteArray=k;c.base64ToByteArray=function(a){return k(atob(a))};c.getFirstBytes=function(a,b){if("string"==typeof a)var d=a.substr(0,b);else if(window.ArrayBuffer&&a instanceof ArrayBuffer)d=f(a,b);else if(window.Blob&&a instanceof Blob){d=new t;var e=new FileReader;e.onloadend=function(){e.error?d.resolve(""):d.resolve(f(e.result,b))};e.readAsArrayBuffer(a.slice(0,
b))}return p(d||"")};c.isBase64=function(a){return a&&0==a.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(a.replace(/={0,2}$/,""))};c.base64ToJson=function(a){return JSON.parse(decodeURIComponent(escape(atob(a))))};c.getContentType=function(a){a=c.getFileExtension(a);if(null===a)return null;switch(a){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "svg":return"image/svg+xml";case "json":return"application/json";
case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};c.getFileExtension=function(a){var b=a.lastIndexOf(".")+1;return b?a.substr(b).toLowerCase():null};return c})},"esri/dijit/geoenrichment/utils/requests/UniversalClient":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/request/xhr dojo/io-query dojo/sniff esri/dijit/geoenrichment/when esri/kernel esri/config esri/lang esri/urlUtils ../UrlUtil ./BinaryData ./FileContent ./MultipartDataBuilder ./ErrorUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n){function q(D,G){if(G)this.reject(G);else{G=D.xhr;var F=G.getResponseHeader&&G.getResponseHeader("Content-Type");D.status=G.status;D.data=new h(G.response||G.responseBody||G.responseText,F);this.resolve(D)}}var u=0,w=f("safari"),y=function(D){"string"===typeof D?this.url=D:"object"===typeof D&&t.mixin(this,D)};y.prototype={url:null,preventCache:null,usePost:!1,timeout:0,multipartThreshold:0,useCommonAuth:!1,useProxy:!1,allowSSL:null,send:function(D,G){return this.sendUrlRequest(this.prepareUrlRequest(D,
G),"UniversalClient.send")},prepareUrlRequest:function(D,G){"string"===typeof D?D={urlSuffix:D}:D||(D={});G||(G={});var F=D.url||this.url;D=D.urlSuffix;F||(F=D,D=null);if(!F)throw Error("URL is missing.");var B=e.urlToObject(F);F=g.combine(B.path,D);D=B.query||{};"object"===typeof G.content&&(D=t.mixin(D,G.content));B=G.requireSSL;!0!==B&&!1===this.allowSSL&&(B=!1);!1!==B&&!0===this.allowSSL&&/^https/i.test(window.location.protocol)&&(B=!0);var z=this.getCredential(F,!0);z&&(D.token||!1===D.token||
(D.token=z.token),z.ssl&&!1!==B&&(B=!0));!0===B&&(F=g.toHttpsUrl(F));!1===D.token&&delete D.token;var E=G.handleAs||"json";"json"===E&&(D.f="json");z=(G.sendAs||(G.usePost||this.usePost||D.token?"post":"get")).toLowerCase();B="multipart"==z?!0:G.sendAs||G.sizeLimit?!1:null;var I=0,L=G.multipartThreshold||this.multipartThreshold;for(X in D){var M=D[X];if(M instanceof m)B=!0;else{var O=0,Q=X.length;"object"===typeof M?G.allowMultipleValues&&Array.isArray(M)?D[X]=M.map(function(U){U="object"===typeof U?
JSON.stringify(U):U;O+=Q+U+2;return U}):(D[X]=JSON.stringify(M),O+=Q+D[X].length+2):O=Q+(M?M.length:0)+2;!B&&0<L&&(I+=O)}}!1!==B&&0<L&&I>L&&(B=!0);if(G.useProxy||!e.hasSameOrigin(F,window.location.href)&&this.useProxy&&!G.hasOwnProperty("useProxy")){var T=g.getProxyUrl();T&&(F=T+"?"+F)}else e.getProxyRule(F)&&(F=e.getProxyRule(F).proxyUrl+"?"+F);var X=(X=G.hasOwnProperty("preventCache")?G.preventCache:this.preventCache)||null===X&&T||w?"_ts\x3d"+(new Date).getTime()+u++:"";T={handleAs:E};if(E=Number(d.isDefined(G.timeout)?
G.timeout:this.timeout))T.timeout=E;E="get"!==z||B;z=B?null:k.objectToQuery(D);E||(E=z.length+F.length+X.length+1>=b.defaults.io.postLength);T.method=E?"POST":"GET";T.headers={"X-Requested-With":null};T.headers["Content-Type"]="undefined"!==typeof G.contentType?G.contentType:"application/x-www-form-urlencoded; charset\x3dutf-8";B?(B=new r,B.addVariables(D),B.build(T)):E?T.data=z:z&&(F+="?"+z,X&&(F+="\x26"+X),X=null);!z&&X&&(F+="?"+X);return{url:F,options:T,sizeLimit:G.sizeLimit}},getCredential:function(D,
G){if(a.id){var F=a.id.findCredential(D);!F&&this.useCommonAuth&&(F="string"==typeof this.useCommonAuth?a.id.findCredential(this.useCommonAuth):a.id.credentials[0]);if(F){var B={token:F.token};G?B.ssl=F.ssl:B.url=F.ssl?g.toHttpsUrl(D):D;return B}}},sendUrlRequest:function(D,G){var F="string"===typeof D.options.data?D.options.data.length:null;if(D.sizeLimit&&F&&("function"===typeof D.sizeLimit?D.sizeLimit(F):F>D.sizeLimit))return(new p).reject(Error("SIZE_LIMIT_EXCEEDED"));G=G||"UniversalClient.sendUrlRequest";
var B=D.deferred||new p;if(F="bin"===D.options.handleAs)D.options.handleAs="blob";var z=l(D.url,D.options,!0);F&&(z.handleResponse=q);var E=this;z.then(function(I){I="json"===D.options.handleAs&&I&&n.parseError(I)||I;if(I instanceof Error){var L;!0===E.useCommonAuth&&498===I.code&&(L=y.handleInvalidTokenError(I));c(L)["finally"](function(){B.reject(I)})}else B.resolve(E._makeResponse(G,I))},function(I){B.reject(n.makeError(I))});return B.promise},requestToUrl:function(D){if(D.options.headers&&D.options.headers["Content-Type"]&&
0==D.options.headers["Content-Type"].indexOf("multipart/form-data"))return null;var G=D.url;if(D=D.options.data){if(G.length+D.length>=b.defaults.io.postLength)return null;G+="?"+D}return G},_makeResponse:function(D,G){return G}};y.makeError=n.makeError;y.handleInvalidTokenError=function(D){};var C=new y({useCommonAuth:!0,allowSSL:!0});y.request=function(D,G){return C.send(D,G).otherwise(function(F){var B=G&&G.content&&G.content.token;if(498!==F.code||null!=B)return(new p).reject(F);G=t.mixin({},
G);G.content=t.mixin({},G.content);G.content.token=!1;return C.send(D,G)})};y.requestPublicFirst=function(D,G,F){var B=t.mixin({},G);B.content=t.mixin({},G.content);B.content.token=!1;return C.send(D,B).otherwise(function(z){return F&&F.retryOnAnyError||499===z.code||403===z.code?C.send(D,G):(new p).reject(z)})};return y})},"esri/dijit/geoenrichment/utils/requests/BinaryData":function(){define(["dojo/_base/declare"],function(t){return t(null,{data:null,type:null,constructor:function(p,l){this.type=
l||p&&p.type||null;this.data=p}})})},"esri/dijit/geoenrichment/utils/requests/MultipartDataBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/request/util","esri/lang","./FileContent"],function(t,p,l,k,f){function c(d,e){for(var g in e){var h=d[g],m=e[g];h!==m&&(h&&"object"===typeof h&&m&&"object"===typeof m?m instanceof Date?d[g]=new Date(m):c(h,m):d[g]=m)}return d}var a=t(null,{data:null,constructor:function(d){this.data=d}}),b=l.parseArgs;l.parseArgs=function(d,e,g){e.data&&
e.data instanceof a&&(e.data=e.data.data,g=!0);return b(d,e,g)};l.deepCreate=function(d,e){if(e instanceof a)return new a(e.data);e=e||{};var g=p.delegate(d),h,m;for(h in d)(m=d[h])&&"object"===typeof m&&(g[h]=l.deepCreate(m,e[h]));return c(g,e)};return t(null,{addVariables:function(d){for(var e in d)this.addVariable(e,d[e])},addVariable:function(d,e){k.isDefined(e)&&(e instanceof f?this._writeFileContent(d,e):this._writeVariable(d,e.toString()))},build:function(d){this._writeBoundary(!0);d.data=
new a(this._prepareBinaryData());var e=d.headers||{};e["Content-Type"]="multipart/form-data; boundary\x3d"+this._dataProvider.boundary;d.headers=e;this._dataProvider=null},_prepareBinaryData:function(){var d=this._dataProvider.buffer;if(!window.Uint8Array)return d;for(var e=d.length,g=new Uint8Array(new ArrayBuffer(e)),h=0;h<e;h++)g[h]=d.charCodeAt(h);return g},_dataProvider:null,_getDataProvider:function(){if(!this._dataProvider){for(var d="",e=0;32>e;e++)d+=String.fromCharCode(Math.floor(97+25*
Math.random()));this._dataProvider={buffer:"",boundary:d}}return this._dataProvider},_writeVariable:function(d,e){this._writeBoundary();this._writeContentDisposition(d);this._writeLineBreak();this._writeData(this._toUTF8(e));this._writeLineBreak()},_writeFileContent:function(d,e){this._writeBoundary();this._writeContentDisposition(d,e.filename);e.contentType&&(this._writeData("Content-Type: "+e.contentType),this._writeLineBreak());e.contentTransferEncoding&&(this._writeData("Content-Transfer-Encoding: "+
e.contentTransferEncoding),this._writeLineBreak());this._writeLineBreak();this._writeData(e.data);this._writeLineBreak()},_writeBoundary:function(d){this._writeDoubleDash();this._writeData(this._getDataProvider().boundary);d?this._writeDoubleDash():this._writeLineBreak()},_writeContentDisposition:function(d,e){e=e?'"; filename\x3d"'+this._toUTF8(e.replace(/"/g,"'")):"";this._writeData('Content-Disposition: form-data; name\x3d"'+this._toUTF8(d)+e+'"');this._writeLineBreak()},_writeDoubleDash:function(){this._writeData("--")},
_writeLineBreak:function(){this._writeData("\r\n")},_writeData:function(d){this._getDataProvider().buffer+=d},_toUTF8:function(d){return unescape(encodeURIComponent(d))}})})},"esri/dijit/geoenrichment/utils/requests/ErrorUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","require"],function(t,p,l){function k(c){var a=new t;l(["./DataResource"],function(b){p((new b(c)).getFileContent(),a.resolve,a.reject)});return a.promise}var f={getErrorFromBin:function(c){var a=
/^text\/|^application\/json/;return c&&c.type&&!a.test(c.type)?null:p(c&&k(c),function(b){if(b){if(b.hasOwnProperty("contentType")&&!a.test(b.contentType))return null;try{var d=JSON.parse(decodeURIComponent(escape(b.data))),e=f.parseError(d);if(e)return e;if(d.messages&&d.messages.length){var g=d.messages[0];if("esriJobMessageTypeError"==g.type)return Error(g.description)}}catch(h){}}return Error("Binary data error.")})},parseError:function(c){var a;c.error?a=f.makeError(c.error):"error"===c.status&&
(a=f.makeError(c));a&&a.code&&null==a.httpCode&&(a.httpCode=a.code);return a},makeError:function(c){null==c?c=Error():"string"===typeof c&&(c={message:c});if(!(c instanceof Error)&&"object"===typeof c){var a=c;c=Error();a.code&&(c.code=a.code);a.message&&(c.message=a.message);a.details&&(c.details=a.details)}c.log=dojoConfig.isDebug;return c}};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_SerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AnalysisAreaUtil ../core/infographics/InfographicTypes ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r){function n(){var G=new k;t("./supportClasses/attachments/AttachmentsStoreSerializer ./supportClasses/GEUtil ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../core/infographics/utils/InfographicJsonUtil ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/infographics/InfographicTypes ./commands/mapToImage/MapToURLUtil esri/dijit/geoenrichment/utils/ProjectionUtil".split(" "),
function(F,B,z,E,I,L,M,O,Q){q=F;u=B;w=z;y=L;b=M;C=O;D=Q;G.resolve()});return G.promise}var q,u,w,y,C,D;return p(null,{reportDataToJson:function(G,F){var B=this;F=F||{};var z=!1;d.processTemplateFieldInfos(G.templateJson,function(E){E.isInfographic&&E.infographicJson.type===b.ATTACHMENTS&&(z=!0)});return n().then(function(){return f(G.attachmentsStore&&q.getAttachmentsStoreJson(G.attachmentsStore,{numAreas:G.analysisAreas.length,saveImages:z}),function(E){var I=l.mixin({},G.config);!1!==F.forceFixedDataMode&&
delete I.geoenrichmentUrl;E={jsapiVersion:m.jsapiVersion,isMultiFeature:G.isMultiFeature,reportTitle:G.reportTitle,templateJson:w.serialize(G.templateJson),reportObject:B._prepareReportObjectJson(G.reportObject),fieldData:G.fieldData,analysisAreas:c.areasToJson(G.analysisAreas),combinedAreasInfo:G.combinedAreasInfo&&c.combinedAreasInfoToJson(G.combinedAreasInfo),reverseAnalysisAreasOnMap:G.reverseAnalysisAreasOnMap,attachmentsStore:E,templateVariableProvider:G.templateVariableProvider&&G.templateVariableProvider.toJson(),
config:I,countryConfig:e.toJson(),mapImageInfos:F.mapImageInfos,loadedMapPortalItems:F.loadedMapPortalItems,customLogo:G.customLogo};r.logData&&(console.log("_SerializationSupport.js \x3d\x3e reportDataJson"),console.log(E));return E})})},_prepareReportObjectJson:function(G){var F={},B;for(B in G)G[B]&&"object"!==typeof G[B]&&(F[B]=G[B]);return F},reportDataFromJson:function(G){return n().then(function(){var F=G.fieldData;F.featureData&&(F.areaData=F.featureData.map(function(z){return{mainCalculator:{data:z}}}),
delete F.featureData);var B={isMultiFeature:G.isMultiFeature,reportTitle:G.reportTitle,templateJson:w.deserialize(G.templateJson),reportObject:G.reportObject,fieldData:F,analysisAreas:c.areasFromJson(G.analysisAreas),combinedAreasInfo:G.combinedAreasInfo&&c.combinedAreasInfoFromJson(G.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:G.reverseAnalysisAreasOnMap,attachmentsStore:G.attachmentsStore&&q.getAttachmentsStoreFromJson(G.attachmentsStore),templateVariableProvider:G.templateVariableProvider&&
new y(G.templateVariableProvider),config:G.config||{},mapImageInfos:G.mapImageInfos,loadedMapPortalItems:G.loadedMapPortalItems,customLogo:G.customLogo};a.populateCombinedAreasInfo(B.combinedAreasInfo,B.analysisAreas);u.setGeoenrichmentUrl(null);F=!1;B.config.portalUrl&&h.setArcgisUrl(h.getPortalUrl(B.config.portalUrl));B.config.geometryServiceUrl?D.setGeometryServiceUrl(B.config.geometryServiceUrl):F=!0;B.config.printMapTaskUrl?C.setPrintMapTaskUrl(B.config.printMapTaskUrl):F=!0;e.fromJson(G.countryConfig);
return f(F&&g.tryConfigureServicesFromAGOLPublic()).then(function(){return B})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaJsonUtil":function(){define(["esri/graphic","esri/dijit/PopupTemplate"],function(t,p){function l(c,a){if(!c)return null;c.getLayer()&&(c=new t(c.geometry,c.symbol,c.attributes,c.infoTemplate));c=c.toJson();a&&delete c.infoTemplate;return c}function k(c){if(!c)return null;if(c instanceof t)return c;var a=c.infoTemplate&&new p(c.infoTemplate);
delete c.infoTemplate;c=new t(c);a&&c.setInfoTemplate(a);return c}function f(c){var a={},b;for(b in c){var d=c[b];if("string"===typeof d||"number"===typeof d&&!isNaN(d))a[b]=d}return a}return{areasToJson:function(c,a){var b=a&&a.excludeInfoTemplate;return c.map(function(d){var e=f(d);e.feature=l(d.feature,b);e.location=d.location&&l(d.location,b);e.additionalFeatures=d.additionalFeatures&&d.additionalFeatures.map(function(g){return l(g,b)});e.geographies=d.geographies;e.buffer=d.buffer;e.featureServiceQueryInfos=
d.featureServiceQueryInfos;e.dynamicAttributes=d.dynamicAttributes;return e})},combinedAreasInfoToJson:function(c){var a=f(c);a.groups=c.groups&&c.groups.map(function(b){var d=f(b);d.indexes=b.indexes.slice();d.location=b.location&&l(b.location);d.additionalFeatures=b.additionalFeatures&&b.additionalFeatures.map(l);return d});return a},areasFromJson:function(c){return c.map(function(a){var b=f(a);b.feature=k(a.feature);b.location=a.location&&k(a.location);b.additionalFeatures=a.additionalFeatures&&
a.additionalFeatures.map(k);b.geographies=a.geographies;b.buffer=a.buffer;b.featureServiceQueryInfos=a.featureServiceQueryInfos;b.dynamicAttributes=a.dynamicAttributes;return b})},combinedAreasInfoFromJson:function(c){var a=f(c);a.groups=c.groups&&c.groups.map(function(b){var d=f(b);d.indexes=b.indexes.slice();d.location=b.location&&k(b.location);d.additionalFeatures=b.additionalFeatures&&b.additionalFeatures.map(k);return d});return a}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes":function(){define(["dojo/_base/lang"],
function(t){var p={STATIC:"static",ATTACHMENTS:"attachments",AREA_DETAILS:"areaDetails",INTERESTING_FACTS:"interestingFacts",LOCATOR_TABLE:"locatorTable",COMPARISON_TABLE:"comparisonTable"},l={AGE_PYRAMID:"AgePyramid",ONE_VAR:"OneVar",RELATED_VARS:"RelatedVariables",TAPESTRY:"Tapestry",PRIZM5:"Prizm5"},k={},f;for(f in l)k[l[f]]=!0;t.mixin(p,l);var c={};for(f in p)c[p[f]]=!0;p.isDynamic=function(a){return k[a]};p.isSupported=function(a){return c[a]};p.isTableLike=function(a){return a===p.AREA_DETAILS||
a===p.LOCATOR_TABLE||a===p.COMPARISON_TABLE};p.fixTapestryNameToWidget=function(a){return"TapestryNEW"===a?"Tapestry":a};p.fixTapestryNameToData=function(a){return"Tapestry"===a?"TapestryNEW":a};p.supportsMultiFeature=function(a){return a===p.COMPARISON_TABLE||a===p.LOCATOR_TABLE||a===p.ATTACHMENTS||a===p.AREA_DETAILS};p.supportsComparison=function(a){return a===p.ONE_VAR||a===p.AGE_PYRAMID||a===p.RELATED_VARS||a===p.COMPARISON_TABLE};p.isDynamicWithFiltering=function(a){return a===p.ONE_VAR||a===
p.AGE_PYRAMID||a===p.RELATED_VARS};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil":function(){define(["./_SectionJsonCollector","../../../infographics/InfographicTypes"],function(t,p){var l={},k={process:function(f,c,a,b,d){var e=b;b=function(g,h,m){g&&e.apply(this,arguments)};d={processLevel:c,objJson:a,processFunc:b,ignoreComparisonCalculators:d&&d.ignoreComparisonCalculators};f!==c||"field"===f&&"field"===c?"document"===f?k._processTemplateJson(a,
d):"section"===f?k._processSectionJson(a,d):"table"===f?k._processTableJson(a,d,null):"tableRow"===f?k._processTableDataObj(a,d,null):"field"===f&&k._processFieldInfo(a,d,null):b(a)},_processTemplateJson:function(f,c){f.sectionsTables?f.sectionsTables.forEach(function(a){k._processTableJson(a,c)}):t.collectSectionJsons(f,{saveParentInfo:!1,processFieldInfoFunc:function(a){"field"===c.processLevel&&c.processFunc(a)}}).forEach(function(a){k._processSectionJson(a,c)})},_processSectionJson:function(f,
c){"section"===c.processLevel&&c.processFunc(f);f.stack&&f.stack.forEach(function(a){"sectionElement"===c.processLevel&&c.processFunc(a);"table"===a.id&&k._processTableJson(a,c)})},_processTableJson:function(f,c,a){"table"===c.processLevel&&c.processFunc(f);f.rows.forEach(function(b){"tableRow"===c.processLevel&&c.processFunc(b,a);k._processTableDataObj(b,c,a)});f.backgroundSectionJson&&k._processSectionJson(f.backgroundSectionJson,c);f.foregroundSectionJson&&k._processSectionJson(f.foregroundSectionJson,
c);f.backgroundFloatingTablesSectionJson&&k._processSectionJson(f.backgroundFloatingTablesSectionJson,c);f.foregroundFloatingTablesSectionJson&&k._processSectionJson(f.foregroundFloatingTablesSectionJson,c)},_processTableDataObj:function(f,c,a){if(f.fieldInfos)for(var b in f.fieldInfos)k._processFieldInfo(f.fieldInfos[b],c,a,"tableCell")},_processFieldInfo:function(f,c,a,b){if(f){"field"!==c.processLevel||c.skipVariables&&(f.hasVariable||f.script)||c.processFunc(f,a,b);f.triggerJson&&f.triggerJson.fieldInfo&&
f.templateName!==f.triggerJson.fieldInfo.templateName&&k._processFieldInfo(f.triggerJson.fieldInfo,c,f,"trigger");f.dataDrillingPanelInfo&&k._processSectionJson(f.dataDrillingPanelInfo.sectionJson,c);f.tooltipInfo&&f.tooltipInfo.fieldInfo&&k._processFieldInfo(f.tooltipInfo.fieldInfo,c,f,"fieldTooltip");f.linkFieldInfo&&k._processFieldInfo(f.linkFieldInfo,c,f,"linkFieldInfo");if(f.isRichText){for(var d in f.richTextJson.fieldInfos)a=f.richTextJson.fieldInfos[d],k._processFieldInfo(a,c,f,"richTextPart");
for(d in f.richTextJson.linkFieldInfos)a=f.richTextJson.linkFieldInfos[d],k._processFieldInfo(a,c,f,"richTextPart")}f.isInfographic&&k._processInfographicFieldInfo(f,c);f.isChart&&k._processChartFieldInfo(f,c);f.isReportSection&&f.sectionJson&&k._processSectionJson(f.sectionJson,c)}},_processInfographicFieldInfo:function(f,c){var a=f.infographicJson;switch(a.type){case p.STATIC:a.header&&k._processTableJson(a.header,c,f);a.variableTables&&a.variableTables.forEach(function(e){e.variable&&k._processFieldInfo(e.variable.fieldInfo,
c,f,"staticInfographicVariable");e.description&&e.description.fieldInfo&&k._processFieldInfo(e.description.fieldInfo,c,f,"staticInfographicDescription")});if(a.dataDrilling)for(var b in a.dataDrilling){var d=a.dataDrilling[b];d&&d.sectionJson&&k._processSectionJson(d.sectionJson,c)}break;case p.AGE_PYRAMID:case p.TAPESTRY:case p.PRIZM5:case p.RELATED_VARS:case p.ONE_VAR:!c.ignoreComparisonCalculators&&a.fieldInfos&&a.fieldInfos.forEach(function(e){k._processFieldInfo(e,c,f,"dynamicInfographicVariable")});
break;case p.AREA_DETAILS:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,c,f);a.attributesSectionJson&&k._processSectionJson(a.attributesSectionJson,c,f);a.notesSectionJson&&k._processSectionJson(a.notesSectionJson,c,f);break;case p.LOCATOR_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,c);k._processSectionJson(a.headerSectionJson,c);k._processSectionJson(a.dataSectionJson,c);a.summarySectionJson&&k._processSectionJson(a.summarySectionJson,c);a.summaryFooterSectionJson&&
k._processSectionJson(a.summaryFooterSectionJson,c);a.summarizeFractionField&&"object"===typeof a.summarizeFractionField&&k._processFieldInfo(a.summarizeFractionField,c,f,"locatorFractionFieldInfo");break;case p.COMPARISON_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,c),c.ignoreComparisonCalculators||k._processSectionJson(a.dataSectionJson,c)}},_processChartFieldInfo:function(f,c){var a=f.chartJson.visualProperties;a.chartIcons&&a.chartIcons.forEach(function(b){k._processFieldInfo(b,
c,f,"chartIcon")});a.floatingIcons&&a.floatingIcons.forEach(function(b){k._processTableJson(b,c,f,"floatingIcon")});a.floatingTexts&&a.floatingTexts.forEach(function(b){k._processTableJson(b,c,f,"floatingText")});c.ignoreComparisonCalculators&&f.chartJson.comparisonInfo&&(c=Object.assign({},c),c.skipVariables=!0);a.tooltip&&a.tooltip.fieldInfo&&k._processFieldInfo(a.tooltip.fieldInfo,c,f,"chartTooltip");f.chartJson.dataDrillingPanelInfo&&k._processSectionJson(f.chartJson.dataDrillingPanelInfo.sectionJson,
c);f.chartJson.seriesItems.forEach(function(b){b.points.forEach(function(d){k._processFieldInfo(d.fieldInfo,c,f,"chartPointField");d.iconFieldInfo&&k._processFieldInfo(d.iconFieldInfo,c,f,"chartPointIcon");d.captionFieldInfo&&k._processFieldInfo(d.captionFieldInfo,c,f,"chartPointCaption")})})}};l.DOCUMENT="document";l.SECTION="section";l.TABLE="table";l.SECTION_ELEMENT="sectionElement";l.TABLE_ROW="tableRow";l.FIELD="field";l.process=k.process;l.processTemplateFieldInfos=function(f,c,a){k.process("document",
"field",f,c,a)};l.processSectionFieldInfos=function(f,c,a){k.process("section","field",f,c,a)};l.processSectionElements=function(f,c){k.process("document","sectionElement",f,c)};l.processTableFieldInfos=function(f,c,a){k.process("table","field",f,c,a)};l.processChartFieldInfos=function(f,c){f.seriesItems.forEach(function(d){d.points.forEach(function(e){e.fieldInfo&&c(e.fieldInfo,"series")})});var a=f.visualProperties.tooltip;if(a&&a.fieldInfo&&a.fieldInfo.isRichText){for(var b in a.fieldInfo.richTextJson.fieldInfos)c(a.fieldInfo.richTextJson.fieldInfos[b],
"tooltip");for(b in a.fieldInfo.richTextJson.linkFieldInfos)c(a.fieldInfo.richTextJson.linkFieldInfos[b],"tooltip")}f.dataDrillingPanelInfo&&l.processSectionFieldInfos(f.dataDrillingPanelInfo.sectionJson,function(d){c(d,"dataDrilling")})};l.processDataDrillingPanelInfos=function(f,c){l.processTemplateFieldInfos(f,function(a){if(a.isInfographic&&a.infographicJson.dataDrilling)for(var b in a.infographicJson.dataDrilling){var d=a.infographicJson.dataDrilling[b];d&&c(d)}else a.isChart&&a.chartJson.dataDrillingPanelInfo?
c(a.chartJson.dataDrillingPanelInfo):a.dataDrillingPanelInfo&&c(a.dataDrillingPanelInfo)})};l.hasMultiFeatureChart=function(f){var c=!1;l.processTemplateFieldInfos(f,function(a){a.isChart&&(c=c||a.chartJson&&!!a.chartJson.isMultiFeatureChart)});return c};l.hasComparisonInfographicTable=function(f){var c=!1;l.processTemplateFieldInfos(f,function(a){a.isInfographic&&(c=c||a.infographicJson&&a.infographicJson.type===p.COMPARISON_TABLE)});return c};l.isGraphicReport=function(f){return!!f.sectionsTables};
l.hasDynamicColumns=function(f){return l._checkTableAttributes(f,function(c){return 0<c.dynamicColumns})};l.hasDynamicRows=function(f){return l._checkTableAttributes(f,function(c){return 0<c.dynamicRows})};l._checkTableAttributes=function(f,c){var a;l.isGraphicReport(f)?l.processTemplateFieldInfos(f,function(b){b.isReportSection&&b.sectionJson&&b.sectionJson.stack&&b.sectionJson.stack.some(function(d){if("table"===d.id&&d.attributes&&c(d.attributes))return a=!0})}):a=l.collectSectionJsons(f).some(function(b){return b.stack&&
b.stack.some(function(d){return"table"===d.id&&d.attributes&&c(d.attributes)})});return a};l.hasMultiFeatureSections=function(f){return l.isGraphicReport(f)?l.hasMultiFeatureChart(f)||l.hasDynamicColumns(f)||l.hasComparisonInfographicTable(f):!1};l.calcNumberOfMaps=function(f,c){var a=0;l.collectSectionJsons(f).forEach(function(b){a+=l.calcNumberOfMapsInSectionJson(b,c)});return a};l.calcNumberOfMapsInSectionJson=function(f,c){var a=0;f.stack&&f.stack.forEach(function(b){"map"===b.id&&(c&&c(b),a++)});
l.processSectionFieldInfos(f,function(b){b.isMap&&(c&&c(b.mapJson),a++)});return a};l.calcNumberOfMapsInTableJson=function(f,c){var a=0;l.processTableFieldInfos(f,function(b){b.isReportSection&&(a+=l.calcNumberOfMapsInSectionJson(b.sectionJson,c))});return a};l.collectSectionJsons=t.collectSectionJsons;l.getParentBox=t.getParentBox;l.setParentBox=t.setParentBox;l.getParentStyle=t.getParentStyle;return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/_SectionJsonCollector":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/MathUtil","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil","../../tableJson/TableJsonUtil"],function(t,p,l,k){var f={},c={provideParentInfo:function(d,e,g,h,m,r){a.collectStatistics(e);a:{switch(m){case "floating":var n=e.style.left+r.left;break a;case "page":n=a.calcX(e,g,h)+r.left;break a}n=void 0}a:{switch(m){case "floating":m=e.style.top+r.top;break a;case "page":m=a.calcY(e,g,h)+r.top;break a}m=void 0}d._parentBox={x:n,y:m,w:a.calcFullWidth(e,
g,h),h:a.calcFullHeight(e,g,h)};e=h.field;g.style.fields=g.style.fields||{};g=(g.style.fields[e]=g.style.fields[e]||{}).backgroundColor;d._parentStyle={backgroundColor:g}},sanitize:function(d){a.sanitize(d)}},a={collectStatistics:function(d){if(!d._measureInfo){var e={},g={},h;d.columns.forEach(function(y){h&&(g[h.field]=y);h=y;e[y.field]=y});var m={},r={},n={},q={},u={},w={};d.rows.forEach(function(y,C){d.columns.forEach(function(D,G){var F=u[G]||0,B=w[C]||0,z=a._getDataHeight(y,D.field);D=a._getFieldWidth(y,
D);F+=z;B+=D;u[G]=F;w[C]=B;z=G+"_"+C;r[z]=F;m[z]=B;n[z]=m[G-1+"_"+C]||0;q[z]=r[G+"_"+(C-1)]||0})});d._measureInfo={xPositions:n,yPositions:q,columnsHash:e,nextColumnHash:g}}},calcX:function(d,e,g){g=d.columns.indexOf(g);e=d.rows.indexOf(e);return d._measureInfo.xPositions[g+"_"+e]||0},calcY:function(d,e,g){g=d.columns.indexOf(g);e=d.rows.indexOf(e);return d._measureInfo.yPositions[g+"_"+e]||0},calcFullWidth:function(d,e,g){g=g.field;var h=a._getFieldWidth(e,d._measureInfo.columnsHash[g]),m=e.columnSpans&&
e.columnSpans[g]||1;if(1<m)for(var r,n=0;n<m-1;n++)r=d._measureInfo.nextColumnHash[r?r.field:g],h+=a._getFieldWidth(e,r);return h},_getFieldWidth:function(d,e){d.style.fields=d.style.fields||{};return(d.style.fields[e.field]=d.style.fields[e.field]||{}).width||e.style.width},calcFullHeight:function(d,e,g){g=g.field;var h=d.rows.indexOf(e),m=a._getDataHeight(e,g);e=e.rowSpans&&e.rowSpans[g]||1;if(1<e)for(var r=h+1,n=0;n<e-1;n++)h=d.rows[r++],m+=a._getDataHeight(h,g);return m},_getDataHeight:function(d,
e){d.style.fields=d.style.fields||{};return(d.style.fields[e]=d.style.fields[e]||{}).height||d.style.height},sanitize:function(d){delete d._measureInfo}},b={getIntersectingTableJsonsBehind:function(d,e,g,h,m){function r(w){var y=w.rows[0].fieldInfos[w.columns[0].field];return l.isTextLikeCell(y)||l.isShapeCell(y)||l.isImageCell(y)?p.checkRectsIntersect([g,{x:w.style.left+e.left,y:w.style.top+e.top,w:k.getTableWidth(w),h:k.getTableHeight(w)}]):!1}function n(w){return p.checkRectsIntersect([g,{x:w.style.left+
e.left,y:w.style.top+e.top,w:w.style.width,h:w.style.height}])}var q=[],u=[];d.backgroundFloatingTablesSectionJson&&d.backgroundFloatingTablesSectionJson.stack.forEach(function(w,y){if(-1===h||m||h!==y)if("table"===w.id&&r(w)||"img"===w.id&&n(w))-1===h||m||h>y?q.push(w):u.push(w)});d.foregroundFloatingTablesSectionJson&&d.foregroundFloatingTablesSectionJson.stack.forEach(function(w,y){if(m&&h===y)return!0;if("table"===w.id&&r(w)||"img"===w.id&&n(w))m&&h>y?q.push(w):u.push(w)});return{elementJsonsBehind:q,
elementJsonsAbove:u}}};f.collectSectionJsons=function(d,e){e=e||{};var g=[];if(!d)return[];if(d.sections)return d.sections;if(!d.sectionsTables)return[];e.processSectionJson=e.processSectionJson||function(){};d.sectionsTables.forEach(function(h,m){var r={addBackground:function(){!1!==e.backgroundForeground&&h.backgroundSectionJson&&h.backgroundSectionJson.stack&&g.push(h.backgroundSectionJson)},addBackgroundTables:function(n){var q=[];!1!==e.floatingTables&&h.backgroundFloatingTablesSectionJson&&
h.backgroundFloatingTablesSectionJson.stack.forEach(function(u,w){"table"===u.id&&f._processTableJson(u,q,"floating",d.documentOptions,e,h,w,!1)});n&&q.reverse();q.forEach(function(u){e.processSectionJson(u,{pageIndex:m,source:"foreground",floatingIndex:u.__floatingIndex});delete u.__floatingIndex});g=g.concat(q)},addInGridSections:function(){var n=[];f._processTableJson(h,n,"page",d.documentOptions,e,h);n.forEach(function(q){e.processSectionJson(q,{pageIndex:m,source:"grid",index:q.__inGridIndex});
delete q.__inGridIndex});g=g.concat(n)},addForegroundTables:function(n){var q=[];!1!==e.floatingTables&&h.foregroundFloatingTablesSectionJson&&h.foregroundFloatingTablesSectionJson.stack.forEach(function(u,w){"table"===u.id&&f._processTableJson(u,q,"floating",d.documentOptions,e,h,w,!0)});n&&q.reverse();q.forEach(function(u){e.processSectionJson(u,{pageIndex:m,source:"foreground",floatingIndex:u.__floatingIndex});delete u.__floatingIndex});g=g.concat(q)},addForeground:function(){!1!==e.backgroundForeground&&
h.foregroundSectionJson&&h.foregroundSectionJson.stack&&g.push(h.foregroundSectionJson)}};e.topFirst?(r.addForeground(),r.addForegroundTables(!0),r.addInGridSections(),r.addBackgroundTables(!0),r.addBackground()):(r.addBackground(),r.addBackgroundTables(),r.addInGridSections(),r.addForegroundTables(),r.addForeground())});return g};f._processTableJson=function(d,e,g,h,m,r,n,q){d.rows.forEach(function(u,w){u.fieldInfos&&d.columns.forEach(function(y,C){var D=u.fieldInfos[y.field];if(D&&D.sectionJson&&
D.sectionJson.stack){m.processFieldInfoFunc&&m.processFieldInfoFunc(D);(!1!==m.saveParentInfo||m.populateWithFloatingElementsBehind)&&c.provideParentInfo(D.sectionJson,d,u,y,g,h);if(m.populateWithFloatingElementsBehind){var G=t.clone(D.sectionJson),F;"page"===g?F=b.getIntersectingTableJsonsBehind(r,h,G._parentBox,-1,void 0):"floating"===g&&(F=b.getIntersectingTableJsonsBehind(r,h,G._parentBox,n,q));D=function(B){B=t.clone(B);B.isContextFloatingElement=!0;B.style.left=B.style.left+h.left-G._parentBox.x;
if("table"===B.id)B.style.top=B.style.top+h.top-G._parentBox.y;else if("img"===B.id||"map"===B.id)B.style.top=B.style.top+h.top-G._parentBox.y;return B};y=F.elementJsonsBehind.map(D);F=F.elementJsonsAbove.map(D);G.stack=y.concat(G.stack);G.stack=G.stack.concat(F);e.push(G)}else e.push(D.sectionJson);F=e[e.length-1];"page"===g?F.__inGridIndex=w*d.columns.length+C:F.__floatingIndex=n}})});c.sanitize(d)};f.getParentBox=function(d){return d&&d._parentBox};f.setParentBox=function(d,e){d._parentBox=e};
f.getParentStyle=function(d){return d&&d._parentStyle};return f})},"esri/dijit/geoenrichment/utils/MathUtil":function(){define([],function(){function t(c){return Array.isArray(c)?c:[c.x,c.y]}function p(c){return Array.isArray(c)?c:[c.x,c.y,c.x+c.w,c.y+c.h]}function l(c){return Array.isArray(c)?{x:c[0],y:c[1],w:c[2]-c[0],h:c[3]-c[1]}:c}function k(c){return[[c[0],c[1]],[c[2],c[1]],[c[2],c[3]],[c[0],c[3]],[c[0]+(c[2]-c[0])/2,c[1]+(c[3]-c[1])/2]]}var f={rotatePointAroundPoint:function(c,a,b){b=f.degToRad(b);
var d=t(c),e=t(a);a=Math.cos(b)*(e[0]-d[0])-Math.sin(b)*(e[1]-d[1])+d[0];b=Math.sin(b)*(e[0]-d[0])+Math.cos(b)*(e[1]-d[1])+d[1];return Array.isArray(c)?[a,b]:{x:a,y:b}},degToRad:function(c){return c*Math.PI/180},radToDeg:function(c){return 180*c/Math.PI},cosDeg:function(c){return Math.cos(f.degToRad(c))},sinDeg:function(c){return Math.sin(f.degToRad(c))},angleTo180_180Range:function(c){c=(c+180)%360;0>c&&(c=360+c);return c-180},angleTo0_360Range:function(c){c%=360;0>c&&(c=360+c);return c},calcVectorLength:function(c){var a=
c[0]-c[2];c=c[1]-c[3];return Math.sqrt(a*a+c*c)},addPointToVector:function(c,a){a=t(a);c=c.slice();c[0]+=a[0];c[1]+=a[1];c[2]+=a[0];c[3]+=a[1];return c},subtractPointFromVector:function(c,a){a=t(a);c=c.slice();c[0]-=a[0];c[1]-=a[1];c[2]-=a[0];c[3]-=a[1];return c},putVectorToOrigin:function(c){return f.subtractPointFromVector(c,[c[0],c[1]])},normalizeVector:function(c){c=f.putVectorToOrigin(c);var a=f.calcVectorLength(c);c[2]/=a;c[3]/=a;return c},calcDotProduct:function(c,a){c=f.putVectorToOrigin(c);
a=f.putVectorToOrigin(a);return c[2]*a[2]+c[3]*a[3]},calcAngleBetweenVectors:function(c,a){c=f.normalizeVector(c);a=f.normalizeVector(a);return Math.acos(f.calcDotProduct(c,a))},addLengthToVector:function(c,a){var b=f.calcVectorLength(c),d=[c[0],c[1]];c=f.normalizeVector(c);c[2]*=b+a;c[3]*=b+a;return f.addPointToVector(c,d)},rotateVectorAroundPoint:function(c,a,b){a=t(a);var d=f.rotatePointAroundPoint(a,[c[0],c[1]],b);c=f.rotatePointAroundPoint(a,[c[2],c[3]],b);return[d[0],d[1],c[0],c[1]]},toLineABC:function(c){var a=
c[3]-c[1],b=c[0]-c[2];return[a,b,-a*c[0]-b*c[1]]},intersect2Lines:function(c,a){var b=f.toLineABC(c),d=f.toLineABC(a);a=b[0];c=b[1];b=b[2];var e=d[0],g=d[1];d=d[2];var h=a*g-e*c;return 0===h?null:[(d*c-b*g)/h,(e*b-a*d)/h]},intersectLineWithRect:function(c,a){function b(r,n){(r=f.intersect2Lines(c,[r[0],r[1],n[0],n[1]]))&&f.isPointInRect(a,r)&&m.push(r)}var d=k(a),e=d[0],g=d[1],h=d[2];d=d[3];var m=[];b(e,g);b(g,h);b(h,d);b(d,e);if(2!==m.length)return null;e=[m[0][0],m[0][1],m[1][0],m[1][1]];return f.calcVectorLength(e)?
e:null},isPointInRect:function(c,a){c=p(c);a=t(a);var b=c[2]-c[0],d=c[3]-c[1];return!(a[0]<c[0]||a[0]>c[0]+b||a[1]<c[1]||a[1]>c[1]+d)},isRectInRect:function(c,a){return f.checkRectsIntersect([c,a])&&k(p(c)).every(function(b){return f.isPointInRect(a,b)})},checkRectsIntersect:function(c){c=c.map(p);return c.every(function(a){var b=k(a);return c.every(function(d){return a===d?!0:b.some(function(e){return f.isPointInRect(d,e)})||k(d).some(function(e){return f.isPointInRect(a,e)})})})},getRotatedRectBox:function(c,
a){var b=!Array.isArray(c);c=p(c);var d=k(c);c=d[0];var e=d[1],g=d[2],h=d[3];d=d[4];c=f.rotatePointAroundPoint(d,c,a);e=f.rotatePointAroundPoint(d,e,a);g=f.rotatePointAroundPoint(d,g,a);h=f.rotatePointAroundPoint(d,h,a);c=f.getPointsExtent([c,e,g,h]);return b?l(c):c},uniteRects:function(c){var a=!Array.isArray(c[0]);c=c.map(p);var b=[];c.forEach(function(d){b=b.concat(k(d))});c=f.getPointsExtent(b);return a?l(c):c},getPointsExtent:function(c){var a=!Array.isArray(c[0]),b=Infinity,d=-Infinity,e=Infinity,
g=-Infinity;c.forEach(function(h){h=t(h);b=Math.min(b,h[0]);d=Math.max(d,h[0]);e=Math.min(e,h[1]);g=Math.max(g,h[1])});c=[b,e,d,g];return a?l(c):c}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil":function(){define(["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(t,p,l,k,f){var c=
{getFieldCellValue:function(a){return a.row&&a.row[a.column.field]},setFieldCellContent:function(a,b){a.set("value",b);a.row[a.column.field]=b},clearFieldInfo:function(a,b){a.fieldInfos&&delete a.fieldInfos[b];a[b]="";c.setNumericDataValue(void 0,a,b)},getNumericCellValue:function(a){return c.getNumericDataValue(a.row,a.column.field)},setNumericCellValue:function(a,b){return c.setNumericDataValue(b,a.row,a.column.field)},getNumericDataValue:function(a,b){return a&&b&&a[b+"_numeric"]},setNumericDataValue:function(a,
b,d){b[d+"_numeric"]=a},getCellGroupStyleStats:function(a){return a.row&&a.column.field&&a.row[a.column.field+"_groupStyle"]},setCellGroupStyleStats:function(a,b){a.row[a.column.field+"_groupStyle"]=b},getRenderedValue:function(a,b,d){var e={parentGrid:a,row:b,column:d};a=a._getCellRenderer().getRenderedContent(e);if(a.isUnavailableData)return{};b=c.getNumericDataValue(b,d.field);"number"!==typeof b&&("number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(d=k.parsePercentOrCurrency(a.formattedValue,
f.getCurrencyFormat()),isNaN(d)||(b=d)):b=a.value);return{numericValue:b,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&!a.row[a.column.field]&&!c.getFieldInfo(a)},hasSpans:function(a){return c.getColumnSpan(a)||c.getRowSpan(a)},getColumnSpan:function(a){return a&&a.row&&a.row.columnSpans&&a.row.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.row&&a.row.rowSpans&&a.row.rowSpans[a.column.field]},getDataColumnSpan:function(a,b){return a&&a.columnSpans&&
a.columnSpans[b]},getDataRowSpan:function(a,b){return a&&a.rowSpans&&a.rowSpans[b]},getFieldInfo:function(a){return a&&a.row&&a.column&&a.row.fieldInfos&&a.row.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return c.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,b){a.row&&(a.row.fieldInfos[a.column.field]=b)},provideFieldInfo:function(a){c.setFieldInfo(a,c.getFieldInfo(a)||{});return c.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:c.getConditionalFormatting(a),
dataDrilling:c.getDataDrilling(a),tooltipInfo:c.getTooltipInfo(a)}},setPreservableSettings:function(a,b){c.setConditionalFormatting(a,b&&b.triggerJson);c.setDataDrilling(a,b&&b.dataDrilling);c.setTooltipInfo(a,b&&b.tooltipInfo)},getCellStyle:function(a,b){if(!a||!a.row||!a.column)return null;var d=a.row.style&&a.row.style.fields&&a.row.style.fields[a.column.field];!d&&b&&(d={},c.setCellStyle(a,d));return d},getCellThemeStyle:function(a){return a&&a.row&&a.column?a.row.themeStyle&&a.row.themeStyle.fields[a.column.field]:
null},setCellStyle:function(a,b){var d=a.row.style=a.row.style||{};d.fields=d.fields||{};d.fields[a.column.field]=b},updateCellStyle:function(a,b){a=c.getCellStyle(a,!0);t.mixin(a,b)},copyFieldStyle:function(a,b,d){a=c.getCellStyle(a);b=c.getCellStyle(b,!0);for(var e in d)void 0!==a[e]&&(b[e]=a[e])},getFieldCellUrl:function(a){if(a.row&&a.row.urls&&a.column)return a.row.urls[a.column.field]},setFieldCellUrl:function(a,b){a.row&&a.column&&(a.row.urls=a.row.urls||{},void 0===b?delete a.row.urls[a.column.field]:
a.row.urls[a.column.field]=b)},getConditionalFormatting:function(a){return(a=c._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,b){var d=c.getFieldInfo(a);if(d){d.triggerJson=null;if(b){if(a=c.isVariableLikeFieldCell(a))b.fieldInfo=d;b.fieldInfo===d&&(b.fieldInfo=t.clone(b.fieldInfo),delete b.fieldInfo.triggerJson,a&&(delete b.fieldInfo.tooltipInfo,delete b.fieldInfo.dataDrillingPanelInfo))}d.triggerJson=b}},getDataDrilling:function(a){return(a=c.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},
setDataDrilling:function(a,b){if(a=c.getSourceFieldInfo(a))a.dataDrillingPanelInfo=b},getTooltipInfo:function(a){return(a=c.getSourceFieldInfo(a))&&a.tooltipInfo},setTooltipInfo:function(a,b){if(a=c.getSourceFieldInfo(a))a.tooltipInfo=b},getSourceFieldInfo:function(a){var b=c._toFieldInfo(a);a=c.getConditionalFormatting(a);return b&&b.isImage?a&&a.fieldInfo:b},_toFieldInfo:function(a){return a?a.row?c.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=c._toFieldInfo(a);
return!(!a||!a.isReportSection)},isInfographicCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isChart)},isMapCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=c._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=c._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:
null},isShapeCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=c._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!c._toFieldInfo(a)||c.isRichTextCell(a)||c.isVariableLikeFieldCell(a)||c.isSpecialFieldCell(a)},isRichTextCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=
c._toFieldInfo(a);return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name&&"LocatorSummary"!==a.name)},isVariableFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=c._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=c._toFieldInfo(a))?a.hasVariable&&l.isNumericField(a)||a.script&&("Double"===
a.script.type||!a.script.isUneditableScript&&"String"!==a.script.type)||"headers.CHART_POINT_VALUE"===a.name||"LocatorSummary"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return c.isNumericVariableFieldCell(a)},isStringVariableFieldCell:function(a){a=c._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var b=c._toFieldInfo(a);return b&&("headers.CHART_POINT_VALUE"===b.name||"LocatorSummary"===
b.name||!c.isVariableLikeFieldCell(a)&&p.hasField(b.name))}};return c})},"esri/dijit/geoenrichment/utils/FieldUtil":function(){define([],function(){function t(f){return("string"===typeof f?f:f&&f.type)||""}var p={isNumericField:function(f){switch(t(f)){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return"i";case "esriFieldTypeSingle":case "esriFieldTypeDouble":return"f"}return!1},isStringField:function(f){return"esriFieldTypeString"==t(f)||!1},isDateField:function(f){return"esriFieldTypeDate"==
t(f)||!1}},l=/DISTANCE$/;p.isDistanceField=function(f){return l.test(t(f))};var k=/^(SHAPE__Area|SHAPE__Length)$/i;p.canShowField=function(f,c){if(!f||!f.name||"esriFieldTypeOID"===f.type)return!1;if("esriFieldTypeDate"===f.type)return"d";var a=p.isNumericField(f)||p.isStringField(f);if("f"===a&&!1===f.editable&&k.test(f.name))return null;void 0===c&&(c=/^(OBJECTID|OID|FID)$/i);return c&&c.test(f.name)?!1:!0===a?"s":a};p.createFieldInfo=function(f){var c=p.canShowField(f);f={fieldName:f.name,label:f.alias||
f.name,isEditable:!!f.editable,visible:!!c};switch(c){case "i":f.format={places:0,digitSeparator:!0};break;case "f":f.format={digitSeparator:!0};break;case "s":f.stringFieldOption="textbox"}return f};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil":function(){define(["dojo/_base/lang","../templateJsonUtils/fieldInfo/FieldInfoBuilder","../templateJsonUtils/fieldInfo/FieldLibrary","../../grid/coreUtils/GridDataUtil","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],
function(t,p,l,k,f){var c={createTable:function(a){var b=a.numColumns,d=a.numRows,e=a.width,g=a.widths,h=a.style,m=a.attributes&&a.attributes.fixedColumns,r=a.attributes&&a.attributes.dynamicColumns;if(e)if(g)g=g.map(function(G){return e*Number(G.replace("%",""))/100});else{var n=e/b;g=[];for(var q=0;q<b;q++)g.push(n)}if(g)e||isNaN(Number(g[0]))||(e=0,g.forEach(function(G){e+=G}));else for(n=Number(100/b).toFixed(3)+"%",g=[],q=0;q<b;q++)g.push(n);n=[];for(q=0;q<b;q++)n.push({field:"field"+q,style:{width:g[q]}});
g=[];for(var u=!0,w=a.height?a.height/d:a.rowHeight||15.07,y=0;y<d;y++){var C={style:{height:w,fields:{}},fieldInfos:{}};for(q=0;q<b;q++){var D="field"+q;!1!==a.useDefaultTheme&&(C.style.fields[D]=t.mixin({horizontalAlign:0===q?"left":"right",overrideStyle:0===y?1<d?!1!==a.useDefaultHeaderTheme?"TableHeader":"Default":void 0:u?"AlternatingRow":"Default"},a.cellParams));r&&q>=m&&0===y&&(C.fieldInfos[D]=p.createFieldInfoFromSpecialFieldName("AREA_DESC"));a.processTableCell&&a.processTableCell(C,D,y,
q,a)}g.push(C);u=!u}return{id:"table",attributes:t.mixin({},a.attributes),style:t.mixin({width:e||772.33},h),columns:n,rows:g}},createSingleCellTable:function(a){a=a||{};var b=c.createTable({numColumns:1,numRows:1,attributes:a.attributes,useDefaultTheme:!1});c.modifyTableJson(b,0,0,a);return b},modifyTableJson:function(a,b,d,e){b=a.rows[b];d=a.columns[d];var g=d.field;e.text&&(b[g]=e.text);e.fieldInfo&&(b.fieldInfos[g]=e.fieldInfo);e.cellStyle&&(b.style.fields[g]=e.cellStyle);e.columnSpan&&(b.columnSpans=
b.columnSpans||{},b.columnSpans[g]=e.columnSpan);e.rowSpan&&(b.rowSpans=b.rowSpans||{},b.rowSpans[g]=e.rowSpan);b.themeStyle=e.themeStyle;e.width&&(a.style.width=e.width,d.style.width=e.width);e.height&&(b.style.height=e.height);void 0!==e.left&&(a.style.left=e.left);void 0!==e.top&&(a.style.top=e.top)},getTableWidth:function(a){return a.style.width},getTableHeight:function(a){var b=0;a.rows.forEach(function(d){b+=d.style?d.style.height:0});return b},calcTableBox:function(a){return{x:a.style.left||
0,y:a.style.top||0,w:c.getTableWidth(a),h:c.getTableHeight(a)}},createDetailsSection:function(a){return{type:f.DETAILS,stack:[c.createTable(a)]}},createDetailsSectionForFieldInfos:function(a,b){return{type:f.DETAILS,stack:[function(){var d=c.createTable(t.mixin({numColumns:2,numRows:a.length+1},b));d.rows.forEach(function(e,g){0===g?e.field0=a[0].hasVariable?a[0].fieldCategory:"":(g=a[g-1],e.field0=g.script?g.script.alias:g.hasVariable?g.alias:l.getFieldLabel(g.name)||"",e.fieldInfos.field1=g)});
c.provideSpaceAfter(d);return d}()]}},createDetailsSectionForFieldInfoGroups:function(a,b){return{type:f.DETAILS,stack:[function(){var d=c.createTable(t.mixin({numColumns:a.length+1,numRows:a[0].length+1},b));d.rows.forEach(function(e,g){d.columns.forEach(function(h,m){0!==m&&(0===g?e[h.field]=a[m-1][0].fieldCategory||"":(m=a[m-1][g-1],e.field0=e.field0||(m.script?m.script.alias:m.alias),e.fieldInfos[h.field]=m))})});c.provideSpaceAfter(d);return d}()]}},provideSpaceAfter:function(a,b){a.style.spaceAfter=
Math.max(b||0,90-15.07*a.rows.length)},applyDefaultStyling:function(a){var b=!0;a.rows.forEach(function(d,e){a.columns.forEach(function(g){d.style.fields[g.field].overrideStyle=0===e?"TableHeader":b?"AlternatingRow":void 0});b=!b})},setTableHeaderStyle:function(a){if(a.style)for(var b in a.style.fields)(a.style.fields[b]=a.style.fields[b]||{}).overrideStyle="TableHeader"},DEFAULT_ROW_HEIGHT:15.07,isEmptyTable:function(a){return!a.columns||!a.columns.length||!a.rows||!a.rows.length},isSingleCelledTable:function(a){return 1===
a.columns.length&&1===a.rows.length},isMultiDataTable:function(a){return 1<a.columns.length||2<a.rows.length},getTableSubtype:function(a){if(!c.isSingleCelledTable(a))return null;a=c.getFirstFieldInfo(a);return k.isTextLikeCell(a)?"isTextLike":a.isImage?a.triggerJson?"isImage.hasConditionalStyling":"isImage":a.isShape?"isShape":null},getFirstFieldInfo:function(a){return a.rows[0].fieldInfos&&a.rows[0].fieldInfos[a.columns[0].field]},tableJsonHasInfographic:function(a){return!!c.getTableJsonInfographic(a)},
getTableJsonInfographic:function(a){var b;a.rows.some(function(d){if(d.fieldInfos)for(var e in d.fieldInfos){var g=d.fieldInfos[e];if(g&&g.isInfographic)return b=g.infographicJson,!0}});return b},getTableJsonFirstFieldInfo:function(a){return a.rows[0].fieldInfos[a.columns[0].field]},tableJsonHasChart:function(a){return a.rows.some(function(b){if(b.fieldInfos)for(var d in b.fieldInfos){var e=b.fieldInfos[d];if(e&&e.isChart)return!0}})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder":function(){define(["./utils",
"dojo/i18n!esri/nls/jsapi"],function(t,p){function l(b){Object.keys(b).forEach(function(d){var e=b[d];void 0!==e&&null!==e||delete b[d]})}p=p.geoenrichment.dijit.ReportPlayer.ReportPlayer;var k={NUMBER:"n/",createFieldInfoFromCalculator:function(b,d,e){if(!b)return null;b=(d="function"===typeof b.getDescriptionWithType?b:null)?d.variable:b;var g=e&&e.format,h=e&&e.autoformatCurrency,m=e&&e.calculatorName,r=e&&e.defaultDistanceUnits;e=e&&e.summaryType;var n=d&&d.getToggleGroup&&d.getToggleGroup();
e={alias:d?d.getDescriptionWithType()||d.getAliasWithType():b.description||b.alias,hasVariable:!0,variableID:b.id,fullName:b.fullName,fieldCategory:b.fieldCategory,vintage:b.vintage,type:b.type,statefulName:n?n.value:"n/"+b.fullName,summaryType:e};d=d?d.getCalcType().charAt(0):"n";e.name=t.name.createFieldNameFromSource(b,d);g?t.format.setFieldInfoFormat(e,g):(e.decimals=b.precision,e.showCurrency=!(!h||"n"!==d||!b.units||"CURRENCY"!==b.units.toUpperCase()),e.showPercent=!e.showCurrency&&("p"===d||
"n"===d&&b.units&&"PCT"===b.units.toUpperCase()),e.useThousandsSeparator=!0);b.isWebMap&&(e.isWebMap=!0,e.webMapFieldName=b.fieldName,e.webMapField=b.fieldInfo,e.webMapId=b.webMapId,e.layerUrl=b.layerUrl,!g&&b.fieldInfo&&b.fieldInfo.format&&(e.decimals=b.fieldInfo.format.places,e.useThousandsSeparator=!1!==b.fieldInfo.format.digitSeparator));b.customDataCollection&&(e.isCustomDataCollection=!0,e.customDataCollectionId=b.customDataCollection.id,e.customDataCollectionUrl=b.customDataCollection.url,
e.customDataCollectionPortalUrl=b.customDataCollection.portalUrl);b.isSiteAttribute&&(e.isSiteAttribute=!0,e.attribute=b.attribute,e.type=b.attribute.type,!g&&0<b.attribute.places&&(e.decimals=b.attribute.places));b.isDataLayerAttribute&&(e.isDataLayerAttribute=!0,e.layerID=b.layerID,e.layerUrl=b.layerUrl,e.layerName=b.layerName,e.attribute=b.attribute,e.type=b.attribute.type,!g&&0<b.attribute.decimals&&(e.decimals=b.attribute.decimals),"DISTANCE"===b.attribute.name&&(e.units=b.attribute.units||r||
"esriMiles"));e.usedFields=b.usedFields;e.expressionText=b.expressionText;t.name.provideQualifiedFieldInfoTemplateName(e,m);l(e);return e},fieldInfoToVariable:function(b){if(!b.hasVariable)return null;var d={id:b.variableID,fullName:b.fullName,fieldCategory:b.fieldCategory,vintage:b.vintage,type:b.type,precision:b.decimals,usedFields:b.usedFields,expressionText:b.expressionText};b.isWebMap&&(d.isWebMap=!0,d.fieldName=b.webMapFieldName,d.fieldInfo=b.webMapField,d.webMapId=b.webMapId,d.layerUrl=b.layerUrl);
b.isSiteAttribute&&(d.isSiteAttribute=!0,d.attribute=b.attribute);return d},createFieldInfoFromScript:function(b,d){var e=d&&d.format;d=d&&d.calculatorName;b=b||{};b.name=b.name||t.name.DEFAULT_SCRIPT_NAME;b.alias=b.alias||p.scriptNameDefault;b.decimals=Number(b.decimals)||0;var g={};g.name=t.name.createFieldNameFromScript(b);t.name.provideQualifiedFieldInfoTemplateName(g,d);g.script=b;e?t.format.setFieldInfoFormat(g,e):(g.decimals=Number(b.decimals),g.showCurrency=!1,g.showPercent=!1,g.useThousandsSeparator=
!0);l(g);return g},createFieldInfoFromImage:function(b,d){return{isImage:!0,imageJson:b,triggerJson:d}},createFieldInfoFromMap:function(b){return{isMap:!0,mapJson:b}},createFieldInfoFromShape:function(b){return{isShape:!0,shapeJson:b}},createFieldInfoFromChart:function(b){return{isChart:!0,chartJson:b}},createFieldInfoFromInfographic:function(b){return{isInfographic:!0,infographicJson:b}},createFieldInfoFromSection:function(b){return{isReportSection:!0,sectionJson:b}},createFieldInfoFromMissingVariable:function(b,
d){return{name:b&&b.substr(b.indexOf(".")+1),templateName:b,isMissing:!0,alias:d}},createFieldInfoForUnsupportedContent:function(){return{isUnsupportedContent:!0}}},f=/^\[\w+\]$/,c=/\[\w+\]/;k.createFieldInfoFromLabel=function(b,d){if("string"!==typeof b)return null;b=b.trim();var e=f.test(b);if(!d||e){if(!e)return null;b=b.replace(/\[|\]/g,"").toUpperCase();return k.createFieldInfoFromSpecialFieldName(t.fields.uiToTemplate(b))}return c.test(b)?t.richText.createFieldInfoFromRenderedXMLString(b):null};
k.createFieldInfoFromSpecialFieldName=function(b,d){if("string"!==typeof b)return null;b=t.fields.trimTemplateHeaderName(b);b=b.toUpperCase();if("GROUPCOUNT"===b)var e={name:t.fields.GROUPCOUNT_FIELD_NAME,alias:t.fields.GROUPCOUNT_FIELD_ALIAS,type:"esriFieldTypeInteger"};else"LOCATORSUMMARY"===b?(e={name:t.fields.LOCATORSUMMARY_FIELD_NAME,alias:t.fields.LOCATORSUMMARY_FIELD_ALIAS,type:"esriFieldTypeDouble",templateName:t.fields.LOCATORSUMMARY_FIELD_NAME},d&&Object.assign(e,t.format.processFieldInfoTagAttributes({m:"string"===
typeof d?d:t.format.buildFormatStringFromObject(d)}))):"CURRDATE"===b?e={name:t.fields.DATE_FIELD_NAME,alias:t.fields.DATE_FIELD_ALIAS,format:d||t.fields.DATE_FIELD_DEFAULT_FORMAT}:"SITENOTES"===b?e={name:t.fields.qualifyTemplateHeaderName(t.fields.SITENOTES_FIELD_NAME),alias:t.fields.SITENOTES_FIELD_ALIAS,type:"esriFieldTypeString"}:0===b.indexOf("SITENOTE")&&(e=t.fields.getSiteNoteFieldNameAt(b.replace("SITENOTE","")),e={name:t.fields.qualifyTemplateHeaderName(e),alias:e,type:"esriFieldTypeString"});
if(e)return e;var g=t.fields.templateToUIHeader(b);g?(e={name:t.fields.qualifyTemplateHeaderName(b),alias:g,type:"esriFieldTypeString"},t.fields.isChartAttribute(b)&&(e.isChartAttribute=!0),"CHART_POINT_VALUE"===b&&(e.type="esriFieldTypeDouble",e.decimals=0,e.useThousandsSeparator=!0,d&&t.format.setFieldInfoFormat(e,d))):(d=t.fields.templateToUIReportVar(b))&&(e={name:d,alias:d,type:"esriFieldTypeString"});e&&(e.templateName=e.name);return e};var a=/(\(%\)|: Percent)$/;k.isFieldInfoInPercentState=
function(b){return b?b.statefulName&&0===b.statefulName.indexOf("p/")||b.alias&&a.test(b.alias):!1};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/utils":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(t,p){var l={},k;l.init=function(){if(k)return k.promise;k=new t;p("./FieldInfoBuilder ./FieldInfoFormatUtil ./FieldInfoNameUtil ./FieldInfoRenderer ./RichTextJsonUtil ./FieldLibrary".split(" "),function(f,c,a,b,d,e){l.builder=
f;l.format=c;l.name=a;l.renderer=b;l.richText=d;l.fields=e;k.resolve()});return k.promise};l.init();return l})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes":function(){define([],function(){return{PAGE_HEADER:"PageHeader",DETAILS_HEADER:"DetailsHeader",DETAILS:"Details",GROUP:"Group",PAGE_FOOTER:"PageFooter",REPORT_FOOTER:"ReportFooter",DATA_SOURCE:"DataSource",EMPTY:"empty",INFOGRAPHIC_HEADER:"InfographicHeader",INFOGRAPHIC_VARIABLE:"InfographicVariable",INFOGRAPHIC_BACKGROUND:"InfographicBackground",
INFOGRAPHIC_FOREGROUND:"InfographicForeground",INFOGRAPHIC_ATTRIBUTES:"InfographicAttributes",INFOGRAPHIC_NOTES:"InfographicNotes",INFOGRAPHIC_SUMMARY:"InfographicSummary",INFOGRAPHIC_SUMMARY2:"InfographicSummary2",INFOGRAPHIC_SUMMARY_FOOTER:"InfographicSummaryFooter",TABLE_BACKGROUND:"TableBackground",TABLE_FOREGROUND:"TableForeground",TABLE_BACKGROUND_FLOATING_PANELS:"BackgroundFloatingPanels",TABLE_FOREGROUND_FLOATING_PANELS:"ForegroundFloatingPanels",TABLE_FLOATING_PANELS:"FloatingPanels"}})},
"esri/dijit/geoenrichment/utils/PortalUtil":function(){define("dojo/_base/lang esri/kernel esri/request ./requests/EveryRequest ./requests/UniversalClient ../ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil ./CacheUtil ./ProjectionUtil ./UrlUtil".split(" "),function(t,p,l,k,f,c,a,b,d){var e={query:function(g,h,m,r){h=h||{};m=m||"results";r=r||100;var n="number"===typeof h.num?h.num:-1,q=h.num=0>n||h.num>r?r:h.num;h.start=h.start||1;return g(h).then(function(u){var w=u[m],y=u.total-h.start+
1;0<=n&&y>n&&(y=n);y-=q;if(0>=y)return u;h.num=q;for(var C=[];0<y;)h.start+=q,C.push(g.bind(null,t.mixin({},h))),y-=q;return k(C,{stopOnError:!0}).then(function(D){D.forEach(function(G){Array.prototype.push.apply(w,G[m])});return u})})},queryCommon:function(g,h){return e.query(function(m){var r=p.id.findCredential(g)||p.id.credentials[0];return l({url:g,content:t.mixin({f:"json",token:r?r.token:void 0},h,m),handleAs:"json"},{usePost:!0})}).then(function(m){return m.results})},getPortalSelf:function(g){return f.requestPublicFirst(d.combine(g,
"sharing/rest/portals/self"),{})},getDefaultBasemaps:function(g){var h=a.get("PortalUtil.basemaps");h[g]||(h[g]=e.getPortalSelf(g).then(function(m){return f.request(d.combine(g,"sharing/rest/community/groups"),{content:{q:m.useVectorBasemaps?m.vectorBasemapGalleryGroupQuery:m.basemapGalleryGroupQuery,f:"json"},handleAs:"json"}).then(function(r){return(r=r.results[0])?f.request(d.combine(g,"sharing/rest/search"),{content:{q:"group:"+r.id+' AND type:"web map"',num:100,f:"json"},handleAs:"json"}).then(function(n){return n.results}):
null})}));return h[g]},tryConfigureServicesFromAGOLPublic:function(){return e.getPortalSelf("https://www.arcgis.com").then(function(g){if(g=g&&g.helperServices)g.geometry&&b.setGeometryServiceUrl(g.geometry.url),g.printTask&&c.setPrintMapTaskUrl(g.printTask.url)}).otherwise(function(g){console.log(g)})}};return e})},"esri/dijit/geoenrichment/utils/requests/EveryRequest":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p,l){var k=
t(null,{requests:null,results:null,requestCount:0,chunkSize:0,stopOnError:!1,onProgress:null,index:0,completeCount:0,executeCount:0,isExecuting:!1,dfd:null,constructor:function(f,c,a,b,d){this.requests=f;this.results=c;this.requestCount=this.requests.length;this.chunkSize=Math.max(a,0);this.stopOnError=b;this.onProgress=d},execute:function(){this.isExecuting=!0;for(this.dfd=new p;this.tryStartNextRequest(););return this.dfd.promise},tryStartNextRequest:function(){if(!this.isExecuting)return!1;if(this.index==
this.requestCount&&!this.executeCount)return this.isExecuting=!1,this.dfd.resolve(this.results),!1;if(this.index==this.requestCount||this.executeCount==this.chunkSize)return!1;var f=this.requests[this.index++];this.executeCount++;var c=f.request;"function"===typeof c&&(c=c());var a=this,b=!0;l(c,function(d){a.processResult(d,f.key,d instanceof Error,b)},function(d){a.processResult(d,f.key,!0,b)});b=!1;return!0},processResult:function(f,c,a,b){if(this.isExecuting)if(a&&this.stopOnError)this.isExecuting=
!1,this.onProgress&&this.onProgress(1),this.dfd.reject(f);else if(this.results[c]=f,this.completeCount++,this.executeCount--,this.onProgress&&this.onProgress(this.completeCount/this.requestCount),!b)for(;this.tryStartNextRequest(););}});return function(f,c){var a=!1,b=10,d=null;"boolean"===typeof c?a=c:c&&("number"===typeof c.chunkSize&&(b=c.chunkSize),"boolean"===typeof c.stopOnError&&(a=c.stopOnError),"function"===typeof c.onProgress&&(d=c.onProgress));var e=[];if(Array.isArray(f)){var g=[];f.forEach(function(m,
r){e.push({key:r,request:m})})}else for(var h in f)g={},e.push({key:h,request:f[h]});return(new k(e,g,b,a,d)).execute()}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/dom-style esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/ImageInfoUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e){function g(){var G=new l;t("esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/layers/GraphicsLayer ./DotDensityToImageUtil ./LegendToLayerUtil".split(" "),function(F,B,z,E,I,L){m=B;r=z;n=E;q=I;u=L;h=p(F,{returnJson:!1,mapName:null,_execute:function(){this.returnJson&&(this.printGp.submitJob=this.printGp.execute=function(M,O){M="data:application/json;base64,"+a.base64FromJson(M.Web_Map_as_JSON);O([{value:{url:M}}]);return(new l).resolve()});
return this.inherited(arguments)},_getPrintDefinition:function(M,O){var Q=this.inherited(arguments);this.returnJson&&this.mapName&&(Q.title=this.mapName);console.log(Q);return Q},_createOperationalLayers:function(M,O){var Q=this.inherited(arguments);if(O.__legendLayerId){var T=Q.filter(function(X){return X.id===O.__legendLayerId})[0];Q.splice(Q.indexOf(T),1);Q.push(T)}return Q},_createFeatureCollection:function(M,O,Q,T){var X=this.inherited(arguments);this.returnJson&&X&&("esri.layers.FeatureLayer"===
M.declaredClass||"esri.layers.StreamLayer"===M.declaredClass||"esri.layers.GraphicsLayer"===M.declaredClass)&&X.featureCollection.layers.forEach(function(U){U.layerDefinition.name=M.arcgisProps&&M.arcgisProps.title||M._titleForLegend||M.name||M.id;U.layerDefinition.name=d.decodeXML(U.layerDefinition.name);U.layerDefinition.objectIdField="OBJECTID";U.layerDefinition.fields=[{name:"OBJECTID",type:"esriFieldTypeOID"}];var aa={OBJECTID:1},Y=/[^\w]/g,ea;U.featureSet.features.forEach(function(K,V){K.attributes=
K.attributes||{};K.attributes.OBJECTID=V+1+"";K.attributes.__nameField||(K.attributes.Name=d.decodeXML(K.attributes.Name||U.layerDefinition.name),ea="Name");V=K.attributes.__fieldAliases;for(var N in K.attributes)if(0!==N.indexOf("__")){var P=N,S=K.attributes[N];"string"===typeof S&&(S=d.decodeXML(S));var ca=V&&V[N];(ca=ca&&ca.replace(Y,"_"))&&void 0===K.attributes[ca]&&(K.attributes[ca]=S,P=ca);K.attributes.__nameField===N&&(ea=P);aa[N]||(aa[N]=1,U.layerDefinition.fields.push({name:P,type:"string"===
typeof S?"esriFieldTypeString":"esriFieldTypeDouble"}))}});U.layerDefinition.displayField=ea});return X},_convertSvgSymbol:function(M){return M}});G.resolve()});return G.promise}var h,m,r,n,q,u,w,y={setPrintMapTaskUrl:function(G){w=G;e.registerCORS(G)},mapToURL:function(G,F,B,z){var E=y._getUrlForMap(G);if(E)return E;E=g().then(function(){return y._replaceDotDensityLayersWithPictureMarkers(G).then(function(I){return k(F&&u.legendToGraphicsLayer(F,G,B),function(L){L&&G.addLayer(L);return k(y._runPrintTask(G,
B,L,z),function(M){L&&G.removeLayer(L);y._rollbackReplacing(G,I);var O=new l;setTimeout(function(){O.resolve(M.url)},100);return O.promise})})})});y._putUrlToCache(G,E);return E},_replaceDotDensityLayersWithPictureMarkers:function(G){var F=[];for(i=0;i<G.graphicsLayerIds.length;i++)layer=G.getLayer(G.graphicsLayerIds[i]),layer.loaded&&layer.visible&&q.isDotDensity(layer)&&F.push(y._createGraphicsLayerFromDotDensityLayer(i,layer,G));return f(F)},_createGraphicsLayerFromDotDensityLayer:function(G,F,
B){return q.createPictureMarkersFromDotDensityLayer(F,B.extent,B).then(function(z){if(!z)return null;var E=new n;z.map(function(I){E.add(I)});B.addLayer(E,G);F.visible=!1;return{addedLayer:E,hiddenLayer:F}}).otherwise(function(z){console.log(z);return null})},_runPrintTask:function(G,F,B,z){function E(){var I=new h(w);I.returnJson=z&&z.replaceWithJson;I.mapName=z&&z.mapName;var L=new m;L.map=G;var M=new r;M.exportOptions={width:3.125*c.get(F,"width"),height:3.125*c.get(F,"height"),dpi:300};M.format=
"png32";M.showAttribution=!1;M.forceFeatureAttributes=!0;M.__legendLayerId=B&&B.id;L.template=M;return I.execute(L)}return k(E(),function(I){return I},function(I){console.log(I);return k(E(),function(L){return L},function(L){console.log(L);return E()})})},_rollbackReplacing:function(G,F){F.forEach(function(B){B&&B.addedLayer&&G.removeLayer(B.addedLayer);B&&B.hiddenLayer&&(B.hiddenLayer.visible=!0)})},urlToSrc:function(G,F){return F&&F.saveImagesAsDataUrl?b.getRemoteImageDataUrl(G,{sizeLimit:1500}):
G}},C,D=0;y.enableCaching=function(){C={}};y.clearCaching=function(){C=null};y._putUrlToCache=function(G,F){C&&F&&(G.__mapToImageUtilKey=D++,C[G.__mapToImageUtilKey]=F)};y._getUrlForMap=function(G){return C&&C[G.__mapToImageUtilKey]};return y})},"esri/dijit/geoenrichment/utils/ImageInfoUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/when","./CacheUtil","./ImageUtil","./UrlUtil"],function(t,p,l,k,f){var c=/^data:/i,a={getImageInfo:function(b,d,e){var g=e&&e.sizeLimit||1E5,h=l.get("ImageInfoUtil"),
m=b+(e&&e.crossOrigin||"");h[m]||(h[m]=k.imageFromUrl(b,e).then(function(r){var n=k.imageToDataURL(r),q={dataUrl:n,contentType:k.getContentType(n),width:r.width,height:r.height};setTimeout(function(){h[m]=q});return q}));return p(h[m],function(r){r=t.mixin({},r);d&&(r.filename=d&&d.replace(/\.\w+$/,".png").toLowerCase());return function(n){return p(a._processDataUrl(n,g),function(q){if(q&&q.dataUrl){var u=t.mixin({},n);u.dataUrl=q.dataUrl;u.width*=q.factor;u.height*=q.factor;return p(u)}return p(n)})}(r)})},
ensureDataUrlForRemoveImage:function(b,d){return!b||c.test(b)?b:a.getRemoteImageDataUrl(b,d)},getRemoteImageDataUrl:function(b,d){function e(r,n){return a.getImageInfo(r?m+"?"+b:b,null,{crossOrigin:n}).then(function(q){return p(a._processDataUrl(q,h),function(u){return u&&u.dataUrl||u})})}function g(){console.log("Failed to get data for URL: "+b);return b}if(!b)return b;var h=d&&d.sizeLimit||1E5,m=f.getProxyUrl();return e(!1,"anonymous").otherwise(function(){return e(!1,null)}).otherwise(function(){return m?
e(!0,"anonymous"):g()}).otherwise(function(){return e(!0,null)}).otherwise(g)},_processDataUrl:function(b,d){var e=Math.max(b.width,b.height);if(e<=d)return b.dataUrl;var g=d/e;return p(k.scaleImage(b.dataUrl,{factor:g}),function(h){return{dataUrl:h,factor:g}})}};return a})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./UrlUtil"],function(t,p,l){var k={base64DataToDataURL:function(f,c){if(/^data:image/.test(f))return f;
c||(c=atob(f.substr(0,16)),c=k.getImageContentType(c));return"data:"+(c||"image/png")+";base64,"+f},getImageContentType:function(f){if("\u00ff\u00d8\u00ff"===f.substr(0,3)&&"JFIF"===f.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===f.substr(0,8))return"image/png";if("GIF89a"===f.substr(0,6)||"GIF87a"===f.substr(0,6))return"image/gif"},base64DataFromDataURL:function(f){0==f.indexOf("data:")&&(f=f.substr(f.indexOf(",")+1));return f},getBase64DataIndex:function(f){f=0==f.indexOf("data:")?
f.indexOf(";base64,"):-1;return 0<f?f+8:0},getContentType:function(f){var c=k.getBase64DataIndex(f);return c?f.substring(5,c-8):null},checkBase64FileSize:function(f,c){return k.getBase64FileSize(f)<=c},getBase64FileSize:function(f){return.75*f.length},imageToDataURL:function(f,c){c=c||{};var a=document.createElement("canvas"),b=a.getContext("2d");a.width=c.width||f.width;a.height=c.height||f.height;var d=c.opacity;null!=d&&!isNaN(d)&&0<=d&&1>d&&(b.globalAlpha=+d,c.format="image/png");(d=c.pos)?b.drawImage(f,
d.x||0,d.y||0):b.drawImage(f,0,0,a.width,a.height);return a.toDataURL(c.format)},imageFromUrl:function(f,c){var a=new t,b=new Image;0!==f.indexOf("data:")&&c&&c.crossOrigin&&b.setAttribute("crossOrigin",c.crossOrigin);b.onload=function(){if(b.width&&b.height)a.resolve(b);else{var d=Error("Error of reading an image from URL.");c&&c.ignoreError?a.resolve(null):a.reject(d)}b.onload=b.onerror=null};b.onerror=function(d){c&&c.ignoreError?a.resolve(null):a.reject(d);b.onload=b.onerror=null};f=require.toUrl(f);
/^http:/i.test(f)&&/^https/i.test(window.location.protocol)&&(f=l.toHttpsUrl(f));b.src=f;return a.promise},scaleImage:function(f,c){if("string"===typeof f){var a=k.base64DataToDataURL(f),b=k.getContentType(a);a=k.imageFromUrl(a)}return p(a||f).then(function(d){var e=1,g=d.width,h=d.height;if(c.factor)e=c.factor;else if(c.maxDim)e=c.maxDim/Math.max(g,h);else if(c.imageDim){var m=c.imageDim.w,r=c.imageDim.h;c.imageDim.preserveRatio?(e=Math.min(m/g,r/h),c.imageDim.reduceOnly&&1<e&&(e=1)):c.imageDim.reduceOnly?
(g=Math.min(g,m),h=Math.min(h,r)):(g=m,h=r)}return k.imageToDataURL(d,{width:g*e,height:h*e,format:c.format||b,opacity:c.opacity})})},getImageViewType:function(f,c){return 1E3<=c?(f/=c,.025>=Math.abs(f-2)?"360":2<f?"pano":null):null}};return k})},"esri/dijit/geoenrichment/utils/ProjectionUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/SpatialReference esri/geometry/jsonUtils esri/dijit/geoenrichment/utils/CoordinateUtil esri/dijit/geoenrichment/utils/PolygonUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/requests/EveryRequest".split(" "),
function(t,p,l,k,f,c,a,b){function d(u){return u&&u.spatialReference||u instanceof p&&u||u&&new p(u)||new p(k.WEB_MERCATOR_WKID)}function e(u,w){var y=[];try{for(var C=0;C<u.length;C++)y.push(k.toSpatialReference(u[C],w))}catch(D){console.log(D)}return(new t).resolve(y)}function g(u,w){function y(E){F.push(function(){return h(G,E,D,w)})}var C=u[0],D=l.getJsonType(C),G={outSR:w.wkid||w.toJson(),inSR:C.spatialReference.wkid||C.spatialReference.toJson()},F=[],B=0,z=[];1==u.length?z.push(C):u.forEach(function(E){var I=
f.getNumberOfPoints(E);B+=I;if(1E4<B){var L=[];z.length?(L.push(E),B=I):(z.push(E),B=0);y(z);z=L}else z.push(E)});z.length&&y(z);return b(F,{stopOnError:!0}).then(function(E){for(var I=E[0],L=1;L<E.length;L++)I=I.concat(E[L]);return I},function(E){console.log(E);return[]})}function h(u,w,y,C){u.geometries=m(w);return q("project",u).then(function(D){return r(D.geometries,y,C)})}function m(u){var w=u.map(function(y){y=y.toJson();delete y.spatialReference;return y});return{geometryType:l.getJsonType(u[0]),
geometries:w}}function r(u,w,y){var C=l.getGeometryType(w),D=y.toJson();return u.map(function(G){G.spatialReference=D;return new C(G)})}var n={},q;n.setGeometryServiceUrl=function(u){c.registerCORS(u);q=function(w,y){return a.requestPublicFirst({url:u,urlSuffix:w},{content:y})}};n.setGeometryRequest=function(u){q=u};n.getSpatialReference=d;n.projectGeometries=function(u,w){var y=d(w);w=Array.isArray(u)?u:[u];if(!w.length)return(new t).resolve(u);var C={},D=w.slice(),G=0;w=w.filter(function(F,B){if(F.spatialReference&&
F.spatialReference.wkid!==y.wkid)return C[B]=G++,!0});return w.length?(k.testSpatialReferenceWKID(y)&&k.testSpatialReferenceWKID(w[0].spatialReference)?e(w,y):g(w,y)).then(function(F){D.forEach(function(B,z){void 0!==C[z]&&(D[z]=F[C[z]])});return Array.isArray(u)?D:D[0]}):(new t).resolve(u)};n.unionGeometries=function(u){var w=d(u[0].spatialReference);u={sr:w.wkid||w.toJson(),geometries:m(u)};return q("union",u).then(function(y){return r([y.geometry],y.geometryType,w)[0]})};n.geometriesToJson=m;n.geometriesFromJson=
r;return n})},"esri/dijit/geoenrichment/utils/PolygonUtil":function(){define([],function(){var t={getNumberOfPoints:function(p){if(!p)return 0;Array.isArray(p)||(p=[p]);var l=0;p.forEach(function(k){l+=t.getGeometryPointCount(k.geometry||k)});return l},getGeometryPointCount:function(p){if(!p)return 0;var l=0,k=p.rings||p.paths;!k&&p.points&&(k=[p.points]);k?k.forEach(function(f){l+=f&&f.length||0}):l+="x"in p?1:2;return l}};return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport":function(){define("dojo/_base/declare esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/ImageUtil ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AreasPreprocessor ./supportClasses/GEUtil ../core/supportClasses/ReportTemplateTypes ../core/conversion/PortalToEditorConverter ../core/supportClasses/map/WebMapJsonUtil ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ./supportClasses/attachments/AttachmentsStoreSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder ../countryConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w){return t(null,{reportDataToServerData:function(y){return null},reportDataFromServerData:function(y,C){function D(Q){F.some(function(T){return"metadata.xml"===T.name})||F.push({name:"metadata.xml",data:u.recoverMetadataFromAreaData(M.areaData,Q)})}function G(Q){y.sites=[];var T={},X=1;M.areaData.forEach(function(U){U=U.headers&&U.headers.data||{};var aa=U.SITE_NAME||U.STORE_NAME,Y=U.STORE_ID||"unclassified."+X++;"number"!==typeof T[Y]&&(T[Y]=y.sites.length,
y.sites.push({locationName:aa,name:null,shortName:null,description:null,address:U.STORE_ADDR,latitude:U.STORE_LAT,longitude:U.STORE_LONG,areas:[]}));y.sites[T[Y]].areas.push({locationName:aa,name:U.AREA_DESC?aa+" ("+U.AREA_DESC+")":aa,shortName:U.AREA_DESC,description:U.AREA_DESC2,address:U.STORE_ADDR,latitude:U.STORE_LAT,longitude:U.STORE_LONG,feature:{attributes:{STORE_ID:U.STORE_ID,AREA_ID:U.AREA_ID}}})});y.sites.forEach(function(U){var aa=!1;U.shortName=U.areas.map(function(ea){return aa=!!ea.shortName,
ea.shortName}).join(", ");aa&&(U.name=U.locationName+" ("+U.shortName+")");var Y=U.areas.map(function(ea){return ea.description});U.description=1<Y.length?Y[0]===Y[1]?Y[0]:Y.join(", "):Y[0]||""});M.reportInfo.areaIdToAttachmentsInfo&&y.sites.forEach(function(U){U.areas.forEach(function(aa){if(aa=M.reportInfo.areaIdToAttachmentsInfo[aa.feature.attributes.AREA_ID])U.attributes=U.attributes&&U.attributes.length?U.attributes:aa.attributes,U.notes=U.notes&&U.notes.length?U.notes:aa.notes,U.images&&U.images.length||
!aa.images||(U.images=aa.images,U.images.forEach(function(Y){function ea(K){return(K=Q[K])&&l.base64DataToDataURL(K,"image/png")}Y.url=ea(Y.url);Y.thumbnail=ea(Y.thumbnail)}))})})}w.reset();var F=y.reportItem.resources,B;if(!Array.isArray(F)){var z=F;F=[];for(var E in z)F.push({name:E,data:z[E]})}F.forEach(function(Q){"theme.css"===Q.name&&(Q.name="theme.css.txt")});var I=F.filter(function(Q){return"report.xml"===Q.name})[0],L=F.filter(function(Q){return"data.xml"===Q.name})[0],M;(function(){var Q=
/.*\.(png|jpg|jpeg)$/i,T=/(.*\.(json)$)|(^maps\/.*\.(png)$)/i,X={},U={};F.forEach(function(K){Q.test(K.name)&&(X[K.name]=K.data,"logo.png"===K.name&&(B=l.base64DataToDataURL(K.data,"image/png")));T.test(K.name)&&(-1!==K.data.indexOf("operationalLayers")?U[K.name]=h.processWebMapJson(K.name,K.data):U[K.name]=K.data)});var aa={},Y=I.data.match(/<section[^<>]*query=("|').+?("|').*?>/g);Y&&Y.forEach(function(K){K=K.replace(/.*?query=("|')/,"");K=K.replace(/("|').*/,"");aa[K]=1});var ea={};M=f.parse(L.data,
function(K,V,N){return(K=U[V])?ea[N]=K:X[V]||V});D({map:ea,locator:aa});G(X)})();var O=new q;return p(function(Q){var T=I.data.indexOf("\x3csection"),X={isGraphicReport:I.data.indexOf("\x3ctable")<T,isMultiFeature:!1,type:e.STANDARD,portalJson:{files:F}};return p(g.provideEditorJson(X,{variableProvider:Q}),function(){X.templateJson=n.deserialize(X.templateJson);X.isMultiFeature=m.hasMultiFeatureSections(X.templateJson);delete X.portalJson;return X})}(O),function(Q){c.parseSites(y);var T=a.areasFromJson(y.analysisAreas),
X=y.combinedAreasInfo&&a.combinedAreasInfoFromJson(y.combinedAreasInfo)||{},U=y.attachmentsProvider&&r.getAttachmentsStoreFromJson(y.attachmentsProvider),aa={isMultiFeature:Q.isMultiFeature&&1<T.length,reportTitle:null,templateJson:Q.templateJson,reportObject:Q,fieldData:{specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],reportInfo:null},analysisAreas:T,combinedAreasInfo:X,reverseAnalysisAreasOnMap:!0,attachmentsStore:U,templateVariableProvider:O,customLogo:B,
config:{}};c.populateCombinedAreasInfo(aa.combinedAreasInfo,aa.analysisAreas);b.provideAreasIndexes(aa);d.setGeoenrichmentUrl(null);C&&C.forEach(function(Y){switch(Y){case "Maps":d.addCapability("FormatInfographicsMaps");break;case "ImageUrls":d.addCapability("FormatInfographicsImageUrls")}});return p(k.applyRunReportAndGetDataResults(M,aa)).then(function(){return aa})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportDataProcessor":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred ./tasks/EnrichAreasTask ./tasks/RunReportTask ./data/AreaCalculatorsUtil ./data/VariablesUtil ./CustomReportsManager ./stdGeographies/StdGeographiesModel esri/dijit/geoenrichment/utils/DateUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ../../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../../core/infographics/utils/InfographicJsonUtil ../../config ../../countryConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u){return{runReportAndGetData:function(w,y){return p([b.getCustomReportByID(w),y]).then(function(C){var D=C[0];C=C[1];return(new f).execute({portalUrl:w.portalUrl,analysisAreas:w.analysisAreas,countryID:w.countryID,hierarchy:w.hierarchy,report:{reportID:D.reportID,portalUrl:D.templateData.getPortalUrl(!0),modified:D.modified,isMultiFeature:D.isMultiFeature},attachmentsStore:C,cacheResult:q.runReportTask.cacheResult}).then(function(G){return{taskIDs:G.taskIDs,
areaData:G.areaData,reportInfo:G.reportInfo}},function(G){w.fieldData.errors.push(G);return(new l).reject(G)})})},runReportFromVariables:function(w){var y={};w.variables.fullNames.forEach(function(C){var D=h.createFieldNameFromSource(C);y[C.substr(C.indexOf(".")+1)]=D});return(new k).enrichAreas({portalUrl:w.portalUrl,analysisAreas:w.analysisAreas,countryID:w.countryID,hierarchy:w.hierarchy,fields:a.convertForEnrich(w.variables),comparisonLevels:w.comparisonLevels||n.getDefaultLevels()}).then(function(C){var D=
w.analysisAreas.map(function(){return{}});c.addEnrichFeatures(C,y,h.DATA_COLLECTIONS_CALCULATOR_NAME,D);return{areaData:D}},function(C){w.fieldData.errors.push(C);return(new l).reject(C)})},applyRunReportAndGetDataResults:function(w,y){if(w&&w.areaData){var C=y.templateJson;y.fieldData.specialTradeAreaCalculatorName=C.metadata&&C.metadata.specialTradeAreaCalculatorName;delete C.metadata;y.fieldData.runReportTaskIDs=w.taskIDs;y.fieldData.areaData=w.areaData;(y.fieldData.reportInfo=w.reportInfo)&&this._populateReportDataFromReportInfo(w.reportInfo,
y);this._reportDataFromAreas(y.analysisAreas,y.fieldData.areaData);this._reportDataFromReport(y.reportObject,y.fieldData,y.combinedAreasInfo);return this._populateReportDataFromAttachmentsStore(y)}},_populateReportDataFromReportInfo:function(w,y){y.reportTitle=y.reportObject.title=y.reportTitle||w.Title||w.Name||"";y.fieldData.metadata.Name=w.Name||y.reportTitle;w.country&&!u.getCurrentCountry()&&(u.setCountry(w.country),u.setHierarchyID(null));w.stdLevels&&!u.getGeographiesModel()&&u.setGeographiesModel(new d({levels:w.stdLevels}));
if(q.updateVariableInfoFromDataXml||q.isPlayerOnServer){var C=w.variables;m.processTemplateFieldInfos(y.templateJson,function(D){if(D.hasVariable&&D.variableID&&D.templateName){var G=D.templateName.indexOf("."),F=D.templateName.substr(0,G);G=D.templateName.substr(G+1);(F=C[F]&&C[F][G])&&F.alias&&(D.alias=F.alias,D=y.templateVariableProvider.get(D.templateName))&&(D.alias=F.alias,F.vintage&&(D.vintage=F.vintage),F.source&&(D.source=F.source))}})}w=r.collectVariablesStats(y.templateJson);w=y.templateVariableProvider.getVariablesDataVintageAndSources({usedVariablesCache:w});
y.reportObject.dataVintageDescription=w.dataVintageDescription||y.reportObject.dataVintageDescription;y.reportObject.dataSources=w.dataSources||y.reportObject.dataSources;y.reportObject.dataVintage=w.dataVintage||y.reportObject.dataVintage},_populateReportDataFromAttachmentsStore:function(w){var y=w.attachmentsStore,C=[];w.analysisAreas.forEach(function(D,G){y.supportsMultipleAreas&&y.setCurrentAnalysisAreaIndex(G);C.push(t(y.getNotes(),function(F){if(F&&F.length){var B={attributes:{}};B.attributes[g.SITENOTES_FIELD_NAME]=
F.map(function(z){return z.text}).join("\x3cbr/\x3e\x3cbr/\x3e");F.forEach(function(z,E){B.attributes[g.getSiteNoteFieldNameAt(E+1)]=z.text});(F=w.fieldData.areaData[G])&&c.addFeatureAttributesCalculator(B,F)}}));C.push(t(y.getAttributes(),function(F){if(!F||!F.length)return null;var B={attributes:{}};F.forEach(function(z){B.attributes[z.name]=z});(F=w.fieldData.areaData[G])&&c.addFeatureAttributesCalculator(B,F)}))});return p(C)},_reportDataFromAreas:function(w,y){w.forEach(function(C,D){if(D=y[D])c.addFeatureAttributesCalculator(C.feature,
D),c.addAreaInfoCalculator(C,D)})},_reportDataFromReport:function(w,y,C){var D=y.metadata;w&&!D.Title&&(D.Title=w.title);D.Subtitle=y.reportInfo&&y.reportInfo.Subtitle||"";D.Source=D.Source||w.dataVintageDescription||"Esri";D.DataSources=D.DataSources||w.dataSources||"Esri";D.DataVintage=D.DataVintage||w.dataVintage||"";D.Date=e.getReportFooterDate();D.Copyright="\u00a9 "+e.getFullYear()+" Esri";D.ProductLabel="";D.ProductUrl="";D.PhoneNumber="";D.TrialUrlText="";w.isMultiFeature&&(D.SITE_NAME=C.locationName||
C.name,D.STORE_NAME=C.locationName||C.name,D.AREA_DESC2=C.description||C.name,D.STORE_ADDR=C.address)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/EnrichAreasTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/kernel esri/SpatialReference esri/tasks/FeatureSet esri/geometry/Point ../GEUtil ../areas/AnalysisAreaUtil ../attachments/AttributesUtil ../../../core/supportClasses/map/Projector ../../../countryConfig esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r){function n(q){return(q=q&&f.id.findCredential(q)||f.id.credentials[0])&&q.token}return t(null,{enrichAreas:function(q){var u={};return l(this._analysisAreasToStudyAreas(q.analysisAreas,q.countryID,q.comparisonLevels),function(w){u.studyAreas=w;q.report?u.analysisVariables=[{itemid:q.report.reportID,url:q.report.portalUrl,token:n(q.portalUrl),outFields:["*"]}]:q.fields&&(u.analysisVariables=q.fields);return this._doRunTask(u,q,"enrich")}.bind(this)).then(this._handleFeatureSetsRequest.bind(this))},
createReport:function(q){var u={f:"bin",format:"xml",reportfields:{}};u.report={itemid:q.report.reportID,url:q.report.portalUrl,token:n(q.portalUrl)};return l(this._analysisAreasToStudyAreas(q.analysisAreas,q.countryID,null,q.getAttributes),function(w){u.studyAreas=w;return this._doRunTask(u,q,"createReport")}.bind(this))},_analysisAreasToStudyAreas:function(q,u,w,y){var C=this;w=w&&w.map(function(D){return{layer:D}});return k(q.map(function(D,G){if(D.geographies&&D.geographies.length){var F=C._studyAreaFromGeographies(D.geographies,
u,!0);D.feature&&D.feature.attributes&&(F.attributes=p.mixin({},F.attributes,D.feature.attributes))}else F={attributes:p.mixin({},D.feature.attributes),geometry:D.feature.geometry.toJson()};w&&(F.comparisonLevels=w);return k([C._getStorePointForArea(D),y&&y(D)]).then(function(B){var z=B[0];B=B[1];F.attributes=F.attributes||{};z&&(F.attributes.STORE_LAT=F.attributes.STORE_LAT||z.STORE_LAT,F.attributes.STORE_LONG=F.attributes.STORE_LONG||z.STORE_LONG);F.attributes.STORE_ID=G+"";B&&B.forEach(function(E){F.attributes[E.name]=
g.formatAttributeValueForStudyArea(E)});return F})}))},_getStorePointForArea:function(q){if(q=q.location&&q.location.geometry||q.buffer&&q.buffer.point){q=q instanceof b?q:new b(q);var u=e.geometryToLatLong(q);return u?u:l(h.projectGeometries(q,new c(r.WGS_84_WKID)),function(w){return e.geometryToLatLong(w)})}},createFeatureForGeographies:function(q,u){return this._createFeaturesForGeographies(q,u,!0).then(function(w){return w[0]})},createFeaturesForGeographies:function(q,u){return this._createFeaturesForGeographies(q,
u,!1)},_createFeaturesForGeographies:function(q,u,w){q={returnGeometry:!0,outSR:u.outSR||new c(r.WEB_MERCATOR_WKID),studyAreas:w?[this._studyAreaFromGeographies(q,u.countryID,!0,u.generalizationLevel)]:q.map(function(y){return this._studyAreaFromGeographies([y],u.countryID,!1,u.generalizationLevel)},this),dataCollections:["GlobalIntersect"]};return this._doRunTask(q,u,"enrich").then(this._handleFeatureSetsRequest.bind(this))},_studyAreaFromGeographies:function(q,u,w,y){var C={sourceCountry:u,layer:null,
ids:null},D=null,G=[],F;q.forEach(function(B){if(!B||!B.id)throw Error("Wrong geography.");var z=B.levelId;if(z)if(!D)D=z;else if(w&&D!==z)throw Error("Geographies have different level IDs.");G.push(B.id);B.sourceCountry&&(C.sourceCountry=B.sourceCountry);B.hierarchy&&(C.hierarchy=B.hierarchy);B.attributes&&(F=p.mixin(F||{},B.attributes))});C.layer=D;C.ids=w?[G.join(",")]:G;C.attributes=F;C.generalizationlevel=y;return C},createFeaturesForBuffer:function(q,u){u=u||{};var w={bufferUnits:q.units,bufferRadii:q.radii||
[q.radius],areaType:q.areaType||"RingBuffer"};"NetworkServiceArea"===w.areaType&&(w.travelMode=q.travelMode,w.networkOptions=q.networkOptions);q=q.point||q.polyline;w={returnGeometry:!0,outSR:u.outSR||q.spatialReference||new c(r.WEB_MERCATOR_WKID),dataCollections:["GlobalIntersect"],studyAreasOptions:w,studyAreas:[{geometry:q.toJson?q.toJson():q}]};return this._doRunTask(w,u,"enrich").then(this._handleFeatureSetsRequest.bind(this))},createFeaturesForBuffers:function(q,u){function w(D){var G=D.point||
D.polyline;return JSON.stringify(G.toJson?G.toJson():G)+";"+D.units+";"+D.areaType+";"+D.travelMode+";"+JSON.stringify(D.networkOptions)}var y={},C=[];q.forEach(function(D){var G=w(D),F=y[G],B=!1;if(F){var z=D.radii||[D.radius];F.radii.some(function(E){return-1!==z.indexOf(E)})&&(F=null,B=!0)}F||(F=p.clone(D),B||(y[G]=F),delete F.radius,F.radii=[],C.push(F));D.radii?F.radii=F.radii.concat(D.radii):F.radii.push(D.radius)});return k(C.map(function(D){return this.createFeaturesForBuffer(D,u)},this)).then(function(D){var G=
[];D.forEach(function(F){G=G.concat(F)});return G})},_doRunTask:function(q,u,w){q=p.mixin({useData:{sourceCountry:u.countryID,hierarchy:u.hierarchy||m.getHierarchyID()},forStorage:!1},q);return d[w](q)},_handleFeatureSetsRequest:function(q){return(new a(q[0])).features}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil":function(){define(["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],
function(t,p,l,k){var f={composeAttributesFromFieldInfos:function(c,a){return c&&c.filter(function(b){return b.visible}).map(function(b){var d=b.fieldName,e=b.label,g=b.format&&b.format.places,h=b.format&&b.format.digitSeparator,m=b.format&&b.format.dateFormat,r=a[b.fieldName];b=(b=b.format)&&b.dateFormat?"esriFieldTypeDate":b&&void 0!==b.places?0<b.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:d,alias:e,places:g,digitSeparator:h,dateFormat:m,value:r,type:b,
domain:null,length:void 0}})},formatAttributeValue:function(c,a){a=a||{};var b=a.hasOwnProperty("unavailableDataValue")?a.unavailableDataValue:"";if(!c||null===c.value||void 0===c.value)return b;if(!a.skipFormattedValue&&c.formattedValue&&c.formattedValue!==b)return c.formattedValue;var d=c.domain&&"codedValue"===c.domain.type?new p(c.domain):null;d?(a=d.getName(c.value))||(a=c.value+""):"esriFieldTypeString"===c.type?a=c.value:"esriFieldTypeDate"===c.type?a=l.formatDateShort(c.value):(a=a.format,
a=k.formatNumber(c.value,{places:a&&void 0!==a.decimals?a.decimals:c.places,noSeparator:a&&void 0!==a.useThousandsSeparator?!a.useThousandsSeparator:!1===c.digitSeparator,preserveTrailingZeroes:!0}));return null===a||void 0===a?b:a},formatAttributeValueForStudyArea:function(c){var a;c&&null!==c.value&&void 0!==c.value||(a=!0);a||(a=c.domain&&"codedValue"===c.domain.type||"esriFieldTypeDate"===c.type);return a?f.formatAttributeValue(c):c.value},getAttributeTypeForStudyArea:function(c){return"esriFieldTypeDate"===
c.type?"esriFieldTypeString":c.type},attributeToJson:function(c){return{name:c.name,alias:c.alias,type:c.type,value:c.value,domain:c.domain&&(c.domain.toJson?c.domain.toJson():t.clone(c.domain)),places:c.places,digitSeparator:c.digitSeparator,dateFormat:c.dateFormat,length:c.length}},attributeFromJson:function(c){return{name:c.name,alias:c.alias,type:c.type,value:c.value,domain:c.domain,places:c.places,digitSeparator:c.digitSeparator,dateFormat:c.dateFormat,length:c.length}}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/Projector":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/ProjectionUtil"],function(t,p,l,k,f){function c(a,b){return f.projectGeometries(a,b)}t=t(null,{_pendingInfos:null,_isBusy:!1,constructor:function(){this._pendingInfos=[]},addForProjection:function(a,b){if(this._isBusy)throw Error("Can't interrupt the current projection process.");a=a&&a.geometry||a;var d=new p;this._pendingInfos.push({geom:a,mapOrSR:b,dfd:d,index:this._pendingInfos.length});
return d.promise},project:function(){function a(r){var n=e[r];return l(c(n.geoms,n.mapOrSR),function(q){q.forEach(function(u,w){w=n.indexMap[w];h[w]=u;d[w].resolve(u)})})}var b=this;if(this._isBusy)throw Error("Can't interrupt the current projection process.");this._isBusy=!0;var d=[],e={};this._pendingInfos.forEach(function(r){d.push(r.dfd);var n=r.geom.type+";"+r.geom.spatialReference.wkid+";"+f.getSpatialReference(r.mapOrSR).wkid;n=e[n]=e[n]||{geoms:[],indexMap:{},mapOrSR:r.mapOrSR};n.geoms.push(r.geom);
n.indexMap[n.geoms.length-1]=r.index});this._pendingInfos.length=0;var g=[],h=[],m;for(m in e)g.push(a(m));return k(g).then(function(){b._isBusy=!1;return h})}});t.needProject=function(a,b){a=a&&a.geometry||a;return a.spatialReference&&a.spatialReference.wkid!==f.getSpatialReference(b).wkid};t.projectGeometries=c;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/RunReportTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./parsers/DataXMLParser ./EnrichAreasTask ../areas/AnalysisAreaJsonUtil esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h){var m={_getCache:function(){return e.get("CreateReportResultCache")},_buildKey:function(n){return[n.countryID,n.hierarchy,JSON.stringify(b.areasToJson(n.analysisAreas,{excludeInfoTemplate:!0})),n.report.reportID,n.report.portalUrl,n.report.modified].join("_")},getCopy:function(n){n=this._buildKey(n);return(n=this._getCache()[n])&&p.clone(n)},copyAndPut:function(n,q){n=this._buildKey(n);this._getCache()[n]=q&&p.clone(q)},getResults:function(){var n=[],q;for(q in this._getCache())n.push(this._getCache()[q]);
return n}},r={execute:function(n){var q=n.cacheResult&&m.getCopy(n);if(q)return f(q);q=d.splitArrayToBunches(n.analysisAreas,10);var u;return l(q.map(function(w){function y(){var C=p.mixin({},n,{analysisAreas:w});C.getAttributes=function(D){if(!n.attachmentsStore)return null;if(!n.attachmentsStore.supportsMultipleAreas&&u)return u;n.attachmentsStore.supportsMultipleAreas&&n.attachmentsStore.setCurrentAnalysisAreaIndex(n.analysisAreas.indexOf(D));return f(n.attachmentsStore.getAttributes(),function(G){u=
u||G;return G})};return(new a).createReport(C).then(function(D){var G=D&&D.taskID;D=D&&D.result;try{h.emulateErrors.createReportError&&(D={error:{message:"Error test: something crashed on the server!"}});if(D&&"object"===typeof D)var F=D.error;if(!F&&"string"===typeof D&&-1!==D.indexOf("{"))try{var B=JSON.parse(D);F=B&&B.error}catch(E){}if(F)if(g.runReportTask.ignoreErrors)D=[];else return(new k).reject(F);var z=c.parse(D);return{taskID:G,areaData:z.areaData,reportInfo:z.reportInfo,originalXML:D,
error:F}}catch(E){return(new k).reject(E)}})}return f(y(),function(C){return!C||C.error?g.runReportTask.secondAttempt?y():C:C},function(C){return g.runReportTask.secondAttempt?y():(new k).reject(C)})})).then(function(w){var y={taskIDs:[],areaData:[],reportInfo:null,originalXMLs:[],errors:[]};w.forEach(function(C){y.taskIDs.push(C.taskID);y.originalXMLs.push(C.originalXML);C.error&&y.errors.push(C.error);y.areaData=y.areaData.concat(C.areaData);y.reportInfo=C.reportInfo});n.cacheResult&&!y.errors.length&&
m.copyAndPut(n,y);return y})}};t=t(null,{execute:function(n){console.log("Creating a new report...");return r.execute(n)}});t.CreateReportResultCache=m;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/DataXMLParser":function(){define("esri/units esri/dijit/geoenrichment/utils/FieldUtil esri/dijit/geoenrichment/utils/JsonXmlConverter ../../data/AreaDataUtil ../../../../core/supportClasses/DocumentOptions ./AttrUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,p,l,k,f,c,a,b){function d(r){return r.innerHTML?r.innerHTML:r.tags&&r.tags.length&&r.tags[0].text||""}function e(r){var n={Title:null,Subtitle:null,country:null,hierarchyId:null,exportSettings:null};r.tags&&r.tags.forEach(function(q){if("ReportTitle"===q.name)n.Title=d(q);else if("ReportName"===q.name)n.Name=d(q);else if("ReportTitle2"===q.name)n.Subtitle=d(q);else if("CurrencyFormat"===q.name){q=d(q);var u=q.split(";")[0].replace("0","").trim();n.country={id:null,currencySymbol:u,currencyFormat:q}}else if("ReportLayout"===
q.name){var w=n.exportSettings={};q.tags&&q.tags.forEach(function(y){if("Options"===y.name&&y.attributes)w.addHeader=!!y.attributes.header,w.addDataSource=!!y.attributes.dataSource,w.addFooter=!!y.attributes.footer;else if("Page"===y.name&&y.attributes){w.pageSettings={};var C=y.attributes;if(C.width&&C.height&&C.units){y=Number(C.width);var D=Number(C.height);if(C=C.units===t.MILLIMETERS?"mm":C.units===t.CENTIMETERS?"cm":C.units===t.INCHES?"in":C.units===t.POINTS?"pt":null)w.pageSettings.pagesize=
f.combineCustomSizeString(y,D,C)}else C.size&&C.orientation&&(w.pageSettings.pagesize=C.size.toLowerCase(),w.pageSettings.orientation=C.orientation.toLowerCase())}})}});n.exportSettings&&n.Subtitle&&(n.exportSettings.reportSubtitle=n.Subtitle);return n}function g(r){function n(w){w.tags&&w.tags.forEach(function(y){var C=y.attributes.AREA_ID,D=u.areaIdToAttachmentsInfo[C];D||(D={attributes:null,notes:null,images:null},u.areaIdToAttachmentsInfo[C]=D);y.tags&&y.tags.forEach(function(G){"Attributes"===
G.name&&G.tags&&(D.attributes=G.tags.map(function(F){return{name:F.attributes.Name,alias:F.attributes.Alias,type:F.attributes.Type,value:p.isNumericField(F.attributes.Type)?Number(F.attributes.Value):F.attributes.Value}}));"Notes"===G.name&&G.tags&&(D.notes=G.tags&&G.tags.map(function(F){return{text:F.attributes.Text}}));"Images"===G.name&&G.tags&&(D.images=G.tags&&G.tags.map(function(F){return{url:F.attributes.Source,thumbnail:F.attributes.Thumbnail,description:F.attributes.Description,imageViewType:null}}))})})}
function q(w){var y;u.stdLevels=w.tags&&w.tags.map(function(C,D){y=y||C.attributes.Id.substr(0,C.attributes.Id.indexOf("."));return{id:C.attributes.Id,name:C.attributes.Caption,isWholeCountry:C.attributes.IsWholeCountry||0===D}});"US"===y&&(u.countrId="US");"CAN"===y&&(u.countrId="CA")}var u={areaIdToAttachmentsInfo:{},stdLevels:null,countrId:null};r.tags&&r.tags.forEach(function(w){"StudyAreas"===w.name?n(w):"StandardGeographyLevels"===w.name&&q(w)});return u}function h(r,n){function q(D){if(D=function(F){var B=
{},z,E;F.tags.forEach(function(M){var O=d(M),Q=O,T=C[F.name][M.name];"string"===(T&&T.type)?O=String(O):(O=Number(O),isNaN(O)&&(O=Q),b.emulateErrors.createReportNaN&&(O=NaN),b.emulateErrors.createReportNull&&(O=null));n&&(O=n(M.name,O,F.name));void 0===B[M.name]&&(B[M.name]=O);"AREA_ID"===M.name&&(I=O);"IDFNDFIELD"===M.name&&(z=O);"STORE_ID"===M.name&&(E=O)});var I=I||z;if(!I&&!E)return null;var L;!I&&E&&(L=Number(E));I&&void 0===w[I]&&(w[I]=y++);c.cleanUpAttrs(B,a.isPlayerOnServer?{STORE_ID:1,AREA_ID:1}:
null);return{name:F.name,attrs:B,areaIndex:void 0!==L?L:w[I]}}(D)){var G=u[D.areaIndex]=u[D.areaIndex]||{};G[D.name]?G[D.name].comparisonLevels.push(D.attrs):G[D.name]=k.createCalculator(D.attrs)}}var u=[],w={},y=0,C;r.tags[0].tags.forEach(function(D){"xs:schema"===D.name?C=m.parseSchema(D):q(D)});return{areaData:u,schemaParseResult:C}}var m={parseSchema:function(r){var n={};r.tags.forEach(function(q){"xs:element"===q.name&&q.attributes&&"ReportData"===q.attributes.name&&l.queryJson(q,"xs:element").filter(function(u){return!!u.tags}).forEach(function(u){var w=
n[u.attributes.name]={};l.queryJson(u,"xs:element").forEach(function(y){w[y.attributes.name]={type:"xs:string"===y.attributes.type?"string":"number",alias:y.attributes["msdata:Caption"]||"",vintage:y.attributes["msdata:Vintage"]||"",source:y.attributes["msdata:Source"]||""}})})});return n}};return{parse:function(r,n){return this._parseDataXmlJson(l.parseXml(r,{saveInnerHTML:!0}),n)},_parseDataXmlJson:function(r,n){if(!r||!r.tags||2>r.tags.length)return[];var q,u,w,y;r.tags.forEach(function(C){"ReportInfo"===
C.name?q=e(C):"ReportArea"===C.name?u=g(C):"ReportData"===C.name&&(C=h(C,n),y=C.areaData,w=C.schemaParseResult)});b.logData&&(console.log("DataXMLPareser.js \x3d\x3e areaData:"),console.log(y));u&&(q.country.id=u.countrId,q.areaIdToAttachmentsInfo=u.areaIdToAttachmentsInfo,q.stdLevels=u.stdLevels);q.variables=w;return{reportInfo:q,areaData:y}}}})},"esri/dijit/geoenrichment/utils/JsonXmlConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(t,p){function l(d,e,g,h){return b(g,
h)+"\x3c"+d+(e?a(e):"")+"\x3e"+(h?"\n":"")}function k(d,e,g){return b(e,g)+"\x3c/"+d+"\x3e"+(g?"\n":"")}function f(d,e,g,h){return b(g,h)+"\x3c"+d+(e?a(e):"")+" /\x3e"+(h?"\n":"")}function c(d,e,g){d=p.encodeXML(d,!1);return b(e,g)+d+(g?"\n":"")}function a(d){var e="",g;for(g in d){var h=d[g];Array.isArray(h)&&(h=h.join(";"));void 0===h||null===h||"number"===typeof h&&isNaN(h)||(e+=" "+g+'\x3d"'+p.encodeXML(h,!0)+'"')}return e}function b(d,e){if(!e)return"";e="";for(var g=0;g<d;g++)e+="     ";return e}
return t(null,{parseJson:function(d,e){function g(r,n){r.text||"#text"===r.name?m+=c(r.text,n,h):r.name&&(r.tags&&r.tags.length?(m+=l(r.name,r.attributes,n,h),r.tags&&r.tags.forEach(function(q){g(q,n+1)}),m+=k(r.name,n,h)):m+=f(r.name,r.attributes,n,h))}var h=e&&e.prettify,m="";e&&e.addDocumentOptions&&(m+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');g(d,0);return m=decodeURIComponent(encodeURIComponent(m).replace("%19",""))},parseXml:function(d,e){function g(u,w){u.name=w.nodeName;e.saveInnerHTML&&
(u.innerHTML=w.innerHTML);if(w.attributes&&w.attributes.length){u.attributes={};for(var y=0;y<w.attributes.length;y++){var C=w.attributes[y],D=C.value;if(!0===D||"true"===D)D=!0;else if(!1===D||"false"===D)D=!1;else if(h&&D){var G=Number(D);isNaN(G)||(D=G)}u.attributes[C.nodeName]=D}}if(w.childNodes&&w.childNodes.length)for(u.tags=[],y=0;y<w.childNodes.length;y++){if(D=C=w.childNodes[y],"#text"!==D.nodeName||(m?D.nodeValue.trim():D.nodeValue))D={},u.tags.push(D),g(D,C)}else"#text"===w.nodeName&&(delete u.name,
u.text=p.decodeXML(w.nodeValue))}e=e||{};var h=e.parseNumbers,m=e.ignoreWhiteSpacedTextNodes;m=void 0===m?!0:m;var r={};d=(new DOMParser).parseFromString(d,"text/xml").childNodes;for(var n=0;n<d.length;n++)if(1===d[n].nodeType){var q=d[n];break}q&&g(r,q);return r},queryTopJson:function(d,e){return this.queryJson(d,e,!0)},queryJson:function(d,e,g){function h(r,n){r.tags&&r.tags.forEach(function(q){(e.test?e.test(q.name):q.name===e)&&m.push(q);g&&0===n||h(q,n+1)})}var m=[];h(d,0);return m},traverseJson:function(d,
e){function g(m){h||(!0===e(m)?h=!0:m.tags&&m.tags.forEach(g))}var h=!1;g(d)},getInnerHTML:function(d){return d.innerHTML?d.innerHTML.trim():this.parseJson(d).replace(/^<[^<]*>/,"").replace(/<\/[^<]*>$/,"").trim()},_IS_RICH_RE:/<.+>.*<\/.+>|<br\s*\/>|<\/br>/,_UNRICH_RE:/<.*?>/g,isRichText:function(d){return(d=String(d))&&this._IS_RICH_RE.test(d)},unrichHTML:function(d){if(!d)return"";d=p.decodeXML(String(d).trim()).replace(this._UNRICH_RE,"");0===d.indexOf("\x3c")&&-1!==d.indexOf("\x3e")&&(d="");
return d}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/PageUnitsConverter","../themes/ThemeLibrary"],function(t,p,l){var k={},f={a:[[841,1189],[594,841],[420,594],[297,420],[210,297],[148,210],[105,148],[74,105],[52,74],[37,52],[26,37]],b:[[1E3,1414],[707,1E3],[500,707],[353,500],[250,353],[176,250],[125,176],[88,125],[62,88],[44,62],[31,44]],c:[[917,1297],[648,917],[458,648],[324,458],[229,
324],[162,229],[114,162],[81,114],[57,81],[40,57],[28,40]],letter:[216,279],legal:[216,356],tabloid:[279,432],ledger:[432,279]};k.PAPER_SIZES=f;var c={};"a3 a4 a5 b4 b5 c4 c5 letter legal tabloid ledger".split(" ").forEach(function(a){var b=2===a.length?f[a[0]][a[1]]:f[a];c[a]={portrait:{w:p.mmToIn(b[0]),h:p.mmToIn(b[1])},landscape:{w:p.mmToIn(b[1]),h:p.mmToIn(b[0])}}});k.SIZE_TYPE_TO_DIM_HASH=c;k.hasStandardSize=function(a){return c[a]};k.getSupportedPageSizes=function(){var a=[],b;for(b in f)1===
b.length?f[b].forEach(function(d,e){a.push(b+e)}):a.push(b);return a};k.getPageDim=function(a,b,d){c[a]?a=c[a][b||"portrait"]:(a=a.split("x"),a={w:p.ptToIn(Number(a[0])),h:p.ptToIn(Number(a[1]))});d&&(a=t.clone(a),p.roundNDigitsObj(a,d.places));return a};k.getPageBox=function(a){if(!a)return null;var b=k.getPageDim(a.pagesize,a.orientation),d=p.inToPx(b.w);b=p.inToPx(b.h);return{w:d,h:b,contentW:d-(a.left||0)-(a.right||0),contentH:b-(a.top||0)-(a.bottom||0)}};k.combineCustomSizeString=function(a,
b,d){return p.convert(a,d,"pt",5)+"x"+p.convert(b,d,"pt",5)};k.getDefaultDocumentOptions=function(a){return t.mixin({pagesize:"letter",orientation:"portrait",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.12,fontSize:10,fontFamily:l.DEFAULT_FONT_FAMILY_CLASSIC},a)};k.getDefaultDocumentOptionsGraphicReport=function(a){return t.mixin({pagesize:"letter",orientation:"landscape",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",fontSize:10,fontFamily:l.DEFAULT_FONT_FAMILY_GRAPHIC},
a)};k.getClosestStandrdSizes=function(a,b){function d(m){var r=m.w/e.w;m=m.h/e.h;return Math.max(1-(1<r?1/r:r),1-(1<m?1/m:m))}b=void 0===b?.4:b;var e=k.getPageDim(a.pagesize,a.orientation);a=[];for(var g in c){var h=c[g];a.push({pagesize:g,orientation:"portrait",score:d(h.portrait)});a.push({pagesize:g,orientation:"landscape",score:d(h.landscape)})}a=a.filter(function(m){return m.score<=b});a.sort(function(m,r){return m.score-r.score});return a};k.tryGetStandardPageSize=function(a,b){function d(n){var q=
"portrait"===b?1:0;return n["portrait"===b?0:1]===g&&n[q]===h}if(k.SIZE_TYPE_TO_DIM_HASH[a])return a;var e=a.split("x"),g=p.convert(Number(e[0]),"pt","mm",0),h=p.convert(Number(e[1]),"pt","mm",0),m;for(m in k.PAPER_SIZES)if(e=k.PAPER_SIZES[m],1===m.length){if(e.some(function(n,q){if(d(n))return r=m+q,!0}))break}else if(d(e)){var r=m;break}return r||a};return k})},"esri/dijit/geoenrichment/utils/PageUnitsConverter":function(){define(["dojo/_base/lang"],function(t){function p(f,c,a){a&&(f=t.mixin({},
f));for(var b in f){var d=f[b];null!==d&&""!==d&&"boolean"!=typeof d&&("object"==typeof d?f[b]=p(d,c,a):(d=Number(d),isNaN(d)||(f[b]=c(d))))}return f}var l={},k="px pt mm cm in twip".split(" ");k.forEach(function(f){k.forEach(function(c){if(f!==c){var a=f+"To"+c.charAt(0).toUpperCase()+c.substr(1);l[a]=function(b,d){return l.convert(b,f,c,void 0!==d?d:5)}}})});l.convert=function(f,c,a,b){f=Number(f)||0;switch(c){case "in":f*=72;break;case "px":f*=.75;break;case "mm":f=f/25.4*72;break;case "cm":f=
f/2.54*72;break;case "twip":f/=20}switch(a){case "in":f/=72;break;case "px":f/=.75;break;case "mm":f=f/72*25.4;break;case "cm":f=f/72*2.54;break;case "twip":f=Math.round(20*f)}void 0!==b&&(f=l.roundNDigits(f,b));return f};l.pxToPtObj=function(f,c){return p(f,l.pxToPt,!c)};l.ptToPxObj=function(f,c){return p(f,l.ptToPx,!c)};l.roundNDigits=function(f,c){return Number(Number(f).toFixed(c))};l.roundNDigitsObj=function(f,c){for(var a in f){var b=f[a];"object"==typeof b?l.roundNDigitsObj(b,c):f[a]=l.roundNDigits(b,
c)}};return l})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/AttrUtil":function(){define([],function(){var t={},p="ID OBJECTID AREA_ID STORE_ID HasData aggregationMethod sourceCountry radiusIndex".split(" ");t.cleanUpAttrs=function(l,k){l&&p.forEach(function(f){k&&k[f]||delete l[f]})};return t})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(t){var p={},l={}.toString();p.arraysEqual=function(k,f){if(!k&&!f)return!0;
if(!k||!f||k.length!==f.length)return!1;for(var c=0;c<k.length;c++)if(k[c]!==f[c])return!1;return!0};p.composeIdentityFunction=function(k,f){var c="function"===typeof k?k:k?function(a){return a[k]}:function(a){return a};return function(a){return(a=c(a))&&a.toString?a.toString():f&&void 0===a?a:String(a)}};p.removeDuplicates=function(k,f){var c=[],a={};f=p.composeIdentityFunction(f,!0);t.forEach(k,function(b,d){var e=f(b);e===l&&(void 0===b["__ArrayUtil.js_uniqueKey__"]&&(b["__ArrayUtil.js_uniqueKey__"]=
"__ArrayUtil.js_uniqueKey__"+d),e=b["__ArrayUtil.js_uniqueKey__"]);void 0===e||e in a||(a[e]=b,c.push(b))});return c};p.splitArrayToBunches=function(k,f){f=f||100;for(var c=[],a,b=0,d=k.length;b<d;b++)a&&a.length!==f||(a=[],c.push(a)),a.push(k[b]);return c};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaCalculatorsUtil":function(){define(["./AreaDataUtil","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../tasks/parsers/FeatureSetParser"],
function(t,p,l){return{addFeatureAttributesCalculator:function(k,f,c){c=c||p.AREA_ATTRIBUTES_CALCULATOR_NAME;for(var a in k.attributes)t.setAreaDataObjectValue(a,k.attributes[a],f,c)},addAreaInfoCalculator:function(k,f,c){c=c||p.AREA_ATTRIBUTES_CALCULATOR_NAME;t.setAreaDataObjectValue("SITE_NAME",k.locationName||k.name,f,c);t.setAreaDataObjectValue("STORE_NAME",k.locationName||k.name,f,c);t.setAreaDataObjectValue("AREA_DESC",k.shortName||k.name,f,c);t.setAreaDataObjectValue("AREA_DESC2",k.description||
k.name,f,c);t.setAreaDataObjectValue("AREA_DESC3",k.description||k.name,f,c);t.setAreaDataObjectValue("STORE_ADDR",k.address||"",f,c);t.setAreaDataObjectValue("STORE_LAT",k.latitude||"",f,c);t.setAreaDataObjectValue("STORE_LONG",k.longitude||"",f,c)},addEnrichFeatures:function(k,f,c,a){var b={},d={},e;for(e in f)b[e.toLowerCase()]=f[e],d[e.toUpperCase()]=f[e];k=l.parse(k,c||p.ENRICHED_DATA_NO_LEVELS,function(g){return f[g]||b[g.toLowerCase()]||d[g.toUpperCase()]});t.mergeAreaData(k,a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/FeatureSetParser":function(){define(["./AttrUtil"],
function(t){var p={ID_FIELDS:["ID","AREA_ID","IDFNDFIELD"],KNOWN_ATTRIBUTES:{StdGeographyLevel:1,StdGeographyName:1,StdGeographyID:1},parse:function(l,k,f){if(!l)return[];l=l.features||l;if(!l.length)return[];var c=[],a={},b=0;l.forEach(function(d){var e=d.attributes[p.ID_FIELDS[0]]||d.attributes[p.ID_FIELDS[1]];if(e){void 0===a[e]&&(a[e]=b++);var g={},h;for(h in d.attributes){var m=p.KNOWN_ATTRIBUTES[h]?h:f?f(h):h;m&&(g[m]=d.attributes[h])}t.cleanUpAttrs(g);d={name:k,attrs:g,areaIndex:a[e]}}else d=
null;d&&(e=c[d.areaIndex]=c[d.areaIndex]||{},e[d.name]?e[d.name].comparisonLevels.push(d.attrs):e[d.name]={data:d.attrs,comparisonLevels:[]})});console.log("FeatureSetPareser.js \x3d\x3e areaData:");console.log(c);return c}};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/VariablesUtil":function(){define(["../dataCollections/DataCollectionsLoader"],function(t){var p={preprocessVariables:function(l,k){var f=p.convertForEnrich(p._splitVariables(l)).filter(function(c){return c.itemid});
return t.loadCustomDataVariables(f,{forceLowerCase:!0,portalUrl:k}).then(function(c){return p._splitVariables(l,c)})},_splitVariables:function(l,k){var f=[],c={};l.forEach(function(a){"string"===typeof a?f.push(a.toLowerCase()):a&&a.outFields&&a.outFields.forEach(function(b,d){d=a.itemid+"."+b;d=d.toLowerCase();f.push(d);c[d]={itemid:a.itemid,url:a.url,token:a.token,variable:k?k.fullNameToVariableCache[d]:{id:b}}})});return{fullNames:f,customDataMapping:c}},convertForEnrich:function(l){var k={},f=
[];l.fullNames.forEach(function(c){var a=l.customDataMapping[c];a?(c=k[a.itemid],c||(c={itemid:a.itemid,url:a.url,token:a.token,outFields:[]},c.url||delete c.url,c.token||delete c.token),c.outFields.push(a.variable.id),k[c.itemid]||(k[c.itemid]=c,f.push(c))):f.push(c)});return f}};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/dataCollections/DataCollectionsLoader":function(){define("esri/dijit/geoenrichment/promise/all ../GEUtil ../ReportTemplateData esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,p,l,k,f,c){return{canLoad:function(){return p.canMakeRequests()},loadVariables:function(a){var b=k.get("DataCollectionsLoader"),d="*"===a.outFields,e=d?["*"]:a.outFields,g=a.countryID+";"+a.hierarchy+";"+e.join(";")+";"+!!a.forceLowerCase;b[g]||(d||(e=e.slice(),-1===e.indexOf("id")&&e.push("id")),b[g]=p.getDataCollections(a.countryID,a.hierarchy,{f:"json",outFields:d?"*":JSON.stringify(e),suppressNullValues:!0,AddDerivativeVariables:"all"}).then(function(h){var m={dataCollections:h,idToVariableCache:{},
fullNameToVariableCache:{}};h.forEach(function(r){r.data.forEach(function(n){function q(y){return a.forceLowerCase?y.toLowerCase():y}function u(y){if(d)return Object.keys(y).length;var C=0;e.forEach(function(D){void 0!==y[D]&&C++});return C}var w=m.idToVariableCache[q(n.id)];if(!w||u(n)>u(w))m.idToVariableCache[q(n.id)]=n;m.fullNameToVariableCache[q(r.dataCollectionID+"."+n.id)]=n})});return m}));return b[g]},loadCustomDataVariables:function(a,b){b=b||{};var d={idToVariableCache:{},fullNameToVariableCache:{}};
return t(a.map(function(e){var g=c.combineMulti([e.url||b.portalUrl,"sharing/rest/content/items",e.itemid,"resources/metadata.xml"]);return l.loadResource(g,e.token||c.getToken(b.portalUrl)).then(function(h){var m=f.parseXml(h.data);h=[];var r=f.queryJson(m,"Fields")[0];r&&(h=h.concat(f.queryJson(r,"Field")));(m=f.queryJson(m,"CalculatedFields")[0])&&(h=h.concat(f.queryJson(m,"Script")));h.forEach(function(n){function q(u){return b.forceLowerCase?u.toLowerCase():u}n=n.attributes;n={id:n.Name,fullName:e.itemid+
"."+n.Name,alias:n.Alias,description:n.Alias,type:"esriFieldType"+n.Type,precision:n.Precision?Number(n.Precision):void 0,vintage:n.Vintage};d.idToVariableCache[q(n.id)]=n;d.fullNameToVariableCache[q(n.fullName)]=n})})})).then(function(){return d})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportTemplateData":function(){define("dojo/_base/declare dojo/_base/lang dojo/request/xhr esri/dijit/geoenrichment/promise/all esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h){function m(r,n){var q=r.substr(r.lastIndexOf("/")+1),u=a.getProxyRule(r);return l(u&&u.proxyUrl?u.proxyUrl+"?"+r:r,{method:"POST",handleAs:"arraybuffer",data:"token\x3d"+n,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded; charset\x3dutf-8"}}).then(function(w){var y=!/\.xml$|\.txt$|\.json$/i.test(q);return{name:q,data:y?b.base64FromByteSource(w):decodeURIComponent(escape(b.binaryStringFromByteSource(w)))}})}t=t(null,{id:null,_portalUrl:null,
_baseUrl:null,constructor:function(r,n){this.id=r.id;this._portalUrl=n;this._baseUrl=e.combine(this._portalUrl,"sharing/rest")},getFiles:function(){var r=this;return this._getResources().then(function(n){var q=[];n.map(function(u){u=u.resource;"thumbnail.png"!==u&&q.push(r.getFileByName(u))});return k(q)})},getFileByName:function(r){return m(this.getItemResourceUrl(r,!1),this._getToken())},getItemResourceUrl:function(r,n){r=this._baseUrl+"/"+this._contentItemPath(this.id+"/resources/"+r);return n?
e.addQueryPart(r,"token\x3d"+this._getToken()):r},updateFile:function(r,n){var q=this;return h.request({url:this._baseUrl,urlSuffix:"content/items/"+this.id}).then(function(u){var w=g.fromFileData(r,n);return h.request({url:q._baseUrl,urlSuffix:"content/users/"+u.owner+"/"+u.ownerFolder+"/items/"+q.id+"/updateResources"},{content:{file:w,filename:r}})})},_contentItemPath:function(r){return"content/items/"+r},_getToken:function(){var r=f.id.findCredential(this._portalUrl)||f.id.credentials[0];return r&&
r.token},_getResources:function(){var r=this;return d.query(function(n){return c({url:r._baseUrl+"/"+r._contentItemPath(r.id+"/resources"),content:p.mixin({f:"json",token:r._getToken()},n),handleAs:"json"},{usePost:!0})},null,"resources").then(function(n){return n.resources})},getPortalUrl:function(r){return r?/[^:]+:\/\/(.+)$/i.exec(this._portalUrl)[1]:this._portalUrl}});t.loadResource=m;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/CustomReportsManager":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./PortalManager ./ReportTemplateData ./StandardGraphicReportTemplates esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/PortalQueryUtil esri/dijit/geoenrichment/utils/UrlUtil ../../config ../../countryConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h){var m={TEMPLATE_TYPE:"Report Template",PLAYER_STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriReportPlayerStandardInfographic",STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriWebStandardInfographicReport",GALLERY_INFOGRAPHIC_TYPEKEYWORD:"esriWebGalleryInfographicReport",MOBILE_INFOGRAPHIC_TYPEKEYWORD:"esriMobileFactsInfographicReport",GALLERY_INFOGRAPHIC_USER:"esri_reports",resetCache:function(){a.set("CustomReportsManager",{})},_getCache:function(){return a.get("CustomReportsManager")},
getCustomReports:function(r){var n=this,q=e.getPortalUrl(r.portalUrl);return l(k.getSignedInPortal(q),function(u){u=u.user.username;u={q:d.combineQueryString({type:"Report Template",typeKeywords:r.typeKeywords,owner:!r.publicOnly&&u}),sortField:"modified",sortOrder:"desc"};return b.queryCommon(e.combine(q,"sharing/rest/search"),u).then(function(w){w=w.map(function(y){return n.prepareCustomReportFromItem(y,q,r)});return n._getCountryReports(w,r.countryID)})})},_getCountryReports:function(r,n){return r&&
("*"===n?r:r.filter(function(q){return!q.countries||q.countries.split(",").some(function(u){return n===u.trim()})}))},prepareCustomReportFromItem:function(r,n,q){function u(y){return"string"===typeof y?"true"===y:!!y}var w=t.mixin({},r.properties||r.details);w.isGraphicReport=u(w.isGraphicReport);w.isMultiFeature=u(w.isMultiFeature);w.reportID=r.id;n={title:r.title,templateData:n&&new f(r,n),modified:r.modified instanceof Date?r.modified.getTime():r.modified};q&&q.attachItemProperty&&(n[q.attachItemProperty]=
r);t.mixin(n,w);return n},getCustomReportByID:function(r){var n=this,q=this._getCache()[r.reportID];if(q)return q;var u=e.getPortalUrl(r.portalUrl);return this._getCache()[r.reportID]=l(k.getSignedInPortal(u),function(w){return w.user.getItem(r.reportID).then(function(y){return y&&n.prepareCustomReportFromItem(y,u,r)})}).otherwise(function(w){delete n._getCache()[r.reportID];return r.ignoreError?null:(new p).reject(w)})},tryFindReportIdByAlias:function(r){var n=this,q=c.aliasToID(r.countryID,r.reportID);
if(null==q)return null;var u=e.getPortalUrl(r.portalUrl);return l(q&&this.getCustomReportByID({reportID:q,portalUrl:u,ignoreError:!0,attachItemProperty:r.attachItemProperty}),function(w){return w?w&&(r.returnObject?w:w.reportID):l(n.getCustomReports({portalUrl:u,countryID:r.countryID,typeKeywords:"esriReportPlayerStandardInfographic",publicOnly:!0,attachItemProperty:r.attachItemProperty}),function(y){function C(E){E=E.split(".");return Number((Number(E[0])+Number(E[1])/100).toFixed(2))}var D=C(g.jsapiVersion),
G,F,B=-Infinity,z=Infinity;y.forEach(function(E){if(E.playerAlias===r.reportID){var I=C(E.jsapiVersion);D>=I&&I>B&&(B=I,G=E);D<I&&I<z&&(z=I,F=E)}});y=G||F;r.strictVersionCheck&&y&&y.jsapiVersion!==g.jsapiVersion&&(y=null);return y&&(r.returnObject?y:y.reportID)})})},itemUpdated:function(r){delete this._getCache()[r]},getFakeCustomReportByContext:function(r){return{title:"Generic template",type:"esriReportTemplateStandard",coverage:r.countryID,countries:r.countryID,hierarchy:r.hierarchy||h.getHierarchyID(),
isGraphicReport:!0,isMultiFeature:!1,reportID:null}}};m.resetCache();return m})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/PortalManager":function(){define(["dojo/Deferred","dojo/on","esri/dijit/geoenrichment/when","esri/arcgis/Portal","../../../utils/CacheUtil"],function(t,p,l,k,f){return{getSignedInPortal:function(c){var a=f.get("PortalManager.portal");if(!a[c]){var b=new t;a[c]=b.promise;var d=new k.Portal(c);p(d,"load",function(){d.user?b.resolve({user:new k.PortalUser({portal:d,
credential:{userId:d.user.username,server:d.url,token:"",expires:9999999999999,creationTime:9999999999999,scope:"portal",resources:[d.portalUrl]}}),portal:d}):l(d.signIn()).then(function(e){b.resolve({user:e,portal:d})})})}return a[c]}}})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(t,p,l,k,f,c,a,
b,d,e,g,h){var m={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},r=function(B){function z(E){B[E]||(B[E]=function(){var I=arguments;return k.when(B,function(L){Array.prototype.unshift.call(I,L.results||L);return r(f[E].apply(f,I))})})}if(!B)return B;B.then&&(B=p.delegate(B));B.total||(B.total=k.when(B,function(E){return d.isDefined(E.total)?E.total:E.length||0}));z("forEach");z("filter");z("map");z("some");z("every");return B},n={useSSL:function(B,z){var E=m&&m.self||{};if(E&&!E.isPortal)return-1!==
B.indexOf("https:")||E.allSSL?z.replace("http:","https:"):z;var I=n.getLocation(z);return-1<E.portalHostname.toLowerCase().indexOf(I.hostname.toLowerCase())&&I.port&&"80"!==I.port&&"443"!==I.port?(z=I.pathname,z=0===z.indexOf("/")?z:"/"+z,E.allSSL||-1<B.indexOf("https:")?"https://"+I.hostname+(E.httpsPort&&"443"!==E.httpsPort?":"+E.httpsPort:"")+z+I.search:"http://"+I.hostname+(E.httpPort&&"80"!==E.httpPort?":"+E.httpPort:"")+z+I.search):-1!==B.indexOf("https:")||E.allSSL?z.replace("http:","https:"):
z},formatUrl:function(B){var z=m.currentToken;return-1!==B.indexOf("null")?null:n.useSSL(window.location.protocol,z?B+(-1!==B.indexOf("?")?"\x26":"?")+("token\x3d"+z):B)},getLocation:function(B){var z=document.createElement("a");z.href=B;return{protocol:z.protocol,hostname:z.hostname,port:z.port,pathname:z.pathname,search:z.search,hash:z.hash,host:z.host}},resultsToTypedArray:function(B,z,E){E=E?E.listings||E.notifications||E.userInvitations||E.tags||E.items||E.groups||E.comments||E.provisions||E.results||
E:[];return f.map(E,function(I){I=p.mixin(I,z||{});return B?new B(I):I})},clearFieldsFromObject:function(B,z){var E,I=B.length;if(p.isArray(B))for(E=0;E<I;E++)delete z[B[E]];else for(E in B)delete z[E];return z},requestToTypedArray:function(B,z,E,I,L){return r(n.request(B,z,E).then(p.partial(n.resultsToTypedArray,I,L)))},request:function(B,z,E){z&&z.portal&&delete z.portal;if(z&&z.form){var I=z.form;delete z.form}z=p.mixin(p.mixin({},z||{}),m.requestParams);E=p.mixin(E||{},m.options);return e({url:n.useSSL(window.location.protocol,
B.url||B),content:z,callbackParamName:"callback",timeout:E&&E.timeout||0,form:I},E)},formatQueryParams:function(B,z,E){B=p.mixin(p.mixin({},B),p.isString(z)?{q:z}:z||{});B.q=!E&&m.extraQuery?"("+B.q+")"+m.extraQuery:B.q;return B}},q=t([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(B){p.mixin(this,B);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),u=t([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(B){p.mixin(this,
B);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),w=t([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(B){p.mixin(this,B);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=n.formatUrl(this.itemUrl+
"/data");this.thumbnailUrl=n.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var B=this.type;return{source:-1<f.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===B?B:
null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(B){var z=p.isString(B)?{comment:B}:B;return n.request(this.itemUrl+"/addComment",z,{usePost:!0}).then(p.hitch(this,function(E){return new q(p.mixin(z,{id:E.commentId,item:this}))}))},updateComment:function(B){if(B&&B.url&&B.comment)return n.request(B.url+"/update",{comment:B.comment},{usePost:!0}).then(function(z){B.id=z.commentId;return B});
throw Error();},getComments:function(){return n.requestToTypedArray(this.itemUrl+"/comments",null,null,q,{item:this})},deleteComment:function(B){if(B&&B.url)return n.request(B.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(B){var z=p.isObject(B)?B:{rating:parseFloat(B)};return n.request(this.itemUrl+"/addRating",z,{usePost:!0}).then(p.hitch(this,function(E){return new u(p.mixin(z,{id:E.ratingId,item:this}))}))},getRating:function(){return n.request(this.itemUrl+"/rating").then(p.hitch(this,
function(B){return new u(p.mixin(B,{item:this}))}))},deleteRating:function(){return n.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var B=this.type,z=this.typeKeywords||[],E=B;"Feature Service"===B||"Feature Collection"===B?E=-1<f.indexOf(z,"Table")?"Table":-1<f.indexOf(z,"Route Layer")?"Route Layer":-1<f.indexOf(z,"Markup")?"Markup":"Feature Layer":"Image Service"===B?E=-1<f.indexOf(z,"Elevation 3D Layer")?"Elevation Layer":-1<f.indexOf(z,"Tiled Imagery")?"Tiled Imagery Layer":
"Imagery Layer":"Scene Service"===B?E="Scene Layer":"Scene Package"===B?E="Scene Layer Package":"Stream Service"===B?E="Feature Layer":"Geoprocessing Service"===B&&this.portal&&this.portal.isPortal?E=-1<f.indexOf(z,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===B?E="GeoEnrichment Service":"Geocoding Service"===B?E="Locator":"Microsoft Powerpoint"===B?E="Microsoft PowerPoint":"GeoJson"===B?this.type=E="GeoJSON":"Globe Service"===B?E="Globe Layer":"Vector Tile Service"===B?E="Tile Layer":
"netCDF"===B?E="NetCDF":"Map Service"===B?E=-1===f.indexOf(z,"Spatiotemporal")&&(-1<f.indexOf(z,"Hosted Service")||-1<f.indexOf(z,"Tiled"))&&-1===f.indexOf(z,"Relational")?"Tile Layer":"Map Image Layer":B&&-1<B.toLowerCase().indexOf("add in")?E=B.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===B?E="Big Data File Share":"Compact Tile Package"===B?E="Tile Package (tpkx)":"Raster function template"===B?E="Raster Function Template":"OGCFeatureServer"===B&&(E="OGC Feature Layer");return E},
_getIconUrl:function(){var B=this.type&&this.type.toLowerCase()||"",z=this.typeKeywords||[],E=!1,I=!1,L=!1,M=!1,O=!1,Q=!1;I=!1;0<B.indexOf("service")||"feature collection"===B||"kml"===B||"wms"===B||"wmts"===B||"wfs"===B?(E=-1<f.indexOf(z,"Hosted Service"),"feature service"===B||"feature collection"===B||"kml"===B||"wfs"===B?(M=-1<f.indexOf(z,"Table"),I=-1<f.indexOf(z,"Route Layer"),L=-1<f.indexOf(z,"Markup"),O=-1!==f.indexOf(z,"Spatiotemporal"),Q=-1!==f.indexOf(z,"UtilityNetwork"),B=O&&M?"spatiotemporaltable":
M?"table":I?"routelayer":L?"markup":O?"spatiotemporal":Q?"utilitynetwork":E?"featureshosted":"features"):"map service"===B||"wms"===B||"wmts"===B?(O=-1!==f.indexOf(z,"Spatiotemporal"),I=-1!==f.indexOf(z,"Relational"),B=O||I?"mapimages":E||-1<f.indexOf(z,"Tiled")||"wmts"===B?"maptiles":"mapimages"):B="scene service"===B?-1<f.indexOf(z,"Line")?"sceneweblayerline":-1<f.indexOf(z,"3DObject")?"sceneweblayermultipatch":-1<f.indexOf(z,"Point")?"sceneweblayerpoint":-1<f.indexOf(z,"IntegratedMesh")?"sceneweblayermesh":
-1<f.indexOf(z,"PointCloud")?"sceneweblayerpointcloud":-1<f.indexOf(z,"Polygon")?"sceneweblayerpolygon":-1<f.indexOf(z,"Building")?"sceneweblayerbuilding":-1<f.indexOf(z,"Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===B?-1<f.indexOf(z,"Elevation 3D Layer")?"elevationlayer":-1<f.indexOf(z,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===B?"streamlayer":"vector tile service"===B?"vectortile":"datastore catalog service"===B?"datastorecollection":"geocoding service"===
B?"geocodeservice":"geoprocessing service"===B?-1<f.indexOf(z,"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):B="web map"===B||"cityengine web scene"===B?"maps":"web scene"===B?-1<f.indexOf(z,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===B||"mobile application"===B||"application"===B||"operation view"===B||"desktop application"===B?"apps":"map document"===B||"map package"===B||"published map"===B||"scene document"===B||"globe document"===
B||"basemap package"===B||"mobile basemap package"===B||"mobile map package"===B||"project package"===B||"project template"===B||"pro map"===B||"layout"===B||"layer"===B&&-1<f.indexOf(z,"ArcGIS Pro")||"explorer map"===B&&f.indexOf(z,"Explorer Document")?"mapsgray":"service definition"===B||"csv"===B||"shapefile"===B||"cad drawing"===B||"geojson"===B||"360 vr experience"===B||"netcdf"===B||"administrative report"===B?"datafiles":"explorer add in"===B||"desktop add in"===B||"windows viewer add in"===
B||"windows viewer configuration"===B?"appsgray":"arcgis pro add in"===B||"arcgis pro configuration"===B?"addindesktop":"rule package"===B||"file geodatabase"===B||"sqlite geodatabase"===B||"csv collection"===B||"kml collection"===B||"windows mobile package"===B||"map template"===B||"desktop application template"===B||"gml"===B||"arcpad package"===B||"code sample"===B||"form"===B||"document link"===B||"earth configuration"===B||"operations dashboard add in"===B||"rules package"===B||"image"===B||
"workflow manager package"===B||"explorer map"===B&&-1<f.indexOf(z,"Explorer Mapping Application")||-1<f.indexOf(z,"Document")?"datafilesgray":"network analysis service"===B||"geoprocessing service"===B||"geodata service"===B||"geometry service"===B||"geoprocessing package"===B||"locator package"===B||"geoprocessing sample"===B||"workflow manager service"===B?"toolsgray":"layer"===B||"layer package"===B||"explorer layer"===B?"layersgray":"scene package"===B?"scenepackage":"mobile scene package"===
B?"mobilescenepackage":"tile package"===B||"compact tile package"===B?"tilepackage":"task file"===B?"taskfile":"report template"===B?"report-template":"statistical data collection"===B?"statisticaldatacollection":"insights workbook"===B?"workbook":"insights model"===B?"insightsmodel":"insights page"===B?"insightspage":"insights theme"===B?"insightstheme":"hub initiative"===B?"hubinitiative":"hub page"===B?"hubpage":"hub site application"===B?"hubsite":"hub event"===B?"hubevent":"relational database connection"===
B?"relationaldatabaseconnection":"big data file share"===B?"datastorecollection":"image collection"===B?"imagecollection":"desktop style"===B?"desktopstyle":"style"===B?"style":"dashboard"===B?"dashboard":"raster function template"===B?"rasterprocessingtemplate":"vector tile package"===B?"vectortilepackage":"ortho mapping project"===B?"orthomappingproject":"ortho mapping template"===B?"orthomappingtemplate":"solution"===B?"solutions":"geopackage"===B?"geopackage":"deep learning package"===B?"deeplearningpackage":
"real time analytic"===B?"realtimeanalytics":"big data analytic"===B?"bigdataanalytics":"feed"===B?"feed":"excalibur imagery project"===B?"excaliburimageryproject":"notebook"===B?"notebook":"storymap"===B?"storymap":"survey123 add in"===B?"survey123addin":"mission"===B?"mission":"mission report"===B?"missionreport":"quickcapture project"===B?"quickcaptureproject":"pro report"===B?"proreport":"urban model"===B?"urbanmodel":"web experience"===B?"experiencebuilder":"web experience template"===B?"webexperiencetemplate":
"workflow"===B?"workflow":"kernel gateway connection"===B?"kernelgatewayconnection":"insights script"===B?"insightsscript":"hub initiative template"===B?"hubinitiativetemplate":"storymap theme"===B?"storymaptheme":"knowledge graph"===B?"knowledgegraph":"native application"===B?"nativeapp":"native application installer"===B?"nativeappinstaller":"link chart"===B?"linkchart":"investigation"===B?"investigation":"ogcfeatureserver"===B?"features":"pro project"===B?"proproject":"insights workbook package"===
B?"insightsworkbookpackage":"apache parquet"===B?"apacheparquet":"maps";return B?a.toUrl("../css/images/item_type_icons/"+B+"16.png"):null},_getIsPremiumContent:function(){var B=this.typeKeywords,z=!1;if(-1<f.indexOf(B,"Requires Subscription")||-1<f.indexOf(B,"Requires Credits"))z=!0;return z},_getPremiumIconUrl:function(){var B=this.typeKeywords,z;this.isPremiumContent&&(z=-1<f.indexOf(B,"Requires Credits")?"premiumcredits":"premiumitem");return z?a.toUrl("../css/images/item_type_icons/"+z+"16.png"):
null},getThumbnailUrl:function(B){var z=this.thumbnailUrl;z&&B&&(z+=(-1===z.indexOf("?")?"?":"\x26")+"w\x3d"+B);return z}}),y=t([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(B){p.mixin(this,B);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?n.formatUrl(this.url+"/info/"+this.banner):
"";this.thumbnail=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?n.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var z in this.listingProperties)this[z]&&(this.listingProperties[z]=
this[z]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=f.map(this.screenshots,p.hitch(this,function(E){return n.formatUrl(this.url+"/info/"+E)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?n.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):n.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return n.requestToTypedArray(this.commentsUrl,
null,null,q,{item:this})},getVendor:function(){return this.vendor}}),C=t([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(B){p.mixin(this,B);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=B.listing?new y(p.mixin(B.listing,{portal:this.portal})):null}}),D=t([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(B){p.mixin(this,
B);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=n.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return n.request(this.url+"/users")},queryItems:function(B,z){B=n.formatQueryParams({},B,z);B.q="group:"+this.id+(B.q?" "+B.q:"");return this.portal.queryItems(B)},getThumbnailUrl:function(B){var z=this.thumbnailUrl;z&&B&&(z+=
(-1===z.indexOf("?")?"?":"\x26")+"w\x3d"+B);return z}}),G=t([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(B){p.mixin(this,B);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return n.requestToTypedArray(this.url,null,null,w,{portal:this.portal,folderId:this.id})}}),F=t([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(B){p.mixin(this,B);this.url=(this.portal&&
this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return r(n.request(this.url).then(p.hitch(this,function(B){return n.resultsToTypedArray(D,{portal:this.portal},B.groups)})))},getNotifications:function(){return n.requestToTypedArray(this.url+
"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return n.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return n.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return r(this.getContent(null,{num:1}).then(function(B){return B.folders}))},getItems:function(B){return r(this.getContent(B).then(function(z){return z.items}))},getItem:function(B){return n.request(this.portal.portalUrl+
"content/items/"+B).then(p.hitch(this,function(z){return new w(p.mixin(z,{portal:this.portal}))}))},getContent:function(B,z){var E=this.url.replace("/community/","/content/")+(B?"/"+B:"");return n.request(E,z).then(p.hitch(this,function(I){I.folders=n.resultsToTypedArray(G,{portal:this.portal},I.folders);I.items=n.resultsToTypedArray(w,{portal:this.portal,folderId:B},I.items);return I}))},getThumbnailUrl:function(B){var z=this.thumbnailUrl;z&&B&&(z+=(-1===z.indexOf("?")?"?":"\x26")+"w\x3d"+B);return z}});
t={Portal:t([h],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(B){B=p.isObject(B)?B:{url:B};this.registerConnectEvents();m={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};B.self?(m.self=B.self,p.mixin(this,{url:B.url||g.getProtocolForWebResource()+"//"+(B.self.urlKey?B.self.urlKey+"."+B.self.customBaseUrl:B.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",B=B.self.user?this.signIn():
this.init(this.url)):(B.url&&p.mixin(this,{url:B.url}),B=this.init(this.url));B.then(p.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(B,z){B=(B||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==B.indexOf("/sharing")?B+"/":B+"/sharing/rest/";return this._getSelf(this.portalUrl).then(p.hitch(this,function(E){m.self=p.mixin({},E);(E=E.user)&&z&&(m.currentToken=z&&z.token,m.loggedInUser=new F(p.mixin(E,{portal:this,credential:z})));m.self.id&&!1===m.self.canSearchPublic&&
(m.extraQuery=" AND orgid:"+m.self.id);p.mixin(this,m.self);this.thumbnailUrl=n.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),p.hitch(this,function(E){this.onError(E);throw E;}))},signIn:function(){var B=new k,z=p.hitch(this,function(){this._onSignIn().then(p.hitch(this,function(){B.resolve(m.loggedInUser)}),
p.hitch(this,function(E){B.reject(E)}))});if(m&&m.self)m&&m.loggedInUser?setTimeout(function(){B.resolve(m.loggedInUser)},0):z();else this.on("load",p.hitch(this,function(){z()}));return B},signOut:function(){m.loggedInUser.credential&&m.loggedInUser.credential.destroy();m.loggedInUser=null;m.options.disableIdentityLookup=!0;n.clearFieldsFromObject(m.self,this);m.self=null;return this.init(this.url)},getPortalUser:function(){return m.loggedInUser},addResource:function(B,z){return n.request(this.portalUrl+
"portals/self/addResource",{key:B,text:z},{usePost:!0})},update:function(B){return n.request(this.portalUrl+"portals/self/update",B,{usePost:!0})},queryGroups:function(B,z){return this._queryPortal(this.portalUrl+"community/groups",n.formatQueryParams({},B,z),D)},queryItems:function(B,z){return this._queryPortal(this.portalUrl+"search",n.formatQueryParams({},B,z),w)},queryListings:function(B){B=n.formatQueryParams({},B,!0);var z="";B.q&&-1<B.q.toLowerCase().indexOf("mylistings:true")?(B.q=B.q.toLowerCase().replace("mylistings:true",
""),z="?mylistings\x3dtrue"):B.q||(B.q='""');return this._queryPortal(this.portalUrl+"content/listings"+z,B,y)},queryCustomerList:function(B,z){B=n.formatQueryParams({},B,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",B)},getProvisions:function(){return this.getCustomers().then(p.hitch(this,function(B){return B.purchases}))},getInterests:function(){return this.getCustomers().then(p.hitch(this,function(B){return B.interests}))},getTrials:function(){return this.getCustomers().then(p.hitch(this,
function(B){return B.trials}))},getCustomers:function(B){return n.request(this.portalUrl+"portals/self/customers",{status:B||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(B){return B.purchases})},getMyInterests:function(){return this.getPurchases().then(function(B){return B.interests})},getPurchases:function(){return n.request(this.portalUrl+"portals/self/purchases").then(p.hitch(this,function(B){B.interests=f.map(B.interests,function(z){return p.mixin(z.provision,{listing:z.listing})});
B.purchases=f.map(B.purchases,function(z){return p.mixin(z.provision,{listing:z.listing})});B.trials=f.map(B.trials,function(z){return p.mixin(z.provision,{listing:z.listing})});B.interests=n.resultsToTypedArray(C,{portal:this},B.interests);B.trials=n.resultsToTypedArray(C,{portal:this},B.trials);B.purchases=n.resultsToTypedArray(C,{portal:this},B.purchases);return B}))},queryUsers:function(B,z){return this._queryPortal(this.portalUrl+"community/users",n.formatQueryParams({sortField:"username"},B,
z),F)},_onSignIn:function(){m.options.disableIdentityLookup=!1;m.self=null;return b.id.getCredential(this.portalUrl).then(p.hitch(this,"init",this.url)).then(function(){return m.loggedInUser},p.hitch(this,function(B){m.options.disableIdentityLookup=!0;this.onError(B);throw B;}))},_getSelf:function(B){B+="portals/self";if(m.self){var z=new k;setTimeout(function(){z.resolve(m.self)},0)}else z=n.request(B,{culture:l.locale});return z},_queryPortal:function(B,z,E){var I=p.mixin({num:10,start:0,sortField:"title",
sortOrder:"asc"},z),L=["start","query","num","nextStart"];B=n.request(B,I).then(p.hitch(this,function(M){M.results=n.resultsToTypedArray(E,{portal:this},M);M.queryParams=p.mixin({},I);M.nextQueryParams=p.mixin(I,{start:M.nextStart});return n.clearFieldsFromObject(L,M)}));B=p.delegate(B);B.queryParams=p.mixin({},I);B.nextQueryParams=k.when(B,function(M){return M.nextQueryParams});return r(B)}}),PortalFolder:G,PortalGroup:D,PortalItem:w,PortalUser:F,PortalComment:q,PortalRating:u,PortalUtil:n,PortalResult:r,
PortalListing:y};c("extend-esri")&&p.mixin(p.getObject("arcgis",!0,b),t);return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/StandardGraphicReportTemplates":function(){define(["dojo/_base/lang","../../config","dojo/i18n!esri/nls/jsapi"],function(t,p,l){function k(){return a?a:a={"3.25":{"US.census":[{id:"e2a6868f979f4e37896b631581ae4918",alias:"demographic-summary"},{id:"88420f4a98bb45cbacacbad67e23266e",alias:"key-facts"},{id:"efb6bee0a80d4801887ec4cf73aa67fc",alias:"marketing-profile"},
{id:"12867e4a89d5461fbbe3b9c6c181993a",alias:"at-risk-population"},{id:"6637be1fbddf4e948fbd09ce6a7a7888",alias:"portrait-property-flyer"},{id:"02c1124e916847249aa91b9ce48c2552",alias:"skyscraper"},{id:"3afd4c5089584b089af5b0037d74a9d1",alias:"transportation-to-work"},{id:"a696eae378974ed5a63510fa70bed011",alias:"health-care"},{id:"c931fc6ebdb440189a8bc6bd34115807",alias:"executive-summary-call-outs"},{id:"96096c8afa4847dea936942b1f89acb5",alias:"tapestry-profile"},{id:"7a20b92b48cc4e63bf7ba956295de948",
alias:"nearby-restaurants"}],"CA.census":[{id:"6c467040a8a64c33972045cf091bca5b",alias:"key-facts"}],"*.census":[{id:"11c4cec3c0d34c4aa51cd8877e2db4ef",alias:"key-facts"}]},"3.26":{"US.census":[{id:"a5161c2ca50d44429daf2bf9dbe73eb5",alias:"demographic-summary"},{id:"693269bfbf6c4851901a3c9c56550294",alias:"key-facts"},{id:"aceee34210e748ba95cb9cae21e196b9",alias:"marketing-profile"},{id:"a7936c5ce77c4d698140db21ab1a7858",alias:"at-risk-population"},{id:"8d42e32b12154bc580af89483c208d56",alias:"portrait-property-flyer"},
{id:"7be44b15e29847a383906aac5699cf00",alias:"skyscraper"},{id:"537230b385fb45d9a8d6e59265e36fbf",alias:"transportation-to-work"},{id:"89c6ff4d96de4acaa024b7a408f186b0",alias:"health-care"},{id:"0fa71e0a74294e7b8265e4cd507c7d17",alias:"executive-summary-call-outs"},{id:"f2754d21223a491798dbc0ef2c71858f",alias:"tapestry-profile"},{id:"866e6a839ee348dfae5a8ee9bdafbfc0",alias:"nearby-restaurants"},{id:"f808dfceddd149ff85a9d8825d4e5a5f",alias:"multi-ring-comparison"}],"CA.census":[{id:"f982018306a34cc58756ce0ed78c6b0c",
alias:"key-facts"},{id:"c47fa8d040364abe80d288bb606da576",alias:"multi-ring-comparison"}],"*.census":[{id:"3813621424fc4443af1dcecab65be89c",alias:"key-facts"},{id:"dd1fa81faaf94541831cae16788393ab",alias:"multi-ring-comparison"}]},"3.27":{"US.census":[{id:"3c6959a7c7c4450f9bdcc7063c9023d5",alias:"demographic-summary"},{id:"4cc0a5e007d946d5909524fcf80bc666",alias:"key-facts"},{id:"fb9b9a501c974540a52ab6d1027a8bcc",alias:"marketing-profile"},{id:"b0f05d5926d6444da40d6bf0c5c9846e",alias:"at-risk-population"},
{id:"5cf609b26ce24633a2edc58d7ebeb3fd",alias:"portrait-property-flyer"},{id:"686d7af60bcb410db051ec8465889231",alias:"skyscraper"},{id:"a79a099ab7be4c34a9b0b28831b1aa9c",alias:"transportation-to-work"},{id:"6f64bb63647246dcb5d268fc301614f6",alias:"health-care"},{id:"99e919a7e9fd4fa2b55779f0dc118da8",alias:"executive-summary-call-outs"},{id:"f32b961757f347e2976ba011ee20cb13",alias:"tapestry-profile"},{id:"a266260cc3ec46c1b66c86f263feb8e4",alias:"nearby-restaurants"},{id:"dab290529fd44063a2d83e03a8dc49eb",
alias:"multi-ring-comparison"},{id:"1499719e83754c81ae1477223c0dde39",alias:"property-details"},{id:"9c441f80f80348c8b5b747e2cf2a2ccd",alias:"employment-overview"},{id:"bb59cd9292ec47a0928900c5fb9c17b8",alias:"office-market-profile"},{id:"6f75892c4a5f4f5ba3d0edb4d8a0b13b",alias:"health-care-and-insurance"},{id:"a7524b019e1f482493e43f32ab9568a0",alias:"demographic-profile"},{id:"45d528a3865547bb89792d4517db2e7a",alias:"commute-profile"},{id:"acf5c12b54b64550ad7f582c9c97ed28",alias:"target-market-summary"},
{id:"489d923d29d44c2681171a590fb37742",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"91d1e8c9d0ea482b9947dfe4bdfbe0ba",alias:"key-facts"},{id:"e05eb227df9b4ceba0ace202b1d0c1e2",alias:"multi-ring-comparison"}],"NL.NLD_4orange":[{id:"77e9461032b24e47b6c6b643cf02381f",alias:"housing-profile"},{id:"b80fd38e5f43448da530521832e0dfba",alias:"insurance-profile"},{id:"d36520d68d8e449c9f300be0e800f698",alias:"media-profile"},{id:"bad567fdf36e48e9a5108b66c96bf0ae",alias:"personicx-segmentation"},{id:"5726fe6cad4c491a863eff64e538231c",
alias:"spending-profile"}],"JP.EsriJapan":[{id:"e4bd37bb10c74798a3600ca7484846ac",alias:"base-demographic-profile"},{id:"a5d7db5138644a9e95d9af1b40b31bb9",alias:"demographic-comparison-profile"},{id:"205b45f626f84650a1ca948be4f97411",alias:"future-population-profile"},{id:"ee12a9d9a2e04fb6b93628f075719bc9",alias:"population-households-profile"},{id:"3f857a2a8d14488abfcec383197e5a0b",alias:"consumer-spending-profile"},{id:"77369125467c4c9a8f3b9a628eda3347",alias:"base-demographic-profile-ja"},{id:"08abfdb8b8174846bd3723f094a88d86",
alias:"demographic-comparison-profile-ja"},{id:"e5db2ced023d4c53a0ef9fe231d7fd15",alias:"future-population-profile-ja"},{id:"4c55f8ddb53345298e59bccfeb45e489",alias:"population-households-profile-ja"},{id:"24c8ef9a8c5d45c78791a84445eed29d",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"7aa819f9816a494ab28ab7604553f488",alias:"base-demographic-profile"},{id:"710051b492c3481a83e01bd6bf3dd3bf",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d046bf33ce04b598afd391a0dd195c9",alias:"base-demographic-profile"}],
"PR.ACS":[{id:"d8b9f282034d47db808175fef56a15e2",alias:"at-risk-population"},{id:"eab5646a29324a6282db3b8ca47bf2b3",alias:"commute-profile"},{id:"ed6b5a0736aa4e04862a1a4307c608cc",alias:"demographic-summary"},{id:"a4c64a9006544751ad18ce75a401112e",alias:"health-care-and-insurance"},{id:"96d00aefd766428394d6ee6698a56591",alias:"coronavirus-impact-planning"}],"*.census":[{id:"365d52e6bac147a68a12eee229eb9b6b",alias:"key-facts"},{id:"0f7d2ba850fa40579cae1342001d80d7",alias:"multi-ring-comparison"}]},
"3.28":{"US.census":[{id:"45cb423066194f5f98c6f4ff81124db3",alias:"demographic-summary"},{id:"98d5848a944b4787b2ca038256c7878d",alias:"key-facts"},{id:"879849b937ec4eb0bef31ff2861251f2",alias:"marketing-profile"},{id:"456d7a22adc8439a93d4164ed3846243",alias:"at-risk-population"},{id:"c7e01c953c7e4b70a46ca6408c3ed000",alias:"portrait-property-flyer"},{id:"34330a47546f412d9d09632347da11d3",alias:"skyscraper"},{id:"d349b23334454274ab2a7a20a0a9a55d",alias:"transportation-to-work"},{id:"02086fe6b92b4ff5a9a7a8d172540fc9",
alias:"health-care"},{id:"5d8b51e2b27b4832b193d9932bc6f862",alias:"executive-summary-call-outs"},{id:"1b07c48d4b58423990023b43150d7e99",alias:"tapestry-profile"},{id:"c21dd81cd9064649a4bb454530f12790",alias:"nearby-restaurants"},{id:"4d8c102ca7324d09931cfe65ab3a1168",alias:"multi-area-comparison"},{id:"9ed3b5dba02d4b46a3e063c8405fd0cc",alias:"property-details"},{id:"db0606e41ee7485f88122069e74a9b6b",alias:"employment-overview"},{id:"2a43c204c1dd4a758087372d7d7d786b",alias:"office-market-profile"},
{id:"f59a3621583d44bbafa14035c2ae3947",alias:"health-care-and-insurance"},{id:"ad58f06a480c4b16aadcff789f543cca",alias:"demographic-profile"},{id:"bd7390ab31dc485489733d22475db0ed",alias:"commute-profile"},{id:"38eab30d7e6840da869fee264ca9fc40",alias:"target-market-summary"},{id:"03b420681f6a466fb14e254669583244",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"6c0a945e91d44640a08776e5bed1b297",alias:"key-facts"},{id:"7464708f379b463c8eec8aed1315989f",alias:"multi-area-comparison"},{id:"425150e63a5346659721bfc0be94511b",
alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"e602295128e34ea2b2b50a1aa04253bf",alias:"housing-profile"},{id:"3d0f7e63256b43a59fcf037502380685",alias:"insurance-profile"},{id:"fbc685a8837945eb82cde447acfda982",alias:"media-profile"},{id:"da063bf765e341708fad9eeec07b09c7",alias:"personicx-segmentation"},{id:"5003049227804e5cba6ad3bfdbf2dba7",alias:"spending-profile"}],"JP.EsriJapan":[{id:"bd9685651f484488ba24c2838a6a9000",alias:"base-demographic-profile"},{id:"f36b1cc0b9d84ea4b4db1742e875ff80",alias:"demographic-comparison-profile"},
{id:"99a48ec44af94af290ab0e6d691a31c7",alias:"future-population-profile"},{id:"b29af5c2e6754f61ba38ad3128668095",alias:"population-households-profile"},{id:"d568dd78527c462e83eb68cb9ca02f09",alias:"consumer-spending-profile"},{id:"a29c9143bd044dad9475e6b6ee292e46",alias:"base-demographic-profile-ja"},{id:"3bb56ea4c4bd4a2aaa124e2e3a0fad60",alias:"demographic-comparison-profile-ja"},{id:"28ef1772bd884db5ae8885731318e503",alias:"future-population-profile-ja"},{id:"7896c8adf89e4f47ab6e0acc7759a1cd",alias:"population-households-profile-ja"},
{id:"6c28a650baaa40cda26f4fb372b14d0f",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"31cf6eac0339433f8b4b5f8b62e47554",alias:"base-demographic-profile"},{id:"ccf6bc8472ae4ca8852fec621197fec3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"5b60de05c1694a78b6b6ce8e10a48cd4",alias:"base-demographic-profile"}],"PR.ACS":[{id:"f1d79448541642648293f4b75d7b595a",alias:"at-risk-population"},{id:"7943a0c2f1ca4cad967bb0bfeb8af3a4",alias:"commute-profile"},{id:"ef0579311aac4d14a771389f23263445",
alias:"demographic-summary"},{id:"4edd44657989475493ca92a69e80f08c",alias:"health-care-and-insurance"},{id:"c440f0c671264732b16c39f6326a5987",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5886dbf41f984a0a8ec4eb4b5e231584",alias:"key-facts"},{id:"41727f86773c4cf2a37fd99446ea83fc",alias:"multi-area-comparison"}]},"3.29":{"US.census":[{id:"368e2bf603fb42c4aa3dac0fce50cdf8",alias:"demographic-summary"},{id:"a32be4a9e51d4affa4cc1ddc812cb629",alias:"key-facts"},{id:"df985e2579004a3292c3d00615d53c39",
alias:"marketing-profile"},{id:"8c56287427f84ae8b59142fc5bf1df4c",alias:"at-risk-population"},{id:"d95e40c3c93d480ab4d1d0b0adbbc5d4",alias:"portrait-property-flyer"},{id:"f989f9b820cd44d390187402447051b4",alias:"skyscraper"},{id:"0d322ac073584079a8cd6a1bda981fe7",alias:"transportation-to-work"},{id:"2b9f186425844ec390584b739ffca026",alias:"health-care"},{id:"3e9ccce6cca64e70be19ed789de5f290",alias:"executive-summary-call-outs"},{id:"2a812da4de404ceba3969472d32c42e7",alias:"tapestry-profile"},{id:"2cc25f7b5f194012b39c90b5f9bdb8d3",
alias:"nearby-restaurants"},{id:"72d1e9e4cdf94bf9a2020f8214bef9ca",alias:"multi-area-comparison"},{id:"27034d31ab124b9bbe4e63b7df2a0d90",alias:"property-details"},{id:"4a59e329df06480eaa534513eb15f465",alias:"employment-overview"},{id:"d4fe343c4d6f4bea840a715f5b033d2d",alias:"office-market-profile"},{id:"cb2224cc9cb24ce288da729f0650ebf0",alias:"health-care-and-insurance"},{id:"484825ed241c49d58eaf718d46772051",alias:"demographic-profile"},{id:"afee0a2eb16e46cc9bc61b5d82133249",alias:"commute-profile"},
{id:"1d32fabd95b446e99049aa0a04f5508e",alias:"target-market-summary"},{id:"783847f3f03f402d855985b45a8bf2df",alias:"population-trends"},{id:"83aef26e61ca41da9b269c06cc418d79",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"73f1c835b1624ff0b29a6a364f7ba6dc",alias:"key-facts"},{id:"84b05aed2d2f478eb6bb1e4749811cf1",alias:"multi-area-comparison"},{id:"ea0737e1e7554c5caf2be381c28369cc",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"3d8cb941742d4fffbaca48c65b4bd5b5",alias:"housing-profile"},{id:"f126395e7bcc494899cfc1a13a34be1f",
alias:"insurance-profile"},{id:"8da901e5729e457683f2e4f7081b1bda",alias:"media-profile"},{id:"f9ba90b373a245e1b8fd14a027cf1ba5",alias:"personicx-segmentation"},{id:"81fc53b93a0c4269848ce2ae22ec19e2",alias:"spending-profile"}],"JP.EsriJapan":[{id:"79b2394ea50d44f3b4c1b4bdabed6cc2",alias:"base-demographic-profile"},{id:"9e824283a8954639ab0c0ac237b9e14d",alias:"demographic-comparison-profile"},{id:"f5812c2f542644368c0ff34eef7b731c",alias:"future-population-profile"},{id:"b51d7dde64c34a9796418c1788a6762d",
alias:"population-households-profile"},{id:"48a993403d30431784b7bf47a06e4261",alias:"consumer-spending-profile"},{id:"531c59f55de646d5a78fef6c903a678f",alias:"base-demographic-profile-ja"},{id:"cf553f2090a64662a1f9efa8a355964c",alias:"demographic-comparison-profile-ja"},{id:"321150c8ac1049fc9cd253cb12c0b0bc",alias:"future-population-profile-ja"},{id:"e0d6dea7667c47b49f159c207fc311e9",alias:"population-households-profile-ja"},{id:"ba5f50bd617e4519a9322ec24b9cd5b1",alias:"consumer-spending-profile-ja"}],
"DE.DEU_Nexiga":[{id:"60ec4173caac4f87a831447d5bf7b450",alias:"base-demographic-profile"},{id:"98d3d99aadba47a8ab53b0dcd4eebf22",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3978b02fbc354acca14d4e959fa5b531",alias:"base-demographic-profile"}],"PR.ACS":[{id:"e2141ddd911c4aadb403db1e858edb51",alias:"at-risk-population"},{id:"78360505668743e0a39ac0d085612dfa",alias:"commute-profile"},{id:"f296deceb6204f85853ac85e98ba3552",alias:"demographic-summary"},{id:"8a1c4d55a77c4cf9805cec380727fc5a",alias:"health-care-and-insurance"},
{id:"8dd9de996ba0491d82a2ee8f01cd55b0",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5645a1d6023c4d8a9d02943ad57a7ab2",alias:"key-facts"},{id:"e29f56b6d67447e08a45d08981db987c",alias:"multi-area-comparison"}]},"3.30":{"US.census":[{id:"981382ffe90c40bbb60318b1ce338ba4",alias:"demographic-summary"},{id:"f62dec6c9750496796fdc0619c4c107f",alias:"key-facts"},{id:"f737236a8b644f1597a4457862fa169c",alias:"marketing-profile"},{id:"4746caa1254e4d93af121ce74e9aa8d6",alias:"at-risk-population"},{id:"0bcd882dd7a34fd39ace173243534df0",
alias:"portrait-property-flyer"},{id:"4a340b8e642945f6bb7a381d07fb26b6",alias:"skyscraper"},{id:"3e2a42b2d03e42cf91e9727f67273ec3",alias:"transportation-to-work"},{id:"c26e9577d48b4499a07b75215c97c394",alias:"health-care"},{id:"cbc348e601104d0c9bbe971c0297142a",alias:"executive-summary-call-outs"},{id:"d65aaa42b9824864b40eb1a75f2e4cbd",alias:"tapestry-profile"},{id:"d6242e8dd02142bdb98b85f094d5cd9b",alias:"nearby-restaurants"},{id:"aed9e00873fa4010881daaa90e7e8d71",alias:"multi-area-comparison"},
{id:"eb0e0df0856e43cdb874f96945c566ac",alias:"property-details"},{id:"e29ebec17c2c4f42a1a929c40163bb90",alias:"employment-overview"},{id:"b84d0f0f5c69461ea52ce2702f7327d6",alias:"office-market-profile"},{id:"5eba537af36e4490869917ee888bacc4",alias:"health-care-and-insurance"},{id:"afb01a3f91374f65ba4c6be9229f2c15",alias:"demographic-profile"},{id:"8074d1bbbfed4858bb24400a0c7bf224",alias:"commute-profile"},{id:"33621d85b1df4547851c904aaa7d44d2",alias:"target-market-summary"},{id:"440170eaae5240e79abbb0bb7de22b27",
alias:"population-trends"},{id:"0576deee38714cc69357de9675ab39ae",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e054928366604fc7b401dcb4a343cd4c",alias:"key-facts"},{id:"986bc92490234c2697d5771b9771166e",alias:"multi-area-comparison"},{id:"52233708250449bc84f906d86616cace",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"22a86d0f982d4b10934f32129f2674f9",alias:"housing-profile"},{id:"9811b2babd5f4283822782867476b92c",alias:"insurance-profile"},{id:"59957cc0524344449fc6035053bb6c4a",alias:"media-profile"},
{id:"2511035fed0140b8a7eb7ec7240e41eb",alias:"personicx-segmentation"},{id:"defc390648e543508be22704f1db659c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"91a180442f614c4d96fb40e33aa30948",alias:"base-demographic-profile"},{id:"e7415b6c9ff74922850851eac65ddbc6",alias:"demographic-comparison-profile"},{id:"12e9eb63e4834d3681e15196bfc64642",alias:"future-population-profile"},{id:"291cc1bc2cee455483c96f50e5916f1d",alias:"population-households-profile"},{id:"217c72b7d0534ebc81658c71917c3e15",alias:"consumer-spending-profile"},
{id:"48d5baf8e5574abda8fd776219fa0eb6",alias:"base-demographic-profile-ja"},{id:"01a7a0cbacf948b3b715e4f6c55aa5f2",alias:"demographic-comparison-profile-ja"},{id:"0317412d6fb541c9b4067923e314cad3",alias:"future-population-profile-ja"},{id:"0c826ce1e2de415aa2f7af3e615b1fe8",alias:"population-households-profile-ja"},{id:"201211e23758432db4a841dae8ba9428",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"ec6477ce41fa464fb38a360cad0d3da3",alias:"base-demographic-profile"},{id:"e53b2c145f544efaa7d7b4e802c3d747",
alias:"household-profile"}],"ES.ESP_AIS":[{id:"4483924cb42043ec85486c58e61a99ef",alias:"base-demographic-profile"}],"PR.ACS":[{id:"7e3b955c4d904624b4cea5d015e693a0",alias:"at-risk-population"},{id:"8927492627124fd0845de8c0dc02bd3f",alias:"commute-profile"},{id:"a308a300f3b4482ea57b4ea4a54ea5ef",alias:"demographic-summary"},{id:"5800acd3784e4a6d88e3228e1af1164f",alias:"health-care-and-insurance"},{id:"d40e2ba95fec40c6ad68ceddde4e160b",alias:"coronavirus-impact-planning"}],"*.census":[{id:"b9d1ca815d9a4a3ab35196ec299f0917",
alias:"key-facts"},{id:"6f6d601c2eef4bd1a87baa2652e7bb0b",alias:"multi-area-comparison"}]},"3.31":{"US.census":[{id:"784d0b69c02c4cac862b89b0e44cd8fb",alias:"demographic-summary"},{id:"f1bb3a222fab470dbb96a79a51496b2b",alias:"key-facts"},{id:"1780d5b264734757b86e4655d779b213",alias:"at-risk-population"},{id:"8c34121585894e91a50c493c360912f0",alias:"skyscraper"},{id:"1c314d9d06844d44b408caba6099b56b",alias:"executive-summary-call-outs"},{id:"4ee838a250084c9bad84f094895c793c",alias:"tapestry-profile"},
{id:"dfba27ac04694513aee257cdd185c8c2",alias:"nearby-restaurants"},{id:"d7cfb836282747199cf0febea42627cc",alias:"multi-area-comparison"},{id:"3a34213116a340a0bbd0d463025444a2",alias:"property-details"},{id:"b277b8572469425fa54c5506c3dbcdf3",alias:"employment-overview"},{id:"eaf35c41f5714f48a1aa61fcbd6ae05f",alias:"office-market-profile"},{id:"688f86931cc345f796154717dc6d0a15",alias:"health-care-and-insurance"},{id:"cb4edb43a1ae473ca651388b5c3fa54f",alias:"demographic-profile"},{id:"49224c10d4ac4c7ab0f8e016165ce235",
alias:"commute-profile"},{id:"db67445e4dfa4b6c8c1e5fd30b229c92",alias:"target-market-summary"},{id:"6c9360bfec9041ddba0f03440cb446ca",alias:"population-trends"},{id:"2ae07567c78847abacb14773ffe9dede",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"0704defc6960439ea5b9c484af15eb4c",alias:"key-facts"},{id:"ee01fe05db964878bc6fb627e55dc9b1",alias:"multi-area-comparison"},{id:"a426bb6d944a46658640aee2ba480866",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"710037ca0f024ec5abbe4cf9fecad23f",alias:"housing-profile"},
{id:"83bc643ea48344c892a8e9636e3677dd",alias:"insurance-profile"},{id:"53f63e3a9e854a8fa5e2c0222df6f848",alias:"media-profile"},{id:"ca9d66bf4bf940918129d0d5c97e0b50",alias:"personicx-segmentation"},{id:"ab19f90750fd469aa702f961b12eaee8",alias:"spending-profile"}],"JP.EsriJapan":[{id:"7f7c37e8f1fa4ab18b88368c12058eff",alias:"base-demographic-profile"},{id:"25a71f196b7e4db182be346264b442dd",alias:"demographic-comparison-profile"},{id:"e1075eaada7744a59ecabfc445dcd877",alias:"future-population-profile"},
{id:"8e2746d993584a7d94d0e66ca6dabdaa",alias:"population-households-profile"},{id:"bc9b91d7ae2c41a5bdece1d322ef6b88",alias:"consumer-spending-profile"},{id:"4f4736d5b2f842faaee83c57417c56b6",alias:"base-demographic-profile-ja"},{id:"bc400448bf3347619349cb7d4ccb3d87",alias:"demographic-comparison-profile-ja"},{id:"00ad3ad05e384d7ea764b356a950356d",alias:"future-population-profile-ja"},{id:"db94d6af598f48778c4471f9fa0d6e4f",alias:"population-households-profile-ja"},{id:"c5f602a9d6714dd6bd6a2b720eced874",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"b0cd9df36d0747ecac2bc34f055f5583",alias:"base-demographic-profile"},{id:"1751ab1998db4e6fb79f484069605cfd",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d17356c9a5549dbaa4096365e7eb703",alias:"base-demographic-profile"}],"PR.ACS":[{id:"7923818907d248ff8dcd7a5941e89b57",alias:"at-risk-population"},{id:"c0b28d710379405eac4ecb6a64d817b4",alias:"commute-profile"},{id:"4b64ec164a3d4830ae8a4cedf067f55a",alias:"demographic-summary"},{id:"5e47986d4c4644a29a28c92c077919f2",
alias:"health-care-and-insurance"},{id:"11c43309216b4d4a8fbd9a03cbcc22ec",alias:"coronavirus-impact-planning"}],"*.census":[{id:"f2d46b136acc46e2a2220388ddc43be0",alias:"key-facts"},{id:"228155af0095410c961cc82f33cdcf49",alias:"multi-area-comparison"}]},"3.32":{"US.census":[{id:"2ff58abf55554be4b19006c1e607afaa",alias:"demographic-summary"},{id:"a19b321e3adc441886e706bb9704005c",alias:"key-facts"},{id:"f1e3b0c93e1d44e299eb0b752f93b7db",alias:"at-risk-population"},{id:"3bbc96da4ca142c7b80b082b0f986110",
alias:"skyscraper"},{id:"1302184a2f584b86943b6c51d40acace",alias:"executive-summary-call-outs"},{id:"58035dcee74b4875bcd951b9174155d1",alias:"tapestry-profile"},{id:"4da5867dfda046ddb4b82ab01b7cb568",alias:"nearby-restaurants"},{id:"4498b9e35665480cafe3985f788ca61d",alias:"multi-area-comparison"},{id:"83a11d5f38f84e709ff1e24786e963b4",alias:"property-details"},{id:"0a0354d2d0d842d8bd8e05d40545fc5b",alias:"employment-overview"},{id:"400924aa9d5f4bee8b9dd0c0af21dfbb",alias:"office-market-profile"},
{id:"0a502ea9be8a43fdb6cd2fb5ff7503bc",alias:"health-care-and-insurance"},{id:"6147ac21718149a69ce15831f12181ed",alias:"demographic-profile"},{id:"4cdaddd947064ca690ebc06eec06ea57",alias:"commute-profile"},{id:"a8fe08a9c5114260a2a6f7ca436d36f6",alias:"target-market-summary"},{id:"34a17e1fceb646228e94089ec5e0890f",alias:"population-trends"},{id:"eb5d984d78364a6596cd97e0bf7901a5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"5f6e17f3729145959fb38ed2cd508970",alias:"key-facts"},{id:"c86709cbd72043708e09e4a641adfbd0",
alias:"multi-area-comparison"},{id:"bd9e3a17678843d4b1fa0716af91c231",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"470686f333d140c7b516294465eea037",alias:"housing-profile"},{id:"ab11f2f11ea3439197769a8189451bea",alias:"insurance-profile"},{id:"f0e6736d0f364d4b88ea613746e57c81",alias:"media-profile"},{id:"bfe0814bc0604a8faa48d01b026ef7a5",alias:"personicx-segmentation"},{id:"bd1d4c7be5ad41ae909267b5e9c5f2dc",alias:"spending-profile"}],"JP.EsriJapan":[{id:"b9dcbb9f31fd4be7bd96a2f89ce66a1c",alias:"base-demographic-profile"},
{id:"830ddad066c14c0dad27367a1b2ef132",alias:"demographic-comparison-profile"},{id:"7574f89d591f432da6ffdb94dcfdac52",alias:"future-population-profile"},{id:"ec8785d4c9cb446394e07fa7dd8451fd",alias:"population-households-profile"},{id:"9ac85d73187548b2bb0d0b4a73f88199",alias:"consumer-spending-profile"},{id:"e99eee823684452fbe564fe42dac9535",alias:"base-demographic-profile-ja"},{id:"8598d6a8550d46aebd3fd598ceaefae7",alias:"demographic-comparison-profile-ja"},{id:"fdf81ddffb374e3f898006ffa59e259e",
alias:"future-population-profile-ja"},{id:"f2468c2fef314427bd0865b460ef554f",alias:"population-households-profile-ja"},{id:"a96f28fb67024109b7c33161f3c9b308",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"40a5ba79d1204e78ac6deaa633ccd59b",alias:"base-demographic-profile"},{id:"2e647098c613476bbd92b1e07331cb86",alias:"household-profile"}],"ES.ESP_AIS":[{id:"7d82cae4b3fc4575bab56ec82f51c368",alias:"base-demographic-profile"}],"PR.ACS":[{id:"aa65005b75ba4e158afe63baa4bc5fe2",alias:"at-risk-population"},
{id:"292a269a813e4d7797baf88a76c11a8c",alias:"commute-profile"},{id:"b1d50628f2484689b9e39d49fc2e16a0",alias:"demographic-summary"},{id:"64839b7a81be45e287e805afc145652e",alias:"health-care-and-insurance"},{id:"44be3c42b70c4aee840fdeb4656b7922",alias:"coronavirus-impact-planning"}],"*.census":[{id:"ce57630d5cc24759809dd54bc1f82c91",alias:"key-facts"},{id:"c48ee0f58c8645bf8d689eb0db2d2936",alias:"multi-area-comparison"}]},"3.33":{"US.census":[{id:"55689c3ee7c1490e83accae002a8d164",alias:"demographic-summary"},
{id:"173e40bebc9d426a8e4680242acafea4",alias:"key-facts"},{id:"218eba57314e476ba16d1d5d40bb0182",alias:"at-risk-population"},{id:"3d470c82d8664e34b5026675596a7a87",alias:"skyscraper"},{id:"b9381f481f9f417f9647e0a2c8686979",alias:"executive-summary-call-outs"},{id:"d2800b578d1c4dd38ac95ce36882d881",alias:"tapestry-profile"},{id:"d9d8109c537943a78a24d65110291b43",alias:"nearby-restaurants"},{id:"2e835e58629a4f1e8192a729792b638f",alias:"multi-area-comparison"},{id:"6f3c32ed18834a4ea34b200e32ad7c33",
alias:"property-details"},{id:"6b1267be3fcb401bbcb49afd221713cf",alias:"employment-overview"},{id:"67e6efc15cb142c2a7cc30a48a59c769",alias:"office-market-profile"},{id:"9d8b447adc634228b24deb315107c0f0",alias:"health-care-and-insurance"},{id:"e45f96db738140869981b7443b6e2658",alias:"demographic-profile"},{id:"88d896eada3340dc8f8f1a2406bd48f9",alias:"commute-profile"},{id:"61492956f89a43ee86d245fca92858a2",alias:"target-market-summary"},{id:"91de69dede414856892dfdd94d2c4bab",alias:"population-trends"},
{id:"ee9c6fdc902e4ea09509e4d1bf1582b5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"dfb663da790248fe89504c662c42aae3",alias:"key-facts"},{id:"9873fcafe7194fcf9dffa8bbb8e001a1",alias:"multi-area-comparison"},{id:"4766ad797ef84968be4b4d0d54b98416",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"2212ff30c72143e6bcd9b8f26b01c47f",alias:"housing-profile"},{id:"c5efcef364ac4d8f82a6d54010ff75c7",alias:"insurance-profile"},{id:"e00894c000a94c42aefce551fe4e48c2",alias:"media-profile"},{id:"9d1da1c80e93407cb94589cee43a0f5a",
alias:"personicx-segmentation"},{id:"578199262aa646bf8b0713f3f2160af6",alias:"spending-profile"}],"JP.EsriJapan":[{id:"00bd747c0e48477d8df692848560a8a2",alias:"base-demographic-profile"},{id:"8ac4bd99dd1848dc98967419ab8d299c",alias:"demographic-comparison-profile"},{id:"88f94b5e3b6d414d913957b46e9f8394",alias:"future-population-profile"},{id:"41864cea64f3432a90006eb9a1f97608",alias:"population-households-profile"},{id:"44333ddcda38473d9a24010ed387eda7",alias:"consumer-spending-profile"},{id:"c35ebbeffb3b47fc9bbe3fc6283aaa7b",
alias:"base-demographic-profile-ja"},{id:"6c8a565d12954927b83daaad81409a25",alias:"demographic-comparison-profile-ja"},{id:"fcba5d5750514c9c93b2cb5222609d98",alias:"future-population-profile-ja"},{id:"7ad858351b6b4268b791b6cc24bf4e0f",alias:"population-households-profile-ja"},{id:"7d94fec6df6b4bff9ad14f5b711f18c6",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"571f323738c44d5a8b85d6d1e78d9c52",alias:"base-demographic-profile"},{id:"ef7624e051b6407488d8ad59b7979fc4",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"46e9329c7b2042fa84dfc1444f7decc0",alias:"base-demographic-profile"}],"PR.ACS":[{id:"0cb7ba4d407640ff967829ae7dd39396",alias:"at-risk-population"},{id:"7598826f28124abf9134801a607d56ce",alias:"commute-profile"},{id:"848c5cc8a4284065a0055b047a106adf",alias:"demographic-summary"},{id:"ecfc8db522004ea6848667e43589efd9",alias:"health-care-and-insurance"},{id:"4685d4c6c51e4ef392bdab89c0af8979",alias:"coronavirus-impact-planning"}],"*.census":[{id:"e4d3d1675d0044089f98a0f85ea16c8b",alias:"key-facts"},
{id:"33b6e27f43644811b8a58f15c0832a67",alias:"multi-area-comparison"}]},"3.34":{"US.census":[{id:"13cd4abfa97e43b9a5f9d4ddcb43f492",alias:"demographic-summary"},{id:"8861429ac06948f79cdcaaadb39d597f",alias:"key-facts"},{id:"1056cbef133f49a18409a192fbdc221a",alias:"at-risk-population"},{id:"25145b3ca4284dcc999c8d05182588cd",alias:"skyscraper"},{id:"7db2109b9f844be48f3e9154e992699f",alias:"executive-summary-call-outs"},{id:"f43c00c7b10241c097fb71fd5acf1ec2",alias:"tapestry-profile"},{id:"5fb04926a70345c18d6e21d9972ea347",
alias:"nearby-restaurants"},{id:"fdd0406e7815402cbf70716c68f4f7d6",alias:"multi-area-comparison"},{id:"7b716975146743b3a56762befaca71ad",alias:"property-details"},{id:"2c0be4fe4d7245e39b4afd9b8eb607a9",alias:"employment-overview"},{id:"c7f42910bc4b49209835e333c6078e71",alias:"office-market-profile"},{id:"7517a7a0409d42748c7ad94f81322bc2",alias:"health-care-and-insurance"},{id:"9919270d8b4846cb86761103def73e76",alias:"demographic-profile"},{id:"0bb0cc183ae145febbf3585518eeaae6",alias:"commute-profile"},
{id:"27853eda823e4574b0666d533ba39061",alias:"target-market-summary"},{id:"1df7c5b56b6e431982ef2da037c081c8",alias:"population-trends"},{id:"aaf4cc69e58f43ea87a0c1e493431dd8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"3a2fb82b034d48bbb9474f8c158c32a8",alias:"key-facts"},{id:"100f5b4d3cca46b38fd651e39cce97b1",alias:"multi-area-comparison"},{id:"41f7b7cfe9cb490593ace88aa627c6ca",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"f5b0ec07181f4b58a01ee0ca1df8201a",alias:"housing-profile"},{id:"a5e0b9b228da4ba5baaa5811c57f6552",
alias:"insurance-profile"},{id:"5d24250e3cc14b0db3b3f9884462efbf",alias:"media-profile"},{id:"f216c6574ae0453c951e66ee8fb6b20f",alias:"personicx-segmentation"},{id:"267c816948334e72ab9ed94253790e22",alias:"spending-profile"}],"JP.EsriJapan":[{id:"434e01eacc8e432c8400f5a5aef6f3e4",alias:"base-demographic-profile"},{id:"c44be13f1f8e412288e58048136681d6",alias:"demographic-comparison-profile"},{id:"35c0c12ce88645e7b7cbc0ffe73af85d",alias:"future-population-profile"},{id:"e87fb84cffaa49dba14b104d5b994aa5",
alias:"population-households-profile"},{id:"31a4988db08c41d6b9ce755b21ea0b26",alias:"consumer-spending-profile"},{id:"bf9f0203a4c14d03823beadb3f7ac043",alias:"base-demographic-profile-ja"},{id:"fdbe0d4286ab419981bc80a96b46bdb1",alias:"demographic-comparison-profile-ja"},{id:"7541a90960e345308f73e99e4da5c0a8",alias:"future-population-profile-ja"},{id:"f17ecec5cb8d4baeab7af68e1e9ce683",alias:"population-households-profile-ja"},{id:"ddaf4fb6c09447f6beaf4218139bfa20",alias:"consumer-spending-profile-ja"}],
"DE.DEU_Nexiga":[{id:"80c74804e91440f08695ba11456f96af",alias:"base-demographic-profile"},{id:"eb49e7ee98f04e1e914a4ce29bbfc7d3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"2e82d587530548569ad792556044342b",alias:"base-demographic-profile"}],"PR.ACS":[{id:"b473aa30469e4e2eabcca3da3f306e94",alias:"at-risk-population"},{id:"4e91594fb4fe4bf3be24380408f1b0c6",alias:"commute-profile"},{id:"321c818398684510ac62e3403ad6628f",alias:"demographic-summary"},{id:"1c3d60191b12460ca9a23dfcbce0c1db",alias:"health-care-and-insurance"},
{id:"5e6d78b1c4aa4168b7a3af5751d92261",alias:"coronavirus-impact-planning"}],"*.census":[{id:"530b6aa054664166a7a3ab5f1e82e19b",alias:"key-facts"},{id:"4b8ddef8e8f0406ea9b0a6c3d062186a",alias:"multi-area-comparison"}]},"3.35":{"US.census":[{id:"167425f5e12d421eb5784cd3681eab45",alias:"demographic-summary"},{id:"a1ab8710e1104385941825fe772d58fa",alias:"key-facts"},{id:"b3103dee1c994fa0916bd2b5c8ad2cab",alias:"at-risk-population"},{id:"0d261009a37247b4913266bc7093fedb",alias:"skyscraper"},{id:"2e7b01260b7840c196f30be52bf0b57e",
alias:"executive-summary-call-outs"},{id:"f47aebc28aa64c7f924053a8c1ee16bd",alias:"tapestry-profile"},{id:"36e6e303ebd943d4aa55604ba7dc0bc0",alias:"nearby-restaurants"},{id:"2f6307fad95f43b193ac74f236fa82d3",alias:"multi-area-comparison"},{id:"1ac99acae7cf44c182727aca1387acc9",alias:"property-details"},{id:"33cb09681a2147a5a07ae801596568c3",alias:"employment-overview"},{id:"8abaef7ba033448693dc6e6db55667c7",alias:"office-market-profile"},{id:"d29fcd15f66f46edad86499675b0ec03",alias:"health-care-and-insurance"},
{id:"e631e96f389b4075bc249c01d7f4d1b7",alias:"demographic-profile"},{id:"f97c7b4c8bf84390ad5a5807fb6ca417",alias:"commute-profile"},{id:"c9aef7db1d56495eaf0765e1f3a2d87d",alias:"target-market-summary"},{id:"b0f42ee46e80440cbb567a9a754ba7d4",alias:"population-trends"},{id:"ac36af7d86b74071a1cff5dc11f52ae8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e1b06b3915bc4e9ba702a604931390f2",alias:"key-facts"},{id:"aabeb118af9d4d0ba61177b82ff20e6c",alias:"multi-area-comparison"},{id:"d91115c92b96414b8bebd5d5bee75feb",
alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"dc94c7a6946a49b5a2f3997a1d751b5d",alias:"housing-profile"},{id:"caaaf49e014840a2a7b2497a970fabc0",alias:"insurance-profile"},{id:"67e0ad06a076477d81f853755fe34fd9",alias:"media-profile"},{id:"2b777fe129f149e9830fa5659d83d164",alias:"personicx-segmentation"},{id:"109338143a024b8eb70a1afcad567363",alias:"spending-profile"}],"JP.EsriJapan":[{id:"1f22c748ad5441a197c4c35ec3b88c6e",alias:"base-demographic-profile"},{id:"3321fc47d60b465bbf1f8312a2656c9d",alias:"demographic-comparison-profile"},
{id:"44f656e0dd634f248501030bec1e4e56",alias:"future-population-profile"},{id:"10bee112cd5c452db06145cc97739272",alias:"population-households-profile"},{id:"9d50b931700f4d7e8bfff04362baf2b7",alias:"consumer-spending-profile"},{id:"6f15e753e76741e5b11443d987f9e31b",alias:"base-demographic-profile-ja"},{id:"c89ff30c389b4af28c5e95d56b8b8a2b",alias:"demographic-comparison-profile-ja"},{id:"82cf4d90d4444a9fab0db12c38398ddb",alias:"future-population-profile-ja"},{id:"de0f4294ae8548f8852d3cfc44689262",alias:"population-households-profile-ja"},
{id:"aa60be09466d494dab06b7fd3f227838",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"f65d4ab5669541eb82f8cfa44892076d",alias:"base-demographic-profile"},{id:"8f24b985758840bc865eb510c3a096c4",alias:"household-profile"}],"ES.ESP_AIS":[{id:"19973b06ff48411cbe8da96db2201889",alias:"base-demographic-profile"}],"PR.ACS":[{id:"08263fc5aa27402284ad1dd80de03ffe",alias:"at-risk-population"},{id:"1386ceb53e0741428b78182d5ad1295c",alias:"commute-profile"},{id:"52ca001ddcf54d4eab0bbc476a962486",
alias:"demographic-summary"},{id:"79480fbe1f5048b69bc0611a2828d74b",alias:"health-care-and-insurance"},{id:"4a9c5dbf1ee6480bbed9a48bdb8aa2ed",alias:"coronavirus-impact-planning"}],"TH.EsriThailand":[{id:"1b202dbb81d7436c91dbd98f7f16da74",alias:"demographic-by-gender"},{id:"a7575375c72244e3819a694bf6dcbd52",alias:"key-facts-circle"},{id:"2403e972375d4b178185c2dbcf94979f",alias:"market-indicators"},{id:"575cfdd3fa9b4e8fafced3a47944156d",alias:"nearby-finance"},{id:"48ee9e3d4a0b4a208a3257ef2cc07692",
alias:"nearby-restaurants"},{id:"d446734d5e3e4d13a4c1aebdd9497793",alias:"population-profile"}],"IE.census":[{id:"e6ef23654f6e48fa8854931b539418ac",alias:"community-profile"},{id:"83d14bb8a70e415e9b7d4df3a6a32690",alias:"population-and-spending-profile"},{id:"6bdafe103ba647ed9fb1de0ac21412ea",alias:"site-statistics"},{id:"6e388a60f9bc4194b79ac26140bfb29e",alias:"market-indicators"}],"FR.census":[{id:"938a7f87e6fd4b238be125bb2b25e0ec",alias:"market-indicators"}],"FR.FRA_EsriFrance":[{id:"4a53f2a681c54186a29b8e0f21b0d691",
alias:"market-summary"},{id:"35a06097a0e5427c87f8d14235fb8655",alias:"summary"}],"GB.census":[{id:"60d7a69925de41719c5a1779cbe2f9fc",alias:"market-indicators"}],"AU.AUS_ABS":[{id:"bfaa3c492a714a2292cc195a4cec7157",alias:"chain-link"},{id:"a6f5005fc71d4e3692ba2dccbc9085c6",alias:"community-profile"},{id:"4890c1ff7a7c464cb37650a76b77ef20",alias:"hexagon-facts-dark"},{id:"685c139ab196404e992bbf3a5c1788c2",alias:"hexagon-facts-light"},{id:"8a7f81f303c64baf93740102f5142420",alias:"international-community-profile"},
{id:"558a0b0e8c9c45b5b5d5aa73525de87b",alias:"key-facts-abs"},{id:"9fe2117084584005a1724635ebcb7a03",alias:"occupation-profile"}],"*.census":[{id:"de0d25e45d4549439c440d9f893afe18",alias:"key-facts"},{id:"19f9971696f74bae8c8fd383a61abac3",alias:"multi-area-comparison"},{id:"8ce8f38bdb87448eb09c031e3206aa76",alias:"key-facts-circle"}]}}}function f(e){var g=k();e=e||p.jsapiVersion;e=g[e]||g["3.35"];g={};for(var h in e){var m={};e[h].forEach(function(n){m[n.alias]=n.id});var r=h.substr(0,h.indexOf("."));
g[r]=m}return g}function c(e,g){g=f(g);return t.mixin({},g["*"],g[e])}l=l.geoenrichment.dijit.ReportPlayer.StandardTemplates;var a,b={"demographic-summary":l.demographicSummary,"key-facts":l.keyFacts,"marketing-profile":l.marketingProfile,"at-risk-population":l.atRiskPopulation,"portrait-property-flyer":l.portraitPropertyFlyer,skyscraper:l.skyscraper,"transportation-to-work":l.transportationToWork,"health-care":l.healthCare,"executive-summary-call-outs":l.executiveSummaryCallOuts,"tapestry-profile":l.tapestryProfile,
"nearby-restaurants":l.nearbyRestaurants,"multi-area-comparison":l.multiAreaComparison,"property-details":l.propertyDetails,"employment-overview":l.employmentOverview,"office-market-profile":l.officeMarketProfile,"health-care-and-insurance":l.healthCareAndInsuranceStatistics,"demographic-profile":l.demographicProfile,"commute-profile":l.commuteProfile,"target-market-summary":l.targetMarketSummary,"population-trends":l.populationTrends,"coronavirus-impact-planning":l.coronavirusImpactPlanning,"prizm-profile":l.prizmProfile,
"housing-profile":l.housingProfile,"insurance-profile":l.insuranceProfile,"media-profile":l.mediaProfile,"personicx-segmentation":l.personicxSegmentation,"spending-profile":l.spendingProfile,"base-demographic-profile":l.baseDemographicProfile,"demographic-comparison-profile":l.demographicComparisonProfile,"future-population-profile":l.futurePopulationProfile,"population-households-profile":l.populationHouseholdsProfile,"consumer-spending-profile":l.consumerSpendingProfile,"base-demographic-profile-ja":"\u57fa\u672c\u7d71\u8a08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",
"demographic-comparison-profile-ja":"\u4eba\u53e3\u7d71\u8a08\u6bd4\u8f03\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","future-population-profile-ja":"\u5c06\u6765\u4eba\u53e3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","population-households-profile-ja":"\u4eba\u53e3\u30fb\u4e16\u5e2f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","consumer-spending-profile-ja":"\u6d88\u8cbb\u984d\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","household-profile":l.householdProfile},d={portalUrl:"http://www.arcgis.com",user:"esri_reports",query:"http://www.arcgis.com/home/search.html?q\x3downer%3Aesri_reports",
aliasToID:function(e,g,h){return c(e,h)[g]},aliasToLabel:function(e){return b[e]},getAliases:function(e,g){e=Object.keys(c(e,g));e.sort(function(h,m){return h.localeCompare(m)});return e},getListOptions:function(e,g){return d.getAliases(e,g).map(function(h){return{value:d.aliasToID(e,h,g),label:b[h]}})},getSupportedCountries:function(e){return Object.keys(f(e)).map(function(g){return"*"===g?"AU":g})},getLibrary:function(){var e=t.clone(k()),g;for(g in e){var h=e[g];h["AU.census"]=h["*.census"];delete h["*.census"]}return e}};
return d})},"esri/dijit/geoenrichment/utils/PortalQueryUtil":function(){define([],function(){var t={combineQueryString:function(p){var l="";p.type&&(l+='type:"'+p.type+'"');p.typeKeywords?l=Array.isArray(p.typeKeywords[0])?l+(" typekeywords:("+p.typeKeywords.map(function(k){return t.combineTypeKeywords(k)}).join(" OR ")+")"):l+(" typekeywords:"+t.combineTypeKeywords(p.typeKeywords,p.typeKeywordsNot)):p.typeKeywordsNot&&(l+=" typekeywords:"+t.combineTypeKeywords(null,p.typeKeywordsNot));p.owner&&(l+=
" owner:"+p.owner);p.isShared&&(l+=p.orgId?" ((orgid:"+p.orgId+' AND access:"public") OR access:"shared" OR access:"org")':' (access:"shared" OR access:"org")');p.ownerNot&&(l+=" NOT owner:"+p.ownerNot);return l},combineTypeKeywords:function(p,l){p=p?t._combineArray(p):"";return l?(l=t._combineArray(l," OR "),"("+p+" NOT "+l+")"):p},_combineArray:function(p,l){var k="string"===typeof p?p:1===p.length?p[0]:null;return k?"("===k.charAt(0)||'"'===k.charAt(0)?k:'"'+k+'"':"("+p.map(function(f){return'"'+
f+'"'}).join(l||" ")+")"}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer":function(){define(["./query/TemplateJsonQueryUtil"],function(t){return{collectVariablesStats:function(p){var l={};t.processTemplateFieldInfos(p,function(k){k.infographicJson&&k.infographicJson.variables?k.infographicJson.variables.forEach(function(f){l[f]=1}):k.hasVariable&&(k.usedMapTos?k.usedMapTos.forEach(function(f){l[f]=1}):k.fullName&&(l[k.fullName]=1))});
return l},collectMapItemIdsAndNames:function(p){var l={},k={};t.calcNumberOfMaps(p,function(a){a.defaultBasemapId&&(l[a.defaultBasemapId]=1);a.defaultBasemapName&&(k[a.defaultBasemapName]=1);a.webMapId&&(l[a.webMapId]=1);a.webMapName&&(k[a.webMapName]=1)});p=[];for(var f in l)p.push(f);var c=[];for(f in k)c.push(f);return{itemIds:p,mapNames:c}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/utils/InfographicJsonUtil":function(){define(["esri/dijit/geoenrichment/config","esri/dijit/geoenrichment/utils/ArrayUtil"],
function(t,p){var l={getDefaultLevels:function(){var k=t.levels.slice();k.push(t.highestLevel);return k},getLevels:function(k){k=k.levels&&k.levels.length?k.levels:l.getDefaultLevels();return p.removeDuplicates(k)},getSubLevels:function(k){k=l.getLevels(k);k.pop();return k},getHighestLevel:function(k){k=l.getLevels(k);return k[k.length-1]},setLevels:function(k,f){f=p.removeDuplicates(f||[]);k.levels=f.length?f:l.getDefaultLevels()},getDataDrilling:function(k,f){"string"!==typeof f&&(f=(f=k.variableTables&&
k.variableTables[f])&&f.variable.fieldInfo&&f.variable.fieldInfo.templateName);return k.dataDrilling&&k.dataDrilling[f]},setDataDrilling:function(k,f,c){f&&(k.dataDrilling=k.dataDrilling||{},c?k.dataDrilling[f]=c:delete k.dataDrilling[f])},validateDataDrilling:function(k){var f=k.dataDrilling;if(f){var c={};k.variableTables.forEach(function(a){a.variable&&a.variable.fieldInfo&&a.variable.fieldInfo.templateName&&(c[a.variable.fieldInfo.templateName]=!0)});Object.keys(f).forEach(function(a){c[a]||delete f[a]})}},
analyzeVariables:function(k){k=k.fieldInfos?k.fieldInfos.map(function(b){return b.fullName}):k.variables;if(1===k.length&&-1!==k[0].indexOf(".*"))return{dataCollectionID:k[0].substr(0,k[0].indexOf("."))};var f={},c,a;k.forEach(function(b,d){f[b.substr(0,b.indexOf("."))]=1;c=b.substr(b.indexOf(".")+1);a=b});return{dataCollectionID:1===Object.keys(f).length?Object.keys(f)[0]:null,variableID:1===k.length?c:null,fullName:1===k.length?a:null}}};return l})},"esri/dijit/geoenrichment/config":function(){define(["esri/urlUtils"],
function(t){t=t.getProtocolForWebResource();return{portalUrl:t+"//arcgis.com",server:t+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:t+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasPreprocessor":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/string esri/graphic esri/symbols/jsonUtils ./FeatureNameUtil ../tasks/EnrichAreasTask esri/dijit/geoenrichment/utils/GeometryUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g){var h={preprocessAreas:function(q,u){u=u||{};q.analysisAreas=q.analysisAreas.filter(function(w){return w.feature&&w.feature.geometry&&"polygon"===w.feature.geometry.type||w.geographies&&w.geographies.length||w.buffer});-1!==u.analysisAreasLimit&&(u.analysisAreasLimit=u.analysisAreasLimit||20,q.analysisAreas.length=Math.min(q.analysisAreas.length,u.analysisAreasLimit));h.provideAreasIndexes(q);q.analysisAreas.forEach(function(w){w.feature&&!w.feature.attributes&&(w.feature.attributes=
{})});q.analysisAreas.forEach(function(w){w.name=w.name||w.shortName;if(!w.name&&w.feature){var y=a.guessFeatureName(w.feature);y&&(w.name=w.shortName=y)}});return p(m.generalize(q.analysisAreas),function(){return l([r.provideGeographyFeatures(q),n.provideBufferFeatures(q)])})},provideAreasIndexes:function(q){var u=q.combinedAreasInfo.groups,w=u&&u.length;q.analysisAreas.forEach(function(y,C){y.index=C;u&&(u.forEach(function(D,G){-1!==D.indexes.indexOf(C)&&(y.isGrouped=!0,y.groupIndex=G)}),"number"!==
typeof y.groupIndex&&(y.isGrouped=!1,y.groupIndex=w++))})},removeGroupInfo:function(q){q.forEach(function(u){delete u.isGrouped;delete u.groupIndex})}},m={generalize:function(q){var u=[],w=[];q.forEach(function(y,C){!y.feature||y.geographies&&y.geographies.length||(u.push(y.feature),w.push(C))});return p(function(y){function C(z){var E=0;z.geometry.rings.forEach(function(I){E+=I.length});return E}var D=d.needGeneralizeGeometry(y,e.generalization.factor,e.generalization.maxVerticesInAllFeatures,e.generalization.numVerticesPerFeature);
if(D){var G=!0;var F=[];y=y.map(function(z){F.push(C(z));return new f(z.geometry,z.symbol,z.attributes)});var B=d.generalizeGeometry(y,D,e.generalization.numVerticesPerFeature,!0)}return p(B,function(){G&&(console.log("Generalize features:"),y.forEach(function(z,E){console.log("#"+E+" "+F[E]+" \x3d\x3e "+C(z))}));return y})}(u),function(y){w.forEach(function(C){q[C].feature=y.shift()})})}},r={provideGeographyFeatures:function(q){return l(q.analysisAreas.map(function(u){if(!u.feature&&u.geographies&&
u.geographies.length)return(new b).createFeatureForGeographies(u.geographies,{countryID:q.countryID,hierarchy:q.hierarchy}).then(function(w){u.feature=w;u.name=u.name||u.feature.attributes.StdGeographyName;u.description=u.description||g.geoenrichment.dijit.ReportPlayer.ReportPlayer.geography;u.address=u.address||u.name;u.geographies[0].attributes&&t.mixin(u.feature.attributes,u.geographies[0].attributes);if(w=u.geographies[0].symbol)w=w.toJson?w:c.fromJson(w),u.feature.setSymbol(w)})}))}},n={provideBufferFeatures:function(q){var u=
this,w=q.analysisAreas.filter(function(C){return!C.feature&&C.buffer}),y=w.map(function(C){return C.buffer});return(new b).createFeaturesForBuffers(y,{countryID:q.countryID}).then(function(C){C.forEach(function(D,G){G=w[G];G.feature=D;u._applyBufferParamsToArea(G)})})},_applyBufferParamsToArea:function(q){var u=q.buffer;if(!q.name){var w=g.geoenrichment.dijit.bufferTitle.pointRing;w[u.units]&&(q.name=k.substitute(w[u.units],{radius:u.radius}))}q.description=q.description||"Ring";u.attributes&&t.mixin(q.feature.attributes,
u.attributes);if(u=u.symbol)u=u.toJson?u:c.fromJson(u),q.feature.setSymbol(u)}};return h})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/FeatureNameUtil":function(){define([],function(){return{_nameScores:[/^name$/i,/^title$/i,/(^name)|(name$)/i,/(^title)|(title$)/i],guessFeatureName:function(t){var p=Object.keys(t.attributes),l;this._nameScores.some(function(k){return p.some(function(f){if(k.test(f))return l=f,!0})});return t.attributes[l]||""}}})},"esri/dijit/geoenrichment/utils/GeometryUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/geometry/Polygon esri/workers/WorkerClient ./PolygonUtil ./GeometryUtil_base".split(" "),
function(t,p,l,k,f,c){function a(d,e,g){var h=new p,m=new k("./mutableWorker",function(){m.importScripts(["../dijit/geoenrichment/utils/GeometryUtil_worker","../dijit/geoenrichment/utils/GeometryUtil_base"]).then(function(){m.postMessage({rings:d,maxAllowableOffset:g}).then(function(r){var n=r.rings;e.forEach(function(q){for(var u=q.source.length=0;u<q.count;u++)q.source.push(n.shift())});h.resolve();m.terminate()})})},!0);return h.promise}var b=t.mixin({},c);b.calculateMaxAllowableOffset=function(d,
e,g){"number"!==typeof e&&(e=1);e*=d.extent.getWidth()/d.width;g&&(e*=Math.min(g.getWidth()/d.extent.getWidth(),g.getHeight()/d.extent.getHeight()));return e};b.getNumberOfPoints=f.getNumberOfPoints;b.needGeneralizeGeometry=function(d,e,g,h){if(!d||!e)return!1;h=h||(g?g/10:500);g=g||5E3;Array.isArray(d)||(d=[d]);var m=0>e,r=0,n=Math.abs(e)/100,q=0,u=0,w;d.forEach(function(y){y=y.geometry||y;if(!y.rings||!y.getExtent)return!1;var C=y.getExtent();if(C=C.getWidth()*C.getHeight())C=Math.sqrt(C),y=b.getNumberOfPoints(y),
q+=y,u=Math.max(u,y),m&&(r=Math.max(r,C*n)),w||(w=m?q>g:y*e>4*C)});return w&&u>h?r||e:0};b.generalizeGeometry=function(d,e,g,h){if(!d||!e||0>e)return!1;g=g||500;Array.isArray(d)||(d=[d]);var m=[],r=[];d.map(function(n){var q=n.geometry||n;if(q!=n&&q.rings){n.geometry=new l;n.geometry.setSpatialReference(q.spatialReference);var u=n.geometry.rings}u&&q.rings.forEach(function(w){u.push(w.slice())});b.getNumberOfPoints(q)>g&&(n=u||q.rings,m=m.concat(n),r.push({source:n,count:n.length}))});if(h&&window.Worker)return a(m,
r,e);m.forEach(function(n){(new b.RingInfo(n)).generalize(e,.8)})};return b})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(t,p,l,k,f,c,a,b,d){var e=window.Blob||window.webkitBlob||window.mozBlob,g=window.URL||window.webkitURL||window.mozURL;t=p([t],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(h,m,r){this._isIE=
c("ie");this.returnDeferreds=!!r;this._queue={};this._acceptMessage=k.hitch(this,this._acceptMessage);this._errorMessage=k.hitch(this,this._errorMessage);h&&this.setWorker(h,k.hitch(this,function(n){this.worker=n;m(n)}))},setWorker:function(h,m){if(h instanceof Array){var r=h;h=r.shift()}var n=this._getUrl(h);n=b.normalize(n);h=!b.hasSameOrigin(n,location.href);if(!1===n)return console.log("Can not resolve worker path"),!1;if(this.worker){var q=this.worker;q.removeEventListener("message",this._acceptMessage,
!1);q.removeEventListener("error",this._errorMessage,!1);q.terminate();q=null}if(h){h=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(h,k.hitch(this,function(u){u=g.createObjectURL(new e([u],{type:"text/javascript"}));m(this._createWorker(u,n))}))}catch(u){try{h=b.getProxyUrl(h).path+"?"+encodeURI(h),this._useProxy=!0,m(this._createWorker(h,r))}catch(w){return console.log("Can not create worker"),!1}}}else setTimeout(k.hitch(this,function(){m(this._createWorker(n,r))}),0)},_createWorker:function(h,
m){h=new Worker(h);h.addEventListener("message",this._acceptMessage,!1);h.addEventListener("error",this._errorMessage,!1);this.worker=h;m&&this.importScripts(m);return h},postMessage:function(h,m){if(h instanceof Array||"object"!=typeof h)h={data:h};var r=Math.floor(64E9*Math.random()).toString(36);h.msgId=r;r=this._queue[r]=new l;this.worker?(m?this.worker.postMessage(h,m):this.worker.postMessage(h),this.emit("start-message",{target:this,message:h})):r.reject({message:"No worker was set."});return this.returnDeferreds?
r:r.promise||r},terminate:function(){var h=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var m=h.length-1;0<=m;m--)this._queue[h[m]].cancel("terminated"),delete this._queue[h[m]]},addWorkerCallback:function(h,m){var r=this._getUrl(h,!0);!1===r?(m=new l,m.reject({message:"Could not load text from "+h})):(m=this.postMessage({action:"add-callback",url:r,cbName:m||"main"}),m.then(k.hitch(this,function(n){n.target=this;this.emit("callback-added",n)})));return m},importScripts:function(h){Array.isArray(h)||
(h=[h]);h=h.map(function(m){m=this._getUrl(m,!0);this._useProxy&&!b.hasSameOrigin(m,location.href)&&(m=b.getProxyUrl(m).path+"?"+encodeURI(m));return m},this);h=this.postMessage({action:"import-script",url:h});h.then(k.hitch(this,function(m){m.target=this;this.emit("scripts-imported",m)}));return h},_acceptMessage:function(h){var m=h.data,r=m.msgId;if(m.status&&"debug"==m.status)console[m.showAs||"debug"](m);else if(r&&r in this._queue){var n=this._queue[r];"progress"==m.status?n.progress(h.data):
("error"==m.status?n.reject(h.data):n.resolve(h.data),delete this._queue[r])}this.emit("message",{message:h.data,event:h,target:this})},_errorMessage:function(h){this.onerror||this.onError?this.onerror?this.onerror(h):this.onError(h):console.log("Worker Error: "+h.message+"\nIn "+h.filename+" on "+h.lineno)},_getUrl:function(h,m){if(!h)return console.error("can not resolve empty path"),!1;h.match(/\.js$/)||(h+=".js");h=d.toUrl(h);return m?b.getAbsoluteUrl(h):h},_getRemoteText:function(h,m){(h=this._getUrl(h))&&
f.get(h,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(r){m(r)})},_startBlobWorker:function(){var h=this._xdSource;h||(h=this._getUrl("./mutableWorker"),h=new e(["if(!self._mutable){importScripts('"+h+"');}"],{type:"text/javascript"}),h=this._xdSource=g.createObjectURL(h));try{return new Worker(h)}catch(m){return console.log(m.message),!1}}});c("extend-esri")&&k.setObject("workers.WorkerClient",t,a);return t})},"esri/dijit/geoenrichment/utils/GeometryUtil_base":function(){(function(t){function p(b,
d){var e=b.length;if(3>e)return 0;d||(d=b[0]);var g=d[0];d=d[1];var h=b[e-1];e=h[0]-g;for(var m=h[1]-d,r=0,n=0,q=b.length;n<q;n++){h=b[n];var u=h[0]-g;h=h[1]-d;r+=u*m-e*h;e=u;m=h}return r/2}var l={};l.calculateRingArea=p;l.calculateRingCentroid=function(b,d){var e=b.length;if(!e)return null;d||(d=b[0]);var g=d[0];d=d[1];var h=0,m=0,r=0;if(2<e){var n=b[e-1];e=n[0]-g;for(var q=n[1]-d,u=0,w=b.length;u<w;u++){n=b[u];var y=n[0]-g;n=n[1]-d;var C=y*q-e*n;h+=C;m+=(e+y)*C;r+=(q+n)*C;e=y;q=n}}0==h?m=r=0:(m/=
3*h,r/=3*h);return[g+m,d+r]};l.INTERIOR=1;l.EXTERIOR=-1;l.BOUNDARY=0;l.createRingInfo=function(b,d){return new c(b,d)};l.createSegmentCoordinates=function(b){return new a(null,0,0,b)};var k=function(b){return function(){for(var d in b){var e=b[d];this[d]="function"===typeof e?e.bind(this):e}b.ctr.bind(this).apply(this,arguments)}},f=k({xmin:null,ymin:null,xmax:null,ymax:null,spatialReference:null,ctr:function(b,d,e,g,h){this.xmin=b;this.ymin=d;this.xmax=e;this.ymax=g;this.spatialReference=h},printOut:function(){console.log([this.xmin,
this.xmax,this.ymin,this.ymax].join(" "))}}),c=k({ring:null,origin:null,area:0,clockwise:!1,extent:null,_coords:null,ctr:function(b,d){this.ring=b;this.origin=d;b=this.ring.length-1;if(!(0>b)){if(!b)b++;else if(this.ring[b][0]!=this.ring[0][0]||this.ring[b][1]!=this.ring[0][1])b++,this.ring.push(this.ring[0].slice());var e=0,g=0;d=!d;this.extent=new f(this.ring[0][0],this.ring[0][1],this.ring[0][0],this.ring[0][1]);for(var h=0;h<b;h++){var m=this.ring[h],r=m[0];d&&(e+=r);r<this.extent.xmin?this.extent.xmin=
r:r>this.extent.xmax&&(this.extent.xmax=r);r=m[1];d&&(g+=r);r<this.extent.ymin?this.extent.ymin=r:r>this.extent.ymax&&(this.extent.ymax=r)}d&&(this.origin=[e/b,g/b]);this.area=p(this.ring,this.origin);0>=this.area?this.area=-this.area:this.clockwise=!0}},setDirection:function(b){this.clockwise==!b&&(this.ring.reverse(),this.clockwise=!this.clockwise,this._coords=null)},testPoint:function(b,d){b=this.getRingCoordinates(d).testPoint(b[0]-this.origin[0],b[1]-this.origin[1]);return this.clockwise?b:-b},
generalize:function(b,d,e){function g(M,O,Q){y=M;C=O;if(Q||F<w)w=b,D=y-q,G=C-q,F=Math.sqrt(D*D+G*G),F>b*d?(D/=F,G/=F):F=0;w*=d}function h(){if(!F)return!0;var M=m.dx,O=m.dy,Q=Math.sqrt(M*M+O*O);return Q-M*D-O*G>=.9*Q}d=d||.75;var m=this.getRingCoordinates(b),r=m.xs,n=m.ys,q=r[0],u=n[0],w,y,C,D,G,F=0,B=r.length-1;g(r[B],n[B],!0);for(var z=this,E=this.clockwise?function(M){z.ring.splice(M,1)}:function(M){z.ring.splice(-M-1,1)};0<B--&&4<r.length;){var I=r[B],L=n[B];m.setSegment(q,u,I,L)&&m.testPointOnTouch(y,
C,w)&&h()?(r.splice(B+1,1),n.splice(B+1,1),E(B+1),g(I,L)):(q=y,u=C,g(I,L,!0))}this._coords=null;e&&(this.area=p(this.ring,this.origin),this.clockwise||(this.area=-this.area))},getRingCoordinates:function(b,d){if(d)return new a(this.ring,d[0],d[1],b,this.extent,this.clockwise);this._coords&&this._coords.eps==b||(this._coords=new a(this.ring,this.origin[0],this.origin[1],b,this.extent,this.clockwise));return this._coords}});l.RingInfo=c;var a=k({xs:null,ys:null,extent:null,eps:NaN,dx:null,dy:null,_sx:null,
_sy:null,ctr:function(b,d,e,g,h,m){this.xs=[];this.ys=[];b||(b=[]);void 0===d&&(d=0);void 0===e&&(e=0);void 0===g&&(g=0);this.eps=Math.max(g,0);h&&(g=this.eps/2,this.extent=new f(h.xmin-d-g,h.ymin-e-g,h.xmax-d+g,h.ymax-e+g));var r=b.length-1;if(!(0>r))for(h=r?b[r][0]==b[0][0]&&b[r][1]==b[0][1]?r:r+1:1,g=m?1:-1,m=m?0:r;h--;m+=g)r=b[m],this.xs.push(r[0]-d),this.ys.push(r[1]-e)},testPoint:function(b,d){if(!this._pointBelongsToExtent(b,d))return-1;var e=this.xs.length,g=!1;this.dy=this.ys[0]-this.ys[e-
1];if(0==this.dy){for(g=e;1<g--&&(this.dy=this.ys[g]-this.ys[g-1],0==this.dy););if(0==this.dy)return 0}g=0<this.dy;for(var h=0,m=this.xs[0],r=this.ys[0],n,q,u=1;u<=e;u++,m=n,r=q)if(q=u==e?0:u,n=this.xs[q],q=this.ys[q],this.setSegment(m,r,n,q)){var w=r-d,y=q-d,C=!1;0>w&&(w=-w,y=-y,C=!0);if(!(w>this.eps&&y>this.eps)){if(this.testPointOnTouch(b,d,this.eps))return 0;0==w?0!==y&&(0>y&&(g=!g),b<m&&g&&h++):0==y?g=C:0>y&&b<m+this.dx/this.dy*(d-r)&&h++}}return 0!=h%2?1:-1},testPointOnTouch:function(b,d,e){var g=
this.findIntersectionDelta(b,d,b-this.dy,d+this.dx);b=this._sx+g*this.dx-b;d=this._sy+g*this.dy-d;return b*b+d*d<=e*e},_pointBelongsToExtent:function(b,d){return b>=this.extent.xmin&&b<=this.extent.xmax&&d>=this.extent.ymin&&d<=this.extent.ymax},setSegment:function(b,d,e,g){this._sx=b;this.dx=e-b;this._sy=d;this.dy=g-d;return 0!=this.dx||0!=this.dy},findIntersectionDelta:function(b,d,e,g,h){void 0===h&&(h=!0);e-=b;g-=d;var m=this.dy*e-this.dx*g;if(0==m)return 0;var r=b-this._sx,n=d-this._sy,q=n*e-
r*g;r=h?0:n*this.dx-r*this.dy;0>m&&(m=-m,q=-q,r=-r);return h||(r=0>r?0:r<m?r/m:1,this.testPointOnTouch(b+r*e,d+r*g,this.eps))?0>=q?0:q<m?q/m:1:-1},addPointOfSegmentAt:function(b){this.xs.push(this._sx+b*this.dx);this.ys.push(this._sy+b*this.dy)}});l.RingCoordinates=a;t.document?define(function(){return l}):t.GeometryUtil_base=l})(this)},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes":function(){define([],function(){return{STANDARD:"esriReportTemplateStandard",MULTICOLUMN:"esriReportTemplateMultiColumn",
MAP:"esriReportTemplateMapReport",FUSION:"esriReportTemplateFusion"}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config ./portalToEditorUtils/layout/LayoutParser ./portalToEditorUtils/metadata/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/variables/PlayerVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h){return{provideEditorJson:function(m,r){function n(){function D(z,E,I){return t(r.preProcessFile&&r.preProcessFile(z,E,q),function(L){if(!1!==L)return t(I&&I(),function(){return r.postProcessFile&&r.postProcessFile(z,E,q)})})}if(u&&u.files&&u.files){var G=r.filesToProcess||["theme.css.txt","metadata.xml","report.xml"],F={"theme.css.txt":function(z){return D(z,"theme.css.txt",function(){q.theme=e.fromCssText(z.data,r)})},"metadata.xml":function(z){return D(z,"metadata.xml",
function(){return k.parseMetadataXML(z,q,r)})},"report.xml":function(z){return D(z,"report.xml",function(){return l.parseReportXML({report:m,parsers:c,file:z,templateJson:q,variableProvider:r.variableProvider,useVariableProviderToCollectOnly:r.useVariableProviderToCollectOnly,tableDefaultStyles:r.tableDefaultStyles,processFileName:y,putImageData:function(E,I){E=y(E);I=I||w[E];d.putImageData(E,I);return I},log:C,queryMetaDataFunc:function(E){return r.queryMetaDataFunc&&r.queryMetaDataFunc(E,q)},postProcessChartJson:function(E,
I){r.postProcessChartJson&&r.postProcessChartJson(q,E,I)},postProcessMapJson:function(E,I){r.postProcessMapJson&&r.postProcessMapJson(q,E,I)},postProcessInfographicJson:function(E,I){r.postProcessInfographicJson&&r.postProcessInfographicJson(q,E,I)},postProcessTableInSection:function(E,I){r.postProcessTableInSection&&r.postProcessTableInSection(q,E,I)}})})},generic:function(z,E){return D(z,E)}},B=new g;G.forEach(function(z){var E=u.files.filter(function(L){return L.name===z})[0],I=E&&(F[z]||F.generic);
I&&B.add(function(){return t(p.isPlayerOnServer?t():h.delay(50)).then(function(){return I(E,z)}).otherwise(function(L){q.metadata.parseErrors.push(L);console.log(L)})})});return B.getPromise()}}r=r||{};r.variableProvider=r.variableProvider||new a;r.tableDefaultStyles=r.tableDefaultStyles||new b;var q={documentOptions:{},metadata:{specialTradeAreaCalculatorName:null,parseErrors:[],mapImageInfosHash:{},comparisonCalculatorsHash:{},locatorCalculatorsHash:{}},theme:null},u=m.portalJson,w={};r.getImageData=
function(D){return w[y(D)]};var y=function(D){return D?D.toLowerCase():""},C=r.log||function(D){};return t(c.initialize(),function(){return t(f.collectImageResources(u,w,y),function(){for(var D in w)d.putImageData(D,w[D]);return t(n(),function(){q.metadata.parseErrors.length||(m.templateJson=q)})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/LayoutParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./GraphicReportSectionsParser",
"./ClassicReportSectionsParser"],function(t,p,l){return{parseReportXML:function(k){k.log(k.file.data);var f=t.parseXml(k.file.data);k.parsers.getParser("document").parseDocument(f,k);k.report.isGraphicReport?(k.templateJson.sectionsTables=[],p.parseSectionsGraphic(f,k)):(k.templateJson.sections=[],l.parseSectionsClassic(f,k))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/GraphicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(t){return{parseSectionsGraphic:function(p,l){t.queryTopJson(p,"table").forEach(function(k){try{l.templateJson.sectionsTables.push(l.parsers.getParser("section").parseTable(k,l,{fixTableWidthsForPage:!0}))}catch(f){console.log(f)}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/ClassicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t){return{parseSectionsClassic:function(p,l){t.queryTopJson(p,"section").forEach(function(k){l.templateJson.sections.push(l.parsers.getParser("section").parseSection(k,
l,{fixTableWidthsForPage:!0}))});this._splitSections(l)},_splitSections:function(p){p=p.templateJson;var l=[];p.sections.forEach(function(k){function f(){c={type:k.type,stack:[]};l.push(c)}var c;f();k.stack.forEach(function(a){if("hr"===a.id){var b=!!c.stack.length;c.stack.push(a);b&&f()}else"table"===a.id?(c.stack.some(function(d){return"table"===d.id})&&f(),c.stack.push(a)):"pageBreak"===a.id?(c.stack.length&&f(),c.stack.push(a),f()):c.stack.push(a)})});l=l.filter(function(k){return!!k.stack.length});
p.sections=l}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataParser":function(){define("esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/utils/JsonXmlConverter ./DataCollectionsCalculatorsParser ./ScriptsCalculatorsParser ./LocatorCalculatorsParser ./map/MapCalculatorsParser ./TradeAreaCalculatorsParser".split(" "),function(t,p,l,k,f,c,a){return{parseMetadataXML:function(b,d,e){e.log&&e.log(b.data);var g=p.parseXml(b.data);if(g&&g.tags)return t([a.parseTradeAreaCalculators(g,
d,e),l.parseDataCollectionsCalculators(g,d,e),k.parseScriptsCalculators(g,d,e),f.parseLocatorCalculators(g,d,e)]).then(function(){return c.parseMapCalculators(g,d,e)})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(t,p,l){return{parseDataCollectionsCalculators:function(k,f,c){t.queryJson(k,"DataCollections").forEach(function(a){var b=
t.queryJson(a,"ComparisonLevel");if(l.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");if(c.variableProvider.isPlayerOnly||b.length)var d=p.getObjects(a);b.length&&(a={calculatorName:a.attributes.Name,levels:b.map(function(e){return e.attributes.Name}).filter(function(e){return!c.validateGeographyLevelFunc||c.validateGeographyLevelFunc(e)}),variableObjects:d.variableObjects},f&&(f.metadata.comparisonCalculatorsHash[a.calculatorName]=
a));c.variableProvider.isPlayerOnly&&(d.variableObjects.forEach(function(e){c.variableProvider.addVariable(e)}),d.scriptObjects.forEach(function(e){c.variableProvider.addScriptVariable(e)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/VariableScriptCollector":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(t,p){var l={getObjects:function(k,f){f=l._getVariableInfo(k,f);k=l._getScriptObjects(k,
f.fieldNameToVariableCache);return{variables:f.variables,variableObjects:f.variableObjects,scriptObjects:k}},_getVariableInfo:function(k,f){var c=[];t.queryJson(k,f?/^(RawFields|Fields)$/:"Fields").forEach(function(e){c=c.concat(t.queryJson(e,/^(Field|PortalField)$/))});var a=[],b=[],d={};c.forEach(function(e){a.push(e.attributes.MapTo);if(e=p.fieldTagToVariable(e,k.attributes.Name))d[e.fieldName]=e,b.push(e)});return{variables:a,variableObjects:b,fieldNameToVariableCache:d}},_getScriptObjects:function(k,
f){var c=t.queryJson(k,"Scripts"===k.name?"Fields":"CalculatedFields")[0];c=c&&t.queryJson(c,"Script")||[];"Scripts"===k.name&&(c=c.filter(function(a){return!("STORE_ID"===a.attributes.Name||"AREA_ID"===a.attributes.Name)}));return c.map(function(a){var b=p.scriptTagToVariable(a,k.attributes.Name);b.usedFields&&(b.usedMapTos=[],b.usedFields.forEach(function(d){var e=f[d];e?e.usedMapTos?b.usedMapTos=b.usedMapTos.concat(e.usedMapTos):b.usedMapTos.push(e.fullName):console.log("Error parsing used fields for "+
d)}),f[b.fieldName]=b);return b})}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/VariableUtil":function(){define([],function(){var t={getType:function(p,l){return p?0===p.indexOf("esriFieldType")?p:"esriFieldType"+p:l},fieldTagToVariable:function(p,l){return p.attributes.MapTo&&"AREA_ID"!==p.attributes.Name?{id:p.attributes.MapTo.substr(p.attributes.MapTo.lastIndexOf(".")+1),fullName:p.attributes.MapTo,alias:p.attributes.Alias,fieldName:p.attributes.Name,
precision:Number(p.attributes.Decimals)||0,calculatorName:l,templateName:l+"."+p.attributes.Name,type:t.getType(p.attributes.Type,p.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString"),vintage:null,source:null}:null},scriptTagToVariable:function(p,l){return{id:p.attributes.Name,fullName:l+"."+p.attributes.Name,fieldName:p.attributes.Name,alias:p.attributes.Alias,precision:Number(p.attributes.Decimals)||0,usedFields:p.attributes.usedFields?p.attributes.usedFields.split(","):[],usedMapTos:null,
expressionText:p.tags[0].text,calculatorName:l,templateName:l+"."+p.attributes.Name,type:t.getType(p.attributes.Type,p.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString")}}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/ScriptsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector"],function(t,p){return{parseScriptsCalculators:function(l,k,f){t.queryJson(l,"Scripts").forEach(function(c){f.variableProvider.isPlayerOnly&&
(c=p.getObjects(c),c.variableObjects.forEach(function(a){f.variableProvider.addVariable(a)}),c.scriptObjects.forEach(function(a){f.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser":function(){define(["esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(t,p,l,k){return{parseLocatorCalculators:function(f,
c,a){f=l.queryJson(f,"Locator");return t(f.map(function(b){var d=[];l.queryJson(b,/^(PointFields|Fields)$/).forEach(function(h){d=d.concat(l.queryJson(h,/^(Field|Direction|Distance)$/))});var e=[];d.forEach(function(h){"Direction"===h.name?h.attributes.MapTo="DIRECTION":"Distance"===h.name&&(h.attributes.MapTo="DISTANCE");(h=k.fieldTagToVariable(h,b.attributes.Name))&&e.push(h)});var g={calculatorName:b.attributes.Name,variableObjects:e,layerID:null,layerUrl:null,layerName:b.attributes.LayerName};
b.attributes.Points&&0===b.attributes.Points.indexOf("std:")?g.layerID=b.attributes.Points.replace("std:",""):g.layerUrl=b.attributes.Layer;c.metadata.locatorCalculatorsHash[b.attributes.Name]=g;a.variableProvider.isPlayerOnly&&e.forEach(function(h){a.variableProvider.addVariable(h)});return p(!a.validateLocatorCalculator||a.validateLocatorCalculator(g.layerID,g.layerUrl),function(h){g.isValid=h})}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./MetadataToRendererParser","./MapTagsUtil","esri/dijit/geoenrichment/utils/ImageUtil"],function(t,p,l,k){var f={parseMapCalculators:function(c,a,b){t.queryJson(c,"Maps").forEach(function(d){t.queryJson(d,"Map").forEach(function(e){var g=f._parsePortalLayers(e),h=f._parseStudyAreas(e);g={fieldName:e.attributes.Name,width:Number(e.attributes.Width),height:Number(e.attributes.Height),defaultBasemapId:g.defaultBasemapId,defaultBasemapName:g.defaultBasemapName,webMapId:g.webMapId,webMapName:g.webMapName,
additionalLayerInfos:f._parseAdditionalLayers(e,a),pinSymbolJson:f._parseSiteLayerPinSymbol(e,b),areaSymbolJsons:h.symbolJsons,areaSymbolRamp:h.ramp,mapScale:Number(e.attributes.Scale)||null};a&&(a.metadata.mapImageInfosHash[d.attributes.Name+"."+e.attributes.Name]=g)})})},_parsePortalLayers:function(c){var a;c=t.queryJson(c,"Layer").filter(function(b){return!(!b.attributes.PortalItemId&&!b.attributes.MapName)});1<c.length&&(a=c.shift());c=c.shift();return{defaultBasemapId:a&&a.attributes.PortalItemId,
defaultBasemapName:a&&a.attributes.MapName,webMapId:c&&c.attributes.PortalItemId,webMapName:c&&c.attributes.MapName}},_parseAdditionalLayers:function(c,a){var b=[];t.queryJson(c,/^(Layer|LocatorResultsLayer|ComparisonResultsLayer)$/).filter(function(d){return!!d.attributes.ServiceUrl||"LocatorResultsLayer"===d.name||"ComparisonResultsLayer"===d.name}).forEach(function(d){if(d.attributes.ServiceUrl)b.push({url:d.attributes.ServiceUrl});else if("LocatorResultsLayer"===d.name){var e=d.tags&&d.tags.filter(function(h){return"Renderer"===
h.name})[0],g=a.metadata.locatorCalculatorsHash[d.attributes.CalculatorName];g&&g.isValid&&b.push({isLocatorLayer:!0,layerName:d.attributes.LayerName,calculatorName:d.attributes.CalculatorName,calculatorInfo:g,rendererJson:e&&p.parseRendererJson(e)})}else"ComparisonResultsLayer"===d.name&&((e=(e=d.tags&&d.tags.filter(function(h){return"Renderer"===h.name})[0])&&p.parseRendererJson(e))&&"esriTS"===e.uniqueValueInfos[0].symbol.type?b[b.length-1].labelRendererJson=e:(g=(g=d.tags&&d.tags.filter(function(h){return"LabelingInfo"===
h.name})[0])&&p.parseLabelRendererJson(g),b.push({isComparisonLayer:!0,calculatorName:d.attributes.CalculatorName,rendererJson:e,labelRendererJson:g})))});return b.length&&b},_parseSiteLayerPinSymbol:function(c,a){var b;if(c=t.queryJson(c,"SiteLayer")[0])if((c=t.queryJson(c,"Symbol")[0])&&"Image"===c.attributes.Type)(a=a.getImageData(c.attributes.Name))&&(b={type:"esriPMS",contentType:k.getContentType(a),imageData:k.base64DataFromDataURL(a),url:c.attributes.Url,width:Number(c.attributes.Width),height:Number(c.attributes.Height),
angle:Number(c.attributes.Angle)||0,xoffset:Number(c.attributes.XOffset)||0,yoffset:Number(c.attributes.YOffset)||0});else if(c&&"Marker"===c.attributes.Type){b=(b=t.queryJson(c,"Fill")[0])&&t.queryJson(b,"Color")[0];var d=(a=t.queryJson(c,"Outline")[0])&&t.queryJson(a,"Color")[0];b={type:"esriSMS",style:"esriSMS"+(c.attributes.Style||"Circle"),size:Number(c.attributes.Size),angle:Number(c.attributes.Angle)||0,xoffset:Number(c.attributes.XOffset)||0,yoffset:Number(c.attributes.YOffset)||0,color:l.parseColorTag(b),
outline:a&&{type:"esriSLS",color:l.parseColorTag(d),style:"esriSLS"+(a.attributes.Style||"Solid"),width:void 0===a.attributes.Width?0:Number(a.attributes.Width)}}}return b},_parseStudyAreas:function(c){var a=(c=t.queryJson(c,"StudyAreasLayer")[0])&&t.queryTopJson(c,"SymbolsPalette")[0];c=(a&&t.queryTopJson(a,"Symbol")||[]).map(f._parseAreaSymbol);var b=a&&t.queryTopJson(a,"SymbolRamp")[0],d;b&&(a=t.queryTopJson(b,"First")[0],b=t.queryTopJson(b,"Last")[0],a=a&&t.queryTopJson(a,"Symbol")[0],b=b&&t.queryTopJson(b,
"Symbol")[0],a&&b&&(d=[a,b].map(f._parseAreaSymbol)));return{ramp:d,symbolJsons:c}},_parseAreaSymbol:function(c){var a=t.queryJson(c,"Fill")[0];a=a&&t.queryJson(a,"Color")[0];var b=(c=t.queryJson(c,"Outline")[0])&&t.queryJson(c,"Color")[0];return{type:"esriSFS",style:"esriSFSSolid",color:l.parseColorTag(a)||[0,0,0,1],outline:c&&{type:"esriSLS",color:l.parseColorTag(b),style:"esriSLS"+(c.attributes.Style||"Solid"),width:void 0===c.attributes.Width?0:Number(c.attributes.Width)}}}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MetadataToRendererParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlTypedConverter",
"esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t,p){return{parseRendererJson:function(l){return t.parseXml(p.parseJson(l))},parseLabelRendererJson:function(l){return{type:"uniqueValue",field1:"StdGeographyLevel",uniqueValueInfos:t.parseXml(p.parseJson(l)).map(function(k){return{value:k.where.match(/StdGeographyLevel='(.*?)'/)[1],symbol:k.symbol}})}}}})},"esri/dijit/geoenrichment/utils/JsonXmlTypedConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(t,p){return t(null,
{parseJson:function(l,k){function f(d,e){if("string"===typeof d)b+="\x3c"+e+' type\x3d"string"\x3e'+p.encodeXML(d,!1)+"\x3c/"+e+"\x3e";else if("number"===typeof d)b+="\x3c"+e+' type\x3d"number"\x3e'+d+"\x3c/"+e+"\x3e";else if("boolean"===typeof d)b+="\x3c"+e+' type\x3d"boolean"\x3e'+d+"\x3c/"+e+"\x3e";else if(Array.isArray(d))c(d,e);else if(d&&"object"===typeof d){b+="\x3c"+e+' type\x3d"object"\x3e';for(var g in d)f(d[g],g);b+="\x3c/"+e+"\x3e"}}function c(d,e){b+="\x3c"+e+' type\x3d"array"\x3e';d.forEach(function(g){f(g,
"item")});b+="\x3c/"+e+"\x3e"}var a=k&&k.rootName||"root",b="";k&&k.addDocumentOptions&&(b+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');f(l,a);return b=decodeURIComponent(encodeURIComponent(b).replace("%19",""))},parseXml:function(l){function k(g){if(!g.attributes)return null;for(var h=0;h<g.attributes.length;h++){var m=g.attributes[h];if("type"===m.name)return m.value}return null}function f(g,h){if(h.childNodes)for(var m=0,r=h.childNodes.length;m<r;m++){var n=h.childNodes[m],q=c(n);void 0!==
q&&(g[n.nodeName]=q)}return g}function c(g){var h=k(g);if(g.nodeName&&h)switch(h){case "string":return g.childNodes[0]?p.decodeXML(g.childNodes[0].nodeValue):"";case "number":return Number(g.childNodes[0].nodeValue);case "boolean":return"true"===g.childNodes[0].nodeValue;case "object":return f({},g);case "array":return a([],g)}}function a(g,h){if(h.childNodes)for(var m=0,r=h.childNodes.length;m<r;m++)g[m]=c(h.childNodes[m]);return g}var b;l=(new DOMParser).parseFromString(l,"text/xml").childNodes;
for(var d=0;d<l.length;d++)if(1===l[d].nodeType){var e=l[d];break}e&&(l=k(e),"object"===l?f(b={},e):"array"===l&&a(b=[],e));return b}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapTagsUtil":function(){define([],function(){return{parseColorTag:function(t){if(!t)return null;t=t.attributes;return[Number(t.Red)||0,Number(t.Green)||0,Number(t.Blue)||0,t.Transparency?255*(1-Number(t.Transparency)/100):255]}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/TradeAreaCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./VariableScriptCollector","../../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary"],function(t,p,l){return{parseTradeAreaCalculators:function(k,f,c){k=t.queryJson(k,"SpecialTradeAreaFields");f.metadata.specialTradeAreaCalculatorName=k[0]&&k[0].attributes&&k[0].attributes.Name;k.forEach(function(a){c.variableProvider.isPlayerOnly&&p.getObjects(a,!0).variableObjects.forEach(function(b){b.alias=b.alias||l.getFieldLabel(b.id);c.variableProvider.addVariable(b)})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/ImageCollector":function(){define(["esri/dijit/geoenrichment/when",
"esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/DataUtil","esri/dijit/geoenrichment/utils/ImageUtil","esri/dijit/geoenrichment/utils/ImageInfoUtil"],function(t,p,l,k,f){return{collectImageResources:function(c,a,b){function d(g){return t(f.getImageInfo(a[g],g),null,function(){/\.svg$/.test(g)||delete a[g]})}c&&c.files&&c.files.forEach(function(g){var h=l.getContentType(g.name);h&&"image/"===h.substr(0,6)&&(a[b(g.name)]=k.base64DataToDataURL(g.data,h))});c=[];for(var e in a)c.push(d(e));
return p(c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/Parsers":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(t,p){var l={},k={},f;l.initialize=function(){if(f)return f.promise;f=new t;p("./DocumentParser ./ChartConverterPtoE ./InfographicConverterPtoE ./SectionParser ./FieldParser ./FilterParser ./SortingParser ../../../supportClasses/templateJsonUtils/fieldInfo/utils".split(" "),function(c,a,b,d,e,g,h,m){k.document=c;k.chart=
a;k.infographic=b;k.section=d;k.field=e;k.filter=g;k.sorting=h;m.init().then(f.resolve)});return f.promise};l.getParser=function(c){return k[c]};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/PlayerVariableProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dojo/i18n!esri/nls/jsapi"],function(t,p,l,k){k=k.geoenrichment.dijit.ReportPlayer.Variables;var f=t(null,{variable:null,constructor:function(c){this.variable=c},calculate:function(c){return 0},
getCalcType:function(){return"n/"},getAliasWithType:function(){return this.variable.alias},getDescriptionWithType:function(){return this.variable.alias},getDecimals:function(){return this.variable.precision||0}});return t(null,{isPlayerOnly:!0,_fieldNameToVariableCache:null,_templateNameToVariableCache:null,constructor:function(c){this._templateNameToVariableCache=c&&c.templateNameToVariableCache||{};this._fieldNameToVariableCache={};for(var a in this._templateNameToVariableCache)c=this._templateNameToVariableCache[a],
this._fieldNameToVariableCache[c.fieldName]=c},get:function(c){return this._templateNameToVariableCache[c]||this._fieldNameToVariableCache[c]},toCalculator:function(c){return(c=this.get(c))&&new f(c)},addVariable:function(c){this._fieldNameToVariableCache[c.fieldName]=c;this._templateNameToVariableCache[c.templateName]=c},addScriptVariable:function(c){this._fieldNameToVariableCache[c.fieldName]=c;this._templateNameToVariableCache[c.templateName]=c},getVariables:function(){return Object.keys(this._fieldNameToVariableCache).map(function(c){return this._fieldNameToVariableCache[c]},
this)},getVariablesDataVintageAndSources:function(c){var a=[],b={},d={};this.getVariables().forEach(function(h){h.fullName&&(d[h.fullName.toLowerCase()]=h)});for(var e in c.usedVariablesCache)if((c=d[e.toLowerCase()])&&c.vintage&&c.source){var g=c.vintage+";"+c.source;b[g]||(b[g]=!0,a.push({vintage:c.vintage,source:c.source}))}b=a.map(function(h){return h.source}).join(", ");a=a.map(function(h){return h.vintage}).join(", ");return{dataVintageDescription:b&&a?l.substitute(k.sourcePattern,{source:b})+
" "+l.substitute(k.vintagePattern,{vintage:a}):"",dataSources:b,dataVintage:a}},toJson:function(){return{templateNameToVariableCache:p.clone(this._templateNameToVariableCache)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DefaultStyles":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,p,l){return t(null,{_styles:null,_stylesArray:null,constructor:function(k){this._styles={Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"}};
p.mixin(this._styles,k);this._stylesArray=[];for(var f in this._styles)this._stylesArray.push(f)},getStyle:function(k){return this._styles[k]},getStylesArray:function(){return this._stylesArray},tryApplyStyle:function(k,f,c){if(f=this.getStyle(f))for(var a in f)c&&void 0!==k[a]||(k[a]=f[a])},findDefaultStyle:function(k){var f,c=this;this.getStylesArray().some(function(a){var b=c.getStyle(a),d;for(d in b){if(!k[d])return!1;if("color"===d||"backgroundColor"===d){if(!l.colorsEqual(k[d],b[d]))return!1}else if(k[d]!==
b[d])return!1}f=a;return!0});return f}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/ImageDataHolder":function(){define(["esri/dijit/geoenrichment/utils/CacheUtil"],function(t){function p(){return t.get("ImageDataHolder.imageData")}function l(){return t.get("ImageDataHolder.fileNameToOriginal")}var k={},f;k.setImageDataHolder4x=function(c){f=c;c=p();for(var a in c)f.putImageData(a,c[a])};k.putImageData=function(c,a){if(f)f.putImageData(c,a);else if("string"===typeof c&&a){var b=
c.toLowerCase();l()[b]=c;p()[b]=a}else console.error("Invalid image filename or data!")};k.getImageData=function(c){return f?f.getImageData(c):"string"!==typeof c?null:p()[c.toLowerCase()]};k.findFileNameByData=function(c){if(f)return f.findFileNameByData(c);var a=p(),b;for(b in a)if(c===a[b])return l()[b];return null};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/conversion/CssParser":function(){define(["../PageBorderStyles","../ThemeUpdateUtil","../../../_devConfig"],function(t,
p,l){var k={"font-size":"fontSize","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor",opacity:"opacity",url:"data","background-position":"position","background-repeat":"repeat","background-size":"scale"},f={colors:1,colors3series:1};return{fromCssText:function(c){function a(r){var n=g;r.split("@").forEach(function(q){n=n[q]=n[q]||{}});return n}function b(r,n){if(n.borderStyle||n.border)if(r.border=
{},r.border.style=t.toSupportedValue(n.borderStyle),"string"===typeof n.border){var q=n.border.split(" ");3===q.length&&(r.border.thickness=Number(q[0].replace("px","")),r.border.lineStyle=q[1],r.border.color=q[2])}for(var u in n)if("border"!==u&&"borderStyle"!==u){q=n[u];var w=u;var y=q,C=r;"font-size"===w?(C[k[w]]=d(y.replace("px","")),w=!0):"background-repeat"===w?(C[k[w]]=d("repeat"===y),w=!0):"background-size"===w?(C[k[w]]=d("contain"===y||"cover"===y),C.size="auto"===y?null:y,w=!0):w=!1;w||
(r[k[u]||u]=d(q))}}function d(r){if(void 0===r||null===r||"null"===r||"undefined"===r)return"";if("true"===r)return!0;if("false"===r)return!1;if(!0===r)return!0;if(!1===r)return!1;var n=Number(r);return isNaN(n)?r:n}function e(r){if(l.emulateErrors.themeParseError)throw Error("Error test: something crashed during the parsing of the theme!");if("object"===typeof r)for(var n in r){var q=r[n];if(f[n]){var u=[],w=Object.keys(q);if(w.length){var y=w.every(function(C){return-1!==C.indexOf("_")});w.forEach(function(C,
D){u[y?C.split("_")[1]:D]=q[C]})}r[n]=u}else e(q)}}var g={};c=c.replace(/\r?\n|\r/g,"");c=c.replace(/(\w|\d)_(\w|\d)/g,"$1@$2");c=c.replace("data:","dataM");c=c.replace(";base64","Mbase64");var h=function(){var r={};(c.match(/\..*?\}/g)||[]).forEach(function(n){var q=n.substring(1,n.indexOf("{")).trim(),u={};n.substring(n.indexOf("{")+1,n.indexOf("}")).trim().split(";").forEach(function(w){if(w=w.trim()){w=w.split(":");var y=w[1].trim();y=y.replace("dataM","data:");y=y.replace("Mbase64",";base64");
u[w[0].trim()]=y}});r[q]=u});return r}(),m;for(m in h)b(a(m),h[m]);delete g.themeMetadata;e(g);p.populateMissingStyles(g);return g}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUpdateUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ThemeLibrary","./ThemeUtil"],function(t,p,l,k){return{populateMissingStyles:function(f){if(f){f.table&&f.table.overrideStyles||(f.table={overrideStyles:t.mixin({},f.table)});f.icon||(f.icon=t.clone(f.infographic.staticInfographic.icon),
f.highlightedIcon=t.clone(f.infographic.staticInfographic.highlightedIcon));f.chart.icon||(f.chart.icon=t.clone(f.infographic.staticInfographic.icon));f.chart.xAxis.lineColor||(f.chart.xAxis.lineColor=f.chart.xAxis.axisStyle.color,f.chart.yAxis.lineColor=f.chart.yAxis.axisStyle.color);var c=k.getThemeColors(f),a=f.chart.colors.slice(),b=f.chart.colors3series&&f.chart.colors3series.slice(),d=l.getDefaultTheme({defaultFontFamilty:f.document.fontFamily,defaultFontSize:f.document.fontSize});k.applyThemeColorsToTheme({theme:d,
colors:c,chartColors:a,colors3series:b});p.populateObject(f,d,!1)}}}})},"esri/dijit/geoenrichment/utils/async/AsyncQueue":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dijit/Destroyable ../DelayUtil".split(" "),function(t,p,l,k,f,c){var a=t(f,{_lastPromise:null,_isFinished:!1,_isDestroyed:!1,_lastDfd:null,_lastResult:null,constructor:function(b){p.mixin(this,b)},add:function(b,d){d=d||{};var e=this;if(!this._isDestroyed){this._lastDfd||
(this.onStarted(),this._lastDfd=new l);this._isFinished=!1;var g=function(){var m=function(){if(!e._isDestroyed)try{return"function"===typeof b?b():b}catch(n){return(new l).reject(n)}},r=0<=d.delayBefore?function(){return c.delay(m,d.delayBefore)}:m;return(0<=d.delayAfter?function(){return k(r(),function(n){return c.delay(function(){return n},d.delayAfter)})}:r)()};!this._lastPromise||this._lastPromise.isFulfilled()?this._lastPromise=k(g()):this._lastPromise=k(this._lastPromise).then(g);var h=this._lastPromise;
k(h,function(m){h!==e._lastPromise||e._isDestroyed||e._isFinished||h&&!h.isFulfilled()||(e._isFinished=!0,e._lastDfd.resolve(m),e._lastResult=m,e._lastDfd=null,e.onFinished(m))},this._lastDfd.reject);return this.getPromise()}},getPromise:function(){return this._isDestroyed?null:this._lastDfd&&this._lastDfd.promise||this._lastResult},isFinished:function(){return this._isFinished},isDestroyed:function(){return this._isDestroyed},destroy:function(){this._isDestroyed=!0},onStarted:function(){},onFinished:function(b){}});
a.executeFunctions=function(b,d,e){e=e||{};var g=new a,h=[];b.forEach(function(m,r){g.add(function(){return k(m(),function(n){h.push(n);return n})},{delayBefore:0===r?void 0:d})});e.onQueueReady&&e.onQueueReady(g);return k(g.getPromise(),function(m){return e.collectResults?h:m})};a.processArrayInBatches=function(b,d){function e(){if(b.length){for(var h=[],m=0;m<d.batchSize&&b.length;m++)h.push(b.shift());d.processBatch?d.callback(h):h.forEach(d.callback);setTimeout(e,d.timeout||0)}else g.resolve()}
b=b.slice();var g=new l;e();return g.promise};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/WebMapJsonUtil":function(){define([],function(){return{processWebMapJson:function(t,p){function l(f,c,a){f=f.featureCollection.layers[0].featureSet.features[0];f.attributes=f.attributes||{};f.attributes[c]=a}var k=JSON.parse(p);k.operationalLayers.forEach(function(f){var c=f.featureCollection&&f.featureCollection.layers&&1===f.featureCollection.layers.length?f.featureCollection.layers[0].id:
void 0;"string"===typeof c&&0===c.indexOf("SiteLayer")?(f.isSiteLayer=!0,(c=0===c.indexOf("SiteLayer.")?c.replace("SiteLayer.",""):void 0)&&l(f,"STORE_ID",c)):"string"===typeof c&&0===c.indexOf("StudyAreasLayer.")?(f.isSiteLayer=!0,l(f,"AREA_ID",c.replace("StudyAreasLayer.",""))):"string"===typeof c&&0===c.indexOf("LocatorResultsLayer.")?(f.isLocatorLayer=!0,f.calculatorName=c.replace("LocatorResultsLayer.","")):"string"===typeof c&&0===c.indexOf("ComparisonResultsLayer.")?(f.isComparisonLayer=!0,
f.calculatorName=c.replace("ComparisonResultsLayer.","")):f.isOtherLayer=!0});return{fileName:t,originalString:p,webMapJson:k}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsStoreSerializer":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./AttributesUtil ./NotesUtil ./CustomAttachmentsStore esri/dijit/geoenrichment/utils/ImageInfoUtil".split(" "),function(t,p,l,k,f,c){return{getAttachmentsStoreJson:function(a,b){function d(q){if(b.noCache)return q;
h=h||{};for(var u in h)if(h[u]===q)return u;u="image_"+g++;h[u]=q;return u}function e(){return p([b.saveImages&&a.getImages(),a.getAttributes(),a.getNotes()]).then(function(q){var u=q[0]||[],w=q[1]||[],y=q[2]||[];return p(u.map(function(C){return p([t(C.getThumbnail(),function(D){return c.ensureDataUrlForRemoveImage(D)}),t(C.getUrl(),function(D){return c.ensureDataUrlForRemoveImage(D)})]).then(function(D){C.__thumbnail=d(D[0]);C.__url=d(D[1])})})).then(function(){return{images:u.map(function(C){var D=
C.__thumbnail,G=C.__url;delete C.__thumbnail;delete C.__url;return{description:C.description,thumbnail:D,url:G,filename:C.filename,imageViewType:C.imageViewType}}),attributes:w.map(function(C){return l.attributeToJson(C)}),notes:y.map(function(C){return k.noteToJson(C)})}})})}if(!a)return null;var g=0,h,m=[],r=[];if(a.supportsMultipleAreas)for(var n=0;n<b.numAreas;n++)a.setCurrentAnalysisAreaIndex(n),r.push(t(e(),function(q){m.push(q)}));else r.push(t(e(),function(q){m.push(q)}));return p(r).then(function(){return{supportsMultipleAreas:a.supportsMultipleAreas,
areaAttachments:m,imageDataCache:h}})},getAttachmentsStoreFromJson:function(a){return a&&new f(a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/NotesUtil":function(){define([],function(){return{noteToJson:function(t){return{text:t.text}},noteFromJson:function(t){return{text:t.text}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when"],
function(t,p){var l={fromJson:function(k){function f(c){return k.imageDataCache&&k.imageDataCache[c]||c}k.areaAttachments=k.areaAttachments||k.areaAttachements;delete k.areaAttachements;return{getImagesForAreaAt:function(c){c=k.supportsMultipleAreas?c:0;return(k.areaAttachments[c]&&(k.areaAttachments[c].images||k.areaAttachments[c].attachments)||[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return f(a.thumbnail)},getUrl:function(){return f(a.url)}}})},
getAttributesForAreaAt:function(c){c=k.supportsMultipleAreas?c:0;return k.areaAttachments[c]&&k.areaAttachments[c].attributes||[]},getNotesForAreaAt:function(c){c=k.supportsMultipleAreas?c:0;return k.areaAttachments[c]&&k.areaAttachments[c].notes||[]}}}};return t(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,_provider:null,constructor:function(k){(this._provider=k.getAttachmentsForAreaAt||k.getImagesForAreaAt||k.getAttributesForAreaAt||k.getNotesForAreaAt?k:l.fromJson(k))&&this._provider.getAttachmentsForAreaAt&&
(k.getImagesForAreaAt=function(f){return k.getAttachmentsForAreaAt(f)});this.supportsMultipleAreas=k.supportsMultipleAreas},initialize:function(){},getImages:function(){function k(c){c.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var f=this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return f?Array.isArray(f)?(k(f),f):p(f,function(c){k(c);return c}):f},getAttributes:function(){return this._provider.getAttributesForAreaAt?
this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(k){this._currentAreaIndex=k}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonSerializer":function(){define(["./query/TemplateJsonQueryUtil","../images/ImageDataHolder","../conditionalStyling/ConditionalStyleUtil"],function(t,p,l){return{serialize:function(k){this._attachImagesToTemplateJson(k);
return k},_attachImagesToTemplateJson:function(k){function f(a){var b=p.getImageData(a);b&&(c[a]=b)}var c={};t.processTemplateFieldInfos(k,function(a){a.isImage?(f(a.imageJson.fileName),a.triggerJson&&l.collectImageFileNames(a.triggerJson).forEach(f)):a.isInfographic&&a.infographicJson.variableTables&&a.infographicJson.variableTables.forEach(function(b){b.image&&f(b.image.imageJson.fileName)})});t.processSectionElements(k,function(a){"img"===a.id&&f(a.fileName)});k.imageData=c},deserialize:function(k){this._takeImagesFromTemplateJson(k);
return k},_takeImagesFromTemplateJson:function(k){for(var f in k.imageData)p.putImageData(f,k.imageData[f]);delete k.imageData}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil":function(){define(["esri/dijit/geoenrichment/utils/PageUnitsConverter","esri/dijit/geoenrichment/utils/SortUtil"],function(t,p){var l={getConditionalStyle:function(b,d,e){return(b=l.getMatchedCase(b,d,e))?l.styleFromSetters(b.setters):null},getMatchedCase:function(b,d,
e){if(null!==b&&""!==b&&(b=Number(b),d&&!isNaN(b))){var g;d.cases.some(function(h){if(l._checkValueMatchesCase(b,h,e))return g=h,!0});return g}},_checkValueMatchesCase:function(b,d,e){function g(h,m,r){r=e?(h=+h,e(+r)):r;switch(m){case "\x3d":return h===r;case "\x3c":return h<r;case "\x3e":return h>r;case "\x3c\x3d":return h<=r;case "\x3e\x3d":return h>=r}return!1}return d.compareInfos&&d.compareInfos.length&&d.compareInfos.every(function(h){return g(b,h.operator,Number(h.value))})}},k={FontSize:"fontSize",
FontColor:"fontColor",FontFamily:"fontFamily",ForeColor:"color",BackColor:"backgroundColor"},f={},c;for(c in k)f[k[c]]=c;l.styleFromSetters=function(b){if(!b)return null;var d={};b.forEach(function(e){k[e.property]&&(d[k[e.property]]=e.value);"IsBold"===e.property&&(d.fontWeight="True"===e.value?"bold":"normal");"IsItalic"===e.property&&(d.fontStyle="True"===e.value?"italic":"normal");"IsUnderlined"===e.property&&(d.textDecoration="True"===e.value?"underline":"none")});t.ptToPxObj(d);return d};l.settersFromStyle=
function(b){var d=[];b=t.pxToPtObj(b,!0);for(var e in b){var g=f[e],h=b[e];!g||"string"!==typeof h&&isNaN(h)||d.push({property:g,value:h});"fontWeight"===e?d.push({property:"IsBold",value:"bold"===h?"True":"False"}):"fontStyle"===e?d.push({property:"IsItalic",value:"italic"===h?"True":"False"}):"textDecoration"===e&&d.push({property:"IsUnderlined",value:"underline"===h?"True":"False"})}return d};l.getConditionalFileName=function(b,d,e){function g(h){var m;d.cases.some(function(r){return r.isDefault===
h?(m=r,!0):!1});return m}return(b=(b="first-non-default"===b?g(!1):l.getMatchedCase(b,d,e))||g(!0))?b.setters[0].value:null};var a=/\.png$/i;l.collectImageFileNames=function(b){var d=[];b&&b.cases&&b.cases.forEach(function(e){e.setters&&e.setters.forEach(function(g){"Source"===g.property&&a.test(g.value)&&d.push(g.value)})});return d};l.isSupportedStyleCalcMethod=function(b){return"percentInGroup"===b||"aboveAverage"===b||"belowAverage"===b||"indexDescOrder"===b};l.getConditionalStylesOrFileNamesForGroup=
function(b,d,e){var g=d.map(function(y,C){return{value:y,index:C}}),h=[];for(d=0;d<g.length;d++)h.push(void 0);if(g.length){var m=b.calcMethod;g=g.filter(function(y){return"number"===typeof y.value&&!isNaN(y.value)});m&&(g=g.sort(function(y,C){return p.compareNumeric(y.value,C.value,"indexDescOrder"===m)}));if(g.length)if(m)if("percentInGroup"===m){var r=g[0].value,n=g[g.length-1].value;var q={min:r,max:n};g.forEach(function(y){var C=(y.value-r)/(n-r||.001)*100;h[y.index]=e?l.getConditionalFileName(C,
b):l.getConditionalStyle(C,b)})}else if("indexDescOrder"===m){q={min:null,max:null,numElements:g.length};var u=function(y){return 0<=y?y:g.length+y};g.forEach(function(y,C){h[y.index]=e?l.getConditionalFileName(C,b,u):l.getConditionalStyle(C,b,u)})}else{d=function(){var y=0;g.forEach(function(C){y+=C.value});return y/g.length};if("aboveAverage"===m){var w=d();g=g.filter(function(y){return y.value>w})}else if("belowAverage"===m)w=d(),g=g.filter(function(y){return y.value<w});else return{styles:h};
g.forEach(function(y){h[y.index]=e?l.getConditionalFileName("first-non-default",b):l.styleFromSetters(b.cases[0].setters)})}else g.forEach(function(y){h[y.index]=e?l.getConditionalFileName(y.value,b):l.getConditionalStyle(y.value,b)})}return{styles:h,stats:q}};l.conditionalValueFromPercentInGroup=function(b,d,e){return b+e/100*(d-b)};l.getStatistics=function(b){var d=Infinity,e=-Infinity,g,h;if(b)if(b.calcMethod&&"percentInGroup"!==b.calcMethod){d=0;e=100;var m=!0}else b.cases.forEach(function(r){r.compareInfos&&
r.compareInfos.forEach(function(n){var q=Number(n.value);isNaN(q)||(q<d&&(d=q,g="\x3c"===n.operator||"\x3c\x3d"===n.operator),q>e&&(e=q,h="\x3e"===n.operator||"\x3e\x3d"===n.operator),m=!0)})});return m&&-1E12<d&&1E12>d&&-1E12<e&&1E12>e?{calcMethod:b.calcMethod,min:d,max:e,canFallBelowMin:g,canFallAboveMax:h}:null};return l})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function t(f,c,a,b){f=void 0===f||null===f;return f!=(void 0===c||null===c)?(c=f?-1:1,(void 0===b?
a:b)?-c:c):f?0:null}function p(f){var c=/^(.+)\s([1-9]\d*)$/.exec(f);return c?{base:c[1],number:c[2]}:/^[1-9]\d*$/.test(f)?{base:"",number:+f}:{base:f,number:0}}var l={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(f,c,a,b){b=t(f,c,a,b);if(null!==b)return b;f=Number(f);c=Number(c);b=f>c?1:f<c?-1:0;return a?-b:b},compareString:function(f,c,a,b){b=t(f,c,a,b);if(null!==b)return b;f=String(f);c=String(c);b=f.localeCompare(c);return a?
-b:b}},k=/^(.+)\s([1-9]\d*)(\D*)$/;l.compareNames=function(f,c,a,b){var d=p("string"===typeof f?f.toLowerCase():f),e=p("string"===typeof c?c.toLowerCase():c),g=null;if(d.base===e.base)g=l.compareNumeric(d.number,e.number,a,b);else{var h=k.exec(d.base);if(h){var m=k.exec(e.base);m&&h[1]===m[1]&&h[3]===m[3]&&(g=l.compareNumeric(h[2],m[2],a,b))}null===g&&(g=l.compareString(d.base,e.base,a,b))}return g||l.compareString(f,c,a,b)};l.compare=function(f,c,a,b){var d=t(f,c,a,b);if(null!==d)return d;d=typeof f;
typeof c!=d&&(d="");switch(d){case "number":case "boolean":break;case "object":f=f.valueOf();c=c.valueOf();break;default:return l.compareString(f,c,a,b)}d=f>c?1:f<c?-1:0;return a?-d:d};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./map/RendererToMetadataConverter"],function(t,p){var l={},k={STORE_ID:1,AREA_ID:1,StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1};
l.recoverMetadataFromAreaData=function(f,c){f=f[0];var a={name:"DataCollection",tags:[{name:"Calculators",tags:[]}]},b={},d;for(d in f){var e=f[d].data,g=f[d].comparisonLevels,h=c.map[d],m=!!h;h=m&&"object"===typeof h&&h.webMapJson||null;var r=c.locator[d];r={name:m?"Maps":r?"Locator":"DataCollections",attributes:{Name:d},tags:[]};a.tags[0].tags.push(r);var n=[];if(m)for(var q in e){if(!k[q]){var u={name:"Map",attributes:{Name:q},tags:[{name:"Layers",tags:[]}]};h&&h.operationalLayers.forEach(function(C){if(C.isLocatorLayer){var D=
{name:"LocatorResultsLayer",attributes:{CalculatorName:C.calculatorName},tags:[p.convertRendererJson(C.featureCollection.layers[0].layerDefinition.drawingInfo.renderer)]};b[C.calculatorName]=C.featureCollection.layers[0].title;u.tags[0].tags.push(D)}C.isComparisonLayer&&(D=C.featureCollection.layers[0].layerDefinition.drawingInfo,C={name:"ComparisonResultsLayer",attributes:{CalculatorName:C.calculatorName},tags:[p.convertRendererJson(D.renderer)]},D.labelingInfo&&C.tags.push(p.convertLabelingInfo(D.labelingInfo)),
u.tags[0].tags.push(C))});n.push(u)}}else for(q in e)n.push({name:"Field",attributes:{Name:q,Alias:q,MapTo:"DC."+q,Type:"number"===typeof e[q]?"Double":"String"}});r.tags.push({name:"Fields",tags:n});if(g&&g.length){var w=[],y={};g.forEach(function(C){C.StdGeographyLevel&&!y[C.StdGeographyLevel]&&(y[C.StdGeographyLevel]=1,w.push(C.StdGeographyLevel))});w.length&&r.tags.push({name:"ComparisonLevels",tags:w.map(function(C){return{name:"ComparisonLevel",attributes:{Name:C}}})})}}a.tags[0].tags.forEach(function(C){if("Locator"===
C.name){var D=b[C.attributes.Name];D&&(C.attributes.LayerName=D)}});return t.parseJson(a)};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/RendererToMetadataConverter":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t,p,l){var k={convertRendererJson:function(f){switch(f.type){case "simple":"esriPMS"===f.symbol.type&&(f=t.clone(f),delete f.symbol.url)}return l.parseXml(p.parseJson(f,
{rootName:"Renderer"}))},convertLabelRendererJson:function(f){f=f.uniqueValueInfos.map(function(c){return{labelExpressionInfo:{expression:"$feature.StdGeographyName"},where:"StdGeographyLevel\x3d'"+c.value+"'",labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:c.symbol}});return k.convertLabelingInfo(f)},convertLabelingInfo:function(f){return l.parseXml(p.parseJson(f,{rootName:"LabelingInfo"}))}};return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/CacheUtil ./CustomReportsManager ./GenericTemplateGenerator ./dataCollections/DataCollectionsLoader ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g){var h={_getCache:function(){return k.get("TemplateJsonLoader")},getCachedTemplateJsonPromise:function(m,r){m=m+";"+r.reportID;return(m=this._getCache()[m])&&m.modified===r.modified?m.promise.then(function(n){return{templateJson:t.clone(n.templateJson),templateVariableProvider:n.templateVariableProvider}}):null},putCachedTemplateJsonPromise:function(m,r,n){r=r+";"+n.reportID;this._getCache()[r]={modified:n.modified,promise:m}}};return{getTemplateJsonByID:function(m,
r){var n=this,q=new p;l(f.getCustomReportByID(m),function(u){if(u){var w=r&&h.getCachedTemplateJsonPromise(m.countryID,u);w?w.then(q.resolve,q.reject):(w=n._loadCustomReportData(u).then(function(){var y=new d;return l(b.provideEditorJson(u,{variableProvider:y}),function(){var C=u.templateJson;u.portalJson=null;u.templateJson=null;return{templateJson:C,templateVariableProvider:y}})}),r?(h.putCachedTemplateJsonPromise(w,m.countryID,u),h.getCachedTemplateJsonPromise(m.countryID,u).then(q.resolve,q.reject)):
w.then(q.resolve,q.reject))}else q.reject("Can't find a report")},q.reject);return q.promise},_loadCustomReportData:function(m){m.portalJson=null;return m.templateData.getFiles().then(function(r){m.portalJson={files:r}})},createTemplateJsonFromVariables:function(m){return a.loadVariables({countryID:m.countryID,outFields:["description","precision","type","vintage"],forceLowerCase:!0}).then(function(r){var n=new d,q=r.fullNameToVariableCache;r=m.variables.fullNames.map(function(u){var w=e.createFieldNameFromSource(u),
y=m.variables.customDataMapping[u];y=y?y.variable:q[u];u={id:y.id.toLowerCase(),fullName:u,alias:y.description,fieldName:w,precision:y.precision,calculatorName:e.DATA_COLLECTIONS_CALCULATOR_NAME,templateName:e.DATA_COLLECTIONS_CALCULATOR_NAME+"."+w,type:y.type,vintage:y.vintage};n.addVariable(u);return g.getCalculatorOrScriptFieldInfo(u.templateName,{variableProvider:n})});return{templateJson:c.generateTemplatesFromFieldInfos(r,{comparisonLevels:m.comparisonLevels}),templateVariableProvider:n}})}}})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GenericTemplateGenerator":function(){define("../../core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder ../../core/supportClasses/tableJson/TableJsonUtil ../../core/sections/sectionUtils/SectionJsonUtil ../../core/infographics/InfographicTypes ../../core/infographics/utils/InfographicJsonUtil".split(" "),function(t,p,l,k,f,c){var a={},b={calcNumRowsColumns:function(g){var h=
2>=g?1:6>=g?2:12>=g?3:Math.ceil(g/4);var m=1===g?1:4>=g?2:9>=g?3:4;return{numRows:h,numColumns:m,numVarsInLastRow:m-(h*m-g),lastRowCellIndexes:null,lastRowCellWidths:null}}},d={mergeLastRow:function(g,h,m){2===h.numColumns?1===h.numVarsInLastRow&&(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:2}),h.lastRowCellWidths=[2*m]):3===h.numColumns?1===h.numVarsInLastRow?(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:3}),h.lastRowCellWidths=[3*m]):2===h.numVarsInLastRow&&(l.modifyTableJson(g,h.numRows-1,0,
{cellStyle:{width:1.5*m}}),l.modifyTableJson(g,h.numRows-1,1,{columnSpan:2,cellStyle:{width:.5*m}}),h.lastRowCellWidths=[1.5*m,1.5*m]):4===h.numColumns&&(1===h.numVarsInLastRow?(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:4}),h.lastRowCellWidths=[4*m]):2===h.numVarsInLastRow?(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:2}),l.modifyTableJson(g,h.numRows-1,2,{columnSpan:2}),h.lastRowCellIndexes=[0,2],h.lastRowCellWidths=[2*m,2*m]):3===h.numVarsInLastRow&&(l.modifyTableJson(g,h.numRows-1,0,{cellStyle:{width:4*
m/3}}),l.modifyTableJson(g,h.numRows-1,1,{columnSpan:2,cellStyle:{width:2*m/3}}),l.modifyTableJson(g,h.numRows-1,2,{cellStyle:{width:2*m/3}}),l.modifyTableJson(g,h.numRows-1,3,{cellStyle:{width:4*m/3}}),h.lastRowCellIndexes=[0,1,3],h.lastRowCellWidths=[4*m/3,4*m/3,4*m/3]))}},e={insertNextPanel:function(g,h,m){void 0===h.currentRowIndex&&(h.currentRowIndex=0,h.currentColumnIndex=0);var r=h.currentRowIndex===h.numRows-1;g.rows[h.currentRowIndex].fieldInfos["field"+(r&&h.lastRowCellIndexes?h.lastRowCellIndexes[h.currentColumnIndex]:
h.currentColumnIndex)]=m(r&&h.lastRowCellWidths&&h.lastRowCellWidths[h.currentColumnIndex]);h.currentColumnIndex++;h.currentColumnIndex>h.numColumns-1&&(h.currentColumnIndex=0,h.currentRowIndex++)}};a.generateTemplatesFromFieldInfos=function(g){var h=b.calcNumRowsColumns(g.length),m=t.createBlankTemplate({elementWidth:500,elementHeight:250,layout:{numRows:h.numRows,numColumns:h.numColumns}}),r=m.sectionsTables[0];d.mergeLastRow(r,h,500);g.forEach(function(n){e.insertNextPanel(r,h,function(q){var u=
a._createInfographicJson(n,q||500,250);q=l.createSingleCellTable({width:q||500,height:250,fieldInfo:p.createFieldInfoFromInfographic(u)});return p.createFieldInfoFromSection(k.wrapInDetailsSectionJson(q))})});return m};a._createInfographicJson=function(g,h,m){return{type:f.ONE_VAR,title:g.alias,style:{width:h,height:m},levels:c.getDefaultLevels(),fieldInfos:[g],calcData:{calculatorName:g.templateName.substr(0,g.templateName.indexOf(".")),variables:[g.fullName]}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions",
"./TemplateJsonModificationUtil"],function(t,p){return{createBlankTemplate:function(l){var k={},f=l.documentOptions||t.getDefaultDocumentOptionsGraphicReport();f.pagesize=t.combineCustomSizeString(f.left+f.right+l.layout.numColumns*l.elementWidth,f.top+f.bottom+l.layout.numRows*l.elementHeight,"px");k.documentOptions=f;f={style:{width:l.layout.numColumns*l.elementWidth},columns:[],rows:[]};for(var c=0;c<l.layout.numColumns;c++)f.columns.push({field:"field"+c,style:{width:l.elementWidth}});for(c=0;c<
l.layout.numRows;c++)f.rows.push({style:{height:l.elementHeight},fieldInfos:{}});k.sectionsTables=[f];p.adjustDocumentOptions(k);return k}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(t,p){var l={},k={getJsonStat:function(c){var a=0,b=0,d=[];c.sectionsTables.forEach(function(e){var g=
0;e.columns.forEach(function(m){g+=f.getFieldWidth(e,e.rows[0],m)});a=Math.max(a,g);var h=0;e.rows.forEach(function(m){h+=f.getDataHeight(e,m,e.columns[0])});b=Math.max(b,h);d.push({totalW:g,totalH:h})});return{tableInfos:d,totalWMax:a,totalHMax:b}}},f={getFieldWidth:function(c,a,b){return p.getFieldWidth({looseResize:!0},a,b)||b.style.width},getDataHeight:function(c,a,b){return p.getDataHeight({looseResize:!0},a,b.field)},getAverageFieldWidth:function(c,a){var b=0;c.rows.forEach(function(d){b+=f.getFieldWidth(c,
d,a)});return b/c.rows.length},getAverageDataHeight:function(c,a){var b=0;c.columns.forEach(function(d){b+=f.getDataHeight(c,a,d)});return b/c.columns.length}};l.adjustDocumentOptions=function(c){if(c.documentOptions){var a=k.getJsonStat(c);a.totalWMax&&a.totalHMax&&!isNaN(a.totalWMax)&&!isNaN(a.totalHMax)&&(c=c.documentOptions,c.pagesize=t.combineCustomSizeString(c.left+c.right+a.totalWMax,c.top+c.bottom+a.totalHMax,"px"),(a=t.getClosestStandrdSizes(c)[0])&&.001>a.score&&a.orientation===c.orientation&&
(c.pagesize=a.pagesize))}};l.JsonStatCollector=k;l.DataUtil=f;return l})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator":function(){define("dojo/_base/lang ./gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil ./gridLayoutCalcUtils/GridElementBoxCalculator ./gridLayoutCalcUtils/GridCellNodePlacer ./gridLayoutCalcUtils/rows/GridLayoutRowsCalculator ./gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator ./gridLayoutCalcUtils/GridLayoutSnapper ../../supportClasses/tableJson/TableJsonUtil".split(" "),
function(t,p,l,k,f,c,a,b){var d={};l.calculator=d;d.markAsDirty=p.markAsDirty;d.fieldToColumn=p.fieldToColumn;d.dataIdToData=p.dataIdToData;d.getSpannedColumns=p.getSpannedColumns;d.recalcRows=f.recalcRows;d.recalcColumns=c.recalcColumns;d.recalcColumnsTableJson=c.recalcColumnsTableJson;d.recalcRowsToFitHeight=f.recalcRowsToFitHeight;d.adjustColumnWidth=c.adjustColumnWidth;d.getAffectedCellsForColumnAdjust=c.getAffectedCells;d.adjustRowHeight=f.adjustRowHeight;d.getAffectedCellsForRowAdjust=f.getAffectedCells;
d.recalcGridWidth=c.recalcGridWidth;d.calcFieldWidth=c.calcFieldWidth;d.getFieldWidth=c.getFieldWidth;d.setFieldWidth=c.setFieldWidth;d.calcDataHeight=f.calcDataHeight;d.getDataHeight=f.getDataHeight;d.setDataHeight=f.setDataHeight;d.autoSnapLayout=a.autoSnapLayout;d.positionCells=k.positionCells;d.calcFeatureCount=function(e,g,h){return(e-g)/h};d.calcRingIndexForCell=function(e){var g=e.parentGrid;if(!g)return-1;if(g.getNumDynamicRows())return void 0!==e.row.currentFeatureIndex?e.row.currentFeatureIndex:
e.row.index-g.getNumFixedRows();var h=g.getNumFixedColumns();return e.column.index<h?-1:Math.floor((e.column.index-h)/g.getNumDynamicColumns())};d.trimColumnsForNumberOfFeatures=function(e){for(var g=e.viewModel.dynamicReportInfo.fieldData.areaData.length,h=d.recalcGridWidth(e),m=0,r=0;r<e.getNumFixedColumns();r++)m+=e.columns[r].style.width;h-=m;m=d.calcFeatureCount(e.columns.length,e.getNumFixedColumns(),e.getNumDynamicColumns())-g;if(!(0>m)){var n=e.columns.slice();r=n.length=e.getNumFixedColumns();
for(var q=[],u=0;e.columns[r];){for(var w=0;w<g;w++){var y=e.columns[r++];u+=y.style.width;q.push(y)}r+=m}var C=h/u;q.forEach(function(D){D.style.width*=C});e.columns=n.concat(q)}};d.adjustRowsForNumberOfFeatures=function(e){var g=e.viewModel.dynamicReportInfo.fieldData.areaData.length;if(!(1>=g)){var h=e.rows[e.getNumFixedRows()];h.currentFeatureIndex=0;for(var m=1;m<g;m++){var r=t.clone(h);r.currentFeatureIndex=m;e.rows.push(r)}b.applyDefaultStyling({rows:e.rows,columns:e.columns})}};return d})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil":function(){define([],function(){var t={markAsDirty:function(p){p._fieldToColumnHash=null;p._dataIdToDataHash=null},_calcGridHashes:function(p){p._fieldToColumnHash={};p.columns.forEach(function(l){p._fieldToColumnHash[l.field]=l});p._dataIdToDataHash={};p.rows.forEach(function(l){p._dataIdToDataHash[l.id]=l})},fieldToColumn:function(p,l){p._fieldToColumnHash||t._calcGridHashes(p);return p._fieldToColumnHash&&
p._fieldToColumnHash[l]},dataIdToData:function(p,l){p._dataIdToDataHash||t._calcGridHashes(p);return p._dataIdToDataHash&&p._dataIdToDataHash[l]},getSpannedColumns:function(p,l,k){var f=[];if(1>k)return[];var c;p.columns.some(function(a){if(c||a.field===l)f.push(a),c=!0;if(f.length===k)return!0});return f},getColumnSpannedFields:function(p,l,k){var f=null,c=l.fieldToRowSpanSourceDataIndex&&l.fieldToRowSpanSourceDataIndex[k];l=void 0!==c?p.rows[c]:l;l=l.columnSpans&&l.columnSpans[k];if(1<l)for(f=[],
k=t.fieldToColumn(p,k),c=k=p.columns.indexOf(k);c<k+l;c++)f.push(p.columns[c].field);return f},getRowSpannedData:function(p,l,k){var f=null;k=l.fieldToColumnSpanSourceField&&l.fieldToColumnSpanSourceField[k]||k;k=l.rowSpans&&l.rowSpans[k];if(1<k){f=[];for(var c=l=p.rows.indexOf(l);c<l+k;c++)f.push(p.rows[c])}return f},getMovableData:function(p,l,k){return(l=l.movableIndexHashVertical&&l.movableIndexHashVertical[k])&&p.rows[l]},getMovableColumn:function(p,l,k){return(l=l.movableFieldsHashHorizontal&&
l.movableFieldsHashHorizontal[k])&&t.fieldToColumn(p,l)}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridElementBoxCalculator":function(){define([],function(){function t(l,k,f,c,a){function b(r){return c&&void 0!==c.places?Number(r.toFixed(c.places)):r}if(!k||!f)return null;var d=p.calculator[a?"getFieldWidth":"calcFieldWidth"](l,k,f);a=p.calculator[a?"getDataHeight":"calcDataHeight"](l,k,f);for(var e=0,g=0,h=p.calculator.fieldToColumn(l,f),m=0;m<h.index;m++)e+=
p.calculator.getFieldWidth(l,k,l.columns[m].field);for(m=0;m<k.index;m++)g+=p.calculator.getDataHeight(l,l.rows[m],f);return{x:b(e),y:b(g),w:b(d),h:b(a)}}var p={calculator:null,calcCellBox:function(l,k){return t(l.parentGrid,l.row,l.column.field,k,!1)},calcDataBox:function(l,k,f,c){return t(l,k,f,c,!0)}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridCellNodePlacer":function(){define(["./rows/GridLayoutRowsCalculator","./columns/GridLayoutColumnsCalculator"],
function(t,p){return{positionCells:function(l){var k={},f={},c={},a={};if(l.rows.length){l.rows.forEach(function(g,h){l.columns.forEach(function(m,r){var n=c[r]||0,q=a[h]||0,u=t.getDataHeight(l,g,m.field);m=p.getFieldWidth(l,g,m.field);n+=u;q+=m;f[r+"_"+h]=n;k[r+"_"+h]=q;c[r]=n;a[h]=q})});l.getCells().forEach(function(g){g.domNode.style.left=(k[g.column.index-1+"_"+g.row.index]||0)+"px";g.domNode.style.top=(f[g.column.index+"_"+(g.row.index-1)]||0)+"px"});var b=0,d;for(d in c)b=Math.max(b,c[d]);var e=
0;for(d in a)e=Math.max(e,a[d]);l.mainNode.style.width=e+"px";l.mainNode.style.height=b+"px";l.domNode.style.width=e+"px";l.domNode.style.height=b+"px";l._width=e;l._height=b}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/GridLayoutRowsCalculator":function(){define(["./RowsProcessor","./RowsScaler","./RowDataUtil","./RowModifier"],function(t,p,l,k){var f={};f.recalcRows=t.recalcRows;f.recalcRowsToFitHeight=p.recalcRowsToFitHeight;f.adjustRowHeight=k.adjustRowHeight;
f.getAffectedCells=k.getAffectedCells;f.getDataHeight=l.getDataHeight;f.setDataHeight=l.setDataHeight;f.calcDataHeight=l.calcDataHeight;return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./RowDataUtil","../GridLayoutCalculatorQueryUtil"],function(t,p,l){function k(c,a){var b=[],d,e=0;a&&Object.keys(a).forEach(function(g){l.fieldToColumn(c,g)?e++:delete a[g]});e&&c.columns.some(function(g){if(d||
a[g.field])b.push(g),d=!0;a[g.field]&&e--;if(!e)return!0});return b}function f(c,a){var b=[],d,e=0;a&&Object.keys(a).forEach(function(g){l.dataIdToData(c,g)?e++:delete a[g]});e&&c.rows.some(function(g){if(d||a[g.id])b.push(g),d=!0;a[g.id]&&e--;if(!e)return!0});return b}return{recalcRows:function(c){var a={};c.columns.forEach(function(g,h){a[g.field]=h});var b;c.rows.forEach(function(g,h){g.index=h;g.style=g.style||{};g.style.fields=g.style.fields||{};void 0===g.id&&(g.id=t());void 0===g.style.height&&
(g.style.height=c.layoutDefaults.defaultRowHeight);delete g.excludedIndexHorizontal;delete g.movableFieldsHashHorizontal;delete g.fieldToColumnSpanSourceField;if(g.columnSpans){g.excludedIndexHorizontal={};g.movableFieldsHashHorizontal={};g.fieldToColumnSpanSourceField={};g._columnSpans=g._columnSpans||{};for(b in g.columnSpans){h=g._columnSpans[b];var m={};h=h?k(c,h):l.getSpannedColumns(c,b,g.columnSpans[b]);1<h.length&&(h.forEach(function(n){m[n.field]=!0;n.field!==b&&(g.excludedIndexHorizontal[a[n.field]]=
!0,g.fieldToColumnSpanSourceField[n.field]=b)}),g.movableFieldsHashHorizontal[b]=h[h.length-1].field);g.columnSpans[b]=h.length;g._columnSpans[b]=m}var r=0;Object.keys(g.columnSpans).forEach(function(n){2>g.columnSpans[n]?(delete g.columnSpans[n],delete g._columnSpans[n]):r++});r||(delete g.columnSpans,delete g._columnSpans)}delete g.excludedIndexVertical;delete g.movableIndexHashVertical;delete g.fieldToRowSpanSourceDataIndex;g.fieldInfos=g.fieldInfos||{}});c.rows.forEach(function(g,h){if(g.rowSpans)for(b in g._rowSpans=
g._rowSpans||{},g.rowSpans){var m=g._rowSpans[b],r={};r[g.id]=!0;var n=a[b],q=g.rowSpans[b];if(m)m=f(c,m);else{m=[];for(var u=h;u<h+q;u++)m.push(c.rows[u])}1<m.length&&(m.forEach(function(w){if(w.id!==g.id){w.excludedIndexVertical=w.excludedIndexVertical||{};w.excludedIndexVertical[n]=!0;w.fieldToRowSpanSourceDataIndex=w.fieldToRowSpanSourceDataIndex||{};w.fieldToRowSpanSourceDataIndex[b]=g.index;var y=g.columnSpans&&g.columnSpans[b];if(y)for(var C=1;C<y;C++)w.excludedIndexVertical[n+C]=!0,w.fieldToRowSpanSourceDataIndex[c.columns[n+
C].field]=g.index}r[w.id]=!0}),g.movableIndexHashVertical=g.movableIndexHashVertical||{},g.movableIndexHashVertical[b]=h+m.length-1);g.rowSpans[b]=m.length;g._rowSpans[b]=r}});c.rows.forEach(function(g,h){if(g.rowSpans){for(b in g.rowSpans)g.rowSpans[b]=Math.min(g.rowSpans[b],c.rows.length-h);var m=0;Object.keys(g.rowSpans).forEach(function(r){2>g.rowSpans[r]?(delete g.rowSpans[r],g._rowSpans&&delete g._rowSpans[r]):m++});m||(delete g.rowSpans,delete g._rowSpans)}});c.rows.forEach(function(g,h){g.fieldInfos&&
Object.keys(g.fieldInfos).forEach(function(m){void 0===a[m]&&delete g.fieldInfos[m]});g.style&&g.style.fields&&Object.keys(g.style.fields).forEach(function(m){void 0===a[m]&&delete g.style.fields[m]})});if(c.looseResize){c.rows.forEach(function(g){c.columns.some(function(h){p.getDataHeightOwn(c,g,h.field)||p.setDataHeight(c,g,h.field,g.style.height)})});var d=c.rows[c.rows.length-1],e=p.recalcGridHeight(c);c.columns.some(function(g){var h=0;c.rows.forEach(function(r){h+=p.getDataHeightOwn(c,r,g.field)});
var m=e-h;0!==m&&p.setDataHeight(c,d,g.field,p.getDataHeightOwn(c,d,g.field)+m)})}p.recalcGridHeight(c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(t){var p={getDataHeight:function(l,k,f){return l.looseResize?p.getDataHeightOwn(l,k,f)||k.style.height||0:k.style.height||0},getDataHeightOwn:function(l,k,f){if(l.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[f]=
k.style.fields[f]||{}).height},setDataHeight:function(l,k,f,c,a){l.looseResize?(a?t.getColumnSpannedFields(l,k,f)||[f]:[f]).forEach(function(b){k.style.fields=k.style.fields||{};(k.style.fields[b]=k.style.fields[b]||{}).height=c}):k.style.height=c},calcDataHeight:function(l,k,f,c){var a=0,b=k.rowSpans&&k.rowSpans[f];if(1<b)for(var d=k.index;d<k.index+b;d++)d!==c&&(a+=p.getDataHeight(l,l.rows[d],f));else a=p.getDataHeight(l,k,f);return a},recalcGridHeight:function(l){l._height=0;var k=l.columns[0].field;
l.rows.forEach(function(f){l._height+=p.getDataHeight(l,f,k)});return l._height}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsScaler":function(){define(["./RowDataUtil"],function(t){return{recalcRowsToFitHeight:function(p,l){function k(a){a.forEach(function(b){p.columns.some(function(d,e){if(!p.looseResize&&e)return!0;t.setDataHeight(p,b,d.field,t.getDataHeight(p,b,d.field)*c)})})}var f=t.recalcGridHeight(p),c=l/f;1!==c&&(k(p.rows),p._getSavedOriginalData()&&
k(p._getSavedOriginalData()),t.recalcGridHeight(p))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./RowDataUtil","./_RowModifierLoose","./_RowModifierNormal"],function(t,p,l,k){var f={},c={checkHeightLimit:function(d,e,g,h){if(d.getMaxHeight()){var m=0;d.rows.forEach(function(r){r!==e&&(m+=p.getDataHeight(d,r,g))});h=Math.min(d.getMaxHeight()-m,h)}return h}},a={findDataToMove:function(d,
e,g,h){var m=t.getMovableData(d,e,g);m&&(d=p.calcDataHeight(d,e,g,m.index),h-=d);return{data:m||e,height:h}}},b={finalResizeGridCells:function(d){d.getCells().forEach(function(e){e.setHeight(p.calcDataHeight(d,e.row,e.column.field))})}};f.adjustRowHeight=function(d,e,g,h){h=c.checkHeightLimit(d,e,g,h);e=a.findDataToMove(d,e,g,h);(d.looseResize?l:k).adjustRowHeight(d,e.data,g,e.height);b.finalResizeGridCells(d)};f.getAffectedCells=function(d,e,g){return d.looseResize?l.getAffectedCells(d,a.findDataToMove(d,
e,g).data,g):null};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./RowDataUtil ../../GridQueryUtil".split(" "),function(t,p,l,k,f,c){var a={collectRowBoxes:function(g,h){for(var m=[],r=0;r<g.columns.length;){var n=g.columns[r],q=this._createEmptyBox();n=l.getColumnSpannedFields(g,h,n.field)||[n.field];q.elements=
this._getFieldsElements(g,h,n);this._measureBox(q);var u=m[m.length-1];u&&(u.nextSibling=q,q.prevSibling=u);m.push(q);r+=n.length}return m},_createEmptyBox:function(){return{id:p(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getFieldsElements:function(g,h,m){var r=[];m.forEach(function(n){n={data:h,dataIndex:h.index,field:n,box:k.calcDataBox(g,h,n,{places:2})};r.push(n)});return r},_measureBox:function(g){var h=0;g.elements.forEach(function(m){h+=
m.box.w});g.box={x:g.elements[0].box.x,y:g.elements[0].box.y,h:g.elements[0].box.h,w:h}},mergeBoxesForBottomRow:function(g){var h=this._createEmptyBox();g.forEach(function(m){m.elements.forEach(function(r){h.elements.push({data:null,field:r.field,box:t.clone(r.box)})})});this._measureBox(h);h.box.h=1E6;return[h]},getBoxAtField:function(g,h){return g.filter(function(m){return m.elements[0].field===h})[0]}},b={buildInfluenceTree:function(g,h,m){function r(n,q){(q?h:g).forEach(function(u){var w;if(w=
!u.overlappingBoxesCache[n.id]){w=n.box;var y=u.box;w=!(w.x+.5>=y.x+y.w||w.x+w.w<=y.x+.5)}w&&(n.overlappingBoxes.push(u),n.overlappingBoxesCache[u.id]=!0)});n.overlappingBoxes.forEach(function(u){r(u,!q)})}m=a.getBoxAtField(g,m);r(m,!0);return m}},d={applyForce:function(g,h,m){function r(q,u){var w=q.elements[0];w.data&&f.setDataHeight(g,w.data,w.field,f.getDataHeight(g,w.data,w.field)+(u?-1:1)*n,!0);q.overlappingBoxes.forEach(function(y){r(y,!u)})}var n=this._checkDelta(g,h,m);r(h,!1)},_checkDelta:function(g,
h,m){function r(u,w){0!==q&&(w?0>q||(q=Math.min(q,u.box.h-n),u.prevSibling&&(q=Math.min(q,u.prevSibling.box.y+u.prevSibling.box.h-n-u.box.y)),u.nextSibling&&(q=Math.min(q,u.nextSibling.box.y+u.nextSibling.box.h-n-u.box.y))):0<q||(q=Math.max(q,-(u.box.h-n)),u.prevSibling&&(q=Math.max(q,-(u.box.y+u.box.h-(u.prevSibling.box.y+n)))),u.nextSibling&&(q=Math.max(q,-(u.box.y+u.box.h-(u.nextSibling.box.y+n))))),u.overlappingBoxes.forEach(function(y){r(y,!w)}))}var n=g.layoutDefaults.rowMinHeight;m=Math.max(m,
n);var q=m-h.box.h;r(h,!1);return q}},e={_getInluencedStartBox:function(g,h,m){var r=g.rows[h.index+1];h=a.collectRowBoxes(g,h);g=r?a.collectRowBoxes(g,r):a.mergeBoxesForBottomRow(h);return b.buildInfluenceTree(h,g,m)},getAffectedCells:function(g,h,m){function r(q){if(q.elements[0].data){var u=c.querySingleCell(g,{rowIndex:q.elements[0].data.index,columnField:q.elements[0].field,considerSpans:!0});u&&n.push(u)}q.overlappingBoxes.forEach(r)}var n=[];h=this._getInluencedStartBox(g,h,m);r(h);return n},
adjustRowCell:function(g,h,m,r){h=this._getInluencedStartBox(g,h,m);d.applyForce(g,h,r)}};return{adjustRowHeight:function(g,h,m,r){e.adjustRowCell(g,h,m,r)},getAffectedCells:function(g,h,m){return e.getAffectedCells(g,h,m)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridQueryUtil":function(){define(["dojo/dom-geometry","./GridDataUtil","esri/dijit/geoenrichment/utils/ArrayUtil","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/MouseUtil"],function(t,p,l,
k,f){var c={querySingleCell:function(a,b){b.fieldCell&&(b={rowId:b.fieldCell.row.id,columnId:b.fieldCell.column.id});var d;a.getCells().some(function(r){if(r.parentGrid&&r.column&&r.row&&!(r.column.id!==b.columnId&&r.column.index!==b.columnIndex&&r.column.field!==b.columnField||r.row.id!==b.rowId&&r.row.index!==b.rowIndex))return d=r,!0});if(d)return d;if(b.considerSpans){var e=c.queryColumn(a,b),g=c.queryData(a,b);if(!e||!g)return null;var h=e.index,m=g.index;a.rows.some(function(r){return a.columns.some(function(n){var q=
n.index,u=n.index+(r.columnSpans&&r.columnSpans[n.field]||0),w=r.index;n=r.index+(r.rowSpans&&r.rowSpans[n.field]||0);if(q<=h&&u>=h&&w<=m&&n>=m)return d=c.querySingleCell(a,{columnIndex:q,rowIndex:w}),!0})})}return d},queryColumn:function(a,b){var d;a.columns.some(function(e){if(e.id===b.columnId||e.index===b.columnIndex||e.field===b.columnField)return d=e,!0});return d},queryData:function(a,b){var d;a.rows.some(function(e){if(e.id===b.rowId||e.index===b.rowIndex)return d=e,!0});return d},queryCells:function(a,
b){if(b.fieldCell){var d=[],e=b.rowSpan||1,g=b.columnSpan||1;if(b=c.querySingleCell(a,b))for(var h=b.row.index;h<b.row.index+e;h++)for(var m=b.column.index;m<b.column.index+g;m++){var r=c.querySingleCell(a,{rowIndex:h,columnIndex:m});r&&d.push(r)}return d}return this.queryCellsInArray(a.getCells(),b)},queryCellsInArray:function(a,b){var d=[];if(!Object.keys(b).length)return d;a.forEach(function(e,g){void 0!==b.cellIndex&&g!==b.cellIndex||void 0!==b.cellIndexes&&-1===b.cellIndexes.indexOf(g)||void 0!==
b.columnId&&e.column.id!==b.columnId||void 0!==b.columnIds&&-1===b.columnIds.indexOf(e.column.id)||void 0!==b.columnIndex&&e.column.index!==b.columnIndex||void 0!==b.columnIndexes&&-1===b.columnIndexes.indexOf(e.column.index)||void 0!==b.columnField&&e.column.field!==b.columnField||void 0!==b.columnFields&&-1===b.columnFields.indexOf(e.column.field)||void 0!==b.rowId&&e.row.id!==b.rowId||void 0!==b.rowIds&&-1===b.rowIds.indexOf(e.row.id)||void 0!==b.rowIndex&&e.row.index!==b.rowIndex||void 0!==b.rowIndexes&&
-1===b.rowIndexes.indexOf(e.row.index)||d.push(e)});return d},isDynamicFieldCell:function(a,b){return a._dynamicBindings&&a._dynamicBindings[b.column.field]},getDynamicallyBoundColumns:function(a,b){return a._dynamicBindings&&a._dynamicBindings[b.field]},getDynamicallyBoundFieldCells:function(a,b){if(b.column){var d=a._dynamicBindings&&a._dynamicBindings[b.column.field];if(!d)return null;var e=[];d.forEach(function(g){(g=g&&c.querySingleCell(a,{columnId:g.id,rowId:b.row.id}))&&e.push(g)});return e}},
getAllBoundCells:function(a,b,d){var e=[],g={};b&&b.forEach(function(h){if((!d||d(h))&&!g[h.uniqueId]){g[h.uniqueId]=!0;var m=c.getDynamicallyBoundFieldCells(a,h);m?m.forEach(function(r){e.push(r);g[r.uniqueId]=!0}):e.push(h)}});return l.removeDuplicates(e,"uniqueId")},trimDynamicBindings:function(a,b){var d=[],e={};b&&b.forEach(function(g){var h=c.getDynamicallyBoundFieldCells(a,g);h&&h.length?(e[h[0].uniqueId]||d.push(h[0]),h.forEach(function(m){e[m.uniqueId]=!0})):d.push(g)});return d},collectFieldInfos:function(a,
b){var d=[];b=b||{};var e=b.fieldCells||a.getCells();b.trimDynamicBinding&&e&&(e=c.trimDynamicBindings(a,e));e&&e.forEach(function(g){(g=p.getFieldInfo(g))&&d.push(g)});return d},cellHasFloatingTableParent:function(a){function b(d){return d.isSection&&d.isDataDrillingView?!1:d.isFloatingTable?!0:d.parentWidget?b(d.parentWidget):!1}return a&&a.parentGrid?b(a.parentGrid):!1},isMouseOver:function(a){return f.isMouseOverBox(c.getBBox(a))},getOverFieldCell:function(a,b){b=b||{};var d=b.cellFilter||function(){return!0},
e;a.getForegroundFloatingCells({topFirst:!0}).some(function(g){if(d(g)&&g.isMouseOver())return e=g,!0});e||a.getCells().some(function(g){if(d(g)&&g.isMouseOver())return e=g,!0});e||a.getBackgroundFloatingCells({topFirst:!0}).some(function(g){if(d(g)&&g.isMouseOver())return e=g,!0});return e},getBBox:function(a,b){var d=a.isSingleCelledTable()&&a.getFirstCell().getAngle();return"number"===typeof d&&0!==d?a.getFirstCell().getBBox(b):b&&b.noTransformation?k.noTransformPosition(a.domNode):t.position(a.domNode)}};
return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierNormal":function(){define(["./RowDataUtil"],function(t){return{adjustRowHeight:function(p,l,k,f){var c=p.layoutDefaults.rowMinHeight;f=Math.max(f,c);var a=f-t.getDataHeight(p,l,k);if(p.keepGridHeightWhenResized){var b=p.rows[l.index+1];b&&(a=t.getDataHeight(p,b,k)-a,a<c&&(f-=c-a,a=c),t.setDataHeight(p,b,k,a,!0))}t.setDataHeight(p,l,k,f,!0)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator":function(){define(["./ColumnDataUtil",
"./ColumnModifier","./ColumnsProcessor"],function(t,p,l){var k={};k.recalcColumns=l.recalcColumns;k.recalcColumnsTableJson=l.recalcColumnsTableJson;k.adjustColumnWidth=p.adjustColumnWidth;k.getAffectedCells=p.getAffectedCells;k.getFieldWidth=t.getFieldWidth;k.setFieldWidth=t.setFieldWidth;k.calcFieldWidth=t.calcFieldWidth;k.recalcGridWidth=t.recalcGridWidth;return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],
function(t){var p={getFieldWidth:function(l,k,f){var c="string"===typeof f?t.fieldToColumn(l,f):f;f=c?c.field:"string"===typeof f?f:null;return l.looseResize?p.getFieldWidthOwn(l,k,f)||c&&c.style.width||0:c&&c.style.width||0},getFieldWidthOwn:function(l,k,f){if(l.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[f]=k.style.fields[f]||{}).width},setFieldWidth:function(l,k,f,c,a){var b="string"===typeof f?t.fieldToColumn(l,f):f,d=b?b.field:"string"===typeof f?f:null;l.looseResize?
(a?t.getRowSpannedData(l,k,d)||[k]:[k]).forEach(function(e){e.style.fields=e.style.fields||{};(e.style.fields[d]=e.style.fields[d]||{}).width=c}):b&&(b.style.width=c)},calcFieldWidth:function(l,k,f,c){var a=0;1<(k.columnSpans&&k.columnSpans[f])?t.getSpannedColumns(l,f,k.columnSpans[f]).forEach(function(b){c!==b.field&&(a+=p.getFieldWidth(l,k,b.field))}):a=p.getFieldWidth(l,k,f);return a},recalcGridWidth:function(l){l._width=0;var k=l.rows[0];l.columns.forEach(function(f){l._width+=p.getFieldWidth(l,
k,f.field)});return l._width},getAllowedWidth:function(l){return l.fitParentWhenResized?l.getAllowedWidthFromParent():l.getAllowedWidth()}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./ColumnDataUtil","./_ColumnModifierNormal","./_ColumnModifierLoose"],function(t,p,l,k){var f={},c={getColumnToChange:function(d,e,g,h){var m=t.getMovableColumn(d,e,g.field);m&&(d=p.calcFieldWidth(d,
e,g.field,m.field),h-=d);return{column:m||g,width:h}}},a={finalResizeGridCells:function(d){d.getCells().forEach(function(e){e.setWidth(p.calcFieldWidth(d,e.row,e.column.field))});p.recalcGridWidth(d)}},b={recalcToStick:function(d){var e=d.columns[d.columns.length-1];d.rows.some(function(g,h){if(!d.looseResize&&h)return!0;var m=0;d.columns.forEach(function(r){r!==e&&(m+=p.getFieldWidth(d,g,r.field))});p.setFieldWidth(d,g,e.field,p.getAllowedWidth(d)-m)})}};f.adjustColumnWidth=function(d,e,g,h){g=c.getColumnToChange(d,
e,g,h);(d.looseResize?k:l).adjustColumnWidth(d,e,g.column,g.width);d.stickToRight&&b.recalcToStick(d);a.finalResizeGridCells(d)};f.getAffectedCells=function(d,e,g){return d.looseResize?k.getAffectedCells(d,e,c.getColumnToChange(d,e,g).column):null};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierNormal":function(){define(["./ColumnDataUtil"],function(t){var p={},l={adjustColumnWidth:function(k,f,c,a,b){function d(q,u){return t.setFieldWidth(k,
f,q.field,u,!0)}var e=k.layoutDefaults.columnMinWidth,g=function(){if(!c)return null;var q=t.getFieldWidth(k,f,c.field);void 0!==b&&(a=q+b);a=Math.max(e,a);var u,w=0,y=!1;k.columns.forEach(function(D){w+=t.getFieldWidth(k,f,D.field);y&&!u?u=D:D===c&&(y=!0)});var C=t.getAllowedWidth(k)-(w-q);return isNaN(C)?null:{width:a,widthMemo:q,maxAllowedColumnWidth:C,nextColumn:u}}();if(g){a=g.width;var h=g.widthMemo,m=g.maxAllowedColumnWidth,r=(g=g.nextColumn)&&t.getFieldWidth(k,f,g.field);h=a-h;var n=0;k.keepGridWidthWhenResized?
(g&&(h=r-h,h<e&&(a-=e-h,h=e),h<r&&(m+=r-h),d(g,h)),d(c,Math.min(m,a))):(g&&m<a&&r>e?(d(c,a),n=m-a):d(c,Math.min(m,a)),0!==n&&l.adjustColumnWidth(k,f,g,null,n))}}};p.adjustColumnWidth=function(k,f,c,a){l.adjustColumnWidth(k,f,c,a)};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./ColumnDataUtil ../../GridQueryUtil".split(" "),
function(t,p,l,k,f,c){var a={collectColumnBoxes:function(g,h){for(var m=[],r=0;r<g.rows.length;){var n=g.rows[r],q=this._createEmptyBox();n=l.getRowSpannedData(g,n,h.field)||[n];q.elements=this._getSpannedDataElements(g,h,n);this._measureBox(q);var u=m[m.length-1];u&&(u.nextSibling=q,q.prevSibling=u);m.push(q);r+=n.length}return m},_createEmptyBox:function(){return{id:p(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getSpannedDataElements:function(g,
h,m){var r=[];m.forEach(function(n){n={data:n,dataIndex:n.index,field:h.field,box:k.calcDataBox(g,n,h.field)};r.push(n)});return r},_measureBox:function(g){var h=0;g.elements.forEach(function(m){h+=m.box.h});g.box={x:g.elements[0].box.x,y:g.elements[0].box.y,w:g.elements[0].box.w,h:h}},mergeBoxesForRightColumn:function(g){var h=this._createEmptyBox();g.forEach(function(m){m.elements.forEach(function(r){h.elements.push({data:r.data,field:null,box:t.clone(r.box)})})});this._measureBox(h);h.box.w=1E6;
return[h]},getBoxAtDataIndex:function(g,h){return g.filter(function(m){return m.elements[0].dataIndex===h})[0]}},b={buildInfluenceTree:function(g,h,m){function r(n,q){(q?h:g).forEach(function(u){var w;if(w=!u.overlappingBoxesCache[n.id]){w=n.box;var y=u.box;w=!(w.y+.5>=y.y+y.h||w.y+w.h<=y.y+.5)}w&&(n.overlappingBoxes.push(u),n.overlappingBoxesCache[u.id]=!0)});n.overlappingBoxes.forEach(function(u){r(u,!q)})}m=a.getBoxAtDataIndex(g,m.index);r(m,!0);return m}},d={applyForce:function(g,h,m){function r(q,
u){var w=q.elements[0];w.field&&f.setFieldWidth(g,w.data,w.field,f.getFieldWidth(g,w.data,w.field)+(u?-1:1)*n,!0);q.overlappingBoxes.forEach(function(y){r(y,!u)})}var n=this._checkDelta(g,h,m);r(h,!1)},_checkDelta:function(g,h,m){function r(w,y){0!==q&&(y?0>q||(q=Math.min(q,w.box.w-n),w.prevSibling&&(q=Math.min(q,w.prevSibling.box.x+w.prevSibling.box.w-n-w.box.x)),w.nextSibling&&(q=Math.min(q,w.nextSibling.box.x+w.nextSibling.box.w-n-w.box.x))):0<q||(q=Math.max(q,-(w.box.w-n)),w.prevSibling&&(q=Math.max(q,
-(w.box.x+w.box.w-(w.prevSibling.box.x+n)))),w.nextSibling&&(q=Math.max(q,-(w.box.x+w.box.w-(w.nextSibling.box.x+n))))),w.overlappingBoxes.forEach(function(C){r(C,!y)}))}var n=g.layoutDefaults.columnMinWidth;m=Math.max(m,n);var q=m-h.box.w;if(0<q&&h.elements[0].field===g.columns[g.columns.length-1].field){var u=0;g.columns.forEach(function(w){u+=f.getFieldWidth(g,h.elements[0].data,w.field)});q=Math.min(q,f.getAllowedWidth(g)-u)}r(h,!1);return q}},e={_getInluencedStartBox:function(g,h,m){var r=g.columns[m.index+
1];m=a.collectColumnBoxes(g,m);g=r?a.collectColumnBoxes(g,r):a.mergeBoxesForRightColumn(m);return b.buildInfluenceTree(m,g,h)},getAffectedCells:function(g,h,m){function r(q){if(q.elements[0].data){var u=c.querySingleCell(g,{rowIndex:q.elements[0].data.index,columnField:q.elements[0].field,considerSpans:!0});u&&n.push(u)}q.overlappingBoxes.forEach(r)}var n=[];h=this._getInluencedStartBox(g,h,m);r(h);return n},adjustColumnCell:function(g,h,m,r){h=this._getInluencedStartBox(g,h,m);d.applyForce(g,h,r)}};
return{adjustColumnWidth:function(g,h,m,r){e.adjustColumnCell(g,h,m,r)},getAffectedCells:function(g,h,m){return e.getAffectedCells(g,h,m)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./ColumnDataUtil"],function(t,p){function l(f){f._dynamicBindings={};if(f.getNumDynamicColumns()){for(var c=f.getNumDynamicColumns(),a=f.getNumFixedColumns(),b=0;b<a;b++)f.columns[b].isFixed=!0;b=[];for(var d=
0;d<c;d++){for(var e=a,g=[];e<f.columns.length;){var h=f.columns[e+d];h.isDynamic=!0;g.push(h);e+=c}b.push(g)}b.forEach(function(m){m.forEach(function(r){f._dynamicBindings[r.field]=m})})}}var k={recalcColumns:function(f,c){var a=c&&c.resetWidth,b=c&&c.columnsToPreserve,d=c&&c.stickToRight,e=c&&c.newWidth,g=c&&c.rightOffsetWeight;c=c&&c._isJson;var h={},m=0;f.columns.every(function(C,D){if(!C.style||!C.style.width||isNaN(C.style.width)||"number"!==typeof C.style.width)return m=0,!1;m+=C.style.width;
h[D]=C.style.width;return!0});var r=e?e:d?f.getAllowedWidth():m?Math.min(m,f._width):f._width;r-=0<g?r*g:0;var n=r/f.columns.length,q=r;if(b){var u=b.length*n,w=0;b.forEach(function(C){w+=C.style.width});b.forEach(function(C){C.style.width=u/w*C.style.width/q*100+"%"})}f.columns.forEach(function(C,D,G){C.index=D;C.style=C.style||{};if("number"!==typeof C.style.width||a)if(D===G.length-1)C.style.width=q;else{var F=C.style.width;"string"===typeof F&&-1!==F.indexOf("%")?C.style.width=parseFloat(F.substr(0,
F.length-1))/100*r:C.style.width=n}q-=C.style.width;D===G.length-1&&0>q&&(C.style.width+=q);void 0===C.id&&(C.id=t())});if(f.looseResize){f.columns.some(function(C,D){var G=h[D]?C.style.width/h[D]:void 0;f.rows.forEach(function(F){var B=p.getFieldWidthOwn(f,F,C.field);B?G&&1!==G&&p.setFieldWidth(f,F,C.field,B*G):p.setFieldWidth(f,F,C.field,C.style.width)})});var y=f.columns[f.columns.length-1].field;f.rows.forEach(function(C){var D=0;f.columns.some(function(F){D+=p.getFieldWidthOwn(f,C,F.field)});
var G=r-D;0!==G&&p.setFieldWidth(f,C,y,p.getFieldWidthOwn(f,C,y)+G)})}c||(l(f),p.recalcGridWidth(f));return r},recalcColumnsTableJson:function(f){k.recalcColumns(f,{resetWidth:!0,newWidth:f.style.width,_isJson:!0})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutSnapper":function(){define(["dojo/_base/lang","./rows/RowDataUtil","./columns/ColumnDataUtil","./GridElementBoxCalculator"],function(t,p,l,k){return{autoSnapLayout:function(f){function c(){var r=
[];f.rows.forEach(function(n){f.columns.forEach(function(q){r.push(t.mixin({id:n.index+"_"+q.field,data:n,dataIndex:n.index,column:q,field:q.field},k.calcDataBox(f,n,q.field)))})});return r}if(f.looseResize)for(var a=f.rows.length*f.columns.length,b={},d=0;d<a;d++){var e=c(),g=e[d],h=g.x+g.w,m=g.y+g.h;b[g.id]=!0;e.forEach(function(r){if(!b[r.id]){var n=h-(r.x+r.w);.5>=Math.abs(n)&&l.setFieldWidth(f,r.data,r.field,r.w+n);n=m-(r.y+r.h);.5>=Math.abs(n)&&p.setDataHeight(f,r.data,r.field,r.h+n)}})}}}})},
"esri/dijit/geoenrichment/ReportPlayer/core/sections/sectionUtils/SectionJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes","../../supportClasses/tableJson/TableJsonUtil"],function(t,p,l){var k={wrapInDetailsSectionJson:function(f,c){f=Array.isArray(f)?f:[f];var a=f.some(function(b){return"table"===b.id&&b.attributes&&(0<b.attributes.dynamicColumns||
0<b.attributes.dynamicRows)});return{type:c||(a?p.GROUP:p.DETAILS),stack:f}},createSectionJsonFromInfographicJson:function(f,c,a){f=l.createSingleCellTable({width:c,height:a,fieldInfo:t.createFieldInfoFromInfographic(f)});return k.wrapInDetailsSectionJson(f)},getSectionJsonInfographic:function(f){var c;f.stack&&f.stack.some(function(a){c="table"===a.id&&l.getTableJsonInfographic(a);return!!c});return c},getSectionJsonInfographicTable:function(f){var c;f.stack&&f.stack.some(function(a){if("table"===
a.id&&l.getTableJsonInfographic(a))return c=a,!0});return c},calcSectionJsonBox:function(f){var c,a;function b(g){c=Math.min(c,g.l);d=Math.min(d,g.t);a=Math.max(a,g.l+g.w);e=Math.max(e,g.t+g.h)}var d=c=Infinity;var e=a=0;f.stack&&f.stack.forEach(function(g){switch(g.id){case "table":var h=0;g.rows.forEach(function(m){h+=m.style.height});b({l:g.style.left||0,t:g.style.top||0,w:g.style.width,h:h});break;case "img":case "map":b({l:g.style.left||0,t:g.style.top||0,w:g.style.width,h:g.style.height})}});
f=f.style||{};return{x:f.left,y:f.top,w:f.width||c+a,h:f.height||d+e,contentLeft:c,contentTop:d,contentW:a-c,contentH:e-d}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder":function(){define(["../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","dojo/i18n!esri/nls/jsapi"],function(t,p){p=p.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{getCalculatorOrScriptFieldInfo:function(l,k,f){if(!l)return null;if(k.variableProvider.isPlayerOnly&&
!k.useVariableProviderToCollectOnly){var c=k.variableProvider.toCalculator(l);if(!c)return console.log("Can't create a dummy calculator for \x3d\x3e "+l),null;f=f||{};f.calculatorName=c.variable.calculatorName;l=t.createFieldInfoFromCalculator(c,k.variableProvider,f);l.name=c.variable.fieldName;l.templateName=c.variable.templateName;return l}c=k.queryMetaDataFunc(l);var a=l.substr(0,l.indexOf("."));f=f||{};f.calculatorName=a;if(c)return c.isScript?t.createFieldInfoFromScript(c,f):t.createFieldInfoFromCalculator(c,
k.variableProvider,f);f=t.createFieldInfoFromMissingVariable(l);k.variableProvider.isPlayerOnly&&(c=k.variableProvider.toCalculator(l),f.alias=c&&c.variable.alias);f.alias=f.alias?f.alias+" ("+p.missingVariable+")":p.missingVariable;return f}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/DefaultAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","./WebMapAttachmentStore"],function(t,p,
l,k){return t(null,{supportsMultipleAreas:!0,_analysisAreas:null,_currentAreaIndex:-1,_webMapStores:null,constructor:function(f){this._analysisAreas=f},initialize:function(){var f=this;this._webMapStores={};return p(this._analysisAreas.map(function(c,a){if(c=c.feature||c.location||c.additionalFeatures&&c.additionalFeatures[0])return(f._webMapStores[a]=new k(c)).initialize()})).then(function(){return f})},_callStoreMethod:function(f){var c=this._webMapStores[this._currentAreaIndex];return c?l(c[f](),
function(a){return a?a.slice():[]}):[]},getImages:function(){return this._callStoreMethod("getImages")},getAttributes:function(){return this._callStoreMethod("getAttributes")},getNotes:function(){return this._callStoreMethod("getNotes")},setCurrentAnalysisAreaIndex:function(f){this._currentAreaIndex=f}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/WebMapAttachmentStore":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/ImageUtil ./AttachmentsUtil".split(" "),
function(t,p,l,k,f,c,a,b){var d={getThumbnail:function(e){var g=c.get("WebMapAttachmentStore");g[e.url]||(g[e.url]=this._getDataURL(e));return g[e.url]},_getDataURL:function(e){return 0===e.url.indexOf("data:")?e.url:f.request(e.url).then(function(g){return g&&g.Attachment&&a.base64DataToDataURL(g.Attachment,e.contentType)}).otherwise(function(){return null})}};return t(null,{supportsMultipleAreas:!1,_attachmentInfos:null,_feature:null,_fieldInfos:null,_attributes:null,constructor:function(e,g){this._feature=
e;this._attachmentInfos=g},initialize:function(){this._tryGetFieldInfosAndAttributes();return l(this._attachmentInfos||this._tryGetAttachmentInfos()).always(function(){return!!this._attachmentInfos}.bind(this))},_tryGetFieldInfosAndAttributes:function(){var e=this._feature.getLayer();this._fieldInfos=(e=this._feature.infoTemplate||e&&e.infoTemplate)&&e.info.fieldInfos||[];this._attributes=p.mixin({},this._feature.attributes)},_tryGetAttachmentInfos:function(){return l(b.getFeatureAttachmentInfos(this._feature),
function(e){this._attachmentInfos=e}.bind(this))},getImages:function(){return this._attachmentInfos?this._attachmentInfos.map(function(e){return{getThumbnail:function(){return d.getThumbnail(e)},getUrl:function(){return e.url}}}):[]},getAttributes:function(){return k.composeAttributesFromFieldInfos(this._fieldInfos,this._attributes)},getNotes:function(){return[]},setCurrentAnalysisAreaIndex:null})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsUtil":function(){define([],
function(){return{getFeatureAttachmentInfos:function(t){var p=t.getLayer();if(p&&p.hasAttachments&&p.queryAttachmentInfos&&p.objectIdField)return p.queryAttachmentInfos(t.attributes[p.objectIdField])}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/supportClasses/LayoutXMLBuilder":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes".split(" "),
function(t,p,l,k,f,c){return{buildLayoutXML:function(a){var b=l.buildDocumentTag({addDefaultQuery:!0,report:{templateJson:{documentOptions:t.mixin({},a.documentOptions,{left:0,right:0,top:0,bottom:0})}}}).documentTag,d=f.getPageBox(a.documentOptions),e=k.pxToPt(d.w),g=k.pxToPt(d.h);a.svgStrings.forEach(function(m,r){b.tags.push({name:"section",attributes:{type:c.DETAILS},tags:[{name:"img",attributes:{left:0,top:0,width:e,height:g},tags:[{text:"__svgString__"+r+"__svgString__"}]}]});r<a.svgStrings.length-
1&&b.tags.push({name:"pageBreak"})});var h=p.parseJson(b);a.svgStrings.forEach(function(m,r){h=h.replace("__svgString__"+r+"__svgString__",m)});return h},stitchDocuments:function(a){if(!a||!a.length)return null;var b=a[0],d=b.substr(0,b.indexOf("\x3csection")),e="";a.forEach(function(g,h){e+=g.replace(d,"").replace("\x3c/HTMLextReport\x3e","")+(h<a.length-1?"\x3cpageBreak /\x3e":"")});return d+e+"\x3c/HTMLextReport\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter":function(){define(["../../ConversionUtil",
"../ReportingEnginePageSizeCompatibilityUtil"],function(t,p){var l={buildDocumentTag:function(k){var f=k.report,c=f.templateJson.documentOptions,a={name:"HTMLextReport",attributes:{version:"10.1",pagesize:p.getReportingEnginePageSize(c.pagesize,c.orientation),orientation:c.orientation,left:t.pxToPt(c.left),right:t.pxToPt(c.right),top:t.pxToPt(c.top),bottom:t.pxToPt(c.bottom),style:t.composeStyleString(l.buildDocumentStyle(k)),comparisonZoom:c.defaultComparisonZoom||void 0},tags:[]};k.addDefaultQuery&&
a.tags.push({name:"queries",tags:[{name:"query",attributes:{name:"default",table:"headers"}}]});k.report.isGraphicReport||a.tags.push({name:"def",attributes:{align:c.align,lineSpacing:c.lineSpacing}});f.templateJson.tooltipInfo&&(f.templateJson.tooltipInfo.table||f.templateJson.tooltipInfo.chart)&&(k={name:"tooltip",tags:[]},a.tags.push(k),(c=f.templateJson.tooltipInfo.table)&&k.tags.push({name:"table",attributes:{value:c.value||void 0,alias:c.alias||void 0,expression:c.expression||void 0,conditional:c.conditional||
void 0}}),(f=f.templateJson.tooltipInfo.chart)&&k.tags.push({name:"chart",attributes:{title:f.title||void 0,value:f.value||void 0,weight:f.weight||void 0,min:f.min||void 0,max:f.max||void 0,avg:f.avg||void 0,conditional:f.conditional||void 0}}));return{documentTag:a}},buildDocumentStyle:function(k){k=k.report.templateJson.documentOptions;return{fontSize:t.pxToPt(k.fontSize),fontFamily:k.fontFamily}}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,p,l){var k={};t.mixin(k,p);var f={"font-size":"fontSize","line-height":"lineHeight","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor"},c={},a;for(a in f)c[f[a]]=a;k.splitTrim=function(e,g,h){e=String(e).split(g).map(function(m){return m.trim()});return h?e.filter(function(m){return!!m}):
e};k.parseStyleString=function(e){var g={};k.splitTrim(e||"",";",!0).forEach(function(h){var m=k.splitTrim(h,":");if(h=f[m[0]])m=m[1],"rgba(0, 0, 0, 0)"===m&&(m="transparent"),g[h]=m});return g};k.composeStyleString=function(e,g){g=g&&g.addPx;var h="",m;for(m in e){var r=c[m];if(r){var n=e[m];n&&("backgroundColor"===m&&(n=l.toCSSColor(n)),h+=r+":"+n+(g&&g[r]?"px;":";"))}}return h};k.removeZeroProperties=function(e){Object.keys(e).forEach(function(g){0===Number(e[g])&&delete e[g]});return e};var b=
{valign:{center:"middle"}},d={valign:{middle:"center"}};k.getPropValuePtoE=function(e,g){return b[e]&&b[e][g]||g};k.getPropValueEtoP=function(e,g){return d[e]&&d[e][g]||g};k.KEY_OPERATOR_RE=/^(!=|>=|<=|<|>|=)/;k.ONE_FIELD_KEY_TEST=/^((<|>|<=|>=|!=|=|)(-?\d+\.\d+|-?\d+))$/;k.KEY_INTERVAL_SEPARATOR=";";return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/ReportingEnginePageSizeCompatibilityUtil":function(){define(["../../supportClasses/DocumentOptions"],function(t){var p=
{},l={a4:1,letter:1};p.getReportingEnginePageSize=function(k,f){return l[k]?k:(f=t.SIZE_TYPE_TO_DIM_HASH[k]&&t.SIZE_TYPE_TO_DIM_HASH[k][f])?t.combineCustomSizeString(f.w,f.h,"in"):k};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ./_GridChartViewSupport ./_GridHighlightSupport ./_GridFilterSupport ./_GridSortSupport ./_ResizableColumnsSupport ./_DataDrillingSupport esri/dijit/geoenrichment/ReportPlayer/config ./valueField/ValueField ./valueField/_ResizableField ./coreUtils/GridBackgroundForegroundUtil ./coreUtils/GridFloatingTablesUtil ./coreUtils/GridBorderUtil ./coreUtils/GridDataUtil ./coreUtils/GridQueryUtil ./coreUtils/GridLayoutCalculator ./coreUtils/GridCellRenderer ./coreUtils/GridStyleUtil ./coreUtils/GridLayoutSizer ./coreUtils/_GridDebugUtil ../sections/SectionTypes esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil dojo/text!../templates/AdjustableGrid.html".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y,C,D,G,F,B,z,E,I,L,M,O,Q,T,X,U){var aa={defaultRowHeight:15.33,rowMinHeight:3,columnMinWidth:3,defaultChartRowHeight:150},Y={rowMinHeight:3,columnMinWidth:3},ea=t([q,u]);return t([a,b,d,e,g,h,m,r],{isGrid:!0,templateString:U,viewModel:null,theme:null,columns:null,rows:null,backgroundSectionJson:null,foregroundSectionJson:null,enableBackgroundForeground:!1,forceCreateFloatingTables:!1,backgroundFloatingTablesSectionJson:null,foregroundFloatingTablesSectionJson:null,
isFloatingTable:!1,isBackgroundFloatingTable:!1,layoutDefaults:null,stickToRight:!1,looseResize:!1,keepGridWidthWhenResized:!1,keepGridHeightWhenResized:!1,hasResizableColumns:!1,disableResizableColumnsAutoDetection:!1,fitParentWhenResized:!1,parentWidget:null,parentElementInPageInfo:null,viewPortContainer:null,parentGrid:null,reportContainerPageNode:null,isReportContainerPageGrid:!1,getPreviewValueFunction:null,currentFeatureIndex:null,currentFeatureAttributes:null,fixedViewMode:null,fixedSpecificViewMode:null,
enableAsyncRendering:!1,asyncBatchSize:1,enableNumberAnimation:!1,applyThemeStyle:!0,inheritThemeBackground:!0,previewModeBorderLineStyle:null,editModeBorderLineStyle:null,renderBordersFromTheme:!1,noThemeBorderLineStyle:null,hasRealBorders:!1,trimTextIfOverflows:!1,autoDetectUrl:!1,shouldStayWithinParent:!0,infographicBenchmarkController:null,elementUsageType:null,backgroundSection:null,foregroundSection:null,backgroundFloatingTablesSection:null,foregroundFloatingTablesSection:null,_cellRenderer:null,
_fieldCells:null,_dynamicBindings:null,_isBeingResizedFlag:!1,_renderCellsQueue:null,_renderCellsContentQueue:null,postCreate:function(){this.inherited(arguments);this.layoutDefaults=p.mixin({},aa,this.layoutDefaults);n.isPlayerOnServer&&(this.hasResizableColumns=this.enableAsyncRendering=!1,this.disableResizableColumnsAutoDetection=!0)},refresh:function(K){if(this.domNode)return!this.isReportContainerPageGrid&&!this.hasResizableColumns&&this.viewModel.dynamicReportInfo&&1<this.columns.length&&2<
this.rows.length&&!this.disableResizableColumnsAutoDetection&&(this.fitParentWhenResized=this.hasResizableColumns=this.keepGridWidthWhenResized=!0,this.layoutDefaults.columnMinWidth=30),O.isMobileDevice()&&(this.hasResizableColumns=!1),f[this.hasResizableColumns?"add":"remove"](this.domNode,"hasResizableColumns"),F.markAsDirty(this),this._doRefresh(K),this.getRenderPromise()},_doRefresh:function(K){this.mainNode&&this.rows&&(this._destroyTableContent(),this.mainNode.innerHTML="",I.refreshStart(this),
this._recoverOriginalData(),this._applyFilterToStoreData(),this._applySortingToStoreData(),this.isEmptyTable()?!this.viewModel.isGraphicStyle()&&c.create("div",{"class":"adjustableGrid_emptyRow"},this.mainNode):(f.remove(this.domNode,"esriGEAdjustableGridSingleCell esriGEAdjustableGridMultiCell"),f.add(this.domNode,this.isSingleCelledTable()?"esriGEAdjustableGridSingleCell "+(X.getTableSubtype(this)||""):"esriGEAdjustableGridMultiCell"),F.recalcRows(this),K=K||{},void 0===K.stickToRight&&(K.stickToRight=
this.stickToRight),F.recalcColumns(this,K),F.autoSnapLayout(this),this._createCellsFromStoreData(),this._renderCells(),F.positionCells(this)),this.refreshBackground(),this._renderBackgroundFloatingTables(),this._renderForegroundFloatingTables(),this.refreshForeground(),this._buildSortControls(),I.refreshEnd(this))},_originalData:null,_getOriginalData:function(){return this._originalData||this.rows},_getSavedOriginalData:function(){return this._originalData},_saveOriginalData:function(){this._originalData||
(this.rows=p.clone(this.rows),this._originalData=p.clone(this.rows))},_recoverOriginalData:function(){this._originalData&&(this.rows=p.clone(this._originalData))},_createCellsFromStoreData:function(){var K=this;this.enableAsyncRendering&&(this._renderCellsQueue=new Q({onFinished:function(){K.onRendered()}}));this.rows.forEach(function(V){K.columns.forEach(function(N,P){if(!(V.excludedIndexHorizontal&&V.excludedIndexHorizontal[P]||V.excludedIndexVertical&&V.excludedIndexVertical[P])){P=N.index+(D.getDataColumnSpan(V,
N.field)||1)===K.columns.length;var S=V.index+(D.getDataRowSpan(V,N.field)||1)===K.rows.length;K._createField(V,N,P,S)}})})},_getCellClass:function(K){return this.hasResizableColumns&&0===K.row.index?ea:q},_createField:function(K,V,N,P){var S="adjustableGridField field-"+V.field+(N?" lastInRow":"")+(P?" lastRow":"");N={viewModel:this.viewModel,fieldStyle:z.combineCellStyle(this,K,V),defaultBorderStyle:this._getDefaultBorderStyle(K,V,N,P),"class":S,trimTextIfOverflows:this.trimTextIfOverflows,autoDetectUrl:this.autoDetectUrl,
rowId:K.id,columnId:V.id,parentGrid:this,parentWidget:this,uniqueId:K.id+V.id,row:K,column:V,isLastInRow:N,isLastInColumn:P};this.hasResizableColumns&&(N.allowVerticalResizing=!1,N.showColumnRowSizeTooltip=!0);N=this._doCreateFieldFromParams(N,K,V);this.hasResizableColumns&&this._populateFieldForResizableColumns(N,K,V);N.domNode.style.position="absolute";this._fieldCells.push(N);return N},_getDefaultBorderStyle:function(K,V,N,P){return C.getBorderStyle(this,K,V,N,P)},getRenderPromise:function(){var K=
[];K.push(this._renderCellsQueue&&this._renderCellsQueue.getPromise());K.push(this._renderCellsContentQueue&&this._renderCellsContentQueue.getPromise());this.getCells().forEach(function(V){V.content&&V.content.getRenderPromise&&K.push(V.content.getRenderPromise())});["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(V){this[V]&&K.push(this[V].getRenderPromise())},this);return l(K)},isBeingRendered:function(){return this._renderCellsQueue&&
!this._renderCellsQueue.isFinished()||this._renderCellsContentQueue&&!this._renderCellsContentQueue.isFinished()},_doCreateFieldFromParams:function(K,V,N){return(new (this._getCellClass(K))(K)).placeAt(this.mainNode)},_renderCells:function(){var K=this;if(this._renderCellsQueue){var V=function(N){K._renderFieldContent(N);K._postCreateFieldCell(N);K._updateCellViewMode(N)};M.splitArrayToBunches(this._fieldCells,this.asyncBatchSize).forEach(function(N){K._renderCellsQueue.add(function(){N.forEach(V)},
{delayAfter:0})})}else this._getCellRenderer().renderCells(this._fieldCells,{cellPreRenderer:function(N){K._preRenderFieldCell(N)},addToQueue:function(N){K._renderCellsContentQueue=K._renderCellsContentQueue||new Q;K._renderCellsContentQueue.add(N)},cellPostRenderer:function(N){K._configureRenderedCellContentSpecificStyles(N);K._postRenderFieldCell(N);K._postCreateFieldCell(N);K._updateCellViewMode(N);n.isPlayerOnServer||K._trySetupDataDrilling(N)}}),this.onRendered()},_renderFieldContent:function(K){this._preRenderFieldCell(K);
var V=this._getCellRenderer().renderCellContent(K);V&&V.then&&(this._renderCellsContentQueue=this._renderCellsContentQueue||new Q,this._renderCellsContentQueue.add(V));this._configureRenderedCellContentSpecificStyles(K);this._postRenderFieldCell(K);n.isPlayerOnServer||this._trySetupDataDrilling(K)},_preRenderFieldCell:function(K){},_postRenderFieldCell:function(K){},_getCellRenderer:function(){this._cellRenderer||(this._cellRenderer=new B);return this._cellRenderer},_configureRenderedCellContentSpecificStyles:function(K){f[D.isNumericVariableFieldCell(K)?
"add":"remove"](K.domNode,"hasNumericVariableFieldInfo");f[D.isStringVariableFieldCell(K)?"add":"remove"](K.domNode,"hasStringVariableFieldInfo");this._configureRenderedCellContentSpecificStyles_conditional(K)},_configureRenderedCellContentSpecificStyles_conditional:function(K){},_postCreateFieldCell:function(K){},refreshBackground:function(){this.enableBackgroundForeground&&(this.backgroundSection&&this.backgroundSection.destroy(),this.backgroundSection=w.renderBackground(this,this.backgroundSectionJson,
this._getBackgroundSectionCreationParams()))},_getBackgroundSectionCreationParams:function(){return null},refreshForeground:function(){this.enableBackgroundForeground&&(this.foregroundSection&&this.foregroundSection.destroy(),this.foregroundSection=w.renderForeground(this,this.foregroundSectionJson,this._getForegroundSectionCreationParams()))},_getForegroundSectionCreationParams:function(){return null},_renderBackgroundFloatingTables:function(){this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();
this.forceCreateFloatingTables&&(this.backgroundFloatingTablesSectionJson=this.backgroundFloatingTablesSectionJson||{type:L.TABLE_BACKGROUND_FLOATING_PANELS,stack:[]});this.backgroundFloatingTablesSection=y.renderFloatingTables(this,this.backgroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!0),!0);this._postProcessFloatingTablesSection(this.backgroundFloatingTablesSection,!0)},_renderForegroundFloatingTables:function(){this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();
this.forceCreateFloatingTables&&(this.foregroundFloatingTablesSectionJson=this.foregroundFloatingTablesSectionJson||{type:L.TABLE_FOREGROUND_FLOATING_PANELS,stack:[]});this.foregroundFloatingTablesSection=y.renderFloatingTables(this,this.foregroundFloatingTablesSectionJson,this._getFloatingTablesSectionParams(!1),!1);this._postProcessFloatingTablesSection(this.foregroundFloatingTablesSection,!1)},_getFloatingTablesSectionParams:function(K){var V=this,N={tableClass:function(P){return(P=X.getTableSubtype(P))?
"outerFloatingAdjustableGrid floatingTableSimpleElement "+P:"outerFloatingAdjustableGrid floatingTableComplexElement"},tableParams:{isFloatingTable:!0,isBackgroundFloatingTable:K,parentGrid:this,inheritThemeBackground:this.inheritThemeBackground,applyThemeStyle:this.applyThemeStyle,layoutDefaults:p.mixin({},this.layoutDefaults,Y),_preRenderFieldCell:function(P){V._preRenderFieldCell(P)},_postCreateFieldCell:function(P){V._postCreateFieldCell(P)}}};this._addFloatingTablesSectionCreationParams(N,K);
return N},_addFloatingTablesSectionCreationParams:function(K,V){return K},_postProcessFloatingTablesSection:function(K,V){},getVisualState:function(){var K={type:"table",cells:this.getCells().map(function(N){return{content:N.content&&N.content.getVisualState&&N.content.getVisualState(),text:N.get("value")}})},V=this.getSorting(this);V&&(K.sorting=V);if(V=this._filterRanges?p.clone(this._filterRanges):null)K.filterRanges=V;this.presetFilter&&(K.hasPresetFilter=!0);this.backgroundSection&&(K.backgroundSection=
this.backgroundSection.getVisualState());this.backgroundFloatingTablesSection&&(K.backgroundFloatingTablesSection=this.backgroundFloatingTablesSection.getVisualState());this.foregroundFloatingTablesSection&&(K.foregroundFloatingTablesSection=this.foregroundFloatingTablesSection.getVisualState());this.foregroundSection&&(K.foregroundSection=this.foregroundSection.getVisualState());this._chartViewInfo&&(K.isChartView=!0,K.chartViewInfo=p.clone(this._chartViewInfo));return K},setVisualState:function(K){var V=
this;if(K)return k(this.getRenderPromise(),function(){var N=[];K.cells&&V.getCells().forEach(function(P,S){(S=K.cells[S])&&(P.content&&P.content.setVisualState?N.push(P.content.setVisualState(S.content)):P.set("value",S.text))});["backgroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection","foregroundSection"].forEach(function(P){K[P]&&V[P]&&N.push(V[P].setVisualState(K[P]))});return l(N).then(function(){return k(K.filterRanges&&V.setFilterRanges(K.filterRanges),function(){return k(K.sorting&&
V.setSorting(K.sorting),function(){return K.isChartView&&V.tableToChart(K.chartViewInfo)})})})})},_setCellWidth:function(K,V){F.adjustColumnWidth(this,K.row,K.column,V);F.positionCells(this)},_setCellHeight:function(K,V){F.adjustRowHeight(this,K.row,K.column.field,V);F.positionCells(this)},setCellWidth:function(K,V){this._setCellWidth(K,V)},setCellHeight:function(K,V){this._setCellHeight(K,V)},_maxWidth:500,_width:500,_height:0,_spaceAfter:0,_maxHeight:0,_left:0,_top:0,_alternatingStyle:null,_opacity:1,
_fixedCellsOpacity:1,getMaxHeight:function(K){return this._maxHeight},setMaxHeight:function(K){this._maxHeight=K},getHeight:function(K,V){return this._height+(!1!==V?this._top:0)+(K?this._spaceAfter||0:0)},getMaxWidth:function(){return this._maxWidth},setMaxWidth:function(K,V){var N=0;V&&V.preserveRightOffset&&(F.recalcGridWidth(this),N=this.getAllowedWidth(),N=(N-this._width)/N);this._maxWidth=K;V&&V.resizeToFitAllowedWidth&&this.resizeToFitAllowedWidth({rightOffsetWeight:V.preserveRightOffset?N:
0})},getLeft:function(){return this._left},getTop:function(){return this._top},setSpaceAfter:function(K){this._spaceAfter=K},getAllowedWidth:function(){return this._maxWidth-this._left},getAllowedWidthFromParent:function(){return this.shouldStayWithinParent?this.domNode.parentNode.clientWidth-this._left:1E6},getTableBox:function(){var K=this.getSettings().style;return{l:K.left,t:K.top,w:K.width,h:this.getHeight(!1,!1)}},resizeToFitAllowedWidth:function(K){this.isEmptyTable()||E.resizeToFitAllowedWidth(this,
K)},resizeToFitWidth:function(K){this.isEmptyTable()||E.resizeToFitWidth(this,K)},resizeToFitHeight:function(K,V){this.isEmptyTable()||(!1!==V&&(K-=this._top),E.resizeToFitHeight(this,K))},scaleProportionallyWithinParent:function(K){E.scaleProportionallyWithinParent(this,K)},collapseContent:function(){this.getCells({floatingCells:!0}).forEach(function(K){K.content&&K.content.collapseContent&&K.content.collapseContent()})},hasHiddenContent:function(){return this._checkNeedResizeRowHeightToShowCellsContent(!1)},
resizeRowHeightToShowCellsContent:function(){this._checkNeedResizeRowHeightToShowCellsContent(!0);return this.getRenderPromise()},_checkNeedResizeRowHeightToShowCellsContent:function(K){return!1},_tableAttributes:null,_scaleToFitWidth:void 0,_scaleToFitHeight:void 0,setSettings:function(K){var V=this._left,N=this.isMultiFeatureTable();this.columns.forEach(function(da){da.style&&"number"===typeof da.style.width&&(da._wasBeforeRecalc=!0)});if(K.style){void 0!==K.style.left&&this.setPosition(K.style.left);
void 0!==K.style.top&&this.setPosition(void 0,K.style.top);void 0!==K.style.spaceAfter&&(this._spaceAfter=K.style.spaceAfter);K.style.width&&(this._width=K.style.width);K.style.alternatingStyle&&(this._alternatingStyle=K.style.alternatingStyle);this.setOpacity(K.style);var P=this._width;this._width=Math.min(this._width,this.getAllowedWidth());if(this._width!==P||V!==this._left)var S=!0}V=!1;K.attributes&&(this._adjustColumnsForSettings(K)&&(S=V=!0),this._tableAttributes=K.attributes,this._tableAttributes.rowCount&&
this._tableAttributes.rowCount!==this.rows.length&&this._adjustRowsForSettings(K),delete this._tableAttributes.rowCount,delete this._tableAttributes.columnCount);void 0!==K.scaleToFitWidth&&(this._scaleToFitWidth=K.scaleToFitWidth);void 0!==K.scaleToFitHeight&&(this._scaleToFitHeight=K.scaleToFitHeight);this._tableAttributes=this._tableAttributes||{};var ca=[];this.columns.forEach(function(da){da._wasBeforeRecalc&&ca.push(da);delete da._wasBeforeRecalc});if(!N&&this.isMultiFeatureTable()&&V)for(N=
this.columns.length-1;N>=this.getNumFixedColumns();N--)V=ca.indexOf(this.columns[N]),-1!==V&&ca.splice(V,1);(K.viewMode||K.specificViewMode)&&this._tryApplyNewViewMode(K.viewMode,K.specificViewMode);void 0!==K.noChartView&&(this.noChartView=K.noChartView);void 0!==K.maxWidth&&this.setMaxWidth(K.maxWidth);void 0!==K.maxHeight&&this.setMaxHeight(K.maxHeight);this.viewModel.dynamicReportInfo&&this.getNumDynamicColumns()?(F.trimColumnsForNumberOfFeatures(this),this.refresh({resetWidth:!0})):this.viewModel.dynamicReportInfo&&
this.getNumDynamicRows()?(F.adjustRowsForNumberOfFeatures(this),this.refresh()):S?this.refresh({resetWidth:!0,columnsToPreserve:ca}):this.refresh()},setPosition:function(K,V){void 0!==K&&(this._left=K||0,this.domNode.style.left=this._left+"px");void 0!==V&&(this._top=V||0,this.domNode.style.top=this._top+"px")},setOpacity:function(K){"number"===typeof K.opacity&&(this._opacity=Math.max(0,Math.min(1,K.opacity)),this.domNode.style.opacity=this._opacity,f[0===this._opacity?"add":"remove"](this.domNode,
"esriGENonInteractable"));"number"===typeof K.fixedCellsOpacity&&(this._fixedCellsOpacity=Math.max(0,Math.min(1,K.fixedCellsOpacity)),this.mainNode.style.opacity=this._fixedCellsOpacity,f[0===this._fixedCellsOpacity?"add":"remove"](this.mainNode,"esriGENonInteractable"))},_adjustColumnsForSettings:function(K){return!1},_adjustRowsForSettings:function(K){},getDefaultStyle:function(){return this._alternatingStyle||"Default"},getSettings:function(){F.recalcGridWidth(this);return{style:{width:this._width,
left:this._left,top:this._top,spaceAfter:this._spaceAfter,alternatingStyle:this._alternatingStyle,opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity},attributes:p.mixin(p.clone(this._tableAttributes),{columnCount:this.columns.length,rowCount:this.rows.length}),presetFilter:this.presetFilter,presetSorting:this.presetSorting,scaleToFitWidth:this._scaleToFitWidth,scaleToFitHeight:this._scaleToFitHeight,noChartView:this.noChartView}},getOpacity:function(){return{opacity:this._opacity,fixedCellsOpacity:this._fixedCellsOpacity}},
needScaleToFitWidth:function(){return this._scaleToFitWidth},needScaleToFitHeight:function(){return this._scaleToFitHeight},isEmptyTable:function(){return X.isEmptyTable(this)},isSingleCelledTable:function(){return X.isSingleCelledTable(this)},isMultiDataTable:function(){return X.isMultiDataTable(this)},isMultiFeatureTable:function(){return!!this.getNumDynamicColumns()||!!this.getNumDynamicRows()},getNumFixedColumns:function(){return this._tableAttributes&&this._tableAttributes.fixedColumns||0},setNumFixedColumns:function(K){this._tableAttributes.fixedColumns=
K},getNumDynamicColumns:function(){return this._tableAttributes&&this._tableAttributes.dynamicColumns||0},setNumDynamicColumns:function(K){this._tableAttributes.dynamicColumns=K},getNumFixedRows:function(){return this._tableAttributes&&this._tableAttributes.fixedRows||0},setNumFixedRows:function(K){this._tableAttributes.fixedRows=K},getNumDynamicRows:function(){return this._tableAttributes&&this._tableAttributes.dynamicRows||0},setNumDynamicRows:function(K){this._tableAttributes.dynamicRows=K},_viewMode:null,
_specificViewMode:null,_viewModeKey:null,getViewMode:function(){return this._viewMode},getSpecificViewMode:function(){return this._specificViewMode},setViewMode:function(K,V,N){!this._tryApplyNewViewMode(K,V)||N&&N.noUpdate||(this._fieldCells&&this._fieldCells.forEach(function(P){this._updateCellViewMode(P)},this),this.backgroundSection&&this.backgroundSection.setViewMode(this._viewMode,this._specificViewMode),this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.setViewMode(this._viewMode,
this._specificViewMode),this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.setViewMode(this._viewMode,this._specificViewMode),this.foregroundSection&&this.foregroundSection.setViewMode(this._viewMode,this._specificViewMode))},_tryApplyNewViewMode:function(K,V){var N="function"===typeof this.fixedViewMode?this.fixedViewMode(this):this.fixedViewMode,P="function"===typeof this.fixedSpecificViewMode?this.fixedSpecificViewMode(this):this.fixedSpecificViewMode;K=N||K||this._viewMode;
V=P||V||this._specificViewMode;N=K+(V?JSON.stringify(V):"");if(this._viewModeKey===N)return!1;this._viewModeKey=N;this._viewMode=K;this._specificViewMode=V;f.remove(this.domNode,"adjustableGridPreviewMode adjustableGridEditMode ");f.add(this.domNode,this._viewMode===T.EDIT?"adjustableGridEditMode":"adjustableGridPreviewMode");return!0},_updateCellViewMode:function(K){K.setDefaultBorderStyle(this._getDefaultBorderStyle(K.row,K.column,K.isLastInRow,K.isLastInColumn));K.content&&K.content.setViewMode&&
K.content.setViewMode(this._viewMode,this._specificViewMode);this._getCellRenderer().updateViewMode(K,this._viewMode)},getCells:function(K){var V=[];V=K&&K.floatingCells?this.getBackgroundFloatingCells().concat(this._fieldCells).concat(this.getForegroundFloatingCells()):this._fieldCells;K&&K.topFirst&&(V=V.slice().reverse());return V},queryCells:function(K){return G.queryCells(this,K)},getFirstCell:function(){return this.getCells()[0]},getCellText:function(K){return D.getFieldCellValue(K)},setCellText:function(K,
V){D.setFieldCellContent(K,V)},renderCell:function(K){this._renderFieldContent(K)},refreshCellStyle:function(K){K.setStyle(z.combineCellStyle(this,K.row,K.column))},getInfographicJson:function(){var K=this.getFirstCell();return D.isInfographicCell(K)?D.getFieldInfo(K).infographicJson:null},getFeatureIndexForCell:function(K){return this.isMultiFeatureTable()?F.calcRingIndexForCell(K):"number"===typeof this.currentFeatureIndex?this.currentFeatureIndex:"number"===typeof K.row.currentFeatureIndex?K.row.currentFeatureIndex:
"number"===typeof K.column.currentFeatureIndex?K.column.currentFeatureIndex:void 0},isMouseOver:function(){return this.domNode&&G.isMouseOver(this)},getOverFieldCell:function(K){return G.getOverFieldCell(this,K)},getBBox:function(K){return G.getBBox(this,K)},getBackgroundFloatingCells:function(K){return this._getFloatingCells(this.backgroundFloatingTablesSection,K)},getForegroundFloatingCells:function(K){return this._getFloatingCells(this.foregroundFloatingTablesSection,K)},_getFloatingCells:function(K,
V){var N=[];if(!K)return N;K.getTrueTables().forEach(function(P){N=N.concat(P.getCells())});V&&V.topFirst&&N.reverse();return N},getChartJson:function(){var K=this.getFirstCell();return D.isChartCell(K)?D.getFieldInfo(K).chartJson:null},toJson:function(){var K=this.getSettings();K.id="table";K.rows=this._getOriginalData();K.columns=this.columns;K.elementUsageType=this.elementUsageType;["backgroundSection","foregroundSection","backgroundFloatingTablesSection","foregroundFloatingTablesSection"].forEach(function(V){var N=
this[V];N&&(N=N.toJson(),N.stack.length&&(K[V+"Json"]=N))},this);return p.clone(K)},fromJson:function(K){K&&(this.columns=K.columns||[],this.rows=K.rows||[],this.backgroundSectionJson=K.backgroundSectionJson,this.foregroundSectionJson=K.foregroundSectionJson,this.backgroundFloatingTablesSectionJson=K.backgroundFloatingTablesSectionJson,this.foregroundFloatingTablesSectionJson=K.foregroundFloatingTablesSectionJson,this.elementUsageType=K.elementUsageType,this.setSettings(K))},notifyShown:function(){this.getCells().forEach(function(K){K.notifyShown();
K.content&&K.content.notifyShown&&K.content.notifyShown()});this.backgroundSection&&this.backgroundSection.notifyShown();this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.notifyShown();this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.notifyShown();this.foregroundSection&&this.foregroundSection.notifyShown()},onRendered:function(){},onRequestScaleToFitHeight:function(){},_destroyTableContent:function(){this._renderInfo=null;this._fieldCells=this._fieldCells||
[];this._fieldCells.forEach(function(K){K.parentWidget=null;K.parentGrid=null;K.row=null;K.column=null;K.destroy()});this._fieldCells.length=0;this.backgroundSection&&this.backgroundSection.destroy();this.backgroundSection=null;this.backgroundFloatingTablesSection&&this.backgroundFloatingTablesSection.destroy();this.backgroundFloatingTablesSection=null;this.foregroundFloatingTablesSection&&this.foregroundFloatingTablesSection.destroy();this.foregroundFloatingTablesSection=null;this.foregroundSection&&
this.foregroundSection.destroy();this.foregroundSection=null;this._renderCellsQueue&&this._renderCellsQueue.destroy();this._renderCellsQueue=null;this._renderCellsContentQueue&&this._renderCellsContentQueue.destroy();this._renderCellsContentQueue=null},destroy:function(){this._destroyTableContent();this.reportContainerPageNode=this.parentGrid=this.viewPortContainer=this.parentElementInPageInfo=this.parentWidget=this._originalData=this.columns=this.rows=this.theme=this.viewModel=null;this._removeChart();
this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridChartViewSupport":function(){define(["dojo/_base/declare","dojo/dom-construct","./coreUtils/chart/ChartViewBuilder","./coreUtils/chart/GridChartUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(t,p,l,k,f){return t(null,{noChartView:!1,_chartViewInfo:null,_chartNode:null,_chartViewBuilder:null,getChartViewOptions:function(){var c=k.getSupportedChartTypes(this),a=k.getTableRowsColumnsInfos(this);return c&&c.length&&
a&&{chartType:this._chartViewInfo&&this._chartViewInfo.chartType,chartTypes:c,supportsAltOrientation:2<this.columns.length,columnInfos:a.columnInfos,rowInfos:a.rowInfos,sourceId:this._chartViewInfo&&this._chartViewInfo.sourceId,takeSeriesFromRows:!1}},tableToChart:function(c){this._removeChart();this._chartViewInfo=c;this._chartNode=p.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode);f.hide(this.mainNode);this._chartViewBuilder=new l({viewModel:this.viewModel,theme:this.theme,grid:this,
chartNode:this._chartNode,width:this._width,height:this._height});return this._chartViewBuilder.renderChart(c)},chartToTable:function(){this._removeChart()},_removeChart:function(){this._chartViewInfo&&(this._chartViewInfo=null,this._chartViewBuilder.destroy(),this._chartViewBuilder=null,p.destroy(this._chartNode),this._chartNode=null,f.show(this.mainNode))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/ChartViewBuilder":function(){define("dojo/_base/declare dojo/_base/lang ../../../charts/utils/ChartTypes ../../../charts/utils/ChartDataLabelsTypes ../../../charts/utils/ChartJsonUtil ../../../charts/legends/ChartLegendPlacements ./GridChartUtil esri/dijit/geoenrichment/utils/WaitingUtil".split(" "),
function(t,p,l,k,f,c,a,b){return t(null,{viewModel:null,theme:null,grid:null,chartNode:null,width:null,height:null,_chartContainer:null,_chartType:null,_seriesInRows:null,_sourceId:null,constructor:function(d){p.mixin(this,d)},renderChart:function(d){this._chartType=d.chartType;this._seriesInRows=d.altOrientation;this._sourceId=d.sourceId;d=this.viewModel.layoutBuilder.getClass("chart");return d.isAsync?b.showProgressPromise(this.grid.domNode,d.loadModules()).then(this._doRenderChart.bind(this)):
this._doRenderChart()},_doRenderChart:function(){this._chartContainer=this.viewModel.layoutBuilder.createElement("chart",{node:this.chartNode,creationParams:{json:this._getChartJson(),viewModel:this.viewModel,theme:this.theme,parentWidget:this.grid,enableAxisLabelsAutoTilt:!0}})},_getChartJson:function(){var d=f.getDefaultChartSettings({chartType:this._chartType,width:this.width,height:this.height,seriesItems:a.createChartSeriesItems(this.grid,{chartType:this._chartType,seriesInRows:this._seriesInRows,
sourceId:this._sourceId})});if(1<d.seriesItems.length||l.isSingleSeries(this._chartType))d.visualProperties.legend.series.placement=c.BOTTOM;this._chartType===l.RING&&(d.visualProperties.dataLabels=k.LABEL_VALUE);l.isSingleSeries(this._chartType)?d.visualProperties.title.text=d.seriesItems[0]&&d.seriesItems[0].label||"":d.visualProperties.title.text=a.getChartTitle(this.grid);return d},destroy:function(){this._chartContainer&&this._chartContainer.destroy();this._chartContainer=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes":function(){define([],
function(){var t={COLUMN:"Column",BAR:"Bar",LINE:"Line",VERTICAL_LINE:"VerticalLine",PIE:"Pie",DONUT:"Donut",GAUGE:"Gauge",RING:"Ring",PICTURE_COLUMN:"PictureColumn",PICTURE_BAR:"PictureBar",WAFFLE:"Waffle",COLUMN_LINE:"ColumnLine",BAR_LINE:"BarLine"};t.CLASSIC_CHART_TYPES=[t.COLUMN,t.BAR,t.LINE,t.PIE];t.AVAILABLE_CHART_TYPES=[t.COLUMN,t.BAR,t.LINE,t.VERTICAL_LINE,t.PIE,t.DONUT,t.GAUGE,t.RING,t.PICTURE_COLUMN,t.PICTURE_BAR,t.WAFFLE];t.isSupported=function(p){return-1!==t.AVAILABLE_CHART_TYPES.indexOf(p)};
t.isColumnBarLike=function(p){return p===t.COLUMN||p===t.BAR||p===t.PICTURE_COLUMN||p===t.PICTURE_BAR};t.isColumnBarNoPictureLike=function(p){return p===t.COLUMN||p===t.BAR};t.isColumnLike=function(p){return p===t.COLUMN||p===t.PICTURE_COLUMN};t.isBarLike=function(p){return p===t.BAR||p===t.PICTURE_BAR};t.isPictureLike=function(p){return p===t.PICTURE_COLUMN||p===t.PICTURE_BAR||p===t.WAFFLE};t.isLineLike=function(p){return p===t.LINE||p===t.VERTICAL_LINE};t.isXAxisVertical=function(p){return p===
t.BAR||p===t.PICTURE_BAR||p===t.VERTICAL_LINE};t.hasAxis=function(p){return t.isColumnBarLike(p)||t.isLineLike(p)};t.hasLegend=function(p){return t.isColumnBarLike(p)||t.isLineLike(p)||p===t.PIE||p===t.DONUT||p===t.WAFFLE};t.hasBackgroundImage=function(p){return t.isColumnBarLike(p)||t.isLineLike(p)};t.isSingleSeries=function(p){return p===t.PIE||p===t.DONUT||p===t.GAUGE||p===t.RING||p===t.WAFFLE};t.isComparisonSupported=function(p){return p===t.COLUMN||p===t.BAR?2:t.isLineLike(p)?1E6:0};t.isConditionalStylingSupported=
function(p){return t.isColumnBarLike(p)||p===t.RING||p===t.GAUGE||p===t.WAFFLE};t.isLegendSupported=function(p,l,k,f){return t.isSeriesLegendSupported(p,l,k)||t.isMinMaxLegendSupported(p,l)};t.isSeriesLegendSupported=function(p,l,k,f){1===l&&f&&(l=2);return 0===l||1===l&&t.isLineLike(p)&&!k?!1:t.isColumnBarLike(p)||t.isLineLike(p)||p===t.PIE||p===t.DONUT||p===t.WAFFLE};t.isMinMaxLegendSupported=function(p,l){return t.isColumnBarLike(p)||t.isLineLike(p)||p===t.PIE||p===t.DONUT||p===t.WAFFLE};t.isSortingSupported=
function(p,l,k){return 0===l||1<l||k?!1:t.isColumnBarLike(p)||p===t.PIE||p===t.DONUT||p===t.RING};t.isStackSupported=function(p,l,k){return 0===l||1===l&&!k?!1:p===t.COLUMN||p===t.BAR||p===t.LINE};t.isRenderInOppositeDirectionsSupported=function(p,l,k){return 0===l||1===l||k?!1:t.isColumnBarLike(p)};t.supportsNegativeValues=function(p){return t.isColumnBarLike(p)||t.isLineLike(p)||p===t.RING};t.isShowDataAsWeightSupported=function(p){return t.isColumnBarLike(p)||t.isLineLike(p)};t.canFilterVariables=
function(p,l){return l?!1:t.isColumnBarLike(p)||t.isLineLike(p)||p===t.PIE||p===t.DONUT||p===t.RING};t.isBenchmarkSupported=function(p,l){return l?!1:t.isColumnBarLike(p)||t.isLineLike(p)||p===t.RING};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartDataLabelsTypes":function(){define([],function(){var t={NONE:"None",LABEL:"Label",VALUE:"Value",LABEL_VALUE:"LabelValue",PERCENT:"Percent",LABEL_PERCENT:"LabelPercent",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;
return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.NONE},buildType:function(p){var l="";p.label&&(l="Label");p.value?l+="Value":p.percent&&(l+="Percent");return l||t.NONE},hasLabel:function(p){return p&&-1!==p.indexOf("Label")},hasValue:function(p){return p&&-1!==p.indexOf("Value")},hasPercent:function(p){return p&&-1!==p.indexOf("Percent")},has2Values:function(p){return p===t.LABEL_VALUE||p===t.LABEL_PERCENT}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartJsonUtil":function(){define("dojo/_base/lang ./ThemeCalculator ./cleanUp/_ChartJsonCleaner ./ChartTypes ./ChartDataLabelsTypes ../legends/ChartLegendPlacements ../legends/ChartLegendTypes ./plots/supportClasses/GaugeLabelPlacements ./plots/supportClasses/WaffleLabelPlacements ./plots/supportClasses/WaffleDirections ../../../dataProvider/supportClasses/data/AreaDataUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m){m=m.geoenrichment.dijit.ReportPlayer.ChartContainer;var r={getDefaultChartSettings:function(q){q=q||{};var u=t.mixin({},q.font),w=t.mixin({},q.font);delete w.fontSize;return{isChart:!0,type:q.chartType||k.COLUMN,isMultiFeatureChart:!!q.isMultiFeatureChart,seriesItems:q.seriesItems||[],visualProperties:{width:q.width||400,height:q.height||300,marginTop:void 0,marginRight:void 0,marginBottom:void 0,marginLeft:void 0,backgroundColor:void 0,backgroundColorOpacity:1,
plotAreaOutlineColor:void 0,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:0,plotAreaOutlineStyle:void 0,backgroundImageData:void 0,panelBackgroundColor:void 0,title:{text:"",align:"center",style:t.mixin({},u),verticalShift:0},xAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:t.mixin({},u),style:t.mixin({},u),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,gridLinesStyle:void 0,
gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,placement:void 0},yAxis:{show:!0,hideLine:!1,showTicks:!0,ticksInside:!1,hideLabels:!1,title:"",titleStyle:t.mixin({},u),style:t.mixin({},u),labelsAngle:0,lineColor:void 0,gridLines:!1,gridLinesCentered:!1,gridLinesColor:void 0,gridLinesOpacity:1,gridLinesThickness:.5,gridLinesStyle:void 0,gridStripes:!1,gridStripesColor:void 0,gridStripesColorAlt:void 0,hideBaseLine:!1,baseLineColor:void 0,baseLineOpacity:1,baseLineThickness:.5,baseLineStyle:void 0,
baseLineValue:0,showPercentSymbol:!1,showCurrencySymbol:!1,showSymbolForAllLabels:!1,showValuesAsWeightsInSeries:!1,placement:void 0,nonZeroInclusive:!1},legend:{type:a.SERIES,series:{placement:c.NONE,placementOffset:10,hasBorder:!0,labelParts:"Label",style:t.mixin({},u),symbol:void 0,hideOthers:!1,showComparison:!1},minMax:{placement:c.NONE,placementOffset:3,titleStyle:t.mixin({},w),minVariableLabelStyle:t.mixin({},w),maxVariableLabelStyle:t.mixin({},w)}},isStacked:!1,showValuesAsWeightInStack:!1,
columnThickness:p.DEFAULT_COLUMN_THICKNESS,columnBarGap:void 0,columnBarOpacity:1,renderColumnBarsInOppositeDirections:!1,showColumnBarBackground:!1,columnBarBackgroundColor:void 0,columnBarBackgroundOpacity:1,fillOpacity:1,outlineColor:void 0,outlineOpacity:1,outlineThickness:0,outlineStyle:void 0,lineThickness:p.DEFAULT_LINE_THICKNESS,lineOpacity:1,fillLineMarkers:!1,lineMarkersFillOpacity:1,fillLineArea:!1,lineAreaOpacity:1,donutHolePercent:p.DEFAULT_DONUT_HOLE_PERCENT,donutGap:p.DEFAULT_DONUT_GAP,
donutArcPercent:p.DEFAULT_DONUT_ARC_PERCENT,gaugeHolePercent:p.DEFAULT_GAUGE_HOLE_PERCENT,gaugeRangeMin:void 0,gaugeRangeMax:void 0,gaugeGap:p.DEFAULT_GAUGE_GAP,gaugeStartAngle:p.DEFAULT_GAUGE_ANGLE,gaugeArcPercent:p.DEFAULT_GAUGE_ARC_PERCENT,gaugeLabelPlacement:b.INSIDE,gaugeLabelStyle:t.mixin({},w),gaugeShowArrow:!1,gaugeArrowLineColor:void 0,gaugeArrowFillColor:void 0,gaugeConditionalStylingOthers:!1,gaugeConditionalStylingLabel:!1,gaugeShowFromToLabels:!1,gaugeFromLabelStyle:t.mixin({},w),gaugeToLabelStyle:t.mixin({},
w),waffleDirection:e.DOWN_RIGHT,waffleFlowStyle:void 0,waffleShowWholePictures:!1,waffleStretchIconsToFill:!1,waffleRangeMin:void 0,waffleRangeMax:void 0,waffleLabelPlacement:d.BOTTOM,waffleLabelOffset:10,waffleHideValue:!1,waffleHideLabel:!1,waffleShowLabelAbove:!1,waffleValueStyle:t.mixin({},w),waffleLabelStyle:t.mixin({},w),waffleColumnSpace:5,waffleRowSpace:5,waffleConditionalStylingOthers:!1,waffleConditionalStylingValue:!1,waffleConditionalStylingLabel:!1,waffleNumIcons:void 0,waffleNumRows:void 0,
waffleNumColumns:void 0,ringBackgroundColor:void 0,ringBackgroundOpacity:1,columnBarShowWholePictures:!1,dataLabels:f.NONE,dataLabelsShowLabelUnder:!1,dataLabelsDecimals:0,dataLabelsStyle:t.mixin({},u),dataLabelsLabelStyle:null,dataLabelsAltColor:null,dataLabelsEnableAltColor:!1,dataLabelsInside:!1,dataLabelsStackedInColumns:!1,dataLabelsHorizontalAlign:"center",dataLabelsVerticalAlign:"middle",dataLabelsShowValuePercentSymbol:!1,dataLabelsShowValueCurrencySymbol:!1,dataLabelsAngle:0,dataLabelsMaxWidth:void 0,
chartIcons:void 0,floatingIcons:void 0,showAxisIcons:!1,showChartIcons:!1,floatingTexts:void 0,sorting:void 0,filter:void 0,tooltip:r.getChartDefaultTooltip(),conditionalStyling:void 0,noTableView:!1},comparisonInfo:void 0,dataDrillingPanelInfo:void 0}},getChartDefaultTooltip:function(){return{title:!0,value:!0,style:{},linkStyle:{}}},getChartEmptyTooltip:function(){return{style:{},linkStyle:{}}},provideDefaultValueForMissing:function(q,u){u=u||{};u=r.getDefaultChartSettings(u);q.visualProperties.tooltip=
q.visualProperties.tooltip||r.getChartDefaultTooltip();h.populateObject(q,u);return q},cleanUpJson:function(q,u,w){return l.cleanUpJson(q,u,w)},supportsVisualProperty:function(q,u,w){return l.supportsProperty(u,"visualProperties."+q,w)},supportsProperty:function(q,u,w){return l.supportsProperty(u,q,w)},enrichVisualPropertiesWithThemeSettings:function(q,u){q=t.clone(q);q.backgroundColor=q.backgroundColor||u.backgroundColor;q.outlineColor=q.outlineColor||u.outlineColor;q.outlineStyle=q.outlineStyle||
u.outlineStyle;h.populateObject(q.title.style,u.titleStyle);q.xAxis&&(h.populateObject(q.xAxis.style,u.xAxis.axisStyle),h.populateObject(q.xAxis.titleStyle,u.xAxis.titleStyle),q.xAxis.lineColor=q.xAxis.lineColor||u.xAxis.lineColor,q.xAxis.gridLinesColor=q.xAxis.gridLinesColor||u.xAxis.gridLinesColor,q.xAxis.gridLinesStyle=q.xAxis.gridLinesStyle||u.xAxis.gridLinesStyle,q.xAxis.gridStripesColor=q.xAxis.gridStripesColor||u.xAxis.gridStripesColor,q.xAxis.gridStripesColorAlt=q.xAxis.gridStripesColorAlt||
u.xAxis.gridStripesColorAlt,h.populateObject(q.yAxis.style,u.yAxis.axisStyle),h.populateObject(q.yAxis.titleStyle,u.yAxis.titleStyle),q.yAxis.lineColor=q.yAxis.lineColor||u.yAxis.lineColor,q.yAxis.gridLinesColor=q.yAxis.gridLinesColor||u.yAxis.gridLinesColor,q.yAxis.gridLinesStyle=q.yAxis.gridLinesStyle||u.yAxis.gridLinesStyle,q.yAxis.gridStripesColor=q.yAxis.gridStripesColor||u.yAxis.gridStripesColor,q.yAxis.gridStripesColorAlt=q.yAxis.gridStripesColorAlt||u.yAxis.gridStripesColorAlt,q.yAxis.baseLineColor=
q.yAxis.baseLineColor||u.yAxis.baseLineColor,q.yAxis.baseLineStyle=q.yAxis.baseLineStyle||u.yAxis.baseLineStyle);q.legend&&(h.populateObject(q.legend.series.style,u.legendStyle),q.legend.minMax&&(h.populateObject(q.legend.minMax.titleStyle,u.minMaxLegend.titleStyle),h.populateObject(q.legend.minMax.minVariableLabelStyle,u.minMaxLegend.minVariableLabelStyle),h.populateObject(q.legend.minMax.maxVariableLabelStyle,u.minMaxLegend.maxVariableLabelStyle)));h.populateObject(q.dataLabelsStyle,u.dataLabelsStyle);
h.populateObject(q.dataLabelsLabelStyle,q.dataLabelsStyle);q.dataLabelsAltColor=q.dataLabelsAltColor||u.dataLabelsAltColor;h.populateObject(q.gaugeLabelStyle,u.gauge&&u.gauge.dataLabelStyle);q.gaugeArrowLineColor=q.gaugeArrowLineColor||u.gauge&&u.gauge.arrowIndicator.lineColor;q.gaugeArrowFillColor=q.gaugeArrowFillColor||u.gauge&&u.gauge.arrowIndicator.backgroundColor;h.populateObject(q.waffleValueStyle,u.waffle&&u.waffle.dataValueStyle);h.populateObject(q.waffleLabelStyle,u.waffle&&u.waffle.dataLabelStyle);
q.ringBackgroundColor=q.ringBackgroundColor||u.ring&&u.ring.ringBackground&&u.ring.ringBackground.backgroundColor;q.columnBarBackgroundColor=q.columnBarBackgroundColor||u.columnBarBackground&&u.columnBarBackground.backgroundColor;q.tooltip=q.tooltip||r.getChartDefaultTooltip();q.tooltip.style=q.tooltip.style||{};q.tooltip.linkStyle=q.tooltip.linkStyle||{};h.populateObject(q.tooltip.style,u.tooltip&&u.tooltip);h.populateObject(q.tooltip.linkStyle,u.tooltip&&u.tooltipLink);return q},createChartPoint:function(q,
u,w,y,C){q={color:w||"",label:void 0!==u?u||"":q&&q.alias,fieldInfo:q,iconFieldInfo:y,captionFieldInfo:C};w&&p.setPointColor(q,w);return q},getGaugeOthersPoint:function(q){return{label:q&&q.label||m.gaugeOthers,color:q&&q.color}},getWaffleOthersPoint:function(q){return{label:q&&q.label||m.waffleOthers,color:q&&q.color,iconFieldInfo:q&&q.iconFieldInfo}}},n=[{headers:{data:{AREA_DESC:m.oneMile}}},{headers:{data:{AREA_DESC:m.threeMiles}}},{headers:{data:{AREA_DESC:m.fiveMiles}}}];r.getSeriesItemsForMultiFeatureChart=
function(q,u,w){if(!u)return u;w=w||n;var y=u[0];return k.isLineLike(q)?w.map(function(C,D){var G=t.clone(y);G.points.forEach(function(B){delete B.color});if(D=y.multiFeatureLineStyles&&y.multiFeatureLineStyles[D])G.color=D.color,G.lineThickness=D.lineThickness,G.lineStyle=D.lineStyle,G.lineMarker=D.lineMarker,G.lineMarkerColor=D.lineMarkerColor,G.lineMarkerSize=D.lineMarkerSize,G.lineMarkerFillColor=D.lineMarkerFillColor,G.fillColor=D.fillColor;var F=g.getAreaDataValue({areaDataObject:C,fieldName:"headers.AREA_DESC"})||
"";G.points.forEach(function(B){B.areaName=F;B.originalSeriesName=y.label});G.label=F;return G}):y.points.map(function(C){return{label:C.label,points:w.map(function(D){D=g.getAreaDataValue({areaDataObject:D,fieldName:"headers.AREA_DESC"})||"";var G=r.createChartPoint(C.fieldInfo,D,C.color||y.color);G.areaName=D;G.originalSeriesName=y.label;return G})}})};r.getOriginalPointByMultiFeatureIndexes=function(q,u,w){return q[0].points[u]};r.transposeSeriesItems=function(q){return q.length?q[0].points.map(function(u,
w){return{label:u.label,points:q.map(function(y){var C=t.clone(y.points[w]);C.label=y.label;return C})}}):[]};return r})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ThemeCalculator":function(){define("dojo/_base/lang dojox/charting/Theme ../../themes/ThemeLibrary ./ChartTypes ./ChartLineMarkers ./ChartLineStyles esri/dijit/geoenrichment/utils/ColorUtil".split(" "),function(t,p,l,k,f,c,a){function b(g,h,m){switch(g){case k.COLUMN:var r=h.column&&h.column.colors;break;case k.BAR:r=h.bar&&
h.bar.colors;break;case k.LINE:r=h.line&&h.line.colors;break;case k.VERTICAL_LINE:r=h.line&&h.line.colors;break;case k.PIE:r=h.pie&&h.pie.colors;break;case k.DONUT:r=h.donut&&h.donut.colors;break;case k.GAUGE:r=h.gauge&&h.gauge.colors;break;case k.WAFFLE:r=h.waffle&&h.waffle.colors;break;case k.RING:r=h.ring&&h.ring.colors;break;case k.PICTURE_COLUMN:r=h.pictureColumn&&h.pictureColumn.colors;break;case k.PICTURE_BAR:r=h.pictureBar&&h.pictureBar.colors}r&&r.length||(r=null);return 3>=m&&h.colors3series&&
h.colors3series.length&&h.colors3series||r||h.colors||e}var d={},e=["#AAAAAA","#888888","#555555","#333333"];d.DEFAULT_LINE_THICKNESS=1;d.DEFAULT_COLUMN_THICKNESS="Medium";d.DEFAULT_DONUT_HOLE_PERCENT=50;d.DEFAULT_DONUT_GAP=3;d.DEFAULT_DONUT_ARC_PERCENT=100;d.DEFAULT_GAUGE_HOLE_PERCENT=80;d.DEFAULT_GAUGE_GAP=2;d.DEFAULT_GAUGE_ANGLE=0;d.DEFAULT_GAUGE_ARC_PERCENT=100;d.getThemeForSettings=function(g,h,m){var r=m.isEditMode;m=m.isBenchmarked;var n=new p({colors:h.colors||e});if(!g)return n;var q=g.visualProperties;
n.plotarea.fill=q.backgroundColor||h.backgroundColor;"number"!==typeof q.backgroundColorOpacity||a.isTransparent(n.plotarea.fill)||(n.plotarea.fill=a.toColor(n.plotarea.fill),n.plotarea.fill.a=q.backgroundColorOpacity);n.plotarea.stroke={width:0};q.plotAreaOutlineColor&&(n.plotarea.stroke.color=q.plotAreaOutlineColor,"number"!==typeof q.plotAreaOutlineOpacity||a.isTransparent(n.plotarea.stroke.color)||(n.plotarea.stroke.color=a.toColor(n.plotarea.stroke.color),n.plotarea.stroke.color.a=q.plotAreaOutlineOpacity),
n.plotarea.stroke.width=q.plotAreaOutlineThickness||0,q.plotAreaOutlineStyle&&(n.plotarea.stroke.style=c.toGFXValue(q.plotAreaOutlineStyle)));n.chart.fill="transparent";n.axis.title.font="normal normal normal 11px Verdana";k.hasBackgroundImage(g.type)&&(n.plotarea.backgroundImageData=q.backgroundImageData);var u=t.mixin({},h.dataLabelsStyle,q.dataLabelsStyle);n.series.dataLabelsColor=u.color;n.series.dataLabelsAltColor=q.dataLabelsEnableAltColor&&(q.dataLabelsAltColor||h.dataLabelsAltColor);n.series.dataLabelsFont=
d.combineFontString(u);n.series.dataLabelsHorizontalAlign=q.dataLabelsHorizontalAlign||"center";n.series.dataLabelsVerticalAlign=q.dataLabelsVerticalAlign||"middle";n.series.dataLabelsAngle=q.dataLabelsAngle;n.series.dataLabelsMaxWidth=q.dataLabelsMaxWidth;var w=t.mixin({},u,q.dataLabelsLabelStyle);n.series.dataLabelsLabelColor=w.color;n.series.dataLabelsLabelFont=d.combineFontString(w);n.series.dataLabelsPercentColor=u.color;n.series.dataLabelsPercentFont=d.combineFontString(u);k.isColumnBarLike(g.type)&&
(n.series.showColumnBarBackground=q.showColumnBarBackground,n.series.columnBarBackgroundColor=q.columnBarBackgroundColor||h.columnBarBackground&&h.columnBarBackground.backgroundColor,n.series.columnBarBackgroundColor&&(n.series.columnBarBackgroundColor=1>q.columnBarBackgroundOpacity?a.getColorWithAlpha(n.series.columnBarBackgroundColor,q.columnBarBackgroundOpacity):n.series.columnBarBackgroundColor),n.series.renderColumnBarsInOppositeDirections=q.renderColumnBarsInOppositeDirections);k.hasAxis(g.type)&&
(n.series.baseLineValue=q.yAxis.baseLineValue);g.type===k.DONUT&&(n.series.donutHolePercent=void 0!==q.donutHolePercent?q.donutHolePercent:d.DEFAULT_DONUT_HOLE_PERCENT,n.series.donutGap=void 0!==q.donutGap?q.donutGap:d.DEFAULT_DONUT_GAP,n.series.donutArcPercent=void 0!==q.donutArcPercent?q.donutArcPercent:d.DEFAULT_DONUT_ARC_PERCENT,n.series.donutArcPercent=Math.min(100,Math.max(50,n.series.donutArcPercent)));g.type===k.GAUGE&&(n.series.donutHolePercent=void 0!==q.gaugeHolePercent?q.gaugeHolePercent:
d.DEFAULT_GAUGE_HOLE_PERCENT,n.series.donutGap=void 0!==q.gaugeGap?q.gaugeGap:d.DEFAULT_GAUGE_GAP,n.series.startAngle=void 0!==q.gaugeStartAngle?q.gaugeStartAngle:d.DEFAULT_GAUGE_ANGLE,n.series.donutArcPercent=void 0!==q.gaugeArcPercent?q.gaugeArcPercent:d.DEFAULT_GAUGE_ARC_PERCENT,n.series.donutArcPercent=Math.min(100,Math.max(50,n.series.donutArcPercent)),n.series.donutShowIcons=q.showChartIcons,q.gaugeShowArrow&&(n.series.gaugeShowArrowIndicator=!0,n.series.donutGap=0,100!==n.series.donutArcPercent&&
(n.series.startAngle=0),n.series.gaugeArrowIndicatorLineColor=q.gaugeArrowLineColor||h.gauge&&h.gauge.arrowIndicator.lineColor,n.series.gaugeArrowIndicatorFillColor=q.gaugeArrowFillColor||h.gauge&&h.gauge.arrowIndicator.backgroundColor),u=t.mixin({},h.gauge&&h.gauge.dataLabelStyle,q.gaugeLabelStyle),n.series.gaugeMainLabelPosition=q.gaugeLabelPlacement,n.series.gaugeMainLabelFont=d.combineFontString(u),n.series.gaugeMainLabelFontColor=q.gaugeConditionalStylingLabel?null:u.color,n.series.gaugeMainLabelFontColorFromConditionalStyling=
q.gaugeConditionalStylingLabel&&!!q.conditionalStyling,n.series.gaugeMainLabelFontSize=q.gaugeLabelStyle&&q.gaugeLabelStyle.fontSize,n.series.gaugeMainLabelTextDecoration=u.textDecoration,q.gaugeShowFromToLabels&&(n.series.gaugeShowFromToLabels=q.gaugeShowFromToLabels,u=t.mixin({},h.gauge&&h.gauge.dataLabelStyle,q.gaugeFromLabelStyle),n.series.gaugeFromLabelValue=q.gaugeRangeMin||0,n.series.gaugeFromLabelFont=d.combineFontString(u),n.series.gaugeFromLabelFontColor=u.color,n.series.gaugeFromLabelFontSize=
u.fontSize,n.series.gaugeFromLabelTextDecoration=u.textDecoration,u=t.mixin({},h.gauge&&h.gauge.dataLabelStyle,q.gaugeToLabelStyle),n.series.gaugeToLabelValue=q.gaugeRangeMax||"",n.series.gaugeToLabelFont=d.combineFontString(u),n.series.gaugeToLabelFontColor=u.color,n.series.gaugeToLabelFontSize=u.fontSize,n.series.gaugeToLabelTextDecoration=u.textDecoration));g.type===k.WAFFLE&&(n.series.waffleDirection=q.waffleDirection,n.series.waffleFlowStyle=q.waffleFlowStyle,n.series.waffleShowWholePictures=
q.waffleShowWholePictures,n.series.waffleStretchIconsToFill=q.waffleStretchIconsToFill,n.series.waffleLabelPlacement=q.waffleLabelPlacement,n.series.waffleLabelOffset=q.waffleLabelOffset,n.series.waffleColumnSpace=q.waffleColumnSpace,n.series.waffleRowSpace=q.waffleRowSpace,n.series.waffleNumIcons=q.waffleNumIcons,n.series.waffleNumRows=q.waffleNumRows,n.series.waffleNumColumns=q.waffleNumColumns,n.series.waffleHideValue=q.waffleHideValue,u=t.mixin({},h.waffle&&h.waffle.dataValueStyle,q.waffleValueStyle),
n.series.waffleValueFont=d.combineFontString(u),n.series.waffleValueFontColor=q.waffleConditionalStylingValue?null:u.color,n.series.waffleValueFontColorFromConditionalStyling=q.waffleConditionalStylingValue&&!!q.conditionalStyling,n.series.waffleValueFontSize=u.fontSize,n.series.waffleValueTextDecoration=u.textDecoration,n.series.waffleHideLabel=q.waffleHideLabel,u=t.mixin({},h.waffle&&h.waffle.dataLabelStyle,q.waffleLabelStyle),n.series.waffleLabelFont=d.combineFontString(u),n.series.waffleLabelFontColor=
q.waffleConditionalStylingLabel?null:u.color,n.series.waffleLabelFontColorFromConditionalStyling=q.waffleConditionalStylingLabel&&!!q.conditionalStyling,n.series.waffleLabelFontSize=u.fontSize,n.series.waffleLabelTextDecoration=u.textDecoration,n.series.waffleShowLabelAbove=q.waffleShowLabelAbove);g.type===k.RING&&(n.series.show100PercentLabel=!m,n.series.ringBackgroundColor=q.ringBackgroundColor||h.ring&&h.ring.ringBackground&&h.ring.ringBackground.backgroundColor,n.series.ringBackgroundColor&&(n.series.ringBackgroundColor=
1>q.ringBackgroundOpacity?a.getColorWithAlpha(n.series.ringBackgroundColor,q.ringBackgroundOpacity):n.series.ringBackgroundColor));k.isPictureLike(g.type)&&(n.series.columnBarShowWholePictures=q.columnBarShowWholePictures);n.marker.fill="#FFFFFF";n.series.outline=null;n.series.isEditMode=r;return n};d.getComparisonSymbol=function(g){return f.getMarkerPath(f.CIRCLE,g)};d.calcColorForPoint=function(g){var h=g.point,m=g.seriesItem,r=g.pointIndex,n=g.isOthersPoint,q=g.seriesIndex,u=g.numSeries,w=g.chartType,
y=g.themeSettings,C=g.isComparisonSeries;g=g.comparisonInfo;var D=m&&m.points.length;w===k.WAFFLE&&D--;m=m&&m.color;var G=k.isSingleSeries(w)||k.isColumnBarLike(w)&&!y.renderSingleDataSeriesWithSameColor&&1===u;u=b(w,y,G?D:u);if(k.isLineLike(w))if(C&&g)r=g.color||y.comparisonInfo.lineColor;else{var F=u[q%u.length];r=m||F||"#000000"}else if(C&&g&&g.color)r=g.color;else{h=k.isPictureLike(w)?h&&d.getPointIconStyle(h).fillColor:h&&h.color;if(w===k.GAUGE&&n&&y.gauge.othersColor)return h||y.gauge.othersColor;
if(w===k.WAFFLE&&n&&y.waffle.othersColor)return h||y.waffle.othersColor;F=F||(G?u[r%u.length]:u[q%u.length]);r=h||!k.isSingleSeries(w)&&m||F||"#000000"}return r};d.pointCanHaveColor=function(g){return k.isPictureLike(g.chartType)?!!(g.point.iconFieldInfo&&g.point.iconFieldInfo.shapeJson&&g.point.iconFieldInfo.shapeJson.g.length):!0};d.setPointColor=function(g,h){delete g.color;g.iconFieldInfo?g.iconFieldInfo.shapeJson&&(delete g.iconFieldInfo.shapeJson.style.fillColor,delete g.iconFieldInfo.shapeJson.style.borderColor,
h&&(g.iconFieldInfo.shapeJson.style.fillColor=h,g.iconFieldInfo.shapeJson.style.borderColor=h)):h&&(g.color=h)};d.calcColorForSeries=function(g){var h=g.seriesItem,m=g.seriesIndex,r=g.numSeries,n=g.chartType,q=g.themeSettings;if(k.isSingleSeries(n))return null;g=k.isColumnBarLike(n)&&!q.renderSingleDataSeriesWithSameColor&&1===r;r=b(n,q,r);m=k.isLineLike(n)?r[m%r.length]:g?null:r[m%r.length];return h&&h.color||m||"#000000"};d.provideMissingIconsForPoints=function(g,h){if(k.isPictureLike(h)){var m,
r=[];g.forEach(function(n){n.iconFieldInfo?(m=n.iconFieldInfo,r.forEach(function(q){q.iconFieldInfo=t.clone(m)}),r.length=0):m?n.iconFieldInfo=t.clone(m):r.push(n)})}};d.setWaffleChartPointIcon=function(g,h,m){var r=g&&g.shapeJson;0===h?m.forEach(function(n,q){if(n.fieldInfo||r){var u=d.getPointIconStyle(n);n.iconFieldInfo=0===q?g:g&&t.clone(g);n.iconFieldInfo&&n.iconFieldInfo.shapeJson&&0!==q&&(n.iconFieldInfo.shapeJson.style.fillColor=u.fillColor,n.iconFieldInfo.shapeJson.style.borderColor=u.borderColor)}}):
m[h].iconFieldInfo=g;h=m[0];m=m[m.length-1];!m.iconFieldInfo&&h.iconFieldInfo&&h.iconFieldInfo.shapeJson&&(m.iconFieldInfo=t.clone(h.iconFieldInfo),delete m.iconFieldInfo.shapeJson.style.fillColor,delete m.iconFieldInfo.shapeJson.style.borderColor)};d.getPointIconStyle=function(g,h){function m(n,q){return"number"===typeof n?n:q}var r=g&&(g.iconFieldInfo||g.icon);if(!r||!r.shapeJson)return{fillColor:null,fillAlpha:null,borderColor:null,borderAlpha:null,borderWidth:null,borderDashArray:null};g=r.shapeJson.style;
h=h&&h.considerTheme&&r.shapeJson.themeStyle;return{fillColor:g&&g.fillColor||h&&h.fillColor,fillAlpha:m(g&&g.fillAlpha,h&&h.fillAlpha),borderColor:g&&g.borderColor||h&&h.borderColor,borderAlpha:m(g&&g.borderAlpha,h&&h.borderAlpha),borderWidth:m(g&&g.borderWidth,h&&h.borderWidth),borderDashArray:g&&g.borderDashArray||h&&h.borderDashArray}};d.calcIconForPoint=function(g,h,m){if(!k.isPictureLike(m))return null;(g=g.iconFieldInfo)&&g.shapeJson&&h&&(g=t.clone(g),g.shapeJson.themeStyle={fillColor:h,borderColor:h});
return g};d.calcBackgroundIconForPoint=function(g,h,m,r){if(!k.isPictureLike(h))return null;h=r.columnBarBackgroundColor||m.columnBarBackground&&m.columnBarBackground.backgroundColor;return(g=g.iconFieldInfo)&&g.shapeJson&&h?(g=t.clone(g),g.shapeJson.themeStyle={fillColor:h,borderColor:h},g):null};d.combineFontString=function(g){g=g||{};return(g.fontStyle||"normal")+" normal "+(g.fontWeight||"normal")+" "+((g.fontSize||l.CHART_DATA_FONT_SIZE)+"px ")+(g.fontFamily||l.DEFAULT_FONT_FAMILY_CLASSIC)};
return d})},"dojox/charting/Theme":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color ./SimpleTheme dojox/color/_base dojox/color/Palette dojox/gfx/gradutils".split(" "),function(t,p,l,k,f,c){var a=p("dojox.charting.Theme",k,{});t.mixin(a,{defineColors:function(b){b=b||{};var d=[],e=b.num||5;if(b.colors){var g=b.colors.length;for(var h=0;h<e;h++)d.push(b.colors[h%g]);return d}return b.hue?c.generate(f.fromHsv(b.hue,b.saturation||100,((b.high||90)+(b.low||30))/2),"monochromatic").colors:
b.generator?f.Palette.generate(b.base,b.generator).colors:d},generateGradient:function(b,d,e){b=t.delegate(b);b.colors=[{offset:0,color:d},{offset:1,color:e}];return b},generateHslColor:function(b,d){b=new l(b);var e=b.toHsl();d=f.fromHsl(e.h,e.s,d);d.a=b.a;return d},generateHslGradient:function(b,d,e,g){b=new l(b);var h=b.toHsl();e=f.fromHsl(h.h,h.s,e);g=f.fromHsl(h.h,h.s,g);e.a=g.a=b.a;return a.generateGradient(d,e,g)}});a.defaultMarkers=k.defaultMarkers;a.defaultColors=k.defaultColors;a.defaultTheme=
k.defaultTheme;return a})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(t,p,l,k,f,c){var a=l("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){b=b||{};var d=a.defaultTheme;p.forEach("chart plotarea axis grid series marker indicator".split(" "),function(e){this[e]=t.delegate(d[e],b[e])},this);b.seriesThemes&&b.seriesThemes.length?
(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||a.defaultColors).slice(0));this.markerThemes=null;b.markerThemes&&b.markerThemes.length&&(this.markerThemes=b.markerThemes.slice(0));this.markers=b.markers?t.clone(b.markers):t.delegate(a.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var b=new this.constructor({chart:this.chart,
plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});p.forEach("clone clear next skip addMixin post getTick".split(" "),function(d){this.hasOwnProperty(d)&&(b[d]=this[d])},this);return b},clear:function(){this._current=0},next:function(b,d,e){var g=
f.merge;if(this.colors){var h=t.delegate(this.series);g=t.delegate(this.marker);var m=new k(this.colors[this._current%this.colors.length]);if(h.stroke&&h.stroke.color){h.stroke=t.delegate(h.stroke);var r=new k(h.stroke.color);h.stroke.color=new k(m);h.stroke.color.a=r.a}else h.stroke={color:m};g.stroke&&g.stroke.color?(g.stroke=t.delegate(g.stroke),r=new k(g.stroke.color),g.stroke.color=new k(m),g.stroke.color.a=r.a):g.stroke={color:m};!h.fill||h.fill.type?h.fill=m:(r=new k(h.fill),h.fill=new k(m),
h.fill.a=r.a);!g.fill||g.fill.type?g.fill=m:(r=new k(g.fill),g.fill=new k(m),g.fill.a=r.a)}else h=this.seriesThemes?g(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,g=this.markerThemes?g(this.marker,this.markerThemes[this._current%this.markerThemes.length]):h;h={series:h,marker:g,symbol:g&&g.symbol||this._markers[this._current%this._markers.length]};++this._current;d&&(h=this.addMixin(h,b,d));e&&(h=this.post(h,b));return h},skip:function(){++this._current},addMixin:function(b,
d,e,g){if(t.isArray(e))p.forEach(e,function(m){b=this.addMixin(b,d,m)},this);else{var h={};"color"in e&&("line"==d||"area"==d?(t.setObject("series.stroke.color",e.color,h),t.setObject("marker.stroke.color",e.color,h)):t.setObject("series.fill",e.color,h));p.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(m){var r="marker"+m.charAt(0).toUpperCase()+m.substr(1),n=r in e;m in e&&(t.setObject("series."+m,e[m],h),n||t.setObject("marker."+m,e[m],h));n&&t.setObject("marker."+
m,e[r],h)});"marker"in e&&(h.symbol=e.marker,h.symbol=e.marker);b=f.merge(b,h)}g&&(b=this.post(b,d));return b},post:function(b,d){var e=b.series.fill,g;return!this.noGradConv&&this.shapeSpaces[e.space]&&"linear"==e.type&&("bar"==d?g={x1:e.y1,y1:e.x1,x2:e.y2,y2:e.x2}:this.noRadialConv||"shape"!=e.space||"slice"!=d&&"circle"!=d||(g={type:"radial",cx:0,cy:0,r:100}),g)?f.merge(b,{series:{fill:g}}):b},getTick:function(b,d){var e=this.axis.tick;b+="Tick";var g=f.merge;e?this.axis[b]&&(e=g(e,this.axis[b])):
e=this.axis[b];d&&(e?d[b]&&(e=g(e,d[b])):e=d[b]);return e},inspectObjects:function(b){p.forEach("chart plotarea axis grid series marker indicator".split(" "),function(d){b(this[d])},this);this.seriesThemes&&p.forEach(this.seriesThemes,b);this.markerThemes&&p.forEach(this.markerThemes,b)},reverseFills:function(){this.inspectObjects(function(b){b&&b.fill&&(b.fill=c.reverse(b.fill))})},addMarker:function(b,d){this.markers[b]=d;this._buildMarkerArray()},setMarkers:function(b){this.markers=b;this._buildMarkerArray()},
_buildMarkerArray:function(){this._markers=[];for(var b in this.markers)this._markers.push(this.markers[b])}});t.mixin(a,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,
titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},
outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",
radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});return a})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(t,p){var l=p.getObject("lang.utils",!0,t),k={},f=Object.prototype.toString,c=function(a){if(a)switch(f.call(a)){case "[object Array]":return a.slice(0);case "[object Object]":return p.delegate(a)}return a};
p.mixin(l,{coerceType:function(a,b){switch(typeof a){case "number":return Number(eval("("+b+")"));case "string":return String(b);case "boolean":return!!eval("("+b+")")}return eval("("+b+")")},updateWithObject:function(a,b,d){if(!b)return a;for(var e in a)if(e in b&&!(e in k)){var g=a[e];g&&"object"==typeof g?l.updateWithObject(g,b[e],d):a[e]=d?l.coerceType(g,b[e]):c(b[e])}return a},updateWithPattern:function(a,b,d,e){if(!b||!d)return a;for(var g in d)g in b&&!(g in k)&&(a[g]=e?l.coerceType(d[g],b[g]):
c(b[g]));return a},merge:function(a,b){if(b){var d=f.call(a),e=f.call(b);switch(e){case "[object Array]":if(e==d){d=Array(Math.max(a.length,b.length));var g=0;for(e=d.length;g<e;++g)d[g]=l.merge(a[g],b[g]);return d}return b.slice(0);case "[object Object]":if(e==d&&a){d=p.delegate(a);for(g in b)if(g in a){e=a[g];var h=b[g];h!==e&&(d[g]=l.merge(e,h))}else d[g]=p.clone(b[g]);return d}return p.clone(b)}}return b}});return l})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix",
"dojo/_base/Color"],function(t,p,l,k){function f(c,a){if(0>=c)return a[0].color;var b=a.length;if(1<=c)return a[b-1].color;for(var d=0;d<b;++d){var e=a[d];if(e.offset>=c)return d?(a=a[d-1],k.blendColors(new k(a.color),new k(e.color),(c-a.offset)/(e.offset-a.offset))):e.color}return a[b-1].color}t=t.gradutils={};t.getColor=function(c,a){if(c){switch(c.type){case "linear":var b=l.rotate(-Math.atan2(c.y2-c.y1,c.x2-c.x1));var d=l.project(c.x2-c.x1,c.y2-c.y1);a=l.multiplyPoint(d,a);var e=l.multiplyPoint(d,
c.x1,c.y1);d=l.multiplyPoint(d,c.x2,c.y2);d=l.multiplyPoint(b,d.x-e.x,d.y-e.y).x;b=l.multiplyPoint(b,a.x-e.x,a.y-e.y).x/d;break;case "radial":b=a.x-c.cx,a=a.y-c.cy,b=Math.sqrt(b*b+a*a)/c.r}return f(b,c.colors)}return new k(c||[0,0,0,0])};t.reverse=function(c){if(c)switch(c.type){case "linear":case "radial":if(c=p.delegate(c),c.colors){for(var a=c.colors,b=a.length,d=0,e,g=c.colors=Array(a.length);d<b;++d)e=a[d],g[d]={offset:1-e.offset,color:e.color};g.sort(function(h,m){return h.offset-m.offset})}}return c};
return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineMarkers":function(){define(["dojox/charting/SimpleTheme"],function(t){var p={NONE:"None",CIRCLE:"Circle",SQUARE:"Square",DIAMOND:"Diamond",CROSS:"Cross",X:"X",TRIANGLE:"Triangle",TRIANGLE_INVERTED:"TriangleInverted"},l=[p.CIRCLE,p.SQUARE,p.DIAMOND,p.CROSS,p.X,p.TRIANGLE,p.TRIANGLE_INVERTED],k={},f;for(f in p)k[p[f]]=f;p.DEFAULT_SIZE=3;p.isSupported=function(c){return-1!==l.indexOf(c)};p.getMarkerAt=function(c){return l[c%
l.length]};p.getMarkerPath=function(c,a){a=(0<=a?a:p.DEFAULT_SIZE)/p.DEFAULT_SIZE;switch(c){case p.CIRCLE:return"m"+-3*a+",0 c0,"+-4*a+" "+6*a+","+-4*a+" "+6*a+",0 m"+-6*a+",0 c0,"+4*a+" "+6*a+","+4*a+" "+6*a+",0";case p.SQUARE:return"m"+-3*a+","+-3*a+" l0,"+6*a+" "+6*a+",0 0,"+-6*a+" z";case p.DIAMOND:return"m0,"+-3*a+" l"+3*a+","+3*a+" "+-3*a+","+3*a+" "+-3*a+","+-3*a+" z";case p.CROSS:return"m0,"+-3*a+" l0,"+6*a+" m"+-3*a+","+-3*a+" l"+6*a+",0";case p.X:return"m"+-3*a+","+-3*a+" l"+6*a+","+6*a+
" m0,"+-6*a+" l"+-6*a+","+6*a;case p.TRIANGLE:return"m"+-3*a+","+3*a+" l"+3*a+","+-6*a+" "+3*a+","+6*a+" z";case p.TRIANGLE_INVERTED:return"m"+-3*a+","+-3*a+" l"+3*a+","+6*a+" "+3*a+","+-6*a+" z"}return t.defaultMarkers[k[c]]||""};p.getMarkerPathAt=function(c,a){return p.getMarkerPath(p.getMarkerAt(c),a)};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartJsonCleaner":function(){define("../ChartTypes ../ChartDataLabelsTypes ../../legends/ChartLegendTypes ../../legends/ChartLegendPlacements ./_ChartTypeSupports ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder".split(" "),
function(t,p,l,k,f,c){return{cleanUpJson:function(a,b,d){var e=a.type,g=a.isMultiFeatureChart,h=a.seriesItems.length,m=a.visualProperties;d=d&&d.isBenchmarked;t.isSingleSeries(e)&&1<h&&(h=a.seriesItems.length=1);t.hasBackgroundImage(e)||delete m.backgroundImageData;t.isConditionalStylingSupported(e)||delete m.conditionalStyling;t.isSortingSupported(e,h,g)||delete m.sorting;t.canFilterVariables(e,g)||delete m.filter;t.isComparisonSupported(e,g)<h&&delete a.comparisonInfo;2===h&&a.comparisonInfo&&(m.showColumnBarBackground=
!1,m.isStacked=!1,m.showValuesAsWeightInStack=!1);g&&a.comparisonInfo&&(a.comparisonInfo.chartType=e);m.legend&&m.legend.series&&m.legend.type===l.SERIES&&!t.isSeriesLegendSupported(e,h,g,!!a.comparisonInfo&&m.legend.series.showComparison)&&(m.legend.series.placement=k.NONE);t.isRenderInOppositeDirectionsSupported(e,h,g)||delete m.renderColumnBarsInOppositeDirections;t.isStackSupported(e,h,g)||(m.isStacked=!1,m.showValuesAsWeightInStack=!1);m.renderColumnBarsInOppositeDirections&&m.isStacked&&(m.renderColumnBarsInOppositeDirections=
!0,m.isStacked=!1,m.showValuesAsWeightInStack=!1);m.isStacked||(m.showValuesAsWeightInStack=!1);if(m.yAxis){if(m.isStacked||m.renderColumnBarsInOppositeDirections)m.yAxis.baseLineValue=0;t.isShowDataAsWeightSupported(e)&&!m.showValuesAsWeightInStack||delete m.yAxis.showValuesAsWeightsInSeries}t.isPictureLike(e)?a.seriesItems.forEach(function(n){n.points&&n.points.forEach(function(q){delete q.color})}):a.seriesItems.forEach(function(n){n.points&&n.points.forEach(function(q){delete q.iconFieldInfo})});
t.isSingleSeries(e)&&a.seriesItems.forEach(function(n){delete n.color});t.isLineLike(e)&&a.seriesItems.forEach(function(n){g?(delete n.color,delete n.lineThickness,delete n.lineStyle,delete n.lineMarker,delete n.lineMarkerColor,delete n.lineMarkerFillColor,delete n.lineMarkerSize):delete n.multiFeatureLineStyles});if(e===t.GAUGE){if((h=a.seriesItems[0]&&a.seriesItems[0].points&&a.seriesItems[0].points)&&h.length){h.length=Math.min(2,h.length);h[1]&&delete h[1].fieldInfo;var r=h[0].fieldInfo;r&&c.isFieldInfoInPercentState(r)&&
(delete m.gaugeRangeMin,delete m.gaugeRangeMax)}90<m.gaugeArcPercent&&(m.gaugeShowFromToLabels=!1)}e===t.WAFFLE&&(h=a.seriesItems[0]&&a.seriesItems[0].points&&a.seriesItems[0].points)&&h.length&&(1<h.length&&delete h[h.length-1].fieldInfo,(r=h[0].fieldInfo)&&c.isFieldInfoInPercentState(r)&&(delete m.waffleRangeMin,delete m.waffleRangeMax),1<h.length&&delete h[h.length-1].fieldInfo,2<h.length?delete m.waffleRangeMin:delete m.legend);a=f.cleanUpJsonForChartType(a,b);d&&(m=a.visualProperties,m.renderColumnBarsInOppositeDirections=
!1,m.isStacked=!1,m.showValuesAsWeightInStack=!1,m.yAxis&&m.yAxis.showValuesAsWeightsInSeries&&(delete m.yAxis.showValuesAsWeightsInSeries,delete m.yAxis.showPercentSymbol),p.hasPercent(m.dataLabels)&&(m.dataLabels=p.buildType({label:p.hasLabel(m.dataLabels),value:!0})),delete a.comparisonInfo);return a},supportsProperty:function(a,b,d){return f.supportsProperty(a,b,d)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendTypes":function(){define([],function(){var t={SERIES:"Series",
MIN_MAX:"MinMax",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.SERIES}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendPlacements":function(){define([],function(){var t={NONE:"None",LEFT:"Left",RIGHT:"Right",TOP:"Top",BOTTOM:"Bottom",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.NONE},isOnSide:function(p){return p===
t.LEFT||p===t.RIGHT}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartTypeSupports":function(){define("esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartTypes ./chartTypes/classic/_ColumnBarLike ./chartTypes/classic/_LineLike ./chartTypes/classic/_Pie ./chartTypes/graphic/_ColumnBarLike ./chartTypes/graphic/_ColumnBarPictureLike ./chartTypes/graphic/_LineLike ./chartTypes/graphic/_Pie ./chartTypes/graphic/_Donut ./chartTypes/graphic/_Ring ./chartTypes/graphic/_Gauge ./chartTypes/graphic/_Waffle".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m){var r={},n={};n[p.COLUMN]=n[p.BAR]=l;n[p.LINE]=k;n[p.PIE]=f;var q={};q[p.COLUMN]=q[p.BAR]=c;q[p.PICTURE_COLUMN]=q[p.PICTURE_BAR]=a;q[p.LINE]=q[p.VERTICAL_LINE]=b;q[p.PIE]=d;q[p.DONUT]=e;q[p.RING]=g;q[p.GAUGE]=h;q[p.WAFFLE]=m;r.cleanUpJsonForChartType=function(u,w){return t.filterByPattern(u,(w?q:n)[u.type])};r.supportsProperty=function(u,w,y){w=w.split(".");var C=(y?q:n)[u];w.forEach(function(D){C=C&&C[D]});return!!C};return r})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_ColumnBarLike":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},
columnThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_LineLike":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,backgroundColor:1,backgroundImageData:1,title:{text:1,align:1,style:1},xAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},
yAxis:{show:1,showTicks:1,title:1,titleStyle:1,style:1,labelsAngle:1,gridLines:1,gridLinesCentered:1,placement:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},lineThickness:1,dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/classic/_Pie":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,view3D:1,origin:1,
title:{text:1,align:1,style:1},legend:{series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1}},dataLabels:1,dataLabelsStyle:1,dataLabelsDecimals:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarLike":function(){define([],function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,
plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,
showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,series:{placement:1,placementOffset:1,
hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,columnThickness:1,columnBarGap:1,columnBarOpacity:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,columnBarBackgroundColor:1,columnBarBackgroundOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,
dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,sorting:1,noSorting:1,filter:1,noFilter:1,tooltip:1,conditionalStyling:1,noTableView:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_ColumnBarPictureLike":function(){define([],
function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,
style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,
baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,showValuesAsWeightsInSeries:1,placement:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},columnThickness:1,columnBarGap:1,renderColumnBarsInOppositeDirections:1,showColumnBarBackground:1,
columnBarBackgroundColor:1,columnBarShowWholePictures:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsAltColor:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsHorizontalAlign:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsMaxWidth:1,floatingIcons:1,floatingTexts:1,sorting:1,noSorting:1,filter:1,noFilter:1,tooltip:1,conditionalStyling:1,noTableView:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},
"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_LineLike":function(){define([],function(){return{isChart:1,type:1,isMultiFeatureChart:1,seriesItems:[{label:1,color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1,multiFeatureLineStyles:[{color:1,lineThickness:1,lineStyle:1,lineMarker:1,lineMarkerColor:1,lineMarkerSize:1,lineMarkerFillColor:1,fillColor:1}],points:1}],visualProperties:{width:1,height:1,
marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,backgroundImageData:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},xAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,
gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,placement:1},yAxis:{show:1,hideLine:1,showTicks:1,ticksInside:1,hideLabels:1,title:1,titleStyle:1,style:1,labelsAngle:1,lineColor:1,gridLines:1,gridLinesCentered:1,gridLinesColor:1,gridLinesOpacity:1,gridLinesThickness:1,gridLinesStyle:1,gridStripes:1,gridStripesColor:1,gridStripesColorAlt:1,hideBaseLine:1,baseLineColor:1,baseLineOpacity:1,baseLineThickness:1,baseLineStyle:1,baseLineValue:1,showPercentSymbol:1,showCurrencySymbol:1,showSymbolForAllLabels:1,
showValuesAsWeightsInSeries:1,placement:1,nonZeroInclusive:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,showComparison:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},isStacked:1,showValuesAsWeightInStack:1,lineThickness:1,lineOpacity:1,fillLineMarkers:1,lineMarkersFillOpacity:1,fillLineArea:1,lineAreaOpacity:1,chartIcons:1,floatingIcons:1,showAxisIcons:1,floatingTexts:1,filter:1,noFilter:1,
tooltip:1,noTableView:1},comparisonInfo:1,dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Pie":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,
title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,dataLabelsShowValuePercentSymbol:1,
dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,noSorting:1,filter:1,noFilter:1,tooltip:1,noTableView:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Donut":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,
marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1},minMax:{placement:1,placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,
outlineStyle:1,donutHolePercent:1,donutGap:1,donutArcPercent:1,dataLabels:1,dataLabelsShowLabelUnder:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsDecimals:1,dataLabelsInside:1,dataLabelsStackedInColumns:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsAngle:1,dataLabelsHorizontalAlign:1,dataLabelsMaxWidth:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,noSorting:1,filter:1,noFilter:1,tooltip:1,noTableView:1},dataDrillingPanelInfo:1}})},
"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Ring":function(){define([],function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,
outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,ringBackgroundColor:1,ringBackgroundOpacity:1,dataLabels:1,dataLabelsStyle:1,dataLabelsLabelStyle:1,dataLabelsEnableAltColor:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,sorting:1,noSorting:1,filter:1,noFilter:1,tooltip:1,conditionalStyling:1,noTableView:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Gauge":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},fillOpacity:1,outlineColor:1,outlineOpacity:1,outlineThickness:1,outlineStyle:1,gaugeHolePercent:1,gaugeRangeMin:1,gaugeRangeMax:1,
gaugeGap:1,gaugeStartAngle:1,gaugeArcPercent:1,gaugeLabelPlacement:1,gaugeLabelStyle:1,gaugeShowArrow:1,gaugeArrowLineColor:1,gaugeArrowFillColor:1,gaugeConditionalStylingOthers:1,gaugeConditionalStylingLabel:1,gaugeShowFromToLabels:1,gaugeFromLabelStyle:1,gaugeToLabelStyle:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,chartIcons:1,floatingIcons:1,showChartIcons:1,floatingTexts:1,conditionalStyling:1,tooltip:1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/chartTypes/graphic/_Waffle":function(){define([],
function(){return{isChart:1,type:1,seriesItems:[{label:1,color:1,points:1}],visualProperties:{width:1,height:1,marginTop:1,marginRight:1,marginBottom:1,marginLeft:1,backgroundColor:1,backgroundColorOpacity:1,plotAreaOutlineColor:1,plotAreaOutlineOpacity:1,plotAreaOutlineThickness:1,plotAreaOutlineStyle:1,panelBackgroundColor:1,title:{text:1,align:1,style:1,verticalShift:1},legend:{type:1,series:{placement:1,placementOffset:1,hasBorder:1,labelParts:1,style:1,symbol:1,hideOthers:1},minMax:{placement:1,
placementOffset:1,titleStyle:1,minVariableLabelStyle:1,maxVariableLabelStyle:1}},waffleDirection:1,waffleFlowStyle:1,waffleShowWholePictures:1,waffleStretchIconsToFill:1,waffleRangeMin:1,waffleRangeMax:1,waffleLabelPlacement:1,waffleLabelOffset:1,waffleHideValue:1,waffleHideLabel:1,waffleShowLabelAbove:1,waffleValueStyle:1,waffleLabelStyle:1,waffleColumnSpace:1,waffleRowSpace:1,waffleConditionalStylingOthers:1,waffleConditionalStylingValue:1,waffleConditionalStylingLabel:1,waffleNumIcons:1,waffleNumRows:1,
waffleNumColumns:1,dataLabelsDecimals:1,dataLabelsShowValuePercentSymbol:1,dataLabelsShowValueCurrencySymbol:1,dataLabelsHorizontalAlign:1,dataLabelsVerticalAlign:1,floatingIcons:1,floatingTexts:1,conditionalStyling:1,tooltip:1},dataDrillingPanelInfo:1}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/GaugeLabelPlacements":function(){define([],function(){var t={NONE:"None",INSIDE:"Inside",OUTSIDE:"Outside",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;
return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.NONE}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleLabelPlacements":function(){define([],function(){var t={NONE:"None",TOP:"Top",RIGHT:"Right",BOTTOM:"Bottom",LEFT:"Left",INSIDE:"Inside",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.NONE}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/supportClasses/WaffleDirections":function(){define([],
function(){var t={UP_RIGHT:"Up",DOWN_RIGHT:"Down",RIGHT_UP:"Right",LEFT_UP:"Left",UP_LEFT:"UpLeft",DOWN_LEFT:"DownLeft",RIGHT_DOWN:"RightDown",LEFT_DOWN:"LeftDown",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.DOWN_RIGHT},isLeftRightStartPosition:function(p){return p===t.RIGHT_UP||p===t.LEFT_UP||p===t.RIGHT_DOWN||p===t.LEFT_DOWN},isLeftGrowth:function(p){return p===t.UP_LEFT||p===t.DOWN_LEFT},isDownGrowth:function(p){return p===
t.RIGHT_DOWN||p===t.LEFT_DOWN},toFlowDirectionPosition:function(p){switch(p){case t.UP_RIGHT:return["Right","Down"];case t.DOWN_RIGHT:return["Right","Up"];case t.RIGHT_UP:return["Up","Left"];case t.LEFT_UP:return["Up","Right"];case t.UP_LEFT:return["Left","Down"];case t.DOWN_LEFT:return["Left","Up"];case t.RIGHT_DOWN:return["Down","Left"];case t.LEFT_DOWN:return["Down","Right"]}},fromFlowDirectionPosition:function(p,l){if("Right"===p)return"Down"===l?t.UP_RIGHT:t.DOWN_RIGHT;if("Up"===p)return"Left"===
l?t.RIGHT_UP:t.LEFT_UP;if("Left"===p)return"Down"===l?t.UP_LEFT:t.DOWN_LEFT;if("Down"===p)return"Left"===l?t.RIGHT_DOWN:t.LEFT_DOWN}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/chart/GridChartUtil":function(){define(["dojo/string","../../../charts/utils/ChartTypes","../GridDataUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l,k){function f(a,b,d){a=a.queryCells({rowIndex:b.index,columnIndex:d.index})[0];return a.appliedConditionalStyle&&a.appliedConditionalStyle.backgroundColor}
k=k.geoenrichment.dijit.ReportPlayer.Grid;var c={getSupportedChartTypes:function(a){return c._canViewTableAsChart(a)&&[p.COLUMN,p.BAR,p.LINE,p.VERTICAL_LINE,p.PIE,p.DONUT,p.RING]},getTableRowsColumnsInfos:function(a){var b=a.columns[0].field,d=c._hasBigTitleCell(a)?1:0,e=a.rows[d];if(!e)return null;var g=[],h=[];a.columns.forEach(function(m,r){0!==r&&h.push({label:e[m.field]||t.substitute(k.columnN,[r+1]),id:r+""})});a.rows.forEach(function(m,r){r>d&&g.push({label:m[b]||r+1+"",id:r+""})});return{rowInfos:g,
columnInfos:h}},_canViewTableAsChart:function(a){return a.noChartView||2>a.columns.length||2>a.rows.length?!1:a.getCells().length===a.rows.length*a.columns.length||c._hasBigTitleCell(a)&&a.getCells().length-1===(a.rows.length-1)*a.columns.length?!0:!1},getChartTitle:function(a){return a.getCells()[0].get("value")},_hasBigTitleCell:function(a){var b=a.getCells()[0];return l.getColumnSpan(b)===a.columns.length&&!l.getRowSpan(b)},createChartSeriesItems:function(a,b){return b.seriesInRows?c._buildSeriesInRows(a,
b):c._buildSeriesInColumns(a,b)},_buildSeriesInColumns:function(a,b){var d=[],e=a.columns[0].field,g=c._hasBigTitleCell(a)?1:0;a.columns.forEach(function(h,m){if(0!==m){var r={label:"",points:[]};d.push(r);a.rows.forEach(function(n,q){if(!(q<g))if(q===g)r.label=n[h.field]||t.substitute(k.columnN,[m+1]),r._cIndex=m;else{var u=l.getRenderedValue(a,n,h),w=n.fieldInfos[h.field];r.points.push({label:n[e]||t.substitute(k.rowN,[q+1]),color:w&&w.triggerJson&&f(a,n,h),value:{value:u.numericValue||0,formattedValue:u.formattedValue,
decimals:w&&w.decimals},_rIndex:q})}})}});p.isSingleSeries(b.chartType)&&0<=b.sourceId&&(d=(b=d[b.sourceId])?[b]:[]);c._resolveSeriesNames(d,!1);return d},_buildSeriesInRows:function(a,b){var d=[],e=c._hasBigTitleCell(a)?1:0,g=a.rows[e];a.rows.forEach(function(h,m){if(!(m<e)&&m!==e){var r={label:"",points:[]};d.push(r);a.columns.forEach(function(n,q){if(0===q)r.label=h[n.field]||t.substitute(k.rowN,[m+1]),r._rIndex=m;else{var u=l.getRenderedValue(a,h,n),w=h.fieldInfos[n.field];r.points.push({label:g[n.field]||
q+1+"",color:w&&w.triggerJson&&f(a,h,n),value:{value:u.numericValue||0,formattedValue:u.formattedValue,decimals:w&&w.decimals},_cIndex:q})}})}});p.isSingleSeries(b.chartType)&&0<=b.sourceId&&(d=(b=d[b.sourceId])?[b]:[]);c._resolveSeriesNames(d,!0);return d},_resolveSeriesNames:function(a,b){c._resolveItems(a,b);a.forEach(function(d){c._resolveItems(d.points,!b)})},_resolveItems:function(a,b){var d={};a.forEach(function(g){(d[g.label]=d[g.label]||[]).push(g)});for(var e in d)1<d[e].length&&d[e].forEach(function(g){g.label+=
" ("+t.substitute(k[b?"rowN":"columnN"],[g[b?"_rIndex":"_cIndex"]+1])+")"});a.forEach(function(g){delete g[b?"_rIndex":"_cIndex"]})}};return c})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridHighlightSupport":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-construct","esri/dijit/geoenrichment/utils/MouseUtil"],function(t,p,l,k){return t(null,{canHighlightHeader:!1,canHighlightFirstColumn:!0,_highlightOnHoverHandles:null,_setHighlightRowsOnHoverAttr:function(f){this._setHighlightOnHover(f,
!1)},setCellRowHighlighted:function(f,c){(f=f&&f.domNode&&this.queryCells({rowIndex:f.row.index}))&&f.forEach(function(a){this.setCellHighlighted(a,c)},this)},_setHighlightColumnsOnHoverAttr:function(f){this._setHighlightOnHover(f,!0)},setCellColumnHighlighted:function(f,c){(f=f&&f.domNode&&this.queryCells({columnIndex:f.column.index}))&&f.forEach(function(a){this.setCellHighlighted(a,c)},this)},setCellHighlighted:function(f,c){if(f&&f.domNode)if(!c)f.__highlightScreen&&(f.__highlightScreen.style.display=
"none");else if(this.canHighlightHeader||0!==f.row.index)if(this.canHighlightFirstColumn||0!==f.column.index)f.__highlightScreen=f.__highlightScreen||l.create("div",{"class":"fieldCellHighlightScreen esriGEAbsoluteStretched"},f.domNode,"first"),f.__highlightScreen.style.display=""},_setHighlightOnHover:function(f,c){function a(){var e;b.getCells().forEach(function(g){b.setCellHighlighted(g,!1);k.isMouseOver(g&&g.domNode)&&(e=g)});return e}if(this.domNode){var b=this;this._highlightOnHoverHandles&&
this._highlightOnHoverHandles.forEach(function(e){e.remove()});if(f){this._highlightOnHoverHandles=[];var d;this._highlightOnHoverHandles.push(p(b.domNode,"mouseover",function(){d&&d.remove();d=p(document.body,"mousemove",function(){k.isMouseOver(b.domNode)||(a(),d.remove())})}));this._highlightOnHoverHandles.push(p(b.domNode,"mousemove",function(){var e=a();e&&b[c?"setCellColumnHighlighted":"setCellRowHighlighted"](e,!0)}));this._highlightOnHoverHandles.push(p(b.domNode,"mouseout",function(){a()}));
this._highlightOnHoverHandles.forEach(function(e){b.own(e)})}}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridFilterSupport":function(){define("esri/dijit/geoenrichment/when dojo/_base/declare dojo/dom-construct ./coreUtils/GridFilterUtil ../sections/dynamicSettings/supportClasses/FilterUtil dojo/i18n!esri/nls/jsapi".split(" "),function(t,p,l,k,f,c){c=c.geoenrichment.dijit.ReportPlayer.Grid;return p(null,{presetFilter:null,ignorePresetFilter:!1,_filterStats:null,_filterRanges:null,_numShownElements:null,
_emptyDiv:null,_applyFilterToStoreData:function(){if(!this.ignorePresetFilter){var a=this._getSetRanges();this._emptyDiv&&l.destroy(this._emptyDiv);this._emptyDiv=null;this.mainNode.style.display="";a&&a.length&&(this._numShownElements=k.filterGridData(this,a).numRowsShown,this._numShownElements||(this._emptyDiv=l.create("div",{"class":"esriGEAbsoluteStretched esriGENoDataPlaceHolder"},this.domNode),l.create("div",{"class":"esriGENoDataPlaceHolderLabel",innerHTML:c.noTableData},this._emptyDiv),this.mainNode.style.display=
"none",this._emptyDiv.style.paddingTop=(this.getHeight(!1,!1)-20)/2+"px"))}},_getSetRanges:function(){if(!this.presetFilter||this.presetFilter.ranges&&!this.viewModel.dynamicReportInfo)return this._filterRanges;var a=this.getFilterRanges();return this._filterRanges=a&&a.map(function(b){var d=f.filterData(b.dataArray,1===a.length||this.presetFilter.columnIndex===b.columnIndex?this.presetFilter:{method:f.NONE});return{fieldName:b.fieldName,min:d[0],max:d[d.length-1]}},this)},getFilterRanges:function(){return(this._filterStats=
k.collectStatsForVariables(this))&&this._filterStats.filterRanges.length?this._filterStats.filterRanges:null},setFilterRanges:function(a){var b=this;this.presetFilter=null;this._filterRanges=a;return t(this.refresh(),function(){return b._chartViewInfo&&b.tableToChart(b._chartViewInfo)})},getNumElementsTotal:function(){return this._filterStats&&this._filterStats.numRowsTotal||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()}})})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFilterUtil":function(){define("dojo/string ../../supportClasses/tableJson/TableJsonResizeUtil ../../supportClasses/tableJson/TableJsonUtil ./sorting/GridSortUtil ./sorting/GridRowStyler ./GridDataUtil esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/JsonXmlConverter dojo/i18n!esri/nls/jsapi".split(" "),function(t,p,l,k,f,c,a,b,d){d=d.geoenrichment.dijit.ReportPlayer.Grid;var e={collectStatsForVariables:function(g){var h=
0,m=[],r={};if(2>g.columns.length||3>g.rows.length)return null;var n=e.getFirstFilterableRowIndex(g)-1;g.columns.forEach(function(w,y){var C,D={alias:null,fieldName:w.field,columnIndex:y,min:Infinity,max:-Infinity,decimals:0,dataArray:[]};g._getOriginalData().forEach(function(G,F){G=c.getRenderedValue(g,G,w);F<=n?D.alias=D.alias||F===n&&b.unrichHTML(G.formattedValue):"number"===typeof G.numericValue&&(G=G.numericValue,D.min=Math.min(D.min,G),D.max=Math.max(D.max,G),D.decimals=Math.max(D.decimals,
a.getPlaces(G)),D.dataArray.push(G),h++,C=!0,r[F]=!0)});C&&(D.alias=D.alias||t.substitute(d.columnN,[y+1]),m.push(D),D._cIndex=y)});var q={};m.forEach(function(w){(q[w.alias]=q[w.alias]||[]).push(w)});for(var u in q)1<q[u].length&&q[u].forEach(function(w){w.alias+=" ("+t.substitute(d.columnN,[w._cIndex+1])+")"});m.forEach(function(w){delete w._cIndex});return 1<h&&{filterRanges:m,numVariablesTotal:h,numRowsTotal:Object.keys(r).length}},getFirstFilterableRowIndex:function(g){var h=g._getOriginalData(),
m=g.columns[0].field,r=(m=c.getDataColumnSpan(h[0],m)===g.columns.length&&!c.getDataRowSpan(h[0],m))?1:0;g=g.columns.some(function(n){return c.isVariableLikeFieldCell(c.getFieldInfo({row:h[r],column:n}))});return m?g?1:2:g?0:1},filterGridData:function(g,h){var m=[],r=0,n=0,q={};h.forEach(function(y){q[y.fieldName]=y});g._saveOriginalData();var u=e.getFirstFilterableRowIndex(g)-1;h=k.getSortableDataInfo(g);g.rows.forEach(function(y,C){var D=!0,G;C>u&&g.columns.forEach(function(F){var B=q[F.field];
if(B){var z=c.getRenderedValue(g,y,F);"number"===typeof z.numericValue&&(G=!0,z.numericValue<B.min||z.numericValue>B.max?(delete y.fieldInfos[F.field],delete y[F.field],D=!1):r++)}});D&&(m.push(y),G&&n++)});p.resizeTableJsonToFitHeight({rows:m,columns:g.columns},l.getTableHeight({rows:g.rows}));if(h&&h.styleInfo){var w=m.slice(h.topData.length);f.setAlternatingColors(w,g.columns,h.styleInfo)}g.rows=m;return{numValuesShown:r,numRowsShown:n}}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonResizeUtil":function(){define([],
function(){var t={resizeTableJsonToFitWidth:function(p,l,k){k=k&&k.columnWidths;var f=0;p.columns.forEach(function(a){var b=a.style.width;"string"===typeof b&&-1!==b.indexOf("%")&&(b=Number(b.replace("%",""))/100*l,a.style.width=b);f+=b});p.style.width=l;var c=l/f;p.columns.forEach(function(a){a.style.width*=c});k&&k.length&&(k.forEach(function(a,b){if(b=p.columns[b])b.style.width=a}),t.resizeTableJsonToFitWidth(p,l))},resizeTableJsonToFitHeight:function(p,l){var k=0;p.rows.forEach(function(c){k+=
c.style.height});var f=l/k;p.rows.forEach(function(c){c.style.height*=f})}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridSortUtil":function(){define("dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/ReportPlayer/config ./GridRowStyler ../GridDataUtil ../GridQueryUtil ../gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g){g=g.geoenrichment.dijit.ReportPlayer.Grid;var h={ORDER_ASC:"asc",ORDER_DES:"desc",isGridSortable:function(m){return!(!m.allowSorting||!(m.viewModel.dynamicReportInfo||m.presetSorting&&!m.ignorePresetSorting)||!h.isGridSortableInStructure(m))},isGridSortableInStructure:function(m){return!(m.isEmptyTable()||3>m.rows.length||!h.collectHeaderRowInfoFromData(m))},getSorting:function(m){return(m=m._sortInfo||m.presetSorting)&&{field:m.field,order:m.order}},applySortingToStoreData:function(m){h.isGridSortable(m)&&
h._applySortingToStoreData(m)},setSorting:function(m,r,n){if(h.isGridSortable(m)&&r)if(m.presetSorting=null,m._sortInfo={field:r.field,order:r.order},n&&n.doNotRefresh)h._makeSortable(m);else return m.refresh()},buildSortControls:function(m){h.isGridSortable(m)&&h._makeSortable(m)},getSortRowIndexMapping:function(m){var r=h.getSorting(m);if(!r||!r.order)return null;var n={},q={};m._getOriginalData().forEach(function(u,w){q[u.id]=w});m.rows.forEach(function(u,w){n[w]=q[u.id]});return n},getSortableDataInfo:function(m){function r(q){var u=
[],w=h.collectHeaderRowInfoFromData(m,q);if(!w)return null;q=q?m._getOriginalData().slice():t.clone(m.rows);for(var y=0;y<w.headerRowIndex+1;y++)u.push(q.shift());return{topData:u,sortableData:q}}var n=r();n&&(n.styleInfo=f.getStyleInfo(r(!0).sortableData,m.columns));return n},_applySortingToStoreData:function(m){var r=h.getSorting(m);if(r&&r.order){m._saveOriginalData();var n=h.getSortableDataInfo(m),q=r.field,u=m.columns.filter(function(w){return w.field===q})[0];u&&n.sortableData.sort(function(w,
y){function C(G){G=c.getRenderedValue(m,G,u);return"number"===typeof G.numericValue?G.numericValue:G.formattedValue}w=C(w);var D=C(y);y=r.order===h.ORDER_DES;"number"===typeof w||"number"===typeof D?(w=Number(w),D=Number(D),w=w>D?1:w<D?-1:0):(w=String(w),D=String(D),w=w.localeCompare(D));return y?-w:w});n.styleInfo&&f.setAlternatingColors(n.sortableData,m.columns,n.styleInfo);m.rows=n.topData.concat(n.sortableData)}},collectHeaderRowInfoFromData:function(m,r){function n(y){y=q[y];for(var C=0,D=0;D<
m.columns.length;D++){var G=b.getColumnSpannedFields(m,y,m.columns[D].field);D+=G&&G.length?G.length-1:0;C++}return C}var q=r?m._getOriginalData():m.rows;r=q.length-2;for(var u,w=0;w<r;w++)if(n(w)===m.columns.length){u=w;break}if(0<=u)for(w=u+1;w<q.length;w++){if(n(w)!==m.columns.length)return null}else return null;return{headerRowIndex:u}},_makeSortable:function(m){if(!k.isPlayerOnServer){var r=h._collectHeaderRowInfoWithCells(m);r&&(r.cells.forEach(function(n){if(!n._sortArrow){var q=l.create("div",
{"class":"sortArrow sortArrowHoverIndicator"},n.domNode),u=n.getFullStyle();q.style[u&&"left"===u.horizontalAlign?"right":"left"]="5px";n._sortArrow=q;m.viewModel.dynamicReportInfo&&(p.add(n.domNode,"esriGEClickable"),d.addNoDragClickHandler(n.contentBlock,function(w){m&&m.canSortCellFunc&&!m.canSortCellFunc(n)||h._checkCanSortOnHeaderClick(w)&&h._toggleSortForCell(n)}),d.addNoDragClickHandler(q,function(w){h._toggleSortForCell(n)}))}}),h._updateArrows(m,r))}},_collectHeaderRowInfoWithCells:function(m){for(var r=
m.rows.length-2,n,q,u=0;u<r;u++){var w=a.queryCells(m,{rowIndex:u});if(w&&w.length===m.columns.length){n=w;q=u;break}}if(n)for(u=q+1;u<m.rows.length;u++){if(w=a.queryCells(m,{rowIndex:u}),!w||w.length!==m.columns.length)return null}else return null;return{cells:n,headerRowIndex:q}},_toggleSortForCell:function(m){var r=m.parentGrid,n=h.getSorting(r);n=n&&n.field===m.column.field?n.order:null;r.presetSorting=null;r._sortInfo={field:m.column.field,order:null};n?n===h.ORDER_DES?r._sortInfo.order=h.ORDER_ASC:
n===h.ORDER_ASC&&(r._sortInfo.order=null):r._sortInfo.order=h.ORDER_DES;r.refresh();r.onSortingChanged(h.getSorting(r))},_checkCanSortOnHeaderClick:function(m){if(m&&m.path){if(m.path.some(function(r){return"A"===r.nodeName}))return!1}else if(m&&m.srcElement&&m.srcElement.parentNode&&"A"===m.srcElement.parentNode.nodeName)return!1;return!0},_updateArrows:function(m,r){r.cells.forEach(function(n){var q=n._sortArrow;if(q){p.remove(q,"sortArrowHoverIndicator sortArrowUp sortArrowDown");e.setTooltipToNode(q,
null);var u=h.getSorting(m);u&&u.field===n.column.field?u.order===h.ORDER_ASC?p.add(q,"sortArrowUp"):u.order===h.ORDER_DES?p.add(q,"sortArrowDown"):(e.setTooltipToNode(q,g.sortTable),p.add(q,"sortArrowHoverIndicator")):(e.setTooltipToNode(q,g.sortTable),p.add(q,"sortArrowHoverIndicator"));setTimeout(function(){q.style.top=(n.getHeight()-q.clientHeight)/2+"px"},100)}})}};return h})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/sorting/GridRowStyler":function(){define([],function(){var t=
{_getCellStyle:function(p,l){p.style=p.style||{};p=p.style.fields=p.style.fields||{};return p[l.field]=p[l.field]||{}},_getCellStyleState:function(p){return{backgroundColor:p.backgroundColor,overrideStyle:p.overrideStyle,key:p.backgroundColor+"."+p.overrideStyle}},getStyleInfo:function(p,l){function k(c){var a;return l.some(function(b){b=t._getCellStyle(c,b);b=t._getCellStyleState(b);if(a&&a.key!==b.key)return!0;a=b})?!1:a}t.resetStyling(p,l);var f=[];return p.some(function(c){var a=k(c);if(!a)return!0;
if(f.length)if(1===f.length){if(f[0].key===a.key)return!0;f.push(a)}else{if((a.backgroundColor||a.overrideStyle)&&!f.some(function(b){return b.key===a.key}))return!0}else f.push(a)})?null:{states:f}},setAlternatingColors:function(p,l,k,f){t.resetStyling(p,l);k&&k.states.length&&(1===k.states.length&&"Default"===k.states[0].overrideStyle&&k.states.push({overrideStyle:"AlternatingRow"}),1===k.states.length&&"AlternatingRow"===k.states[0].overrideStyle&&k.states.unshift({overrideStyle:"Default"}),p.forEach(function(c,
a){var b=a%2?k.states[1]:k.states[0];l.forEach(function(d){d=t._getCellStyle(c,d);f&&f.forceOverrideOriginal?d.backgroundColor=b.backgroundColor:(d.__isStyled=!0,d.__originalBackgroundColor=d.backgroundColor,d.backgroundColor=b.backgroundColor,d.__originalOverrideStyle=d.overrideStyle);d.overrideStyle=b.overrideStyle})}))},resetStyling:function(p,l){p.forEach(function(k){l.forEach(function(f){f=t._getCellStyle(k,f);f.__isStyled&&(delete f.__isStyled,f.backgroundColor=f.__originalBackgroundColor,delete f.__originalBackgroundColor,
f.overrideStyle=f.__originalOverrideStyle,delete f.__originalOverrideStyle)})})}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/dynamicSettings/supportClasses/FilterUtil":function(){define(["esri/dijit/geoenrichment/utils/SortUtil"],function(t){var p={ABOVE_AVERAGE:"aboveAverage",BELOW_AVERAGE:"belowAverage",TOP_N:"topN",BOTTOM_N:"bottomN",RANGE:"range",NONE:"none",isSupported:function(l){for(var k in p)if(p[k]===l)return!0;return!1},isNumElementsType:function(l){return l===p.TOP_N||
l===p.BOTTOM_N},isRangeType:function(l){return l===p.RANGE},filterData:function(l,k){function f(){var e=0;l.forEach(function(g){e+=g});return e/l.length}if(!l.length)return[];l=l.slice().sort(t.compareNumeric);switch(k.method){case p.ABOVE_AVERAGE:var c=f();return l.filter(function(e){return e>c});case p.BELOW_AVERAGE:return c=f(),l.filter(function(e){return e<c});case p.TOP_N:var a=k.numElements;if(a>=l.length)return l;var b=l.slice().reverse()[a-1];return l.filter(function(e){return e>=b});case p.BOTTOM_N:a=
k.numElements;if(a>=l.length)return l;var d=l[a-1];return l.filter(function(e){return e<=d});case p.RANGE:return l.filter(function(e){return k.ranges.some(function(g){return p._checkValueMatchesRange(e,g)})});case p.NONE:return l;default:throw Error("Method is not supported!");}},_checkValueMatchesRange:function(l,k){function f(c,a,b){switch(a){case "\x3d":return c===b;case "\x3c":return c<b;case "\x3e":return c>b;case "\x3c\x3d":return c<=b;case "\x3e\x3d":return c>=b}return!1}return k.conditions.length&&
k.conditions.every(function(c){return f(l,c.operator,Number(c.value))})},getRangeStatistics:function(l){var k=-Infinity,f=Infinity;l&&l.forEach(function(c){c.conditions.forEach(function(a){"\x3e"===a.operator||"\x3e\x3d"===a.operator?k=Math.max(k,a.value):f=Math.min(f,a.value)})});return{min:k,max:f}}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_GridSortSupport":function(){define(["dojo/_base/declare","./coreUtils/sorting/GridSortUtil"],function(t,p){return t(null,{presetSorting:null,
ignorePresetSorting:!1,allowSorting:!1,canSortCellFunc:null,_applySortingToStoreData:function(){!this.ignorePresetSorting&&p.applySortingToStoreData(this)},_buildSortControls:function(){p.buildSortControls(this)},getSorting:function(){return p.getSorting(this)},setSorting:function(l,k){return p.setSorting(this,l,k)},getSortRowIndexMapping:function(){return p.getSortRowIndexMapping(this)},onSortingChanged:function(l){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_ResizableColumnsSupport":function(){define(["dojo/_base/declare"],
function(t){return t(null,{_populateFieldForResizableColumns:function(p,l,k){var f=this;0===l.index&&(p.onManualWidthChange=function(){f._setCellWidth(p,p.getWidth());f.onColumnWidthChanged()})},onColumnWidthChanged:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/_DataDrillingSupport":function(){define(["dojo/_base/declare","../dataDrilling/DataDrillingVisualizer","../dataDrilling/DataDrillingButtonsBuilder","./coreUtils/GridDataUtil","../supportClasses/WidgetQueryUtil"],function(t,
p,l,k,f){return t(null,{_ddButtonsBuilder:null,_trySetupDataDrilling:function(c){var a=this;this.viewModel.dynamicReportInfo&&this.viewModel.enableDataDrilling&&!f.isDataDrillingView(this)&&k.getDataDrilling(c)&&(this._ddButtonsBuilder=this._ddButtonsBuilder||new l({parentWidget:this}),this._ddButtonsBuilder.setDataDrillingButtonForTableCell(c,function(){a._showDataDrilling(c)}))},_showDataDrilling:function(c){var a=new p({viewModel:this.viewModel,theme:this.theme,parentWidget:this,domNode:this.domNode,
currentFeatureIndex:this.currentFeatureIndex,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,onClose:function(){a.play(!1,!0)}});a.play(!0,!0,null,k.getDataDrilling(c).sectionJson)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingVisualizer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/query dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/Destroyable esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/animation/AnimationUtil esri/dijit/geoenrichment/utils/mobile/GesturesUtil ../sections/sectionUtils/SectionJsonUtil ../supportClasses/ViewModes ./DataDrillingBackgroundUtil ./DataDrillingExportUtil ../../ReportPlayerState dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y,C,D,G,F,B,z,E){E=E.geoenrichment.dijit.ReportPlayer.Infographics;var I={w:700,h:600,minW:400,minH:500};t=t(h,{viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,currentFeatureAttributes:null,getPreviewValueFunction:null,ddZoomScreenClass:null,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,zIndex:null,domNode:null,ddZoomScreen:null,dataDrillingViewDiv:null,_drillingSections:null,_currentTriggerButtonBox:null,_toDataDrillingScale:1,
constructor:function(L){p.mixin(this,L);this._buildLayout();r.isMobileDevice()&&C.preventDefaultOverflow(this.dataDrillingViewDiv)},_buildLayout:function(){function L(T,X){return d.create("div",{"class":T},X)}var M=this;this.dataDrillingViewDiv=L("dataDrilling_dataDrillingViewDiv esriGEReportPlayer esriGENonSelectable");this.drilledDataViewDiv=L("dataDrilling_drilledDataViewDiv esriGEAbsoluteStretched",this.dataDrillingViewDiv);this.drilledDataViewDivScaler=L("",this.drilledDataViewDiv);this.topToolbar=
L("dataDrilling_topToolbar",this.dataDrillingViewDiv);this.dynamicSettingsToolbarRoot=L("dijitInline dataDrilling_dynamicSettingsToolbarRoot",this.topToolbar);this.exportButton=L("dijitInline dataDrilling_exportButton",this.topToolbar);this.printButton=L("dijitInline dataDrilling_printButton",this.topToolbar);this.backToMainViewButton=L("dijitInline dataDrilling_backToMainViewButton",this.topToolbar);f(this.backToMainViewButton,"click",function(){M.onClose()});var O=this.exportButton,Q=this.printButton;
n.hide([O,Q]);this.viewModel.dynamicReportInfo&&(B.canExportDataDrilling(this.parentWidget)&&(u.setTooltipToNode(O,E.exportInfographic),n.show(O),f(O,"click",function(){B.exportDataDrilling(M)})),B.canPrintDataDrilling(this.parentWidget)&&(u.setTooltipToNode(Q,E.printInfographic),n.show(Q),f(Q,"click",function(){B.printDataDrilling(M)})))},play:function(L,M,O,Q,T){function X(Y){Y?(n.show(aa.dataDrillingViewDiv),aa.dataDrillingViewDiv.parentNode!==document.body&&document.body.appendChild(aa.dataDrillingViewDiv),
aa.zIndex&&g.set(aa.dataDrillingViewDiv,"zIndex",aa.zIndex)):(aa.dataDrillingViewDiv.parentNode===document.body&&document.body.removeChild(aa.dataDrillingViewDiv),n.hide(aa.dataDrillingViewDiv))}function U(){X(L);aa._setZoomScreen(L,!1);aa._setCloseHandlers(L);z.isViewingDataDrillingZoom=L;b[L?"add":"remove"](aa.domNode,"isDrillingData");b.remove(aa.domNode,"isShowingAnimation")}var aa=this;this.viewModel.setBenchmarkDisabled&&this.viewModel.setBenchmarkDisabled(L);this._currentTriggerButtonBox=O?
e.position(O):this._currentTriggerButtonBox;b.add(this.domNode,"isShowingAnimation");if(M)return X(!0),L?(M=this.getDataDrillingPanelDimensions(Q),g.set(this.dataDrillingViewDiv,{width:M.w+"px",height:M.h+"px"})):M={w:this.dataDrillingViewDiv.clientWidth,h:this.dataDrillingViewDiv.clientHeight,scale:this._toDataDrillingScale},this._setZoomScreen(L,!0),L?(O=this._toDataDrillingScale=M.scale||1,M=y.animateResize({duration:200,domNode:this.dataDrillingViewDiv,fromBox:M.animateFromCenter||!this._currentTriggerButtonBox?
{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}:this._currentTriggerButtonBox,startScaleX:.7*O,startScaleY:.7*O,fromOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-M.w*O)/2,y:(document.body.clientHeight-M.h*O)/2+(M.yOffset||0),w:M.w,h:M.h},endScaleX:M.scale,endScaleY:M.scale,onEnd:U}),y.animateFadeIn({domNode:aa.dataDrillingViewDiv,duration:100})):(M=y.animateResize({duration:200,domNode:this.dataDrillingViewDiv,toBox:this._currentTriggerButtonBox,startScaleX:M.scale,startScaleY:M.scale,
endScaleX:.7*(M.scale||1),endScaleY:.7*(M.scale||1),toOffset:{x:"c",y:"c"},onEnd:U}),y.animateFadeOut({domNode:this.dataDrillingViewDiv,duration:100})),M=M&&M.then(function(){return m.delay(100)}),L&&Q&&aa.renderCustomSectionJson({sectionJson:Q,fieldInfo:T,promise:M}),M;U()},_setZoomScreen:function(L,M){var O=this;L!==!!this.ddZoomScreen&&(L?(this.ddZoomScreen=d.create("div",{"class":"esriGEAbsoluteStretched dataDrilling_dataDrillingViewDivScreen"+(r.isMobileDevice()?" mobile":"")},this.dataDrillingViewDiv,
"before"),r.isMobileDevice()&&C.preventDefaultOverflow(this.ddZoomScreen),this.zIndex&&g.set(this.ddZoomScreen,"zIndex",this.zIndex),this.ddZoomScreenClass&&b.add(this.ddZoomScreen,this.ddZoomScreenClass),M&&y.animateFadeIn({domNode:this.ddZoomScreen,duration:100})):(L=function(){O.ddZoomScreen&&d.destroy(O.ddZoomScreen);O.ddZoomScreen=null},M?y.animateFadeOut({domNode:this.ddZoomScreen,duration:100,onEnd:L}):L()))},_clickOutsideHandler:null,_keyboardHandler:null,_setCloseHandlers:function(L){var M=
this;this._clickOutsideHandler&&this._clickOutsideHandler.remove();this._clickOutsideHandler=null;this._keyboardHandler&&this._keyboardHandler.remove();this._keyboardHandler=null;L&&(this.closeZoomedDDWhenClickedOutside&&(this._clickOutsideHandler=f(document.body,r.press,function(){if(!z.isViewingDynamicSettings&&!q.isMouseOver(M.dataDrillingViewDiv,{checkAllChildren:!0})&&!M._drillingSections[0].isMouseOver())M.onClose()})),this.closeZoomedDDOnEsc&&(this._keyboardHandler=f(document.body,"keyup",
function(O){if(O.keyCode===c.ESCAPE)M.onClose()})))},updateView:function(){var L=this.getSection();if(L){var M=this.dataDrillingViewDiv,O=L.getWidth();L=L.getHeight();var Q=M.clientWidth,T=M.clientHeight,X=g.get(M,"left"),U=g.get(M,"top");M.style.width=O+"px";M.style.height=L+"px";M.style.left=X+-(O-Q)/2+"px";M.style.top=U+-(L-T)/2+"px"}},getDataDrillingPanelDimensions:function(L){var M=document.body.clientWidth-(r.isLandscape()?80:40),O=document.body.clientHeight-80;if(L){var Q=D.calcSectionJsonBox(L),
T=L.style&&L.style.width||Q.w||I.w;L=L.style&&L.style.height||Q.h||I.h;Q=Math.min(1,M/T,O/L);return r.isMobileDevice()?{w:T,h:L,scale:Q,yOffset:10,animateFromCenter:!0}:{w:T,h:L,scale:Q,yOffset:O-30>L?0:15}}Q=Math.max(.7,Math.min(1,M/I.minW,O/I.minH));return r.isMobileDevice()?{w:M/Q,h:O/Q,scale:Q,yOffset:10,animateFromCenter:!0}:{w:Math.min(M/Q,I.w),h:Math.min(O/Q,I.h),scale:Q,yOffset:O-30>I.h?0:15}},renderCustomSectionJson:function(L){var M=this;this.destroyContent();var O,Q=this.getDataDrillingPanelSectionParams(L.sectionJson);
this._showDDProgress(!0);return k(L.promise).then(function(){return m.delay(function(){O=M._createDataDrillingSection(Q);O.fitContentNicely();O.domNode.style.opacity="0.01";return k(O.getRenderPromise(),function(){return m.delay(function(){O.domNode.style.opacity="";O.notifyShown();M._showDDProgress(!1);M.onCustomSectionRendered(L)})})})})},getDataDrillingPanelSectionParams:function(L){var M={"class":"infographicContainer_dataDrillingSection"},O=this.getDataDrillingPanelDimensions(L);M.json=L;M.initialWidth=
O.w;M.initialHeight=O.h;M.viewModel=this.viewModel;M.theme=this.theme;M.parentWidget=this;M.isDataDrillingView=!0;M.currentFeatureIndex=this.currentFeatureIndex||0;M.currentFeatureAttributes=this.currentFeatureAttributes;M.getPreviewValueFunction=this.getPreviewValueFunction;M.initialViewMode=G.PREVIEW_VALUES;this.dynamicSettingsToolbarRoot.innerHTML="";M.dynamicSettingsToolbarRoot=this.dynamicSettingsToolbarRoot;return M},_createDataDrillingSection:function(L){var M=this.getDataDrillingPanelDimensions(L.json);
L=this.viewModel.layoutBuilder.createElement("section",L,this.drilledDataViewDivScaler);this._drillingSections.push(L);b[a(".sectionDynamicSettings_settingsButton",this.dataDrillingViewDiv)[0]?"add":"remove"](this.dataDrillingViewDiv,"hasChartSettingsButton");this.setUpDDPanelBackgroundColor();M.scale&&(L.notifyPanelScaleChanged(M.scale),this._applyScaleToDataDrillingToolbarButtons(M.buttonScale||M.scale),l.after(L,"onDynamicSettingsButtonsCreated",function(){this._applyScaleToDataDrillingToolbarButtons(M.buttonScale||
M.scale)}.bind(this)));return L},getSection:function(){return this._drillingSections[0]},_applyScaleToDataDrillingToolbarButtons:function(L){var M=1/L;L=[];var O=a(".sectionDynamicSettings_buttonBar",this.dynamicSettingsToolbarRoot)[0];if(O)for(var Q=0;Q<O.children.length;Q++)L.push(O.children[Q]);L.push(this.exportButton);L.push(this.printButton);L.push(this.backToMainViewButton);L.forEach(function(T,X){T.style.transformOrigin="100% 100%";T.style.transform="scale("+M+")";T.style["webkit-transform"]=
"scale("+M+")";0<X&&(X=26*M,X+=32*(M-1),T.style.marginLeft=X+"px")})},setUpDDPanelBackgroundColor:function(){F.setUpDDPanelBackgroundColor({viewModel:this.viewModel,theme:this.theme,infographicJson:this.getInfographicJson(),node:this.dataDrillingViewDiv})},getInfographicJson:function(){return null},_showDDProgress:function(L){w[L?"showProgress":"removeProgress"](this.dataDrillingViewDiv);this.topToolbar&&(this.topToolbar.style.opacity=L?"0.001":"")},destroyContent:function(){this._drillingSections=
this._drillingSections||[];this._drillingSections.forEach(function(L){L.destroy()});this._drillingSections.length=0;this.drilledDataViewDivScaler.innerHTML=""},onClose:function(){},onCustomSectionRendered:function(L){},destroy:function(){this.destroyContent();this._setCloseHandlers(!1)}});t.DATA_DRILLING_BOX_ZOOM=I;return t})},"esri/dijit/geoenrichment/utils/mobile/GesturesUtil":function(){define(["dojo/on","../DnDUtil","../animation/Animator","dojo/domReady!"],function(t,p,l){var k={},f=window._dev_emulateMultiTouch,
c=window._dev_logTouch,a={_animation:null,_measures:null,start:function(){this._animation&&this._animation.stop();this._animation=null;this._measures=[];this._addMeasurePoint(0,0)},_addMeasurePoint:function(b,d){for(;9<this._measures.length;)this._measures.shift();var e={time:(new Date).getTime(),dx:b,dy:d},g=this._measures[this._measures.length-1];this._measures.push(e);g&&(e.vx=b/(e.time-g.time),e.vy=d/(e.time-g.time))},notifyScrolled:function(b,d){this._addMeasurePoint(b,d)},flyScroll:function(b){if(!(2>
this._measures.length)){var d=(new Date).getTime(),e=0,g=0,h=0;this._measures.forEach(function(n,q){"number"!==typeof n.vx||100<d-n.time||(e+=n.vx,g+=n.vy,h++)});if(h){e/=h;g/=h;var m=e,r=g;this._animation=l.animateProperty({duration:750,properties:{p:{start:0,end:1,easing:"sineOut"}},progressFunction:function(n,q,u){n=(new Date).getTime();q=n-d;d=n;b(m*q,r*q);m=e*(1-u);r=g*(1-u)}})}}}};k.preventDefaultSiteBehavior=function(){document.body.style.touchAction="none"};k.preventDefaultOverflow=function(b){return b&&
t(b,"touchmove",function(d){d.preventDefault()})};k.preventDoubleTapZoom=function(b){var d=(new Date).getTime();var e=t(b,"touchstart",function(g){var h=(new Date).getTime();300>h-d&&g.preventDefault();d=h});return{remove:function(){e.remove()}}};k.enableGesturesOnNode=function(b,d){function e(D,G){if(d.logDiv){if(1E3<d.logDiv.innerHTML.length||G)d.logDiv.innerHTML="";d.logDiv.innerHTML+=D+"\x3cbr/\x3e"}}function g(D,G){var F=D.x-G.x;D=D.y-G.y;return Math.sqrt(F*F+D*D)}function h(D){d.enableFlyingScroll&&
a.start();for(var G=0;G<D.changedTouches.length;G++){var F=D.changedTouches[G];n[F.identifier]={x:F.clientX,y:F.clientY}}e("Num touches "+D.touches.length);2===D.touches.length&&(d.canZoom&&!d.canZoom(D)?e("Can't zoom"):(G=n[D.touches[0].identifier],D=n[D.touches[1].identifier],G&&D?(q=g(G,D),e("Start distance: "+Math.round(q))):n={}))}function m(D){if(2===D.touches.length){D.preventDefault();var G=D.touches[0];D=D.touches[1];var F=n[G.identifier],B=n[D.identifier];if(F&&B&&q){if(F.x=G.clientX,F.y=
G.clientY,B.x=D.clientX,B.y=D.clientY,G=g(F,B),F=Math.abs(q-G),e("Diff: "+Math.round(F),!0),F>u){e("Zoom");if(q<G)d.onZoomIn();else d.onZoomOut();q=G}}else n={}}else if(1===D.touches.length)if(d.canScroll&&!d.canScroll(D)||D.preventDefault(),G=D.touches[0],F=n[G.identifier]){B=F.x-G.clientX;var z=F.y-G.clientY;F.x=G.clientX;F.y=G.clientY;if(!d.canScroll||d.canScroll(D))d.onScrollChanged(B,z),d.enableFlyingScroll&&a.notifyScrolled(B,z)}else n={}}function r(D){for(var G=0;G<D.changedTouches.length;G++)delete n[D.changedTouches[G].identifier];
q=0;e("Num touches "+D.touches.length,!D.touches.length);d.enableFlyingScroll&&a.flyScroll(d.onScrollChanged)}if(b){k.preventDefaultSiteBehavior();var n={},q=0,u=d.zoomTolerance||50;if(f)k.dev_addMultiTouchEmulation(b,h,m,r);else var w=t(b,"touchstart",h),y=t(b,"touchmove",m),C=t(b,"touchend",r);c&&(d.logDiv=k.dev_createLogLabel());return{remove:function(){n=null;w.remove();y.remove();C.remove()}}}};k.dev_addMultiTouchEmulation=function(b,d,e,g){function h(n,q,u){q={type:n,clientX:u&&u.clientX,clientY:u&&
u.clientY,changedTouches:[q.getTouch()],touches:[],preventDefault:function(){u&&u.preventDefault()}};m.isOn&&q.touches.push(m.getTouch());r.isOn&&q.touches.push(r.getTouch());switch(n){case "touchstart":d(q);break;case "touchmove":e(q);break;case "touchend":g(q)}}b=function(n,q,u){var w=this;w.x=q;w.y=u;w.isOn=!1;w.node=document.createElement("div");w.node.style.width="50px";w.node.style.height="50px";w.node.style.borderRadius="50%";w.node.style.cursor="pointer";w.node.style.position="absolute";w.node.style.zIndex=
"10000";document.body.appendChild(w.node);p.addNoDragClickHandler(w.node,function(){w.isOn=!w.isOn;w._updateStateColor();h(w.isOn?"touchstart":"touchend",w,null)},{tolerance:5});var y,C;t(w.node,"touchstart",function(D){y=D.clientX;C=D.clientY;t.once(document.body,"touchend",function(){y=void 0})});t(w.node,"touchmove",function(D){if(void 0!==y){D.preventDefault();var G=D.clientX-y,F=D.clientY-C;y=D.clientX;C=D.clientY;w.x+=G;w.y+=F;w._updateNodePosition();w.isOn&&h("touchmove",w,D)}});w._updateStateColor=
function(){w.node.style.backgroundColor=w.isOn?"#00FF00":"#CCCCCC"};w._updateNodePosition=function(){w.node.style.left=w.x-w.node.clientWidth/2+"px";w.node.style.top=w.y-w.node.clientHeight/2+"px"};w._updateStateColor();w._updateNodePosition();w.getTouch=function(){return{identifier:n,clientX:w.x,clientY:w.y}}};var m=new b("touch_0",100,100),r=new b("touch_1",200,200)};k.dev_createLogLabel=function(){var b=document.createElement("div");document.body.appendChild(b);var d=b.style;d.position="absolute";
d.zIndex="10000";d.right="0px";d.bottom="0px";d.width="150px";d.height="100px";d.backgroundColor="gray";d.color="white";d.overflow="auto";d.padding="3px";return b};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes":function(){define([],function(){return{EDIT:"edit",PREVIEW:"preview",PREVIEW_VALUES:"previewValues"}})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingBackgroundUtil":function(){define(["dojo/dom-class","esri/dijit/geoenrichment/utils/ColorUtil",
"../themes/BackgroundThemeUtil"],function(t,p,l){return{setUpDDPanelBackgroundColor:function(k){var f=k.viewModel.getStaticInfographicDefaultStyles(k.theme),c=k.viewModel.getDocumentDefaultStyles(k.theme);[k.infographicJson&&k.infographicJson.style.backgroundColor,f&&f.backgroundColor,c.backgroundColor].some(function(a){if(a&&!p.isTransparent(a))return k.node.style.backgroundColor=a,t.remove(k.node,"playerThemeDark playerThemeLight"),t.add(k.node,p.isLightColor(a)?"playerThemeLight":"playerThemeDark"),
!0})||l.renderThemeBackgroundImage(k.node,c.backgroundImage)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/BackgroundThemeUtil":function(){define(["dojo/dom-class","dojo/dom-construct","dojo/dom-style","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions"],function(t,p,l,k){var f={hasBackgroundImage:function(c){return c&&!!c.__themeBgImage},getBackgroundImage:function(c){return c&&c.__themeBgImage},removeBackgroundImage:function(c){c&&(c.__themeBgImage&&p.destroy(c.__themeBgImage),
delete c.__themeBgImage)},renderThemeBackgroundImage:function(c,a,b,d){f.removeBackgroundImage(c);if(!c||!a||!a.data)return!1;d=p.create("div",{"class":"esriGEAbsoluteStretched "+(d&&d.nodeClass||""),style:"overflow: hidden"},c,"first");c.__themeBgImage=d;var e=p.create("div",{style:"background-repeat: no-repeat; background-size: cover;"},d);e.style.backgroundImage="url("+a.data+")";0<a.opacity&&1>a.opacity&&(e.style.opacity=a.opacity);e.style.backgroundPosition=a.position||"center";e.style.backgroundRepeat=
a.repeat?"repeat":"no-repeat";e.style.backgroundSize=a.scale?a.repeat?"contain":"cover":a.size||"auto";f.updateThemeBackgroundImage(c,b);return d},updateThemeBackgroundImage:function(c,a){if(f.hasBackgroundImage(c)&&(c=c.__themeBgImage.children[0]))if(a&&a.documentOptions&&a.pos){var b=k.getPageBox(a.documentOptions),d=a.zoom||1;l.set(c,{position:"absolute",width:b.w+"px",height:b.h+"px",left:-a.pos.x/d+"px",top:-a.pos.y/d+"px"});t.remove(c,"esriGEAbsoluteStretched")}else t.add(c,"esriGEAbsoluteStretched")}};
return f})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingExportUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-construct esri/dijit/geoenrichment/ReportPlayer/ReportPlayer esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes esri/dijit/geoenrichment/ReportPlayer/PlayerThemes esri/dijit/geoenrichment/ReportPlayer/DataProviderGE esri/dijit/geoenrichment/ReportPlayer/PlayerCommands ../reportContainerGrid/utils/PageQueryUtil ../supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/WaitingUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m){var r={reportPlayerClass:k,dataProviderClass:a,initPlayer:function(){var u=l.create("div",{"class":"esriGEAbsoluteStretched esriGEOffscreen"},document.body),w=new r.dataProviderClass;w.registerCommand(b.PRINT);w.registerCommand(b.IMAGE);w=(new r.reportPlayerClass({theme:c.DARK,dataProvider:w,resizeMode:f.FIT_WINDOW,isDataDrillingPlayer:!0})).placeAt(u);w.__playerDiv=u;return w},destroyPlayer:function(u){u.destroy();l.destroy(u.__playerDiv)}},n={},q=!1;n.setReportPlayerClass=
function(u){r.reportPlayerClass=u};n.setDataProviderClass=function(u){r.dataProviderClass=u};n.canPrintDataDrilling=function(u){return h.isMobileDevice()?!1:!!d.getParentReportPlayer(u).dataProvider.getCommandById(b.PRINT)};n.canExportDataDrilling=function(u){return h.isMobileDevice()?!1:(u=d.getParentReportPlayer(u).dataProvider.getCommandById(b.IMAGE))&&u.isBrowserSupported()};n.printDataDrilling=function(u){n._createTemporaryPlayerAndExport(u,!0)};n.exportDataDrilling=function(u){n._createTemporaryPlayerAndExport(u,
!1)};n._createTemporaryPlayerAndExport=function(u,w){if(!q){q=!0;var y,C=d.getParentReportPlayer(u.parentWidget),D=C.getReportData();C=C.dataProvider.reportDataToSingleAreaReportData(D,{currentFeatureIndex:u.currentFeatureIndex||0,reportTitle:C.getReportTitle(),templateJson:function(){var F=u.getSection().toJson(),B=u.getDataDrillingPanelDimensions(F);B=e.createBlankTemplate({elementWidth:B.w,elementHeight:B.h,layout:{numRows:1,numColumns:1}});B.theme=t.clone(u.theme);delete B.theme.document.backgroundImage;
y=u.getSection().getVisualState();F=g.createFieldInfoFromSection(F);var z=B.sectionsTables[0];z.rows[0].fieldInfos[z.columns[0].field]=F;return B}()});var G=r.initPlayer();G.onWaitingShown=function(F){m.showProgressPromise(u.dataDrillingViewDiv,F)};G.onCommandSettingsShown=function(F){n.unitTesting_onCommandSettingsShown()};p(G.setReportData(C,{waitUntilAllContentIsReady:!0,disableAnimation:!0}),function(){var F={pages:[{cells:[y]}]},B=G.getCurrentReportContainer().getLayoutCells()[0].content;B.getPreviewValueFunction=
u.getPreviewValueFunction;return p(B.refresh()).then(function(){return p(G.onWaitingShown(G.getCurrentReportContainer().setVisualState(F)),function(){return p(G[w?"executePrint":"executeExport"](),function(z){r.destroyPlayer(G);n.unitTesting_onExportCommandFinished(z)})})})})["finally"](function(){q=!1})}};n.unitTesting_onCommandSettingsShown=function(){};n.unitTesting_onExportCommandFinished=function(u){};return n})},"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/utils/PageQueryUtil":function(){define(["dojo/dom-geometry",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/DomUtil"],function(t,p,l){var k={getElementPageInfo:function(f){function c(y,C){y=t.position(y.domNode);C=t.position(C.domNode);e.x+=y.x-C.x;e.y+=y.y-C.y}function a(y){n||(y=y.getFullStyle().backgroundColor)&&!p.isTransparent(y)&&(n=y)}function b(y){if(y)if(y.parentGridCell&&a(y.parentGridCell),y.parentElementInPageInfo)y=y.parentElementInPageInfo,d=y.reportContainer,n=n||y.panelBackgroundColor,e.x+=y.pos.x,e.y+=y.pos.y,g=
y.pageGrid,h=y.gridContainer,m=y.pageIndex,r=y.layoutCell,q=y.isBackgroundFloatingPanel,u=y.isForegroundFloatingPanel,w=y.panelIndex;else{var C=y.parentWidget;C&&C.isReportContainerGrid?(d=C,y=k.getNodePositionOnPage(d,y.domNode),C=k.getNodePositionOnPage(d,f.domNode),y&&C&&(e.x+=y.x,e.y+=y.y,g=y.pageGrid,h=y.gridContainer,m=y.pageIndex,r=C.layoutCell,q=C.isBackgroundFloatingPanel,u=C.isForegroundFloatingPanel,w=C.panelIndex)):C&&(c(y,C),b(C))}}if(f&&f.parentWidget&&(!f.viewModel||f.viewModel.isGraphicStyle())){var d,
e={x:0,y:0},g,h,m,r,n,q,u,w;f.isValueField&&f.parentGrid&&f.row&&f.column?(a(f),c(f,f.parentGrid),b(f.parentGrid)):b(f);return d&&r?{reportContainer:d,documentOptions:d.documentOptions,pos:e,zoom:d.getZoomInfo().scale,pageGrid:g,gridContainer:h,pageIndex:m,layoutCell:r,panelBackgroundColor:n,isFloatingPanel:q||u,isBackgroundFloatingPanel:q,isForegroundFloatingPanel:u,panelIndex:w}:null}},getReportContainerPageNode:function(f){for(;f;){if(f.reportContainerPageNode)return f.reportContainerPageNode;
f=f.parentWidget||f.parentGrid}return null},getParentReportContainerGrid:function(f){if(f&&f.isReportContainerGrid)return f;for(;f;){if(f.parentWidget&&f.parentWidget.isReportContainerGrid)return f.parentWidget;if(f.parentElementInPageInfo)return f.parentElementInPageInfo.reportContainer;f=f.parentWidget||f.parentGrid}return null},getParentReportPlayer:function(f){if(f&&f.isPlayer)return f;for(;f;){if(f.parentWidget&&f.parentWidget.isPlayer)return f.parentWidget;f=f.parentWidget||f.parentGrid}return null},
getNodePositionOnPage:function(f,c){if(!c)return null;var a,b=-1,d,e,g,h;f.getGrids().some(function(n,q){if(n.domNode===c||l.isChildOf(c,n.domNode))return a=n,d=q,n.getCells().some(function(u,w){if(u.domNode===c||l.isChildOf(c,u.domNode))return b=w,h=u,!0}),-1===b&&n.getBackgroundFloatingCells().some(function(u,w){if(u.domNode===c||l.isChildOf(c,u.domNode))return b=w,e=!0,h=u,!0}),-1===b&&n.getForegroundFloatingCells().some(function(u,w){if(u.domNode===c||l.isChildOf(c,u.domNode))return b=w,g=!0,
h=u,!0}),!0});if(!a)return null;f=f.getGridContainer(a);var m=t.position(f),r=t.position(c);return{x:r.x-m.x,y:r.y-m.y,pageGrid:a,gridContainer:f,pageIndex:d,layoutCell:h,isFloatingPanel:e||g,isBackgroundFloatingPanel:e,isForegroundFloatingPanel:g,panelIndex:b}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/dataDrilling/DataDrillingButtonsBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DnDUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e){e=e.geoenrichment.dijit.ReportPlayer.Infographics;return t(null,{parentWidget:null,_ddButtons:null,_shownButtons:null,constructor:function(g){p.mixin(this,g)},setDataDrillingButtonForSection:function(g,h){this._setDataDrillingButton({widget:g,getBox:function(){var m=[];g.getTrueTables().forEach(function(r){m.push(r.domNode)});return b.getNodesBox(m,{ignoreTransformation:!0,originNode:g.domNode})},onClick:h})},setDataDrillingButtonForTableCell:function(g,h){this._setDataDrillingButton({widget:g,
getBox:function(){return{x:0,y:0,w:g.domNode.clientWidth,h:g.domNode.clientHeight}},onClick:h})},_setDataDrillingButton:function(g){function h(){var y=k.create("div",{"class":"dataDrilling_drillDataButton"},m.domNode);k.create("div",{"class":"dijitInline dataDrilling_drillDataButtonIcon esriGESpaceAfterBig"},y);var C=k.create("div",{"class":"dijitInline dataDrilling_drillDataButtonLabel",innerHTML:e.drillForMoreData},y),D=g.getBox();f.set(y,{left:D.x+"px",top:D.y+"px",width:D.w+"px",height:D.h+"px",
lineHeight:D.h+"px"});var G=y.clientWidth;G>D.w&&f.set(y,"left",D.x-(G-D.w)/2+"px");C.style.maxWidth=G-50+"px";C.style.whiteSpace="normal";n._ddButtons.push({destroy:function(){k.destroy(y)}});return y}var m=g.widget,r=g.onClick,n=this;this._ddButtons=this._ddButtons||[];var q;if(c.isMobileDevice()){var u;this._shownButtons=this._shownButtons||[];var w=function(y){q.style.opacity=y?1:0;n._shownButtons.splice(n._shownButtons.indexOf(q),1);y&&n._shownButtons.push(q);u&&u.remove();y&&n._syncButtonWithScale(q)};
a.addNoDragClickHandler(this.parentWidget.domNode,function(){setTimeout(function(){!n._shownButtons.length&&d.isMouseOver(m.domNode,{checkAllChildren:!0})&&(q=q||h(),w(!0),setTimeout(function(){u=a.addNoDragClickHandler(q,function(){w(!1);r(q)});l.once(document.body,"touchend",function(){w(!1)})}))})},{detectLongPress:!0,longPressTimeout:750,ignoreReleaseIfLongPressHappened:!0,longPressCallback:function(){d.isMouseOver(m.domNode,{checkAllChildren:!0})&&(q=q||h(),w(!0),r(q),setTimeout(function(){w(!1)}))}})}else m.own(l.once(this.parentWidget.domNode,
"mouseover",function(){q=q||h();n._syncButtonWithScale(q);l(q,"click",function(){r(q)})}))},_panelScale:null,notifyPanelScaleChanged:function(g){this._panelScale=g;this._ddButtons&&this._ddButtons.forEach(this._syncButtonWithScale.bind(this))},_syncButtonWithScale:function(g){g&&g.style&&(g.style.fontSize=13/(this._panelScale||1)+"px")},destroyButtons:function(){this._ddButtons=this._ddButtons||[];this._ddButtons.forEach(function(g){g.destroy()});this._ddButtons.length=0}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/WidgetQueryUtil":function(){define([],
function(){var t={checkParentWidgets:function(p,l,k){for(var f=!1;p;){f=l(p)||f;if(k&&f)break;p=p.parentWidget}return f},isDataDrillingView:function(p){return t.checkParentWidgets(p,function(l){return l.isDataDrillingView},!0)},getReportContainerGrid:function(p){return t.findParentWidget(p,function(l){return l.isReportContainerGrid&&!l.isTempAddContainer})},findParentWidget:function(p,l){var k;t.checkParentWidgets(p,function(f){if(l(f))return k=f,!0},!0);return k}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/ValueField":function(){define("dojo/_base/Color dojo/_base/declare dojo/_base/lang dojo/on dojo/sniff dojo/dom-construct dojo/dom-class dojo/dom-geometry dijit/Destroyable ./supportClasses/TextRenderer ./supportClasses/TextEditor ./supportClasses/NumberAnimator esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q){function u(F){F.domNode=c.toDom("\x3cdiv class\x3d'esriGEAdjustableGridValueField'\x3e\x3cdiv class\x3d'valueField_contentBlock'\x3e\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");F.contentBlock=F.domNode.children[0];F.valueContainer=F.contentBlock.children[0];F.valueLabel=F.valueContainer.children[0]}var w=p(d,{_buildLayoutFunc:null,_parentNode:null,constructor:function(F,
B){l.mixin(this,F);this._parentNode=B;this.postCreate()},postCreate:function(){this._buildLayoutFunc(this);this["class"]&&a.add(this.domNode,this["class"]);this._parentNode&&this.placeAt(this._parentNode);this.value&&this.set("value",this.value)},get:function(F){return"value"===F?this._getValueAttr?this._getValueAttr():this.value:this[F]},set:function(F,B){"value"===F?this._setValueAttr?this._setValueAttr(B):this.value=B:this[F]=B},placeAt:function(F){c.place(this.domNode,F);return this},on:function(F,
B){this.own(k(this.domNode,F,B))},isLeftToRight:function(){return b.isBodyLtr(document)},destroy:function(){c.destroy(this.domNode);this._buildLayoutFunc=this.domNode=this._parentNode=null}});d={width:1,height:1,angle:1,opacity:1};var y={color:1,fontSize:1,lineHeight:1,fontFamily:1,fontWeight:1,fontStyle:1,textDecoration:1,backgroundColor:1,verticalAlign:1,horizontalAlign:1,horizontalPadding:1,verticalPadding:1,overrideStyle:1},C={borderTopColor:1,borderTopWidth:1,borderTopOpacity:1,borderTopStyle:1,
borderRightColor:1,borderRightWidth:1,borderRightOpacity:1,borderRightStyle:1,borderBottomColor:1,borderBottomWidth:1,borderBottomOpacity:1,borderBottomStyle:1,borderLeftColor:1,borderLeftWidth:1,borderLeftOpacity:1,borderLeftStyle:1},D=l.mixin({},d,y,C),G={verticalAlign:"top",horizontalAlign:"left",horizontalPadding:0,verticalPadding:0,angle:0,opacity:1};p=p(w,{isValueField:!0,DEFAULT_STYLES:G,viewModel:null,trimTextIfOverflows:!1,autoDetectUrl:!1,valueLabel:null,fieldStyle:null,defaultBorderStyle:null,
_borderStyle:null,content:null,postCreate:function(){this._buildLayoutFunc=this._buildLayoutFunc||u;this.inherited(arguments);this.setStyle(this.fieldStyle);this.setContent(this.content)},_destroyExistingContent:function(){this.content&&(this.content.destroy&&this.content.destroy(),this.contentContainer&&(this.contentContainer.innerHTML=""),this.content=null)},getContentContainerNode:function(F){F||this._destroyExistingContent();this.contentContainer||(this.contentContainer=c.create("div",{"class":"valueField_valueBlock"},
this.contentBlock,"first"));m.show(this.contentContainer);return this.contentContainer},setContent:function(F){this._destroyExistingContent();if(this.content=F)this.getContentContainerNode(!0),(F=this.content.domNode||this.content)&&F.parentNode!==this.contentContainer&&c.place(F,this.contentContainer);this.content?(c.destroy(this.valueContainer),this.valueContainer=null):(c.destroy(this.contentContainer),this.contentContainer=null,this._restoreValueContainer()?(F=this._value,this._value=null,this.set("value",
F)):this.set("value",this._value))},_restoreValueContainer:function(){if(this.valueContainer)return!1;this.valueContainer=c.toDom("\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e");this.contentBlock.appendChild(this.valueContainer);this.valueLabel=this.valueContainer.children[0];this.setStyle(this.fieldStyle);return!0},_value:null,_getValueAttr:function(){return this._value},_setValueAttr:function(F){this._value!==F&&(this._value=F,
this._setValueLabelText(F))},_setValueLabelText:function(F){this.valueLabel&&(e.renderText(this,F,this._benchmarkInfo),this.parentGrid&&this.parentGrid.viewModel&&this.parentGrid.viewModel.isReportPlayerViewModel&&(this.row.fieldInfos&&this.row.fieldInfos[this.column.field]||!this.row.editInfo||!this.row.editInfo[this.column.field]||g.setTextEditing(this)));return F},hasOverflowText:function(){return!this.content&&e.hasOverflowText(this)},_benchmarkInfo:null,setBenchmarkInfo:function(F){this._benchmarkInfo=
F},currentNumberValue:null,numberFormatFunction:null,_canAnimate:!1,setNumberValue:function(F,B,z){this.currentNumberValue=F;this.numberFormatFunction=B;this._canAnimate=z&&this.viewModel.isAnimationAllowed();this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},notifyShown:function(){this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},_animateNumber:function(){h.animateNumber(this,this.currentNumberValue,this.numberFormatFunction)},
appliedConditionalStyle:null,getFullStyle:function(){return l.mixin({},G,this.fieldStyle)},setStyle:function(F){F=F||{};this.fieldStyle=l.mixin(this.fieldStyle||{},F);"number"===typeof this.fieldStyle.opacity&&(this.fieldStyle.opacity=Math.max(0,Math.min(1,this.fieldStyle.opacity)));F=void 0!==F.width||void 0!==F.height;this._applyAlignAndPaddingStyles();this._applyTransformStyles();this._applyTextStyleToDom(this.domNode);(F=this._setBorderStyle()||F)&&this._refreshLayout()},_applyAlignAndPaddingStyles:function(){this.domNode.style.textAlign=
this.fieldStyle.horizontalAlign||G.horizontalAlign;var F=this.fieldStyle.verticalAlign||G.verticalAlign;this.valueLabel&&(this.valueLabel.style.paddingLeft="",this.valueLabel.style.paddingRight="",this.valueLabel.style.paddingTop="","number"===typeof this.fieldStyle.horizontalPadding&&(this.valueLabel.style.paddingLeft=this.fieldStyle.horizontalPadding+"px",this._allowRightPadding()&&(this.valueLabel.style.paddingRight=this.fieldStyle.horizontalPadding+"px")),"number"===typeof this.fieldStyle.verticalPadding&&
"top"===F&&(this.valueLabel.style.paddingTop=this.fieldStyle.verticalPadding+"px"));this.valueContainer&&(this.valueContainer.style.verticalAlign=F);this.contentContainer&&(this.contentContainer.style.verticalAlign=F);this.domNode.style.opacity="number"===typeof this.fieldStyle.opacity?this.fieldStyle.opacity:""},_allowRightPadding:function(){return this.viewModel&&this.viewModel.isGraphicStyle()},_applyTransformStyles:function(){if(this.valueContainer){var F=f("webkit")?"webkitTransform":"transform";
this.valueContainer.style[F]=0!==(Number(this.fieldStyle.angle)||0)?"rotate("+this.fieldStyle.angle+"deg)":""}},_supportedTextStyles:"color fontSize lineHeight fontFamily fontWeight fontStyle textDecoration backgroundColor".split(" "),_applyTextStyleToDom:function(F){var B=this;this._supportedTextStyles.forEach(function(z){if(B.fieldStyle[z]){var E=B.fieldStyle[z]+("fontSize"===z||"lineHeight"===z?"px":"");"backgroundColor"===z?B._setNodeBackgroundColor(F,E):F.style[z]=E}else F.style[z]=""})},_setNodeBackgroundColor:function(F,
B){var z=F===this.domNode&&this.fieldStyle.angle?this.valueContainer:F;z&&(z.style.backgroundColor=B);F===this.domNode&&this.fieldStyle.angle&&(this.domNode.style.backgroundColor="transparent")},clearTextStyle:function(){for(var F in y)delete this.fieldStyle[F];this.setStyle()},clearLineHeight:function(){delete this.fieldStyle.lineHeight;this.setStyle()},_currentBorderKey:null,_SIDES:["Top","Right","Bottom","Left"],setDefaultBorderStyle:function(F){this.defaultBorderStyle=F;this._setBorderStyle()&&
this._refreshLayout()},clearBorder:function(){for(var F in C)delete this.fieldStyle[F];this.setStyle()},_setBorderStyle:function(){var F=l.mixin({},this.defaultBorderStyle,this.fieldStyle);this._borderStyle=F;var B=this._getBorderKey(F);if(this._currentBorderKey===B)return!1;this._currentBorderKey=B;this.domNode.style.border="";this._SIDES.forEach(function(z){var E="none",I=F["border"+z+"Color"],L=F["border"+z+"Width"],M=F["border"+z+"Style"]||"solid",O=F["border"+z+"Opacity"];I&&0<L&&0!==O&&"none"!==
M&&(1>O&&(I=new t(I),I.a=O,I=I.toCss(!0)),E=L+"px "+M+" "+I);this.domNode.style["border"+z]=E},this);return!0},_getBorderKey:function(F){var B="",z;for(z in C)B+=F[z]+"_";return B},_getLeftBorder:function(){return this._borderStyle?this._borderStyle.borderLeftWidth||0:0},_getLeftPadding:function(){return this.fieldStyle.horizontalPadding||0},_getRightBorder:function(){return this._borderStyle?this._borderStyle.borderRightWidth||0:0},_getRightPadding:function(){return this._allowRightPadding()?this.fieldStyle.horizontalPadding||
0:0},_getTopBorder:function(){return this._borderStyle?this._borderStyle.borderTopWidth||0:0},_getTopPadding:function(){return this.fieldStyle.verticalPadding||0},_getBottomBorder:function(){return this._borderStyle?this._borderStyle.borderBottomWidth||0:0},_getBottomPadding:function(){return this.fieldStyle.verticalPadding||0},getWidth:function(){return this.fieldStyle.width||0},getContentWidth:function(){return this.getWidth()-this._getLeftBorder()-this._getRightBorder()-this._getLeftPadding()-
this._getRightPadding()},setWidth:function(F){this.contentBlock&&this.domNode&&(F=Math.max(0,F),this.fieldStyle.width=F,this.domNode.style.width=F+"px",F=this.getWidth()-this._getLeftBorder()-this._getRightBorder(),this.contentBlock.style.width=F+"px",this.valueContainer&&(this.valueContainer.style.width=F+"px"),this.valueLabel&&(this.valueLabel.style.width=F-this._getLeftPadding()-this._getRightPadding()+"px"),this.contentContainer&&(this.contentContainer.style.width=F+"px"),e.renderText(this),this.onWidthChanged(),
this.onSizeChanged())},getHeight:function(){return this.fieldStyle.height||0},getContentHeight:function(){return this.getHeight()-this._getTopBorder()-this._getBottomBorder()-this._getTopPadding()-this._getBottomPadding()},setHeight:function(F){this.contentBlock&&this.domNode&&(F=Math.max(0,F),void 0!==this._minHeight&&(F=Math.max(F,this._minHeight)),this.fieldStyle.height=F,this.domNode.style.height=F+"px",F=this.getHeight()-this._getTopBorder()-this._getBottomBorder(),this.contentBlock.style.height=
F+"px",this.valueContainer&&(this.valueContainer.style.height=F+"px"),this.contentContainer&&(this.contentContainer.style.height=F+"px"),e.renderText(this),this.onHeightChanged(),this.onSizeChanged())},getMinHeight:function(){return this._minHeight||0},_minHeight:void 0,setMinHeight:function(F){this._minHeight=F;this.domNode.style.minHeight=F+"px";F=F-this._getTopPadding()-this._getBottomPadding();this.contentBlock.style.minHeight=F+"px";this.valueContainer&&(this.valueContainer.style.minHeight=F+
"px");this.contentContainer&&(this.contentContainer.style.minHeight=F+"px");e.renderText(this)},_refreshLayout:function(){this.setWidth(this.getWidth());this.setHeight(this.getHeight());void 0!==this._minHeight&&this.setMinHeight(this.getMinHeight())},getAngle:function(){return this.content&&this.content.getAngle?this.content.getAngle()||0:this.fieldStyle.angle||0},setAngle:function(F){this.content&&this.content.setAngle?this.content.setAngle(F):this.setStyle({angle:F||0})},isMouseOver:function(F){return this.domNode&&
n.isMouseOverBox(this.getBBox())},getBBox:function(F){F=F&&F.noTransformation?m.noTransformPosition(this.domNode):b.position(this.domNode);return 0===this.getAngle()?F:r.getRotatedRectBox(F,this.getAngle())},_urlClickHandle:null,setUrl:function(F){this._urlClickHandle&&this._urlClickHandle.remove();this.valueLabel&&(a[F?"add":"remove"](this.valueLabel,"esriGEAdjustableGridValueFieldHyperLink"),F&&(this._urlClickHandle=k(this.valueLabel,"click",function(){q.openUrl(q.toHttpUrl(F))})))},onWidthChanged:function(){},
onHeightChanged:function(){},onSizeChanged:function(){},destroy:function(){this.viewModel=null;this._destroyExistingContent();this.inherited(arguments)}});p.SUPPORTED_LAYOUT_STYLES=d;p.SUPPORTED_TEXT_STYLES=y;p.SUPPORTED_BORDER_STYLES=C;p.SUPPORTED_STYLES=D;return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/TextRenderer":function(){define("dojo/_base/lang dojo/when dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil ../../coreUtils/GridDataUtil ../../../supportClasses/conditionalStyling/ConditionalStyleUtil ./BenchmarkUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g){return{renderText:function(h,m,r){h.valueLabel&&void 0!==m&&this._applyNewText(h,m,r);h.valueLabel&&(h.valueLabel.__hasTrimmedText=!1);r&&(h.trimTextIfOverflows=!1);if(h.trimTextIfOverflows&&h.valueLabel&&this._getLabelInnerHTML(h)&&!a.isRichText(this._getLabelInnerHTML(h))&&(m=this.getFullText(h),m!==this._getLabelInnerHTML(h)&&this._setLabelInnerHTML(h,m),h.valueLabel.__untrimmedText=m,h.domNode.clientWidth)){m=m.trim();r=this._measureValueField(h,m);var n=r.parentH;
if(!(h.valueLabel.clientHeight<=n)){var q=Math.floor(r.parentW/r.charWidth),u=m.length;m=m.substr(0,Math.max(1,Math.floor(n/r.lineHeight))*q);u>m.length&&(m=m.substr(0,m.length-3),this._setLabelInnerHTML(h,m+"..."),h.valueLabel.__hasTrimmedText=!0);if(h.valueLabel.clientHeight>n)for(;!(!m||h.valueLabel.clientHeight<=n||this._getLabelInnerHTML(h).length<=q);)m=m.substr(0,m.length-1),this._setLabelInnerHTML(h,m+"..."),h.valueLabel.__hasTrimmedText=!0}}},_measureValueField:function(h,m){var r=f.getNodeFontSize(h.domNode);
r=f.getTextBox(m,{style:"font-family:"+k.get(h.valueLabel,"fontFamily")+";font-size:"+r+"px;"});return{parentW:h.domNode.clientWidth-k.get(h.valueLabel,"paddingLeft")-k.get(h.valueLabel,"paddingRight"),parentH:h.domNode.clientHeight-k.get(h.valueLabel,"paddingTop")-k.get(h.valueLabel,"paddingBottom"),lineHeight:r.h,charWidth:r.w/m.length,textBox:r}},getFullText:function(h){return h.valueLabel&&(h.valueLabel.__untrimmedText||this._getLabelInnerHTML(h))},hasOverflowText:function(h){return h.valueLabel&&
h.valueLabel.__hasTrimmedText||h.valueLabel.clientHeight>h.domNode.clientHeight},_applyNewText:function(h,m,r){delete h.valueLabel.__untrimmedText;r?this._applyTextForBenchmark(h,m,r):this._getLabelInnerHTML(h)!==m&&this._setLabelInnerHTML(h,m)},_applyTextForBenchmark:function(h,m,r){function n(D){var G=d.getFieldInfo(h);G&&G.triggerJson&&(G=e.getConditionalStyle(r.ownValue,G.triggerJson))&&G.color&&(D=D||{},D.color=D.color||G.color);return g.createBenchmarkedValue(t.mixin({text:m,fontSize:w,isGreater:r.isGreater,
formattedValue:r.formattedValue,color:h.fieldStyle.color,nowrap:!0,noTextLimit:r.noTextLimit},D))}var q=this,u=h.parentGrid,w=f.getNodeFontSize(h.domNode);h.__benchmarkLabel&&l.destroy(h.__benchmarkLabel);delete h.__benchmarkLabel;if(u.infographicBenchmarkController)if(u.infographicBenchmarkController.isVariableInShape){var y=u.infographicBenchmarkController.getIconTable();p(y.getRenderPromise(),function(){function D(L){return f.getNodesBox(L.getBoundingClientRect?[L]:L)}q._setLabelInnerHTML(h,n());
var G=q._getInnerHTMLNode(h),F=D(G.children[0]),B=y.getFirstCell().content;if((B=D(B.getSvgNode?B.getSvgNode().children:B.content))&&!c.isRectInRect(F,B)){q._setLabelInnerHTML(h,m);F=D(G);G=l.create("div",null,h.domNode);G.style.position="absolute";G.style.fontSize="0px";G.innerHTML=n({text:"",color:u.infographicBenchmarkController.getOutsideShapeTextColor()});h.__benchmarkLabel=G;var z=D(G),E=D(h.domNode),I=E.w/f.noTransformPosition(h.domNode).w;G.style.left=(B.x+B.w-E.x)/I+5+"px";G.style.top=(F.y+
(F.h-z.h)/2-E.y)/I+"px"}})}else if(this._setLabelInnerHTML(h,n()),"center"===h.fieldStyle.horizontalAlign){var C=q._getInnerHTMLNode(h);h.domNode.style.marginLeft=Math.min(0,(h.getWidth()-C.children[0].clientWidth)/2)+"px"}else"right"===h.fieldStyle.horizontalAlign&&(C=q._getInnerHTMLNode(h),h.domNode.style.marginLeft=Math.min(0,h.getWidth()-C.children[0].clientWidth)+"px");else this._setLabelInnerHTML(h,n())},_getLabelInnerHTML:function(h){return this._getInnerHTMLNode(h).innerHTML},_setLabelInnerHTML:function(h,
m){m=String(m);var r=h.valueLabel;if(h.autoDetectUrl){var n=this.getFullText(h)||m;a.isUrl(n)?(h=this._getInnerHTMLNode(h),"A"===h.nodeName?(h.innerHTML=m,h.hasAttribute("href")&&h.removeAttribute("href"),h.setAttribute("href",n)):r.innerHTML="\x3ca href\x3d'"+b.toHttpsUrl(n)+"' target\x3d'_blank'\x3e"+m+"\x3c/a\x3e"):r.innerHTML=m}else r.innerHTML=m},_getInnerHTMLNode:function(h){var m=h.valueLabel;return h.autoDetectUrl&&m.childNodes&&1===m.childNodes.length&&m.childNodes[0]&&"A"===m.childNodes[0].nodeName?
m.childNodes[0]:m}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/BenchmarkUtil":function(){define(["dojo/string","dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt","dojo/text!esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt"],function(t,p,l){return{createBenchmarkedValue:function(k){var f="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:0px;"+(k.nowrap?"white-space:nowrap;":"")+"'\x3e";
k.text&&(f+="\x3cdiv class\x3d'dijitInline' style\x3d'font-size:"+k.fontSize+"px;'\x3e"+k.text+"\x3c/div\x3e");var c=Math.min(k.noTextLimit?100:15,k.fontSize,Math.max(k.noTextLimit?6:10,Math.round(.6*k.fontSize)));f+="\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:"+(k.text?2:0)+"px;font-size:0px;'\x3e"+t.substitute(k.isGreater?p:l,{fillColor:k.color||"",size:Math.min(k.noTextLimit?100:16,k.fontSize,Math.max(k.noTextLimit?6:10,Math.round(.7*k.fontSize)))})+"\x3c/div\x3e";return f+="\x3cdiv class\x3d'dijitInline' style\x3d'margin-left:2px;font-size:"+
c+"px;color:"+k.color+"'\x3e"+k.formattedValue+"\x3c/div\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/TextEditor":function(){define("dojo/on dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor dojo/i18n!esri/nls/jsapi".split(" "),function(t,p,l,k,f,c){c=c.filterDlg;return{setTextEditing:function(a){a.__textEditH&&a.__textEditH.remove();a.__textEditButton&&p.destroy(a.__textEditButton);a.__textEditH=
t.once(a.domNode,"mouseover",function(){var b=a.__textEditButton=p.create("div",{"class":"dataDrilling_drillDataButton"},a.domNode);p.create("div",{"class":"dijitInline esriGESpaceAfterBig esriGEEditButtonWhite"},b);p.create("div",{"class":"dijitInline",innerHTML:c.edit},b).style.cssText="font-size:13px;font-family:Avenir Next;";var d=k.position(a.domNode);l.set(b,{left:"0px",top:"0px",width:d.w+"px",height:d.h+"px",lineHeight:d.h+"px"});var e=new f({onApply:function(g){k.show(b);a.parentGrid.setCellText(a,
g)},onCancel:function(){k.show(b)}});t(b,"click",function(){k.hide(b);e.editNodeLabel({node:a.valueLabel,overNode:a.domNode,initialText:a.get("value"),multiline:!0,box:{x:0,y:0,w:d.w,h:d.h},applyWhenClickedOutside:!0,textStyle:{color:k.getStyle(a.valueLabel,"color"),fontFamily:k.getStyle(a.valueLabel,"fontFamily"),fontSize:k.getStyle(a.valueLabel,"fontSize"),fontWeight:k.getStyle(a.valueLabel,"fontWeight"),fontStyle:k.getStyle(a.valueLabel,"fontStyle"),textDecoration:k.getStyle(a.valueLabel,"textDecoration"),
backgroundColor:k.getStyle(a.domNode,"backgroundColor")}})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/NumberAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/Animator","esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState"],function(t,p){return{animateNumber:function(l,k,f){p.isAnimationSuspended||(l.set("value","0"),l.__numberAnimation&&l.__numberAnimation.stop(),l.__numberAnimation=t.animateProperty({duration:375,properties:{p:{start:0,
end:k,easing:"quadOut"}},progressFunction:function(c,a,b){l.domNode&&l.set("value",f(k*b))},endFunction:function(){delete l.__numberAnimation}}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/_ResizableField":function(){define("dojo/_base/declare dojo/aspect dojo/on dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ./supportClasses/ResizeColumnRowTooltipVisualizer ./supportClasses/ResizeEngine esri/dijit/geoenrichment/utils/PageUnitsConverter esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r){r=r.geoenrichment.dijit.ReportPlayer.ValueField;return t(null,{resizable:!0,hasAllSidesSizers:!1,showSizeLabel:!1,showSizeLabelsInAllRelatedCells:!1,showColumnRowSizeTooltip:!1,showSizersOnFocus:!1,createSizersOnDemand:!0,resizeSnapNode:null,resizeRestrictNode:null,allowHorizontalResizing:!0,allowVerticalResizing:!0,sizeLabel:null,_tooltipHandles:null,postCreate:function(){this._tooltipHandles=[];this.inherited(arguments);this.resizable&&this._addCreateSizersTrigger()},
_isBeingResized:!1,_isBeingResizedDelayed:!1,_sizers:null,isBeingResized:function(){return this.resizable&&this._sizers?this._isBeingResized||this._sizers.some(function(n){return h.isMouseOver(n)})||!this.hasAllSidesSizers&&this._sizers.some(function(n){return 0<a.get(n,"opacity")}):!1},wasResizedRecently:function(){return this.isBeingResized()||this._isBeingResizedDelayed},_addCreateSizersTrigger:function(){var n=this;this.createSizersOnDemand||this._updateSizers();l(this.domNode,"mouseover",function(){n._updateSizers()})},
_createSizers:function(){var n=this;this.resizable&&!this._sizers&&(this._sizers=(this.hasAllSidesSizers?d.ALL_DIRECTIONS:[this.allowHorizontalResizing?"e":null,this.allowVerticalResizing?"s":null].filter(function(q){return!!q})).map(function(q){var u=c.create("div",null,n.domNode);n.hasAllSidesSizers?f.add(u,(n.showSizersOnFocus?"valueField_allSidesSizer_showOnFocus":"valueField_allSidesSizer")+" "+q+"_fieldSizer"):"e"===q?(f.add(u,"valueField_widthSizer"),n._tooltipHandles.push(m.setTooltipToNode(u,
r.dragToChangeWidth))):(f.add(u,"valueField_heightSizer"),n._tooltipHandles.push(m.setTooltipToNode(u,r.dragToChangeHeight)));u._dir=q;return u}),this._addResizeHandlers())},unitTesting_getSizerByDirection:function(n){this._updateSizers();return this._sizers.filter(function(q){return q._dir===n})[0]},_addResizeHandlers:function(){var n=this;this._sizers.forEach(function(q){l(q,"mousedown",function(u){u.preventDefault();u.stopPropagation();n._setIsBeingResized(!0);n.stopEdit&&n.stopEdit();d.trackSizer({dir:q._dir,
w:n.getWidth(),h:n.getHeight(),angle:n.getAngle(),supportsCtrlShift:n.hasAllSidesSizers,getThisBox:function(){return g.noTransformPosition(n.domNode)},getThisFullBox:function(){return n.getBBox({noTransformation:!0})},getSnapNodeBoxes:function(){if(!n.hasAllSidesSizers)return null;var w=n._getResizeSnapElements()||[];w=w.map(function(y){return{box:y.getBBox({noTransformation:!0}),tolerance:3}});n.resizeSnapNode&&w.push({box:g.noTransformPosition(n.resizeSnapNode),tolerance:7});return w.length?w:null},
getRestrictNodeBox:function(){return n.hasAllSidesSizers?n.resizeRestrictNode&&g.noTransformPosition(n.resizeRestrictNode):null},onPreChange:function(){n._onManualSizePreChange()},onSizeChanged:function(){n._onManualSizeChange(q._dir);n.onManualSizeChange();n._updateSizers()},onWidthChanged:function(w){n.onManualWidthChange(w)},onHeightChanged:function(w){n.onManualHeightChange(w)},setWidth:function(w){n.parentGrid&&n.parentGrid.layoutDefaults.columnMinWidth&&(w=Math.max(w,n.parentGrid.layoutDefaults.columnMinWidth));
n.setWidth(w)},setHeight:function(w){n.parentGrid&&n.parentGrid.layoutDefaults.rowMinHeight&&(w=Math.max(w,n.parentGrid.layoutDefaults.rowMinHeight));n.setHeight(w)},applyShift:function(w,y){n.onNeedShiftPositionFromResizing(w,y)},onEnd:function(){n._setIsBeingResized(!1)},onSnapped:function(w){n.onResizeSnapped(w)}})})});this.hasAllSidesSizers&&this.own(p.after(this,"onSizeChanged",function(){(g.isNodeInLayout(n._sizers[0])||g.isNodeInLayout(n._sizers[1]))&&n._updateSizers()}))},_getResizeSnapElements:function(){},
_setIsBeingResized:function(n){n?(this._isBeingResizedDelayed=this._isBeingResized=!0,f.add(this.domNode,"isBeingResized"),this.parentGrid&&f.add(this.parentGrid.domNode,"isBeingResized")):(this._isBeingResized&&this._onManualSizeChangeEnd(),this._isBeingResized=!1,f.remove(this.domNode,"isBeingResized"),this.parentGrid&&f.remove(this.parentGrid.domNode,"isBeingResized"),g.stealFocus(),setTimeout(function(){this._isBeingResizedDelayed=!1}.bind(this),100));this._tooltipHandles.forEach(function(q){n?
q.suspend():q.resume()})},updateSizers:function(){this._updateSizers()},_updateSizers:function(){function n(){var u=q.getAngle();q._sizers.forEach(function(w){d.positionSizer({sizer:w,dir:w._dir,w:q.getWidth(),h:q.getHeight(),angle:u})})}this._createSizers();if(this._sizers&&this.hasAllSidesSizers){var q=this;5<this.domNode.clientHeight?n():setTimeout(n,100)}},_onManualSizePreChange:function(){this.onManualSizePreChange()},_onManualSizeChange:function(n){this.inherited(arguments);this.showSizeLabel&&
this._showAndUpdateSizeLabel();this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&("e"===n?b.showColumnTooltip(this):"s"===n&&b.showRowTooltip(this))},_onManualSizeChangeEnd:function(){g.hide(this.sizeLabel);this.showSizeLabelsInAllRelatedCells&&this._hideRelatedCellsSizeLabels();this.showColumnRowSizeTooltip&&b.removeTooltip();this.onManualSizeChangeEnd()},tryUpdateSizeLabel:function(){g.isNodeInLayout(this.sizeLabel)&&(this.showSizeLabel&&
this._showAndUpdateSizeLabel(),this.showSizeLabelsInAllRelatedCells&&this._showAndUpdateRelatedCellsSizeLabels())},_showAndUpdateSizeLabel:function(){if(this.domNode){this.sizeLabel=this.sizeLabel||c.create("div",{"class":"elementSizeLabel"},this.domNode);g.show(this.sizeLabel);var n=this.domNode.clientWidth,q=this.domNode.clientHeight,u=e.convert(n,"px",this.viewModel.getUnits()),w=e.convert(q,"px",this.viewModel.getUnits());this.sizeLabel.innerHTML=k.substitute(this.viewModel.provideUnits(r.elementSizeFormat),
{width:this.viewModel.roundForUnits(u),height:this.viewModel.roundForUnits(w)});u=this.sizeLabel.clientHeight;this.sizeLabel.style.left=Math.round((n-this.sizeLabel.clientWidth)/2)+"px";this.sizeLabel.style.top=Math.round(20<q?(q-u)/2:-u-5)+"px"}},_showAndUpdateRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(n){n._showAndUpdateSizeLabel()})},_hideRelatedCellsSizeLabels:function(){this._getRelatedCells().forEach(function(n){g.hide(n.sizeLabel)})},_getRelatedCells:function(){return this.parentGrid?
this.parentGrid.getCells().filter(function(n){return n!==this},this):[]},onManualSizePreChange:function(){},onManualSizeChangeEnd:function(){},onManualSizeChange:function(){},onManualWidthChange:function(n){},onManualHeightChange:function(n){},onNeedShiftPositionFromResizing:function(n,q){},onResizeSnapped:function(n){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeColumnRowTooltipVisualizer":function(){define("dojo/_base/declare dojo/string dojo/dom-construct dojo/dom-geometry esri/dijit/geoenrichment/utils/PageUnitsConverter dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c){c=c.geoenrichment.dijit.ReportPlayer.ValueField;var a={},b=t(null,{_cell:null,_isColumn:null,_tooltip:null,constructor:function(g,h){this._cell=g;this._isColumn=h},show:function(){this.destroy();this._tooltip=l.create("div",{"class":"esriGEAdjustableGrid_resizableColumnTooltip"},document.body);this.update()},update:function(){setTimeout(this._doUpdate.bind(this))},_doUpdate:function(){if(this._tooltip&&this._cell.domNode){var g=k.position(this._cell.domNode),h=k.position(this._cell.parentGrid.domNode),
m=this._cell.viewModel;this._isColumn?(this._tooltip.innerHTML=p.substitute(m.provideUnits(c.columnWidth),{width:m.roundForUnits(f.convert(this._cell.domNode.clientWidth,"px",m.getUnits()))}),this._tooltip.style.left=g.x+(g.w-this._tooltip.clientWidth)/2+"px",this._tooltip.style.top=h.y-this._tooltip.clientHeight-10+"px"):(this._tooltip.innerHTML=p.substitute(m.provideUnits(c.rowHeight),{height:m.roundForUnits(f.convert(this._cell.domNode.clientHeight,"px",m.getUnits()))}),this._tooltip.style.left=
h.x-this._tooltip.clientWidth-10+"px",this._tooltip.style.top=g.y+(g.h-this._tooltip.clientHeight)/2+"px")}},destroy:function(){this._tooltip&&l.destroy(this._tooltip);this._tooltip=null}}),d,e;a.showColumnTooltip=function(g){a._showTooltip(g,!0)};a.showRowTooltip=function(g){a._showTooltip(g,!1)};a._showTooltip=function(g,h){e!==g&&a.removeTooltip();e=g;d?d.update():(d=new b(g,h),d.show())};a.removeTooltip=function(){d&&d.destroy();e=d=null};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/supportClasses/ResizeEngine":function(){define("dojo/on dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil".split(" "),
function(t,p,l,k,f,c){var a={ALL_DIRECTIONS:"e se s sw w nw n ne".split(" "),trackSizer:function(b){var d=a._getSizerInfo(b),e,g=c.getCursorPosition().clientX,h=c.getCursorPosition().clientY,m=b.w,r=b.h,n=0,q=0,u=t(document.body,"mousemove",function(y){y.preventDefault();y.stopPropagation();b.applyShift(-n,-q);q=n=0;var C=c.getCursorPosition().clientX,D=c.getCursorPosition().clientY,G=[0,0,C-g,D-h];D=C=0;var F=b.supportsCtrlShift&&y.shiftKey;var B=b.supportsCtrlShift&&k.isCtrl(y);d.changeWVector&&
d.changeHVector&&F&&(F=f.normalizeVector(d.vector),G=f.calcDotProduct(G,F),G=[0,0,F[2]*G,F[3]*G]);b.onSnapped(null);d.changeWVector&&(C=f.calcAngleBetweenVectors(d.changeWVector,G),C=f.calcVectorLength(G)*Math.cos(C)||0);d.changeHVector&&(D=f.calcAngleBetweenVectors(d.changeHVector,G),D=f.calcVectorLength(G)*Math.cos(D)||0);C=C&&a._restricVectorDelta(C,d.changeWVector,b);D=D&&a._restricVectorDelta(D,d.changeHVector,b);G=C&&a._snapVectorDelta(C,d.calcBoundaryWVectors(m,r,D),b);F=D&&a._snapVectorDelta(D,
d.calcBoundaryHVectors(m,r,C),b);G&&G.canSnap&&F&&F.canSnap&&(G.canSnap=Math.abs(G.minDelta)<=Math.abs(F.minDelta),F.canSnap=Math.abs(F.minDelta)<Math.abs(G.minDelta));G&&G.canSnap&&(b.onSnapped(G.snapInfo),C=G.snappedDelta);F&&F.canSnap&&(b.onSnapped(F.snapInfo),D=F.snappedDelta);B&&(C*=2,D*=2);e||!C&&!D||(b.onPreChange(),e=!0);G=C||D;F=m+C;var z=r+D;G&&(B?(n=m/2-F/2,q=r/2-z/2):(B=d.calcOppositePoint(F,z),n=d.oppositePoint[0]-B[0],q=d.oppositePoint[1]-B[1]),b.applyShift(n,q),b.setWidth(F),b.setHeight(z));
G&&b.onSizeChanged(y);C&&b.onWidthChanged(y);D&&b.onHeightChanged(y)}),w=t.once(document.body,"mouseup, click",function(y){y.preventDefault();y.stopPropagation();w.remove();u.remove();b.onEnd()})},_getSizerInfo:function(b){function d(m,r){var n;switch(e){case "e":var q=[m,r/2];var u=n=[0,r/2];var w=[[0,0,m,0],[0,r,m,r]];break;case "se":q=[m,r];u=[0,0];n=[0,r];var y=[m,0];w=[[0,r,m,r],[0,0,m,0]];var C=[[m,0,m,r],[0,0,0,r]];break;case "s":q=[m/2,r];u=y=[m/2,0];C=[[0,0,0,r],[m,0,m,r]];break;case "sw":q=
[0,r];u=[m,0];n=[m,r];y=[0,0];w=[[m,r,0,r],[m,0,0,0]];C=[[0,0,0,r],[m,0,m,r]];break;case "w":q=[0,r/2];u=n=[m,r/2];w=[[m,0,0,0],[m,r,0,r]];break;case "nw":q=[0,0];u=[m,r];n=[m,0];y=[0,r];w=[[m,0,0,0],[m,r,0,r]];C=[[0,r,0,0],[m,r,m,0]];break;case "n":q=[m/2,0];u=y=[m/2,r];C=[[0,r,0,0],[m,r,m,0]];break;case "ne":q=[m,0],u=[0,r],n=[0,0],y=[m,r],w=[[0,0,m,0],[0,r,m,r]],C=[[m,r,m,0],[0,r,0,0]]}var D=[m/2,r/2];q=f.rotatePointAroundPoint(D,q,g);u=f.rotatePointAroundPoint(D,u,g);n=n&&f.rotatePointAroundPoint(D,
n,g);y=y&&f.rotatePointAroundPoint(D,y,g);m=[u[0],u[1],q[0],q[1]];n=n&&[n[0],n[1],q[0],q[1]];y=y&&[y[0],y[1],q[0],q[1]];w=w&&w.map(function(G){return f.rotateVectorAroundPoint(G,D,g)});C=C&&C.map(function(G){return f.rotateVectorAroundPoint(G,D,g)});return{sizerPoint:q,oppositePoint:u,vector:m,changeWVector:n,changeHVector:y,boundaryWVectors:w,boundaryHVectors:C}}var e=b.dir,g=b.angle,h=d(b.w,b.h);return{oppositePoint:h.oppositePoint,vector:h.vector,changeWVector:h.changeWVector,changeHVector:h.changeHVector,
calcOppositePoint:function(m,r){return d(m,r).oppositePoint},calcBoundaryWVectors:function(m,r,n){m=d(m,r).boundaryWVectors;n&&(n=f.addLengthToVector(f.normalizeVector(h.changeHVector),n),m[0]=f.addPointToVector(m[0],[n[2],n[3]]));return m},calcBoundaryHVectors:function(m,r,n){m=d(m,r).boundaryHVectors;n&&(n=f.addLengthToVector(f.normalizeVector(h.changeWVector),n),m[0]=f.addPointToVector(m[0],[n[2],n[3]]));return m}}},_restricVectorDelta:function(b,d,e){var g=e.getRestrictNodeBox();if(!g||0>=b||
!b)return b;e=e.getThisBox();var h=f.calcVectorLength(d);d=f.addLengthToVector(d,b);d=f.addPointToVector(d,[e.x,e.y]);var m=[g.x+g.w,g.y,g.x+g.w,g.y+g.h],r=[g.x,g.y,g.x+g.w,g.y];b=[g.x,g.y+g.h,g.x+g.w,g.y+g.h];g=f.intersect2Lines(d,[g.x,g.y,g.x,g.y+g.h]);m=f.intersect2Lines(d,m);r=f.intersect2Lines(d,r);b=f.intersect2Lines(d,b);var n=f.calcVectorLength(d),q=d;[g,m,r,b].forEach(function(u){if(u&&(u=[d[0],d[1],u[0],u[1]],0<f.calcDotProduct(d,u))){var w=f.calcVectorLength(u);w<n&&(n=w,q=u)}});q=f.subtractPointFromVector(q,
[e.x,e.y]);return f.calcVectorLength(q)-h},_snapVectorDelta:function(b,d,e){var g=e.getSnapNodeBoxes()||[];if(!g.length||!b)return b;var h=e.getThisBox(),m,r,n,q=Infinity;d.forEach(function(u){u=f.addLengthToVector(u,b);u=f.addPointToVector(u,[h.x,h.y]);var w=f.calcVectorLength(u);g.forEach(function(y){var C=y.box,D=y.tolerance;[[C.x,C.y,C.x,C.y+C.h],[C.x+C.w,C.y,C.x+C.w,C.y+C.h],[C.x+C.w/2,C.y,C.x+C.w/2,C.y+C.h],[C.x,C.y,C.x+C.w,C.y],[C.x,C.y+C.h,C.x+C.w,C.y+C.h],[C.x,C.y+C.h/2,C.x+C.w,C.y+C.h/2]].forEach(function(G,
F){var B=f.intersect2Lines(u,G);B&&(B=[u[0],u[1],B[0],B[1]],0<f.calcDotProduct(u,B)&&(B=f.calcVectorLength(B)-w,Math.abs(B)<=Math.abs(q)&&Math.abs(B)<=D&&(q=B,m=G,n=C,r=2<F)))})})});return{canSnap:!!m,snapInfo:m&&{elementBox:e.getThisFullBox(),snapBox:n,to:r?m[1]:m[0],isHorizontal:r},minDelta:m?q:NaN,snappedDelta:m?b+q:NaN}},positionSizer:function(b){var d=b.sizer;d.style.display="block";var e=b.dir,g=b.w,h=b.h;b=b.angle;var m=d.offsetWidth||12,r=d.offsetHeight||12;switch(e){case "e":var n=g;var q=
h/2;break;case "se":n=g;q=h;break;case "s":n=g/2;q=h;break;case "sw":n=0;q=h;break;case "w":n=0;q=h/2;break;case "nw":q=n=0;break;case "n":n=g/2;q=0;break;case "ne":n=g,q=0}b&&(q=f.rotatePointAroundPoint({x:g/2,y:h/2},{x:n,y:q},b),n=q.x,q=q.y);p.set(d,{left:n-m/2+"px",top:q-r/2+"px",cursor:a._getCursorDirection(e,b)+"-resize"});if("w"===e||"e"===e)l[30>h?"hide":"show"](d);if("s"===e||"n"===e)l[30>g?"hide":"show"](d);d.style.display=""},_getCursorDirection:function(b,d){if(!d)return b;d=f.angleTo0_360Range(d);
d=Math.round(d/45);b=a.ALL_DIRECTIONS.indexOf(b)+d;return a.ALL_DIRECTIONS[b%a.ALL_DIRECTIONS.length]}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBackgroundForegroundUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(t,p){var l={renderBackground:function(k,f,c){return l._renderSection(k,f,c,!0)},renderForeground:function(k,f,c){return l._renderSection(k,f,c,!1)},_renderSection:function(k,f,c,a){var b=a?k.backgroundNode:k.foregroundNode;b&&(b.innerHTML=
"");if(!f)return null;b={};b["class"]="esriGEAbsoluteStretched "+(a?"adjustableGrid_backgroundSection":"adjustableGrid_foregroundSection");b.initialWidth=k.getAllowedWidth();b.initialHeight=k.getHeight();b.json=f;b.viewModel=k.viewModel;b.theme=k.theme;b.parentWidget=k;b.currentFeatureIndex=k.currentFeatureIndex;b.initialViewMode=k.getViewMode();b.initialSpecificViewMode=k.getSpecificViewMode();t.mixin(b,c);return k.viewModel.layoutBuilder.createElement("section",b,l._provideNode(k,a))},_provideNode:function(k,
f){return f?k.backgroundNode=k.backgroundNode||p.create("div",{"class":"adjustableGridBackgroundNode"},k.domNode,"first"):k.foregroundNode=k.foregroundNode||p.create("div",{"class":"adjustableGridForegroundNode"},k.domNode)}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridFloatingTablesUtil":function(){define(["dojo/_base/lang","dojo/dom-construct"],function(t,p){var l={renderFloatingTables:function(k,f,c,a){var b=a?k.backgroundFloatingTablesNode:k.foregroundFloatingTablesNode;
b&&(b.innerHTML="");if(!f)return null;b={"class":"esriGEAbsoluteStretched adjustableGrid_floatingTablesSection"};b.initialWidth=k.getAllowedWidth();b.initialHeight=k.getHeight();b.json=f;b.viewModel=k.viewModel;b.theme=k.theme;b.parentWidget=k;b.currentFeatureIndex=k.currentFeatureIndex;b.initialViewMode=k.getViewMode();b.initialSpecificViewMode=k.getSpecificViewMode();t.mixin(b,c);return k.viewModel.layoutBuilder.createElement("section",b,l._provideNode(k,a))},_provideNode:function(k,f){return f?
k.backgroundFloatingTablesNode=k.backgroundFloatingTablesNode||p.create("div",{"class":"adjustableGridFloatingTablesNode"},k.mainNode,"before"):k.foregroundFloatingTablesNode=k.foregroundFloatingTablesNode||p.create("div",{"class":"adjustableGridFloatingTablesNode"},k.mainNode,"after")}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridBorderUtil":function(){define(["../../themes/PageBorderStyles","../../themes/ThemeLibrary","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes"],
function(t,p,l){var k={getBorderStyle:function(f,c,a,b,d){f=f.renderBordersFromTheme?k._getThemeBorderStyle(f,c,a,b,d):f.getViewMode()===l.EDIT?f.editModeBorderLineStyle&&k._getAllBorderStyle(b,d,f.editModeBorderLineStyle.width,f.editModeBorderLineStyle.color):f.previewModeBorderLineStyle&&k._getAllBorderStyle(b,d,f.previewModeBorderLineStyle.width,f.previewModeBorderLineStyle.color);return k._toBorderStyleFormat(f)},_getAllBorderStyle:function(f,c,a,b,d){return{l:a,r:f?a:0,t:a,b:c?a:0,color:b,style:d}},
_getThemeBorderStyle:function(f,c,a,b,d){var e=f.viewModel.getDocumentDefaultStyles(f.theme).border||p.getDefaultBorderSettings();if(e){var g=e.thickness,h=e.lineStyle,m=e.color;switch(e.style){case t.ALL:return k._getAllBorderStyle(b,d,g,m,h);case t.OUTER_ONLY:return{l:0===a.index?g:0,r:b?g:0,t:0===c.index?g:0,b:d?g:0,color:m,style:h};case t.INNER_ONLY:return{l:0<a.index?g:0,t:0<c.index?g:0,color:m,style:h};case t.HORIZONTAL_INNER_ONLY:return{t:0<c.index?g:0,color:m,style:h};case t.VERTICAL_INNER_ONLY:return{l:0<
a.index?g:0,color:m,style:h};default:return f.noThemeBorderLineStyle&&k._getAllBorderStyle(b,d,f.noThemeBorderLineStyle.width,f.noThemeBorderLineStyle.color)}}},_toBorderStyleFormat:function(f){return f&&{borderTopColor:f.color,borderTopWidth:f.t,borderTopOpacity:1,borderTopStyle:f.style,borderRightColor:f.color,borderRightWidth:f.r,borderRightOpacity:1,borderRightStyle:f.style,borderBottomColor:f.color,borderBottomWidth:f.b,borderBottomOpacity:1,borderBottomStyle:f.style,borderLeftColor:f.color,
borderLeftWidth:f.l,borderLeftOpacity:1,borderLeftStyle:f.style}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/WaitingUtil ./GridDataUtil ./GridStyleUtil ./GridCellContentScaler ./GridCellContentSynchronizer ../../supportClasses/conditionalStyling/ConditionalStyleUtil ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes ./GridQueryUtil ./tooltip/GridCellTooltipBuilder ../../../_devConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y){function C(z){var E=z.parentGrid;return z[E.hasRealBorders||E.isMultiDataTable()?"getContentWidth":"getWidth"]()}function D(z){var E=z.parentGrid;return z[E.hasRealBorders||E.isMultiDataTable()?"getContentHeight":"getHeight"]()}var G={color:"#FF0000"},F={color:"#AAAAAA",fontStyle:"italic",fontSize:13,horizontalAlign:"center",verticalAlign:"middle"},B=t(null,{_parentState:null,constructor:function(z,E,I){var L=this;d.fitContentInsideCell(z);this._setParentState(z);
I.forEach(function(M){var O=M[1];E.own(l.after(z,M[0],function(){L._checkParentChanged(O,z)&&(d.fitContentInsideCell(z,{sync:!0}),e.syncParentFieldInfoWithElementState(z,E))}))})},_setParentState:function(z){var E=z.getFullStyle();this._parentState={width:C(z),height:D(z),horizontalAlign:E.horizontalAlign,verticalAlign:E.verticalAlign}},_checkParentChanged:function(z,E){switch(z){case "width":z=C(E);if(this._parentState.width!==z){this._parentState.width=z;var I=!0}break;case "height":z=D(E);this._parentState.height!==
z&&(this._parentState.height=z,I=!0);break;case "horizontalAlign":case "verticalAlign":if(z=E.getFullStyle(),this._parentState.horizontalAlign!==z.horizontalAlign||this._parentState.verticalAlign!==z.verticalAlign)this._parentState.horizontalAlign=z.horizontalAlign,this._parentState.verticalAlign=z.verticalAlign,I=!0}return I}});return t(null,{renderCells:function(z,E){var I=this,L=z[0]&&z[0].parentGrid,M=L&&L.getViewMode()!==n.EDIT&&L.viewModel.dynamicReportInfo&&L.viewModel.dynamicReportInfo.fieldData,
O={},Q=[];z.forEach(function(Y){E.cellPreRenderer&&E.cellPreRenderer(Y);var ea=M&&a.getConditionalFormatting(Y);ea&&ea.groupId?(O[ea.groupId]=O[ea.groupId]||[]).push({cell:Y,content:a.isImageCell(Y)?I._getImageCellConditionalValueFromData(Y):I._getRenderedContent(Y)}):Q.push(Y)});Q.forEach(function(Y){var ea=I.renderCellContent(Y);ea&&ea.then&&E.addToQueue(ea);E.cellPostRenderer&&E.cellPostRenderer(Y)});var T=function(Y,ea){a.isImageCell(Y)?(ea=I._placeImageInCell(Y.parentGrid,Y,ea))&&ea.then&&E.addToQueue(ea):
I._applyRenderedContent(Y,ea);E.cellPostRenderer&&E.cellPostRenderer(Y)},X;for(X in O){var U=O[X].filter(function(Y){if("number"===typeof Y.content.value)return!0;T(Y.cell,Y.content);return!1});if(U.length){var aa=g.getConditionalStylesOrFileNamesForGroup(a.getConditionalFormatting(U[0].cell),U.map(function(Y){return Y.content.value}),a.isImageCell(U[0].cell));aa.styles.forEach(function(Y,ea){ea=U[ea];"string"===typeof Y?ea.content.conditionalStyle.fileName=Y:ea.content.conditionalStyle.style=Y;ea.content.conditionalStyle.stats=
aa.stats;T(ea.cell,ea.content)})}}},renderCellContent:function(z){var E=z.parentGrid,I=a.getFieldInfo(z);if(y.emulateErrors.reportContainerRenderError)throw Error("Error test: something crashed when building the UI layout!");try{if(I){if(I.isReportSection)return this._placeReportSectionInCell(E,z);if(I.isInfographic)return this._placeInfographicInCell(E,z);if(I.isChart)return this._placeChartInCell(E,z);if(I.isMap)return this._placeMapInCell(E,z);if(I.isImage)return this._placeImageInCell(E,z);if(I.isShape)return this._placeShapeInCell(E,
z);I.isMissing&&z.setStyle(G);I.isUnsupportedContent&&z.setStyle(F)}this._applyRenderedContent(z,this._getRenderedContent(z));z.setContent(null)}catch(L){if(console.log(L),!k.tables.leaveEmptyCellsUponError)throw L;}},_renderCellTooltip:function(z){z.viewModel.dynamicReportInfo&&!k.isPlayerOnServer&&w.setDynamicTooltipToCell(z,z.viewModel.dynamicReportInfo.templateVariableProvider)},updateViewMode:function(z,E){z.__viewMode!==E&&(E=a.getFieldInfo(z))&&(E.hasVariable||E.script||E.alias||E.isRichText)&&
this._applyRenderedContent(z,this._getRenderedContent(z))},getRenderedContent:function(z){return this._getRenderedContent(z)},_getRenderedContent:function(z,E){var I=a.getFieldInfo(z);if(I)return z=this._prepareRenderContextForFieldCell(z),p.mixin(z,E),I.isImage&&I.triggerJson&&I.triggerJson.fieldInfo&&(I=I.triggerJson.fieldInfo),h.renderFieldInfoInTableCell(I,z);E=z.row[z.column.field];return{formattedValue:null===E||void 0===E||"number"===typeof E&&isNaN(E)?"":E,value:E,formatFunction:null,isUnavailableData:!1,
conditionalStyle:null}},_prepareRenderContextForFieldCell:function(z){var E=z.parentGrid,I=E.getViewMode()===n.EDIT,L=this._getCellBenchmarkInfoBuilder(z);return{previewValues:this._isPreviewValues(z),previewConditionalStyle:!I,getPreviewValueFunction:E.getPreviewValueFunction,fieldData:E.viewModel.dynamicReportInfo&&E.viewModel.dynamicReportInfo.fieldData,currentFeatureIndex:E.getFeatureIndexForCell(z),currentFeatureAttributes:E.currentFeatureAttributes,cell:z,rowIndex:z.row&&z.row.index,columnIndex:z.column&&
z.column.index,columnField:z.column&&z.column.field,numRows:E.rows.length,isGraphicReport:E.viewModel.isGraphicStyle(),isMultiFeature:E.viewModel.dynamicReportInfo&&E.viewModel.dynamicReportInfo.isMultiFeature,presetFilter:!I&&E.presetFilter,presetSorting:!I&&E.presetSorting,isBenchmarked:!!L,getBenchmarkInfo:L&&L.getBenchmarkInfo}},_isPreviewValues:function(z){var E=z.parentGrid;z=a.getFieldInfo(z);var I=E.getSpecificViewMode();E=E.getViewMode()===n.PREVIEW_VALUES;z&&z.name&&0===z.name.indexOf("SiteNote")&&
(E=!0);I&&z&&(I[q.RICH_TEXT]===n.PREVIEW_VALUES&&z.isRichText?E=!0:I[q.VARIABLE]===n.PREVIEW_VALUES&&a.isVariableLikeFieldCell(z)?E=!0:I[q.SPECIAL]===n.PREVIEW_VALUES&&a.isSpecialFieldCell(z)?E=!0:I[q.INFOGRAPHIC]===n.PREVIEW_VALUES&&z.isInfographic&&(E=!0));return E},_applyRenderedContent:function(z,E){E&&(z.__viewMode=z.parentGrid.getViewMode(),this._setCellFormattedValue(z,E),E.isUnavailableData||("number"!==typeof E.value||isNaN(E.value)||(a.setNumericCellValue(z,E.value),z.setNumberValue(E.value,
E.formatFunction,z.parentGrid.enableNumberAnimation)),E.conditionalStyle?(a.setCellGroupStyleStats(z,E.conditionalStyle.stats),z.setStyle(E.conditionalStyle.style),"string"===typeof E.conditionalStyle.formattedValue&&this._setCellFormattedValue(z,E.conditionalStyle),z.appliedConditionalStyle=E.conditionalStyle.style):!1===E.conditionalStyle||z.appliedConditionalStyle?(z.appliedConditionalStyle=void 0,z.setStyle(b.combineCellStyle(z.parentGrid,z.row,z.column))):E.modifiedValue&&"string"===typeof E.modifiedValue.formattedValue&&
this._setCellFormattedValue(z,E.modifiedValue)),z.parentGrid&&z.parentGrid.viewModel.dynamicReportInfo&&z.setUrl(a.getFieldCellUrl(z)),this._renderCellTooltip(z))},_setCellFormattedValue:function(z,E){if("number"===typeof E.value&&!isNaN(E.value)){var I=this._getCellBenchmarkInfoBuilder(z);I&&z.setBenchmarkInfo(I.getBenchmarkInfo(E.value))}a.setFieldCellContent(z,E.formattedValue)},_getCellBenchmarkInfoBuilder:function(z){var E=this,I=z.parentGrid;return I.viewModel.isBenchmarkedArea&&I.viewModel.isBenchmarkedArea(I.getFeatureIndexForCell(z))&&
{isBenchmarked:!0,getBenchmarkInfo:function(L,M){var O=z;M&&(O={row:{fieldInfos:{}},column:z.column,parentGrid:I},O.row.fieldInfos[O.column.field]=M);M=E._getRenderedContent(O,{currentFeatureIndex:I.viewModel.getBenchmarkController().getAreaIndex()});O=L-M.value;return{ownValue:L,isGreater:0<=O,value:Math.abs(O),formattedValue:M.formatFunction?M.formatFunction(Math.abs(O)):f.formatNumber(Math.abs(O)),noTextLimit:I.viewModel.getBenchmarkController().hasNoTextLimit()}}}},_placeReportSectionInCell:function(z,
E){function I(){if(E.domNode)return L._createReportSectionFromParams(z,E,M)}var L=this,M={"class":"adjustableGrid_inCellSection"};M.json=a.getFieldInfo(E).sectionJson;M.viewModel=z.viewModel;M.theme=z.theme;M.viewPortContainer=z.viewPortContainer;M.parentWidget=E;M.currentFeatureIndex=z.getFeatureIndexForCell(E);M.currentFeatureAttributes=z.currentFeatureAttributes;M.initialWidth=C(E);M.initialHeight=D(E);M.noContentOffset=u.cellHasFloatingTableParent(E);M.initialViewMode=z.getViewMode();M.parentGridCell=
E;M.elementUsageType=(z.isReportContainerPageGrid||z.parentGrid&&z.parentGrid.isReportContainerPageGrid)&&r.PAGE_PANEL_SECTION;var O=z.viewModel.layoutBuilder.getClass("section");return O.isAsync?c.showProgressPromise(E.domNode,O.loadModules()).then(I):I()},_createReportSectionFromParams:function(z,E,I){z=I.json&&I.json.stack&&I.json.type!==m.EMPTY?z.viewModel.layoutBuilder.createElement("section",I,E.getContentContainerNode()):z.viewModel.layoutBuilder.createElement("emptySection",I,E.getContentContainerNode());
E.setContent(z);new B(E,z,[["onWidthChanged","width"],["onHeightChanged","height"]]);return z},_placeInfographicInCell:function(z,E){function I(){if(E.domNode)return L._createInfographicFromParams(z,E,M)}var L=this,M={json:a.getFieldInfo(E).infographicJson,viewModel:z.viewModel,theme:z.theme,parentWidget:E,currentFeatureIndex:z.getFeatureIndexForCell(E),currentFeatureAttributes:z.currentFeatureAttributes,getPreviewValueFunction:z.getPreviewValueFunction,width:C(E),height:D(E),adjustElementsWhenResized:u.cellHasFloatingTableParent(E)},
O=z.viewModel.layoutBuilder.getClass("infographic");return O.isAsync?c.showProgressPromise(E.domNode,O.loadModules()).then(I):I()},_createInfographicFromParams:function(z,E,I){I=z.viewModel.layoutBuilder.createElement("infographic",{node:E.getContentContainerNode(),placeFunc:function(L){E.setContent(L)},creationParams:I});I.setViewMode&&I.setViewMode(z.getViewMode());new B(E,I,[["onWidthChanged","width"],["onHeightChanged","height"]]);return I},_placeChartInCell:function(z,E){function I(){if(E.domNode)return L._createChartPageFromParams(z,
E,O)}var L=this,M=a.getFieldInfo(E).chartJson;M.visualProperties.width=E.getWidth();M.visualProperties.height=E.getHeight();var O={json:M,viewModel:z.viewModel,theme:z.theme,currentFeatureIndex:z.getFeatureIndexForCell(E),currentFeatureAttributes:z.currentFeatureAttributes,parentWidget:E};M=z.viewModel.layoutBuilder.getClass("chart");return M.isAsync?c.showProgressPromise(E.domNode,M.loadModules()).then(I):I()},_createChartPageFromParams:function(z,E,I){z=z.viewModel.layoutBuilder.createElement("chart",
{node:E.getContentContainerNode(),placeFunc:function(L){E.setContent(L)},creationParams:I});new B(E,z,[["onWidthChanged","width"],["onHeightChanged","height"]]);return z},_placeMapInCell:function(z,E){function I(){if(E.domNode)return M=L._createMapFromParams(z,E,O)}var L=this,M,O={json:a.getFieldInfo(E).mapJson,viewModel:z.viewModel,theme:z.theme,parentWidget:E,currentFeatureIndex:z.getFeatureIndexForCell(E),currentFeatureAttributes:z.currentFeatureAttributes},Q=z.viewModel.layoutBuilder.getClass("map");
return Q.isAsync?c.showProgressPromise(E.domNode,Q.loadModules()).then(I):I()},_createMapFromParams:function(z,E,I){z=z.viewModel.layoutBuilder.createElement("map",{node:E.getContentContainerNode(),placeFunc:function(L){E.setContent(L)},creationParams:I});new B(E,z,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return z},_placeImageInCell:function(z,E,I){function L(){if(E.domNode)return aa=M._createImageFromParams(z,E,Y),M._renderCellTooltip(E),aa.getRenderPromise().then(function(){E.domNode&&
aa.resize({w:C(E),h:D(E)},E.getFullStyle())}),aa}var M=this,O=a.getFieldInfo(E),Q=O.imageJson,T=C(E),X=D(E);if(O.triggerJson)if(z.viewModel.dynamicReportInfo)I=I||this._getImageCellConditionalValueFromData(E),Q.fileName=I.conditionalStyle.fileName||Q.fileName,I.isUnavailableData||"number"!==typeof I.value||isNaN(I.value)||(a.setNumericCellValue(E,I.value),a.setCellGroupStyleStats(E,I.conditionalStyle.stats),E.setNumberValue(I.value,I.formatFunction,!1));else if(I=h.getConditionalStylePreview(O,E)){var U=
"number"===typeof I.value&&!isNaN(I.value);Q.fileName=I.fileName||g.getConditionalFileName(U?I.value:"first-non-default",O.triggerJson)||Q.fileName;U&&a.setNumericCellValue(E,I.value);a.setCellGroupStyleStats(E,I.stats)}Q.style.width&&Q.style.height&&!1!==Q.ownSizeInsideParent&&Math.round(Q.style.width)!==Math.round(T)&&Math.round(Q.style.height)!==Math.round(X)?Q.ownSizeInsideParent=!0:(Q.ownSizeInsideParent=!1,Q.style.width=T,Q.style.height=X);var aa,Y={json:Q,viewModel:z.viewModel,theme:z.theme,
parentWidget:E,currentFeatureIndex:z.getFeatureIndexForCell(E),currentFeatureAttributes:z.currentFeatureAttributes,alignParams:E.getFullStyle(),imageTriggerJson:O.triggerJson};O=z.viewModel.layoutBuilder.getClass("image");return O.isAsync?O.loadModules().then(L):L()},_getImageCellConditionalValueFromData:function(z){var E=z.parentGrid,I=a.getFieldInfo(z);z=h.getValueFromFieldData(I.triggerJson.fieldInfo,{fieldData:E.viewModel.dynamicReportInfo.fieldData,currentFeatureIndex:E.getFeatureIndexForCell(z),
currentFeatureAttributes:E.currentFeatureAttributes});z.conditionalStyle={fileName:g.getConditionalFileName(z.value,I.triggerJson)};return z},_createImageFromParams:function(z,E,I){z=z.viewModel.layoutBuilder.createElement("image",{node:E.getContentContainerNode(),placeFunc:function(L){E.setContent(L)},creationParams:I});new B(E,z,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return z},_placeShapeInCell:function(z,E){function I(){if(E.domNode)return T=L._createShapeFromParams(z,
E,X)}var L=this,M=a.getFieldInfo(E).shapeJson,O=C(E),Q=D(E);M.style.width=O;M.style.height=Q;var T,X={json:M,viewModel:z.viewModel,theme:z.theme,parentWidget:E,currentFeatureIndex:z.getFeatureIndexForCell(E),currentFeatureAttributes:z.currentFeatureAttributes,alignParams:E.getFullStyle(),getPreviewValueFunction:z.getPreviewValueFunction,applyThemeStyle:z.applyThemeStyle};M=z.viewModel.layoutBuilder.getClass("shape");return M.isAsync?M.loadModules().then(I):I()},_createShapeFromParams:function(z,E,
I){z=z.viewModel.layoutBuilder.createElement("shape",{node:E.getContentContainerNode(),placeFunc:function(L){E.setContent(L)},creationParams:I});new B(E,z,[["onWidthChanged","width"],["onHeightChanged","height"],["setStyle","horizontalAlign"]]);return z}})})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridStyleUtil":function(){define(["./GridLayoutCalculator","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil","../valueField/ValueField"],function(t,
p,l,k){var f={filterCellStyles:function(c){return f._filterCellStyles(c,k.SUPPORTED_STYLES)},filterCellTextStyles:function(c){return f._filterCellStyles(c,k.SUPPORTED_TEXT_STYLES)},_filterCellStyles:function(c,a){var b={},d;for(d in c)void 0!==c[d]&&a[d]&&(b[d]=c[d]);return b},combineCellStyle:function(c,a,b,d){var e={};if(f._isContainerCell(c,a,b))d=d||a.style.fields&&a.style.fields[b.field],l.copyOwnJsonProperties(d,e),delete e.backgroundColor;else{var g=c.viewModel.getDocumentDefaultStyles&&c.viewModel.getDocumentDefaultStyles(c.theme);
l.copyOwnJsonProperties(g,e);delete e.backgroundColor;f._canApplyDefaultTableStyle(c)&&c.viewModel.getTableDefaultStyles&&l.copyOwnJsonProperties(c.viewModel.getTableDefaultStyles(c.theme,"Default"),e);l.copyOwnJsonProperties(a.style,e);c.applyThemeStyle&&l.copyOwnJsonProperties(a.themeStyle&&a.themeStyle.fields&&a.themeStyle.fields[b.field],e);c.inheritThemeBackground||p.isTransparent(e.backgroundColor)||delete e.backgroundColor;d=d||a.style.fields&&a.style.fields[b.field];l.copyOwnJsonProperties(d,
e);if(e.overrideStyle&&c.viewModel.getTableDefaultStyles&&(d=c.viewModel.getTableDefaultStyles(c.theme,e.overrideStyle)))for(var h in d)if("backgroundColor"!==h||c.inheritThemeBackground||p.isTransparent(d[h]))e[h]=d[h]}e.width=t.calcFieldWidth(c,a,b.field);e.height=t.calcDataHeight(c,a,b.field);return f.filterCellStyles(e)},_isContainerCell:function(c,a,b){return c.viewModel.isGraphicStyle()?c.isReportContainerPageGrid?!0:(a=a.fieldInfos&&a.fieldInfos[b.field])?a.isReportSection?!0:c.isSingleCelledTable()&&
(a.isImage||a.isShape||a.isInfographic||a.isChart||a.isMap):!1:!1},_canApplyDefaultTableStyle:function(c){return c.viewModel.isGraphicStyle()?c.isMultiDataTable():!0}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentScaler":function(){define(["./GridDataUtil"],function(t){return{fitContentInsideCell:function(p,l){var k=t.getFieldInfo(p);if(k&&p.content){var f=p.content,c=p.parentGrid,a=p[c.hasRealBorders||c.isMultiDataTable()?"getContentWidth":"getWidth"]();c=
p[c.hasRealBorders||c.isMultiDataTable()?"getContentHeight":"getHeight"]();k.isReportSection?(f.setHeight(c,{resizeContentProportionally:!0}),f.setWidth(a,{resizeContentProportionally:!0})):k.isChart?f.resize(a,c):k.isInfographic?f.resize(a,c,{sync:l&&l.sync}):k.isMap?f.resize({w:a,h:c}):(k.isImage||k.isShape)&&f.resize({w:a,h:c},p.getFullStyle())}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridCellContentSynchronizer":function(){define(["./GridDataUtil","../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder"],
function(t,p){return{syncParentFieldInfoWithElementState:function(l,k){if(l&&k){var f=t.getFieldInfo(l);f&&(f.isChart?(f.chartJson.visualProperties.width=l.getWidth(),f.chartJson.visualProperties.height=l.getHeight()):f.isMap?t.setFieldInfo(l,p.createFieldInfoFromMap(k.toJson())):f.isImage?t.setFieldInfo(l,p.createFieldInfoFromImage(k.toJson(),k.imageTriggerJson)):f.isShape?t.setFieldInfo(l,p.createFieldInfoFromShape(k.toJson())):f.isReportSection?t.setFieldInfo(l,p.createFieldInfoFromSection(k.toJson())):
f.isInfographic&&t.setFieldInfo(l,p.createFieldInfoFromInfographic(k.toJson())))}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer":function(){define(["../../../grid/coreUtils/GridDataUtil","./utils","./_FieldInfoPreviewRenderer","./_FieldInfoDataRenderer","dojo/i18n!esri/nls/jsapi"],function(t,p,l,k,f){function c(m,r){r=r||15;return!m||m.length<=r?m:m.substr(0,r-3)+"..."}var a=f.geoenrichment.dijit.ReportPlayer.ReportPlayer.missingVariable,
b=f.geoenrichment.dijit.ReportPlayer.ReportPlayer.unsupportedContent;f=f.geoenrichment.dijit.ReportPlayer.VariableStates;var d={},e={renderPreview:function(m,r){return r.fieldData?k.getValueFromFieldData(m,r):l.getValuePreview(m,r)},tryProvideConditionalStylePreview:function(m,r,n){m.isUnavailableData||m.conditionalStyle||n.fieldData||!(r=l.getConditionalStylePreview(r,n))||(m.conditionalStyle=n.previewConditionalStyle?r:!1)},tryProvideRangeFilterPreview:function(m,r){m.isUnavailableData||m.modifiedValue||
r.fieldData||!r.presetFilter||(m.modifiedValue=l.getRangeFilterPreview(r))},tryProvideSortingPreview:function(m,r){m.isUnavailableData||r.fieldData||!r.presetSorting||(m.modifiedValue=l.getSortingPreview(r))}},g={buildVariableLabel:function(m){if(m.isWebMap)var r=c(m.webMapFieldName)+"(WebMap)";else if(m.isSiteAttribute)r=c(m.alias)+"(SiteAttribute)";else if(m.isDataLayerAttribute)r=c(m.alias||m.attribute&&m.attribute.alias)+"(NearbyLocations)";else if(m.isCustomDataCollection)r=c(m.alias)+"(CustomData)";
else a:{r=m.variableID;switch(m.statefulName&&m.statefulName.charAt(0).toLowerCase()){case "p":m=f.statePercent_short;break;case "a":m=f.stateAverage_short;break;case "i":m=f.stateIndex_short;break;case "r":m=f.stateReliability_short;break;default:break a}r=r+" ("+m+")"}return"["+r+"]"},_SCRIPT_ALIAS_RE:/\s/g,buildScriptLabel:function(m){m=m.alias?m.alias.replace(g._SCRIPT_ALIAS_RE,""):p.name.renderScriptName(m.name);return"["+c(m,40)+"]"}},h={renderRichTextFieldInfoInTableCell:function(m,r){return p.richText.createRichTextFromFieldInfo(m,
{getFieldInfoTagString:function(n){var q=d.renderFieldInfoInTableCell(n,r),u=q.formattedValue;r&&r.isBenchmarked&&(n=r.getBenchmarkInfo(q.value,n))&&n.formattedValue&&(u+=" ("+(n.isGreater?"+":"-")+n.formattedValue+")");return u},getLinkFieldInfoTagString:function(n){return d.renderFieldInfoInTableCell(n,r).formattedValue},actualLink:!0})}};d.renderFieldInfoInTableCell=function(m,r){r=r||{};var n={formattedValue:null,value:null,formatFunction:null,isUnavailableData:!1,conditionalStyle:null,modifiedValue:null};
if(m.isRichText)return n.formattedValue=h.renderRichTextFieldInfoInTableCell(m,r),n;if(m.isMissing)return n.formattedValue=a,n.isUnavailableData=!0,n;if(m.isUnsupportedContent)return n.formattedValue=b,n.isUnavailableData=!0,n;if(r.previewValues){if(n=e.renderPreview(m,r),n.isUnavailableData)return n}else n.formattedValue=m.hasVariable?g.buildVariableLabel(m):m.script?g.buildScriptLabel(m.script):"["+("Name"===m.alias?"Title":m.alias)+"]";if(t.isVariableLikeFieldCell(m)&&(e.tryProvideConditionalStylePreview(n,
m,r),e.tryProvideRangeFilterPreview(n,r),e.tryProvideSortingPreview(n,r),n.formattedValue=p.format.providePercentCurrencySymbols(n.formattedValue,m,{placePercentCurrencyInFront:!r.previewValues}),n.formatFunction)){var q=n.formatFunction;n.formatFunction=function(u){return p.format.providePercentCurrencySymbols(q(u),m,{placePercentCurrencyInFront:!r.previewValues})};n.conditionalStyle&&(n.conditionalStyle.formattedValue=n.formatFunction(n.conditionalStyle.value));n.modifiedValue&&(n.modifiedValue.formattedValue=
n.formatFunction(n.modifiedValue.value))}return n};d.getConditionalStylePreview=function(m,r){var n={};e.tryProvideConditionalStylePreview(n,m,{cell:r,rowIndex:r.row&&r.row.index,previewConditionalStyle:!0});return n.conditionalStyle};d.renderRichTextFieldInfoInTableCell=h.renderRichTextFieldInfoInTableCell;d.getValueFromFieldData=k.getValueFromFieldData;d.getFieldDataValue=k.getFieldDataValue;return d})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoPreviewRenderer":function(){define("dojo/string ./utils ./FieldInfoPreviewSampleUtil ./FieldInfoPreviewAttributeUtil ../../conditionalStyling/ConditionalStyleUtil esri/dijit/geoenrichment/utils/DateUtil ../../../grid/coreUtils/sorting/GridSortUtil ../../../grid/coreUtils/GridDataUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig ../../../sections/dynamicSettings/supportClasses/FilterUtil ./_FieldInfoDataRenderer dojo/i18n!esri/nls/jsapi ../../../../_devConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m){h=h.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var r={percent:[10,15,20,25,33,46,72,90,95],percentSmall:[2,3,4,5,6,7],index:[80,99,105,111,113,118,121,130],number:[1150,2013,5006,10135,20456,36813],numberSmall:[10,5,3,7,15]},n=/^MEDAGE|^AVGHHSZ|^UNEMPRT|ECYHSZAVG|ECYPTAMED/,q={percent:{MP19013a_B:72,MP19014a_B:70,EMP_TO_POP:25,NOHS:10,HSG:20,SC:30,BGPD:40,X9074_A:326},percentSmall:{UNEMPRT_CY:5},index:{},number:{MEDHINC_CY:55650,TOTPOP_CY:20456,TOTHH_CY:8546,
MEDDI_CY:38290,S01_BUS:11256,S01_EMP:60382,PCI_CY:30382,MEDNW_CY:88548,MEDVAL_CY:352430,X3004_A:5682,ACSMEDCRNT:1227,X5001_A:1762,X1003_A:4073,X4100_A:543,X8001_A:4538,X1130_A:3465,X7001_A:1568,X9008_A:246,X9073_A:158,X9045_A:42,POPGRWCYCY:1.05,POPGRWCYFY:1.12,ECYPTAPOP:20456,ECYHNIMED:55650},numberSmall:{AVGHHSZ_CY:2,MEDAGE_CY:36,ECYHSZAVG:2,ECYPTAMED:36},string:{TSEGNAME:"Bright Young Professionals",TLIFECODE:"L8",TLIFENAME:"Middle Ground",TSEGCODE:"8A",CONAME:"Coffee",NAICS:"1234",SIC:"5678",ADDR:"380 New York St, Redlands, CA",
STATE:"CA",STATE_NAME:"California",ZIP:"92373",ZIP4:"92373",CITY:"Redlands",STREET:"New York st.",DIRECTION:"SW",FRNCOD:"24"}},u={"Employee/ Population Ratio":"EMP_TO_POP","No High School Diploma":"NOHS","High School Graduate":"HSG","Some College":"SC","Bachelors/Grad/Prof Degree":"BGPD","Tickets to Movies/Museums/Parks: Average":"X9074_A"},w={};return{getValuePreview:function(y,C){return b.isVariableLikeFieldCell(y)?this._getVariableOrScriptPreview(y,C):this._getNonVariablePreview(y,C)},_getVariableOrScriptPreview:function(y,
C){function D(I){return{formattedValue:I,value:I,formatFunction:null,isUnavailableData:!1}}function G(I){I=0<y.decimals?Number((1.12345678*I).toFixed(y.decimals)):Math.round(I);if(y.unitPrefix)switch(y.unitPrefix){case "kilo":1E3>I&&(I*=1E3);break;case "mega":1E9>I&&(I*=1E6);break;case "giga":1E9>I&&(I*=1E9)}else y.isCompact&&1E3>I&&(I*=1E3);return{formattedValue:g.formatNumericValue(I,y),value:I,formatFunction:function(L){return g.formatNumericValue(L,y)},isUnavailableData:!1}}var F=this._getSampleCacheType(y);
if(m.preview.bigValues&&"number"===F)return G(1E12);if(C=this._getValueFromPreviewFunction(y,C))return"string"===typeof C.value?D(C.value):G(C.value);C=l.findNonEmptySample(y);if("string"===typeof C)return D(C);if("number"===typeof C)return G(C);var B=y.type||y.script&&("String"===y.script.type?"esriFieldTypeString":"esriFieldTypeDouble")||y.isSiteAttribute&&y.attribute.type;C=y.isSiteAttribute&&k.getAttributePreviewValue(y.attribute);if("esriFieldTypeDate"===B)return F=new Date,C&&F.setTime(C),D(c.formatDateShort(F));
if("esriFieldTypeString"===B)return D(q.string[y.isDataLayerAttribute?y.attribute.name:y.variableID]||C||h.sampleTextValue);if("number"===typeof C)return G(C);C=w[F]=w[F]||{};B=y.name+";"+y.decimals;var z=C[B];if(!z){z=q[F];var E=y.variableID?y.variableID:y.script&&u[y.script.alias];z=z[E];z||(F=r[F],z=F[Math.round((F.length-1)*Math.random())]);z=C[B]=z}return G(z)},_getSampleCacheType:function(y){var C=y.statefulName?"p"===y.statefulName.charAt(0):y.showPercent,D=y.statefulName&&"i"===y.statefulName.charAt(0);
y=y.hasVariable&&n.test(y.variableID);return C?y?"percentSmall":"percent":D?"index":y?"numberSmall":"number"},_getValueFromPreviewFunction:function(y,C){if(C=C.getPreviewValueFunction&&C.getPreviewValueFunction({fieldInfo:y})){var D=this._getSampleCacheType(y);D=0===D.indexOf("percent")?"percent":"number";C=C.fields&&C.fields[y.name]||C;return{value:C[D]||C.value,propName:D}}return null},_getNonVariablePreview:function(y,C){var D=void 0;if(C.getPreviewValueFunction){var G=C.getPreviewValueFunction({fieldInfo:y});
G&&(G=G.fields&&G.fields[y.name]||G,D=G.formattedValue||G.value)}void 0===D&&("headers.AREA_DESC"===y.name&&-1<C.currentFeatureIndex?(y=1+2*C.currentFeatureIndex,D=1===y?d.getSingleUnits()?"1 "+d.getSingleUnits():t.substitute(h.fieldPreviewAreaDescWithRadiusSingular,{radius:y}):d.getPluralUnits()?y+" "+d.getPluralUnits():t.substitute(h.fieldPreviewAreaDescWithRadiusPlural,{radius:y})):D=p.fields.getPreview(y.name,C.isGraphicReport,C.isMultiFeature)||y.alias);return{formattedValue:D,value:D,formatFunction:null,
isUnavailableData:!1}},getConditionalStylePreview:function(y,C){var D=y.triggerJson,G=C.cell;if(D&&void 0!==C.rowIndex){if(y=this._getValueFromPreviewFunction(y,C))return{style:f.getConditionalStyle(y.value,D),value:y.value};y=function(){var L=G.parentGrid.getCells().filter(function(O){return(O=b.getConditionalFormatting(O))&&O.groupId===D.groupId}),M=L.indexOf(G);return{index:M,numElements:L.length,value:1E3-10*M}};var F=D.calcMethod;if("aboveAverage"===F||"belowAverage"===F){C=D.cases.filter(function(L){return L.isDefault})[0];
var B=D.cases.filter(function(L){return!L.isDefault})[0],z=y(),E;"aboveAverage"===F?E=z.index<Math.floor(z.numElements/2):"belowAverage"===F&&(E=z.index>=Math.ceil(z.numElements/2));return E?{fileName:f.getConditionalFileName("first-non-default",D),style:f.styleFromSetters(B.setters),value:I}:{style:C?f.styleFromSetters(C.setters):{},value:z.value}}if("indexDescOrder"===F){z=y();var I=function(L){return 0<=L?L:z.numElements+L};return{fileName:f.getConditionalFileName(z.index,D,I),style:f.getConditionalStyle(z.index,
D,I),value:z.value,stats:{min:null,max:null,numElements:z.numElements}}}if(C=D.cases[C.rowIndex%D.cases.length])return E=f.styleFromSetters(C.setters),C.compareInfos&&(1===C.compareInfos.length?(I=Number(C.compareInfos[0].value),C=C.compareInfos[0].operator,"\x3e"===C?I++:"\x3c"===C&&I--):2===C.compareInfos.length&&(I=(Number(C.compareInfos[1].value)+Number(C.compareInfos[0].value))/2)),{style:E,value:I,stats:{min:0,max:100}}}return null},getRangeFilterPreview:function(y){if(y.presetFilter&&e.isRangeType(y.presetFilter.method)){if(y.presetFilter.columnIndex!==
y.columnIndex)return null;var C=e.getRangeStatistics(y.presetFilter.ranges),D=C.min;C=C.max;isFinite(D)||isFinite(C)?isFinite(C)?isFinite(D)||(D=0===C?0:0<C?C/2:2*C):C=0!==D?Math.abs(2*D):100:(D=0,C=100);var G=(C-D)/y.numRows;return{value:D+G*y.rowIndex,_min:D,_max:C,_step:G}}},getSortingPreview:function(y){var C=y.presetFilter&&this.getRangeFilterPreview(y);if(!y.presetSorting.order||y.presetSorting.field!==y.columnField)return C;var D=100,G=0,F=G+y.numRows*D;C&&(G=C._min,F=C._max,D=C._step);return{value:y.presetSorting.order===
a.ORDER_ASC?G+y.rowIndex*D:F-y.rowIndex*D}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewSampleUtil":function(){define(["dojo/_base/lang"],function(t){var p={findNonEmptySample:function(l){if(!l)return null;var k;return l.isSiteAttribute?(l.attribute.domain&&l.attribute.domain.codedValues&&l.attribute.domain.codedValues.some(function(f){if(p._isNonEmptySample(f.name))return k=f.name,!0}),k):l.isDataLayerAttribute&&l.attribute.samples&&
l.attribute.samples.length?(l.attribute.samples.some(function(f){if(p._isNonEmptySample(f))return k=f,!0}),k):null},getNonEmptySamples:function(l){if(!l)return null;if(l.isSiteAttribute){if(l.attribute.domain&&l.attribute.domain.codedValues)return l.attribute.domain.codedValues.map(function(k){return k.name}).filter(p._isNonEmptySample)}else if(l.isDataLayerAttribute&&l.attribute.samples&&l.attribute.samples.length)return l.attribute.samples.filter(p._isNonEmptySample);return null},_isNonEmptySample:function(l){return"string"===
typeof l?!!l.trim():!!l},provideSamplesFromLocatorSettings:function(l,k){l&&l.isDataLayerAttribute&&k&&k.searchText&&(l.attribute=t.clone(l.attribute),l.attribute.samples=p.getSamplesFromSearchText(k,20)||l.attribute.samples)},getSamplesFromSearchText:function(l,k){if(!l||!l.searchText)return null;var f=[];l=l.searchText.charAt(0).toUpperCase()+l.searchText.substr(1);for(var c=0;c<k;c++)f.push(l+" "+(c+1));return f}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoPreviewAttributeUtil":function(){define(["esri/dijit/geoenrichment/utils/FieldUtil",
"dojo/i18n!esri/nls/jsapi"],function(t,p){p=p.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;var l={},k={BUILDING_AREA:5E3,SITE_AREA:1E4,FRONTAGE:800,PARKING:300};l.getAttributePreviewValue=function(f){if(!f)return"";if(f.domain&&"codedValue"===f.domain.type)return f.domain.codedValues[0].name;if("esriFieldTypeString"===f.type)return p.sampleTextValue;if("esriFieldTypeDate"===f.type){var c=new Date;f.domain&&"range"===f.domain.type&&c.setTime(f.domain.range[0]);return c.getTime()}c=f.domain&&"range"===
f.domain.type?f.domain.range[0]:k[f.name]||Number((100*Math.random()+50).toFixed(1));return"i"===t.isNumericField(f)?Math.round(c):c};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/_FieldInfoDataRenderer":function(){define("esri/dijit/geoenrichment/ReportPlayer/config ../../conditionalStyling/ConditionalStyleUtil ../../../../dataProvider/supportClasses/data/AreaDataUtil ../../../../dataProvider/supportClasses/attachments/AttributesUtil ../../../grid/coreUtils/GridDataUtil esri/dijit/geoenrichment/utils/NumberUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b){function d(g,h){return void 0===g||null===g||"number"===typeof g&&isNaN(g)||"NaN"===g||"N/A"===g||"undefined"===g||"null"===g||h&&"number"!==typeof g}b=b.geoenrichment.dijit.ReportPlayer.ReportPlayer;var e={getValueFromFieldData:function(g,h){function m(){d(r,C)?n=void 0:C?(n=e.formatNumericValue(r,g),q=function(G){return e.formatNumericValue(G,g)}):n=String(r)}h=h||{};var r=void 0,n=void 0,q,u=!1,w,y=!1,C=f.isNumericVariableFieldCell(g);if(h.getPreviewValueFunction){var D=
h.getPreviewValueFunction({fieldInfo:g,currentFeatureIndex:h.currentFeatureIndex,currentFeatureAttributes:h.currentFeatureAttributes});D&&(y=!0,D=D.fields&&D.fields[g.name]||D,r=D.value,"string"===typeof D.formattedValue?n=D.formattedValue:m())}y||((r=r=e._getFieldDataValue(g,{fieldData:h.fieldData,featureIndex:h.currentFeatureIndex,featureAttributes:h.currentFeatureAttributes,isMultiFeature:h.isMultiFeature}))&&"object"===typeof r?(h=r,r=h.value,n=k.formatAttributeValue(h,{skipFormattedValue:!0,
unavailableDataValue:void 0,format:g})):m());d(r,C)&&(r=void 0);d(n,!1)&&(n=void 0);void 0===r&&void 0===n&&(console.log("Error: can't calculate value for \x3d\x3e "+g.name),r=NaN,n=t.tables.showUnavailableData?b.unavailableDataShort:"",u=!0);g.triggerJson&&(w={style:p.getConditionalStyle(r,g.triggerJson),value:r,formattedValue:n});return{value:r,formattedValue:n,formatFunction:q,isUnavailableData:u,conditionalStyle:w}},formatNumericValue:function(g,h){h=h||{};return h.unitPrefix||h.isCompact?c.formatNumberCompact(g,
{unitPrefix:h.unitPrefix,unitPrefixSymbol:h.unitPrefixSymbol,places:h.decimals,noSeparator:!h.useThousandsSeparator,preserveTrailingZeroes:!0}):a.formatNumber(g,{places:h.decimals,noSeparator:!h.useThousandsSeparator,preserveTrailingZeroes:!0})},getFieldDataValue:function(g,h){return(g=e._getFieldDataValue(g,h))&&"object"===typeof g?g.value:g},_getFieldDataValue:function(g,h){return g&&l.getAreaDataValue({fieldName:g.templateName||g.name,fieldData:h.fieldData,featureIndex:h.featureIndex,featureAttributes:h.featureAttributes,
isMultiFeature:h.isMultiFeature})}};return e})},"esri/dijit/geoenrichment/utils/NumberUtil":function(){define(["./DateUtil","./ObjectUtil"],function(t,p){var l={},k=function(c){var a=l[c];if(!1===a)return null;if(a)return a;a="ar bs cs da en el et fi fr he hr hu id lv lt nl nb pl pt-br pt-pt ro ru sl sr sv th tr uk vi zh-hk de it ca es".split(" ");-1!==a.indexOf(c)||-1!==a.indexOf(c.substr(0,2))?(a=function(b){b=f(b,{locale:c});var d=b.match(/(\d|\.|,)+/)[0];return b.replace(d,"")},l[c]={kilo:a(1E4),
mega:a(1E7),giga:a(1E10),tera:a(1E13)}):l[c]=!1;return l[c]},f=function(c,a){return(new Intl.NumberFormat(a.locale,{notation:"compact",compactDisplay:"short",minimumFractionDigits:a.places,maximumFractionDigits:a.places})).format(c)};return{formatNumberCompact:function(c,a){if(!window.Intl)return p.formatNumber(c,a);a.locale=a.locale||t.getDateNumberLocale();var b=k(a.locale);if(!a.unitPrefix||!b||!b[a.unitPrefix])return f(c,a);var d="";switch(a.unitPrefix){case "kilo":c/=1E3;d=b.kilo;break;case "mega":c/=
1E6;d=b.mega;break;case "giga":c/=1E9;d=b.giga;break;case "tera":c/=1E12,d=b.tera}return p.formatNumber(c,{locale:a.locale,places:a.places,noSeparator:a.noSeparator,preserveTrailingZeroes:a.preserveTrailingZeroes})+(d?a.unitPrefixSymbol||d:"")}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes":function(){define([],function(){var t={PAGE_PANEL_SECTION:"pagePanelSection",INFOGRAPHIC_HEADER_SECTION:"infographicHeaderSection",INFOGRAPHIC_SECTION:"infographicSection",INFOGRAPHIC_ICON_TABLE:"infographicIconTable",
INFOGRAPHIC_VARIABLE_TABLE:"infographicVariableTable",INFOGRAPHIC_DESC_TABLE:"infographicDescTable",isInfographicLike:function(p){return p===t.INFOGRAPHIC_HEADER_SECTION||p===t.INFOGRAPHIC_SECTION}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/SpecificViewModes":function(){define([],function(){return{RICH_TEXT:"richText",VARIABLE:"variable",SPECIAL:"special",INFOGRAPHIC:"infographic"}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/GridCellTooltipBuilder":function(){define("dojo/_base/declare ../GridDataUtil ../../../supportClasses/conditionalStyling/ConditionalStyleLegendBuilder ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer ../../../supportClasses/WidgetQueryUtil ../../valueField/supportClasses/TextRenderer ./_ScriptExpressionBuilder esri/dijit/geoenrichment/utils/ObjectUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h){h=h.geoenrichment.dijit.ReportPlayer.Grid;var m=t(null,{_cell:null,_content:"",constructor:function(u){this._cell=u},getContent:function(){return this._content?"\x3cdiv class\x3d'esriGEAdjustableGridValueField_cellTooltipContent'\x3e"+this._content+"\x3c/div\x3e":null},addValue:function(u){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+u+"\x3c/div\x3e"},addImageValue:function(u){var w=p.getNumericCellValue(u);
isNaN(w)||"number"!==typeof w||(u=u.numberFormatFunction?u.numberFormatFunction(w):d.formatNumber(w),this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentValue'\x3e"+u+"\x3c/div\x3e")},addAlias:function(u){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e\x3cb\x3e"+h.variable+"\x3c/b\x3e "+u+"\x3c/div\x3e"},buildRichText:function(u){var w=this._cell.parentGrid.viewModel.dynamicReportInfo;u=f.renderFieldInfoInTableCell(u,{previewValues:!0,fieldData:w&&
w.fieldData,isGraphicReport:!0,currentFeatureIndex:this._cell.parentGrid.currentFeatureIndex});this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+u.formattedValue+"\x3c/div\x3e"},addExpression:function(u,w){if(u=b.buildTooltipExpression(u,w))this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+h.variableIsBasedOnExpression+"\x3c/div\x3e",this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+u+"\x3c/div\x3e"},addConditionalStyleLegend:function(u){var w=p.getNumericCellValue(u),y=p.getCellGroupStyleStats(u),
C=p.getConditionalFormatting(u),D=p.getFieldInfo(u).isImage;this._content+=l.createLegendNode(C,y,D?"image":"text",w,u.numberFormatFunction).outerHTML},addTextBlock:function(u){this._content+="\x3cdiv class\x3d'esriGERowHigh'\x3e"+u+"\x3c/div\x3e"},addSeparator:function(){this._content+="\x3cdiv class\x3d'esriGERowHigh esriGEAdjustableGridValueField_cellTooltipContentSeparator'\x3e\x3c/div\x3e"}}),r=/<\w/,n={value:!1,alias:!0,expression:!1,conditional:!1},q={setDynamicTooltipToCell:function(u,w,y){if((u.hasOverflowText()||
p.isVariableLikeFieldCell(u)||p.isImageTriggerCell(u))&&q.isTooltipVisible(u)){var C=q.getTooltipInfo(u),D=q.getSourceFieldInfo(u);D=D&&!(!D.script&&!D.expressionText)&&C.expression;C=!!C.fieldInfo;C=D||C;u.own(e.setTooltipToNode(u.domNode,function(){return q.renderCellTooltip(u,w,y)},{notRestricted:D,stayOnHover:C,classes:"esriGEAdjustableGridValueField_cellTooltip"+(C?"":" esriGENonInteractable"),style:q.getTooltipStyleFunc(u)}))}},getTooltipInfo:function(u){var w=q.getSourceFieldInfo(u);return w&&
w.tooltipInfo?w.tooltipInfo:(u=c.getReportContainerGrid(u))&&u.tooltipInfo&&u.tooltipInfo.table||n},isTooltipVisible:function(u){var w=q.getSourceFieldInfo(u);if(w&&w.dataDrillingPanelInfo)return!1;u=q.getTooltipInfo(u);return u.value||u.alias||u.expression||u.conditional||u.fieldInfo},getSourceFieldInfo:function(u){var w=p.getFieldInfo(u);u=p.getConditionalFormatting(u);return w&&w.isImage?u&&u.fieldInfo:w},getTooltipStyleFunc:function(u){return function(){return q.getTooltipStyle(u)}},getTooltipStyle:function(u){if(!u.parentGrid)return null;
var w={},y=u.parentGrid.viewModel.getTheme(u.parentGrid.theme).table.tooltip;d.copyOwnJsonProperties(y,w);d.copyOwnJsonProperties(q.getTooltipInfo(u).style,w);return w},renderCellTooltip:function(u,w,y){y=y||{};var C=y.getExpression||function(Q){return g.modules.complexCellTooltips&&Q.expressionText},D=a.getFullText(u),G=p.getFieldInfo(u),F=G&&G.isImage,B=p.isVariableLikeFieldCell(G),z=p.getConditionalFormatting(u),E=q.getSourceFieldInfo(u),I=G&&G.isRichText||D&&r.test(D),L=new m(u),M=q.getTooltipInfo(u);
B?(M.value&&D&&L.addValue(D),M.alias&&L.addAlias(k.getFieldInfoAlias(G))):F?(M.value&&L.addImageValue(u),M.alias&&L.addAlias(k.getFieldInfoAlias(E))):D&&!I&&M.value&&D&&L.addValue(D);M.fieldInfo&&L.buildRichText(M.fieldInfo);if(M.expression){var O=C(E);O&&L.addExpression(O,w)}M.conditional&&z&&g.modules.complexCellTooltips&&(O&&L.addSeparator(),y.conditionalLegendDesc&&L.addTextBlock(y.conditionalLegendDesc),L.addConditionalStyleLegend(u));return L.getContent()}};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleLegendBuilder":function(){define("dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../images/ImageDataHolder ./ConditionalStyleUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b){function d(n,q,u,w,y,C){var D=c.getMatchedCase(w,q,C)||"image"===u&&q.cases.filter(function(G){return G.isDefault})[0];q.cases.some(function(G){g(n,G,u,{isSelected:D===G,valueFormatFunc:y,triggerValueConverter:C})})}function e(n,q,u){if(1===n.compareInfos.length){var w=n.compareInfos[0],y=+w.value,C=w.operator;if("\x3d"===C)return 0===y?b.topAt0:1===y?b.topAt1:2===y?b.topAt2:-1===y?b.bottomAt0:-2===y?b.bottomAt1:-3===y?b.bottomAt2:0<y?t.substitute(b.topAtN,[y+1]):t.substitute(b.bottomAtN,
[-y]);if(("\x3c"===C||"\x3c\x3d"===C)&&0<=y)return t.substitute(b.topN,[y+("\x3c"===w.operator?0:1)]);if(("\x3e"===C||"\x3e\x3d"===C)&&0>y)return t.substitute(b.bottomN,[-y+("\x3e"===w.operator?-1:0)])}return h(n,q,null,function(D){return 0<=D?D+1:u.numElements+D+1},b.indexDescOrder_interval)}function g(n,q,u,w){w=w||{};var y=w.customDesc||h(q,u,w.valueFormatFunc,w.triggerValueConverter),C=c.styleFromSetters(q.setters);if(y&&C){n=l.create("div",{"class":"esriGEConditionalStylingLegend_row"},n);var D=
l.create("div",{"class":"dijitInline"},n);"image"===u?l.create("div",{"class":"esriGEConditionalStylingLegend_symbolImage dijitInline"},D).style.backgroundImage="url("+(f.getImageData(q.setters[0].value)||"")+")":("chart"===u?p.add(D,"esriGEConditionalStylingLegend_symbolChart"):(p.add(D,"esriGEConditionalStylingLegend_text"),D.innerHTML=b.conditionalLegend_preview),D.style.backgroundImage="none",k.set(D,C));l.create("div",{"class":"dijitInline esriGESpaceBeforeBig",innerHTML:y},n);w.isSelected&&
p.add(n,"esriGEConditionalStylingLegend_currentValue")}}function h(n,q,u,w,y){function C(D){var G=a.parseNumber(D);G=w?w(G):G;return isNaN(G)?D:u?u(G):a.formatNumber(G)}if("image"===q&&n.isDefault)return b.conditionalLegend_default;if(!n.compareInfos||!n.compareInfos.length)return null;n=n.compareInfos.map(function(D){return t.substitute(b["conditionalLegend_operator_"+r[D.operator]],{value:C(D.value)})});return 1===n.length?n[0]:t.substitute(y||b.conditionalLegend_interval,{from:n[0],to:n[1]})}b=
b.geoenrichment.dijit.ReportPlayer.ConditionalLegend;var m={},r={"\x3d":"equals","\x3c":"less","\x3e":"greater","\x3c\x3d":"lessOrEquals","\x3e\x3d":"greaterOrEquals"};m.createLegendNode=function(n,q,u,w,y){if(!u)return null;var C=l.create("div",{"class":"esriGEConditionalStylingLegend esriGEConditionalStylingLegend_"+u});l.create("div",{"class":"esriGEConditionalStylingLegend_row",innerHTML:b.conditionalLegend_title},C);if(n.calcMethod)if("percentInGroup"===n.calcMethod)d(C,n,u,w,y,function(G){return c.conditionalValueFromPercentInGroup(q.min,
q.max,G)});else{if("indexDescOrder"===n.calcMethod)w=n.cases.filter(function(G){return G.isDefault})[0],n.cases.filter(function(G){return!G.isDefault}).forEach(function(G){g(C,G,u,{customDesc:e(G,u,q)})});else{w=n.cases.filter(function(G){return G.isDefault})[0];y=n.cases.filter(function(G){return!G.isDefault})[0];if("aboveAverage"===n.calcMethod)var D=b.aboveAverage;else"belowAverage"===n.calcMethod&&(D=b.belowAverage);g(C,y,u,{customDesc:D})}w&&g(C,w,u,null)}else d(C,n,u,w,y,null);return C};return m})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/_ScriptExpressionBuilder":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil"],function(t){var p=/\s*/g,l=/(!.*?!|\+|\-|\*|\/|\(|\)|\^|\d+\.\d+|\d+)/g,k=/___.*?___/g,f=/___(.*?)___/g,c=/!/g,a=/\d+/;return{buildTooltipExpression:function(b,d){b=Array.isArray(b)?this._validateExpression(b,d):this._maskAndValidateExpressionText(b,d);if(!b||!b.length)return null;d="";for(var e=0,g=b.length;e<g;e++){var h=b[e],m=b[e+1];"*"!==
h.operator&&"/"!==h.operator||!m||"1"!==m.number?h.variableAlias?d+="\x3cdiv class\x3d'dijitInline'\x3e\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expressionVariable'\x3e"+h.variableAlias+"\x3c/div\x3e\x3c/div\x3e":h.operator?d+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionOperator'\x3e"+h.operator+"\x3c/div\x3e":void 0!==h.number&&(d+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionNumber'\x3e"+h.number+"\x3c/div\x3e"):e++}return"\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expression'\x3e"+
d+"\x3c/div\x3e"},_maskAndValidateExpressionText:function(b,d){b=b.replace(p,"");b=b.replace(l,"___$1___");return b.replace(k,"").length?null:b.match(k).map(function(e){e=e.replace(f,"$1");return 0===e.indexOf("!")?(e=d.get(e.replace(c,"")),{variableAlias:e&&e.alias||"N/A"}):e.match(a)?{number:t.formatNumber(Number(e))}:{operator:e}})},_validateExpression:function(b,d){return b.map(function(e){return e.variable?(e=d.get(e.variable.fullName),{variableAlias:e&&e.alias||"N/A"}):"number"===typeof e.name||
"string"===typeof e.name&&e.name.match(a)?{number:t.formatNumber(Number(e.name))}:{operator:e.name}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutSizer":function(){define(["./GridLayoutCalculator"],function(t){var p={resizeToFitAllowedWidth:function(l,k){p._resizeWidthForParams(l,{resetWidth:!0,columnsToPreserve:l.columns,stickToRight:!0,rightOffsetWeight:k&&k.rightOffsetWeight})},resizeToFitWidth:function(l,k){k&&!isNaN(k)&&p._resizeWidthForParams(l,{resetWidth:!0,columnsToPreserve:l.columns,
newWidth:k})},_resizeWidthForParams:function(l,k){t.recalcColumns(l,k);l.getCells().forEach(function(f){f.setWidth(t.calcFieldWidth(l,f.row,f.column.field))});p._makeFinalAdjustments(l)},_makeFinalAdjustments:function(l){t.positionCells(l);l.getCells().forEach(function(k){k.updateSizers&&k.updateSizers()});l.getCells().forEach(function(k){k.updateRotationControls&&k.updateRotationControls()})},resizeToFitHeight:function(l,k){t.recalcRowsToFitHeight(l,k);l.getCells().forEach(function(f){f.setHeight(t.calcDataHeight(l,
f.row,f.column.field))});p._makeFinalAdjustments(l)},scaleProportionallyWithinParent:function(l,k){var f=l.getTableBox();l.setPosition(f.l*k.xScale,f.t*k.yScale);1!==k.xScale&&p.resizeToFitWidth(l,f.w*k.xScale);1!==k.yScale&&p.resizeToFitHeight(l,f.h*k.yScale)},scaleProportionallyPreservingCenter:function(l,k){var f=l.getTableBox(),c=f.w*k.xScale,a=f.h*k.yScale;l.setPosition(f.l+(f.w-c)/2,f.t+(f.h-a)/2);1!==k.xScale&&p.resizeToFitWidth(l,c);1!==k.yScale&&p.resizeToFitHeight(l,a)}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/_GridDebugUtil":function(){define(["esri/dijit/geoenrichment/when",
"../../../_devConfig"],function(t,p){var l={},k=0;l.refreshStart=function(f){p.table.printGridRefresh&&(f=l._getGridInfo(f,!0),console.log("AdjustableGrid.js "+f.key+" \x3d\x3e refresh \x3d\x3e start"))};l.refreshEnd=function(f){p.table.printGridRefresh&&t(f.getRenderPromise(),function(){var c=l._getGridInfo(f,!1);console.log("AdjustableGrid.js "+c.key+" \x3d\x3e refresh \x3d\x3e end ("+c.refreshTime+" ms)")})};l._getGridInfo=function(f,c){if(f.isReportContainerPageGrid)var a="Page grid";else{var b=
[];for(a=f.parentWidget;a;){b.push(a);if(a.isReportContainerPageGrid)break;a=a.parentWidget}a=b[b.length-1].getCells().indexOf(b[b.length-2]);b=b.length;for(var d="",e=0;e<b;e++)d+="\x3e";void 0===f._debugId&&(f._debugId=k++);a="panel "+a+" "+d+"("+f._debugId+")"}var g;c?f._degubStartTime=(new Date).getTime():g=(new Date).getTime()-f._degubStartTime;return{key:a,refreshTime:g}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartContainer":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/dom-class dojo/dom-construct dojo/dom-style esri/dijit/geoenrichment/when dijit/_WidgetBase dijit/_TemplatedMixin ./_ChartLegendSupport ./_ChartEventSupport ./_ChartComparisonSupport esri/dijit/geoenrichment/ReportPlayer/config ./utils/ChartTypes ./utils/ChartSorting ./utils/ChartJsonUtil ./utils/builder/ChartPlots ./utils/ChartFilterUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/WaitingUtil ../sections/dynamicSettings/supportClasses/FilterUtil ../supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil dojo/text!../templates/ChartContainer.html dojo/i18n!esri/nls/jsapi ../../_devConfig".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y,C,D,G,F,B,z,E,I,L){function M(){if(P)return P.promise;var P=new k;t("dojox/charting/Chart dojox/charting/action2d/Magnify ./utils/action2d/Highlight ./utils/builder/ChartBuilder ./utils/ChartCalculator ./utils/ChartStyleUtil ./tooltips/ChartTooltip ./iconRendering/IconRenderer ./textRendering/TextRenderer ./tableViewRendering/TableViewRenderer".split(" "),function(S,ca,da,oa,ta,Ga,Ja,Qa,wb,Ka){Q=S;T=ca;X=da;U=oa;aa=ta;Y=Ga;ea=Ja;K=Qa;V=wb;N=Ka;O=p(Q,
{_renderPlotBackground:function(Xa,Ya,La,wa){this.theme.plotarea.backgroundImageData?this.surface.createImage({src:this.theme.plotarea.backgroundImageData,x:Ya.l-1,y:Ya.t-1,width:La+2,height:wa+2}):this.inherited(arguments)}});P.resolve()});return P.promise}I=I.geoenrichment.dijit.ReportPlayer.ChartContainer;var O,Q,T,X,U,aa,Y,ea,K,V,N;return p([d,e,g,h,m],{templateString:E,nls:I,viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,immediateRender:!1,chartTheme:null,enableAxisLabelsAutoTilt:!1,
isEditMode:!1,chart:null,_currentSeries:null,_iconRenderer:null,_textRenderer:null,_tableViewRenderer:null,_tableViewInfo:null,_renderChartPendingFlag:!1,postCreate:function(){this.inherited(arguments);this._showError(!1);C.hide(this.missingVariablesDiv);this.viewModel.isGraphicStyle()&&f.add(this.domNode,"graphicReportChart");f.add(this.domNode,this.viewModel.isLightDocumentTheme(this.theme)?"light":"dark");this._showEmptyView(!1)},_currentSeriesItems:null,_currentSeriesItemsUnfiltered:null,_originalSeriesItems:null,
_currentVisualProperties:null,_currentChartType:null,_currentComparisonInfo:null,_currentDataDrillingPanelInfo:null,_isMultiFeatureChart:null,_initPromise:null,_firstRenderPromise:null,_hasPresetFilter:null,updateChart:function(P){var S=this;this._destroyChart();if(P)return this._checkForMissingVariables(P),this._currentChartType=P.type,this._currentSeriesItems=(this._isMultiFeatureChart=P.isMultiFeatureChart)?u.getSeriesItemsForMultiFeatureChart(P.type,P.seriesItems,this.viewModel.dynamicReportInfo&&
this.viewModel.dynamicReportInfo.fieldData.areaData):P.seriesItems,this._originalSeriesItems=P.seriesItems&&P.seriesItems.slice(),this._currentVisualProperties=P.visualProperties,this._currentComparisonInfo=P.comparisonInfo,this._currentDataDrillingPanelInfo=P.dataDrillingPanelInfo,a.set(this.domNode,{width:this._currentVisualProperties.width+"px",height:this._currentVisualProperties.height+"px"}),this.domNode.style.backgroundColor=this._currentVisualProperties.panelBackgroundColor||"",C.hide(this.chartLabel),
this._initPromise=M().then(function(){S.domNode&&(S._initChartComparisonSelect(),S._updateLabels(),S._createChart(),!r.isPlayerOnServer&&S._addPlotEventListeners(),S._createLegend())}),this._firstRenderPromise=b(this._initPromise,function(){var ca=S._currentVisualProperties.filter;S._hasPresetFilter=!!ca;return!ca||ca.ranges&&!S.viewModel.dynamicReportInfo?S._updateSeries():b(S.getFilterRanges(),function(da){da=da.map(function(oa){var ta=B.filterData(oa.dataArray,ca);return{fieldName:oa.fieldName,
min:ta[0],max:ta[ta.length-1]}});return S._setFilterRanges(da)})}),F.showProgressPromise(this.domNode,this._initPromise)},getRenderPromise:function(){return this._firstRenderPromise},_checkForMissingVariables:function(P){var S,ca,da;z.processChartFieldInfos(P,function(ta,Ga){if(ta.isMissing)switch(Ga){case "series":S=!0;break;case "tooltip":ca=!0;break;case "dataDrilling":da=!0}});var oa=S||ca||da;C[oa?"show":"hide"](this.missingVariablesDiv);oa&&(this.missingVariablesDiv.innerHTML=S?I.containsMissingVariablesInData:
ca?I.containsMissingVariablesInTooltip:I.containsMissingVariablesInInteractivePanel,this.missingVariablesDiv.style.top=(P.visualProperties.height-this.missingVariablesDiv.clientHeight)/2+"px")},isMultiFeatureChart:function(){return this._isMultiFeatureChart},getLegendNode:function(){return this.legendContainerDiv},getChartSeries:function(){return this._currentSeries},_updateLabels:function(){this.chartLabel.innerHTML=this._currentVisualProperties.title.text;C[this.chartLabel.innerHTML?"show":"hide"](this.chartLabel);
this.chartLabel.style.textAlign=this._currentVisualProperties.title.align;this.chartLabel.style.marginTop=(this._currentVisualProperties.title.verticalShift||0)+"px";var P=l.mixin({},this.viewModel.getChartDefaultStyles(this.theme).titleStyle,this._currentVisualProperties.title.style);delete P.backgroundColor;a.set(this.chartLabel,Y.getStyleObjWithUnits(P))},_createChart:function(){var P=c.create("div",{"class":"chartContainerDiv_innerChartNode"},this.chartContainerDiv),S=new O(P,{margins:this._getChartMargins()});
this.chart=S;S.setTheme(this.chartTheme);U.getChartBuilder(this._currentChartType).configureChart({chart:S,seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,chartType:this._currentChartType,comparisonInfo:this._currentComparisonInfo,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),viewModel:this.viewModel,currentFeatureIndex:this.currentFeatureIndex});if(!r.isPlayerOnServer){if(this.viewModel.dynamicReportInfo||L.charts.enableEffects)this._currentChartType===
n.PIE&&new T(S,w.PRIMARY,{scale:1.03}),w.getWorkingPlots(S).forEach(function(ca,da){new X(S,ca)},this);this._setChartTooltip()}},_getChartMargins:function(){function P(ca){return"number"===typeof S._currentVisualProperties[ca]?S._currentVisualProperties[ca]:10}var S=this;return{t:P("marginTop"),r:P("marginRight"),b:P("marginBottom"),l:P("marginLeft")}},_setChartTooltip:function(){w.getWorkingPlots(this.chart).forEach(function(P,S){S=0===S?this._currentChartType:this._getComparisonChartType();(new ea(this.chart,
P,{duration:50})).setChartType(S)},this)},_destroyChart:function(){this._levelLineBuilder&&this._levelLineBuilder.hideLevelLine();this.chartContainerDiv&&(this.chartContainerDiv.innerHTML="");this.chart&&this.chart.destroy();this.chart=null;this._destroyLegend()},_updateSeries:function(){var P=this;this._removeSeries();if(this.chart){if(!this._currentSeriesItems)return this.resize();this._seriesTotalStats={};this._currentSeries=U.getChartBuilder(this._currentChartType).calcSeries({chartContainer:this,
chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,theme:this.theme,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,currentFeatureIndex:this.currentFeatureIndex,plotStats:this._seriesTotalStats,excludedSeriesHash:this._excludedSeriesHash,sorting:this._sorting||this._currentVisualProperties.sorting,comparisonInfo:this._currentComparisonInfo,
comparisonFeatureAttributes:this._getComparisonFeatureAttributes(),dataDrillingPanelInfo:this._currentDataDrillingPanelInfo});var S=U.checkSeriesAreValid(this._currentSeries);this._showError(!S);if(S){this._currentSeries.forEach(function(da){P._excludedSeriesHash[da.name]||P.chart.addSeries(da.name,da.data,da.params)});var ca=this.resize()}return b(ca,function(){P.onContentUpdated()})}},_removeSeries:function(){var P=this;this._currentSeries=this._currentSeries||[];this._currentSeries.forEach(function(S){P.chart.removeSeries(S.name)});
this._currentSeries.length=0},_chartWidth:0,_chartHeight:0,_resizedFlag:!1,_resizeDfd:null,_pendingResizeObj:!1,resize:function(P,S,ca){if(this._currentVisualProperties)return void 0!==P&&a.set(this.domNode,{width:P+"px",height:S+"px"}),b(this._initPromise,function(){if(C.isNodeInLayout(this.domNode))return void 0!==P&&aa.resizeVisualProperties(this._currentVisualProperties,P,S),this._resizedFlag||(this.domNode.style.opacity="0"),this._resizeDfd=this._resizeDfd||new k,ca||this.immediateRender?this._doResizeChart():
D.invoke(this,"_doResizeChart",50);this._pendingResizeObj={width:P,height:S,immediate:ca}}.bind(this))},_doResizeChart:function(){if(this.chart){this._resizedFlag||(this.domNode.style.opacity="1");this._resizedFlag=!0;this._updateLegend();var P=aa.calcChartDimentions(this,{visualProps:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chartType:this._currentChartType,maxIconSize:K.AXIS_ICON_MAX_SIZE,numPoints:this._currentSeries[0]?this._currentSeries[0].data.length:0}),S=P.w;
P=P.h;if(this.enableAxisLabelsAutoTilt&&this.viewModel.isGraphicStyle()&&n.hasAxis(this._currentChartType)&&!n.isXAxisVertical(this._currentChartType)){var ca=aa.calcAxisLabelsAutoTilt(S,this._currentSeries,this._currentVisualProperties,this.viewModel.getChartDefaultStyles(this.theme));this.chart.getAxis("x").opt.rotation=ca?-ca:-this._currentVisualProperties.xAxis.labelsAngle}this._chartWidth=S;this._chartHeight=P;this._adjustErrorMessage();if(this._tableViewInfo)this._refreshTableView(),this._renderChartPendingFlag=
!0;else{try{this.chart&&(this.chart.isPreRenderMode=n.isColumnBarLike(this._currentChartType),this.chart.resize(this._chartWidth,this._chartHeight),this.chart.dirty&&this.chart.render(),n.isColumnBarLike(this._currentChartType)&&(U.getChartBuilder(this._currentChartType).updateBarSize({chart:this.chart,chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,currentFeatureIndex:this.currentFeatureIndex,viewModel:this.viewModel,seriesItems:this._currentSeriesItems,visualProperties:this._currentVisualProperties,
chartSize:this.chart.plotArea[n.isColumnLike(this._currentChartType)?"width":"height"],excludedSeriesHash:this._excludedSeriesHash,comparisonInfo:this._currentComparisonInfo,numComparisonFeatures:this._getNumComparisonFeatures()}),U.getChartBuilder(this._currentChartType).prettifyColumnBarYAxis({totalStat:this._seriesTotalStats,chart:this.chart,chartType:this._currentChartType,chartSeries:this._currentSeries,themeSettings:this.viewModel.getChartDefaultStyles(this.theme),visualProperties:this._currentVisualProperties,
chartSize:this.chart.plotArea[n.isColumnLike(this._currentChartType)?"height":"width"],viewModel:this.viewModel})),this.chart.isPreRenderMode=!1,this.chart.dirty&&this.chart.render())}catch(da){console.log(da)}this._updateLegend();this._updateIcons();this._updateTexts();this._resizeDfd&&this._resizeDfd.resolve();this._resizeDfd=null;this.onRendered()}}},notifyShown:function(){var P=this;return b(this._initPromise,function(){C.isNodeInLayout(P.domNode)&&b(P._pendingResizeObj&&P.resize(P._pendingResizeObj.width,
P._pendingResizeObj.height,P._pendingResizeObj.immediate),function(){P._pendingResizeObj=null;P.viewModel.isAnimationAllowed()&&w.getWorkingPlots(P.chart).forEach(function(S,ca){P.chart.getPlot(S).renderAnimation&&P.chart.getPlot(S).renderAnimation()})})})},onRendered:function(){},_getIconRendererClass:function(){return K},_updateIcons:function(){this._iconRenderer||(this._iconRenderer=(new this._getIconRendererClass)(),this.own(this._iconRenderer),this._iconRenderer.setViewMode(this._viewMode));
this._iconRenderer.renderIcons({viewModel:this.viewModel,theme:this.theme,parentWidget:this,chartType:this._currentChartType,iconNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,comparisonInfo:this._currentComparisonInfo,chart:this.chart})},_getTextRendererClass:function(){return V},_updateTexts:function(){this._textRenderer||(this._textRenderer=(new this._getTextRendererClass)(),this._textRenderer.currentFeatureIndex=
this.currentFeatureIndex,this.own(this._textRenderer),this._textRenderer.setViewMode(this._viewMode));this._textRenderer.renderTexts({viewModel:this.viewModel,theme:this.theme,parentWidget:this,textNode:this.chartContainerWithAxis,chartW:this._chartWidth,chartH:this._chartHeight,visualProperties:this._currentVisualProperties,chart:this.chart})},_viewMode:null,setViewMode:function(P){if(this._viewMode!==P)return this._viewMode=P,b(this._initPromise,function(){this._iconRenderer&&this._iconRenderer.setViewMode(P);
this._textRenderer&&this._textRenderer.setViewMode(P);this._tableViewRenderer&&this._tableViewRenderer.setViewMode(P)}.bind(this))},_showError:function(P){L.emulateErrors.contentErrors&&(P=!0);C[P?"show":"hide"](this.errorDiv);C[P?"hide":"show"](this.chartNormalViewDiv)},_adjustErrorMessage:function(){this.errorDiv.style.paddingTop=a.get(this.domNode,"height")/2-20+"px"},_sorting:null,getSorting:function(){return this._sorting},sortChart:function(P){this._sorting=P&&P!==q.NONE?P:null;return b(this._initPromise,
function(){this._updateSeries()}.bind(this))},_filterStats:null,_numShownElements:null,_filterRanges:null,canFilterAreas:function(){return this._isMultiFeatureChart&&!!this._getGeoenrichment()},canFilterVariables:function(){return n.canFilterVariables(this._currentChartType,this._isMultiFeatureChart)},getFilterRanges:function(){return this.canFilterAreas()||this.canFilterVariables()?b(this._initPromise,function(){this.canFilterAreas()?this._filterStats=this._getGeoenrichment().collectFilterRangesStats():
this._filterStats=y.collectStatsForVariables(this._currentChartType,this._currentSeriesItemsUnfiltered||this._currentSeriesItems,this._currentVisualProperties,this.viewModel,this.currentFeatureIndex);return this._filterStats.filterRanges}.bind(this)):this._filterStats=null},setFilterRanges:function(P){this._hasPresetFilter=!1;return this._setFilterRanges(P)},_setFilterRanges:function(P){this._filterRanges=P;return b(this._initPromise,function(){this._currentSeriesItemsUnfiltered&&(this._currentSeriesItems=
this._currentSeriesItemsUnfiltered,this._currentSeriesItemsUnfiltered=null);this._currentSeriesItemsUnfiltered=this._currentSeriesItems;var S=y.filterSeriesItems(this._currentChartType,this._currentSeriesItems,this._currentVisualProperties,P,this.viewModel,this.currentFeatureIndex,this.canFilterAreas());this._currentSeriesItems=S.seriesItems;this._numShownElements=S.numShownElements;var ca;this.canFilterAreas()&&this._setFilterRangesForComparison(P)?this._numShownElements+=this._getGeoenrichment().getAllGeographyAttributes().length:
ca=this._updateSeries();this._showEmptyView(!this._numShownElements);return ca}.bind(this))},getNumElementsTotal:function(){return this._filterStats&&(this.canFilterAreas()?this._filterStats.numAreasTotal:this._filterStats.numVariablesTotal)||0},getNumElementsShown:function(){return"number"===typeof this._numShownElements?this._numShownElements:this.getNumElementsTotal()},_showEmptyView:function(P){C[P?"hide":"show"](this.chartNormalViewDiv);C[P?"show":"hide"](this.noDataPlaceHolder);P&&this._syncEmptyViewPlaceholder()},
_syncEmptyViewPlaceholder:function(){this.noDataPlaceHolder&&a.set(this.noDataPlaceHolder,"paddingTop",(a.get(this.domNode,"height")-a.get(this.noDataPlaceHolder,"height"))/2+"px")},chartToTable:function(P){return b(this._initPromise,function(){this._removeTable();this._setIsTableView(P);C.hide([this.chartContainerDiv,this.legendContainerDiv]);for(var S=0;S<this.chartContainerWithAxis.children.length;S++){var ca=this.chartContainerWithAxis.children[S];ca!==this.tableContainerDiv&&C.hide(ca)}this._tableViewRenderer||
(this._tableViewRenderer=new N,this.own(this._tableViewRenderer),this._tableViewRenderer.setViewMode(this._viewMode));return this._refreshTableView(!0)}.bind(this))},_refreshTableView:function(P){return this._tableViewRenderer.renderTableForChart({chartType:this._currentChartType,isMultiFeatureChart:this._isMultiFeatureChart,viewModel:this.viewModel,theme:this.theme,parentWidget:this,tableNode:this.tableContainerDiv,width:a.get(this.domNode,"width"),height:this._chartHeight,chartSeries:this._currentSeries,
visualProperties:this._currentVisualProperties,hasComparison:!!this._currentComparisonInfo,chart:this.chart,showAnimation:P,tableViewInfo:this._tableViewInfo})},tableToChart:function(){if(this._tableViewInfo)return b(this._initPromise,function(){this._removeTable();if(this._renderChartPendingFlag)return this._renderChartPendingFlag=!1,b(this.resize(),this.notifyShown.bind(this));this.notifyShown()}.bind(this))},_removeTable:function(){this._setIsTableView(null);C.show([this.chartContainerDiv,this.legendContainerDiv]);
for(var P=0;P<this.chartContainerWithAxis.children.length;P++)C.show(this.chartContainerWithAxis.children[P]);this._tableViewRenderer&&this._tableViewRenderer.destroyTable()},_setIsTableView:function(P){this._tableViewInfo=P;f[this._tableViewInfo?"add":"remove"](this.domNode,"isChartDataInTableView");this._updateComparisonLabel()},getVisualState:function(){return{type:"chart",sorting:this.getSorting(),hasPresetFilter:this._hasPresetFilter,filterRanges:this._filterRanges&&l.clone(this._filterRanges),
comparisonAttributes:this._comparisonAttributes,additionalAttributes:this._additionalAttributes&&this._additionalAttributes.slice(),tableViewInfo:this._tableViewInfo&&l.clone(this._tableViewInfo),tableViewRenderer:this._tableViewRenderer&&this._tableViewRenderer.getVisualState(),excludedSeriesHash:this._excludedSeriesHash&&l.clone(this._excludedSeriesHash)}},setVisualState:function(P){if(P){this._excludedSeriesHash=P.excludedSeriesHash;var S=this;return b(this._initPromise,function(){return b(S._resizeDfd&&
S._resizeDfd.promise,function(){return b(P.sorting&&S.sortChart(P.sorting),function(){return b(P.filterRanges&&S.setFilterRanges(P.filterRanges),function(){P.additionalAttributes&&(S._additionalAttributes=P.additionalAttributes);return b(P.comparisonAttributes&&S._setComparisonAttributes(P.comparisonAttributes),function(){return b(P.tableViewInfo&&S.chartToTable(P.tableViewInfo),function(){return S._tableViewRenderer&&S._tableViewRenderer.setVisualState(P.tableViewRenderer)})})})})})})}},isMouseOver:function(P){return G.isMouseOver(this.domNode,
{event:P})||this.comparisonSelect&&this.comparisonSelect.isMouseOver(P)},getWidth:function(){return this._currentVisualProperties.width},getHeight:function(){return this._currentVisualProperties.height},onContentUpdated:function(){},onShowDataDrillingPreview:function(P){},onTooltipInfoCreated:function(P){},destroy:function(){this._destroyChart();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartLegendSupport":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style ./utils/ChartTypes ./utils/ChartStyleUtil ./utils/ChartCalculator ./legends/ChartLegendTypes ./legends/ChartLegendPlacements ./legends/MinMaxLegend ./legends/SelectableLegend ./legends/ChartLegendSymbols".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h){return t(null,{legend:null,_placements:[d.LEFT,d.RIGHT,d.TOP,d.BOTTOM],_excludedSeriesHash:null,_createLegend:function(){this._excludedSeriesHash={};this._placements.forEach(function(m){l.remove(this.domNode,"legendPlacement"+m)},this);this._currentVisualProperties.legend&&(this._currentVisualProperties.legend.type===b.MIN_MAX?this._createMinMaxLegend():this._createSeriesLegend())},_createSeriesLegend:function(){var m=this._currentVisualProperties.legend.series.placement;
m!==d.NONE&&(this.legend=(new g(p.mixin({chart:this.chart,chartType:this._currentChartType,allowSelect:!!this.viewModel.dynamicReportInfo&&(f.isColumnBarLike(this._currentChartType)||f.isLineLike(this._currentChartType)),isStacked:d.isOnSide(m),isRtlPlacement:m===d.LEFT&&!this.viewModel.isGraphicStyle(),keepItemsTheSameWidth:!0,customLegendSymbol:this._currentVisualProperties.legend.series.symbol,defaultLegendSymbol:h.getDefaultSymbol(this._currentChartType,this.viewModel.isGraphicStyle()),showValues:this._currentChartType===
f.WAFFLE,hideLastPoint:this._currentVisualProperties.legend.series.hideOthers,onSeriesExclusionChanged:p.hitch(this,this._onSeriesExclusionChanged)},this._getAdditionalLegendParams()))).placeAt(this.getLegendNode()),this._applyStyleToSeriesLegend(),l.add(this.domNode,"legendPlacement"+m))},_applyStyleToSeriesLegend:function(){var m=this.viewModel.getChartDefaultStyles(this.theme);m=p.mixin({},m.legendStyle,this._currentVisualProperties.legend.series.style);this.viewModel.isGraphicStyle()||delete m.backgroundColor;
k.set(this.legend.domNode,c.getStyleObjWithUnits(m));this._currentVisualProperties.legend.series.hasBorder||k.set(this.legend.domNode,"border","none")},_createMinMaxLegend:function(){this._currentVisualProperties.legend.minMax&&this._currentVisualProperties.legend.minMax.placement!==d.NONE&&(this.legend=(new e({viewModel:this.viewModel,theme:this.theme,chartType:this._currentChartType})).placeAt(this.getLegendNode()),l.add(this.domNode,"hasMinMaxLegend"),l.add(this.domNode,"legendPlacement"+this._currentVisualProperties.legend.minMax.placement))},
_getAdditionalLegendParams:function(){return null},_onSeriesExclusionChanged:function(m){this._excludedSeriesHash=m;this._updateSeries()},_updateLegend:function(){this.legend&&(this._currentVisualProperties.legend.type===b.MIN_MAX?this._updateMinMaxLegend():this._updateSeriesLegend())},_updateSeriesLegend:function(){this.legend.chartWidth=this.domNode.clientWidth-2*a.PRETTY_PADDING;var m=(!this._isMultiFeatureChart||f.isLineLike(this._currentChartType))&&this._currentComparisonInfo&&this._currentVisualProperties.legend.series.showComparison,
r=this._currentSeries.filter(function(n){return!n.isComparisonSeries||m});this.legend.series=r;this.legend.showSeriesData=1===r.length&&!f.isLineLike(this._currentChartType);r=!!this.viewModel.dynamicReportInfo&&1<r.length;r!==this.legend.allowSelect&&(this.legend.allowSelect=r);this.legend.refresh()},_updateMinMaxLegend:function(){var m=this._currentSeries.filter(function(r){return!r.isComparisonSeries});this.legend.refresh(m,this._currentVisualProperties)},_destroyLegend:function(){this.legend&&
this.legend.destroy();this.legend=null}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartStyleUtil":function(){define(["dojo/_base/lang"],function(t){var p={},l={left:1,right:1,top:1,bottom:1,width:1,height:1,fontSize:1};p.getStyleObjWithUnits=function(k,f){f=f||"px";k=t.mixin({},k);for(var c in k)if(l[c]){var a=k[c];!a||"string"===typeof a&&-1!==a.indexOf(f)||(k[c]=a+f)}return k};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartCalculator":function(){define("dojo/_base/lang dojo/dom-style ./ChartTypes ../legends/ChartLegendTypes ../legends/ChartLegendPlacements ../../themes/ThemeLibrary esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(t,p,l,k,f,c,a){return{PRETTY_PADDING:10,calcChartDimentions:function(b,d){var e=d.visualProps,g=d.comparisonInfo,h=d.chartType,m=d.maxIconSize,r=d.numPoints;d=e.width;var n=e.height,q=0,u=0,w=0,y=!a.isHidden(b.chartLabel),C=0;l.isColumnLike(h)&&!e.xAxis.show&&e.showAxisIcons&&(n+=30);y&&(C=p.get(b.chartLabel,"height")+(e.title.verticalShift||0),n-=C);e.showAxisIcons&&(l.isColumnLike(h)?n-=Math.min(m,(d-100)/r*.8)+10:l.isBarLike(h)&&(m=Math.min(m,(n-50)/r*.8)+10,q+=m,d-=m));e=e.legend||{};
r=e[e.type===k.MIN_MAX?"minMax":"series"]||{};m=r.placement||f.NONE;r=(r.placementOffset||0)/100;var D=m===f.LEFT||m===f.RIGHT,G=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetWidth+20,F=b.comparisonSelectBlock&&b.comparisonSelectBlock.offsetHeight+20;!g||!l.isComparisonSupported(h)||e.type===k.MIN_MAX&&D||(n-=F);D||p.set(b.getLegendNode(),{width:d-20+"px"});h=b.legend&&a.noTransformPosition(b.legend.domNode);h=t.mixin({w:0,h:0},h);D||p.set(b.getLegendNode(),{width:""});var B=D?n-48:0;h.h=
B?Math.min(h.h,B):h.h;h.h+=20;e.type===k.MIN_MAX&&D&&(h.w=Math.max(h.w,G));switch(m){case f.LEFT:var z=10;var E=C+n*r;q+=2*z+h.w;d-=q;break;case f.RIGHT:var I=10;E=C+n*r;u+=2*I+h.w;d-=u;break;case f.TOP:n-=h.h;E=y?C+10:10;I=z=10;w+=h.h;break;case f.BOTTOM:n-=h.h;var L=I=z=10;g&&(L+=F-10)}p.set(b.chartLabel,{marginLeft:"10px",marginRight:"10px"});p.set(b.chartContainerWithAxis,{marginTop:w+"px",marginLeft:q+"px",marginRight:u+"px"});b.legend&&p.set(b.legend.domNode,{maxHeight:B?B+"px":""});p.set(b.getLegendNode(),
{left:void 0!==z?z+"px":"",right:void 0!==I?I+"px":"",top:void 0!==E?E+"px":"",bottom:void 0!==L?L+"px":""});return{w:d,h:n}},calcAxisLabelsAutoTilt:function(b,d,e,g){if(!d||!d.length||0!==e.xAxis.labelsAngle)return!1;var h=!1,m=(b-50)/d[0].data.length-20;b=t.mixin({},g.xAxis.axisStyle,g.xAxis.style,e.xAxis.style);var r=a.getMeasureContext({style:"font-size:"+(b.fontSize||c.CHART_DATA_FONT_SIZE-1)+"px;font-family:"+(b.fontFamily||c.DEFAULT_FONT_FAMILY_GRAPHIC)});d[0].data.some(function(n){return r.measureText(n.name).w>
m})&&(h=20);r.destroy();return h},resizeVisualProperties:function(b,d,e){var g=b.width,h=b.height;b.width=d;b.height=e;b.floatingTexts&&b.floatingTexts.forEach(function(m){m.style.left*=d/g;m.style.top*=e/h});b.floatingIcons&&b.floatingIcons.forEach(function(m){m.style.left*=d/g;m.style.top*=e/h})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/MinMaxLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ../utils/ChartStyleUtil ../utils/ChartTypes dojo/text!../../templates/MinMaxLegend.html dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d){d=d.geoenrichment.dijit.ReportPlayer.MinMaxLegend;return t([k,f],{templateString:b,nls:d,viewModel:null,theme:null,chartType:null,refresh:function(e,g){function h(D){var G=D.fieldInfo;return G&&(G.script?G.script.alias:G.alias)||D.label}var m,r,n=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,u,w;e.forEach(function(D){D.data.forEach(function(G){var F=G.originalValue;F<n&&(n=F,m=G,u=D);F>q&&(q=F,r=G,w=D)})});if(r&&m){var y=this.viewModel.getChartDefaultStyles(this.theme);
e=p.mixin({},y.minMaxLegend.titleStyle,g.legend.minMax.titleStyle);var C=p.mixin({},y.minMaxLegend.minVariableLabelStyle,g.legend.minMax.minVariableLabelStyle);g=p.mixin({},y.minMaxLegend.maxVariableLabelStyle,g.legend.minMax.maxVariableLabelStyle);l.set(this.largestGroupTitleDiv,c.getStyleObjWithUnits(e));l.set(this.smallestGroupTitleDiv,c.getStyleObjWithUnits(e));this.largestGroupDiv.innerHTML=h(r.point);this.smallestGroupDiv.innerHTML=h(m.point);l.set(this.largestGroupDiv,c.getStyleObjWithUnits(g));
l.set(this.smallestGroupDiv,c.getStyleObjWithUnits(C));g.color||(this.largestGroupDiv.style.color=a.isLineLike(this.chartType)?w.params.stroke.color:r.fill);C.color||(this.smallestGroupDiv.style.color=a.isLineLike(this.chartType)?u.params.stroke.color:m.fill)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/SelectableLegend":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/lists/FlowList ../utils/ThemeCalculator ./LegendSymbolRenderer".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m){var r=t(null,{createPresentation:function(n,q,u,w,y){var C=this,D=k.create("div",{"class":"selectableLegendRoot "+(this.isStacked()?"":"dijitInline")},u);D.style.paddingLeft=(this.isStacked()?3:10)+"px";D.style.paddingRight=(this.isStacked()?3:10)+"px";y=this.canSelect()&&new e(D,{"class":"dijitInline selectableLegendRootCheckbox"});w=m.renderSymbol({defaultSymbol:this.getDefaultLegendSymbol(),customSymbol:this.getCusomLegendSymbol(),marker:n.marker,stroke:n.stroke,
fill:n.fill,width:8,height:15});q=k.create("div",{innerHTML:n.label,"class":"dijitInline selectableLegendRootLabel TrimWithEllipses"});q.style.maxWidth=this.getMaxLabelWidth()+"px";if(u=n.valueText&&k.create("div",{innerHTML:this.isStacked()?n.valueText:"("+n.valueText+")","class":"dijitInline selectableLegendRootValue TrimWithEllipses"}))u.style.marginLeft="10px";this.isRtlPlacement()?(k.place(q,D),u&&k.place(u,D),k.place(w,D)):(k.place(w,D),k.place(q,D),u&&k.place(u,D));y&&(y.set("checked",!n.unchecked),
l[n.unchecked?"add":"remove"](D,"selectableLegendRoot_unselected"),y.onClick=function(G){l[G.checked?"remove":"add"](D,"selectableLegendRoot_unselected");C.onSelectionChanged(n.label,G.checked)});(y=this.getItemMaxWidth())&&this.needFormatAsTable()&&(u&&(w=y-f.getMarginBox(w).w-f.getMarginBox(q).w-u.clientWidth,u.style.marginLeft=w+"px"),D.style.width=y+"px");this.setItemWidth(c.get(D,"width"),D.clientWidth);this.canEditLabel(n)&&(l.add(q,"isEditable"),a(q,"click",function(G){G.stopPropagation();
C.onLabelClicked(n,D)}));return D},isRtlPlacement:function(){},isStacked:function(){},needFormatAsTable:function(){},canSelect:function(){},onSelectionChanged:function(n,q){},getDefaultLegendSymbol:function(){},getCusomLegendSymbol:function(){},canEditLabel:function(n){},onLabelClicked:function(n,q){},getItemMaxWidth:function(){},setItemWidth:function(n,q){},getMaxLabelWidth:function(){}});return t([b,d],{templateString:"\x3cdiv class\x3d'esriGESelectableLegend'\x3e\x3cdiv data-dojo-attach-point\x3d'listDiv'\x3e\x3c/div\x3e\x3c/div\x3e",
series:null,allowSelect:!0,allowEditLabels:!1,showSeriesData:!1,isRtlPlacement:!1,keepItemsTheSameWidth:!1,customLegendSymbol:null,defaultLegendSymbol:null,showValues:!1,isStacked:!1,hideLastPoint:!1,chartWidth:0,chartType:null,list:null,_isCollectingWidthsFlag:!1,_uncheckedSeriesHash:null,_itemMaxWidth:0,_itemFullWidths:null,_isFlowStacked:!1,postCreate:function(){var n=this;this._uncheckedSeriesHash={};var q=p.mixin(new r,{onSelectionChanged:function(u,w){w?delete n._uncheckedSeriesHash[u]:n._uncheckedSeriesHash[u]=
!0;n.onSeriesExclusionChanged(n._uncheckedSeriesHash)},onLabelClicked:function(u,w){if(n.showSeriesData)n.onPointLabelClickedAt(void 0!==u.unsortedIndex?u.unsortedIndex:n.list.items.indexOf(u),w);else n.onSeriesLabelClickedAt(n.list.items.indexOf(u),w)},isStacked:function(){return n.isStacked},needFormatAsTable:function(){return n.isStacked||n._isFlowStacked},canSelect:function(){return n.allowSelect},getDefaultLegendSymbol:function(){return n.defaultLegendSymbol},getCusomLegendSymbol:function(){return n.customLegendSymbol},
canEditLabel:function(u){return!u.isComparisonSeries&&n.allowEditLabels},isRtlPlacement:function(){return n.isRtlPlacement},getItemMaxWidth:function(){return n._isCollectingWidthsFlag?0:n._itemMaxWidth},setItemWidth:function(u,w){n._isCollectingWidthsFlag&&(n._itemFullWidths.push(w),n._itemMaxWidth=Math.max(n._itemMaxWidth,u))},getMaxLabelWidth:function(){return n.chartWidth?.75*n.chartWidth:200}});this.list=new g({"class":"selectableLegendFlowList",itemRenderer:q},this.listDiv);this.own(this.list);
this.isRtlPlacement&&(this.domNode.style.textAlign="right")},refresh:function(){var n=this._getItems();this.list.domNode.style.width="";this._itemMaxWidth=0;this._itemFullWidths=[];this._isCollectingWidthsFlag=!0;this._isFlowStacked=!1;this.list.setItems(n);this._isCollectingWidthsFlag=!1;var q=0;this._itemFullWidths.forEach(function(u){q+=u});this._isFlowStacked=!this.isStacked&&this.chartWidth&&q>this.chartWidth;this.keepItemsTheSameWidth&&this.list.refresh();!this.isStacked&&this.chartWidth&&(this._isFlowStacked?
(n=this.list.domNode.children[0].clientWidth,n=Math.max(1,Math.floor(this.chartWidth/n))*n+2):n=q+2,this.list.domNode.style.width=n+"px")},_getItems:function(){var n=this,q=[];this.showSeriesData?(this.series&&this.series[0]&&this.series[0].data.forEach(function(u){var w={label:u.name||"",valueText:n.showValues?u.tooltip.valueLabel:null,unsortedIndex:u.unsortedIndex};u=n._getDataFillAndStrokeColors(null,u);w.fill=u.fill;w.stroke=u.stroke;w.marker=u.marker;q.push(w)}),this.hideLastPoint&&q.pop()):
this.series&&this.series.forEach(function(u){var w={label:u.name,unchecked:!0===n._uncheckedSeriesHash[u.name],isComparisonSeries:u.isComparisonSeries};u=n._getDataFillAndStrokeColors(u.params,u.data[0]);w.fill=u.fill;w.stroke=u.stroke;w.marker=u.marker;q.push(w)});return q},_getDataFillAndStrokeColors:function(n,q){n=n||{};var u=h.getPointIconStyle(q),w=n.markerFill||n.fill;w||(w=q.point&&q.point.hidden&&q.unhiddenFillColor||q.fill);w||(w=u.fillColor);var y=n.markerStroke&&n.markerStroke.color;y||
(y=n.stroke&&n.stroke.color&&0<n.stroke.width?n.stroke.color:q.stroke&&q.stroke.color&&0<q.stroke.width?q.point&&q.point.hidden&&q.unhiddenLineColor||q.stroke.color:u.borderColor);return{fill:w,stroke:y,marker:n.unscaledMarker||n.marker||q.marker}},resetExclusion:function(){this._uncheckedSeriesHash={}},onSeriesLabelClickedAt:function(n,q){},onPointLabelClickedAt:function(n,q){},onSeriesExclusionChanged:function(n){}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/LegendSymbolRenderer":function(){define(["dojo/dom-class",
"dojo/dom-construct","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ShapeUtil","./ChartLegendSymbols"],function(t,p,l,k,f){return{renderSymbol:function(c){var a=p.create("div",{"class":"dijitInline esriGEReportPlayerChartLegendSymbol"}),b=c.stroke&&l.toCSSColor(c.stroke),d=c.fill&&l.toCSSColor(c.fill);if(c.marker&&!c.customSymbol){t.add(a,"isSVGSymbol");var e=k.createSVGNode({xmin:0,ymin:0,width:6,height:6},{width:(c.width||8)+"px",height:(c.height||8)+"px",overflow:"visible"});
e.appendChild(k.createPathNode(c.marker,{borderColor:b||"transparent",borderWidth:2,fillColor:d||"transparent"}));p.place(e,a)}else c=c.customSymbol||c.defaultSymbol||f.SQUARE,t.add(a,c.toLowerCase()),d&&(a.style.backgroundColor=d),b&&(a.style.border=("line"===c.toLowerCase()?1:2)+"px solid "+b);return a}}})},"esri/dijit/geoenrichment/utils/ShapeUtil":function(){define("dojo/dom-style dojo/_base/lang dojo/dom-geometry esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/ColorUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(t,p,l,k,f,c){function a(e,g){if(g&&g.borderWidth){var h=d.toColor(g,"border","#000000");e.setAttribute("stroke",f.toCSSColor(h,!0));e.setAttribute("stroke-width",g.borderWidth);e.setAttribute("stroke-opacity",h.a);g.borderDashArray&&e.setAttribute("stroke-dasharray",Array.isArray(g.borderDashArray)?g.borderDashArray.join(","):g.borderDashArray);g.strokeMiterLimit&&e.setAttribute("stroke-miterlimit",g.strokeMiterLimit);g.borderScale||e.setAttribute("vector-effect","non-scaling-stroke")}g&&
g.fillColor&&(h=d.toColor(g,"fill","#FFFFFF"),e.setAttribute("fill",f.toCSSColor(h,!0)),e.setAttribute("fill-opacity",h.a))}var b={fillColor:"#FFFFFF",fillAlpha:1,borderAlpha:0,borderWidth:1},d={createSVGNode:function(e,g){var h=document.createElementNS("http://www.w3.org/2000/svg","svg");g&&t.set(h,g);e=[e.xmin||0,e.ymin||0,e.width,e.height].join(" ");h.setAttribute("viewBox",e);h.setAttribute("xmlns","http://www.w3.org/2000/svg");return h},createPathNode:function(e,g){var h=document.createElementNS("http://www.w3.org/2000/svg",
"path");h.setAttribute("d",e);a(h,g);return h},createEllipseNode:function(e,g,h,m,r){var n=document.createElementNS("http://www.w3.org/2000/svg","ellipse");n.setAttribute("cx",e||0);n.setAttribute("cy",g||0);n.setAttribute("rx",h);n.setAttribute("ry",m);a(n,r);return n},createCircleNode:function(e,g,h,m){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx",e||0);r.setAttribute("cy",g||0);r.setAttribute("r",h);a(r,m);return r},createRectNode:function(e,g,h,m,r){var n=
document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x",e||0);n.setAttribute("y",g||0);n.setAttribute("width",h);n.setAttribute("height",m);a(n,r);return n},createLineNode:function(e,g,h,m,r){var n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",e||0);n.setAttribute("y1",g||0);n.setAttribute("x2",h||0);n.setAttribute("y2",m||0);a(n,r);return n},createPolygonNode:function(e,g){var h=document.createElementNS("http://www.w3.org/2000/svg","polygon");
h.setAttribute("points",e);a(h,g);return h},createNodeByAttributes:function(e,g,h){var m=null;switch(e.name){case "path":m=d.createPathNode(e.d,g);break;case "ellipse":m=d.createEllipseNode(e.cx,e.cy,e.rx,e.ry,g);break;case "circle":m=d.createCircleNode(e.cx,e.cy,e.r,g);break;case "rect":m=d.createRectNode(e.x,e.y,e.width,e.height,g);break;case "line":m=d.createLineNode(e.x1,e.y1,e.x2,e.y2,g);break;case "polygon":m=d.createPolygonNode(e.points,g)}m&&(e=e["fill-opacity"],void 0===e||h&&h.ignoreFillOpacity||
(m.hasAttribute("fill-opacity")&&(e*=m.getAttribute("fill-opacity")),m.setAttribute("fill-opacity",e)));return m},toColor:function(e,g,h,m){h=f.toColor(e[g+"Color"],h);1===h.a&&(e=e[g+"Alpha"],isNaN(e)&&(e=m),isNaN(e)||(h.a=e));return h},createSVGFromJson:function(e,g,h,m,r){r=r||{};m=p.mixin({},!r.noDefaults&&b,m);void 0===m.borderColor&&(m.borderColor=m.fillColor);var n=d.createSVGNode(e.viewBox,{width:g+"px",height:h+"px",overflow:"visible"});r.preserveAspectRatio&&n.setAttribute("preserveAspectRatio",
r.preserveAspectRatio);null!=r.borderScale&&(m.borderScale=r.borderScale);e.g.forEach(function(q){(q=d.createNodeByAttributes(q,m,{ignoreFillOpacity:r.ignoreFillOpacity}))&&n.appendChild(q)});return n},calcContentBox:function(e,g,h,m,r){var n=k.get("ShapeUtil"),q=JSON.stringify(e.viewBox)+";"+JSON.stringify(e.g)+";"+g+";"+h+";"+JSON.stringify(r||{});if(n[q])return p.mixin({},n[q]);e=d.createSVGFromJson(e,g,h,m,r);e.style.position="absolute";e.style.left="0";e.style.top="0";document.body.appendChild(e);
m=c.getNodesBox(e.children);r=l.position(e);document.body.removeChild(e);m.x-=r.x;m.y-=r.y;m.r=g-(m.x+m.w);m.b=h-(m.y+m.h);n[q]=p.mixin({},m);return m}};return d})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/legends/ChartLegendSymbols":function(){define(["../utils/ChartTypes"],function(t){var p={SQUARE:"Square",CIRCLE:"Circle",RECTANGLE:"Rectangle",LINE:"Line",isSupported:function(l){for(var k in p)if(p[k]===l)return!0;return!1},getDefaultSymbol:function(l,k){return k&&l!==t.WAFFLE?p.CIRCLE:
p.SQUARE}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartEventSupport":function(){define("dojo/_base/declare ./utils/builder/ChartPlots ./utils/ChartTypes ./level/LevelLineBuilder ./tooltips/ChartTooltip esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(t,p,l,k,f,c){return t(null,{showLevelLine:!0,_levelLineBuilder:null,_addPlotEventListeners:function(){var a=this;this.chart&&l.hasAxis(this._currentChartType)&&(this._levelLineBuilder=this._levelLineBuilder||this.showLevelLine&&
new k({lineContainerNode:this.domNode}),p.getWorkingPlots(this.chart).forEach(function(b,d){this.chart.connectToPlot(b,function(e){if(e.shape&&e.shape.shape&&e.shape.rawNode){var g=e.type,h=e.shape.rawNode,m=0===d?a._currentChartType:a._getComparisonChartType(),r=!1,n=!l.isXAxisVertical(a._currentChartType);a._currentVisualProperties.renderColumnBarsInOppositeDirections?(r=a.chart.series.filter(function(q){return e.run.plot===q.plot}),r=r.indexOf(e.run)>=r.length/2):r=e.y<a._currentVisualProperties.yAxis.baseLineValue;
a._levelLineBuilder&&a._levelLineBuilder.supportsLevelLine(m)&&("onmouseout"===g?a._levelLineBuilder.hideLevelLine():"onmouseover"===g&&a._levelLineBuilder.showLevelLine(a.chart,h,m,n,r));"onmouseover"===g&&a._currentDataDrillingPanelInfo&&a._currentDataDrillingPanelInfo.showOnClick&&(h.style.cursor="pointer");"onclick"===g&&!c.isMobileDevice()&&a.viewModel.dynamicReportInfo&&f.tryShowDataDrillingForShownTooltip()}})},this))}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/ChartPlots":function(){define([],
function(){var t={GRID:"grid",PRIMARY:"default",SECONDARY:"secondary",getWorkingPlots:function(p){var l=[];p.getPlot(t.PRIMARY)&&l.push(t.PRIMARY);p.getPlot(t.SECONDARY)&&l.push(t.SECONDARY);return l}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/level/LevelLineBuilder":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style ../utils/ChartTypes esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(t,p,l,k,f,c,a){var b={updateLine:function(d,
e){l.remove(d,"esriGEReportPlayer_chartContainerLevelLineH esriGEReportPlayer_chartContainerLevelLineV");e?l.add(d,"esriGEReportPlayer_chartContainerLevelLineH"):l.add(d,"esriGEReportPlayer_chartContainerLevelLineV");a.show(d);f.set(d,{pointerEvents:"none",left:"",top:"",width:"",height:""})}};return t(null,{lineContainerNode:null,_levelLineDiv:null,_secondaryLineDiv:null,constructor:function(d){p.mixin(this,d)},supportsLevelLine:function(d){return d===c.COLUMN||d===c.BAR||c.isLineLike(d)},showLevelLine:function(d,
e,g,h,m){this._levelLineDiv=this._levelLineDiv||k.create("div",null,this.lineContainerNode);this._drawLine(this._levelLineDiv,d,e,g,h,m);c.isLineLike(g)&&(this._secondaryLineDiv=this._secondaryLineDiv||k.create("div",null,this.lineContainerNode),this._drawLine(this._secondaryLineDiv,d,e,g,!h,m))},_drawLine:function(d,e,g,h,m,r){e=e.calculateGeometry();g=a.noTransformPosition(g);var n=a.noTransformPosition(e.node),q=f.get(e.node,"width"),u=f.get(e.node,"height"),w=a.noTransformPosition(this.lineContainerNode);
b.updateLine(d,m);switch(h){case c.COLUMN:m&&f.set(d,{top:(r?g.y+g.h-w.y:g.y-w.y-1)+"px",left:n.x-w.x+e.offsets.l+"px",width:q-e.offsets.l-e.offsets.r+"px"});break;case c.BAR:m||f.set(d,{left:(r?g.x-w.x:g.x+g.w-w.x)+"px",top:n.y-w.y+e.offsets.t+"px",height:u-e.offsets.t-e.offsets.b+"px"});break;case c.LINE:case c.VERTICAL_LINE:m?f.set(d,{top:g.y+g.h/2-w.y-1+"px",left:n.x-w.x+e.offsets.l+"px",width:q-e.offsets.l-e.offsets.r+"px"}):f.set(d,{left:g.x+.5*g.w-w.x+"px",top:n.y-w.y+e.offsets.t+"px",height:u-
e.offsets.t-e.offsets.b+"px"})}},hideLevelLine:function(){a.hide([this._levelLineDiv,this._secondaryLineDiv])}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ChartTooltip":function(){define("dojo/_base/declare dojo/_base/lang dojo/string dojo/dom-construct ./ZoomSupportTooltip ./_BuilderUtil ./_ColumnBarChartTooltipBuilder ./_GaugeChartTooltipBuilder ./_WaffleChartTooltipBuilder ./_LineChartTooltipBuilder ./_PieDonutRingChartTooltipBuilder ../utils/ChartTypes ../../supportClasses/conditionalStyling/ConditionalStyleLegendBuilder ../../dataDrilling/DataDrillingVisualizer ../../supportClasses/WidgetQueryUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g,h,m,r,n,q){function u(y,C,D){y._hide();var G=new r({viewModel:C.viewModel,theme:C.theme,parentWidget:C.chartContainer,getPreviewValueFunction:c.buldPreviewValueFunction(C,{type:"dataDrilling"}),domNode:D,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,onClose:function(){G.play(!1,!0)}});G.play(!0,!0,null,C.dataDrillingPanelInfo.sectionJson)}q=q.geoenrichment.dijit.ReportPlayer.ChartTooltip;var w={lastShownInfo:null,setInfo:function(y){(w.lastShownInfo=y)&&setTimeout(function(){w.lastShownInfo===
y&&(w.lastShownInfo=null)},6E4)}};t=t(f,{tooltipClass:"esriGEChartContainer_chartTooltip_masterTooltip",_chartType:null,constructor:function(){var y=this,C=this.text;this.text=function(D,G){var F=D.run&&D.run.data&&D.run.data[D.index];F=F.tooltip&&"object"===typeof F.tooltip?y._renderTooltip(F.tooltip):void 0;return F||C(D,G)}},_needSetRectFromShape:function(){return h.isPictureLike(this._chartType)},setChartType:function(y){this._chartType=y},_renderTooltip:function(y){y=p.mixin({},y,y.getContext());
var C=!y.viewModel.dynamicReportInfo,D=C&&!y.viewModel.isGraphicStyle(),G=!n.isDataDrillingView(y.chartContainer);(y.viewModel.enableDataDrilling||C)&&G||delete y.dataDrillingPanelInfo;var F=k.create("div",{"class":"esriGEChartContainer_chartTooltip"},document.body);if(D)this._buildVariableNamePreview(y,F);else if(y.richTextFieldInfo||y.showTitle||y.showValue||y.showMin||y.showMax||y.showAvg||y.showWeight||y.showConditional||y.dataDrillingPanelInfo)this._buildTooltip(y,F,C,G);else if(C)k.create("div",
{"class":"chartTooltip_row esriGERowHigh",innerHTML:q.noTooltipAvailable},F);else return{node:null};w.setInfo(y.dataDrillingPanelInfo&&y.dataDrillingPanelInfo.showOnClick&&!C?{tooltip:this,info:y,root:F}:null);document.body.removeChild(F);return{node:F,style:y.tooltipStyle}},_buildTooltip:function(y,C,D,G){var F=this;this._chartType===h.PIE||this._chartType===h.DONUT||this._chartType===h.RING?g.buildPieDonutRingChartTooltip(y,C):this._chartType===h.GAUGE?b.buildGaugeChartTooltip(y,C):this._chartType===
h.WAFFLE?d.buildWaffleChartTooltip(y,C):h.isColumnBarLike(this._chartType)?a.buildColumnChartTooltip(y,C):h.isLineLike(this._chartType)&&e.buildLineChartTooltip(y,C);y.conditionalStyling&&y.showConditional&&k.place(m.createLegendNode(y.conditionalStyling,y.conditionalStats,"chart",y.isBenchmarked?y.unbenchmarkedValue:y.value,y.formatFunc),C);if(y.dataDrillingPanelInfo||D&&G){var B=k.create("div",{"class":"chartTooltip_row esriGERowHigh esriGECenter",style:"margin-top:20px;"},C);(G=D&&!y.dataDrillingPanelInfo)||
k.create("div",{"class":"dijitInline esriGESpaceAfterMedium",innerHTML:l.substitute('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\x3cpath fill\x3d"${fill}" d\x3d"M30 28v1H3V4h1v24h2v-9h6v9h2V6h6v22h2V13h6v15h2z"/\x3e\x3c/svg\x3e',{fill:y.tooltipLinkStyle.color})},B);B=k.create("div",{"class":"dijitInline esriGELink",innerHTML:D?y.dataDrillingPanelInfo?q.drillForMoreDataEdit:q.addDataDrilling:q.drillForMoreData},B);G||(B.style.color=y.tooltipLinkStyle.color);
B.addEventListener("click",function(){D?(F._hide(),y.chartContainer.onShowDataDrillingPreview(y)):u(F,y,C)})}},_buildVariableNamePreview:function(y,C){C=k.create("div",{"class":"chartTooltip_row esriGERowHigh"},C);c.addValue((y.fieldInfo.script?y.fieldInfo.script.alias:y.fieldInfo.alias)||"",C)}});t.tryShowDataDrillingForShownTooltip=function(){var y=w.lastShownInfo;y&&u(y.tooltip,y.info,y.root)};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ZoomSupportTooltip":function(){define("dojo/_base/declare dojox/charting/action2d/Tooltip dojox/lang/functional dojox/gfx/matrix esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),
function(t,p,l,k,f,c){var a=Math.PI/4,b=Math.PI/2,d={_tooltips:[],show:function(e,g,h,m){this.hide();if(e){e="string"===typeof e?{node:e}:e;var r=e.node,n=r?r.outerHTML||r.innerHTML||r:null;n&&"string"===typeof n&&((n=-1!==n.indexOf("href")||-1!==n.indexOf("esriGELink"))||(m=(m||"")+" esriGENonInteractable"),this._tooltips.push(c.showTooltipForNode(h,r,{position:g,notRestricted:!0,stayOnHover:n,classes:m&&[m],style:e.style})))}},hide:function(){this._tooltips.forEach(function(e){e&&e.destroy()});
this._tooltips.length=0}};return t(p,{tooltipClass:null,process:function(e){if("onplotreset"===e.type||"onmouseout"===e.type)"onplotreset"===e.type&&delete this.angles;else if(e.shape&&"onmouseover"===e.type){var g=["after-centered","before-centered"];if(!this._needSetRectFromShape())switch(e.element){case "marker":case "circle":case "spider_circle":case "spider_plot":case "candlestick":break;case "column":g=["above-centered","below-centered","after-centered","before-centered"];case "bar":break;default:if(!this.angles){var h=
"number"===typeof e.run.data[0]?l.map(e.run.data,"x ? Math.max(x, 0) : 0"):l.map(e.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=l.map(l.scanl(h,"+",0),"* 2 * Math.PI / this",l.foldl(h,"+",0))}h=k._degToRad(e.plot.opt.startAngle);var m=(this.angles[e.index]+this.angles[e.index+1])/2+h;h&&(0>m||m>2*Math.PI)&&(m=Math.abs(2*Math.PI-Math.abs(m)));m<a||(m<b+a?g=["below-centered","above-centered"]:m<Math.PI+a?g=["before-centered","after-centered"]:m<2*Math.PI-a&&(g=["above-centered","below-centered"]))}f.isMobileDevice()&&
(g=["above-centered","below-centered"]);(h=this.text(e,this.plot))&&d.show("string"===typeof h?this._format(h):h,g,e.shape.rawNode,this.tooltipClass)}},_needSetRectFromShape:function(){return!1},_hide:function(){d.hide()}})})},"dojox/charting/action2d/Tooltip":function(){define("dijit/Tooltip dojo/_base/lang dojo/_base/declare dojo/_base/window dojo/_base/connect dojo/dom-style ./PlotAction dojox/gfx/matrix dojo/has dojo/has!dojo-bidi?../bidi/action2d/Tooltip dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g){var h=function(n,q){var u=n.run&&n.run.data&&n.run.data[n.index];return u&&"number"!=typeof u&&(u.tooltip||u.text)?u.tooltip||u.text:q.tooltipFunc?q.tooltipFunc(n):n.y},m=Math.PI/4,r=Math.PI/2;c=l(d("dojo-bidi")?"dojox.charting.action2d.NonBidiTooltip":"dojox.charting.action2d.Tooltip",a,{defaultParams:{text:h,mouseOver:!0,defaultPosition:["after-centered","before-centered"]},optionalParams:{},constructor:function(n,q,u){this.text=u&&u.text?u.text:h;this.mouseOver=
u&&void 0!=u.mouseOver?u.mouseOver:!0;this.defaultPosition=u&&void 0!=u.defaultPosition?u.defaultPosition:["after-centered","before-centered"];this.connect()},process:function(n){if("onplotreset"===n.type||"onmouseout"===n.type)t.hide(this.aroundRect),this.aroundRect=null,"onplotreset"===n.type&&delete this.angles;else if(!(!n.shape||this.mouseOver&&"onmouseover"!==n.type||!this.mouseOver&&"onclick"!==n.type)){var q={type:"rect"},u=this.defaultPosition;switch(n.element){case "marker":q.x=n.cx;q.y=
n.cy;q.w=q.h=1;break;case "circle":q.x=n.cx-n.cr;q.y=n.cy-n.cr;q.w=q.h=2*n.cr;break;case "spider_circle":q.x=n.cx;q.y=n.cy;q.w=q.h=1;break;case "spider_plot":return;case "column":u=["above-centered","below-centered"];case "bar":q=p.clone(n.shape.getShape());q.w=q.width;q.h=q.height;break;case "candlestick":q.x=n.x;q.y=n.y;q.w=n.width;q.h=n.height;break;default:if(!this.angles){var w="number"==typeof n.run.data[0]?g.map(n.run.data,"x ? Math.max(x, 0) : 0"):g.map(n.run.data,"x ? Math.max(x.y, 0) : 0");
this.angles=g.map(g.scanl(w,"+",0),"* 2 * Math.PI / this",g.foldl(w,"+",0))}w=b._degToRad(n.plot.opt.startAngle);var y=(this.angles[n.index]+this.angles[n.index+1])/2+w;q.x=n.cx+n.cr*Math.cos(y);q.y=n.cy+n.cr*Math.sin(y);q.w=q.h=1;w&&(0>y||y>2*Math.PI)&&(y=Math.abs(2*Math.PI-Math.abs(y)));y<m||(y<r+m?u=["below-centered","above-centered"]:y<Math.PI+m?u=["before-centered","after-centered"]:y<2*Math.PI-m&&(u=["above-centered","below-centered"]))}d("dojo-bidi")&&this._recheckPosition(n,q,u);w=this.chart.getCoords();
q.x+=w.x;q.y+=w.y;q.x=Math.round(q.x);q.y=Math.round(q.y);q.w=Math.ceil(q.w);q.h=Math.ceil(q.h);this.aroundRect=q;(n=this.text(n,this.plot))&&t.show(this._format(n),this.aroundRect,u);this.mouseOver||(this._handle=f.connect(k.doc,"onclick",this,"onClick"))}},onClick:function(){this.process({type:"onmouseout"})},_recheckPosition:function(n,q,u){},_format:function(n){return n}});return d("dojo-bidi")?l("dojox.charting.action2d.Tooltip",[c,e]):c})},"dojox/charting/action2d/PlotAction":function(){define(["dojo/_base/connect",
"dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional"],function(t,p,l,k,f){var c=k.backOut;return p("dojox.charting.action2d.PlotAction",l,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(a,b,d){this.anim={};d||(d={});this.duration=d.duration?d.duration:400;this.easing=d.easing?d.easing:c},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process")},disconnect:function(){this.handle&&(t.disconnect(this.handle),this.handle=null)},reset:function(){},
destroy:function(){this.inherited(arguments);f.forIn(this.anim,function(a){f.forIn(a,function(b){b.action.stop(!0)})});this.anim={}}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Evented"],function(t,p,l){return p("dojox.charting.action2d.Base",l,{constructor:function(k,f){this.chart=k;this.plot=f?t.isString(f)?this.chart.getPlot(f):f:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},
"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(t){return t})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(t,p,l){var k=p.getObject("lang.functional",!0,t),f={},c=1<"ab".split(/a*/).length?String.prototype.split:function(d){var e=this.split.call(this,d);(d=d.exec(this))&&0==d.index&&e.unshift("");return e},a=function(d){var e=[],g=c.call(d,/\s*->\s*/m);if(1<g.length)for(;g.length;)d=
g.pop(),e=g.pop().split(/\s*,\s*|\s+/m),g.length&&g.push("(function("+e.join(", ")+"){ return ("+d+"); })");else if(d.match(/\b_\b/))e=["_"];else{g=d.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m);var h=d.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(g||h)g&&(e.push("$1"),d="$1"+d),h&&(e.push("$2"),d+="$2");else{g=d.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[];var m={};l.forEach(g,function(r){m.hasOwnProperty(r)||(e.push(r),m[r]=1)})}}return{args:e,body:d}},b=function(d){return d.length?function(){var e=d.length-1,g=k.lambda(d[e]).apply(this,arguments);for(--e;0<=e;--e)g=k.lambda(d[e]).call(this,g);return g}:function(e){return e}};p.mixin(k,{rawLambda:function(d){return a(d)},buildLambda:function(d){d=a(d);return"function("+d.args.join(",")+"){return ("+d.body+");}"},lambda:function(d){if("function"==typeof d)return d;
if(d instanceof Array)return b(d);if(f.hasOwnProperty(d))return f[d];var e=a(d);return f[d]=new Function(e.args,"return ("+e.body+");")},clearLambdaCache:function(){f={}}});return k})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(t,p,l,k){var f={};p.mixin(k,{filter:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||t.global;a=k.lambda(a);var d=[],e;if(p.isArray(c)){var g=0;for(e=c.length;g<e;++g){var h=c[g];a.call(b,
h,g,c)&&d.push(h)}}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(g=0;c.hasNext();)h=c.next(),a.call(b,h,g++,c)&&d.push(h);else for(g in c)g in f||(h=c[g],a.call(b,h,g,c)&&d.push(h));return d},forEach:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||t.global;a=k.lambda(a);var d;if(p.isArray(c)){var e=0;for(d=c.length;e<d;a.call(b,c[e],e,c),++e);}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(e=0;c.hasNext();a.call(b,c.next(),e++,c));else for(e in c)e in
f||a.call(b,c[e],e,c);return b},map:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||t.global;a=k.lambda(a);var d,e;if(p.isArray(c)){var g=Array(d=c.length);for(e=0;e<d;g[e]=a.call(b,c[e],e,c),++e);}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(g=[],e=0;c.hasNext();g.push(a.call(b,c.next(),e++,c)));else for(e in g=[],c)e in f||g.push(a.call(b,c[e],e,c));return g},every:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||t.global;a=k.lambda(a);var d;if(p.isArray(c)){var e=
0;for(d=c.length;e<d;++e)if(!a.call(b,c[e],e,c))return!1}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(e=0;c.hasNext();){if(!a.call(b,c.next(),e++,c))return!1}else for(e in c)if(!(e in f||a.call(b,c[e],e,c)))return!1;return!0},some:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||t.global;a=k.lambda(a);var d;if(p.isArray(c)){var e=0;for(d=c.length;e<d;++e)if(a.call(b,c[e],e,c))return!0}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(e=0;c.hasNext();){if(a.call(b,
c.next(),e++,c))return!0}else for(e in c)if(!(e in f)&&a.call(b,c[e],e,c))return!0;return!1}});return k})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(t,p,l){var k={};p.mixin(l,{keys:function(f){var c=[],a;for(a in f)a in k||c.push(a);return c},values:function(f){var c=[],a;for(a in f)a in k||c.push(f[a]);return c},filterIn:function(f,c,a){a=a||t.global;c=l.lambda(c);var b={},d;for(d in f)if(!(d in k)){var e=f[d];c.call(a,e,d,f)&&(b[d]=
e)}return b},forIn:function(f,c,a){a=a||t.global;c=l.lambda(c);for(var b in f)b in k||c.call(a,f[b],b,f);return a},mapIn:function(f,c,a){a=a||t.global;c=l.lambda(c);var b={},d;for(d in f)d in k||(b[d]=c.call(a,f[d],d,f));return b}});return l})},"dojox/lang/functional/scan":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(t,p,l){var k={};p.mixin(l,{scanl:function(f,c,a,b){"string"==typeof f&&(f=f.split(""));b=b||t.global;c=l.lambda(c);var d,e;if(p.isArray(f)){var g=Array((d=
f.length)+1);g[0]=a;for(e=0;e<d;a=c.call(b,a,f[e],e,f),g[++e]=a);}else if("function"==typeof f.hasNext&&"function"==typeof f.next)for(g=[a],e=0;f.hasNext();g.push(a=c.call(b,a,f.next(),e++,f)));else for(e in g=[a],f)e in k||g.push(a=c.call(b,a,f[e],e,f));return g},scanl1:function(f,c,a){"string"==typeof f&&(f=f.split(""));a=a||t.global;c=l.lambda(c);var b;var d=!0;if(p.isArray(f)){var e=Array(d=f.length);e[0]=b=f[0];for(var g=1;g<d;e[g]=b=c.call(a,b,f[g],g,f),++g);}else if("function"==typeof f.hasNext&&
"function"==typeof f.next){if(f.hasNext())for(e=[b=f.next()],g=1;f.hasNext();e.push(b=c.call(a,b,f.next(),g++,f)));}else for(g in f)g in k||(d?(e=[b=f[g]],d=!1):e.push(b=c.call(a,b,f[g],g,f)));return e},scanr:function(f,c,a,b){"string"==typeof f&&(f=f.split(""));b=b||t.global;c=l.lambda(c);var d=f.length,e=Array(d+1),g=d;for(e[d]=a;0<g;--g,a=c.call(b,a,f[g],g,f),e[g]=a);return e},scanr1:function(f,c,a){"string"==typeof f&&(f=f.split(""));a=a||t.global;c=l.lambda(c);var b=f.length,d=Array(b),e=f[b-
1];--b;for(d[b]=e;0<b;--b,e=c.call(a,e,f[b],b,f),d[b]=e);return d}})})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(t,p,l,k){var f={};t.mixin(k,{foldl:function(c,a,b,d){"string"==typeof c&&(c=c.split(""));d=d||l.global;a=k.lambda(a);var e;if(t.isArray(c)){var g=0;for(e=c.length;g<e;b=a.call(d,b,c[g],g,c),++g);}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(g=0;c.hasNext();b=a.call(d,b,c.next(),g++,
c));else for(g in c)g in f||(b=a.call(d,b,c[g],g,c));return b},foldl1:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||l.global;a=k.lambda(a);var d;if(t.isArray(c)){var e=c[0];var g=1;for(d=c.length;g<d;e=a.call(b,e,c[g],g,c),++g);}else if("function"==typeof c.hasNext&&"function"==typeof c.next){if(c.hasNext())for(e=c.next(),g=1;c.hasNext();e=a.call(b,e,c.next(),g++,c));}else for(g in d=!0,c)g in f||(d?(e=c[g],d=!1):e=a.call(b,e,c[g],g,c));return e},foldr:function(c,a,b,d){"string"==typeof c&&
(c=c.split(""));d=d||l.global;a=k.lambda(a);for(var e=c.length;0<e;--e,b=a.call(d,b,c[e],e,c));return b},foldr1:function(c,a,b){"string"==typeof c&&(c=c.split(""));b=b||l.global;a=k.lambda(a);var d=c.length,e=c[d-1];for(--d;0<d;--d,e=a.call(b,e,c[d],d,c));return e},reduce:function(c,a,b){return 3>arguments.length?k.foldl1(c,a):k.foldl(c,a,b)},reduceRight:function(c,a,b){return 3>arguments.length?k.foldr1(c,a):k.foldr(c,a,b)},unfold:function(c,a,b,d,e){e=e||l.global;a=k.lambda(a);b=k.lambda(b);c=k.lambda(c);
for(var g=[];!c.call(e,d);g.push(a.call(e,d)),d=b.call(e,d));return g}})})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_BuilderUtil":function(){define("dojo/string dojo/dom-class dojo/dom-construct dojo/dom-style ../legends/ChartLegendSymbols ../legends/LegendSymbolRenderer ../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer ../../../dataProvider/supportClasses/data/AreaDataUtil dojo/i18n!esri/nls/jsapi".split(" "),function(t,p,l,k,f,c,a,b,d){var e=d.geoenrichment.dijit.ReportPlayer.ChartContainer;
d=d.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{addTitle:function(g,h,m){g=l.create("div",{"class":"chartTooltip_title esriGERowHigh"},g);m&&this.addColor(m,g);this.addLabel(h,g)},addColor:function(g,h){g=g||{};g=c.renderSymbol({defaultSymbol:f.CIRCLE,fill:g.fill,stroke:g.stroke,marker:g.marker,width:8,height:10});p.add(g,"esriGESpaceAfterBig");l.place(g,h)},addRowOffset:function(g){this.addColor(null,g)},addLabel:function(g,h){return l.create("div",{"class":"chartTooltip_label dijitInline esriGESpaceAfterBig",
innerHTML:g},h)},addValue:function(g,h){return l.create("div",{"class":"chartTooltip_value dijitInline esriGESpaceAfterBig",innerHTML:g},h)},buildStatLabels:function(g,h,m,r,n,q,u){function w(D,G){if(g[D]&&G){var F=l.create("div",{"class":"chartTooltip_row esriGERowHigh"},h);y.addColor(null,F);C.push(y.addLabel(G,F));y.addValue(g[D],F)}}var y=this,C=[];g.showWeight&&w("weightValueLabel",m);g.showMin&&w("minValueLabel",r);g.showMax&&w("maxValueLabel",n);g.showAvg&&w("avgValueLabel",q);g.showWeight&&
w("weightInStackLabel",u);return C},formatTable:function(g){var h=0;g.forEach(function(m){h=Math.max(h,k.get(m,"width"))});g.forEach(function(m){k.set(m,"width",h+"px")})},buildSeriesLabel:function(g){return!0===g.isThisAreaSpecific?g.seriesLabel&&!g.isThisAreaSingleSeries?t.substitute(d.thisAreaSeries,{seriesName:g.seriesLabel}):e.thisArea:g.seriesLabel},addBenchmarkValue:function(g,h){return this.addValue(g.unbenchmarkedValueLabel+" ("+(0<g.value?"+":"")+g.valueLabel+")",h)},buildRichText:function(g,
h){g=a.renderFieldInfoInTableCell(g.richTextFieldInfo,{previewValues:!0,fieldData:g.fieldData,isGraphicReport:!0,getPreviewValueFunction:this.buldPreviewValueFunction(g,{type:"tooltip"})});l.create("div",{"class":"chartTooltip_row esriGERow20",innerHTML:g.formattedValue},h)},buldPreviewValueFunction:function(g,h){return function(m){if(!m||!m.fieldInfo)return null;switch(m.fieldInfo.name){case "headers.CHART_POINT_VALUE":return{value:g.isBenchmarked?g.unbenchmarkedValue:g.value};case "headers.CHART_POINT_NAME":return{formattedValue:g.pointName};
case "headers.CHART_SERIES_NAME":return{formattedValue:g.seriesName};case "headers.CHART_AREA_NAME":return{formattedValue:g.areaName||e.thisArea}}if(!g.fieldData)return null;m=m.fieldInfo;if(m.expressionText&&-1!==m.expressionText.indexOf("!headers.CHART_POINT_VALUE!")){switch(h.type){case "tooltip":var r=g.tooltipTemplateValues;break;case "dataDrilling":r=g.dataDrillingPanelInfo.templateValues}(r=r&&r[m.templateName]&&r[m.templateName][g.fieldInfo&&g.fieldInfo.templateName])&&(m=r)}m=b.getAreaDataValue({featureAttributes:g.isComparisonPoint?
g.comparisonFeatureAttribute:null,fieldData:g.fieldData,featureIndex:g.featureIndex,fieldName:m.templateName||m.name});return"number"===typeof m?{value:m||0}:{formattedValue:m}}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_ColumnBarChartTooltipBuilder":function(){define(["dojo/dom-construct","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l){l=l.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildColumnChartTooltip:function(k,f){var c=k.getGroup&&k.getGroup();
k.isMultiFeature||c&&1!==c.length?this._buildMultiSeriesTooltip(k,f):this._buildSingleSeriesTooltip(k,f)},_buildSingleSeriesTooltip:function(k,f){var c=[];k.richTextFieldInfo&&p.buildRichText(k,f);var a=t.create("div",{"class":"chartTooltip_row esriGERowHigh"},f);p.addColor(k,a);c.push(p.addLabel(k.label,a));k.isUnavailableData?p.addValue(l.unavailableData,a):k.isBenchmarked?p.addBenchmarkValue(k,a):(p.addValue(k.valueLabel,a),c=c.concat(p.buildStatLabels(k,f,l.weight,l.minValue,l.maxValue,l.avgValue)));
a.style.display=k.showValue?"":"none";p.formatTable(c)},_buildMultiSeriesTooltip:function(k,f){var c=[];k.showTitle&&p.addTitle(f,k.isMultiFeature?p.buildSeriesLabel(k):k.label);k.richTextFieldInfo&&p.buildRichText(k,f);var a=t.create("div",{"class":"chartTooltip_row esriGERowHigh"},f);p.addColor(k,a);c.push(p.addLabel(k.isMultiFeature?k.label:p.buildSeriesLabel(k),a));if(k.isUnavailableData)p.addValue(l.unavailableData,a);else if(k.isBenchmarked)p.addBenchmarkValue(k,a);else{p.addValue(k.valueLabel,
a);var b=k.isMultiFeature?p.buildStatLabels(k,f,l.weightInAreas,l.minValueInAreas,l.maxValueInAreas,l.avgValueInAreas,l.weightInStack):k.isSinglePointInSeries?p.buildStatLabels(k,f,null,null,null,null,l.weightInStack):p.buildStatLabels(k,f,l.weightInSeries,l.minValueInSeries,l.maxValueInSeries,l.avgValueInSeries,l.weightInStack);c=c.concat(b)}a.style.display=k.showValue?"":"none";k.showValue&&k.getGroup().forEach(function(d){if(k.id!==d.id){var e=t.create("div",{"class":"chartTooltip_row esriGERowHigh"},
f);p.addColor(d,e);c.push(p.addLabel(d.isMultiFeature?d.label:p.buildSeriesLabel(d),e));d.isUnavailableData?p.addValue(l.unavailableData,e):k.isBenchmarked?p.addBenchmarkValue(d,e):p.addValue(d.valueLabel,e)}});p.formatTable(c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_GaugeChartTooltipBuilder":function(){define(["dojo/dom-construct","dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l,k){k=k.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildGaugeChartTooltip:function(f,
c){f.showTitle&&l.addTitle(c,f.label,f);f.richTextFieldInfo&&l.buildRichText(f,c);c=t.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);l.addRowOffset(c);f.isUnavailableData?l.addLabel(k.unavailableData,c):f.hasNegativeValues?l.addLabel(f.valueLabel,c):l.addLabel(p.substitute(k.gaugeChartTooltip_label,{value:f.valueLabel,total:f.sumValueLabel}),c);c.style.display=f.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_WaffleChartTooltipBuilder":function(){define(["dojo/dom-construct",
"dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l,k){k=k.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildWaffleChartTooltip:function(f,c){f.showTitle&&l.addTitle(c,f.label,f);f.richTextFieldInfo&&l.buildRichText(f,c);c=t.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);l.addRowOffset(c);f.isUnavailableData?l.addLabel(k.unavailableData,c):f.hasNegativeValues?l.addLabel(f.valueLabel,c):l.addLabel(p.substitute(k.waffleChartTooltip_label,{value:f.valueLabel,
total:f.sumValueLabel}),c);c.style.display=f.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_LineChartTooltipBuilder":function(){define(["dojo/dom-construct","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l){l=l.geoenrichment.dijit.ReportPlayer.ChartTooltip;return{buildLineChartTooltip:function(k,f){var c=[];k.showTitle&&p.addTitle(f,k.label);k.richTextFieldInfo&&p.buildRichText(k,f);var a=t.create("div",{"class":"chartTooltip_row esriGERowHigh"},f);
p.addColor(k,a);c.push(p.addLabel(p.buildSeriesLabel(k),a));k.isBenchmarked?p.addBenchmarkValue(k,a):p.addValue(k.valueLabel,a);a.style.display=k.showValue?"":"none";var b;k.isMultiFeature?b=p.buildStatLabels(k,f,l.weightInAreas,l.minValueInAreas,l.maxValueInAreas,l.avgValueInAreas):k.isBenchmarked||(b=p.buildStatLabels(k,f,l.weightInSeries,l.minValueInSeries,l.maxValueInSeries,l.avgValueInSeries,l.weightInStack));b&&(c=c.concat(b));k.showValue&&k.getGroup().forEach(function(d){if(k.id!==d.id){var e=
t.create("div",{"class":"chartTooltip_row esriGERowHigh"},f);p.addColor(d,e);c.push(p.addLabel(p.buildSeriesLabel(d),e));d.isUnavailableData?p.addValue(l.unavailableData,e):d.isBenchmarked?p.addBenchmarkValue(d,e):p.addValue(d.valueLabel,e)}});p.formatTable(c)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/_PieDonutRingChartTooltipBuilder":function(){define(["dojo/dom-construct","dojo/string","./_BuilderUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l,k){k=k.geoenrichment.dijit.ReportPlayer.ChartTooltip;
return{buildPieDonutRingChartTooltip:function(f,c){f.showTitle&&l.addTitle(c,f.label,f);f.richTextFieldInfo&&l.buildRichText(f,c);var a=t.create("div",{"class":"chartTooltip_row esriGERowHigh"},c);l.addRowOffset(a);f.isUnavailableData?l.addLabel(k.unavailableData,a):f.isBenchmarked?l.addBenchmarkValue(f,a):(l.addLabel(p.substitute(k.pieChartTooltip_label,{value:f.valueLabel,total:f.sumValueLabel}),a),c=l.buildStatLabels(f,c,k.weight,k.minValue,k.maxValue,k.avgValue),l.formatTable(c));a.style.display=
f.showValue?"":"none"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/_ChartComparisonSupport":function(){define("dojo/_base/declare ../comparison/ComparisonSelect ./utils/ChartTypes ../../dataProvider/supportClasses/ge/LocalGEChart ./dummyData/DummyGE esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),function(t,p,l,k,f,c,a){function b(d,e){return d&&e&&d.StdGeographyLevel===e.StdGeographyLevel&&d.StdGeographyID===e.StdGeographyID}a=a.geoenrichment.dijit.ReportPlayer.ChartContainer;
return t(null,{comparisonSelect:null,_comparisonAttributes:null,_additionalAttributes:null,_ge:null,_stdPolygonsController:null,_initChartComparisonSelect:function(){var d=this;this._additionalAttributes=[];c.hide(this.comparisonSelectBlock);if(this._currentComparisonInfo){this._updateComparisonLabel();var e=this._getGeoenrichment().getData().features;this.comparisonSelect=(new p({defaultLevelId:this._currentComparisonInfo.defaultLevel,fields:this._getGeoenrichment().getAttributeFields(),canAddFeatures:this._canAddRemoveFeatures(),
addFeatureMessage:a.addToChart,featureIsAlreadyAddedMessage:a.alreadyAdded,canRemoveFeatures:this._canAddRemoveFeatures(),removeFeatureMessage:a.removeFromChart,onFeatureSelected:function(g,h,m){d._setComparisonAttributes(m)},isFeatureAdded:function(g,h,m){return b(d._comparisonAttributes,m)||d._additionalAttributes.some(function(r){return b(r,m)})},canRemoveFeature:function(g,h,m){return!b(d._comparisonAttributes,m)},onAddFeature:function(g,h,m){d._additionalAttributes.push(m);d._updateSeries();
d._syncWithShownFeatures()},onRemoveFeature:function(g,h,m){d._additionalAttributes=d._additionalAttributes.filter(function(r){return!b(r,m)});d._updateSeries();d._syncWithShownFeatures()}})).placeAt(this.comparisonSelectDiv);this.own(this.comparisonSelect);this.comparisonSelect.setFeatures(e);this.comparisonSelect.setDefaultValue();this._comparisonAttributes=this.comparisonSelect.getSelectedAttributes();this.comparisonSelect.get("options").length?(c.show(this.comparisonSelectBlock),c.enableContent(this.comparisonSelectBlock,
!!this.viewModel.dynamicReportInfo),this.viewModel.dynamicReportInfo&&(this._stdPolygonsController=this.viewModel.getStdPolygonsController(this._currentComparisonInfo.calculatorName,this.currentFeatureIndex),this.own(this._stdPolygonsController),this._syncWithShownFeatures())):(this.comparisonSelect.destroy(),this._currentComparisonInfo=null)}},_canAddRemoveFeatures:function(){return this._isMultiFeatureChart&&!l.isLineLike(this._currentChartType)},_updateComparisonLabel:function(){if(this._currentComparisonInfo){var d=
this._canAddRemoveFeatures()?a.selectOrAddGeographyToCompare:this._tableViewInfo?a.compareWith:l.isColumnBarLike(this._getComparisonChartType())?a.comparisonLabelBars:a.comparisonLabelDots;this.comparisonLabel.innerHTML=d;this.comparisonLabel.style.color=this.viewModel.getDocumentDefaultStyles(this.theme).color}},_syncWithShownFeatures:function(){if(this._stdPolygonsController){this._stdPolygonsController.setAttributeFields(this._getGeoenrichment().getAttributeFields());var d=this._getGeoenrichment().getAllGeographyAttributes({ignoreFilters:!0});
this._stdPolygonsController.setShownFeatureAttributes(this._getComparisonFeatureAttributes());this._stdPolygonsController.setAllFeatureAttributes(d)}},_getComparisonChartType:function(){return this._currentComparisonInfo&&this._currentComparisonInfo.chartType||this._currentChartType},_getGeoenrichment:function(){return this._currentComparisonInfo?this._ge?this._ge:this._ge=this.viewModel.dynamicReportInfo?new k(this._originalSeriesItems,this._currentComparisonInfo.calculatorName,this.viewModel.dynamicReportInfo.fieldData.areaData,
this._isMultiFeatureChart,this.viewModel.dynamicReportInfo.analysisAreas.map(function(d){return d.shortName||d.name}),this.currentFeatureIndex):this._createDummyGE():null},_createDummyGE:function(){return f.getInstance()},_setFilterRangesForComparison:function(d){if(!this._currentComparisonInfo)return!1;this._getGeoenrichment().setFilterRanges(d);d=this._getGeoenrichment().getData().features;this.comparisonSelect.setFeatures(d);this.comparisonSelect.setDefaultValue();this._setComparisonAttributes(this.comparisonSelect.getSelectedAttributes());
c[this.comparisonSelect.get("options").length?"show":"hide"](this.comparisonSelectBlock);return!0},_setComparisonAttributes:function(d){this._comparisonAttributes=d;this.comparisonSelect.get("options").length?b(this.comparisonSelect.getSelectedAttributes(),this._comparisonAttributes)||this.comparisonSelect.setSelectedAttributes(this._comparisonAttributes):this._comparisonAttributes=null;d=this._updateSeries();this._syncWithShownFeatures();return d},_getComparisonFeatureAttributes:function(){if(!this._currentComparisonInfo)return null;
var d=this._additionalAttributes.filter(function(g){return 0<=this.comparisonSelect.getFeatureIndexById(g.StdGeographyLevel,g.StdGeographyID)},this),e=this._comparisonAttributes&&d.some(function(g){return b(g,this._comparisonAttributes)},this);d=d.slice();!e&&this._comparisonAttributes&&d.push(this._comparisonAttributes);return d},_getNumComparisonFeatures:function(){var d=this._getComparisonFeatureAttributes();return d&&d.length||0}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonSelect":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/OnDemandSelect esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../../dataProvider/supportClasses/areas/AreasInfoTemplateBuilder ./ComparisonListUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),
function(t,p,l,k,f,c,a,b,d,e){var g=t(c,{createLabelNode:!0,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,_createImageNode:function(h,m){var r=this;if(h.isArea){if(this.fields&&!d.isMobileDevice()){var n=k.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEInfoIcon esriGEComparisonSelect_infoIcon"},m);e.setTooltipToNode(n,function(){return r._buildGeographyTooltip(h)},{notRestricted:!0})}this.canRemoveFeatures&&
(n=k.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_removeButton"},m),this.isAdded(h)&&this.canRemoveFeature(h)?(p(n,"click",function(q){q.stopPropagation();r.onRemoveFeature(h)}),e.setTooltipToNode(n,this.removeFeatureMessage)):l.add(n,"disabled"));this.canAddFeatures&&(m=k.create("div",{"class":"esriGESpaceBeforeBig dijitInline esriGEComparisonSelect_addButton"},m),this.isAdded(h)?(l.add(m,"disabled"),e.setTooltipToNode(m,this.featureIsAlreadyAddedMessage)):(p(m,
"click",function(q){q.stopPropagation();r.onAddFeature(h)}),e.setTooltipToNode(m,this.addFeatureMessage)))}},_buildGeographyTooltip:function(h){var m=this.fields.map(function(r){return{label:r.label,value:r.formatFunction(h.attributes[r.name])}});return a.buildAttributesTable(null,m,{padding:10,maxHeight:document.body.clientHeight-40})},isAdded:function(h){},onAddFeature:function(h){},canRemoveFeature:function(h){},onRemoveFeature:function(h){}});return t(f,{listClass:"esriGEOnDemandSelectSpacedOut esriGEOnDemandSelectVeryTallList600",
defaultLevelId:null,fields:null,addFeatureMessage:null,featureIsAlreadyAddedMessage:null,removeFeatureMessage:null,canAddFeatures:!1,canRemoveFeatures:!1,showTitleForSingleGroup:!1,buildRendering:function(){var h=this;d.isMobileDevice()&&(this.listClass+=" esriGEComparisonSelectListMobile");var m=new g;m.fields=this.fields;m.addFeatureMessage=this.addFeatureMessage;m.featureIsAlreadyAddedMessage=this.featureIsAlreadyAddedMessage;m.canAddFeatures=this.canAddFeatures;m.isAdded=function(r){return h.isFeatureAdded(r.levelId,
r.featureId,r.attributes)};m.onAddFeature=function(r){h.closePopup();h.onAddFeature(r.levelId,r.featureId,r.attributes)};m.canRemoveFeatures=this.canRemoveFeatures;m.removeFeatureMessage=this.removeFeatureMessage;m.canRemoveFeature=function(r){return h.canRemoveFeature(r.levelId,r.featureId,r.attributes)};m.onRemoveFeature=function(r){h.closePopup();h.onRemoveFeature(r.levelId,r.featureId,r.attributes)};this.itemRenderer=m;this.inherited(arguments)},setGroups:function(h){this.set("options",b.getOptionsFromGroups(h,
{hideTitleForSingleGroup:!this.showTitleForSingleGroup}))},setFeatures:function(h){this.set("options",b.getListOptionsFromFeatures(h))},setDefaultValue:function(h){var m=b.getDefaultOptionValue(this.options,this.defaultLevelId);this.set("value",m);if(h&&h.emitEvent)this.onChange();return m},isFeatureAdded:function(h,m,r){return!1},canRemoveFeature:function(h,m,r){return!0},onChange:function(){var h=this.getSelectedItem();h&&this.onFeatureSelected(h.levelId,h.featureId,h.attributes)},getFeatureIndexById:function(h,
m){return b.getFeatureIndexInOptionsById(this.options,h,m)},selectFeatureByIndex:function(h){h=b.getOptionValueByFeatureIndex(this.options,h||0);this.set("value",h);return h},getNumFeatures:function(){return b.getNumFeaturesFromOptions(this.options)},getValue:function(){var h=this.getSelectedItem();return h&&{value:h.value,featureId:h.featureId,levelId:h.levelId,attributes:h.attributes}},setValue:function(h,m){this.set("value",h+"."+m)},getSelectedAttributes:function(){var h=this.getSelectedItem();
return h&&h.attributes},setSelectedAttributes:function(h){h&&this.setValue(h.StdGeographyLevel,h.StdGeographyID)},onFeatureSelected:function(h,m,r){},onAddFeature:function(h,m,r){},onRemoveFeature:function(h,m,r){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasInfoTemplateBuilder":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/PopupTemplate ../attachments/AttributesUtil esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c){c=c.geoenrichment.dijit.ReportPlayer.AreasInfoTemplateBuilder;var a={buildInfoTemplates:function(b,d,e){var g=this,h={};d=d.map(function(m,r){return t(g._getAttributesAndNotesForAreaAt(b,r),function(n){h[r]=n;g._buildAreaInfoTemplate(m,n.attributesText,n.notesText)})});return p(d).then(function(){e.groups&&e.groups.forEach(function(m){var r=h[m.indexes[0]];g._buildGroupInfoTemplate(m,r.attributesText,r.notesText)})})},buildInfoTemplateForFeature:function(b,d,e,g){var h=this;
return t(this._getAttributesAndNotesForAreaAt(b,e),function(m){h._buildFeatureInfosInfoTemplate([{feature:d,title:g}],m.attributesText,m.notesText)})},_getAttributesAndNotesForAreaAt:function(b,d){b.supportsMultipleAreas&&b.setCurrentAnalysisAreaIndex(d);return p([function(){return t(b.getAttributes(),function(e){return e&&e.length?a.buildAttributesTable(c.attributes,e.map(function(g){return{label:g.alias,value:k.formatAttributeValue(g,{unavailableDataValue:c.unavailableData})}})):null})}(),function(){return t(b.getNotes(),
function(e){return e&&e.length?a.formatArrayOfTexts(c.notes,e.map(function(g){return g.text})):null})}()]).then(function(e){return{attributesText:e[0]||"",notesText:e[1]||""}})},_buildAreaInfoTemplate:function(b,d,e){var g=[{feature:b.feature,title:b.name}];b.location&&g.push({feature:b.location,title:b.locationName||b.name});this._buildFeatureInfosInfoTemplate(g,d,e)},_buildGroupInfoTemplate:function(b,d,e){var g=[];b.location&&g.push({feature:b.location,title:b.locationName||b.name});this._buildFeatureInfosInfoTemplate(g,
d,e)},_buildFeatureInfosInfoTemplate:function(b,d,e){b.forEach(function(g){d||e?g.feature.setInfoTemplate(new l({title:g.title,fieldInfos:[],description:d+e})):g.feature.setInfoTemplate(null)})},formatArrayOfTexts:function(b,d){return"\x3cp\x3e"+b+"\x3c/p\x3e\x3cp style\x3d'padding-left:10px'\x3e"+(d.join("\x3cbr/\x3e\x3cbr/\x3e")+"\x3c/p\x3e")},buildAttributesTable:function(b,d,e){e=e||{};var g=e.padding?e.padding+"px":"0px 5px",h=null;if(e.maxHeight){var m=e.padding||0,r=f.getTextBox("Text").h;
m=(2*m+r)*(d.length+(b?1:0));e.maxHeight<m&&(m=e.maxHeight/m,h=Math.floor(r*m)+"px",e.padding&&(g=Math.floor(e.padding*m*.5)+"px "+e.padding+"px"))}var n="";b&&(n+="\x3cp\x3e"+b+"\x3c/p\x3e");var q="padding:"+g+";"+(h?"font-size:"+h+";":"");n+="\x3ctable\x3e";d.forEach(function(u){n+="\x3ctr style\x3d'text-align:left;'\x3e";var w=n+="\x3ctd style\x3d'"+q+"'\x3e"+u.label+"\x3c/td\x3e";u=u.value;u=null===u||void 0===u||"number"===typeof u&&isNaN(u)?c.unavailableData:u;n=w+("\x3ctd style\x3d'"+q+"'\x3e"+
u+"\x3c/td\x3e");n+="\x3c/tr\x3e"});return n+="\x3c/table\x3e"}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonListUtil":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(t,p,l,k){var f={getListOptionsFromFeatures:function(c,a){c=f.getFeatureGroups(c,a);return f.getOptionsFromGroups(c,a)},getFeatureGroups:function(c,a){var b={},d=[];c.forEach(function(e){if(!e.attributes.isThisArea){var g=
e.attributes.StdGeographyLevel||"",h=b[g];h||(h=(h=k.getGeographiesModel())?h.getLevelPluralName(g):g,h={levelId:g,label:h,features:[]},b[g]=h,d.push(h));h.features.push(e)}});d.forEach(function(e){e.features.sort(function(g,h){return(g.attributes.StdGeographyName||"").localeCompare(h.attributes.StdGeographyName||"")})});return d},getOptionsFromGroups:function(c,a){function b(m){m.features.forEach(function(r){g.push({isArea:!0,value:d||!r.attributes.StdGeographyID?String(h++):r.attributes.StdGeographyLevel+
"."+r.attributes.StdGeographyID,label:r.attributes.StdGeographyName||"",attributes:r.attributes,featureId:r.attributes.StdGeographyID,levelId:m.levelId})})}var d=a&&a.isIndexBased,e=a&&a.hideTitleForSingleGroup,g=[],h=0;1!==c.length||c[0].levelId?c.forEach(function(m,r){0<r&&g.push({isSeparator:!0});(1<c.length||!e)&&g.push({isTitle:!0,enabled:!1,value:m.levelId,label:m.label+":"});b(m)}):b(c[0]);return g},getDefaultOptionValue:function(c,a){function b(e){var g;c.some(function(h){if(h.isArea&&(!e||
!d||h.levelId===d.id))return g=h,!0});return g}var d;a&&(d=k.getGeographiesModel().getLevel(a));return(a=b(!0)||b(!1))&&a.value},getFeatureIndexInOptionsById:function(c,a,b){var d=a+"."+b,e=-1,g=0;c.some(function(h){if(h.isArea){if(h.value===d)return e=g,!0;g++}});return e},getOptionValueByFeatureIndex:function(c,a){var b,d=0;c.some(function(e){if(e.isArea){if(d===a)return b=e,!0;d++}});return b&&b.value},getNumFeaturesFromOptions:function(c){var a=0;c.forEach(function(b){b.isArea&&a++});return a}};
t=t(l,{createPresentation:function(c,a,b,d,e){var g=this.inherited(arguments);c.isArea&&p.add(g,"esriGEComparisonList_areaItemRoot");return g}});f.ComparisonListItemRenderer=t;return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart":function(){define(["dojo/_base/declare","dojo/_base/lang","./LocalGEBase","../data/AreaDataUtil"],function(t,p,l,k){return t(l,{_fieldNameToPointCache:null,constructor:function(f,c,a,b,d,e){this._fieldNameToPointCache={};f[0]&&f[0].points.forEach(function(g){g.fieldInfo&&
(this._fieldNameToPointCache[g.fieldInfo.name]=g)},this);(this._skipThisArea=b)?(a=k.combineAreaDataObjectCalculators(a,c,{removeDuplicates:!0}),b=a.thisAreas.map(function(g,h){g=p.mixin({},g);g.StdGeographyName=d[h];g.isThisArea=!0;return g}),f={},f[c]={data:b.shift(),comparisonLevels:b.concat(a.comparisonLevels)}):f=a[e||0];this._initGE(null,f,c)},_createField:function(f,c){var a=this.inherited(arguments),b=this._fieldNameToPointCache[f];if(b&&b.fieldInfo){var d=b.fieldInfo;a.alias=b.label||d.alias;
a.decimals="number"===typeof d.decimals?d.decimals:-1;a.units=d.showPercent?"pct":d.showCurrency?"currency":a.units;a.type=d.type||a.type}else a.noVariableField=!0;return a},_filterAttributeField:function(f){return!f.noVariableField}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on esri/graphic esri/tasks/FeatureSet ./_GEFilterSupport ../data/AreaDataUtil ../stdGeographies/StdGeographiesUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,f,c,a,b,d,e,g){g=g.geoenrichment.dijit.ReportPlayer.ReportPlayer;return t([l,a],{metadata:{name:"StdGeographyName",address:"address"},variables:null,data:null,_variableShortToFullNameCache:null,_areaData:null,_skipThisArea:!1,_initGE:function(h,m,r){this.variables=h||[];this._variableShortToFullNameCache={};this.variables.forEach(function(n){this._variableShortToFullNameCache[-1===n.indexOf(".")?n:n.substr(n.indexOf(".")+1)]=n},this);(h=m&&b.getAreaDataObjectCalculator(m,r))?this._areaData=
[h.data].concat(h.comparisonLevels||[]):this._handleError(Error("Can't get calculator"))},setVariables:function(h){this.variables=h},_createFeatureSet:function(){var h=new c,m=this._prepareFeatures();h.features=m;h.fields=this._prepareFields(m);this._prepareFieldAliases(h);return h},_prepareFeatures:function(){var h=[];if(!this._areaData)return h;for(var m=0;m<this._areaData.length;m++){var r={};this._propulateAttributesFromAreaData(r,this._areaData[m]);r.StdGeographyName=String(r.StdGeographyName||
"");r.StdGeographyID=String(r.StdGeographyID||"");r.StdGeographyLevel=String(r.StdGeographyLevel||"");if(0!==m||this._skipThisArea){if(!r.StdGeographyName&&!r.StdGeographyID&&!r.StdGeographyLevel){console.log("LocalGEBase.js can't add an unidentifiable geography.");continue}r.StdGeographyName=d.getAreaName(r)}else r.StdGeographyName=g.thisArea,r.isThisArea=!0;h.push(new f(null,null,r))}return h},_propulateAttributesFromAreaData:function(h,m){p.mixin(h,m)},_prepareFields:function(h){var m=[];if(!h.length)return m;
h=h[0].attributes;for(var r in h)m.push(this._createField(r,h));return m},_stringAttrs:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1},_createField:function(h,m){m=this._stringAttrs[h]||"string"===typeof m[h];return{name:h,alias:h,type:m?"esriFieldTypeString":"esriFieldTypeDouble",length:m?256:void 0,fullName:this._variableShortToFullNameCache[h],decimals:m?void 0:0,units:m?"other":"double",symbol:e.getCurrencySymbol()}},_prepareFieldAliases:function(h){h.fieldAliases={};h.fields.forEach(function(m){h.fieldAliases[m.name]=
m.alias})},_handleError:function(h){setTimeout(function(){h&&k.emit(this,"error",h)}.bind(this))},isBusy:function(){return!1},setOutSR:function(){},setGeoLevels:function(){},setStudyArea:function(){},stop:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/_GEFilterSupport":function(){define(["dojo/_base/declare","esri/tasks/FeatureSet","esri/dijit/geoenrichment/infographicUtils/formatVariable","esri/dijit/geoenrichment/utils/ObjectUtil"],function(t,p,l,k){return t(null,
{_filterRanges:null,_alwaysAllowThisAreasWhenFiltering:!1,getData:function(f){this.data||(this.data=this._createFeatureSet());return f&&f.ignoreFilters?this.data:this._filterRanges&&this._filterRanges.length&&this.data?this._filterData(this.data):this.data},_createFeatureSet:function(){},_filterData:function(f){var c=new p;c.fields=f.fields;c.fieldAliases=f.fieldAliases;c.features=f.features.filter(function(a){return this._alwaysAllowThisAreasWhenFiltering&&a.attributes.isThisArea?!0:!this._filterRanges.some(function(b){var d=
a.attributes[b.fieldName];return d<b.min||d>b.max})},this);return c},_excludeMap:{StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1,isThisArea:1},getAttributeFields:function(){var f=this.getData({ignoreFilters:!0});if(!f)return[];f=f.fields;for(var c=[],a=0;a<f.length;a++){var b=f[a];!this._excludeMap[b.name]&&this._filterAttributeField(b)&&c.push({name:b.name,label:b.alias,decimals:0<=b.decimals?b.decimals:void 0,type:b.type,formatFunction:function(d){return function(e){return-1===d.decimals?
k.formatNumber(e):l(d,e)}}(b)})}return c},_filterAttributeField:function(f){return this.variables&&this.variables.length?"HouseholdsByIncome.*"===this.variables[0]?0===f.name.indexOf("HIN"):"HouseholdIncomeCurrentYear.*"===this.variables[0]?0===f.name.indexOf("EHYHNI"):"Age.*"===this.variables[0]?0===f.name.indexOf("FEM")||0===f.name.indexOf("MAL")||0===f.name.indexOf("ECYP"):-1!==this.variables[0].indexOf("AVGHHSZ")?-1!==f.name.indexOf("AVGHHSZ"):"RaceAndEthnicity.*"===this.variables[0]?-1!==f.name.indexOf("_CY_"):
!0:!0},getAllGeographyAttributes:function(f){f=this.getData(f);if(!f)return[];f=f.features;for(var c=[],a=0;a<f.length;a++){var b=f[a].attributes;b.isThisArea||c.push(b)}return c},setFilterRanges:function(f,c){this._filterRanges=f;this._alwaysAllowThisAreasWhenFiltering=c&&c.ignoreThisAreas},collectFilterRangesStats:function(f){if(!this.getData())return null;f=f||{};var c=f.additionalAttributes||[];c=c.concat(f.excludeThisAreas?this.getAllGeographyAttributes({ignoreFilters:!0}):this.getData({ignoreFilters:!0}).features.map(function(b){return b.attributes}));
var a=[];this.getAttributeFields().forEach(function(b){if("esriFieldTypeString"!==b.type){var d={fieldName:b.name,alias:b.label,min:Infinity,max:-Infinity,decimals:b.decimals,dataArray:[]};a.push(d);c.forEach(function(e){e=e[b.name];d.min=Math.min(d.min,e);d.max=Math.max(d.max,e);d.dataArray.push(e)})}});return{filterRanges:a,numAreasTotal:c.length}}})})},"esri/dijit/geoenrichment/infographicUtils/formatVariable":function(){define(["dojo/number"],function(t){return function(p,l){var k=p.decimals||
0;switch(p.units){case "pct":return t.format(l/100,{places:k,type:"percent"});case "currency":return t.format(l,{places:k,type:"currency",symbol:p.symbol||"$"});default:return"esriFieldTypeDouble"==p.type||"double"==p.type?t.format(l,{places:k}):"number"===typeof l?Number(l.toFixed(10)):l}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(t){var p={US_STATES_IDS:{"01":"AL",
"02":"AK","03":"AS","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",13:"GA",14:"GU",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",43:"PR",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY"},CA_PROVINCE_IDS:{10:"NL",59:"BC",60:"YT",61:"NT",62:"NU",11:"PE",
12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB"},BUILDER_DATA:{US_census:{"US.CD":"%name%, %state%","US.CSD":"%name%, %state%","US.Counties":"%name%, %state%","US.Places":"%city%, %state%","US.ZIP5":"%id% (%name%)"},CA_census:{"CAN.FSA":"%id% (%name%)","CAN.CD":"%name%, %province%"}},getAreaName:function(l){var k=t.getCountryID(),f=t.getHierarchyID();if(!k||!f)return l.StdGeographyName;k=k+"_"+f;var c=p.BUILDER_DATA[k];c||(f=t.getGeographiesModel(),c=p.BUILDER_DATA[k]={},f.getLevels(!0).forEach(function(a){c[a.id.toUpperCase()]=
"%id% (%name%)"}));return p.buildDescription(l.StdGeographyID,l.StdGeographyName,l.StdGeographyLevel,c)},buildDescription:function(l,k,f,c){c=c&&(c[f.toUpperCase()]||c["*"]);k=k||l;return"%id% (%name%)"===c&&0<=k.indexOf(l)?k:c?c.replace(/%(\w+)%/g,function(a,b){return p._buildDescriptionPart(a,b,l,k,f)}):k},_buildDescriptionPart:function(l,k,f,c,a){try{a.substr(0,a.indexOf(".")).toLowerCase();var b=p["_build_"+k];return b&&b(f,c)}catch(d){}return l},_build_id:function(l,k){return l},_build_name:function(l,
k){return k},_build_city:function(l,k){return k.replace(/(\s|^)(\w)/g,function(f,c,a){return c+a.toUpperCase()})},_build_state:function(l,k){return(l=l&&2<=l.length?p.US_STATES_IDS[l.substr(0,2)]:null)?l:"??"},_build_province:function(l,k){return(l=l&&2<=l.length?p.CA_PROVINCE_IDS[l.substr(0,2)]:null)?l:"??"}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/dummyData/DummyGE":function(){define(["esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ge/LocalGEChart","dojo/i18n!esri/nls/jsapi"],
function(t,p){p=p.geoenrichment.dijit.ReportPlayer.DummyGE;return{_ge:null,getInstance:function(){this._ge||(this._ge=this._createGE());return this._ge},_createGE:function(){return new t([],"dummyCalc",[{dummyCalc:{data:{StdGeographyName:null,StdGeographyID:null},comparisonLevels:[{StdGeographyName:p.sampleData,StdGeographyID:"sampleData"}]}}])}}})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartSorting":function(){define([],function(){var t={NONE:"None",ASC:"Ascending",DESC:"Descending",
isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.NONE}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartFilterUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ChartTypes","./builder/utils/ChartDataUtil"],function(t,p,l,k){var f={collectStatsForVariables:function(c,a,b,d,e){var g=0,h={min:Infinity,max:-Infinity,decimals:0,dataArray:[]};a.forEach(function(m,
r){m.points.forEach(function(n,q){n=k.getPointValue({point:n,viewModel:d,currentFeatureIndex:e,index:q,seriesIndex:r,chartType:c,visualProperties:b,numPoints:m.points.length});h.min=Math.min(h.min,n);h.max=Math.max(h.max,n);h.decimals=Math.max(h.decimals,p.getPlaces(n));h.dataArray.push(n);g++})});return{filterRanges:[h],numVariablesTotal:g}},filterSeriesItems:function(c,a,b,d,e,g,h){return h?f._filterAreas(c,a,d,e):f._filterVariables(c,a,b,d,e,g)},_filterAreas:function(c,a,b,d){var e=0,g={};b.forEach(function(m){g[m.fieldName]=
m});if(l.isLineLike(c))c=a.filter(function(m,r){return!m.points.some(function(n){var q=k.getPointValue({point:n,viewModel:d,currentFeatureIndex:r});n=g[n.fieldInfo.name];return q<n.min||q>n.max})}),e=c.length,c.length||(c.__firstSeriesItem=a[0]);else{var h={};a.forEach(function(m){m.points.forEach(function(r,n){if(!h[n]){var q=k.getPointValue({point:r,viewModel:d,currentFeatureIndex:n});r=g[r.fieldInfo.name];if(q<r.min||q>r.max)h[n]=!0}})});c=a.map(function(m){m=t.mixin({},m);m.__firstPoint=m.points[0];
m.points=m.points.filter(function(r,n){return!h[n]});e=m.points.length;return m})}return{seriesItems:c,numShownElements:e}},_filterVariables:function(c,a,b,d,e,g){var h=0,m=d[0];var r=[];var n=1<a.length;a.forEach(function(w,y){var C=t.mixin({},w);C.points=[];w.points.forEach(function(D,G){D.originalIndex=G;G=k.getPointValue({point:D,viewModel:e,currentFeatureIndex:g,index:G,seriesIndex:y,chartType:c,visualProperties:b,numPoints:w.points.length});G<m.min||G>m.max?n&&(D=t.mixin({},D),D.hidden=!0,C.points.push(D)):
C.points.push(D)});n?r.push(C):C.points.length&&r.push(C)});if(n){var q=0;r.forEach(function(w){q=Math.max(q,w.points.length)});for(var u=0;u<q;u++)r.every(function(w){w=w.points[u];return!w||w.hidden})&&r.forEach(function(w){if(w=w.points[u])w._toRemove=!0});r=r.filter(function(w){w.points=w.points.filter(function(y){return!y._toRemove});return w.points.length})}r.forEach(function(w){w.points.forEach(function(y){y.hidden||h++})});return{seriesItems:r,numShownElements:h}},getFirstSeriesPoint:function(c){return c.__firstPoint},
getFirstSeriesItem:function(c){return c.__firstSeriesItem}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/utils/ChartDataUtil":function(){define(["../../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoRenderer","esri/dijit/geoenrichment/utils/ObjectUtil","../../ChartTypes","esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(t,p,l,k,f){function c(m){return b||
(m&&m.yAxis&&m.yAxis.nonZeroInclusive?e:d)}var a={formatNumber:function(m,r,n,q){m=m||0;r={places:r.dataLabelsDecimals||0,preserveTrailingZeroes:!0};if(q)return p.formatNumberAsCurrency(m,f.getCurrencyFormat(),r);m=p.formatNumber(m,r);n&&(m+="%");return m},undefinedToDefault:function(m,r){return void 0===m?r:m}},b,d=[1E3,1100,1200,150,70,900,110,300,80,200,1700],e=[1E3,1100,1250,1200,1050,990,1010,1110,1260,1210,1060,995],g=[1,.7,1.2,.5,1.1,1.3,.3,2,.4],h=[.91,.92,.9,1.2,1.2,1.3];a.CHART_DATA_SMOOTH=
[1145,1134,1159,1275,1404,1408,1337,1149,1074,1040,1065,1078,964,798,531,360,254,258];a.getPointValue=function(m){var r=m.point,n=m.index,q=m.seriesIndex,u=m.chartType,w=m.visualProperties,y=m.viewModel,C=m.currentFeatureIndex,D=m.chartData,G=m.isComparisonSeries,F=m.comparisonFeatureAttribute;m=m.numPoints;if(r.value&&(r.value.value||y.dynamicReportInfo))return r.value.value;if(y.dynamicReportInfo)D=G?F&&F[r.fieldInfo.name]||0:t.getFieldDataValue(r.fieldInfo,{fieldData:y.dynamicReportInfo.fieldData,
featureIndex:C}),D=p.parseNumber(D),isNaN(D)&&console.log("Can't render chart value for field \x3d\x3e "+(r.fieldInfo?r.fieldInfo.name:"missing field"));else if(r=r.fieldInfo&&r.fieldInfo.statefulName&&r.fieldInfo.statefulName.charAt(0),D=D||c(w),D=D[n%D.length],u===l.GAUGE&&"p"!==r&&w.gaugeRangeMax)m=w.gaugeRangeMin||0,D=.425123*(w.gaugeRangeMax-m)+m;else if(u===l.WAFFLE)"p"===r||"number"!==typeof w.waffleRangeMin&&"number"!==typeof w.waffleRangeMax?m&&(D="p"===r?90.85/m:D/m):(n=w.waffleRangeMin,
w=w.waffleRangeMax,"number"===typeof n&&"number"!==typeof w?w=0===n?1E3:n*((1<m?m:2)+1):"number"!==typeof n&&"number"===typeof w&&(n=0),D=.9085*(w-n)/(m||1)+n);else if(D*=g[q%g.length]*(0===q?1:h[n%h.length]),!w.conditionalStyling){m=D;if("p"===r||w.dataLabelsShowValuePercentSymbol||w.yAxis&&w.yAxis.showPercentSymbol||w.yAxis&&w.yAxis.showValuesAsWeightsInSeries)m=Number((m/24.5123).toFixed(w.dataLabelsDecimals||1));"i"===r&&(m=Number((m/7).toFixed(w.dataLabelsDecimals||1)));D=m}return D};a.getCaptionValue=
function(m,r){return m.captionFieldInfo?r.dynamicReportInfo?t.getFieldDataValue(m.captionFieldInfo,{fieldData:r.dynamicReportInfo.fieldData}):t.renderFieldInfoInTableCell(m.captionFieldInfo).formattedValue:""};a.allowNegativeValuesInPreview=function(m,r){return l.supportsNegativeValues(m)&&!r.isStacked&&!r.renderColumnBarsInOppositeDirections};a.getChartData=function(m){function r(){u=Infinity;w=-Infinity;q.forEach(function(D){u=Math.min(u,D);w=Math.max(w,D)})}function n(D,G,F){var B=w-u,z=u;u=isFinite(D)?
D:Math.min(0,u);w=isFinite(G)?G:w>=u?w:2*u;F&&(D=.1*(w-u),u+=D,w-=D);var E=(w-u)/B;q=q.map(function(I){return(I-z)*E+u})}var q=m.chartData;q=(q||c(m.visualProperties)).slice();q.length=Math.min(q.length,m.numPoints);var u,w;if(m.filterRangesStats)return r(),n(m.filterRangesStats.min,m.filterRangesStats.max,!0),q;if(m.conditionalStats){r();var y=m.conditionalStats.min,C=m.conditionalStats.max;m.conditionalStats.canFallBelowMin&&(y=0===y?-10:0>y?1.2*y:.8*y);m.conditionalStats.canFallAboveMax&&(C=0===
C?10:0>C?.8*C:1.2*C);n(y,C,!1)}return q};a.setPreviewChartData_dev=function(m){b=m};a.getConditionalStylesForStatsPointValues=function(m,r){m=m.map(function(n){return"object"===typeof n?n.isBenchmarked?n.ownValue:n.value:n});return k.getConditionalStylesOrFileNamesForGroup(r.conditionalStyling,m)};return a})},"url:esri/dijit/geoenrichment/templates/OnDemandSelect.html":'\x3cdiv class\x3d"esriGEOnDemandSelect"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"openButton" class\x3d"onDemandSelect_openButton"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"arrow" class\x3d"onDemandSelect_arrow"\x3e\x26nbsp;\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedLabel" class\x3d"onDemandSelect_selectedLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedItemHolder" class\x3d"onDemandSelect_selectedItem TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ComparisonSettings.html":'\x3cdiv class\x3d"esriGEReportPlayerToolbar_comparisonSettings esriGENonSelectable"\x3e\r\n    \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n        ${nls.comparisonSettings}\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriGESpaceBefore20"\x3e\r\n        \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"showBackgroundImageLabel"\x3e\x26nbsp;${nls.showBackgroundImage}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"splitPanelsLabel"\x3e\x26nbsp;${nls.splitPanels}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"splitPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e${nls.zoomPanels}\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"zoomPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomSplitBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomSplitLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetSplitButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/PlayerToolbarHolder.html":'\x3cdiv class\x3d"esriGEPlayerToolbar"\x3e\r\n\r\n    \x3c!--left--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"infographicsSelectDiv" class\x3d"dijitInline playerToolbar_infographicsSelectDiv"\x3e\x3c/div\x3e\r\n    \r\n    \x3c!--center--\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"areaTitleDiv" class\x3d"dijitInline playerToolbar_areaTitleDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"areaTitleInnerDiv" class\x3d"dijitInline playerToolbar_areaTitleInnerDiv TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"areasSelectDiv" class\x3d"dijitInline playerToolbar_areasSelectDiv"\x3e\x3c/div\x3e\r\n\r\n    \x3c!--right--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rightSideControlsBlock" class\x3d"dijitInline playerToolbar_rightSideControlsBlock"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"zoomSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_zoomSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"pageSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_pageSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"commandButtonsContainer" class\x3d"dijitInline playerToolbar_commandButtonsContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ReportPlayer.html":'\x3cdiv class\x3d"esriGEReportPlayer esriGENonSelectable"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"printBackgroundView" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"normalViewDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"playerToolbarDiv"\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"printableDivContainer" class\x3d"reportPalyer_printableDivContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableDiv" class\x3d"reportPalyer_printableDiv"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"reportContainerDiv"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"reportPlayer_sidePageNavigator" data-dojo-attach-point\x3d"sidePageNavigator"\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowUp" data-dojo-attach-point\x3d"prevPageButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowDown" data-dojo-attach-point\x3d"nextPageButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"playerAfterToolbarDiv" class\x3d"reportPlayer_playerAfterToolbarDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/upArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.79 4.71L8 0.5L12.21 4.71L10.8 4.71L8.5 2.42L8.5 15.5L7.51 15.5L7.51 2.4L5.2 4.71L3.79 4.71Z"/\x3e\r\n\x3c/svg\x3e\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/themes/images/longArrows/downArrowLong.svg.txt":'\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 16 16"\x3e\r\n\t\x3cpath fill\x3d"${fillColor}" d\x3d"M3.9 11.45L8.12 15.67L12.33 11.45L10.91 11.45L8.62 13.74L8.62 0.56L7.63 0.56L7.63 13.76L5.32 11.45L3.9 11.45Z"/\x3e\r\n\x3c/svg\x3e\r\n',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/AdjustableGrid.html":'\x3cdiv class\x3d"esriGEAdjustableGrid"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"mainNode" class\x3d"adjustableGridMainNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/MinMaxLegend.html":'\x3cdiv class\x3d"esriGEMinMaxLegend"\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"largestGroupTitleDiv"\x3e${nls.largestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"largestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriGEMinMaxLegend_variableBlock"\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_titleRow" data-dojo-attach-point\x3d"smallestGroupTitleDiv"\x3e${nls.smallestGroup}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriGEMinMaxLegend_valueRow" data-dojo-attach-point\x3d"smallestGroupDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/ChartContainer.html":'\x3cdiv class\x3d"esriGEReportPlayer_chartContainer esriGENonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chartLabel" class\x3d"chartContainer_chartLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"noDataPlaceHolder" class\x3d"esriGENoDataPlaceHolder"\x3e\r\n        \x3cdiv class\x3d"esriGENoDataPlaceHolderLabel"\x3e${nls.noChartData}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartNormalViewDiv"\x3e\r\n        \x3cdiv class\x3d"chartContainer_chartContainerWithAxis" data-dojo-attach-point\x3d"chartContainerWithAxis"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"chartContainerDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"tableContainerDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"legendContainerDiv" class\x3d"chartContainer_legendContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"comparisonSelectBlock" class\x3d"chartContainer_comparisonSelectBlock"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonLabel" class\x3d"chartContainer_comparisonLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"comparisonSelectDiv" class\x3d"chartContainer_comparisonSelectDiv"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"errorDiv" class\x3d"esriGEReportPlayerPanelErrorMessage"\x3e${nls.chartLoadError}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"missingVariablesDiv" class\x3d"chartContainer_missingVariablesMessage"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"*noref":1}});
define("esri/dijit/geoenrichment/ReportPlayer/ReportPlayer","dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin ./config ./playerSupports/_CommandSupport ./playerSupports/_LogoSupport ./playerSupports/_MapSupport ./playerSupports/_PageNavigationSupport ./playerSupports/_PrintSupport ./playerSupports/_ReportContainersSwitcher ./playerSupports/_SmartLayoutSupport ./playerSupports/_ZoomSupport ./playerSupports/_WaitingSupport ./supportClasses/PlayerConfigurator ./supportClasses/PlayerToFullScreenAnimator ./toolbar/PlayerToolbar ./ReportPlayerViewModel ./PlayerResizeModes ./PlayerThemes ./PlayerViewModes ./ReportPlayerState ./PlayerZoomBehaviors ./DataProviderGE ./dataProvider/commands/supportClasses/LayoutXMLBuilder esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/async/AsyncQueue dojo/text!./templates/ReportPlayer.html dojo/i18n!esri/nls/jsapi ./_devConfig".split(" "),function(t,
p,l,k,f,c,a,b,d,e,g,h,m,r,n,q,u,w,y,C,D,G,F,B,z,E,I,L,M,O,Q,T,X,U,aa,Y,ea,K,V){K=K.geoenrichment.dijit.ReportPlayer.ReportPlayer;return t([d,e,h,m,r,q,u,w,y,n,C],{templateString:ea,nls:K,isPlayer:!0,dataProvider:null,exportCommands:null,config:null,theme:void 0,viewMode:void 0,enableDataDrilling:!0,showToolbarInPopup:!1,showAreaTitle:void 0,showReportTitle:!1,scaleSlidesToFitWindow:void 0,showCloseButton:!1,showToFullScreenAnimation:!1,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettings:null,
resizeMode:void 0,printConfig:{subtitle:K.preparedByEsri,printDialogClass:"esri/dijit/geoenrichment/ReportPlayer/printing/PageOptionsDialog/PageOptionsDialog"},showProgressBar:!0,defaultZoomBehavior:void 0,nlsMap:null,isDataDrillingPlayer:!1,isPlayerOnServer:!1,_viewModel:null,_reportData:null,_analysisAreaIndex:0,_originalAreaViewMode:null,_showAllAreasSideBySide:!1,playerToolbar:null,postCreate:function(){this.config=p.mixin(g,this.config);if(g.isPlayerOnServer=this.isPlayerOnServer)g.maps.maxNumberOfMapsShownAtTheSameTime=
1E6,this.defaultZoomBehavior=M.RESET;this._viewModel=new (this._getViewModelClass());this._setUpDataProvider();D.configurePlayer(this);!this.isPlayerOnServer&&this._initToolbar();this._initContainerSwither();!this.isPlayerOnServer&&this._initSmartLayout();!this.isPlayerOnServer&&this._initCommands();!this.isPlayerOnServer&&this._initPageNavigationControls();!this.isPlayerOnServer&&this._initZoomControls();!this.isPlayerOnServer&&this._applyTheme();!this.isPlayerOnServer&&this._showError(!1);!this.isPlayerOnServer&&
this._initProgressController();X.isMobileDevice()&&(b.add(this.domNode,"esriGEReportPlayerMobile"),this._setUpMobileOrientationHandling());this._updateElementsVisibility()},_setUpDataProvider:function(){this.dataProvider=this.dataProvider||new O;this.exportCommands&&this.exportCommands.forEach(function(N){this.dataProvider.registerCommand(N)},this)},_orientationDfd:null,_setUpMobileOrientationHandling:function(){var N=this;this.own(c(window,"orientationchange",function(){N._orientationDfd&&N._orientationDfd.resolve("cancel");
var P=N._orientationDfd=new k;N._showWaiting(P.promise,"orientationchange");P.promise.then(function(S){"cancel"!==S&&(N._setViewMode(null),N.refresh())});f(N.getRenderPromise(),function(){T.delay(500).then(P.resolve,P.resolve)})}))},_getViewModelClass:function(){return B},_setViewMode:function(N){D.configurePlayer(this,N);this._refreshZoomControls()},_initToolbar:function(){var N=this;this.playerToolbar=(new F({player:this,popupButtonDiv:this.playerAfterToolbarDiv,showToolbarInPopup:this.showToolbarInPopup,
showAreaTitle:this.showAreaTitle,stretchToolbarNode:!this.showToolbarInPopup&&(this.resizeMode===z.FIT_WINDOW?document.body:this.domNode),showCloseButton:this.showCloseButton,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowAnalysisAreaAt:function(P){N.showAnalysisAreaAt(P)},onCompareAreasSideBySide:function(){N.showAllAnalysisAreasSideBySide()},onShowPageAt:function(P){N.showPageAt(P)},isScrollShown:function(){var P=N.getCurrentReportContainer();return P&&P.isScrollShown&&
P.isScrollShown()},onClose:function(){N._onClose()},onAddMoreAreas:function(){N.onAddMoreAreas()},onRemoveAreas:function(P){N.onAreasPreRemoved(P);P.forEach(function(da){da.hidden=!0});if(N.viewMode===I.PANELS_IN_STACK_ALL)if(2>N.getAnalysisAreas().filter(function(da){return!da.hidden}).length)N._setAllAreasVisible(!1);else{var S={};P.forEach(function(da){S[da.index]=!1});N.getCurrentReportContainer().setAreasVisibilityState(S,{append:!0});N._updateAreaSelect()}else if(N.getCurrentAnalysisArea().hidden){var ca=
N.getAnalysisAreas().filter(function(da){return!da.hidden})[0];ca?N.showAnalysisAreaAt(ca.index):N.refresh()}else N._updateAreaSelect();N.onAreasRemoved(P)}})).placeAt(this.playerToolbarDiv);this.own(this.playerToolbar);this.showCloseButton&&this.own(c(window,"keyup",function(P){N.getWaitingPromise()||L.isViewingDataDrillingZoom||L.isImageViewerShown||P.keyCode===a.ESCAPE&&N._onClose()}))},_applyTheme:function(){b.remove(this.domNode,"playerThemeDark playerThemeLight");b.add(this.domNode,this.theme===
E.DARK?"playerThemeDark":"playerThemeLight");this.playerToolbar.setTheme(this.theme)},playReport:function(N,P){return this._showWaiting(this._callAfterRendering("_doPlayReport",[N,P]),"playReport")},_doPlayReport:function(N,P){this.playerToolbar&&this.playerToolbar.closePopup();var S=this;this._showError(!1);this._progressController&&this._progressController.reset();this.showToFullScreenAnimation&&this.resizeMode===z.FIT_WINDOW&&G.animateTo(this);this.dataProvider._onCreateReportStarted=function(){S._viewModel.preInitialize()};
this._viewModel.reset();return f(this.dataProvider.getReportData(N,{progressCallback:function(ca){S._progressController&&S._progressController.setLoadDataProgress(ca)}}),function(ca){if(S.viewMode===I.PANELS_IN_STACK_ALL){var da=S.viewMode;1<ca.analysisAreas.length&&!ca.isMultiFeature?S._originalAreaViewMode||(S._showAllAreasSideBySide=!0,S._originalAreaViewMode=D.getDefaultViewMode(S)):(S._showAllAreasSideBySide=!1,da=S._originalAreaViewMode||D.getDefaultViewMode(S));S._setViewMode(da)}return S.setReportData(ca,
P)},function(ca){S._showError(ca)})},refresh:function(N){return this._reportData&&f(this.setReportData(this._reportData,{waitUntilAllContentIsReady:!(!N||!N.waitUntilAllContentIsReady)}),function(){this.showPageAt(0);return this.resize()}.bind(this))},_isDataBeingSetFlag:!1,_notifyShownPendingFlag:!1,setReportData:function(N,P){return this._showWaiting(this._callAfterRendering("_doSetReportData",[N,P]),"setReportData")},setReportDataAndExport:function(N,P){var S=this;if(N.reportObject.isMultiFeature)return this.setReportData(N,
{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){return S.executeCommand(P.commandId,P.commandParams)});var ca=new k,da=0,oa=[],ta=function(){var Ga=S.dataProvider.reportDataToSingleAreaReportData(N,{currentFeatureIndex:da,reportTitle:N.reportTitle,templateJson:N.templateJson});S.setReportData(Ga,{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){var Ja=p.mixin({},P.commandParams);Ja.pageNumerationInfo={startAreaIndex:da,numAreas:N.analysisAreas.length};return f(S.executeCommand(P.commandId,
Ja)).then(function(Qa){oa.push(Qa);++da===N.analysisAreas.length?ca.resolve(Q.stitchDocuments(oa)):setTimeout(ta)})})};ta();return ca.promise},_doSetReportData:function(N,P){var S=this;P=P||{};this._reportData=N;V.emulateErrors.playerError&&(N=null);if(!N||V.emulateErrors.emptyDataProviderResponse)this._showError(!0);else{this._isDataBeingSetFlag=!0;L.isAnimationSuspended=!0;this.onSetReportDataStart();var ca=new k;this._viewModel.setAnimationAllowed(!P.disableAnimation);this._configureViewModel(N);
(S.isPlayerOnServer?f():T.delay(0)).then(function(){if(1===N.analysisAreas.length||N.isMultiFeature)S._destroyAllContainers(),S._resetMapBuilder(),S._applyReportData({analysisAreaIndex:0,rerenderContent:!0}).then(ca.resolve,ca.reject);else{!1!==P._resetLoadedContents&&(S._destroyAllContainers(),S._resetMapBuilder());var da=N.analysisAreas.length-1,oa=function(){for(;0<=da&&N.analysisAreas[da].hidden;)da--;0>da?ca.resolve():S._applyReportData({analysisAreaIndex:da--,rerenderContent:!1,isFinalArea:0>
da}).then(function(){(S.isPlayerOnServer?f():T.delay(0)).then(oa)},ca.reject)};oa()}});this._progressController&&this._progressController.setNumAreas(N.analysisAreas.length);this._progressController&&this._progressController.setLoadDataProgress(1);return ca.promise.then(function(){return S._progressController&&S._progressController.finalize()}).otherwise(function(da){S._showError(da)}).always(function(){var da=S.getCurrentReportContainer();if(da&&da.domNode)return(S.isPlayerOnServer?f():T.delay(300)).then(function(){S._isDataBeingSetFlag=
!1;S._notifyShownPendingFlag=!U.isNodeInLayout(S.domNode);L.isAnimationSuspended=S.isPlayerOnServer;S.onSetReportDataEnd();S._emitPendingResizedEvent();S._progressController&&S._progressController.reset();if(P.waitUntilAllContentIsReady)return S.getRenderPromise()})})}},showAnalysisAreaAt:function(N){return this._callAfterRendering("_doShowAnalysisAreaAt",[N])},_doShowAnalysisAreaAt:function(N){var P=this;return f(this._setAllAreasVisible(!1),function(){if(P._analysisAreaIndex!==N&&P.getAnalysisAreas()[N]&&
!P.getAnalysisAreas()[N].hidden)return P._applyReportData({analysisAreaIndex:N,rerenderContent:!1})})},showAllAnalysisAreasSideBySide:function(){return this._callAfterRendering("_doShowAllAnalysisAreasSideBySide")},_doShowAllAnalysisAreasSideBySide:function(){return this._setAllAreasVisible(!0)},_setAllAreasVisible:function(N){if(this._showAllAreasSideBySide!==N)return N?(this._showAllAreasSideBySide=!0,this._originalAreaViewMode=this.viewMode===I.PANELS_IN_STACK_ALL?D.getDefaultViewMode(this):this.viewMode,
this._setViewMode(I.PANELS_IN_STACK_ALL)):(this._showAllAreasSideBySide=!1,this._setViewMode(this._originalAreaViewMode),this._originalAreaViewMode=null),this.refresh()},_applyReportData:function(N){var P=this;N=N||{};var S=this._reportData&&this._reportData.isMultiFeature?0:N.analysisAreaIndex||0,ca=!1!==N.rerenderContent;this._analysisAreaIndex=S;this._showError(!this._reportData);if(this._reportData)return f(this._viewModel.initialize(!this._reportData.reportObject.isGraphicReport,this.viewMode),
function(){return P._setReportContainer(ca)?P._doApplyTemplateJson({analysisAreaIndex:S,isFinalArea:N.isFinalArea}):P._updateAreaSelect()})},_doApplyTemplateJson:function(N){var P=this,S=this.getCurrentReportContainer(),ca=p.clone(this._reportData.templateJson);V.emulateErrors.emptyTemplateJson&&(ca.sectionsTables.length=0);var da=S.fromJson(ca,{waitUntilAllContentIsReady:!0,progressCallback:function(oa){P._progressController&&P._progressController.setProgressForAreaAt(oa,N.analysisAreaIndex)},analysisAreaIndex:N.analysisAreaIndex,
isFinalArea:N.isFinalArea,renderSync:this.isPlayerOnServer});ca=S.getPagePromise?S.getPagePromise():da;S=S.getContentPromise?S.getContentPromise():da;this._registerContainerLoadPromise(S||ca);this._updateAreaSelect();return f(ca,function(){P._setCurrentContainerLoaded();P.showPageAt(P._currentPageIndex);return P.resize()})},_updateAreaSelect:function(){this.playerToolbar&&this.playerToolbar.updateAreaSelect({analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,
currentAreaIndex:this._showAllAreasSideBySide?"all":this.getCurrentAnalysisAreaIndex(),isMultiFeature:this._reportData.isMultiFeature})},getReportData:function(){return this._reportData},getReportTitle:function(){return this._reportData&&this._reportData.reportTitle||""},getCurrentAnalysisAreaIndex:function(){return this._analysisAreaIndex},getCurrentAnalysisArea:function(){return this._reportData&&this._reportData.analysisAreas[this._analysisAreaIndex]},getAnalysisAreas:function(){return this._reportData&&
this._reportData.analysisAreas},reportDataToJson:function(N){return this._showWaiting(this.dataProvider.reportDataToJson(this.getReportData(),N),"reportDataToJson")},reportDataFromJson:function(N,P){var S=this;this._showError(!1);return this._showWaiting(f(this.dataProvider.reportDataFromJson(N),function(ca){return S.setReportData(ca,P)}),"reportDataFromJson")},_configureViewModel:function(N){this._viewModel.setTheme(this._reportData.templateJson.theme);this._viewModel.enableDataDrilling=!this.isPlayerOnServer&&
this.enableDataDrilling;this._viewModel.setDynamicReportInfo({fieldData:this._reportData.fieldData,analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,attachmentsStore:this._reportData.attachmentsStore,createMapFunc:p.hitch(this,this._createMap),reportObject:this._reportData.reportObject,isMultiFeature:this._reportData.isMultiFeature,isFixedDataMode:!this._reportData.config.geoenrichmentUrl,geClient:this._reportData.geClient,templateVariableProvider:this._reportData.templateVariableProvider,
countryID:this._reportData.config.countryID,hierarchy:this._reportData.config.hierarchy,templateJson:this._reportData.templateJson});this._viewModel.getDynamicBehaviorImage=p.hitch(this,this._getReportLogo)},notifyShown:function(){!this._isDataBeingSetFlag&&this._notifyShownPendingFlag&&(this.getCurrentReportContainer()&&this.getCurrentReportContainer().notifyShown(),this._notifyShownPendingFlag=!1)},_isErrorShown:!1,_showError:function(N){this.errorViewDiv&&U.destroy(this.errorViewDiv);this.errorViewDiv=
null;U[N?"hide":"show"](this.printableDivContainer);b[N?"add":"remove"](this.domNode,"esriGEReportPlayerError");this._isErrorShown=!!N;this._updateElementsVisibility();N?(this.errorViewDiv=U.create("div",{"class":"esriGEReportPlayerErrorMessage",innerHTML:K.cantPlayReportError},this.domNode),this.playerToolbar&&this.playerToolbar.setErrorShown(!0),this._progressController&&this._progressController.reset(),console.log(N),this.onError(N)):this.playerToolbar&&this.playerToolbar.setErrorShown(!1)},isErrorShown:function(){return this._isErrorShown},
_updateElementsVisibility:function(){var N=0<this._waitingCount?!1:this._reportData||this._isErrorShown,P=0<this._waitingCount||this._isErrorShown?!1:!0,S=0<this._waitingCount||this._isErrorShown?!1:!0;this.playerToolbarDiv&&(this.playerToolbarDiv.style.opacity=N?"":"0.001");this.sidePageNavigator&&(this.sidePageNavigator.style.opacity=P?"":"0.001");this.reportContainerDiv.style.opacity=S?"":"0.001"},setPrintMode:function(N){b[N?"add":"remove"](this.domNode,"esriGEReportPlayerInPrinting")},resize:function(N,
P){this._resize({width:N,height:P});this._updatePageNavigator();this._updateZoomControls();this.playerToolbar&&this.playerToolbar.update()},_pendingResizeEvent:null,_emitResizedEvent:function(N){this._pendingResizeEvent={isPaginating:!!N};this._isDataBeingSetFlag||this._emitPendingResizedEvent()},_emitPendingResizedEvent:function(){this._pendingResizeEvent&&(this.onResized(this._pendingResizeEvent.isPaginating),this._pendingResizeEvent=null)},_onClose:function(){var N;this.showToFullScreenAnimation&&
this.resizeMode===z.FIT_WINDOW&&(N=G.animateFrom(this));f(N,function(){this.onClose()}.bind(this))},getVisualState:function(){return{type:"reportPlayer",viewMode:this.viewMode,reportContainers:this.getAllReportContainers().map(function(N){return N.getVisualState&&N.getVisualState()})}},setVisualState:function(N){return this._callAfterRendering("_doSetVisualState",[N])},_doSetVisualState:function(N){var P=N&&this.getAllReportContainers().map(function(S,ca){return S.setVisualState&&S.setVisualState(N.reportContainers[ca])});
return l(P)},_renderQueue:null,getRenderPromise:function(){return this._renderQueue&&this._renderQueue.getPromise()},_registerContainerLoadPromise:function(N){this._renderQueue=this._renderQueue||new Y;this._renderQueue.add(N);this.playerToolbar&&this.playerToolbar.setContentLoadPromise(this.getRenderPromise())},_safeFuncCaller:null,_callAfterRendering:function(N,P){if(this.isPlayerOnServer)return this[N].apply(this,P);var S=this;this._safeFuncCaller=this._safeFuncCaller||{};this._safeFuncCaller[N]=
function(){return S[N].apply(S,P)};return f(this.getRenderPromise(),function(){return aa.invoke(S._safeFuncCaller,N)})},onSetReportDataStart:function(){},onSetReportDataEnd:function(){},onResized:function(N){},onClose:function(){},onError:function(N){},onAddMoreAreas:function(){},onAreasPreRemoved:function(N){},onAreasRemoved:function(N){},destroy:function(){this._destroyAllContainers();this.inherited(arguments)}})});