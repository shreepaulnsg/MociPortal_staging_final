// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/geoenrichment/ReportPlayer/templates/PlayerToolbarHolder.html":'\x3cdiv class\x3d"esriGEPlayerToolbar"\x3e\r\n\r\n    \x3c!--left--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"infographicsSelectDiv" class\x3d"dijitInline playerToolbar_infographicsSelectDiv"\x3e\x3c/div\x3e\r\n    \r\n    \x3c!--center--\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"areaTitleDiv" class\x3d"dijitInline playerToolbar_areaTitleDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"areaTitleInnerDiv" class\x3d"dijitInline playerToolbar_areaTitleInnerDiv TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"areasSelectDiv" class\x3d"dijitInline playerToolbar_areasSelectDiv"\x3e\x3c/div\x3e\r\n\r\n    \x3c!--right--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rightSideControlsBlock" class\x3d"dijitInline playerToolbar_rightSideControlsBlock"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"zoomSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_zoomSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"pageSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_pageSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"commandButtonsContainer" class\x3d"dijitInline playerToolbar_commandButtonsContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("esri/dijit/geoenrichment/ReportPlayer/toolbar/PlayerToolbar","dojo/_base/declare dojo/on dojo/string esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ../PlayerCommands ../PlayerThemes ./Select ./AreasSelect ./ZoomSelect ./ToolbarArranger ./ZoomUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/PlayerToolbarHolder.html dojo/i18n!esri/nls/jsapi".split(" "),
function(n,p,x,y,h,k,q,r,t,z,A,B,C,D,d,u,c,E,v,l,m,F,e){e=e.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var G=n([q,r],{templateString:F,nls:e,player:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showAreaTitle:!1,stretchToolbarNode:null,canAddMoreAreas:!1,areasSelectButtons:null,areasSelect:null,pageSelect:null,zoomSelect:null,_toolbarArranger:null,_infographicSelect:null,postCreate:function(){c.hide(this.commandButtonsContainer);this._toolbarArranger=new D({showAreaTitle:this.showAreaTitle,
stretchToolbarNode:this.stretchToolbarNode,domNode:this.domNode,infographicsSelectDiv:this.infographicsSelectDiv,areaTitleDiv:this.areaTitleDiv,areaTitleInnerDiv:this.areaTitleInnerDiv,rightSideControlsBlock:this.rightSideControlsBlock,areasSelectDiv:this.areasSelectDiv,zoomSelectDiv:this.zoomSelectDiv,pageSelectDiv:this.pageSelectDiv,commandButtonsContainer:this.commandButtonsContainer});this._initAreaSelect();this._initPageSelect();this._initZoomSelect();m.autoTooltip(this.domNode)},_initAreaSelect:function(){var a=
this;this.areasSelect=(new B({player:this.player,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onChange:function(b){a.onShowAnalysisAreaAt(b.value);a.onClosePopup()},onAddMoreAreas:function(){a.onAddMoreAreas();a.onClosePopup()},onRemoveAreas:function(b,g){a.onRemoveAreas(b);g&&a.onClosePopup()},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide();a.onClosePopup()},onStopComparison:function(b){a.onShowAnalysisAreaAt(b);a.onClosePopup()}})).placeAt(this.areasSelectDiv);
this.own(this.areasSelect)},updateAreaSelect:function(a){var b=a.analysisAreas,g=a.combinedAreasInfo,f=a.currentAreaIndex,w=a.isMultiFeature;this.areasSelect.buildAreaOptions(a);this.areasSelect.set("value",f);a=1<this.areasSelect.get("options").length&&!w;c[a?"show":"hide"](this.areasSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.player.showReportTitle?500<document.body.clientWidth||!a?(this.infographicsSelectDiv.innerHTML="\x3cdiv class\x3d'TrimWithEllipses' style\x3d'max-width:"+
.4*document.body.clientWidth+"px;'\x3e"+this.player.getReportTitle()+"\x3c/div\x3e",this._toolbarArranger.showAreaTitle=!0):(this.infographicsSelectDiv.innerHTML="",this._toolbarArranger.showAreaTitle=!1):w?this.areaTitleMultiFormatter?this.areaTitleMultiFormatter(this.areaTitleInnerDiv,g):this._formatAreaTitleMulti(g):(b=b["all"===f?0:f],this.areaTitleFormatter?this.areaTitleFormatter(this.areaTitleInnerDiv,b):this._formatAreaTitle(b,f))},_formatAreaTitle:function(a,b){this.areaTitleInnerDiv.innerHTML=
"all"===b?e.allAreas:a.locationName||a.name},_formatAreaTitleMulti:function(a){this.areaTitleInnerDiv.innerHTML=a.locationName||a.name||a.shortName||""},_pageControlsVisible:!0,_initPageSelect:function(){var a=this;this.pageSelect=(new A({onChange:function(b){a.onShowPageAt(b.value);a.onClosePopup()}})).placeAt(this.pageSelectDiv);this.own(this.pageSelect)},setPageControlsVisible:function(a){this._pageControlsVisible=a;c[a?"show":"hide"](this.pageSelectDiv)},updatePageSelect:function(a,b){for(var g=
[],f=0;f<a;f++)g.push({label:x.substitute(e.pageIndex,{index:f+1}),value:f});this.pageSelect.set("options",g);this.pageSelect.set("value",b);c[this._pageControlsVisible&&1<a&&500<document.body.clientWidth?"show":"hide"](this.pageSelectDiv)},_initZoomSelect:function(){var a=this;this.zoomSelect=(new C({onChange:function(b){if(b.value===d.FIT_PAGE)a.onZoomToFitPage();else if(b.value===d.FIT_PAGE_WIDTH)a.onZoomToFitPageWidth();else if(b.value===d.FIT_PAGE_HEIGHT)a.onZoomToFitPageHeight();else a.onSetZoomPercent(b.value);
a.onClosePopup()}})).placeAt(this.zoomSelectDiv);this.own(this.zoomSelect)},setZoomSupportsInfo:function(a){c[a.supported?"show":"hide"](this.zoomSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.zoomSelect.options.forEach(function(b){b.hidden=!1;b.value!==d.FIT_PAGE||a.canFitPage?b.value!==d.FIT_PAGE_WIDTH||a.canFitPageWidth?b.value!==d.FIT_PAGE_HEIGHT||a.canFitPageHeight||(b.hidden=!0):b.hidden=!0:b.hidden=!0})},setZoomInfo:function(a){a=a.isFitPageScale?d.FIT_PAGE:a.isFitPageWidthScale?
d.FIT_PAGE_WIDTH:a.isFitPageHeightScale?d.FIT_PAGE_HEIGHT:d.getClosestZoomAndUpdateOptions(100*a.scale,this.zoomSelect.get("options"));a!==this.zoomSelect.get("value")&&this.zoomSelect.set("value",a)},createCommandButton:function(a,b){return this.createCustomCommandButton({callback:b,buttonClass:a.id===t.PRINT?"playerPrintButton":"playerExportButton",tooltip:a.id===t.PRINT?e.printInfographic:e.exportInfographic,visibleOnError:!1})},createCustomCommandButton:function(a){c.show(this.commandButtonsContainer);
var b=k.create("div",{"class":"playerToolbar_commandButtonContainer dijitInline"},this.commandButtonsContainer,a.addFirst?"first":"last");b.__visibleOnError=a.visibleOnError;b=k.create("div",{"class":"playerToolbar_commandButton"},b);a.buttonClass&&h.add(b,a.buttonClass);a.tooltip&&m.setTooltipToNode(b,a.tooltip);p(b,"click",a.callback);return b},setTheme:function(a){h.remove(this.domNode,"playerThemeDark playerThemeLight");h.add(this.domNode,a===z.DARK?"playerThemeDark":"playerThemeLight");this.areasSelect.setTheme(a);
this.pageSelect.setTheme(a);this.zoomSelect.setTheme(a)},setErrorShown:function(a){if(a)for(c.hide([this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv]),a=0;a<this.commandButtonsContainer.children.length;a++){var b=this.commandButtonsContainer.children[a];c[b.__visibleOnError?"show":"hide"](b)}},arrangeControls:function(){this._toolbarArranger.arrangeControls()},hasVisibleControls:function(){return this._toolbarArranger.hasVisibleControls()},addInfographicsSelect:function(a){this._infographicSelect=
a;a.placeAt(this.infographicsSelectDiv)},isMouseOver:function(){return v.isMouseOver(this.domNode)||this.areasSelect&&this.areasSelect.isMouseOver()||this.pageSelect&&this.pageSelect.isMouseOver()||this.zoomSelect&&this.zoomSelect.isMouseOver()||this._infographicSelect&&this._infographicSelect.isMouseOver&&this._infographicSelect.isMouseOver()},setContentLoadPromise:function(a){c.enableContentAbsolute(this.commandButtonsContainer,!1);c.enableContentAbsolute(this.infographicsSelectDiv,!1);y(a,function(){c.enableContentAbsolute(this.commandButtonsContainer,
!0);c.enableContentAbsolute(this.infographicsSelectDiv,!0)}.bind(this))},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(a){},onClosePopup:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}});return n([q,r],{templateString:"\x3cdiv class\x3d'esriGEPlayerToolbarOuter'\x3e\x3c/div\x3e",player:null,popupButtonDiv:null,
areaTitleFormatter:null,areaTitleMultiFormatter:null,showToolbarInPopup:!1,showAreaTitle:!1,stretchToolbarNode:null,showCloseButton:!1,canAddMoreAreas:!1,areasSelectButtons:null,toolbarHolder:null,postCreate:function(){var a=this;this.inherited(arguments);this.toolbarHolder=(new G({player:this.player,showAreaTitle:this.showAreaTitle,stretchToolbarNode:this.stretchToolbarNode,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowPageAt:function(b){a.onShowPageAt(b)},
onShowAnalysisAreaAt:function(b){a.onShowAnalysisAreaAt(b)},onCompareAreasSideBySide:function(){a.onCompareAreasSideBySide()},onZoomToFitPage:function(){a.onZoomToFitPage()},onZoomToFitPageWidth:function(){a.onZoomToFitPageWidth()},onZoomToFitPageHeight:function(){a.onZoomToFitPageHeight()},onSetZoomPercent:function(b){a.onSetZoomPercent(b)},onClosePopup:function(){a.closePopup()},onAddMoreAreas:function(){a.onAddMoreAreas()},onRemoveAreas:function(b){a.onRemoveAreas(b)}})).placeAt(this.domNode);
this.own(this.toolbarHolder)},updateAreaSelect:function(a){this.toolbarHolder.areaTitleFormatter=this.areaTitleFormatter;this.toolbarHolder.areaTitleMultiFormatter=this.areaTitleMultiFormatter;this.toolbarHolder.updateAreaSelect(a)},setPageControlsVisible:function(a){this.toolbarHolder.setPageControlsVisible(a)},updatePageSelect:function(a,b){this.toolbarHolder.updatePageSelect(a,b)},setZoomSupportsInfo:function(a){this.toolbarHolder.setZoomSupportsInfo(a)},setZoomInfo:function(a){this.toolbarHolder.setZoomInfo(a)},
createCommandButton:function(a,b){return this.toolbarHolder.createCommandButton(a,b)},setTheme:function(a){this.toolbarHolder.setTheme(a)},setErrorShown:function(a){this.toolbarHolder.setErrorShown(a);this._arrangeControls()},_arrangeControls:function(){c.show(this.domNode);this.toolbarHolder.arrangeControls();c[this.toolbarHolder.hasVisibleControls()?"show":"hide"]([this._popupButton,this.domNode])},_popupHandle:null,_popupButton:null,update:function(){E.invoke(this,"_doUpdateToolbar")},_doUpdateToolbar:function(){h[this.isScrollShown()?
"add":"remove"](this.popupButtonDiv,"playerToolbar_parentHasScroll");h[u.isMobileDevice()?"add":"remove"](this.popupButtonDiv,"isMobileDevice");h[u.isMobileDevice()?"add":"remove"](this.toolbarHolder.domNode,"isMobileDevice");this._resetToolbarNode();var a=l.isOpen(this.toolbarHolder);this._popupHandle&&this._popupHandle.remove();this._popupHandle=null;this.showToolbarInPopup?(this._popupButton=k.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_settingsButton"},this.popupButtonDiv,
"first"),this._popupHandle=l.makePopup(this.toolbarHolder,this,this._popupButton,{orient:["before","below"],openPopup:a})):k.place(this.toolbarHolder.domNode,this.domNode);this._arrangeControls()},_resetToolbarNode:function(){this.toolbarHolder.domNode.parentNode&&this.toolbarHolder.domNode.parentNode.removeChild(this.toolbarHolder.domNode);this.domNode.innerHTML="";this._popupButton&&k.destroy(this._popupButton);this._popupButton=null},closePopup:function(){this.showToolbarInPopup&&l.close(this.toolbarHolder)},
isScrollShown:function(){return!1},createCustomCommandButton:function(a){return this.toolbarHolder.createCustomCommandButton(a)},notifyCommandButtonsAdded:function(){if(this.showCloseButton)if(this.showToolbarInPopup){var a=k.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_closeButtonOuter"},this.popupButtonDiv);m.setTooltipToNode(a,e.close);p(a,"click",function(){this.onClose()}.bind(this))}else this.createCustomCommandButton({buttonClass:"playerToolbar_closeButton",tooltip:e.close,
callback:function(){this.closePopup();this.onClose()}.bind(this),visibleOnError:!0})},addInfographicsSelect:function(a){this.toolbarHolder.addInfographicsSelect(a)},isMouseOver:function(){return v.isMouseOver(this.domNode)||this.toolbarHolder.isMouseOver()},setContentLoadPromise:function(a){this.toolbarHolder.setContentLoadPromise(a)},onShowPageAt:function(a){},onShowAnalysisAreaAt:function(a){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},
onSetZoomPercent:function(a){},onClose:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(a){}})});