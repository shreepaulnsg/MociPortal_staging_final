// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/createHTML/HTMLToSVGBuilder","dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/when dojo/query esri/dijit/geoenrichment/ReportPlayer/config ./CSSFilesLoader ./HTMLPageBuilder esri/dijit/geoenrichment/utils/htmlToSvg/HTMLtoSVGConverter esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/imageUtils/ImageOptimizer esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(w,x,l,m,y,n,z,A,B,C,D,E){var v={htmlToSvg:function(a,d,b,e,g,h,k){return this._htmlToSvg(a,d,b,e,g,h,k)},htmlToSvgInHtml:function(a,d,b,e,g,h,k,p){return m(this._htmlToSvg(a,b,e,g,h,k,p),function(f){return m(z.loadCssFontFiles(),function(c){return A.composeHtmlStringFromParts({reportTitle:d,contentString:f.join(""),cssFiles:c})})})},_htmlToSvg:function(a,d,b,e,g,h,k){var p=this,f=[];if("string"===typeof a){var c=l.create("div",{"class":"esriGEBehindScreen"},document.body);for(c.innerHTML=
a;c.children.length;)a=l.create("div",{"class":"esriGEBehindScreen"},document.body),l.place(c.children[0],a),f.push(a)}else{c=a;a=y(".reportContainerGrid_gridContainerWrapper",c);for(var q=0,F=a.length;q<F;q++)f.push(a[q])}var t=new D,r=[];f.map(function(u,G){t.add(function(){return p._nodeToSvg(u,{fitParams:d,convertUrlImages:g,hideUrlImages:h,getItemResourceUrl:k}).then(function(H){r.push(H);u.innerHTML="";e(G,f.length);return n.isPlayerOnServer?null:E.delay(50)})})});return m(t.getPromise()).then(function(){if(n.isPlayerOnServer)return r;
c.innerHTML="";return C.optimizeSize(r,b)})},_NODES_TO_CLIP:["shapeContainer_svgContainerShowAsBar","imageNavigator_imagePaginationRoot","infographicPageStack_infographicSectionNode_stackNode","infographicPageStack_infographicSectionNode_background"],_nodeToSvg:function(a,d){return B.htmlToSvg(a,w.mixin({iterationsPerScript:n.isPlayerOnServer?1E5:100,clipFunc:function(b){return b&&v._NODES_TO_CLIP.some(function(e){return x.contains(b,e)})}},d))}};return v});