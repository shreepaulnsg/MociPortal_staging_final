// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil",["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(f,g,h,k){var e={composeAttributesFromFieldInfos:function(a,b){return a&&a.filter(function(c){return c.visible}).map(function(c){var d=c.fieldName,l=c.label,m=c.format&&c.format.places,n=c.format&&c.format.digitSeparator,p=c.format&&c.format.dateFormat,q=
b[c.fieldName];c=(c=c.format)&&c.dateFormat?"esriFieldTypeDate":c&&void 0!==c.places?0<c.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:d,alias:l,places:m,digitSeparator:n,dateFormat:p,value:q,type:c,domain:null,length:void 0}})},formatAttributeValue:function(a,b){b=b||{};var c=b.hasOwnProperty("unavailableDataValue")?b.unavailableDataValue:"";if(!a||null===a.value||void 0===a.value)return c;if(!b.skipFormattedValue&&a.formattedValue&&a.formattedValue!==c)return a.formattedValue;
var d=a.domain&&"codedValue"===a.domain.type?new g(a.domain):null;d?(b=d.getName(a.value))||(b=a.value+""):"esriFieldTypeString"===a.type?b=a.value:"esriFieldTypeDate"===a.type?b=h.formatDateShort(a.value):(b=b.format,b=k.formatNumber(a.value,{places:b&&void 0!==b.decimals?b.decimals:a.places,noSeparator:b&&void 0!==b.useThousandsSeparator?!b.useThousandsSeparator:!1===a.digitSeparator,preserveTrailingZeroes:!0}));return null===b||void 0===b?c:b},formatAttributeValueForStudyArea:function(a){var b;
a&&null!==a.value&&void 0!==a.value||(b=!0);b||(b=a.domain&&"codedValue"===a.domain.type||"esriFieldTypeDate"===a.type);return b?e.formatAttributeValue(a):a.value},getAttributeTypeForStudyArea:function(a){return"esriFieldTypeDate"===a.type?"esriFieldTypeString":a.type},attributeToJson:function(a){return{name:a.name,alias:a.alias,type:a.type,value:a.value,domain:a.domain&&(a.domain.toJson?a.domain.toJson():f.clone(a.domain)),places:a.places,digitSeparator:a.digitSeparator,dateFormat:a.dateFormat,length:a.length}},
attributeFromJson:function(a){return{name:a.name,alias:a.alias,type:a.type,value:a.value,domain:a.domain,places:a.places,digitSeparator:a.digitSeparator,dateFormat:a.dateFormat,length:a.length}}};return e});