// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore",["dojo/_base/declare","esri/dijit/geoenrichment/when"],function(e,f){var g={fromJson:function(a){function c(b){return a.imageDataCache&&a.imageDataCache[b]||b}a.areaAttachments=a.areaAttachments||a.areaAttachements;delete a.areaAttachements;return{getImagesForAreaAt:function(b){b=a.supportsMultipleAreas?b:0;return(a.areaAttachments[b]&&(a.areaAttachments[b].images||a.areaAttachments[b].attachments)||
[]).map(function(d){return{description:d.description,filename:d.filename,imageViewType:d.imageViewType,getThumbnail:function(){return c(d.thumbnail)},getUrl:function(){return c(d.url)}}})},getAttributesForAreaAt:function(b){b=a.supportsMultipleAreas?b:0;return a.areaAttachments[b]&&a.areaAttachments[b].attributes||[]},getNotesForAreaAt:function(b){b=a.supportsMultipleAreas?b:0;return a.areaAttachments[b]&&a.areaAttachments[b].notes||[]}}}};return e(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,
_provider:null,constructor:function(a){(this._provider=a.getAttachmentsForAreaAt||a.getImagesForAreaAt||a.getAttributesForAreaAt||a.getNotesForAreaAt?a:g.fromJson(a))&&this._provider.getAttachmentsForAreaAt&&(a.getImagesForAreaAt=function(c){return a.getAttachmentsForAreaAt(c)});this.supportsMultipleAreas=a.supportsMultipleAreas},initialize:function(){},getImages:function(){function a(b){b.forEach(function(d){!d.getUrl&&d.getAttachmentUrl&&(d.getUrl=function(){return d.getAttachmentUrl()})})}var c=
this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return c?Array.isArray(c)?(a(c),c):f(c,function(b){a(b);return b}):c},getAttributes:function(){return this._provider.getAttributesForAreaAt?this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(a){this._currentAreaIndex=a}})});