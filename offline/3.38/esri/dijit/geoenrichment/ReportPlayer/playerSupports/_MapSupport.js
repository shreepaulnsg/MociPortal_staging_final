// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/playerSupports/_MapSupport",["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(f,g,h,k){return g(null,{_initBuilderPromise:null,_mapBuilder:null,_initMapBuilder:function(){var b=this;if(this._initBuilderPromise)return this._initBuilderPromise;var a=new h;f([b.isPlayerOnServer?"../core/supportClasses/map/ServerMapBuilder":"../core/supportClasses/map/MapBuilder"],function(d){b._mapBuilder=new d({getPlayerZoomScale:function(e){var c=
b.getCurrentReportContainer();return c&&c.getPanelZoomScale?c.getPanelZoomScale(e):c&&c.getZoomInfo&&c.getZoomInfo().scale}});a.resolve()});return this._initBuilderPromise=a.promise},collectMaps:function(b){return this._mapBuilder?b&&b.allAreas?this._mapBuilder.collectAllAreasMaps():this._mapBuilder.collectAreaMaps(this.getCurrentAnalysisAreaIndex()):[]},_resetMapBuilder:function(){this._mapBuilder&&this._mapBuilder.reset()},_createMap:function(b,a){a=a||{};return k(this._initMapBuilder(),function(){this._mapBuilder.setFallbackMapImageInfos(this._reportData.mapImageInfos);
return this._mapBuilder.createMap(b,{reportData:this._reportData,areaIndex:a.areaIndex,defaultBasemapId:this._getDefaultBasemapId()||a.defaultBasemapId,defaultBasemapName:a.defaultBasemapName,webMapId:a.webMapId,webMapName:a.webMapName,additionalLayerInfos:a.additionalLayerInfos,calculatorFieldName:a.calculatorFieldName,pinSymbolJson:a.pinSymbolJson,areaSymbolJsons:a.areaSymbolJsons,areaSymbolRamp:a.areaSymbolRamp,locatorPointsControllers:a.locatorPointsControllers,stdPolygonsControllers:a.stdPolygonsControllers,
thisAreasHighlightController:a.thisAreasHighlightController,legendController:a.legendController,fieldData:this._viewModel.dynamicReportInfo.fieldData,geClient:this._viewModel.dynamicReportInfo.geClient,countryID:this._viewModel.dynamicReportInfo.countryID,hierarchy:this._viewModel.dynamicReportInfo.hierarchy,waitForLoad:a.waitForLoad,extent:a.extent,attachmentsStore:this._viewModel.dynamicReportInfo.attachmentsStore,onPanContainer:function(d,e){}})}.bind(this))},_getDefaultBasemapId:function(){return null}})});