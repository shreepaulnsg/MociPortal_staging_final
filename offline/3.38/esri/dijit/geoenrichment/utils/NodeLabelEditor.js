// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/NodeLabelEditor","dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/ObjectUtil".split(" "),function(k,l,g,h,e,m,n,p,q,r){return k(null,{_textMemo:null,_handlers:null,_textBox:null,_node:null,numericOnly:!1,range:null,keepLabelDimensions:!0,constructor:function(a){l.mixin(this,a)},editNodeLabel:function(a){var b=
a.node,t=a.overNode||b,c=a.initialText,d=this;this._stopEdit();this._node=b;this._textMemo="string"===typeof c||"number"===typeof c?c:b.innerHTML;c=m.position(b).w;b.innerHTML="";this._textBox=a.multiline?e.create("textarea",{"class":"esriGETextBoxArea"},b):e.create("input",{type:"text"},b);this._textBox.name="node-label";this._textBox.value=this._textMemo;this._textBox.focus();this._textBox.select();a.box?(b=a.box,this._textBox.style.position="absolute",this._textBox.style.left=b.x+"px",this._textBox.style.top=
b.y+"px",this._textBox.style.width=b.w+"px",this._textBox.style.height=b.h+"px",this._textBox.style.width=b.w+"px",this._textBox.style.height=b.h-2+"px"):this.keepLabelDimensions&&n.set(this._textBox,"width",c+"px");a.textStyle&&p.setFullTextStyle(this._textBox,a.textStyle);this._handlers=[g(document.body,"keyup",function(f){f.keyCode===h.ESCAPE?d._cancelEdit():f.keyCode!==h.ENTER||f.shiftKey||d._applyEdit()}),g(document.body,"click",function(){q.isMouseOver(t)||(a.applyWhenClickedOutside?d._applyEdit():
d._cancelEdit())})]},_checkCanApply:function(a){if(!this.numericOnly)return!0;a=r.parseNumber(a);return isNaN(a)||this.range&&void 0!==this.range.min&&this.range.min>a||this.range&&void 0!==this.range.max&&this.range.max<a?!1:!0},_applyEdit:function(){var a=this._textBox.value;this._checkCanApply(a)?(this._node.innerHTML=a,this._stopEdit(),this.onApply(a)):this._cancelEdit()},_cancelEdit:function(){this._node.innerHTML=this._textMemo;this._stopEdit();this.onCancel()},_stopEdit:function(){this._handlers&&
this._handlers.forEach(function(a){a.remove()});this._textMemo=this._handlers=null;e.destroy(this._textBox);this._node=this._textBox=null},onApply:function(a){},onCancel:function(){}})});