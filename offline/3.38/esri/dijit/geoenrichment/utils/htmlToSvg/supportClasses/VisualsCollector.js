// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/VisualsCollector",["dojo/_base/Color","./dom-style","./TransformUtil","./VisibilityChecker"],function(m,b,t,u){var v=/.+(px|pt)$/;return{getNodeVisuals:function(a,e){if(!u.checkNode(a))return null;var l=b.cacheComputedStyle(a),n=e?e.style.opacity:1,f=e&&e.isLink,w=e&&e.isB,x=e&&e.isI,y=e&&e.isU,z=b.get(a,"width"),A=b.get(a,"height"),B=b.toPixelValue(a,b.get(a,"fontSize")),C=b.get(a,"textAlign"),D=b.get(a,"whiteSpace"),E=b.get(a,"letterSpacing"),
F=b.get(a,"wordSpacing"),p=t.measureNode(a,e),q=b.get(a,"position"),r=new m(b.get(a,"color"));f={node:a,parentVs:e,box:p.box,style:{styleCache:l,cw:z,ch:A,boxSizing:b.get(a,"boxSizing"),_paddings:null,getPaddings:function(){if(this._paddings)return this._paddings;b.setComputedStyleCache(a,l);var c={l:b.get(a,"paddingLeft"),r:b.get(a,"paddingRight"),t:b.get(a,"paddingTop"),b:b.get(a,"paddingBottom")};c.ew=c.l+c.r;c.eh=c.t+c.b;c.bw=this.cw+c.l+c.r;c.bh=this.ch+c.t+c.b;b.clearCache(a);return this._paddings=
c},_border:null,getBorder:function(){function c(h,g){var k=new m(b.get(a,"border"+g+"Color"));d[h]={color:k.toHex(),opacity:k.a*n,width:b.get(a,"border"+g+"Width"),style:b.get(a,"border"+g+"Style")}}if(this._border)return this._border;b.setComputedStyleCache(a,l);var d={radius:b.toPixelValue(a,b.get(a,"borderBottomLeftRadius"))};c("l","Left");c("r","Right");c("t","Top");c("b","Bottom");d.ew=d.l.width+d.r.width;d.eh=d.t.width+d.b.width;b.clearCache(a);return this._border=d},_background:null,getBackground:function(){function c(k){return"string"===
typeof k&&v.test(k)?b.toPixelValue(document.body,k):0}if(this._background)return this._background;b.setComputedStyleCache(a,l);var d=new m(b.get(a,"backgroundColor")),h=b.get(a,"backgroundRepeat"),g=b.get(a,"backgroundSize");d={color:d.toHex(),opacity:d.a*n,image:b.get(a,"backgroundImage"),size:g,positionX:b.get(a,"backgroundPositionX"),positionY:b.get(a,"backgroundPositionY"),repeatX:"cover"!==g&&("repeat"===h||"repeat-x"===h),repeatY:"cover"!==g&&("repeat"===h||"repeat-y"===h)};d.sizePx=c(d.size);
d.positionXPx=c(d.positionX);d.positionYPx=c(d.positionY);b.clearCache(a);return this._background=d},color:r.toHex(),colorOpacity:r.a,fontSize:B,textAlign:C,whiteSpace:D,letterSpacing:E,wordSpacing:F,transform:p.transform,parentHasTransform:!(!e||!e.style.transform),opacity:b.get(a,"opacity")*n,overflow:b.get(a,"overflow"),spanFlowStartOffset:0,spanFlowEndOffset:0,display:b.get(a,"display"),isRelAbs:"relative"===q||"absolute"===q},isLink:"A"===a.nodeName||f,isB:"B"===a.nodeName||"H"===a.nodeName.charAt(0)||
w,isI:"I"===a.nodeName||x,isU:"U"===a.nodeName||y};"border-box"===f.style.boxSizing&&(f.style.cw-=f.style.getBorder().ew+f.style.getPaddings().ew,f.style.ch-=f.style.getBorder().eh+f.style.getPaddings().eh,f.style._paddings=null);f.isLink&&(f.href=a.href||e.href,f.target=a.target||e.target);b.clearCache(a);return f}}});