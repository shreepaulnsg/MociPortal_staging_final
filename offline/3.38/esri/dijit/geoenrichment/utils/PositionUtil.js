// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/PositionUtil",["dojo/_base/lang","./FitUtil"],function(z,v){var n={},y="before-centered before after-centered after above above-centered above-alt below below-centered below-alt".split(" ");n.POSITIONS=y;n.getBestPositionBigAroundSmall=function(a,b,c){function f(k){function t(p,q){return n.checkFitsInView({x:p,y:q,w:b.w,h:b.h},{viewPortOffset:l,useBodyScroll:c.useBodyScroll})}function r(p,q){var u=t(p[0],q[0]);if(u.totalAdjust){var w=t(p[1],q[1]);m=w.totalAdjust?
u.totalAdjust<w.totalAdjust?u:w:w}else m=u;m===u?(g=p[0],e=q[0]):(g=p[1],e=q[1])}switch(k){case "before-centered":var g=a.x-b.w-d;var e=a.y-(b.h-a.h)/2;break;case "before":g=a.x-b.w-d;r([g,g],[a.y,a.y+a.h-b.h]);break;case "after-centered":g=a.x+a.w+d;e=a.y-(b.h-a.h)/2;break;case "after":g=a.x+a.w+d;r([g,g],[a.y,a.y+a.h-b.h]);break;case "above":e=a.y-b.h-d;r([a.x,a.x+a.w-b.w],[e,e]);break;case "above-centered":g=a.x-(b.w-a.w)/2;e=a.y-b.h-d;break;case "above-alt":e=a.y-b.h-d;r([a.x+a.w-b.w,a.x],[e,
e]);break;case "below":e=a.y+a.h+d;r([a.x,a.x+a.w-b.w],[e,e]);break;case "below-centered":g=a.x-(b.w-a.w)/2;e=a.y+a.h+d;break;case "below-alt":e=a.y+a.h+d,r([a.x+a.w-b.w,a.x],[e,e])}var m=m||t(g,e);return!m.fits&&c.useStrictFit?null:{x:g+m.adjustX,y:e+m.adjustY,totalAdjust:m.totalAdjust,position:k}}c=c||{};var d=c.offset||0,l=c.viewPortOffset||0,h;c.orient&&c.orient.some(function(k){if((k=f(k))&&!k.totalAdjust)return h=k,!0});if(h)return h;var x=[];y.some(function(k){if((h=f(k))&&!h.totalAdjust)return!0;
h&&(x.push(h),h=null)});if(h)return h;x.sort(function(k,t){return k.totalAdjust-t.totalAdjust});return x[0]};n.checkFitsInView=function(a,b){var c=(b=b||{},b.viewPortOffset)||0,f=b.useBodyScroll?document.body.scrollWidth:document.body.clientWidth;b=b.useBodyScroll?document.body.scrollHeight:document.body.clientHeight;var d=0,l=0;a.x<c?d=-a.x+c:a.x+a.w>f-c&&(d=f-c-(a.x+a.w));a.y<c?l=-a.y+c:a.y+a.h>b-c&&(l=b-c-(a.y+a.h));return{fits:0===d&&0===l,adjustX:d,adjustY:l,totalAdjust:Math.abs(d)+Math.abs(l)}};
n.findBestAllowedSizeBigAroundBox=function(a,b,c){a=z.mixin({},a);c=c||{};var f=c.offset||0,d=c.viewPortOffset||0;a.x-=d+f;a.y-=d+f;a.w+=2*f;a.h+=2*f;f=(c.useBodyScroll?document.body.scrollWidth:document.body.clientWidth)-2*d;c=(c.useBodyScroll?document.body.scrollHeight:document.body.clientHeight)-2*d;a=[v.fitBox(b,{w:a.x,h:c}),v.fitBox(b,{w:f-a.x-a.w,h:c}),v.fitBox(b,{w:f,h:a.y}),v.fitBox(b,{w:f,h:c-a.y-a.h})];a.sort(function(l,h){return l.ratio<h.ratio?1:-1});return a[0]};return n});