// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/animation/AnimationHelper","esri/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/sniff dojo/on esri/dijit/geoenrichment/Deferred".split(" "),function(p,w,q,l,x,y,m,r,t){var u=!(29>m("chrome")||23>m("ff")||6>m("safari")||10>m("ie"));var v=function(a,c){for(var e=function(f){var k=f.type;v=k;for(var d in b)d!==k&&(b[d].remove(),delete b[d]);c.apply(this,arguments)},b={},h=["animationend","webkitAnimationEnd"],g=
0;g<h.length;g++)b[h[g]]=r(a,h[g],e);return{remove:function(){for(var f in b)b.hasOwnProperty(f)&&b[f].remove()}}};var z=p(null,{_oldNode:null,_targets:null,_deferred:null,start:function(a,c){this._oldNode=c;this._deferred=new t;if(!u||!a.length||!a[0].node)return this.finish(),this._deferred.promise;this._targets=a;r.once(a[0].node,v,q.hitch(this,this.finish));for(c=0;c<a.length;c++){var e=a[c];l.add(e.node,e.classes);l.add(e.node,"Anim_Common")}return this._deferred.promise},finish:function(){if(this._targets){for(var a=
0;a<this._targets.length;a++){var c=this._targets[a];c.node&&(l.remove(c.node,c.classes),l.remove(c.node,"Anim_Common"))}this._targets=null}this._oldNode&&(this.onNodePreDestroy(this._oldNode),x.destroy(this._oldNode),this._oldNode=null);this._deferred.resolve()},onNodePreDestroy:function(a){}});return p(null,{progress:null,_items:null,_flySurfaceNode:null,_ltr:y.isBodyLtr(),constructor:function(a){this._flySurfaceNode=a;this._items=[]},start:function(a,c){var e=this,b=new z;b.onNodePreDestroy=function(h){e.onNodePreDestroy(h)};
this._items.push(b);this.progress||(this.progress=new t);return b.start(a,c).then(q.hitch(this,this._onItemFinished,b))},_onItemFinished:function(a){a=w.indexOf(this._items,a);0<=a&&(this._items.splice(a,1),0===this._items.length&&this.progress&&(this.progress.resolve(),this.progress=null))},finish:function(){for(var a=this._items;0<a.length;)a.pop().finish()},fly:function(a,c,e,b){b=b||a.cloneNode(!0);e||(e=["top",this._ltr?"left":"right"]);if(!u)return b;a=a.getBoundingClientRect();var h=this._flySurfaceNode.getBoundingClientRect();
l.add(b,"Anim_FlyingObj");for(var g,f,k=0;k<e.length;k++){var d=e[k],n=a[d]-h[d];if("right"===d||"bottom"===d)n=-n;if("left"===d&&!this._ltr||"right"===d&&this._ltr)g=d,f=n;b.style[d]=n+"px"}this._flySurfaceNode.appendChild(b);g&&(f+=a.width-b.getBoundingClientRect().width,b.style[g]=f+"px");this.start([{node:b,classes:[c]}],b);return b},onNodePreDestroy:function(a){}})});