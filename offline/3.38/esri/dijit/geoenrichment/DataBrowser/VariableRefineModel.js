// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/DataBrowser/VariableRefineModel",["dojo/_base/declare","dojo/_base/array","./KeywordFilter","./TagFilter"],function(l,e,m,n){return l(null,{variables:null,keywordFilter:null,filters:null,idProperty:"fullName",_filterHash:null,initialize:function(a,b){this.variables=a;var f=this.variables.length,g=0;this.keywordFilter=new m;this.keywordFilter.totalCount=f;this.keywordFilter.bitIndex=g++;var c=[],h;for(h in b){var k=new n(b[h]);k.totalCount=f;k.bitIndex=g++;c.push(k)}this._filterHash=
{};e.forEach(a,function(d){this._filterHash[d[this.idProperty]]=0;e.forEach(c,function(p){p.match(d)},this)},this);this.applyFilter(this.keywordFilter);this.filters=[];e.forEach(c,function(d){d.activate()&&(this.filters.push(d),this.applyFilter(d))},this);return g},applyFilter:function(a){var b=1<<a.bitIndex,f=0,g=!a.isActive();e.forEach(this.variables,function(c){var h=a.match(c,!0);!0===h&&f++;this._filterHash[c[this.idProperty]]=g||h?this._filterHash[c[this.idProperty]]&~b:this._filterHash[c[this.idProperty]]|
b},this);a.matchCount=f},match:function(a){return!this._filterHash[a[this.idProperty]]},getMatchingVariables:function(){var a=[];e.forEach(this.variables,function(b){this.match(b)&&a.push(b)},this);return a}})});