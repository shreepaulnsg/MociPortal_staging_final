// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/metadata/editor/templates/PrimaryToolbar.html":'\x3cdiv class\x3d"gxePrimaryToolbar" data-dojo-attach-point\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"gxeTabs gxeFloatLeft"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/metadata/base/TabButton" data-dojo-attach-point\x3d"viewButton"\r\n      data-dojo-props\x3d"label:\'${i18nBase.editor.primaryToolbar.view}\'"\r\n      data-dojo-attach-event\x3d"onClick: _onViewClick"\x3e\'\r\n    \x3c/div\x3e\x3cdiv data-dojo-type\x3d"esri/dijit/metadata/base/TabButton" data-dojo-attach-point\x3d"viewXmlButton"\r\n      data-dojo-props\x3d"label:\'${i18nBase.editor.primaryToolbar.viewXml}\'"\r\n      data-dojo-attach-event\x3d"onClick: _onViewXmlClick"\x3e\r\n    \x3c/div\x3e\x3cdiv data-dojo-type\x3d"esri/dijit/metadata/base/TabButton" data-dojo-attach-point\x3d"editButton"\r\n      data-dojo-props\x3d"label:\'${i18nBase.editor.primaryToolbar.edit}\'"\r\n      data-dojo-attach-event\x3d"onClick: _onEditClick"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"gxeMessageArea" data-dojo-attach-point\x3d"messageArea" style\x3d"display:none"\x3e\r\n      \x3cdiv class\x3d"gxeIconWorking" data-dojo-attach-point\x3d"workingIcon" style\x3d"display:none"\x3e\x3c/div\x3e\r\n      \x3cspan class\x3d"gxeWorkingMessage" data-dojo-attach-point\x3d"workingNode"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"gxeToolsets gxeFloatRight"\x3e\r\n    \x3cdiv class\x3d"gxeToolset gxeViewToolset" data-dojo-attach-point\x3d"viewToolset" style\x3d"display:none;"\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeDownloadButton simple" data-dojo-attach-event\x3d"onclick: _onDownloadClick"\r\n        data-dojo-attach-point\x3d"downloadButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.download.caption}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"gxeToolset gxeEditToolset" data-dojo-attach-point\x3d"editToolset" style\x3d"display:none;"\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeViewHtmlButton simple" data-dojo-attach-event\x3d"onclick: _onViewHtmlClick"\r\n        data-dojo-attach-point\x3d"viewHtmlButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.viewHtml.caption}\x3c/button\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeValidateButton simple" data-dojo-attach-event\x3d"onclick: _onValidateClick"\r\n        data-dojo-attach-point\x3d"validateButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.validate.caption}\x3c/button\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeSaveDraftButton simple" data-dojo-attach-event\x3d"onclick: _onSaveDraftClick"\r\n        data-dojo-attach-point\x3d"saveDraftButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.saveDraft.caption}\x3c/button\x3e\r\n      \x3cspan class\x3d"gxeSeparator"\x3e\x3c/span\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeDeleteButton simple" data-dojo-attach-event\x3d"onclick: _onDeleteClick"\r\n        data-dojo-attach-point\x3d"deleteButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.del.caption}\x3c/button\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeLoadButton simple" data-dojo-attach-event\x3d"onclick: _onLoadClick"\r\n        data-dojo-attach-point\x3d"loadButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e\x3cspan data-dojo-attach-point\x3d"loadButtonLabel"\x3c/span\x3e${i18nBase.editor.load.caption}\x3c/button\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeTransformButton simple" data-dojo-attach-event\x3d"onclick: _onTransformClick"\r\n        data-dojo-attach-point\x3d"transformButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.transform.caption}\x3c/button\x3e\r\n      \x3cspan class\x3d"gxeSeparator"\x3e\x3c/span\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeSaveButton prominent" data-dojo-attach-event\x3d"onclick: _onSaveClick"\r\n        data-dojo-attach-point\x3d"saveButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.save.caption}\x3c/button\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeSaveAndCloseButton" data-dojo-attach-event\x3d"onclick: _onSaveAndCloseClick"\r\n        data-dojo-attach-point\x3d"saveAndCloseButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.editor.saveAndClose.caption}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"gxeToolset gxeCommonToolset" data-dojo-attach-point\x3d"commonToolset" style\x3d"display:none;"\x3e\r\n      \x3cbutton class\x3d"gxeButton gxeCloseButton" data-dojo-attach-event\x3d"onclick: _onCloseClick"\r\n        data-dojo-attach-point\x3d"closeButton"\r\n        \x3e\x3cspan class\x3d"gxeBtnIcon"\x3e\x3c/span\x3e${i18nBase.general.close}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"gxeClear"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/dijit/metadata/editor/PrimaryToolbar","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/_base/fx dojo/dom-class dojo/dom-style dojo/has dojo/query ../base/Templated ./PrimaryToolbarMixin dojo/text!./templates/PrimaryToolbar.html dojo/i18n!../nls/i18nBase ../base/TabButton ../base/ValidationTracker ./util/MessageDialog ../../../kernel".split(" "),function(n,l,y,z,u,h,b,A,B,C,D,E,g,L,q,r,F){n=n([C,D],{_disabled:!0,_escapeSingleQuotes:!0,_mode:null,editor:null,lastSavedXml:null,
templateString:E,canDownloadFiles:!1,postCreate:function(){this.inherited(arguments)},initialize:function(){var a=this.editor.gxeAdaptor.getAllowEditMetadata();a||b.set(this.editButton.domNode,"display","none");this.editor.gxeContext.allowViewXml||b.set(this.viewXmlButton.domNode,"display","none");!this.editor.gxeContext.allowView&&a&&(b.set(this.viewButton.domNode,"display","none"),this.editor.gxeContext.allowViewXml||b.set(this.editButton.domNode,"display","none"));this.editor.gxeContext.arcgisMode&&
(this.loadButtonLabel.innerHTML=this.i18nBase.editor.load.portalCaption);this.updateUI()},initializeView:function(){this._initializeView()},_checkForChanges:function(a,c){var e=new z,f=this.editor.getEditDocument();if(!f)return e.resolve(!0),e;var k=new q({ignoreErrors:!0});f=f.generateXml(k);if(this._compareXmls(f,this.lastSavedXml))return e.resolve(!0),e;(new r({title:a,okLabel:c,onOkClick:function(d){e.resolve(!0)},onCancelClick:function(d){e.resolve(!1)}})).show(g.editor.changesNotSaved.prompt);
return e},_close:function(){this.editor.dialogBroker&&this.editor.dialogBroker.dialog&&this.editor.dialogBroker.hide()},_fadeIn:function(a){b.set(this.messageArea,"display","none");this.workingNode.innerHTML="";u.fadeIn({node:this.editor.canvasNode,onEnd:l.hitch(this,function(){this._disabled=!1;this.updateUI();a&&a()})}).play()},_fadeOut:function(a,c){this._disabled=!0;b.set(this.messageArea,"display","inline-block");this.setNodeText(this.workingNode,a);y.forEach(B("button",this.domNode),function(e){e.disabled=
!0});u.fadeOut({node:this.editor.canvasNode,onEnd:l.hitch(this,function(){c&&c()})}).play()},_onCloseClick:function(){this._disabled||this._checkForChanges(g.editor.changesNotSaved.dialogTitle,g.editor.changesNotSaved.closeButton).then(l.hitch(this,function(a){a&&this._close()}))},_onDeleteClick:function(){this._disabled||(this.lastSavedXml?this._confirmAndDelete():this.editor.gxeContext.arcgisMode&&(new r({title:g.editor.del.caption,cancelLabel:g.general.close,showOk:!1})).show(g.editor.del.portalNone))},
_onDownloadClick:function(){if(!this._disabled){var a=this.editor.xmlPane.xmlString,c=this.editor.xmlPane.xmlTitle;null!==a&&this._download(a,c,!1)}},_onEditClick:function(a){this._disabled||(a=this.editor.getEditDocument(),this._setMode("edit"),a||this._loadEditor())},_onLoadClick:function(){this._disabled||this._showLoadDialog(null)},_onSaveClick:function(){if(!this._disabled){var a={isSaveAsDraft:!1,isSaveAndClose:!1,bPushToItem:!1,showDialog:!1};this.editor.gxeAdaptor.getAllowPushToItem()&&(a.bPushToItem=
!0);this._save(a)}},_onSaveAndCloseClick:function(){if(!this._disabled){var a={isSaveAsDraft:!1,isSaveAndClose:!0,bPushToItem:!1,showDialog:!1};this.editor.gxeAdaptor.getAllowPushToItem()&&(a.bPushToItem=!0);this._save(a)}},_onSaveDraftClick:function(){this._disabled||this._save({isSaveAsDraft:!0,isSaveAndClose:!1,bPushToItem:!1,showDialog:!1})},_onTransformClick:function(){if(!this._disabled){var a=this.editor.getEditDocument();if(a){var c=this._getTransformationTypes(a);0<c.length&&this._showTransformDialog(a,
c)}}},_onValidateClick:function(){this._disabled||this._validate(!1)},_onViewClick:function(){this._disabled||this._loadView()},_onViewHtmlClick:function(){if(!this._disabled){var a=this.editor.getEditDocument();if(a){var c=g.editor.viewHtml.savePrompt;this.lastSavedXml||(c=g.editor.viewHtml.portalNone);var e=this.editor.gxeAdaptor.getAllowPushToItem();this.editor.validationPane.clearMessages();var f=new q({isSaveAsDraft:!0,validationPane:this.editor.validationPane}),k=a.generateXml(f);if(!f.hadValidationErrors){var d=
new r({title:g.editor.viewHtml.dialogTitle,okLabel:g.editor.viewHtml.saveButton});d.show(c);d.okCancelBar.onOkClick=l.hitch(this,function(){d.okCancelBar.disableOk();this.editor.gxeAdaptor.saveXml(a,k,e).then(l.hitch(this,function(){this.lastSavedXml=k;setTimeout(l.hitch(this,function(){this.editor.gxeAdaptor.viewHtml(k).then(function(){});d.hide()}),1500)}),l.hitch(this,function(m){d.okCancelBar.showFatalError(g.editor.save.errorSaving,m)}))})}}}},_onViewXmlClick:function(){if(!this._disabled){var a=
this.editor.getEditDocument();if(a){var c=new q({ignoreErrors:!0});a=a.generateXml(c);this.editor.xmlPane.setXml(a,c.documentTitle);this._setMode("viewXml");this.updateUI()}else this._setMode("viewXml")}},_setMode:function(a){"viewXml"===a&&(this.editor.gxeContext.allowViewXml||(a="view"));"view"===a?(h.add(this.viewButton.domNode,"current"),h.remove(this.viewXmlButton.domNode,"current"),h.remove(this.editButton.domNode,"current"),b.set(this.editToolset,"display","none"),b.set(this.viewToolset,"display",
""),this.editor.validationPane.clearMessages(),b.set(this.editor.xmlPane.domNode,"display","none"),b.set(this.editor.editDocumentPane.domNode,"display","none"),b.set(this.editor.viewDocumentPane.domNode,"display",""),this.editor.resizeDocument(this.editor.viewDocumentPane)):"viewXml"===a?(h.add(this.viewXmlButton.domNode,"current"),h.remove(this.viewButton.domNode,"current"),h.remove(this.editButton.domNode,"current"),b.set(this.editToolset,"display","none"),b.set(this.viewToolset,"display",""),this.editor.validationPane.clearMessages(),
b.set(this.editor.viewDocumentPane.domNode,"display","none"),b.set(this.editor.editDocumentPane.domNode,"display","none"),b.set(this.editor.xmlPane.domNode,"display",""),this.editor.resizeXmlPane()):"edit"===a&&(h.add(this.editButton.domNode,"current"),h.remove(this.viewButton.domNode,"current"),h.remove(this.viewXmlButton.domNode,"current"),b.set(this.viewToolset,"display","none"),b.set(this.editToolset,"display",""),b.set(this.editor.viewDocumentPane.domNode,"display","none"),b.set(this.editor.xmlPane.domNode,
"display","none"),b.set(this.editor.editDocumentPane.domNode,"display",""),this.editor.resizeDocument(this.editor.editDocumentPane));this._mode=a;this.updateUI()},updateUI:function(){var a=function(p,v){p.disabled=!v;v?b.set(p,"display",""):b.set(p,"display","none")},c=this.editor.xmlPane.xmlString,e=this.editor.xmlPane.xmlTitle,f=this.editor.getEditDocument(),k=this._getTransformationTypes(f);f=null!==f;var d=this.editor.gxeAdaptor.getAllowEditMetadata(),m=this.editor.gxeAdaptor.getAllowDeleteMetadata(),
G=this.editor.gxeContext.allowDownload,H=this.editor.gxeContext.allowDraft,I=this.editor.gxeContext.allowSaveAndClose,J=this.editor.gxeContext.showValidateButton;d=d&&f;k=0<k.length;var w=m&&null!==this.lastSavedXml,x=this.editor&&this.editor.dialogBroker,K=this.editor.gxeContext.allowViewHtml&&d;m&&this.editor.gxeContext.arcgisMode&&(w=!0);var t=m=!1;try{"undefined"!==typeof FileReader&&"undefined"!==typeof Blob&&(t=m=!0)}catch(p){}a(this.downloadButton,t&&null!==c&&null!==e&&G);a(this.viewHtmlButton,
K);a(this.saveButton,d);a(this.saveAndCloseButton,d&&x&&I);a(this.saveDraftButton,t&&f&&H);a(this.validateButton,d&&J);a(this.loadButton,m);a(this.transformButton,k);a(this.deleteButton,w);a(this.closeButton,x)}});A("extend-esri")&&l.setObject("dijit.metadata.editor.PrimaryToolbar",n,F);return n});