// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/metadata/base/xml/XmlInterrogator","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./XmlFlattener ./xmlUtil ../../../../kernel".split(" "),function(n,t,m,v,w,x,y){n=n(null,{constructor:function(b){t.mixin(this,b)},interrogate:function(b,h){b=(new w).flatten(b);var k=b.prefixesByUri,f=b.valuesByPath,d={};m.forEach(h,function(a){var e=a.interrogationRules;if(e&&0!==e.length){var g=x.makeGxeUrisByPrefix(a.getNamespaces());a=a.key;var z=e.length,q=0,u=!1;m.forEach(e,function(r){var p=
r.path;p&&(p=this._transformPath(k,g,p),(r=this._evaluateMatch(f,p,r))?q++:e.must&&(u=!0))},this);!u&&0<q&&(d[a]={nRules:z,nRulesMatched:q})}},this);var c=null,l=0;m.forEach(h,function(a){var e=a.key,g=null;e in d&&(g=d[e],null===c?(c=a,l=g.nRulesMatched):g.nRulesMatched>l&&g.nRules===g.nRulesMatched&&(c=a,l=g.nRulesMatched))});return c},_evaluateMatch:function(b,h,k){var f=!1,d=null;"undefined"!==typeof k.value&&(d=k.value);if(h in b){if(null===d)return!0;b=b[h];f=m.some(b,function(c){return d===
c})}return f},_transformPath:function(b,h,k){var f=[],d,c,l;m.forEach(k.split("/"),function(a){var e=-1!==a.indexOf("@");d=a.replace("@","").split(":");2===d.length?(c=null,(l=h[d[0]])&&(c=b[l]),c?(e&&(c="@"+c),f.push(c+":"+d[1])):f.push(a)):f.push(a)});return f.join("/")}});v("extend-esri")&&t.setObject("dijit.metadata.base.xml.XmlInterrogator",n,y);return n});