// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/metadata/arcgis/portal/PortalItemTransformer","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/query dijit/registry dijit/_WidgetBase ../../../../kernel".split(" "),function(l,n,k,q,r,p,t,u){l=l([t],{gxeDocument:null,isPull:!0,portal:null,portalItem:null,portalUser:null,portalUrl:null,itemPropertiesToPush:null,postCreate:function(){this.inherited(arguments)},afterPullValue:function(a,b){},checkCoordinate:function(a){var b=typeof a;if("undefined"===b&&null===a)return null;
if("string"===b){a=parseFloat(a);if(isNaN(a))return null;b=typeof a}return"number"===b?isFinite(a)?a:null:null},checkVisibility:function(a,b){},findInputValue:function(a,b,c){b=this.findInputWidget(a,b,c);if(null!==b)for(a=b.getParent();a;){if(a._isOptionallyOff){b=null;break}a=a.getParent()}if(null!==b)return b.getInputValue()},findInputWidget:function(a,b,c){if((a=r("[data-gxe-path\x3d'"+b+"']",this.gxeDocument.rootDescriptor.domNode))&&1===a.length){if(c=p.byNode(a[0]))return c.inputWidget}else if(a&&
0<a.length&&c&&(c=p.byNode(a[0])))return c.inputWidget;return null},generatePush:function(a,b){this.isPull=!1;this.gxeDocument=a;this.portalItem=b;this.itemPropertiesToPush=null;var c={},d=this.newTransformationInfo(a);this.populateTransformationInfo(a,b,d);a=null;b=!1;for(a in d)d.hasOwnProperty(a)&&this.pushValue(c,d,a);for(a in c)c.hasOwnProperty(a)&&(b=!0);b&&(this.itemPropertiesToPush=c);return this.itemPropertiesToPush},pull:function(a,b){this.isPull=!0;this.gxeDocument=a;this.portalItem=b;
var c=this.newTransformationInfo(a);this.populateTransformationInfo(a,b,c);a=null;for(a in c)c.hasOwnProperty(a)&&this.pullValue(b,c,a,!1)},newTransformationInfo:function(a){a=function(b){return{path:null,canPull:!0,canPush:b,isSelected:!0,valueToPush:null}};return{id:a(!1),title:a(!1),snippet:a(!0),description:a(!0),accessInformation:a(!1),licenseInfo:a(!1),thumbnail:a(!1),culture:a(!1),url:a(!1),created:a(!1),modified:a(!1),type:a(!1),tags:a(!0),typeKeywords:a(!1),extent:{xmin:a(!0),ymin:a(!0),
xmax:a(!0),ymax:a(!0)},spatialReference:a(!1),name:a(!1),owner:a(!1)}},populateTransformationInfo:function(a,b,c){},pullValue:function(a,b,c,d){var f=null,g=f=null,e=null,h=null,m=null;if(c in a&&c in b){e=a[c];f=b[c];if("undefined"===typeof e||"string"===typeof e&&null!==e&&0===e.length||"undefined"===typeof f)return;if("extent"===c){if(e&&e.push&&2===e.length&&2===e[0].length&&2===e[1].length)for(m in h={xmin:e[0][0],ymin:e[0][1],xmax:e[1][0],ymax:e[1][1]},h)h.hasOwnProperty(m)&&this.pullValue(h,
f,m,!0);return}null!==f&&f.canPull&&f.isSelected&&(g=f.path,"undefined"===typeof g&&(g=null));"tags"===c&&null!==e&&0===e.length&&(e=null)}null!==e&&null!==g&&(f=this.findInputWidget(c,g,!d),null!==f&&(f.setInputValue(e),f.parentXNode&&f.parentXNode.toggleContent&&f.parentXNode.toggleContent(!0),this.checkVisibility(f,g),this.afterPullValue(f,g)))},pushExtent:function(a,b,c,d,f){b=this.checkCoordinate(b);c=this.checkCoordinate(c);d=this.checkCoordinate(d);f=this.checkCoordinate(f);if(null!==b&&null!==
d&&null!==c&&null!==f&&!(-180>b||180<b||-180>d||180<d||-90>c||90<c||-90>f||90<f||d<b||f<c)){var g=!0,e=this.portalItem.extent;e&&e.push&&2===e.length&&2===e[0].length&&2===e[1].length&&b===e[0][0]&&c===e[0][1]&&d===e[1][0]&&f===e[1][1]&&(g=!1);g&&(a.extent=b+","+c+","+d+","+f)}},pushString:function(a,b,c){if("undefined"!==typeof c&&null!==c&&"string"===typeof c&&(c=n.trim(c),0!==c.length)){var d=this.portalItem[b];if("undefined"===typeof d||c!==d)a[b]=c}},pushTags:function(a,b){if("undefined"!==typeof b&&
null!==b&&b.push&&0<b.length){var c=this.portalItem.tags,d=[],f=!0,g=0;"undefined"!==typeof c&&null!==c&&c.push?(k.forEach(c,function(e){d.push(e)}),k.forEach(b,function(e){k.some(c,function(h){return e===h})||d.push(e)}),d.length===c.length&&(k.forEach(d,function(e){k.some(c,function(h){return e===h})&&g++}),g===d.length&&(f=!1)),f&&(a.tags=d.join(","))):a.tags=b.join(",")}},pushValue:function(a,b,c){var d=null,f=null,g={};b=b[c];if("undefined"!==typeof b)if("extent"===c){for(f in b)b.hasOwnProperty(f)&&
this.pushValue(g,b,f);this.pushExtent(a,g.xmin,g.ymin,g.xmax,g.ymax)}else b.canPush&&b.isSelected&&(d=b.path,"undefined"===typeof d&&(d=null)),null!==d&&(d=this.findInputValue(c,d,"tags"===c),"undefined"!==typeof d&&null!==d&&("string"===typeof d?this.pushString(a,c,d):d.push&&0<d.length&&"tags"===c&&this.pushTags(a,d)))}});q("extend-esri")&&n.setObject("dijit.metadata.arcgis.portal.PortalItemTransformer",l,u);return l});