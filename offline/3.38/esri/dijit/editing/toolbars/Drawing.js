// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/editing/toolbars/Drawing","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has dijit/_CssStateMixin ../Util ./ToolbarBase ../tools/ButtonToolBase ../tools/Cut ../tools/Union ../tools/Reshape ../tools/Editing ../tools/EditingTools ../tools/Selection ../tools/SelectionTools ../../../kernel".split(" "),function(d,a,g,h,k,l,m,n,c,p,q,r,t,e,u,v,w){d=d([n,l],{declaredClass:"esri.dijit.editing.toolbars.Drawing",onShowAttributeInspector:function(){},_activateTool:function(b,
f){this._settings.editor._activeTool=b;"EDITING"!==b&&this._settings.templatePicker.clearSelection();"ATTRIBUTES"!==b&&this._settings.editor._hideAttributeInspector();"CLEAR"!==b&&this.inherited(arguments)},_initializeToolbar:function(){g.forEach(this._settings.layers,function(b){this._tbConnects.push(h.connect(b,"onSelectionComplete",this,"_updateUI"))},this)},activateEditing:function(b,f){this._tools.EDITING._activateTool(b,f.geometryType);this._activeTool=this._tools.EDITING;this._activeTool.setChecked(!0)},
_updateUI:function(){this._settings.undoManager&&(this._tools.UNDO.set("disabled",!1===this._settings.undoManager.canUndo),this._tools.REDO.set("disabled",!1===this._settings.undoManager.canRedo));this._selectedFeatures=m.getSelection(this._settings.layers);var b=this._selectedFeatures.length;this._tools.DELETE&&this._tools.DELETE.set("disabled",0>=b);this._tools.CLEAR&&this._tools.CLEAR.set("disabled",0>=b);this._tools.ATTRIBUTES&&this._tools.ATTRIBUTES.set("disabled",0>=b);this._tools.UNION&&this._tools.UNION.set("disabled",
2>b)},_toolFinished:function(b){if("ATTRIBUTES"===b&&this._selectedFeatures&&this._selectedFeatures.length)this.onShowAttributeInspector(this._selectedFeatures[0]);if("SELECT"===b||"CUT"===b||"RESHAPING"===b||"EDITING"===b)this._activeTool.deactivate(),this._activeTool.setChecked(!1),this._activeTool=null;if("DELETE"===b)this.onDelete();this._settings.editor._activeTool=null;this._updateUI()},_createTools:function(){this._tools.SELECT=new u({settings:this._settings,onClick:a.hitch(this,"_activateTool",
"SELECT",!0),onFinished:a.hitch(this,"_toolFinished","SELECT")});this.addChild(this._tools.SELECT);this._tools.CLEAR=new c(a.mixin(v.selectClear,{settings:this._settings,onClick:a.hitch(this._settings.editor,"_clearSelection",!1)}));this.addChild(this._tools.CLEAR);this._createSeparator();this._tools.ATTRIBUTES=new c(a.mixin(e.attributes,{settings:this._settings,onClick:a.hitch(this,"_toolFinished","ATTRIBUTES")}));this.addChild(this._tools.ATTRIBUTES);this._createSeparator();this._tools.EDITING=
new t({settings:this._settings,onClick:a.hitch(this,"_activateTool","EDITING",!0),onApplyEdits:a.hitch(this,"onApplyEdits"),onFinished:a.hitch(this,"_toolFinished","EDITING")});this.addChild(this._tools.EDITING);this._tools.DELETE=new c(a.mixin(e.del,{settings:this._settings,onClick:a.hitch(this,"_toolFinished","DELETE")}));this.addChild(this._tools.DELETE);this._settings.toolbarOptions&&((this._settings.toolbarOptions.cutVisible||this._settings.toolbarOptions.mergeVisible||this._settings.toolbarOptions.reshapeVisible)&&
this._createSeparator(),this._settings.toolbarOptions.cutVisible&&(this._tools.CUT=new p({settings:this._settings,onFinished:a.hitch(this,"_toolFinished","CUT"),onClick:a.hitch(this,"_activateTool","CUT",!0),onApplyEdits:a.hitch(this,"onApplyEdits")}),this.addChild(this._tools.CUT)),this._settings.toolbarOptions.mergeVisible&&(this._tools.UNION=new q({settings:this._settings,onFinished:a.hitch(this,"_toolFinished","UNION"),onApplyEdits:a.hitch(this,"onApplyEdits")}),this.addChild(this._tools.UNION)),
this._settings.toolbarOptions.reshapeVisible&&(this._tools.RESHAPING=new r({settings:this._settings,onClick:a.hitch(this,"_activateTool","RESHAPING",!0),onFinished:a.hitch(this,"_toolFinished","RESHAPING"),onApplyEdits:a.hitch(this,"onApplyEdits")}),this.addChild(this._tools.RESHAPING)));this._settings.enableUndoRedo&&(this._createSeparator(),this._tools.UNDO=new c(a.mixin(e.undo,{settings:this._settings,disabled:!0,onClick:a.hitch(this,function(){this._tools.UNDO.set("disabled",!0);this._tools.REDO.set("disabled",
!0);this._settings.editor._undo()})})),this.addChild(this._tools.UNDO),this._tools.REDO=new c(a.mixin(e.redo,{settings:this._settings,disabled:!0,onClick:a.hitch(this,function(){this._tools.UNDO.set("disabled",!0);this._tools.REDO.set("disabled",!0);this._settings.editor._redo()})})),this.addChild(this._tools.REDO))}});k("extend-esri")&&a.setObject("dijit.editing.toolbars.Drawing",d,w);return d});