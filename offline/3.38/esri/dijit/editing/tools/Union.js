// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/editing/tools/Union","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../../graphicsUtils ../../../graphic ../../../toolbars/draw ../Union ./ButtonToolBase ../../../kernel".split(" "),function(b,c,f,p,q,r,t,u,v,w){b=b([v],{declaredClass:"esri.dijit.editing.tools.Union",id:"btnFeatureUnion",_enabledIcon:"toolbarIcon unionIcon",_disabledIcon:"toolbarIcon unionIcon",_drawType:t.POLYLINE,_enabled:!0,_label:"NLS_unionLbl",_onClick:function(h){this._settings.editor._activeTool=
"UNION";h=f.filter(this._settings.layers,function(a){return"esriGeometryPolygon"===a.geometryType&&a.visible&&a._isMapAtVisibleScale()});var k=[],g=0;f.forEach(h,function(a,z){var d=a.getSelectedFeatures();2<=d.length&&(g++,this._settings.geometryService.union(q.getGeometries(d),c.hitch(this,function(x){var l=d.shift(),m=[],n=[];m.push(new r(l.toJson()));n.push(l.setGeometry(x));k.push({layer:a,updates:n,deletes:d,preUpdates:m});g--;if(0>=g)this.onApplyEdits(k,c.hitch(this,function(){if(this._settings.undoRedoManager){var y=
this._settings.undoRedoManager;f.forEach(this._edits,c.hitch(this,function(e){y.add(new u({featureLayer:e.layer,deletedGraphics:e.deletes,preUpdatedGraphics:e.preUpdates,postUpdatedGraphics:e.updates}))}),this)}this._settings.editor._selectionHelper.clearSelection(!1);this.onFinished()}))})))},this)}});p("extend-esri")&&c.setObject("dijit.editing.tools.Union",b,w);return b});