// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/editing/tools/Reshape","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has ../../../graphic ../../../layers/FeatureLayer ../../../tasks/query ../../../toolbars/draw ./ToggleToolBase ../../../kernel".split(" "),function(d,e,m,k,n,p,q,r,t,u,v){d=d([u],{declaredClass:"esri.dijit.editing.tools.Reshape",id:"btnFeatureReshape",_enabledIcon:"toolbarIcon reshapeIcon",_disabledIcon:"toolbarIcon reshapeIcon",_drawType:t.POLYLINE,_enabled:!0,_label:"NLS_reshapeLbl",
activate:function(){k.disconnect(this._rConnect);this._rConnect=k.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");this.inherited(arguments)},deactivate:function(){this.inherited(arguments);k.disconnect(this._rConnect);delete this._rConnect},_onDrawEnd:function(c){var f=this._settings.layers,b=new r;b.geometry=c;c=this._reshapeLayers=m.filter(f,function(g){return"esriGeometryPolygon"===g.geometryType||"esriGeometryPolyline"});this._settings.editor._selectionHelper.selectFeatures(c,b,q.SELECTION_NEW,
e.hitch(this,"_reshape",b))},_reshape:function(c,f){if(1===f.length){var b=[],g=[],l=[],h=f[0],w=h.getLayer();this._settings.geometryService.reshape(h.geometry,c.geometry,e.hitch(this,function(a){"polyline"===a.type&&a.paths&&0===a.paths.length?(this._settings.editor._selectionHelper.clearSelection(!1),this.onFinished()):"polygon"===a.type&&a.rings&&0===a.rings.length?(this._settings.editor._selectionHelper.clearSelection(!1),this.onFinished()):(l.push(new p(h.toJson())),g.push(h.setGeometry(a)),
b.push({layer:w,updates:g,preUpdates:l}),this.onApplyEdits(b,e.hitch(this,function(){this._settings.editor._selectionHelper.clearSelection(!1);this.onFinished()})))}))}}});n("extend-esri")&&e.setObject("dijit.editing.tools.Reshape",d,v);return d});