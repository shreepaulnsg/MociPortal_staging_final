// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/analysis/mixins/FilterAndSelection","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/dom-construct dojo/dom-class ../../../kernel dojo/aspect ../components/FilterAndSelection/FilterAndSelection".split(" "),function(e,m,f,g,n,k,p,q,l,r){e=e([],{showFilterAndSelection:!1,filterAndSelections:[],aspectsForFilters:[],_updateJobFilterAndSelection:function(a){this.showFilterAndSelection&&this.filterObjects&&this.filterObjects.forEach(function(c){var b=
a[c.layer],d=this.filterAndSelections[c.layer];if((b="string"===typeof b?g.fromJson(b):b)&&d){var h=d.get("inputQuery");h&&(b.filter=b.filter?b.filter+" AND "+h:h,a[c.layer]=g.toJson(b),d.get("expression")&&(a[c.expressionObj]=g.toJson(d.get("expression"))))}}.bind(this));return a},clearFilterAndSelection:function(){f.forEach(this.aspectsForFilters,function(a){a.remove()});f.forEach(Object.keys(this.filterAndSelections),function(a){this.filterAndSelections[a].clear()},this)},_createFilterAndSelections:function(){this.filterAndSelections=
{};this.showFilterAndSelection&&f.forEach(this.filterObjects,function(a){this.filterAndSelections[a.layer]=this._createFilterAndSelection(a)},this)},_createFilterAndSelection:function(a){p.add(a.select.domNode,"with-filter");var c=a.layerForTool||a.layer,b={map:this.map,layer:this[a.layer]||this[a.layerForTool]||a.layers&&a.layers[a.select.get("value")],expression:this[a.expressionObj]};b=this.constructDomForFilter(b,a.select);this.aspectsForFilters.push(l.after(a.select,"onChange",function(d){0<=
parseInt(d)&&(d=a.layers&&a.layers[d]||this[c],this.filterAndSelections[a.layer]&&this.filterAndSelections[a.layer].set("layer",d))}.bind(this),!0));this.aspectsForFilters.push(l.after(this,"_onClose",this.clearFilterAndSelection.bind(this)));return b},constructDomForFilter:function(a,c){c=c.domNode.parentNode;var b=k.create("div",null,c);a.msgContainer=k.create("div",{class:"esriLeadingMargin1 paddingTop1"},c);return new r(a,b)}});n("extend-esri")&&m.setObject("dijit.analysis.mixins.FilterAndSelection.FilterAndSelection",
e,q);return e});