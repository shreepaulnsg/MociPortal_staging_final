// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/AttributeInspector":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/sniff dojo/_base/kernel dojo/has dojo/dom-style dojo/dom-construct ../kernel ../lang ../domUtils ../layers/InheritedDomain ../layers/FeatureLayer dojo/i18n!../nls/jsapi dojo/fx dojox/gfx dijit/_Widget dijit/_Templated dijit/Editor dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/TextColor ./_EventedWidget ./editing/AttachmentEditor ./editing/Util ../tasks/query dijit/form/DateTextBox dijit/form/TextBox dijit/form/NumberTextBox dijit/form/FilteringSelect dijit/form/NumberSpinner dijit/form/Button dijit/form/SimpleTextarea dijit/form/ValidationTextBox dijit/form/TimeTextBox dijit/Tooltip dojo/data/ItemFileReadStore dojox/date/islamic dojox/date/islamic/Date dojox/date/islamic/locale dojo/text!./templates/AttributeInspector.html".split(" "),
function(E,v,z,u,n,h,f,c,a,b,d,g,l,A,t,m,k,p,r,w,H,J,K,R,X,T,W,C,M,O,e,q,B,G,F,P,L,Q,N,ca,Y){var ea=E([K,p,r],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:!0,templateString:Y,onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},_navMessage:"( ${idx} ${of} ${numFeatures} )",_currentAttributeFieldName:null,_aiConnects:[],_selection:[],_toolTips:[],_numFeatures:0,_featureIdx:0,_currentLInfo:null,
_currentFeature:null,_rollbackInfo:null,_eventMap:{update:!0,"delete":["feature"],"attribute-change":["feature","fieldName","fieldValue"],next:["feature"],reset:!0,cancel:!0},_defaultRichTextPlugins:"bold italic underline foreColor hiliteColor | justifyLeft justifyCenter justifyRight justifyFull | insertOrderedList insertUnorderedList indent outdent | createLink".split(" "),css:{label:"atiLabel",field:"atiField",textArea:"atiTextAreaField",richText:"atiRichTextField",attachmentEditor:"atiAttachmentEditor",
red:"atiRequiredField"},constructor:function(x,y){v.mixin(this,t.widgets.attributeInspector);x=x||{};x.featureLayer||x.layerInfos||console.error("esri.AttributeInspector: please provide correct parameter in the constructor");this._datePackage=this._getDatePackage(x);this._layerInfos=x.layerInfos||[{featureLayer:x.featureLayer,options:x.options||[]}];this._layerInfos=z.filter(this._layerInfos,function(D){return!D.disableAttributeUpdate});this._hideNavButtons=x.hideNavButtons||!1},postCreate:function(){if(z.every(this._layerInfos,
function(y){return y.featureLayer.loaded}))this._initLayerInfos(),this._createAttachmentEditor(),this.onFirstFeature();else{var x=this._layerInfos.length;z.forEach(this._layerInfos,function(y){y=y.featureLayer;if(y.loaded)x--;else var D=u.connect(y,"onLoad",this,function(I){u.disconnect(D);D=null;x--;x||(this._initLayerInfos(),this._createAttachmentEditor(),this.onFirstFeature())})},this)}},destroy:function(){this._destroyAttributeTable();z.forEach(this._aiConnects,u.disconnect);delete this._aiConnects;
this._attachmentEditor&&(this._attachmentEditor.destroy(),delete this._attachmentEditor);delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments)},refresh:function(){this._updateSelection()},first:function(){this.onFirstFeature()},last:function(){this.onLastFeature()},next:function(){this.onNextFeature()},previous:function(){this.onPreviousFeature()},showFeature:function(x,y){y&&(this._createOnlyFirstTime=!0);
this._updateSelection([x],y);this._updateUI()},onLayerSelectionChange:function(x,y,D){this._createOnlyFirstTime=!1;this._featureIdx=D===A.SELECTION_NEW?0:this._featureIdx;this._updateSelection();this._updateUI()},onLayerSelectionClear:function(){!this._selection||0>=this._selection.length||(this._featureIdx=this._numFeatures=0,this._selection=[],this._currentLInfo=this._currentFeature=null,this._updateUI())},onLayerUpdateEnd:function(x,y,D,I){},onLayerError:function(x,y,D,I){},onLayerEditsError:function(x,
y,D,I){},onLayerEditsComplete:function(x,y,D,I){I=I||[];if(I.length){var S=this._selection,Z=x.featureLayer.objectIdField;z.forEach(I,v.hitch(this,function(aa){z.some(S,v.hitch(this,function(V,ba){if(V.attributes[Z]!==aa.objectId)return!1;this._selection.splice(ba,1);return!0}))}))}y=y||[];y.length&&(this._selection=X.findFeatures(y,x.featureLayer),this._featureIdx=0);I=this._numFeatures=(this._selection=X.sortFeaturesById(this._layerInfos,this._selection))?this._selection.length:0;if(y.length){if(y=
I?this._selection[this._featureIdx]:null)I=y.getLayer().getEditCapabilities(),I.canCreate&&!I.canUpdate||this._showFeature(y);this._updateUI()}D=D||[];if(D.length){var U=this._rollbackInfo;z.forEach(D,function(aa){var V=X.findFeatures(D,x.featureLayer)[0];if(!aa.success&&V.attributes[x.featureLayer.objectIdField]===aa.objectId&&U){var ba=U.field;aa=U.graphic.attributes[ba.name];var da=z.filter(this._currentLInfo.fieldInfos,function(fa){return fa.fieldName===ba.name},this)[0].dijit;V.attributes[ba.name]=
aa;"esriFieldTypeDate"===ba.type&&(aa=new Date(aa));this._setValue(da,aa)}},this)}this._rollbackInfo=null},onFieldValueChange:function(x,y){var D=x.field,I=x.dijit,S=this._currentFeature,Z=this._currentLInfo,U=D.name;x=this._isFieldRequired(D,x);if(""===I.displayedValue||"dijit.form.ValidationTextBox"!==I.declaredClass||I.isValid())if(""!==I.displayedValue&&I.displayedValue!==y&&I.isValid&&!I.isValid())this._setValue(I,S.attributes[D.name]);else{var aa=!("esriFieldTypeInteger"!==D.type&&"esriFieldTypeSmallInteger"!==
D.type&&"esriFieldTypeSingle"!==D.type&&"esriFieldTypeDouble"!==D.type);if(x&&(null===y||""===y||"undefined"===typeof y||aa&&isNaN(y))){U=S.attributes[D.name];if("esriFieldTypeDate"===D.type&&(U=new Date(U),I instanceof Array)){this._setValue(I[0],U);this._setValue(I[1],U);return}this._setValue(I,U)}else{if(aa){if(isNaN(y)||""===y)y=null;aa&&null!==y&&(y=Number(y))}"esriFieldTypeDate"===D.type&&(I instanceof Array?(y=I[0].getValue(),I=I[1].getValue(),y=y&&I?new Date(y.getFullYear(),y.getMonth(),y.getDate(),
I.getHours(),I.getMinutes(),I.getSeconds(),I.getMilliseconds()):y||I||null):(y=I.getValue(),D.domain&&(y=Number(y))),y=y&&y.getTime?y.getTime():y&&y.toGregorian?y.toGregorian().getTime():y);if(this._currentFeature.attributes[D.name]!==y){if(U===Z.typeIdField){var V=this._findFirst(Z.types,"id",y);z.forEach(Z.fieldInfos,function(ba){(D=ba.field)&&D.name!==Z.typeIdField&&(ba=ba.dijit,this._setFieldDomain(ba,V,D)&&ba&&(this._setValue(ba,S.attributes[D.name]+""),!1===ba.isValid()&&this._setValue(ba,null)))},
this)}this.onAttributeChange(S,U,y)}}}else this._setValue(I,S.attributes[D.name])},onDeleteBtn:function(x){this._deleteFeature()},onNextFeature:function(x){this._onNextFeature(1)},onPreviousFeature:function(x){this._onNextFeature(-1)},onFirstFeature:function(x){this._onNextFeature(-1*this._featureIdx)},onLastFeature:function(x){this._onNextFeature(this._numFeatures-1-this._featureIdx)},_initLayerInfos:function(){var x=this._layerInfos;this._editorTrackingInfos={};z.forEach(x,this._initLayerInfo,this)},
_initLayerInfo:function(x){var y=x.featureLayer,D;this._userIds={};var I=y.id;y.credential&&(this._userIds[I]=y.credential.userId);x.userId&&(this._userIds[I]=x.userId);this._connect(y,"onSelectionComplete",v.hitch(this,"onLayerSelectionChange",x));this._connect(y,"onSelectionClear",v.hitch(this,"onLayerSelectionClear",x));this._connect(y,"onEditsComplete",v.hitch(this,"onLayerEditsComplete",x));this._connect(y,"error",v.hitch(this,"onLayerError",x));this._connect(y,"onUpdateEnd",v.hitch(this,"onLayerUpdateEnd",
x));x.showAttachments=y.hasAttachments?d.isDefined(x.showAttachments)?x.showAttachments:!0:!1;x.hideFields=x.hideFields||[];x.htmlFields=x.htmlFields||[];x.isEditable=y.isEditable()?d.isDefined(x.isEditable)?x.isEditable:!0:!1;x.typeIdField=y.typeIdField;x.layerId=y.id;x.types=y.types;y.globalIdField&&((D=this._findFirst(x.fieldInfos,"fieldName",y.globalIdField))||x.showGlobalID||x.hideFields.push(y.globalIdField));(I=this._findFirst(x.fieldInfos,"fieldName",y.objectIdField))||x.showObjectID||x.hideFields.push(y.objectIdField);
var S=this._getFields(x.featureLayer);if(S){var Z=x.fieldInfos||[];Z=z.map(Z,function(U){return v.mixin({},U)});Z.length?x.fieldInfos=z.filter(z.map(Z,v.hitch(this,function(U){var aa=U.stringFieldOption||(this._isInFields(U.fieldName,x.htmlFields)?ea.STRING_FIELD_OPTION_RICHTEXT:ea.STRING_FIELD_OPTION_TEXTBOX);return v.mixin(U,{field:this._findFirst(S,"name",U.fieldName),stringFieldOption:aa})})),"return item.field;"):(S=z.filter(S,v.hitch(this,function(U){return!this._isInFields(U.name,x.hideFields)})),
x.fieldInfos=z.map(S,v.hitch(this,function(U){var aa=this._isInFields(U.name,x.htmlFields)?ea.STRING_FIELD_OPTION_RICHTEXT:ea.STRING_FIELD_OPTION_TEXTBOX;return{fieldName:U.name,field:U,stringFieldOption:aa}})));x.showGlobalID&&!D&&Z.push(this._findFirst(S,"name",y.globalIdField));x.showObjectID&&!I&&Z.push(this._findFirst(S,"name",y.objectIdField));D=[];y.editFieldsInfo&&(y.editFieldsInfo.creatorField&&D.push(y.editFieldsInfo.creatorField),y.editFieldsInfo.creationDateField&&D.push(y.editFieldsInfo.creationDateField),
y.editFieldsInfo.editorField&&D.push(y.editFieldsInfo.editorField),y.editFieldsInfo.editDateField&&D.push(y.editFieldsInfo.editDateField));this._editorTrackingInfos[y.id]=D}},_createAttachmentEditor:function(){this._attachmentEditor=null;var x=z.filter(this._layerInfos,function(y){return y.showAttachments});x&&x.length&&(this._attachmentEditor=new R({"class":this.css.attachmentEditor},this.attachmentEditor),this._attachmentEditor.startup())},_setCurrentLInfo:function(x){var y=this._currentLInfo?this._currentLInfo.featureLayer:
null,D=x.featureLayer;if(y&&y.id===D.id&&!y.ownershipBasedAccessControlForFeatures&&(y=D.getEditCapabilities(),!y.canCreate||y.canUpdate))return;this._currentLInfo=x;this._createTable()},_updateSelection:function(x,y){this._selection=x||[];z.forEach(this._layerInfos,this._getSelection,this);this._selection=X.sortFeaturesById(this._layerInfos,this._selection);this._numFeatures=this._selection.length;this._showFeature(this._numFeatures?this._selection[this._featureIdx]:null,y)},_getSelection:function(x){x=
x.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(x)},_updateUI:function(){var x=this._numFeatures,y=this._currentLInfo;this.layerName.innerHTML=y&&0!==x?y.featureLayer?y.featureLayer.name:"":this.NLS_noFeaturesSelected;c.set(this.attributeTable,"display",x?"":"none");c.set(this.editButtons,"display",x?"":"none");c.set(this.navButtons,"display",!this._hideNavButtons&&1<x?"":"none");this.navMessage.innerHTML=d.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},
this._navMessage);this._attachmentEditor&&c.set(this._attachmentEditor.domNode,"display",y&&y.showAttachments&&x?"":"none");c.set(this.deleteBtn.domNode,"display",y&&!1===y.showDeleteButton||!this._canDelete?"none":"");this.domNode.parentNode&&0<this.domNode.parentNode.scrollTop&&(this.domNode.parentNode.scrollTop=0)},_onNextFeature:function(x){this._featureIdx+=x;0>this._featureIdx?this._featureIdx=this._numFeatures-1:this._featureIdx>=this._numFeatures&&(this._featureIdx=0);x=this._selection.length?
this._selection[this._featureIdx]:null;this._showFeature(x);this._updateUI();this.onNext(x)},_deleteFeature:function(){this.onDelete(this._currentFeature)},_showFeature:function(x,y){if(x){this._currentFeature=x;y=y?y:x.getLayer();var D=y.getEditCapabilities({feature:x,userId:this._userIds[y.id]});this._canUpdate=D.canUpdate;this._canDelete=D.canDelete;if(D=this._getLInfoFromFeatureLayer(y)){this._setCurrentLInfo(D);var I=x.attributes,S=this._findFirst(D.types,"id",I[D.typeIdField]),Z=null;z.forEach(D.fieldInfos,
function(U){Z=U.field;var aa=[];U.dijit&&1<U.dijit.length?z.forEach(U.dijit,function(V){aa.push(V)}):aa.push(U.dijit);z.forEach(aa,v.hitch(this,function(V){if(V){var ba=this._setFieldDomain(V,S,Z),da=I[Z.name];da=da&&ba&&ba.codedValues&&ba.codedValues.length?ba.codedValues[da]?ba.codedValues[da].name:da:da;d.isDefined(da)||(da="");"dijit.form.DateTextBox"===V.declaredClass||"dijit.form.TimeTextBox"===V.declaredClass?da=""===da?null:new Date(da):"dijit.form.FilteringSelect"===V.declaredClass&&(V._lastValueReported=
null,da=I[Z.name]+"");try{this._setValue(V,da),"dijit.form.FilteringSelect"===V.declaredClass&&!1===V.isValid()&&this._setValue(V,null)}catch(fa){V.set("displayedValue",this.NLS_errorInvalid,!1)}}}))},this);this._attachmentEditor&&D.showAttachments&&this._attachmentEditor.showAttachments(this._currentFeature,y);(x=y.getEditSummary(x))?(this.editorTrackingInfoDiv.innerHTML=x,g.show(this.editorTrackingInfoDiv)):g.hide(this.editorTrackingInfoDiv)}}},_setFieldDomain:function(x,y,D){if(!x)return null;
var I=D.domain;y&&y.domains&&y.domains[D.name]&&!1===y.domains[D.name]instanceof l&&(I=y.domains[D.name]);if(!I)return null;I.codedValues&&0<I.codedValues.length?(x.set("store",this._toStore(z.map(I.codedValues,function(S){return{id:S.code+"",name:S.name}}))),this._setValue(x,I.codedValues[0].code+"")):(x.constraints={min:d.isDefined(I.minValue)?I.minValue:Number.MIN_VALUE,max:d.isDefined(I.maxValue)?I.maxValue:Number.MAX_VALUE},this._setValue(x,x.constraints.min));return I},_setValue:function(x,
y){x.set&&(x._onChangeActive=!1,x.set("value",y,!0),x._onChangeActive=!0)},_getFields:function(x){var y=x._getOutFields();if(!y)return null;x=x.fields;return"*"==y?x:z.filter(z.map(y,v.hitch(this,"_findFirst",x,"name")),d.isDefined)},_isInFields:function(x,y){return x&&(y||y.length)?z.some(y,function(D){return D.toLowerCase()===x.toLowerCase()}):!1},_isFieldNullable:function(x,y){return!(!1===x.nullable||y.field&&!1===y.field.nullable)},_isFieldRequired:function(x,y){return!1!==x.editable&&!1!==y.isEditable&&
!this._isFieldNullable(x,y)},_findFirst:function(x,y,D){return(x=z.filter(x,function(I){return I.hasOwnProperty(y)&&I[y]===D}))&&x.length?x[0]:null},_getLInfoFromFeatureLayer:function(x){return this._findFirst(this._layerInfos,"layerId",x?x.id:null)},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=a.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var x=a.create("tbody",null,this._attributes),y=this._currentLInfo,D=this._findFirst(y.types,
"id",this._currentFeature.attributes[y.typeIdField]);z.forEach(y.fieldInfos,v.hitch(this,"_createField",D,x),this);this._createOnlyFirstTime=!1},_createField:function(x,y,D){var I=this._currentLInfo,S=D.field;if(!this._isInFields(S.name,I.hideFields)&&!this._isInFields(S.name,this._editorTrackingInfos[I.featureLayer.id])){var Z=!1,U;y=a.create("tr",null,y);var aa=a.create("td",{innerHTML:D.label||S.alias||S.name,"class":this.css.label,"data-fieldname":S.name},y);this._isFieldRequired(S,D)&&a.create("span",
{"class":this.css.red,innerHTML:" *"},aa);y=a.create("td",null,y);if(D.customField){a.place(D.customField.domNode||D.customField,a.create("div",null,y),"first");var V=D.customField}else if(!1===I.isEditable||!1===S.editable||!1===D.isEditable||"esriFieldTypeOID"===S.type||"esriFieldTypeGlobalID"===S.type||!this._canUpdate&&!this._createOnlyFirstTime)Z=!0;I=I.typeIdField&&S.name.toLowerCase()==I.typeIdField.toLowerCase();aa=!!this._getDomainForField(S,x);!V&&I?V=this._createTypeField(S,D,y):!V&&aa&&
(V=this._createDomainField(S,D,x,y));if(!V)switch(S.type){case "esriFieldTypeString":V=this._createStringField(S,D,y);break;case "esriFieldTypeDate":V=this._createDateField(S,D,y);D.format&&D.format.time&&(U=this._createTimeField(S,D,y));break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":V=this._createIntField(S,D,y);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":V=this._createFltField(S,D,y);break;default:V=this._createStringField(S,D,y)}D.tooltip&&D.tooltip.length&&
this._toolTips.push(new P({connectId:[V.id],label:D.tooltip}));V.onChange=v.hitch(this,"onFieldValueChange",D);V.set("disabled",Z);U?(D.dijit=[V,U],U.onChange=v.hitch(this,"onFieldValueChange",D),U.set("disabled",Z)):D.dijit=V}},_createTypeField:function(x,y,D){D=a.create("div",null,D);var I=x.domain;return I&&"range"===I.type&&I.minValue===I.maxValue?new G({"class":this.css.field,trim:!0,maxLength:x.length,name:x.alias||x.name,required:this._isFieldRequired(x,y)},D):new O({"class":this.css.field,
name:x.alias||x.name,required:this._isFieldRequired(x,y),store:this._toStore(z.map(this._currentLInfo.types,function(S){return{id:S.id,name:S.name}})),searchAttr:"name"},D)},_getDomainForField:function(x,y){var D=x.domain;(x=x.name)&&y&&y.domains&&y.domains[x]&&!1===y.domains[x]instanceof l&&(D=y.domains[x]);return D||null},_createDomainField:function(x,y,D,I){D=this._getDomainForField(x,D);I=a.create("div",null,I);return D.codedValues?new O({"class":this.css.field,name:x.alias||x.name,searchAttr:"name",
required:this._isFieldRequired(x,y)},I):new e({"class":this.css.field},I)},_createStringField:function(x,y,D){D=a.create("div",null,D);var I={trim:!0,maxLength:x.length,required:this._isFieldRequired(x,y)};if(y.stringFieldOption===ea.STRING_FIELD_OPTION_TEXTAREA)return I["class"]=this.css.field+" "+this.css.textArea,new B(I,D);if(y.stringFieldOption===ea.STRING_FIELD_OPTION_RICHTEXT)return I["class"]=this.css.field+" "+this.css.richText,I.height="100%",I.width="100%",I.plugins=y.richTextPlugins||
this._defaultRichTextPlugins,D=new w(I,D),D.startup(),D;var S=this;I.validator=function(Z,U){this._maskValidSubsetError=!1;this._hasBeenBlurred=!0;return S._isFieldNullable(x,y)||!(""===Z||null===Z)};return new G(I,D)},_createTimeField:function(x,y,D){D=a.create("div",null,D);x={"class":this.css.field,trim:!0,required:this._isFieldRequired(x,y),constraints:{formatLength:"medium"}};this._datePackage&&(x.datePackage=this._datePackage);return new F(x,D)},_createDateField:function(x,y,D){D=a.create("div",
null,D);x={"class":this.css.field,trim:!0,required:this._isFieldRequired(x,y)};this._datePackage&&(x.datePackage=this._datePackage);return new W(x,D)},_createIntField:function(x,y,D){D=a.create("div",null,D);return new M({"class":this.css.field,constraints:"esriFieldTypeSmallInteger"===x.type?{min:-32768,max:32767,places:0}:{places:0},trim:!0,invalidMessage:this.NLS_validationInt,required:this._isFieldRequired(x,y)},D)},_createFltField:function(x,y,D){D=a.create("div",null,D);return new M({"class":this.css.field,
constraints:{max:Infinity,min:-Infinity,places:"0,20"},trim:!0,invalidMessage:this.NLS_validationFlt,required:this._isFieldRequired(x,y)},D)},_toStore:function(x){return new L({data:{identifier:"id",label:"name",items:x}})},_connect:function(x,y,D){this._aiConnects.push(u.connect(x,y,D))},_getDatePackage:function(x){return null===x.datePackage?null:x.datePackage?x.datePackage:"ar"===h.locale?"dojox.date.islamic":null},_destroyAttributeTable:function(){z.forEach(this._layerInfos,function(x){z.forEach(x.fieldInfos,
function(y){var D=y.dijit;if(D){D._onChangeHandle=null;if(y.customField)return;D instanceof Array?z.forEach(D,v.hitch(this,function(I){I.destroyRecursive?I.destroyRecursive():I.destroy&&I.destroy();I._onChangeHandle=null})):D.destroyRecursive?D.destroyRecursive():D.destroy&&D.destroy()}y.dijit=null},this)},this);z.forEach(this._toolTips,function(x){x.destroy()});this._toolTips=[];this._attributes&&a.destroy(this._attributes)}});v.mixin(ea,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",
STRING_FIELD_OPTION_TEXTBOX:"textbox"});f("extend-esri")&&v.setObject("dijit.AttributeInspector",ea,b);return ea})},"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),
function(E,v,z,u,n,h,f,c,a,b,d,g,l,A,t,m,k,p,r,w,H,J,K,R,X){function T(C){return new w({command:C.name})}function W(C){return new w({buttonClass:r,command:C.name})}z=z("dijit.Editor",R,{plugins:null,extraPlugins:null,constructor:function(){d.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",H]);this._plugins=
[];this._editInterval=1E3*this.editActionInterval;if(g("ie")||g("trident")||g("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new u;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);d.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=n.getLocalization("dijit._editor",
"commands",this.lang);g("webkit")&&a.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new m({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));v.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);f.add(this.iframe.parentNode,"dijitEditorIFrameContainer");f.add(this.iframe,"dijitEditorIFrame");h.set(this.iframe,"allowTransparency",
!0);this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){v.forEach(this._plugins,function(C){C&&C.destroy&&C.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(C,M){var O=d.isString(C)?{name:C}:d.isFunction(C)?{ctor:C}:C;if(!O.setEditor){var e={args:O,plugin:null,editor:this};O.name&&(w.registry[O.name]?e.plugin=w.registry[O.name](O):A.publish(X._scopeName+".Editor.getPlugin",e));if(!e.plugin)try{var q=
O.ctor||d.getObject(O.name)||E(O.name);q&&(e.plugin=new q(O))}catch(B){throw Error(this.id+": cannot find plugin ["+O.name+"]");}if(!e.plugin)throw Error(this.id+": cannot find plugin ["+O.name+"]");C=e.plugin}1<arguments.length?this._plugins[M]=C:this._plugins.push(C);C.setEditor(this);d.isFunction(C.setToolbar)&&C.setToolbar(this.toolbar)},resize:function(C){C&&p.prototype.resize.apply(this,arguments)},layout:function(){var C=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+c.getPadBorderExtents(this.iframe.parentNode).h+
c.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=C+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(C){var M,O=this.document.body,e=O.clientWidth,q=O.clientHeight,B=O.clientLeft,G=O.offsetWidth,F=O.offsetHeight,P=O.offsetLeft;/^rtl$/i.test(O.dir||"")?e<G&&C.x>e&&C.x<G&&(M=!0):C.x<B&&C.x>P&&(M=!0);M||q<F&&C.y>q&&C.y<F&&(M=!0);M||(delete this._cursorToStart,delete this._savedSelection,"BODY"==C.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(C){this.customUndo&&this.endEditing(!0);"BODY"!=C.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(C){this._inEditing||(this._inEditing=!0,this._beginEditing(C));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(C){if(!this.customUndo||
"undo"!=C&&"redo"!=C){this.customUndo&&(this.endEditing(),this._beginEditing());var M=this.inherited(arguments);this.customUndo&&this._endEditing();return M}return this[C]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(C){try{var M=this.document.execCommand(C,!1,null);if(g("webkit")&&!M)throw{};}catch(O){M=l.substitute,alert(M(this.commands.systemShortcut,
[this.commands[C],M(this.commands[g("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[C]])])),M=!1}return M},queryCommandEnabled:function(C){return!this.customUndo||"undo"!=C&&"redo"!=C?this.inherited(arguments):"undo"==C?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(C){var M=C.mark,O=C.mark;C=C.isCollapsed;var e;if(O)if(9>g("ie")||9===g("ie")&&g("quirks"))if(d.isArray(O))M=[],v.forEach(O,function(G){M.push(K.getNode(G,this.editNode))},this),this.selection.moveToBookmark({mark:M,
isCollapsed:C});else{if(O.startContainer&&O.endContainer&&(e=K.getSelection(this.window))&&e.removeAllRanges){e.removeAllRanges();C=K.create(this.window);var q=K.getNode(O.startContainer,this.editNode);var B=K.getNode(O.endContainer,this.editNode);q&&B&&(C.setStart(q,O.startOffset),C.setEnd(B,O.endOffset),e.addRange(C))}}else(e=K.getSelection(this.window))&&e.removeAllRanges&&(e.removeAllRanges(),C=K.create(this.window),q=K.getNode(O.startContainer,this.editNode),B=K.getNode(O.endContainer,this.editNode),
q&&B&&(C.setStart(q,O.startOffset),C.setEnd(B,O.endOffset),e.addRange(C)))},_changeToStep:function(C,M){this.setValue(M.text);(C=M.bookmark)&&this._moveToBookmark(C)},undo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var M=this._steps.pop();M&&0<this._steps.length&&(this.focus(),this._changeToStep(M,this._steps[this._steps.length-1]),this._undoedSteps.push(M),this.onDisplayChanged(),delete this._undoRedoActive,C=!0);delete this._undoRedoActive}return C},
redo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var M=this._undoedSteps.pop();M&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],M),this._steps.push(M),this.onDisplayChanged(),C=!0);delete this._undoRedoActive}return C},endEditing:function(C){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(C),this._inEditing=!1)},_getBookmark:function(){var C=this.selection.getBookmark(),
M=[];if(C&&C.mark){var O=C.mark;if(9>g("ie")||9===g("ie")&&g("quirks")){var e=K.getSelection(this.window);if(d.isArray(O))v.forEach(C.mark,function(B){M.push(K.getIndex(B,this.editNode).o)},this),C.mark=M;else if(e){var q;e.rangeCount&&(q=e.getRangeAt(0));C.mark=q?q.cloneRange():this.selection.getBookmark()}}try{C.mark&&C.mark.startContainer&&(M=K.getIndex(C.mark.startContainer,this.editNode).o,C.mark={startContainer:M,startOffset:C.mark.startOffset,endContainer:C.mark.endContainer===C.mark.startContainer?
M:K.getIndex(C.mark.endContainer,this.editNode).o,endOffset:C.mark.endOffset})}catch(B){C.mark=null}}return C},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:J.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var C=J.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:C,bookmark:this._getBookmark()})},onKeyDown:function(C){g("ie")||this.iframe||C.keyCode!=b.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var M=
C.keyCode;if(C.ctrlKey&&!C.shiftKey&&!C.altKey){if(90==M||122==M){C.stopPropagation();C.preventDefault();this.undo();return}if(89==M||121==M){C.stopPropagation();C.preventDefault();this.redo();return}}this.inherited(arguments);switch(M){case b.ENTER:case b.BACKSPACE:case b.DELETE:this.beginEditing();break;case 88:case 86:if(C.ctrlKey&&!C.altKey&&!C.metaKey){this.endEditing();88==C.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!C.ctrlKey&&!C.altKey&&
!C.metaKey&&(C.keyCode<b.F1||C.keyCode>b.F15)){this.beginEditing();break}case b.ALT:this.endEditing();break;case b.UP_ARROW:case b.DOWN_ARROW:case b.LEFT_ARROW:case b.RIGHT_ARROW:case b.HOME:case b.END:case b.PAGE_UP:case b.PAGE_DOWN:this.endEditing(!0);case b.CTRL:case b.SHIFT:case b.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(C){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(C){this.customUndo?this.isClosed?this.setValue(C):(this.beginEditing(),C||(C="\x26#160;"),this.setValue(C),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(C){this.setValueDeferred.then(d.hitch(this,function(){!this.disabled&&C||!this._buttonEnabledPlugins&&C?
v.forEach(this._plugins,function(M){M.set("disabled",!0)}):this.disabled&&!C&&v.forEach(this._plugins,function(M){M.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(a.set(this.document.body,"color",a.get(this.iframe,"color")),a.set(this.document.body,"background-color",a.get(this.iframe,"background-color")))}catch(C){}}});d.mixin(w.registry,{undo:T,redo:T,cut:T,copy:T,paste:T,insertOrderedList:T,insertUnorderedList:T,
indent:T,outdent:T,justifyCenter:T,justifyFull:T,justifyLeft:T,justifyRight:T,"delete":T,selectAll:T,removeFormat:T,unlink:T,insertHorizontalRule:T,bold:W,italic:W,underline:W,strikethrough:W,subscript:W,superscript:W,"|":function(){return new w({setEditor:function(C){this.editor=C;this.button=new k({ownerDocument:C.ownerDocument})}})}});return z})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(E,v,z,u,n,h,f,c){z("dijit-legacy-requires")&&n(0,function(){E(["dijit/ToolbarSeparator"])});return v("dijit.Toolbar",[h,c,f],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),
function(E,v,z,u,n,h,f,c,a,b){return v("dijit._KeyNavContainer",[a,b,c],{connectKeyNavHandlers:function(d,g){var l=this._keyNavCodes={},A=h.hitch(this,"focusPrev"),t=h.hitch(this,"focusNext");E.forEach(d,function(m){l[m]=A});E.forEach(g,function(m){l[m]=t});l[n.HOME]=h.hitch(this,"focusFirstChild");l[n.END]=h.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){u.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);E.forEach(this.getChildren(),
h.hitch(this,"_startupChild"))},addChild:function(d,g){this.inherited(arguments);this._startupChild(d)},_startupChild:function(d){d.set("tabIndex","-1")},_getFirst:function(){var d=this.getChildren();return d.length?d[0]:null},_getLast:function(){var d=this.getChildren();return d.length?d[d.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(d){return(d=
f.byNode(d))&&d.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(E,v,z,u,n,h,f,c){return v("dijit._KeyNavMixin",c,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);z.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var a=this._keyNavCodes={};a[u.HOME]=n.hitch(this,"focusFirstChild");a[u.END]=n.hitch(this,
"focusLastChild");a[this.isLeftToRight()?u.LEFT_ARROW:u.RIGHT_ARROW]=n.hitch(this,"_onLeftArrow");a[this.isLeftToRight()?u.RIGHT_ARROW:u.LEFT_ARROW]=n.hitch(this,"_onRightArrow");a[u.UP_ARROW]=n.hitch(this,"_onUpArrow");a[u.DOWN_ARROW]=n.hitch(this,"_onDownArrow")}var b=this;a="string"==typeof this.childSelector?this.childSelector:n.hitch(this,"childSelector");this.own(h(this.domNode,"keypress",n.hitch(this,"_onContainerKeypress")),h(this.domNode,"keydown",n.hitch(this,"_onContainerKeydown")),h(this.domNode,
"focus",n.hitch(this,"_onContainerFocus")),h(this.containerNode,h.selector(a,"focusin"),function(d){b._onChildFocus(f.getEnclosingWidget(this),d)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},
focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){z.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(a){z.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex",
"-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,b,d,g){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,b){var d=a.domNode;a=(a.label||(d.focusNode?
d.focusNode.label:"")||d.innerText||d.textContent||"").replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&a==b?-1:0},_isFormElement:function(a){return"INPUT"===a.tagName||"TEXTAREA"===a.tagName||"SELECT"===a.tagName||"BUTTON"===a.tagName},_onContainerKeydown:function(a){if(!this._isFormElement(document.activeElement)){var b=this._keyNavCodes[a.keyCode];b?(b(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode!=u.SPACE||!this._searchTimer||
a.ctrlKey||a.altKey||a.metaKey||(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))}},_onContainerKeypress:function(a){this._isFormElement(document.activeElement)||a.charCode<=u.SPACE||a.ctrlKey||a.altKey||a.metaKey||(a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase()))},_keyboardSearch:function(a,b){var d=null,g,l=0;n.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=b;var A=/^(.)\1*$/.test(this._searchString)?
1:this._searchString.length;g=this._searchString.substr(0,A);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var t=this.focusedChild||null;if(1==A||!t)if(t=this._getNextFocusableChild(t,1),!t)return;A=t;do{var m=this._keyboardSearchCompare(t,g);m&&0==l++&&(d=t);if(-1==m){l=-1;break}t=this._getNextFocusableChild(t,1)}while(t&&t!=A)})();this.onKeyboardSearch(d,a,g,l)},_onChildBlur:function(){},_getNextFocusableChild:function(a,b){var d=
a;do{if(a)a=this._getNext(a,b);else if(a=this[0<b?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=d&&a.isFocusable())return a}while(a!=d);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(a,b){if(a)for(a=a.domNode;a;)if((a=a[0>b?"previousSibling":"nextSibling"])&&"getAttribute"in a){var d=f.byNode(a);if(d)return d}return null}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(E,
v,z,u){return E("dijit.ToolbarSeparator",[z,u],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);v.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(E,v,z,u,n,h,f,c,a){return h("dijit.layout._LayoutWidget",
[v,z,u],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);f.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var b=this.getParent&&this.getParent();b&&b.isLayoutContainer||(this.resize(),this.own(n.on("resize",E.hitch(this,"resize"))))}},resize:function(b,d){var g=this.domNode;b&&c.setMarginBox(g,b);d=d||{};E.mixin(d,b||{});"h"in d&&"w"in d||(d=E.mixin(c.getMarginBox(g),d));
b=a.getComputedStyle(g);var l=c.getMarginExtents(g,b),A=c.getBorderExtents(g,b);d=this._borderBox={w:d.w-(l.w+A.w),h:d.h-(l.h+A.h)};l=c.getPadExtents(g,b);this._contentBox={l:a.toPixelValue(g,b.paddingLeft),t:a.toPixelValue(g,b.paddingTop),w:d.w-l.w,h:d.h-l.h};this.layout()},layout:function(){},_setupChild:function(b){f.add(b.domNode,this.baseClass+"-child "+(b.baseClass?this.baseClass+"-"+b.baseClass:""))},addChild:function(b,d){this.inherited(arguments);this._started&&this._setupChild(b)},removeChild:function(b){f.remove(b.domNode,
this.baseClass+"-child"+(b.baseClass?" "+this.baseClass+"-"+b.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(E,v){return E("dijit._Contained",null,{_getSibling:function(z){var u=this.getParent();return u&&u._getSiblingOfChild&&u._getSiblingOfChild(this,"previous"==z?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var z=
this.getParent();return z&&z.getIndexOfChild?z.getIndexOfChild(this):-1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(E,v,z,u,n){v=v("dijit._editor._Plugin",u,{constructor:function(h){this.params=h||{};z.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:n,disabled:!1,getLabel:function(h){return this.editor.commands[h]},
_initButton:function(){if(this.command.length){var h=this.getLabel(this.command),f=this.editor,c=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(h=z.mixin({label:h,ownerDocument:f.ownerDocument,dir:f.dir,lang:f.lang,showLabel:!1,iconClass:c,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete h.name,this.button=new this.buttonClass(h))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(h,f,c){this.own(E.connect(h,f,this,c))},updateState:function(){var h=this.editor,f=this.command;if(h&&h.isLoaded&&f.length){var c=this.get("disabled");if(this.button)try{var a=h._implCommand(f);var b=!c&&(this[a]?this[a](f):h.queryCommandEnabled(f));this.enabled!==b&&(this.enabled=b,this.button.set("disabled",!b));if(b&&"boolean"==typeof this.button.checked){var d=h.queryCommandState(f);
this.checked!==d&&(this.checked=d,this.button.set("checked",h.queryCommandState(f)))}}catch(g){console.log(g)}}},setEditor:function(h){this.editor=h;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",z.hitch(this.editor,"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",z.hitch(this,"updateState")))},setToolbar:function(h){this.button&&
h.addChild(this.button)},set:function(h,f){if("object"===typeof h){for(var c in h)this.set(c,h[c]);return this}c=this._getAttrNames(h);if(this[c.s])var a=this[c.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(h,f);return a||this},get:function(h){var f=this._getAttrNames(h);return this[f.g]?this[f.g]():this[h]},_setDisabledAttr:function(h){this._set("disabled",h);this.updateState()},_getAttrNames:function(h){var f=this._attrPairNames;if(f[h])return f[h];var c=h.charAt(0).toUpperCase()+
h.substr(1);return f[h]={s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(h,f){this[h]=f}});v.registry={};return v})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),function(E,v,z,u,n,h,f,c,a,b,d){return E("dijit._editor.plugins.EnterKeyHandling",a,{blockNodeForEnter:"BR",constructor:function(g){g&&("blockNodeForEnter"in g&&(g.blockNodeForEnter=
g.blockNodeForEnter.toUpperCase()),u.mixin(this,g))},setEditor:function(g){if(this.editor!==g)if(this.editor=g,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,g.onLoadDeferred.then(u.hitch(this,function(A){this.own(n(g.document,"keydown",u.hitch(this,function(t){if(t.keyCode==z.ENTER){var m=u.mixin({},t);m.shiftKey=!0;this.handleEnterKey(m)||(t.stopPropagation(),t.preventDefault())}})));9<=h("ie")&&10>=h("ie")&&this.own(n(g.document,"paste",u.hitch(this,function(t){setTimeout(u.hitch(this,
function(){var m=this.editor.document.selection.createRange();m.move("character",-1);m.select();m.move("character",1);m.select()}),0)})));return A}));else if(this.blockNodeForEnter){var l=u.hitch(this,"handleEnterKey");g.addKeyHandler(13,0,0,l);g.addKeyHandler(13,0,1,l);this.own(this.editor.on("KeyPressed",u.hitch(this,"onKeyPressed")))}},onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var g=this.editor.selection.getAncestorElement("LI");if(g){h("mozilla")&&
"LI"==g.parentNode.parentNode.nodeName&&(g=g.parentNode.parentNode);var l=g.firstChild;!l||1!=l.nodeType||"UL"!=l.nodeName&&"OL"!=l.nodeName||(g.insertBefore(l.ownerDocument.createTextNode("\u00a0"),l),l=d.create(this.editor.window),l.setStart(g.firstChild,0),g=d.getSelection(this.editor.window,!0),g.removeAllRanges(),g.addRange(l))}else b.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter),(g=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(g.innerHTML=
this.bogusHtmlContent,9>=h("ie")&&(g=this.editor.document.selection.createRange(),g.move("character",-1),g.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(g){var l,A=this.editor.document,
t;if(g.shiftKey){g=this.editor.selection.getParentElement();if(l=d.getAncestor(g,this.blockNodes)){if("LI"==l.tagName)return!0;g=d.getSelection(this.editor.window);var m=g.getRangeAt(0);m.collapsed||(m.deleteContents(),g=d.getSelection(this.editor.window),m=g.getRangeAt(0));if(d.atBeginningOfContainer(l,m.startContainer,m.startOffset)){var k=A.createElement("br");m=d.create(this.editor.window);l.insertBefore(k,l.firstChild);m.setStartAfter(k);g.removeAllRanges();g.addRange(m)}else if(d.atEndOfContainer(l,
m.startContainer,m.startOffset))m=d.create(this.editor.window),k=A.createElement("br"),l.appendChild(k),l.appendChild(A.createTextNode("\u00a0")),m.setStart(l.lastChild,0),g.removeAllRanges(),g.addRange(m);else{if((t=m.startContainer)&&3==t.nodeType){var p=t.nodeValue;var r=A.createTextNode(p.substring(0,m.startOffset));var w=A.createTextNode(p.substring(m.startOffset));l=A.createElement("br");""==w.nodeValue&&h("webkit")&&(w=A.createTextNode("\u00a0"));v.place(r,t,"after");v.place(l,r,"after");v.place(w,
l,"after");v.destroy(t);m=d.create(this.editor.window);m.setStart(w,0);g.removeAllRanges();g.addRange(m);return!1}return!0}}else g=d.getSelection(this.editor.window),g.rangeCount?(m=g.getRangeAt(0))&&m.startContainer&&(m.collapsed||(m.deleteContents(),g=d.getSelection(this.editor.window),m=g.getRangeAt(0)),(t=m.startContainer)&&3==t.nodeType?(l=m.startOffset,t.length<l&&(w=this._adjustNodeAndOffset(t,l),t=w.node,l=w.offset),p=t.nodeValue,r=A.createTextNode(p.substring(0,l)),w=A.createTextNode(p.substring(l)),
l=A.createElement("br"),w.length||(w=A.createTextNode("\u00a0")),r.length?v.place(r,t,"after"):r=t,v.place(l,r,"after"),v.place(w,l,"after"),v.destroy(t)):(0<=m.startOffset&&(k=t.childNodes[m.startOffset]),l=A.createElement("br"),w=A.createTextNode("\u00a0"),k?(v.place(l,k,"before"),v.place(w,l,"after")):(t.appendChild(l),t.appendChild(w))),m=d.create(this.editor.window),m.setStart(w,0),m.setEnd(w,w.length),g.removeAllRanges(),g.addRange(m),this.editor.selection.collapse(!0)):b.prototype.execCommand.call(this.editor,
"inserthtml","\x3cbr\x3e");return!1}var H=!0;g=d.getSelection(this.editor.window);m=g.getRangeAt(0);m.collapsed||(m.deleteContents(),g=d.getSelection(this.editor.window),m=g.getRangeAt(0));k=d.getBlockAncestor(m.endContainer,null,this.editor.editNode);var J=k.blockNode;if(this._checkListLater=J&&("LI"==J.nodeName||"LI"==J.parentNode.nodeName))return h("mozilla")&&(this._pressedEnterInBlock=J),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(J.innerHTML)&&
(J.innerHTML="",h("webkit")&&(m=d.create(this.editor.window),m.setStart(J,0),g.removeAllRanges(),g.addRange(m)),this._checkListLater=!1),!0;if(!k.blockNode||k.blockNode===this.editor.editNode){try{b.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(K){}k={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),blockContainer:this.editor.editNode};if(k.blockNode){if(k.blockNode!=this.editor.editNode&&!(k.blockNode.textContent||k.blockNode.innerHTML).replace(/^\s+|\s+$/g,
"").length)return this.removeTrailingBr(k.blockNode),!1}else k.blockNode=this.editor.editNode;g=d.getSelection(this.editor.window);m=g.getRangeAt(0)}J=A.createElement(this.blockNodeForEnter);J.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(k.blockNode);w=m.endOffset;H=m.endContainer;H.length<w&&(w=this._adjustNodeAndOffset(H,w),H=w.node,w=w.offset);if(d.atEndOfContainer(k.blockNode,H,w))k.blockNode===k.blockContainer?k.blockNode.appendChild(J):v.place(J,k.blockNode,"after"),H=!1,m=d.create(this.editor.window),
m.setStart(J,0),g.removeAllRanges(),g.addRange(m),this.editor.height&&c.scrollIntoView(J);else if(d.atBeginningOfContainer(k.blockNode,m.startContainer,m.startOffset))v.place(J,k.blockNode,k.blockNode===k.blockContainer?"first":"before"),J.nextSibling&&this.editor.height&&(m=d.create(this.editor.window),m.setStart(J.nextSibling,0),g.removeAllRanges(),g.addRange(m),c.scrollIntoView(J.nextSibling)),H=!1;else{k.blockNode===k.blockContainer?k.blockNode.appendChild(J):v.place(J,k.blockNode,"after");H=
!1;k.blockNode.style&&J.style&&k.blockNode.style.cssText&&(J.style.cssText=k.blockNode.style.cssText);if((t=m.startContainer)&&3==t.nodeType){w=m.endOffset;t.length<w&&(w=this._adjustNodeAndOffset(t,w),t=w.node,w=w.offset);p=t.nodeValue;r=A.createTextNode(p.substring(0,w));w=A.createTextNode(p.substring(w,p.length));v.place(r,t,"before");v.place(w,t,"after");v.destroy(t);for(m=r.parentNode;m!==k.blockNode;){p=A.createElement(m.tagName);m.style&&p.style&&m.style.cssText&&(p.style.cssText=m.style.cssText);
"FONT"===m.tagName&&(m.color&&(p.color=m.color),m.face&&(p.face=m.face),m.size&&(p.size=m.size));for(;w;)t=w.nextSibling,p.appendChild(w),w=t;v.place(p,m,"after");r=m;w=p;m=m.parentNode}if(1==w.nodeType||3==w.nodeType&&w.nodeValue)J.innerHTML="";for(r=w;w;)t=w.nextSibling,J.appendChild(w),w=t}m=d.create(this.editor.window);A=r;if("BR"!==this.blockNodeForEnter){for(;A;)l=A,A=t=A.firstChild;l&&l.parentNode?(J=l.parentNode,m.setStart(J,0),g.removeAllRanges(),g.addRange(m),this.editor.height&&c.scrollIntoView(J),
h("mozilla")&&(this._pressedEnterInBlock=k.blockNode)):H=!0}else m.setStart(J,0),g.removeAllRanges(),g.addRange(m),this.editor.height&&c.scrollIntoView(J),h("mozilla")&&(this._pressedEnterInBlock=k.blockNode)}return H},_adjustNodeAndOffset:function(g,l){for(;g.length<l&&g.nextSibling&&3==g.nextSibling.nodeType;)l-=g.length,g=g.nextSibling;return{node:g,offset:l}},removeTrailingBr:function(g){if(g=/P|DIV|LI/i.test(g.tagName)?g:this.editor.selection.getParentOfType(g,["P","DIV","LI"]))g.lastChild&&
(1<g.childNodes.length&&3==g.lastChild.nodeType&&/^[\s\xAD]*$/.test(g.lastChild.nodeValue)||"BR"==g.lastChild.tagName)&&v.destroy(g.lastChild),g.childNodes.length||(g.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(E,v,z,u,n,h,f,c,a,b,d,g,l,A,t,m,k,p,r,w,H,J,K,R,X,T,W,C,M){var O=z("dijit._editor.RichText",[K,R],{constructor:function(e){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};e&&l.isString(e.value)&&(this.value=e.value);this.onLoadDeferred=new u},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[l.trim,l.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);k("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));k("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(k("ie")||k("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[l.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[l.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);r.publish(M._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var e=l.hitch(this,function(G,F){return function(){return!this.execCommand(G,F)}}),q={b:e("bold"),i:e("italic"),u:e("underline"),a:e("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:e("formatblock",
"h1"),2:e("formatblock","h2"),3:e("formatblock","h3"),4:e("formatblock","h4"),"\\":e("insertunorderedlist")};k("ie")||(q.Z=e("redo"));for(var B in q)this.addKeyHandler(B,!0,!1,q[B])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(O._editorCommandsLocalized)this._local2NativeFormatNames=O._local2NativeFormatNames,this._native2LocalFormatNames=O._native2LocalFormatNames;else{O._editorCommandsLocalized=!0;O._local2NativeFormatNames={};
O._native2LocalFormatNames={};this._local2NativeFormatNames=O._local2NativeFormatNames;this._native2LocalFormatNames=O._native2LocalFormatNames;for(var e="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),q="",B,G=0;B=e[G++];)q="l"!==B.charAt(1)?q+("\x3c"+B+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+B+"\x3e\x3cbr/\x3e"):q+("\x3c"+B+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+B+"\x3e\x3cbr/\x3e");var F=c.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:q});this.ownerDocumentBody.appendChild(F);
e=l.hitch(this,function(){for(var P=F.firstChild;P;)try{this.selection.selectElement(P.firstChild);var L=P.tagName.toLowerCase();this._local2NativeFormatNames[L]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[L]]=L;P=P.nextSibling.nextSibling}catch(Q){}c.destroy(F)});this.defer(e)}},open:function(e){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new u;this.isClosed||this.close();r.publish(M._scopeName+"._editor.RichText::open",
this);1===arguments.length&&e.nodeName&&(this.domNode=e);var q=this.domNode;if(l.isString(this.value)){var B=this.value;q.innerHTML=""}else if(q.nodeName&&"textarea"==q.nodeName.toLowerCase()){var G=this.textarea=q;this.name=G.name;B=G.value;q=this.domNode=this.ownerDocument.createElement("div");q.setAttribute("widgetId",this.id);G.removeAttribute("widgetId");q.cssText=G.cssText;q.className+=" "+G.className;c.place(q,G,"before");var F=l.hitch(this,function(){b.set(G,{display:"block",position:"absolute",
top:"-1000px"});if(k("ie")){var N=G.style;this.__overflow=N.overflow;N.overflow="hidden"}});k("ie")?this.defer(F,10):F();if(G.form){var P=G.value;this.reset=function(){this.getValue()!==P&&this.replaceValue(P)};A(G.form,"submit",l.hitch(this,function(){h.set(G,"disabled",this.disabled);G.value=this.getValue()}))}}else B=W.getChildrenHtml(q),q.innerHTML="";this.value=B;q.nodeName&&"LI"===q.nodeName&&(q.innerHTML=" \x3cbr\x3e");this.header=q.ownerDocument.createElement("div");q.appendChild(this.header);
this.editingArea=q.ownerDocument.createElement("div");q.appendChild(this.editingArea);this.footer=q.ownerDocument.createElement("div");q.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!v.useXDomain||v.allowXdRichTextSave)){if((B=n.byId(M._scopeName+"._editor.RichText.value"))&&""!==B.value){F=B.value.split(this._SEPARATOR);for(var L=0,Q;Q=F[L++];)if(Q=Q.split(this._NAME_CONTENT_SEP),Q[0]===this.name){this.value=Q[1];F=F.splice(L,1);B.value=F.join(this._SEPARATOR);
break}}O._globalSaveHandler||(O._globalSaveHandler={},w.addOnUnload(function(){for(var N in O._globalSaveHandler){var ca=O._globalSaveHandler[N];l.isFunction(ca)&&ca()}}));O._globalSaveHandler[this.id]=l.hitch(this,"_saveContent")}this.isClosed=!1;B=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");B.id=this.id+"_iframe";B.style.border="none";B.style.width="100%";this._layoutMode?B.style.height="100%":7<=k("ie")?(this.height&&(B.style.height=this.height),this.minHeight&&(B.style.minHeight=
this.minHeight)):B.style.height=this.height?this.height:this.minHeight;B.frameBorder=0;B._loadFunc=l.hitch(this,function(N){this.window=N;this.document=N.document;this.selection=new X.SelectionManager(N);k("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});F=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");F=11>k("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+F+"');document.close()":"javascript: '"+
F+"'";this.editingArea.appendChild(B);B.src=F;"LI"===q.nodeName&&(q.lastChild.style.marginTop="-1.2em");f.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var e=b.getComputedStyle(this.domNode);if(this["aria-label"])var q=this["aria-label"];else{var B=t('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||n.byId(this["aria-labelledby"],this.ownerDocument);B&&(q=B.textContent||B.innerHTML||"")}B="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(q?" aria-label\x3d'"+p.escape(q)+"'":"")+"\x3e\x3c/div\x3e";var G=[e.fontWeight,e.fontSize,e.fontFamily].join(" "),F=e.lineHeight;F=0<=F.indexOf("px")?parseFloat(F)/parseFloat(e.fontSize):0<=F.indexOf("em")?parseFloat(F):"normal";var P="",L=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(Q){Q=Q.replace(/^;/ig,"")+";";var N=Q.split(":")[0];if(N){N=l.trim(N);N=N.toLowerCase();var ca,Y="";for(ca=0;ca<N.length;ca++){var ea=N.charAt(ca);switch(ea){case "-":ca++,ea=N.charAt(ca).toUpperCase();
default:Y+=ea}}b.set(L.domNode,Y,"")}P+=Q+";"});this.iframe.setAttribute("title",q);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||d.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",q?"\x3ctitle\x3e"+p.escape(q)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",G,";\n",this.height||k("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",F,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",k("ie")||k("trident")||k("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",q?" aria-label\x3d'"+p.escape(q)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+P+"'\x3e",B,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var e=[];this.styleSheets&&(e=this.styleSheets.split(";"),this.styleSheets=
"");e=e.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var q="",B=0,G,F=J.get(this.ownerDocument);G=e[B++];)G=(new H(F.location,G)).toString(),this.editingAreaStyleSheets.push(G),q+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+G+'"/\x3e';return q},addStyleSheet:function(e){var q=e.toString(),B=J.get(this.ownerDocument);if("."===q.charAt(0)||"/"!==q.charAt(0)&&!e.host)q=(new H(B.location,q)).toString();-1<E.indexOf(this.editingAreaStyleSheets,q)||(this.editingAreaStyleSheets.push(q),
this.onLoadDeferred.then(l.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(q);else{var G=this.document.getElementsByTagName("head")[0],F=this.document.createElement("link");F.rel="stylesheet";F.type="text/css";F.href=q;G.appendChild(F)}})))},removeStyleSheet:function(e){var q=e.toString(),B=J.get(this.ownerDocument);if("."===q.charAt(0)||"/"!==q.charAt(0)&&!e.host)q=(new H(B.location,q)).toString();e=E.indexOf(this.editingAreaStyleSheets,q);-1!==e&&(delete this.editingAreaStyleSheets[e],
t('link[href\x3d"'+q+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(e){e=!!e;this._set("disabled",e);if(this.isLoaded){var q=k("ie")&&(this.isLoaded||!this.focusOnLoad);q&&(this.editNode.unselectable="on");this.editNode.contentEditable=!e;this.editNode.tabIndex=e?"-1":this.tabIndex;q&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(k("mozilla")&&!e&&this._mozSettingProps){e=this._mozSettingProps;for(var B in e)if(e.hasOwnProperty(B))try{this.document.execCommand(B,
!1,e[B])}catch(G){}}this._disabledOK=!0}},onLoad:function(e){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=C.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var q=this;this.beforeIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){q.editNode.focus()};this.focusNode=
this.editNode;var B=this.events.concat(this.captureEvents),G=this.iframe?this.document:this.editNode;this.own.apply(this,E.map(B,function(F){var P=F.toLowerCase().replace(/^on/,"");return A(G,P,l.hitch(this,F))},this));this.own(A(G,"mouseup",l.hitch(this,"onClick")));k("ie")&&(this.own(A(this.document,"mousedown",l.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);k("webkit")&&(this._webkitListener=this.own(A(this.document,"mouseup",l.hitch(this,"onDisplayChanged")))[0],this.own(A(this.document,
"mousedown",l.hitch(this,function(F){F=F.target;!F||F!==this.document.body&&F!==this.document||this.defer("placeCursorAtEnd")}))));if(k("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(F){}this.isLoaded=!0;this.set("disabled",this.disabled);B=l.hitch(this,function(){this.setValue(e);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&m(l.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(B):B()},onKeyDown:function(e){if(e.keyCode===g.SHIFT||e.keyCode===g.ALT||e.keyCode===g.META||e.keyCode===g.CTRL)return!0;e.keyCode===g.TAB&&this.isTabIndent&&(e.stopPropagation(),e.preventDefault(),this.queryCommandEnabled(e.shiftKey?"outdent":"indent")&&this.execCommand(e.shiftKey?"outdent":"indent"));if(e.keyCode==g.TAB&&!this.isTabIndent&&!e.ctrlKey&&!e.altKey)return e.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>k("ie")&&e.keyCode===g.BACKSPACE&&"Control"===this.document.selection.type&&(e.stopPropagation(),e.preventDefault(),this.execCommand("delete"));k("ff")&&(e.keyCode===g.PAGE_UP||e.keyCode===g.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&e.preventDefault();var q=this._keyHandlers[e.keyCode],B=arguments;q&&!e.altKey&&E.some(q,function(G){if(!(G.shift^e.shiftKey||G.ctrl^(e.ctrlKey||e.metaKey)))return G.handler.apply(this,B)||e.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(e){d.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",e)},_setValueAttr:function(e){this.setValue(e)},_setDisableSpellCheckAttr:function(e){this.document?h.set(this.document.body,"spellcheck",!e):this.onLoadDeferred.then(l.hitch(this,function(){h.set(this.document.body,"spellcheck",!e)}));this._set("disableSpellCheck",e)},addKeyHandler:function(e,q,B,G){"string"==
typeof e&&(e=e.toUpperCase().charCodeAt(0));l.isArray(this._keyHandlers[e])||(this._keyHandlers[e]=[]);this._keyHandlers[e].push({shift:B||!1,ctrl:q||!1,handler:G})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(e){this.onDisplayChanged(e)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(e){(k("ie")||k("trident"))&&this.defer(function(){C.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var q=this.getValue(!0);if(q!==this.value)this.onChange(q);
this._set("value",q)},_onFocus:function(e){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!k("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>k("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(e,q){e=e.toLowerCase();"formatblock"===e?k("safari")&&void 0===q&&(e="heading"):"hilitecolor"!==e||k("mozilla")||(e="backcolor");return e},_implCommand:function(e){return"_"+this._normalizeCommand(e)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(e){var q=this._qcaCache[e];return void 0!==q?q:this._qcaCache[e]=this._queryCommandAvailable(e)},_queryCommandAvailable:function(e){switch(e.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return k("ie")||k("trident")||k("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!k("webkit");default:return!1}},execCommand:function(e,q){this.focused&&this.focus();e=this._normalizeCommand(e,q);if(void 0!==q){if("heading"===e)throw Error("unimplemented");"formatblock"===
e&&(k("ie")||k("trident"))&&(q="\x3c"+q+"\x3e")}var B="_"+e+"Impl";if(this[B])var G=this[B](q);else if((q=1<arguments.length?q:null)||"createlink"!==e)G=this.document.execCommand(e,!1,q);this.onDisplayChanged();return G},queryCommandEnabled:function(e){if(this.disabled||!this._disabledOK)return!1;e=this._normalizeCommand(e);var q=this._implCommand(e);return this[q]?this[q](e):this._browserQueryCommandEnabled(e)},queryCommandState:function(e){if(this.disabled||!this._disabledOK)return!1;e=this._normalizeCommand(e);
try{return this.document.queryCommandState(e)}catch(q){return!1}},queryCommandValue:function(e){if(this.disabled||!this._disabledOK)return!1;e=this._normalizeCommand(e);if(k("ie")&&"formatblock"===e)e=this._native2LocalFormatNames[this.document.queryCommandValue(e)];else if(k("mozilla")&&"hilitecolor"===e){try{var q=this.document.queryCommandValue("styleWithCSS")}catch(B){q=!1}this.document.execCommand("styleWithCSS",!1,!0);e=this.document.queryCommandValue(e);this.document.execCommand("styleWithCSS",
!1,q)}else e=this.document.queryCommandValue(e);return e},_sCall:function(e,q){return this.selection[e].apply(this.selection,q)},placeCursorAtStart:function(){this.focus();var e=!1;if(k("mozilla"))for(var q=this.editNode.firstChild;q;){if(3===q.nodeType){if(0<q.nodeValue.replace(/^\s+|\s+$/g,"").length){e=!0;this.selection.selectElement(q);break}}else if(1===q.nodeType){e=!0;var B=q.tagName?q.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(B)?this.selection.selectElement(q):
this.selection.selectElementChildren(q);break}q=q.nextSibling}else e=!0,this.selection.selectElementChildren(this.editNode);e&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var e=!1;if(k("mozilla"))for(var q=this.editNode.lastChild;q;){if(3===q.nodeType){if(0<q.nodeValue.replace(/^\s+|\s+$/g,"").length){e=!0;this.selection.selectElement(q);break}}else if(1===q.nodeType){e=!0;this.selection.selectElement(q.lastChild||q);break}q=q.previousSibling}else e=!0,this.selection.selectElementChildren(this.editNode);
e&&this.selection.collapse(!1)},getValue:function(e){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,e):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(e){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){e=this._preFilterContent(e);var q=this.isClosed?this.domNode:this.editNode;q.innerHTML=e;this._preDomFilterContent(q)}else this.textarea.value=e;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(l.hitch(this,function(){this.setValue(e)}))},replaceValue:function(e){this.isClosed?this.setValue(e):this.window&&this.window.getSelection&&!k("mozilla")?this.setValue(e):this.window&&this.window.getSelection?(e=this._preFilterContent(e),this.execCommand("selectall"),this.execCommand("inserthtml",e),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(e);this._set("value",this.getValue(!0))},_preFilterContent:function(e){var q=
e;E.forEach(this.contentPreFilters,function(B){B&&(q=B(q))});return q},_preDomFilterContent:function(e){e=e||this.editNode;E.forEach(this.contentDomPreFilters,function(q){q&&l.isFunction(q)&&q(e)},this)},_postFilterContent:function(e,q){if(l.isString(e))var B=e;else e=e||this.editNode,this.contentDomPostFilters.length&&(q&&(e=l.clone(e)),E.forEach(this.contentDomPostFilters,function(G){e=G(e)})),B=W.getChildrenHtml(e);l.trim(B.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(B="");E.forEach(this.contentPostFilters,
function(G){B=G(B)});return B},_saveContent:function(){var e=n.byId(M._scopeName+"._editor.RichText.value");e&&(e.value&&(e.value+=this._SEPARATOR),e.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(e,q){e=e.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");q||(e=e.replace(/'/gm,"\x26#39;"));return e},getNodeHtml:function(e){d.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return W.getNodeHtml(e)},getNodeChildrenHtml:function(e){d.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return W.getChildrenHtml(e)},close:function(e){if(!this.isClosed){arguments.length||(e=!0);e&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);k("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var q=this.textarea.style;q.position="";q.left=q.top="";k("ie")&&(q.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;c.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;f.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);O._globalSaveHandler&&delete O._globalSaveHandler[this.id]},_removeMozBogus:function(e){return e.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(e){e=e.replace(/\sclass="webkit-block-placeholder"/gi,"");e=e.replace(/\sclass="apple-style-span"/gi,
"");return e=e.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(e){return e.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(e){return e.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(e){if(!e)return!1;
if(k("ie")||k("trident")||k("edge"))return this.focused&&!this.disabled;var q=9>k("ie")?this.document.selection.createRange():this.document;try{return q.queryCommandEnabled(e)}catch(B){return!1}},_createlinkEnabledImpl:function(){var e=!0;return e=k("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var e=!0;return e=k("mozilla")||k("webkit")||k("ie")||k("trident")||k("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var e=!0;return e=k("mozilla")||k("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var e=!0;k("webkit")?((e=this.window.getSelection())&&(e=e.toString()),e=!!e):e=this._browserQueryCommandEnabled("cut");return e},_copyEnabledImpl:function(){var e=!0;k("webkit")?((e=this.window.getSelection())&&(e=e.toString()),e=!!e):e=this._browserQueryCommandEnabled("copy");
return e},_pasteEnabledImpl:function(){var e=!0;return k("webkit")?!0:e=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(e){return k("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,e)},_unlinkImpl:function(e){return this.queryCommandEnabled("unlink")&&(k("mozilla")||k("webkit"))?(e=this.selection.getAncestorElement("a"),this.selection.selectElement(e),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,e)},_hilitecolorImpl:function(e){if(!this._handleTextColorOrProperties("hilitecolor",e))if(k("mozilla")){this.document.execCommand("styleWithCSS",!1,!0);console.log("Executing color command.");var q=this.document.execCommand("hilitecolor",!1,e);this.document.execCommand("styleWithCSS",!1,!1)}else q=this.document.execCommand("hilitecolor",!1,e);return q},_backcolorImpl:function(e){k("ie")&&(e=e?e:null);var q=this._handleTextColorOrProperties("backcolor",e);q||(q=this.document.execCommand("backcolor",
!1,e));return q},_forecolorImpl:function(e){k("ie")&&(e=e?e:null);var q=!1;(q=this._handleTextColorOrProperties("forecolor",e))||(q=this.document.execCommand("forecolor",!1,e));return q},_inserthtmlImpl:function(e){e=this._preFilterContent(e);var q=!0;if(9>k("ie")){var B=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var G=B.item(0);B.length;)B.remove(B.item(0));G.outerHTML=e}else B.pasteHTML(e);B.select()}else if(8>k("trident")){var F=T.getSelection(this.window);
if(F&&F.rangeCount&&F.getRangeAt){B=F.getRangeAt(0);B.deleteContents();var P=c.create("div");P.innerHTML=e;for(G=this.document.createDocumentFragment();e=P.firstChild;)var L=G.appendChild(e);B.insertNode(G);L&&(B=B.cloneRange(),B.setStartAfter(L),B.collapse(!1),F.removeAllRanges(),F.addRange(B))}}else k("mozilla")&&!e.length?this.selection.remove():q=this.document.execCommand("inserthtml",!1,e);return q},_boldImpl:function(e){var q=!1;if(k("ie")||k("trident"))this._adaptIESelection(),q=this._adaptIEFormatAreaAndExec("bold");
q||(q=this.document.execCommand("bold",!1,e));return q},_italicImpl:function(e){var q=!1;if(k("ie")||k("trident"))this._adaptIESelection(),q=this._adaptIEFormatAreaAndExec("italic");q||(q=this.document.execCommand("italic",!1,e));return q},_underlineImpl:function(e){var q=!1;if(k("ie")||k("trident"))this._adaptIESelection(),q=this._adaptIEFormatAreaAndExec("underline");q||(q=this.document.execCommand("underline",!1,e));return q},_strikethroughImpl:function(e){var q=!1;if(k("ie")||k("trident"))this._adaptIESelection(),
q=this._adaptIEFormatAreaAndExec("strikethrough");q||(q=this.document.execCommand("strikethrough",!1,e));return q},_superscriptImpl:function(e){var q=!1;if(k("ie")||k("trident"))this._adaptIESelection(),q=this._adaptIEFormatAreaAndExec("superscript");q||(q=this.document.execCommand("superscript",!1,e));return q},_subscriptImpl:function(e){var q=!1;if(k("ie")||k("trident"))this._adaptIESelection(),q=this._adaptIEFormatAreaAndExec("subscript");q||(q=this.document.execCommand("subscript",!1,e));return q},
_fontnameImpl:function(e){if(k("ie")||k("trident"))var q=this._handleTextColorOrProperties("fontname",e);q||(q=this.document.execCommand("fontname",!1,e));return q},_fontsizeImpl:function(e){if(k("ie")||k("trident"))var q=this._handleTextColorOrProperties("fontsize",e);q||(q=this.document.execCommand("fontsize",!1,e));return q},_insertorderedlistImpl:function(e){var q=!1;if(k("ie")||k("trident")||k("edge"))q=this._adaptIEList("insertorderedlist",e);q||(q=this.document.execCommand("insertorderedlist",
!1,e));return q},_insertunorderedlistImpl:function(e){var q=!1;if(k("ie")||k("trident")||k("edge"))q=this._adaptIEList("insertunorderedlist",e);q||(q=this.document.execCommand("insertunorderedlist",!1,e));return q},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(e){var q=0;if(e&&e.childNodes){var B;for(B=0;B<e.childNodes.length;B++){var G=a.position(e.childNodes[B]);
q+=G.h}}return q},_isNodeEmpty:function(e,q){return 1===e.nodeType?0<e.childNodes.length?this._isNodeEmpty(e.childNodes[0],q):!0:3===e.nodeType?""===e.nodeValue.substring(q):!1},_removeStartingRangeFromRange:function(e,q){if(e.nextSibling)q.setStart(e.nextSibling,0);else{for(e=e.parentNode;e&&null==e.nextSibling;)e=e.parentNode;e&&q.setStart(e.nextSibling,0)}return q},_adaptIESelection:function(){var e=T.getSelection(this.window);if(e&&e.rangeCount&&!e.isCollapsed){for(var q=e.getRangeAt(0),B=q.startContainer,
G=q.startOffset;3===B.nodeType&&G>=B.length&&B.nextSibling;)G-=B.length,B=B.nextSibling;for(var F=null;this._isNodeEmpty(B,G)&&B!==F;)F=B,q=this._removeStartingRangeFromRange(B,q),B=q.startContainer,G=0;e.removeAllRanges();e.addRange(q)}},_adaptIEFormatAreaAndExec:function(e){var q=T.getSelection(this.window),B=this.document,G;if(e&&q&&q.isCollapsed){if(this.queryCommandValue(e)){e=this._tagNamesForCommand(e);var F=q.getRangeAt(0);var P=F.startContainer;if(3===P.nodeType){var L=F.endOffset;P.length<
L&&(L=this._adjustNodeAndOffset(Q,L),P=L.node,L=L.offset)}for(;P&&P!==this.editNode;){var Q=P.tagName?P.tagName.toLowerCase():"";if(-1<E.indexOf(e,Q)){var N=P;break}P=P.parentNode}if(N&&(Q=F.startContainer,e=B.createElement(N.tagName),c.place(e,N,"after"),Q&&3===Q.nodeType)){L=F.endOffset;Q.length<L&&(L=this._adjustNodeAndOffset(Q,L),Q=L.node,L=L.offset);P=Q.nodeValue;F=B.createTextNode(P.substring(0,L));var ca=P.substring(L,P.length);ca&&(G=B.createTextNode(ca));c.place(F,Q,"before");if(G){var Y=
B.createElement("span");Y.className="ieFormatBreakerSpan";c.place(Y,Q,"after");c.place(G,Y,"after");G=Y}c.destroy(Q);L=F.parentNode;for(Q=[];L!==N;){P=L.tagName;F={tagName:P};Q.push(F);P=B.createElement(P);L.style&&P.style&&L.style.cssText&&(P.style.cssText=L.style.cssText,F.cssText=L.style.cssText);"FONT"===L.tagName&&(L.color&&(P.color=L.color,F.color=L.color),L.face&&(P.face=L.face,F.face=L.face),L.size&&(P.size=L.size,F.size=L.size));L.className&&(P.className=L.className,F.className=L.className);
if(G)for(;G;)F=G.nextSibling,P.appendChild(G),G=F;P.tagName==L.tagName?(Y=B.createElement("span"),Y.className="ieFormatBreakerSpan",c.place(Y,L,"after"),c.place(P,Y,"after")):c.place(P,L,"after");F=L;G=P;L=L.parentNode}if(G){if(1===G.nodeType||3===G.nodeType&&G.nodeValue)e.innerHTML="";for(;G;)F=G.nextSibling,e.appendChild(G),G=F}if(Q.length){F=Q.pop();G=B.createElement(F.tagName);F.cssText&&G.style&&(G.style.cssText=F.cssText);F.className&&(G.className=F.className);"FONT"===F.tagName&&(F.color&&
(G.color=F.color),F.face&&(G.face=F.face),F.size&&(G.size=F.size));for(c.place(G,e,"before");Q.length;)F=Q.pop(),N=B.createElement(F.tagName),F.cssText&&N.style&&(N.style.cssText=F.cssText),F.className&&(N.className=F.className),"FONT"===F.tagName&&(F.color&&(N.color=F.color),F.face&&(N.face=F.face),F.size&&(N.size=F.size)),G.appendChild(N),G=N;N=B.createTextNode(".");Y.appendChild(N);G.appendChild(N)}else Y=B.createElement("span"),Y.className="ieFormatBreakerSpan",N=B.createTextNode("."),Y.appendChild(N),
c.place(Y,e,"before");G=T.create(this.window);G.setStart(N,0);G.setEnd(N,N.length);q.removeAllRanges();q.addRange(G);this.selection.collapse(!1);N.parentNode.innerHTML="";e.firstChild||c.destroy(e);return!0}return!1}F=q.getRangeAt(0);if((Q=F.startContainer)&&3===Q.nodeType)return L=F.startOffset,Q.length<L&&(L=this._adjustNodeAndOffset(Q,L),Q=L.node,L=L.offset),P=Q.nodeValue,F=B.createTextNode(P.substring(0,L)),ca=P.substring(L),""!==ca&&(G=B.createTextNode(P.substring(L))),Y=B.createElement("span"),
N=B.createTextNode("."),Y.appendChild(N),F.length?c.place(F,Q,"after"):F=Q,c.place(Y,F,"after"),G&&c.place(G,Y,"after"),c.destroy(Q),G=T.create(this.window),G.setStart(N,0),G.setEnd(N,N.length),q.removeAllRanges(),q.addRange(G),B.execCommand(e),c.place(Y.firstChild,Y,"before"),c.destroy(Y),G.setStart(N,0),G.setEnd(N,N.length),q.removeAllRanges(),q.addRange(G),this.selection.collapse(!1),N.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(e){var q=T.getSelection(this.window);if(q.isCollapsed&&
q.rangeCount&&!this.queryCommandValue(e)){var B=q.getRangeAt(0),G=B.startContainer;if(G&&3==G.nodeType&&!B.startOffset)return B="ul","insertorderedlist"===e&&(B="ol"),e=this.document.createElement(B),B=c.create("li",null,e),c.place(e,G,"before"),B.appendChild(G),c.create("br",null,e,"after"),e=T.create(this.window),e.setStart(G,0),e.setEnd(G,G.length),q.removeAllRanges(),q.addRange(e),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(e,q){var B=T.getSelection(this.window),
G=this.document,F,P;q=q||null;if(e&&B&&B.isCollapsed&&B.rangeCount){var L=B.getRangeAt(0);if((F=L.startContainer)&&3===F.nodeType){var Q=L.startOffset;F.length<Q&&(L=this._adjustNodeAndOffset(F,Q),F=L.node,Q=L.offset);var N=F.nodeValue;L=G.createTextNode(N.substring(0,Q));""!==N.substring(Q)&&(P=G.createTextNode(N.substring(Q)));N=G.createElement("span");Q=G.createTextNode(".");N.appendChild(Q);G=G.createElement("span");N.appendChild(G);L.length?c.place(L,F,"after"):L=F;c.place(N,L,"after");P&&c.place(P,
N,"after");c.destroy(F);F=T.create(this.window);F.setStart(Q,0);F.setEnd(Q,Q.length);B.removeAllRanges();B.addRange(F);if(k("webkit")){B="color";if("hilitecolor"===e||"backcolor"===e)B="backgroundColor";b.set(N,B,q);this.selection.remove();c.destroy(G);N.innerHTML="\x26#160;";this.selection.selectElement(N);this.focus()}else this.execCommand(e,q),c.place(N.firstChild,N,"before"),c.destroy(N),F.setStart(Q,0),F.setEnd(Q,Q.length),B.removeAllRanges(),B.addRange(F),this.selection.collapse(!1),Q.parentNode.removeChild(Q);
return!0}}return!1},_adjustNodeAndOffset:function(e,q){for(;e.length<q&&e.nextSibling&&3===e.nextSibling.nodeType;)q-=e.length,e=e.nextSibling;return{node:e,offset:q}},_tagNamesForCommand:function(e){return"bold"===e?["b","strong"]:"italic"===e?["i","em"]:"strikethrough"===e?["s","strike"]:"superscript"===e?["sup"]:"subscript"===e?["sub"]:"underline"===e?["u"]:[]},_stripBreakerNodes:function(e){if(this.isLoaded)return t(".ieFormatBreakerSpan",e).forEach(function(q){for(;q.firstChild;)c.place(q.firstChild,
q,"before");c.destroy(q)}),e},_stripTrailingEmptyNodes:function(e){function q(B){return/^(p|div|br)$/i.test(B.nodeName)&&0==B.children.length&&/^[\s\xA0]*$/.test(B.textContent||B.innerText||"")||3===B.nodeType&&/^[\s\xA0]*$/.test(B.nodeValue)}for(;e.lastChild&&q(e.lastChild);)c.destroy(e.lastChild);return e},_setTextDirAttr:function(e){this._set("textDir",e);this.onLoadDeferred.then(l.hitch(this,function(){this.editNode.dir=e}))}});return O})},"dijit/_editor/range":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang"],function(E,v,z){var u={getIndex:function(f,c){for(var a=[],b=[],d=f,g,l;f!=c;){var A=0;for(g=f.parentNode;l=g.childNodes[A++];)if(l===f){--A;break}a.unshift(A);b.unshift(A-g.childNodes.length);f=g}if(0<a.length&&3==d.nodeType){for(l=d.previousSibling;l&&3==l.nodeType;)a[a.length-1]--,l=l.previousSibling;for(l=d.nextSibling;l&&3==l.nodeType;)b[b.length-1]++,l=l.nextSibling}return{o:a,r:b}},getNode:function(f,c){if(!z.isArray(f)||0==f.length)return c;var a=c;
E.every(f,function(b){if(0<=b&&b<a.childNodes.length)a=a.childNodes[b];else return a=null,!1;return!0});return a},getCommonAncestor:function(f,c,a){a=a||f.ownerDocument.body;var b=function(l){for(var A=[];l;)if(A.unshift(l),l!==a)l=l.parentNode;else break;return A};f=b(f);c=b(c);b=Math.min(f.length,c.length);for(var d=f[0],g=1;g<b;g++)if(f[g]===c[g])d=f[g];else break;return d},getAncestor:function(f,c,a){for(a=a||f.ownerDocument.body;f&&f!==a;){var b=f.nodeName.toUpperCase();if(c.test(b))return f;
f=f.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(f,c,a){a=a||f.ownerDocument.body;c=c||u.BlockTagNames;for(var b=null,d;f&&f!==a;){var g=f.nodeName.toUpperCase();!b&&c.test(g)&&(b=f);!d&&/^(?:BODY|TD|TH|CAPTION)$/.test(g)&&(d=f);f=f.parentNode}return{blockNode:b,blockContainer:d||f.ownerDocument.body}},atBeginningOfContainer:function(f,c,a){var b=!1,d=0==a;d||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(0,a))&&(d=
!0);if(d)for(b=!0;c&&c!==f;){if(c.previousSibling){b=!1;break}c=c.parentNode}return b},atEndOfContainer:function(f,c,a){var b=!1,d=a==(c.length||c.childNodes.length);d||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(a))&&(d=!0);if(d)for(b=!0;c&&c!==f;){if(c.nextSibling){b=!1;break}c=c.parentNode}return b},adjacentNoneTextNode:function(f,c){var a=f;f=0-f.length||0;for(c=c?"nextSibling":"previousSibling";a&&3==a.nodeType;)f+=a.length,a=a[c];return[a,f]},create:function(f){f=f||window;return f.getSelection?
f.document.createRange():new h},getSelection:function(f,c){if(f.getSelection)return f.getSelection();f=new n.selection(f);c||f._getCurrentSelection();return f}};if(!window.getSelection)var n=u.ie={cachedSelection:{},selection:function(f){this._ranges=[];this.addRange=function(c,a){this._ranges.push(c);a||c._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(c){return this._ranges[c]};this._getCurrentSelection=function(){this.removeAllRanges();
var c=f.document.selection.createRange();c="CONTROL"==f.document.selection.type.toUpperCase()?new h(n.decomposeControlRange(c)):new h(n.decomposeTextRange(c));this.addRange(c,!0),this.isCollapsed=c.collapsed}},decomposeControlRange:function(f){var c=f.item(0),a=f.item(f.length-1);f=c.parentNode;var b=a.parentNode;c=u.getIndex(c,f).o[0];a=u.getIndex(a,b).o[0]+1;return[f,c,b,a]},getEndPoint:function(f,c){var a=f.duplicate();a.collapse(!c);var b="EndTo"+(c?"End":"Start"),d=a.parentElement(),g;if(0<d.childNodes.length)E.every(d.childNodes,
function(t,m){if(3!=t.nodeType)if(a.moveToElementText(t),0<a.compareEndPoints(b,f))if(g&&3==g.nodeType){l=g;var k=!0}else return l=d,A=m,!1;else{if(m==d.childNodes.length-1)return l=d,A=d.childNodes.length,!1}else m==d.childNodes.length-1&&(l=t,k=!0);if(k&&l)return l=(t=u.adjacentNoneTextNode(l)[0])?t.nextSibling:d.firstChild,m=u.adjacentNoneTextNode(l),t=m[0],m=m[1],t?(a.moveToElementText(t),a.collapse(!1)):a.moveToElementText(d),a.setEndPoint(b,f),A=a.text.length-m,!1;g=t;return!0});else{var l=
d;var A=0}c||1!=l.nodeType||A!=l.childNodes.length||(c=l.nextSibling)&&3==c.nodeType&&(l=c,A=0);return[l,A]},setEndPoint:function(f,c,a){f=f.duplicate();var b;if(3!=c.nodeType)if(0<a){if(b=c.childNodes[a-1])if(3==b.nodeType)c=b,a=b.length;else if(b.nextSibling&&3==b.nextSibling.nodeType)c=b.nextSibling,a=0;else{f.moveToElementText(b.nextSibling?b:c);var d=b.parentNode;b=d.insertBefore(b.ownerDocument.createTextNode(" "),b.nextSibling);f.collapse(!1);d.removeChild(b)}}else f.moveToElementText(c),f.collapse(!0);
3==c.nodeType&&(b=u.adjacentNoneTextNode(c),d=b[0],b=b[1],d?(f.moveToElementText(d),f.collapse(!1),"inherit"!=d.contentEditable&&b++):(f.moveToElementText(c.parentNode),f.collapse(!0),f.move("character",1),f.move("character",-1)),a+=b,0<a&&f.move("character",a)!=a&&console.error("Error when moving!"));return f},decomposeTextRange:function(f){var c=n.getEndPoint(f),a=c[0],b=c[1],d=c[0];c=c[1];f.htmlText.length&&(f.htmlText==f.text?c=b+f.text.length:(c=n.getEndPoint(f,!0),d=c[0],c=c[1]));return[a,b,
d,c]},setRange:function(f,c,a,b,d,g){c=n.setEndPoint(f,c,a);f.setEndPoint("StartToStart",c);if(!g)var l=n.setEndPoint(f,b,d);f.setEndPoint("EndToEnd",l||c);return f}},h=u.W3CRange=v(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?u.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(f,c){c=parseInt(c);if(this.startContainer!==f||this.startOffset!=c)delete this._cachedBookmark,this.startContainer=f,this.startOffset=c,this.endContainer?this._updateInternal():this.setEnd(f,c)},setEnd:function(f,c){c=parseInt(c);if(this.endContainer!==f||this.endOffset!=c)delete this._cachedBookmark,
this.endContainer=f,this.endOffset=c,this.startContainer?this._updateInternal():this.setStart(f,c)},setStartAfter:function(f,c){this._setPoint("setStart",f,c,1)},setStartBefore:function(f,c){this._setPoint("setStart",f,c,0)},setEndAfter:function(f,c){this._setPoint("setEnd",f,c,1)},setEndBefore:function(f,c){this._setPoint("setEnd",f,c,0)},_setPoint:function(f,c,a,b){a=u.getIndex(c,c.parentNode).o;this[f](c.parentNode,a.pop()+b)},_getIERange:function(){var f=(this._body||this.endContainer.ownerDocument.body).createTextRange();
n.setRange(f,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return f},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var f=this.startContainer,c=this._getIERange();3!==f.nodeType||this.startOffset||this.setStartBefore(f);c.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var f=new h([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);f._body=this._body;return f},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});z.setObject("dijit.range",u);return u})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(E,v,z){var u={};v.setObject("dijit._editor.html",u);var n=u.escapeXml=function(h,f){h=h.replace(/&/gm,"\x26amp;").replace(/</gm,
"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");f||(h=h.replace(/'/gm,"\x26#39;"));return h};u.getNodeHtml=function(h){var f=[];u.getNodeHtmlHelper(h,f);return f.join("")};u.getNodeHtmlHelper=function(h,f){switch(h.nodeType){case 1:var c=h.nodeName.toLowerCase();if(!c||"/"==c.charAt(0))return"";f.push("\x3c",c);var a=[],b={},d;if(z("dom-attributes-explicit")||z("dom-attributes-specified-flag"))for(var g=0;d=h.attributes[g++];){var l=d.name;"_dj"===l.substr(0,3)||z("dom-attributes-specified-flag")&&
!d.specified||l in b||(d=d.value,("src"==l||"href"==l)&&h.getAttribute("_djrealurl")&&(d=h.getAttribute("_djrealurl")),8===z("ie")&&"style"===l&&(d=d.replace("HEIGHT:","height:").replace("WIDTH:","width:")),a.push([l,d]),b[l]=d)}else{var A=(/^input$|^img$/i.test(h.nodeName)?h:h.cloneNode(!1)).outerHTML;b=A.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);A=A.substr(0,A.indexOf("\x3e"));E.forEach(b,function(t){if(t){var m=t.indexOf("\x3d");if(0<m&&(t=t.substring(0,m),"_dj"!=t.substr(0,3)))if("src"!=t&&"href"!=
t||!h.getAttribute("_djrealurl")){switch(t){case "style":var k=h.style.cssText.toLowerCase();break;case "class":k=h.className;break;case "width":if("img"===c){(m=/width=(\S+)/i.exec(A))&&(k=m[1]);break}case "height":if("img"===c){(m=/height=(\S+)/i.exec(A))&&(k=m[1]);break}default:k=h.getAttribute(t)}null!=k&&a.push([t,k.toString()])}else a.push([t,h.getAttribute("_djrealurl")])}},this)}a.sort(function(t,m){return t[0]<m[0]?-1:t[0]==m[0]?0:1});for(b=0;d=a[b++];)f.push(" ",d[0],'\x3d"',"string"===
typeof d[1]?n(d[1],!0):d[1],'"');switch(c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":f.push(" /\x3e");break;case "script":f.push("\x3e",h.innerHTML,"\x3c/",c,"\x3e");break;default:f.push("\x3e"),h.hasChildNodes()&&u.getChildrenHtmlHelper(h,f),f.push("\x3c/",c,"\x3e")}break;case 4:case 3:f.push(n(h.nodeValue,!0));break;case 8:f.push("\x3c!--",n(h.nodeValue,!0),"--\x3e");break;default:f.push("\x3c!-- Element not recognized - Type: ",h.nodeType," Name: ",
h.nodeName,"--\x3e")}};u.getChildrenHtml=function(h){var f=[];u.getChildrenHtmlHelper(h,f);return f.join("")};u.getChildrenHtmlHelper=function(h,f){if(h)for(var c=h.childNodes||h,a=!z("ie")||c!==h,b,d=0;b=c[d++];)a&&b.parentNode!=h||u.getNodeHtmlHelper(b,f)};return u})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(E,v,z,u,n,h,f,c,a,b,d,g,l){var A=z("dijit._editor.plugins.LinkDialog",d,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:g,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=h.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(m){E("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),h.hitch(this,function(k,p,r){var w=this;this.tag="insertImage"==this.command?"img":"a";k=h.delegate(k.getLocalization("dijit","common",this.lang),k.getLocalization("dijit._editor",
"LinkDialog",this.lang));var H=this.dropDown=this.button.dropDown=new p({title:k[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:h.hitch(this,"setValue"),onOpen:function(){w._onOpenDialog();p.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(h.hitch(w,"_onCloseDialog"),0)}});k.urlRegExp=this.urlRegExp;k.id=r.getUniqueId(this.editor.id);this._uniqueId=k.id;this._setContent(H.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
b.substitute(this.linkDialogTemplate,k));H.startup();this._urlInput=r.byId(this._uniqueId+"_urlInput");this._textInput=r.byId(this._uniqueId+"_textInput");this._setButton=r.byId(this._uniqueId+"_setButton");this.own(r.byId(this._uniqueId+"_cancelButton").on("click",h.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",h.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",h.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=h.hitch(this,function(){var J=this._urlInput.get("value");return this._urlRegExp.test(J)||this._emailRegExp.test(J)});this.own(f(H.domNode,"keydown",h.hitch(this,h.hitch(this,function(J){!J||J.keyCode!=n.ENTER||J.shiftKey||J.metaKey||J.ctrlKey||J.altKey||this._setButton.get("disabled")||(H.onExecute(),H.execute(H.get("value")))}))));m()}))},_checkAndFixInput:function(){var m=this,k=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var p=k,r=!1,w=!1;p&&1<p.length&&(p=h.trim(p),0!==p.indexOf("mailto:")&&(0<p.indexOf("/")?-1===p.indexOf("://")&&"/"!==p.charAt(0)&&p.indexOf("./")&&0!==p.indexOf("../")&&m._hostRxp.test(p)&&(r=!0):m._userAtRxp.test(p)&&(w=!0)));r&&m._urlInput.set("value","http://"+p);w&&m._urlInput.set("value","mailto:"+p);m._setButton.set("disabled",!m._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(h.hitch(this,
function(){this.own(f(this.editor.editNode,"mouseup",h.hitch(this,"_onMouseUp")));this.own(f(this.editor.editNode,"dblclick",h.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(m){this.dropDown.set({parserScope:"dojo",content:m})},_checkValues:function(m){m&&m.urlInput&&(m.urlInput=m.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&m&&m.textInput&&("function"===typeof this.linkFilter?m.textInput=this.linkFilter(m.textInput):
v.forEach(this.linkFilter,function(k){m.textInput=m.textInput.replace(k[0],k[1])}));return m},_createlinkEnabledImpl:function(){return!0},setValue:function(m){this._onCloseDialog();if(9>c("ie")){var k=l.getSelection(this.editor.window).getRangeAt(0).endContainer;3===k.nodeType&&(k=k.parentNode);k&&k.nodeName&&k.nodeName.toLowerCase()!==this.tag&&(k=this.editor.selection.getSelectedElement(this.tag));k&&k.nodeName&&k.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(k),
this.editor.execCommand("unlink"))}m=this._checkValues(m);this.editor.execCommand("inserthtml",b.substitute(this.htmlTemplate,m));a("a",this.editor.document).forEach(function(p){p.innerHTML||u.has(p,"name")||p.parentNode.removeChild(p)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(m){if(m&&m.tagName.toLowerCase()===this.tag){var k=m.getAttribute("_djrealurl")||m.getAttribute("href");var p=m.getAttribute("target")||"_self";var r=m.textContent||
m.innerText;this.editor.selection.selectElement(m,!0)}else r=this.editor.selection.getSelectedText();return{urlInput:k||"",textInput:r||"",targetSelect:p||""}},_onOpenDialog:function(){if(c("ie")){var m=l.getSelection(this.editor.window);if(m.rangeCount){var k=m.getRangeAt(0);var p=k.endContainer;3===p.nodeType&&(p=p.parentNode);p&&p.nodeName&&p.nodeName.toLowerCase()!==this.tag&&(p=this.editor.selection.getSelectedElement(this.tag));if(!p||p.nodeName&&p.nodeName.toLowerCase()!==this.tag)(m=this.editor.selection.getAncestorElement(this.tag))&&
m.nodeName&&m.nodeName.toLowerCase()==this.tag?(p=m,this.editor.selection.selectElement(p)):k.startContainer===k.endContainer&&(m=k.startContainer.firstChild)&&m.nodeName&&m.nodeName.toLowerCase()==this.tag&&(p=m,this.editor.selection.selectElement(p))}}else p=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(p))},_onDblClick:function(m){if(m&&m.target&&(m=m.target,(m.tagName?m.tagName.toLowerCase():
"")===this.tag&&u.get(m,"href"))){var k=this.editor;this.editor.selection.selectElement(m);k.onDisplayChanged();k._updateTimer&&(k._updateTimer.remove(),delete k._updateTimer);k.onNormalizedDisplayChanged();var p=this.button;setTimeout(function(){p.set("disabled",!1);p.loadAndOpenDropDown().then(function(){p.dropDown.focus&&p.dropDown.focus()})},10)}},_onMouseUp:function(){if(c("ff")){var m=this.editor.selection.getAncestorElement(this.tag);if(m){var k=l.getSelection(this.editor.window).getRangeAt(0);
if(k.collapsed&&m.childNodes.length){var p=k.cloneRange();p.selectNodeContents(m.childNodes[m.childNodes.length-1]);p.setStart(m.childNodes[0],0);1!==k.compareBoundaryPoints(p.START_TO_START,p)?k.setStartBefore(m):-1!==k.compareBoundaryPoints(p.END_TO_START,p)&&k.setStartAfter(m)}}}}}),t=z("dijit._editor.plugins.ImgLinkDialog",[A],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(m){if(m&&m.tagName.toLowerCase()===this.tag){var k=m.getAttribute("_djrealurl")||m.getAttribute("src");var p=m.getAttribute("alt");this.editor.selection.selectElement(m,!0)}else p=this.editor.selection.getSelectedText();return{urlInput:k||"",textInput:p||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(h.hitch(this,function(){this.own(f(this.editor.editNode,"mousedown",h.hitch(this,"_selectTag")))}))},_selectTag:function(m){m&&m.target&&(m=m.target,(m.tagName?m.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(m))},_checkValues:function(m){m&&m.urlInput&&(m.urlInput=m.urlInput.replace(/"/g,"\x26quot;"));m&&m.textInput&&(m.textInput=m.textInput.replace(/"/g,"\x26quot;"));return m},_onDblClick:function(m){if(m&&m.target&&(m=m.target,(m.tagName?
m.tagName.toLowerCase():"")===this.tag&&u.get(m,"src"))){var k=this.editor;this.editor.selection.selectElement(m);k.onDisplayChanged();k._updateTimer&&(k._updateTimer.remove(),delete k._updateTimer);k.onNormalizedDisplayChanged();var p=this.button;setTimeout(function(){p.set("disabled",!1);p.loadAndOpenDropDown().then(function(){p.dropDown.focus&&p.dropDown.focus()})},10)}}});d.registry.createLink=function(m){var k={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in m?m.allowUnsafeHtml:!1};
"linkFilter"in m&&(k.linkFilter=m.linkFilter);return new A(k)};d.registry.insertImage=function(){return new t({command:"insertImage"})};A.ImgLinkDialog=t;return A})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),function(E,v,z,u,n,h){var f=z("dijit._editor.plugins.TextColor",n,{buttonClass:h,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;
this.inherited(arguments);var c=this;this.button.loadDropDown=function(a){function b(d){c.button.dropDown=new d({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,value:c.value,onChange:function(g){c.editor.execCommand(c.command,g)},onExecute:function(){c.editor.execCommand(c.command,this.get("value"))}});a()}"string"==typeof c.colorPicker?E([c.colorPicker],b):b(c.colorPicker)}},updateState:function(){var c=this.editor,a=this.command;if(c&&c.isLoaded&&a.length){if(this.button){var b=this.get("disabled");
this.button.set("disabled",b);if(b)return;try{var d=c.queryCommandValue(a)||""}catch(g){d=""}}""==d&&(d="#000000");"transparent"==d&&(d="#ffffff");"string"==typeof d?-1<d.indexOf("rgb")&&(d=v.fromRgb(d).toHex()):(d=((d&255)<<16|d&65280|(d&16711680)>>>16).toString(16),d="#000000".slice(0,7-d.length)+d);this.value=d;(c=this.button.dropDown)&&c.get&&d!==c.get("value")&&c.set("value",d,!1)}}});n.registry.foreColor=function(c){return new f(c)};n.registry.hiliteColor=function(c){return new f(c)};return f})},
"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(E,v,z,u){var n={};v.setObject("dojo.colors",n);var h=function(c,a,b){0>b&&++b;1<b&&--b;var d=6*b;return 1>d?c+(a-c)*d:1>2*b?a:2>3*b?c+(a-c)*(2/3-b)*6:c};E.colorFromRgb=z.fromRgb=function(c,a){var b=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){c=b[2].split(/\s*,\s*/);var d=c.length;b=b[1];if("rgb"==b&&3==d||"rgba"==b&&4==d)return b=c[0],"%"==b.charAt(b.length-1)?(b=u.map(c,
function(A){return 2.56*parseFloat(A)}),4==d&&(b[3]=c[3]),z.fromArray(b,a)):z.fromArray(c,a);if("hsl"==b&&3==d||"hsla"==b&&4==d){b=(parseFloat(c[0])%360+360)%360/360;var g=parseFloat(c[1])/100,l=parseFloat(c[2])/100;g=.5>=l?l*(g+1):l+g-l*g;l=2*l-g;b=[256*h(l,g,b+1/3),256*h(l,g,b),256*h(l,g,b-1/3),1];4==d&&(b[3]=c[3]);return z.fromArray(b,a)}}return null};var f=function(c,a,b){c=Number(c);return isNaN(c)?b:c<a?a:c>b?b:c};z.prototype.sanitize=function(){this.r=Math.round(f(this.r,0,255));this.g=Math.round(f(this.g,
0,255));this.b=Math.round(f(this.b,0,255));this.a=f(this.a,0,1);return this};n.makeGrey=z.makeGrey=function(c,a){return z.fromArray([c,c,c,a])};v.mixin(z.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,
149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,
0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],
lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return z})},"esri/dijit/editing/AttachmentEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/kernel dojo/has dojo/query dojo/io-query dojo/dom-attr dijit/_Widget dijit/_Templated dijit/ProgressBar ../../kernel ../../lang ../../domUtils dojo/text!./templates/AttachmentEditor.html dojo/i18n!../../nls/jsapi dojo/NodeList-dom".split(" "),
function(E,v,z,u,n,h,f,c,a,b,d,g,l,A,t,m,k){E=E([b,d],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:!0,templateString:m,_listHtml:"\x3cspan id\x3d'node_${oid}_${attid}' style\x3d'display: flex;'\x3e\x3ca href\x3d'${href}' target\x3d'_blank'\x3e${name}\x3c/a\x3e",_deleteBtnHtml:"\x3cspan style\x3d'cursor:pointer;color:red;font-weight:bold;padding:0 2px;' class\x3d'deleteAttachment' id\x3d'${attid}');'\x3eX\x3c/span\x3e",_endHtml:"\x3cbr/\x3e\x3c/span\x3e",_aeConnects:[],_layerEditingCapChecked:{},
_layerEditingCap:{},constructor:function(p,r){v.mixin(this,k.widgets.attachmentEditor)},startup:function(){this.inherited(arguments);this._uploadField_connect=z.connect(this._uploadField,"onchange",this,function(){0<this._uploadField.value.length&&this._addAttachment()});this._uploadFieldFocus_connect=z.connect(this._uploadField,"onfocus",v.hitch(this,function(p){t.hide(this._attachmentError)}))},destroy:function(){u.forEach(this._aeConnects,z.disconnect);z.disconnect(this._uploadField_connect);z.disconnect(this._uploadFieldFocus_connect);
this.inherited(arguments)},showAttachments:function(p,r){this._attachmentList.innerHTML=this.NLS_none;this._uploadField.value="";u.forEach(this.domNode.children,function(w,H){t.show(w)});t.hide(this._attachmentError);p&&(this._featureLayer=p.getLayer()||r)&&("esri.layers.FeatureLayer"===this._featureLayer.declaredClass&&this._featureLayer.getEditCapabilities?(this._currentLayerId=this._featureLayer.id,this._layerEditingCapChecked[this._currentLayerId]||(this._layerEditingCap[this._currentLayerId]=
this._featureLayer.getEditCapabilities(),this._layerEditingCapChecked[this._currentLayerId]=!0),this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:p}).canUpdate,this._oid=p.attributes[this._featureLayer.objectIdField],this._getAttachments(p)):r&&r.getEditCapabilities()||(t.hide(this._uploadForm),u.forEach(this.domNode.children,function(w,H){t.hide(w)})))},_getAttachments:function(p){this._featureLayer&&this._featureLayer.queryAttachmentInfos&&this._featureLayer.queryAttachmentInfos(this._oid,
v.hitch(this,"_onQueryAttachmentInfosComplete"))},_addAttachment:function(){t.hide(this._attachmentError);this._featureLayer&&this._featureLayer.addAttachment?(t.show(this._attachmentProgress),this._featureLayer.addAttachment(this._oid,this._uploadForm,v.hitch(this,"_onAddAttachmentComplete"),v.hitch(this,"_onAddAttachmentError"))):this._tempUpload=this._uploadForm},_chainAttachment:function(p,r){this._tempUpload&&(t.show(this._attachmentProgress),r.addAttachment(p,this._tempUpload,v.hitch(this,"_onAddAttachmentComplete"),
v.hitch(this,"_onAddAttachmentError")));this._tempUpload=null},_deleteAttachment:function(p,r){t.show(this._attachmentProgress);this._featureLayer.deleteAttachments(p,[r],v.hitch(this,"_onDeleteAttachmentComplete"))},_onQueryAttachmentInfosComplete:function(p){var r=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate||!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate?
(r=this._listHtml+this._endHtml,this._uploadForm.style.display="none"):this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate&&(r=this._listHtml+this._endHtml);var w=this._attachmentList;p=u.map(p,v.hitch(this,function(H){return A.substitute({href:H.url,name:H.name,oid:H.objectId,attid:H.id},r)}));w.innerHTML=p.join("")||this.NLS_none;this._updateConnects()},_onAddAttachmentComplete:function(p){t.hide(this._attachmentProgress.domNode);var r=this._attachmentList,
w=this._uploadField,H=w.value,J=H.lastIndexOf("\\");-1<J&&(H=H.substring(J+1,H.length));H=H.replace(/ /g,"_");J=c.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var K=this._listHtml+this._deleteBtnHtml+this._endHtml;this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate&&(K=this._listHtml+this._endHtml);p=A.substitute({href:this._featureLayer._url.path+"/"+p.objectId+"/attachments/"+p.attachmentId+
(J?"?"+J:""),name:H,oid:p.objectId,attid:p.attachmentId},K);r.innerHTML=r.innerHTML==this.NLS_none?p:r.innerHTML+p;this._updateConnects();w.value=""},_onAddAttachmentError:function(p){t.hide(this._attachmentProgress.domNode);if(p){var r=this.NLS_error,w=this._attachmentError;A.isDefined(p.code)&&400===p.code&&(r=this.NLS_fileNotSupported);a.set(w,"innerHTML",r);t.show(w)}},_onDeleteAttachmentComplete:function(p){t.hide(this._attachmentProgress.domNode);var r=this._attachmentList;u.every(p,function(w){return w.success})&&
(n.query("#node_"+p[0].objectId+"_"+p[0].attachmentId).orphan(),r.children&&r.children.length||(r.innerHTML=this.NLS_none))},_updateConnects:function(){u.forEach(this._aeConnects,z.disconnect);n.query(".deleteAttachment").forEach(function(p){this._aeConnects.push(z.connect(p,"onclick",v.hitch(this,"_deleteAttachment",this._oid,p.id)))},this)}});h("extend-esri")&&v.setObject("dijit.editing.AttachmentEditor",E,l);return E})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),
function(E,v,z,u,n,h,f,c){return v("dijit.ProgressBar",[h,f],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:c,_indeterminateHighContrastImagePath:E.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());
this.update()},_setDirAttr:function(a){var b="rtl"==a.toLowerCase();z.toggle(this.domNode,"dijitProgressBarRtl",b);z.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&b);this.inherited(arguments)},update:function(a){u.mixin(this,a||{});a=this.internalProgress;var b=this.domNode,d=1;this.indeterminate?b.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(d=Math.min(parseFloat(this.progress)/100,1),this.progress=d*this.maximum):(this.progress=Math.min(this.progress,
this.maximum),d=this.maximum?this.progress/this.maximum:0),b.setAttribute("aria-valuenow",this.progress));b.setAttribute("aria-labelledby",this.labelNode.id);b.setAttribute("aria-valuemin",0);b.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(d);z.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);z.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight());a.style.width=100*d+"%";this.onChange()},_setValueAttr:function(a){this._set("value",
a);Infinity==a?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:a})},_setLabelAttr:function(a){this._set("label",a);this.update()},_setIndeterminateAttr:function(a){this._set("indeterminate",a);this.update()},report:function(a){return this.label?this.label:this.indeterminate?"\x26#160;":n.format(a,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],
function(E,v,z,u){var n={};n={findFeatures:function(h,f,c){var a=f.objectIdField;f=v.filter(f.graphics,function(b){return v.some(h,function(d){return b.attributes[a]===d.objectId})});if(c)c(f);else return f},getSelection:function(h){var f=[];v.forEach(h,function(c){c=c.getSelectedFeatures();v.forEach(c,function(a){f.push(a)})});return f},sortFeaturesById:function(h,f){var c=v.map(h,function(a){return a.featureLayer});f.sort(function(a,b){var d=a.getLayer(),g=b.getLayer();if(!d)return-1;if(!g)return 1;
var l=v.indexOf(c,d);g=v.indexOf(c,g);l-=g;l||(d=d.objectIdField,l=a.attributes[d]-b.attributes[d]);return l});return f}};z("extend-esri")&&E.setObject("dijit.editing.Util.LayerHelper",n,u);return n})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(E,v,z){return E("dijit.form.DateTextBox",z,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:v,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(E,v,z,u,n,h,f,c,a,b,d,g,l,A,t,m,k){var p=u("dijit.Calendar",[l,A,t],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(r){c.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",r)},_createMonthWidget:function(){return new p._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:b.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",b.hitch(this,"_onKeyDown")),d(this.dateRowsNode,"mouseover",b.hitch(this,"_onDayMouseOver")),d(this.dateRowsNode,"mouseout",b.hitch(this,"_onDayMouseOut")),d(this.dateRowsNode,"mousedown",b.hitch(this,"_onDayMouseDown")),d(this.dateRowsNode,"mouseup",b.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(r){var w=
new this.dateClassObj(this.currentFocus);w.setDate(1);w.setMonth(r);r=this.dateModule.getDaysInMonth(w);var H=this.currentFocus.getDate();w.setDate(Math.min(H,r));this._setCurrentFocusAttr(w)},_onDayMouseOver:function(r){(r=h.contains(r.target,"dijitCalendarDateLabel")?r.target.parentNode:r.target)&&(r.dijitDateValue&&!h.contains(r,"dijitCalendarDisabledDate")||r==this.previousYearLabelNode||r==this.nextYearLabelNode)&&(h.add(r,"dijitCalendarHoveredDate"),this._currentNode=r)},_onDayMouseOut:function(r){!this._currentNode||
r.relatedTarget&&r.relatedTarget.parentNode==this._currentNode||(r="dijitCalendarHoveredDate",h.contains(this._currentNode,"dijitCalendarActiveDate")&&(r+=" dijitCalendarActiveDate"),h.remove(this._currentNode,r),this._currentNode=null)},_onDayMouseDown:function(r){(r=r.target.parentNode)&&r.dijitDateValue&&!h.contains(r,"dijitCalendarDisabledDate")&&(h.add(r,"dijitCalendarActiveDate"),this._currentNode=r)},_onDayMouseUp:function(r){(r=r.target.parentNode)&&r.dijitDateValue&&h.remove(r,"dijitCalendarActiveDate")},
handleKey:function(r){var w=-1,H=this.currentFocus;switch(r.keyCode){case a.RIGHT_ARROW:w=1;case a.LEFT_ARROW:var J="day";this.isLeftToRight()||(w*=-1);break;case a.DOWN_ARROW:w=1;case a.UP_ARROW:J="week";break;case a.PAGE_DOWN:w=1;case a.PAGE_UP:J=r.ctrlKey||r.altKey?"year":"month";break;case a.END:H=this.dateModule.add(H,"month",1),J="day";case a.HOME:H=new this.dateClassObj(H);H.setDate(1);break;default:return!0}J&&(H=this.dateModule.add(H,J,w));this._setCurrentFocusAttr(H);return!1},_onKeyDown:function(r){this.handleKey(r)||
(r.stopPropagation(),r.preventDefault())},onValueSelected:function(){},onChange:function(r){this.onValueSelected(r)},getClassForDate:function(){}});p._MonthDropDownButton=u("dijit.Calendar._MonthDropDownButton",k,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new p._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(r){var w=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,r);this.dropDown.set("months",
w);this.containerNode.innerHTML=(6==g("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+w[r.getMonth()]+"\x3c/div\x3e"}});p._MonthDropDown=u("dijit.Calendar._MonthDropDown",[A,m,t],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(r){this.domNode.innerHTML=
"";E.forEach(r,function(w,H){f.create("div",{className:"dijitCalendarMonthLabel",month:H,innerHTML:w},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(r){this.onChange(n.get(r.target,"month"))},onChange:function(){}});return p})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/dom-attr dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(E,v,z,u,n,h,f,c,a,b,d,g,l,A,t,m){var k=v("dijit.CalendarLite",[A,t],{templateString:m,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(p){return p&&!isNaN(p)&&"object"==typeof p&&p.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var p=this._get("value");if(p&&!isNaN(p)){var r=
new this.dateClassObj(p);r.setHours(0,0,0,0);r.getDate()<p.getDate()&&(r=this.dateModule.add(r,"hour",1));return r}return null},_setValueAttr:function(p,r){"string"==typeof p&&(p=h.fromISOString(p));p=this._patchDate(p);if(this._isValidDate(p)&&!this.isDisabledDate(p,this.lang)){if(this._set("value",p),this.set("currentFocus",p),this._markSelectedDates([p]),this._created&&(r||"undefined"==typeof r))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(p){if(p||
0===p)p=new this.dateClassObj(p),p.setHours(1,0,0,0);return p},_setText:function(p,r){for(;p.firstChild;)p.removeChild(p.firstChild);p.appendChild(p.ownerDocument.createTextNode(r))},_populateGrid:function(){var p=new this.dateClassObj(this.currentFocus);p.setDate(1);p=this._patchDate(p);var r=p.getDay(),w=this.dateModule.getDaysInMonth(p),H=this.dateModule.getDaysInMonth(this.dateModule.add(p,"month",-1)),J=new this.dateClassObj,K=0<=this.dayOffset?this.dayOffset:z.getFirstDayOfWeek(this.lang);K>
r&&(K-=7);if(!this.summary){var R=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,p);this.gridNode.setAttribute("summary",R[p.getMonth()])}this._date2cell={};E.forEach(this.dateCells,function(X,T){var W=T+K,C=new this.dateClassObj(p),M="dijitCalendar",O=0;W<r?(W=H-r+W+1,O=-1,M+="Previous"):W>=r+w?(W=W-r-w+1,O=1,M+="Next"):(W=W-r+1,M+="Current");O&&(C=this.dateModule.add(C,"month",O));C.setDate(W);this.dateModule.compare(C,J,"date")||(M="dijitCalendarCurrentDate "+M);this.isDisabledDate(C,
this.lang)?(M="dijitCalendarDisabledDate "+M,X.setAttribute("aria-disabled","true")):(M="dijitCalendarEnabledDate "+M,X.removeAttribute("aria-disabled"),X.setAttribute("aria-selected","false"));(O=this.getClassForDate(C,this.lang))&&(M=O+" "+M);X.className=M+"Month dijitCalendarDateTemplate";M=C.valueOf();this._date2cell[M]=X;X.dijitDateValue=M;M=C.getDateLocalized?C.getDateLocalized(this.lang):C.getDate();this._setText(this.dateLabels[T],M);a.set(X,"aria-label",n.format(C,{selector:"date",formatLength:"long"}))},
this)},_populateControls:function(){var p=new this.dateClassObj(this.currentFocus);p.setDate(1);this.monthWidget.set("month",p);var r=p.getFullYear()-1,w=new this.dateClassObj;E.forEach(["previous","current","next"],function(H){w.setFullYear(r++);this._setText(this[H+"YearLabelNode"],this.dateLocaleModule.format(w,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(p){this.dateModule=p.datePackage?b.getObject(p.datePackage,
!1):u;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=p.datePackage?b.getObject(p.datePackage+".locale",!1):n},_createMonthWidget:function(){return k._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var p=this.dowTemplateString,r=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),w=0<=this.dayOffset?this.dayOffset:z.getFirstDayOfWeek(this.lang);this.dayCellsHtml=l.substitute([p,
p,p,p,p,p,p].join(""),{d:""},function(){return r[w++%7]});p=l.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[p,p,p,p,p,p].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);f.setSelectable(this.domNode,!1);p=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",p,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var p=b.hitch(this,function(r,
w,H){this[r].dojoClick=!0;return d(this[r],"click",b.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,w,H))}))});this.own(p("incrementMonth","month",1),p("decrementMonth","month",-1),p("nextYearLabelNode","year",1),p("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(p,r){var w=this.currentFocus,H=this._getNodeByDate(w);p=this._patchDate(p);this._set("currentFocus",p);this._date2cell&&0==this.dateModule.difference(w,p,"month")||(this._populateGrid(),
this._populateControls(),this._markSelectedDates([this.value]));p=this._getNodeByDate(p);p.setAttribute("tabIndex",this.tabIndex);(this.focused||r)&&p.focus();H&&H!=p&&(g("webkit")?H.setAttribute("tabIndex","-1"):H.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(p){p.stopPropagation();p.preventDefault();for(p=p.target;p&&!p.dijitDateValue&&0!==p.dijitDateValue;p=p.parentNode);p&&!c.contains(p,"dijitCalendarDisabledDate")&&this.set("value",
p.dijitDateValue)},_getNodeByDate:function(p){return(p=this._patchDate(p))&&this._date2cell?this._date2cell[p.valueOf()]:null},_markSelectedDates:function(p){function r(w,H){c.toggle(H,"dijitCalendarSelectedDate",w);H.setAttribute("aria-selected",w?"true":"false")}E.forEach(this._selectedCells||[],b.partial(r,!1));this._selectedCells=E.filter(E.map(p,this._getNodeByDate,this),function(w){return w});E.forEach(this._selectedCells,b.partial(r,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});
k._MonthWidget=v("dijit.CalendarLite._MonthWidget",A,{_setMonthAttr:function(p){var r=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,p),w=6==g("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+E.map(r,function(H){return"\x3cdiv\x3e"+H+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=w+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+r[p.getMonth()]+"\x3c/div\x3e"}});return k})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(E,v,z,u,n,h,f,c){new Date("X");return u("dijit.form._DateTimeTextBox",[h,f],{templateString:c,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:v.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(a,b){var d=this._isInvalidDate(a),g=this._isInvalidDate(b);if(d||g)return d&&g?0:d?-1:1;a=this.format(a,this._unboundedConstraints);b=this.format(b,this._unboundedConstraints);
d=this.parse(a,this._unboundedConstraints);g=this.parse(b,this._unboundedConstraints);return a==b?0:E.compare(d,g,this._selector)},autoWidth:!0,format:function(a,b){return a?this.dateLocaleModule.format(a,b):""},parse:function(a,b){return this.dateLocaleModule.parse(a,b)||(this._isEmpty(a)?null:void 0)},serialize:function(a,b){a.toGregorian&&(a=a.toGregorian());return z.toISOString(a,b)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){a=
a||{};this.dateModule=a.datePackage?n.getObject(a.datePackage,!1):E;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=a.datePackage?n.getObject(a.datePackage+".locale",!1):v;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector;a.fullYear=!0;var b=z.fromISOString;"string"==typeof a.min&&(a.min=b(a.min),this.dateClassObj instanceof Date||(a.min=new this.dateClassObj(a.min)));"string"==typeof a.max&&(a.max=b(a.max),this.dateClassObj instanceof Date||(a.max=new this.dateClassObj(a.max)));this.inherited(arguments);this._unboundedConstraints=n.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||
isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,b,d){void 0!==a&&("string"==typeof a&&(a=z.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));this.inherited(arguments,[a,b,d]);this.value instanceof Date&&(this.filterString="");!1!==b&&this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,b){if("value"==a){b instanceof Date&&!(this.dateClassObj instanceof Date)&&
(b=new this.dateClassObj(b));var d=this._get("value");if(d instanceof this.dateClassObj&&0==this.compare(b,d))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var b=n.isString(this.popupClass)?n.getObject(this.popupClass,!1):this.popupClass,d=this,g=this.get("value");this.dropDown=new b({onChange:function(l){d.set("value",
l,!0)},id:this.id+"_popup",dir:d.dir,lang:d.lang,value:g,textDir:d.textDir,currentFocus:this._isInvalidDate(g)?this.dropDownDefaultValue:g,constraints:d.constraints,filterString:d.filterString,datePackage:d.datePackage,isDisabledDate:function(l){return!d.rangeCheck(l,d.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,b){this._setValueAttr(this.parse(a,this.constraints),b,a)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare",
"dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(E,v,z){return E("dijit.form.RangeBoundTextBox",z,{rangeMessage:"",rangeCheck:function(u,n){return("min"in n?0<=this.compare(u,n.min):!0)&&("max"in n?0>=this.compare(u,n.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var u=this.get("value");if(null==u)return!1;var n=!1;"min"in this.constraints&&(n=this.constraints.min,n=0>this.compare(u,"number"==typeof n&&
0<=n&&0!=u?0:n));!n&&"max"in this.constraints&&(n=this.constraints.max,n=0<this.compare(u,"number"!=typeof n||0<n?n:0));return n},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(u){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(u))},getErrorMessage:function(u){var n=this.get("value");return null==n||""===n||"number"==typeof n&&isNaN(n)||this.isInRange(u)?this.inherited(arguments):this.rangeMessage},
postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=v.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(E,v,z,u){return E("dijit.form.MappedTextBox",u,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(n){return n.toString?
n.toString():""},toString:function(){var n=this.filter(this.get("value"));return null!=n?"string"==typeof n?n:this.serialize(n,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=z.place("\x3cinput type\x3d'hidden'"+(this.name&&!v("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},
"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),function(E,v,z,u,n,h){var f=function(a){a=a||{};var b=z.getLocalization("dojo.cldr","number",z.normalizeLocale(a.locale)),d=a.pattern?a.pattern:b[(a.type||"decimal")+"Format"];a="number"==typeof a.places?a.places:"string"===typeof a.places&&0<a.places.length?a.places.replace(/.*,/,""):-1!=d.indexOf(".")?d.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:b.decimal,
places:a}},c=E("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(v.delegate(a,this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:n.format,_regExpGenerator:n.regexp,_decimalInfo:f(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(a){var b="number"==typeof a.places?a.places:0;b&&b++;"number"!=typeof a.max&&
(a.max=9*Math.pow(10,15-b));"number"!=typeof a.min&&(a.min=-9*Math.pow(10,15-b));this.inherited(arguments,[a]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value);this._decimalInfo=f(a)},_onFocus:function(a){if(!this.disabled&&!this.readOnly){var b=this.get("value");"number"!=typeof b||isNaN(b)||(b=this.format(b,this.constraints),void 0!==b&&(this.textbox.value=b,"mouse"!==a&&this.textbox.select()));this.inherited(arguments)}},format:function(a,b){var d=String(a);
if("number"!=typeof a)return d;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,b))&&!1!==b.exponent&&/\de[-+]?\d/i.test(d))return d;this.editOptions&&this.focused&&(b=v.mixin({},b,this.editOptions));return this._formatter(a,b)},_parser:n.parse,parse:function(a,b){var d=v.mixin({},b,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=d.places){var g=d.places;g="number"===typeof g?g:Number(g.split(",").pop());d.places="0,"+g}d=this._parser(a,d);this.editOptions&&
this.focused&&isNaN(d)&&(d=this._parser(a,b));return d},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){if(null==a||"string"==typeof a&&""==a)return NaN;"number"!=typeof a||isNaN(a)||0==a||(a=n.round(a,this._decimalInfo.places));return this.inherited(arguments,[a])},serialize:function(a,b){return"number"!=typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=v.hitch(v.delegate(this,{focused:!0}),"get")("value");
this._setValueAttr(a,!0)},_setValueAttr:function(a,b,d){if(void 0!==a&&void 0===d)if(d=String(a),"number"==typeof a)if(isNaN(a))d="";else{if("rangeCheck"in this&&this.rangeCheck(a,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(d))d=void 0}else a?a=void 0:(d="",a=NaN);this.inherited(arguments,[a,b,d])},_getValueAttr:function(){var a=this.inherited(arguments);if(isNaN(a)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+
n._realNumberRegexp(v.delegate(this.constraints))+"$")).test(this.textbox.value))return a=Number(this.textbox.value),isNaN(a)?void 0:a}else return a},isValid:function(a){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var b=this.get("value");return!isNaN(b)&&this.rangeCheck(b,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1},_isValidSubset:function(){var a="number"==typeof this.constraints.min,
b="number"==typeof this.constraints.max,d=this.get("value");if(isNaN(d)||!a&&!b)return this.inherited(arguments);var g=d|0,l=0>d,A=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),t=(this.maxLength||20)-this.textbox.value.length,m=A?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"";g=A?g+"."+m:g+"";t=u.rep("9",t);A=d;l?A=Number(g+t):d=Number(g+t);return!(a&&d<this.constraints.min||b&&A>this.constraints.max)}});E=E("dijit.form.NumberTextBox",[h,c],{baseClass:"dijitTextBox dijitNumberTextBox"});
E.Mixin=c;return E})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(E,v,z,u,n){return E("dijit.form.FilteringSelect",[u,n],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(h,f,c,a){f&&f[this.searchAttr]!==
this._lastQuery||!f&&h.length&&this.store.getIdentity(h[0])!=this._lastQuery||(h.length?this.set("item",h[0],a):this.set("value","",a||void 0===a&&!this.focused,this.textbox.value,null))},_openResultList:function(h,f,c){f[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(h,f,c,a){this._onChangeActive||(f=null);if(void 0===a){if(null===
h||""===h)if(h="",!v.isString(c)){this._setDisplayedValueAttr(c||"",f);return}var b=this;this._lastQuery=h;z(this.store.get(h),function(d){b._callbackSetLabel(d?[d]:[],void 0,void 0,f)})}else this.valueNode.value=h,this.inherited(arguments,[h,f,c,a])},_setItemAttr:function(h,f,c){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(h){return h.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(h,f){null==h&&(h="");if(!this._created){if(!("displayedValue"in
this.params))return;f=!1}if(this.store){this.closeDropDown();var c=v.clone(this.query),a=this._getDisplayQueryString(h);if(this.store._oldAPI)var b=a;else b=this._patternToRegExp(a),b.toString=function(){return a};this._lastQuery=c[this.searchAttr]=b;this._lastDisplayedValue=this.textbox.value=h;this._set("displayedValue",h);var d=this,g={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};v.mixin(g,this.fetchProperties);this._fetchHandle=this.store.query(c,g);z(this._fetchHandle,function(l){d._fetchHandle=
null;d._callbackSetLabel(l||[],c,g,f)},function(l){d._fetchHandle=null;d._cancelingQuery||console.error("dijit.form.FilteringSelect: "+l.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(E,v,z,u,n,h,f,c,a){return E("dijit.form.ComboBoxMixin",
[c,h],{dropDownClass:f,hasDownArrow:!0,templateString:a,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(b){this._set("hasDownArrow",b);this._buttonNode.style.display=b?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(b){b.get||u.mixin(b,{_oldAPI:!0,get:function(d){var g=new v;this.fetchItemByIdentity({identity:d,onItem:function(l){g.resolve(l)},onError:function(l){g.reject(l)}});
return g.promise},query:function(d,g){var l=new v(function(){A.abort&&A.abort()});l.total=new v;var A=this.fetch(u.mixin({query:d,onBegin:function(t){l.total.resolve(t)},onComplete:function(t){l.resolve(t)},onError:function(t){l.reject(t)}},g));return n(l)}});this._set("store",b)},postMixInProperties:function(){var b=this.params.store||this.store;b&&this._setStoreAttr(b);this.inherited(arguments);if(!this.params.store&&this.store&&!this.store._oldAPI){var d=this.declaredClass;u.mixin(this.store,{getValue:function(g,
l){z.deprecated(d+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return g[l]},getLabel:function(g){z.deprecated(d+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return g.name},fetch:function(g){z.deprecated(d+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],u.hitch(this,function(l){(new l({objectStore:this})).fetch(g)}))}})}},buildRendering:function(){this.inherited(arguments);
this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(E,v,z,u,n,h,f,c,a,b,d){v=v("dijit.form._AutoCompleterMixin",d,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(g){var l=
0;if("number"==typeof g.selectionStart)l=g.selectionStart;else if(c("ie")){var A=g.ownerDocument.selection.createRange().duplicate();g=g.createTextRange();A.move("character",0);g.move("character",0);try{g.setEndPoint("EndToEnd",A),l=String(g.text).replace(/\r/g,"").length}catch(t){}}return l},_setCaretPos:function(g,l){l=parseInt(l);b.selectInputText(g,l,l)},_setDisabledAttr:function(g){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",g?"true":"false")},_onKey:function(g){if(!(32<=
g.charCode)){var l=g.charCode||g.keyCode;if(l!=u.ALT&&l!=u.CTRL&&l!=u.META&&l!=u.SHIFT){var A=this.dropDown,t=null;this._abortQuery();this.inherited(arguments);if(!(g.altKey||g.ctrlKey||g.metaKey))switch(this._opened&&(t=A.getHighlightedOption()),l){case u.PAGE_DOWN:case u.DOWN_ARROW:case u.PAGE_UP:case u.UP_ARROW:this._opened&&this._announceOption(t);g.stopPropagation();g.preventDefault();break;case u.ENTER:if(t){if(t==A.nextButton){this._nextSearch(1);g.stopPropagation();g.preventDefault();break}else if(t==
A.previousButton){this._nextSearch(-1);g.stopPropagation();g.preventDefault();break}g.stopPropagation();g.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case u.TAB:l=this.get("displayedValue");if(A&&(l==A._messages.previousMessage||l==A._messages.nextMessage))break;t&&this._selectOption(t);case u.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(g){var l=this.focusNode;b.selectInputText(l,l.value.length);
var A=this.ignoreCase?"toLowerCase":"substr";0==g[A](0).indexOf(this.focusNode.value[A](0))?(A=this.autoComplete?this._getCaretPos(l):l.value.length,A+1>l.value.length&&(l.value=g,b.selectInputText(l,A))):(l.value=g,b.selectInputText(l))},_openResultList:function(g,l,A){var t=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();g.length||0!=A.start?(this._nextSearch=this.dropDown.onPage=n.hitch(this,function(m){g.nextPage(-1!==m);this.focus()}),this.dropDown.createOptions(g,A,n.hitch(this,
"_getMenuLabelFromItem")),this._showResultList(),"direction"in A?(A.direction?this.dropDown.highlightFirstOption():A.direction||this.dropDown.highlightLastOption(),t&&this._announceOption(this.dropDown.getHighlightedOption())):!this.autoComplete||this._prev_key_backspace||/^[*]+$/.test(l[this.searchAttr].toString())||this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)):this.closeDropDown()},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded",
"true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var g=this.get("displayedValue"),l=this.dropDown;!l||g!=l._messages.previousMessage&&g!=l._messages.nextMessage?"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",g)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,
!0),this._refreshState()):this._setValueAttr(this._lastValueReported,!0);this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(g,l,A){var t="";g&&(A||(A=this.store._oldAPI?this.store.getValue(g,this.searchAttr):g[this.searchAttr]),t=this._getValueField()!=this.searchAttr?this.store.getIdentity(g):A);this.set("value",t,l,A,g)},_announceOption:function(g){if(g){if(g==this.dropDown.nextButton||g==this.dropDown.previousButton){var l=g.innerHTML;this.item=void 0;this.value=""}else{var A=
this.dropDown.items[g.getAttribute("item")];l=(this.store._oldAPI?this.store.getValue(A,this.searchAttr):A[this.searchAttr]).toString();this.set("item",A,!1,l)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",z.get(g,"id"));this._autoCompleteText(l)}},_selectOption:function(g){this.closeDropDown();g&&this._announceOption(g);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,
!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(g){if(!this.dropDown){var l=this.id+"_popup";this.dropDown=new (n.isString(this.dropDownClass)?n.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:n.hitch(this,this._selectOption),id:l,dir:this.dir,textDir:this.textDir})}this._lastInput=g;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},
postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef&&(this.store=new a({},this.srcNodeRef),!("value"in this.params))){var g=this.item=this.store.fetchSelectedItem();if(g){var l=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(g,l):g[l]}}},postCreate:function(){var g=h('label[for\x3d"'+this.id+'"]');g.length&&(g[0].id||(g[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",g[0].id));this.inherited(arguments);E.after(this,"onSearch",
n.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(g){g=this.labelFunc(g,this.store);var l=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(g=this.doHighlight(g,this._lastInput),l="html");return{html:"html"==l,label:g}},doHighlight:function(g,l){var A=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),t=this.queryExpr.indexOf("${0}");l=f.escapeString(l);return this._escapeHtml(g.replace(new RegExp((0==t?"^":"")+"("+l+")"+(t==this.queryExpr.length-
4?"$":""),A),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(g){return g=String(g).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(g,l){return(l._oldAPI?l.getValue(g,this.labelAttr||this.searchAttr):g[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(g,
l,A,t){this._set("item",t||null);null==g&&(g="");this.inherited(arguments)}});c("dojo-bidi")&&v.extend({_setTextDirAttr:function(g){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",g)}});return v})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(E,v,z,u,n,h){function f(c){return{id:c.value,value:c.value,name:z.trim(c.innerText||c.textContent||"")}}return E("dijit.form.DataList",
n,{constructor:function(c,a){this.domNode=v.byId(a);z.mixin(this,c);this.id&&h.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:u("option",this.domNode).map(f)}])},destroy:function(){h.remove(this.id)},fetchSelectedItem:function(){var c=u("\x3e option[selected]",this.domNode)[0]||u("\x3e option",this.domNode)[0];return c&&f(c)}})})},"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),
function(E,v,z,u,n,h,f){return E("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(c){this._set("list",c)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(c){return new RegExp("^"+c.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,d,g){return d?".*":g?".":b?b:"\\"+a})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&
(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(c){if(!this.disabled&&!this.readOnly){c=c.charOrCode;this._prev_key_backspace=!1;if(c===v.DELETE||c===v.BACKSPACE)this._maskValidSubsetError=this._prev_key_backspace=!0;if(this.store)this.searchTimer=
this.defer("_startSearchFromInput",1);else this.onSearch()}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(c){this._abortQuery();var a=this,b=z.clone(this.query),d={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},g=n.substitute(this.queryExpr,[c.replace(/([\\\*\?])/g,"\\$1")]),l=function(){var t=a._fetchHandle=a.store.query(b,d);a.disabled||a.readOnly||A!==a._lastQuery||h(t,function(m){a._fetchHandle=
null;a.disabled||a.readOnly||A!==a._lastQuery||h(t.total,function(k){m.total=k;var p=a.pageSize;if(isNaN(p)||p>m.total)p=m.total;m.nextPage=function(r){d.direction=r=!1!==r;d.count=p;r?(d.start+=m.length,d.start>=m.total&&(d.count=0)):(d.start-=p,0>d.start&&(d.count=Math.max(p+d.start,0),d.start=0));0>=d.count?(m.length=0,a.onSearch(m,b,d)):l()};a.onSearch(m,b,d)})},function(m){a._fetchHandle=null;a._cancelingQuery||console.error(a.declaredClass+" "+m.toString())})};z.mixin(d,this.fetchProperties);
if(this.store._oldAPI)var A=g;else A=this._patternToRegExp(g),A.toString=function(){return g};this._lastQuery=b[this.searchAttr]=A;this._queryDeferHandle=this.defer(l,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var c=this.list;c&&(this.store=f.byId(c))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),
function(E,v,z,u,n,h,f,c){return E("dijit.form._ComboBoxMenu",[n,h,c,f],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(v.add(this.previousButton,"dijitMenuItemRtl"),v.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");a.setAttribute("role","option");return a},onHover:function(a){v.add(a,"dijitMenuItemHover")},onUnhover:function(a){v.remove(a,
"dijitMenuItemHover")},onSelect:function(a){v.add(a,"dijitMenuItemSelected")},onDeselect:function(a){v.remove(a,"dijitMenuItemSelected")},_page:function(a){var b=0,d=this.domNode.scrollTop,g=z.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();b<g;){var l=this.getHighlightedOption();if(a){if(!l.previousSibling||"none"==l.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!l.nextSibling||"none"==l.nextSibling.style.display)break;this.selectNextNode()}l=
this.domNode.scrollTop;b+=(l-d)*(a?-1:1);d=l}},handleKey:function(a){switch(a.keyCode){case u.DOWN_ARROW:return this.selectNextNode(),!1;case u.PAGE_DOWN:return this._page(!1),!1;case u.UP_ARROW:return this.selectPreviousNode(),!1;case u.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(E,v,z,u,n){var h=v("dijit.form._ComboBoxMenuMixin"+
(u("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=n.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(f){this._set("value",f);this.onChange(f)},onClick:function(f){if(f==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(f==
this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(f)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(f,c){var a=this._createMenuItem();f=c(f);f.html?a.innerHTML=f.label:a.appendChild(a.ownerDocument.createTextNode(f.label));""==a.innerHTML&&(a.innerHTML="\x26#160;");return a},createOptions:function(f,c,a){this.items=f;this.previousButton.style.display=0==c.start?"none":"";z.set(this.previousButton,"id",this.id+
"_prev");E.forEach(f,function(d,g){d=this._createOption(d,a);d.setAttribute("item",g);z.set(d,"id",this.id+g);this.nextButton.parentNode.insertBefore(d,this.nextButton)},this);var b=!1;f.total&&!f.total.then&&-1!=f.total?c.start+c.count<f.total?b=!0:c.start+c.count>f.total&&c.count==f.length&&(b=!0):c.count==f.length&&(b=!0);this.nextButton.style.display=b?"":"none";z.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var f=this.containerNode;2<f.childNodes.length;)f.removeChild(f.childNodes[f.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});u("dojo-bidi")&&(h=v("dijit.form._ComboBoxMenuMixin",
h,{_createOption:function(){var f=this.inherited(arguments);this.applyTextDir(f);return f}}));return h})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(E,v,z,u){return E("dijit.form._ListMouseMixin",u,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover",
"_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(n,h){this._setSelectedAttr(h,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(h)})},_onMouseDown:function(n,h){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(h,!1)},_onMouseUp:function(n,h){this._isDragging=!1;var f=this.selected,c=this._hoveredNode;f&&h==f?this.defer(function(){this._onClick(n,
f)}):c&&this.defer(function(){this._onClick(n,c)})},_onMouseOut:function(n,h){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(n,h){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=h;this.onHover(h);this._isDragging&&this._setSelectedAttr(h,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on",
"dojo/window"],function(E,v,z){return E("dijit.form._ListBase",null,{selected:null,_listConnect:function(u,n){var h=this;return h.own(v(h.containerNode,v.selector(function(f,c,a){return f.parentNode==a},u),function(f){h[n](f,this)}))},selectFirstNode:function(){for(var u=this.containerNode.firstChild;u&&"none"==u.style.display;)u=u.nextSibling;this._setSelectedAttr(u,!0)},selectLastNode:function(){for(var u=this.containerNode.lastChild;u&&"none"==u.style.display;)u=u.previousSibling;this._setSelectedAttr(u,
!0)},selectNextNode:function(){var u=this.selected;if(u){for(u=u.nextSibling;u&&"none"==u.style.display;)u=u.nextSibling;u?this._setSelectedAttr(u,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var u=this.selected;if(u){for(u=u.previousSibling;u&&"none"==u.style.display;)u=u.previousSibling;u?this._setSelectedAttr(u,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(u,n){if(this.selected!=u){var h=this.selected;if(h)this.onDeselect(h);
u&&(n&&z.scrollIntoView(u),this.onSelect(u));this._set("selected",u)}else if(u)this.onSelect(u)}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(E,v,z,u){return E("dijit.form.NumberSpinner",[z,u.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(n,h){var f=this.constraints,c=isNaN(n),a=!isNaN(f.max),b=!isNaN(f.min);c&&0!=h&&(n=0<h?b?f.min:a?f.max:0:a?this.constraints.max:b?f.min:0);h=n+h;if(c||
isNaN(h))return n;a&&h>f.max&&(h=f.max);b&&h<f.min&&(h=f.min);return h},_onKeyDown:function(n){if(!(this.disabled||this.readOnly||n.keyCode!=v.HOME&&n.keyCode!=v.END||n.ctrlKey||n.altKey||n.metaKey||"undefined"==typeof this.get("value"))){var h=this.constraints[n.keyCode==v.HOME?"min":"max"];"number"==typeof h&&this._setValueAttr(h,!1);n.stopPropagation();n.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),
function(E,v,z,u,n,h,f,c,a,b){return E("dijit.form._Spinner",c,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:.9,smallDelta:1,largeDelta:10,templateString:a,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(d){return d},_arrowPressed:function(d,g,l){this.disabled||this.readOnly||(this._setValueAttr(this.adjust(this.get("value"),g*l),!1),b.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=
null},_typematicCallback:function(d,g,l){var A=this.smallDelta;g==this.textbox&&(g=l.keyCode,A=g==v.PAGE_UP||g==v.PAGE_DOWN?this.largeDelta:this.smallDelta,g=g==v.UP_ARROW||g==v.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==d?this._arrowReleased(g):this._arrowPressed(g,g==this.upArrowNode?1:-1,A)},_wheelTimer:null,_mouseWheeled:function(d){if(this.focused){d.stopPropagation();d.preventDefault();var g=d.wheelDelta/120;Math.floor(g)!=g&&(g=0<d.wheelDelta?1:-1);d=d.detail?-1*d.detail:g;if(0!==d){var l=
this[0<d?"upArrowNode":"downArrowNode"];this._arrowPressed(l,d,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(l)},50)}}},_setConstraintsAttr:function(d){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):
this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(d,g){this.focusNode.setAttribute("aria-valuenow",d);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(h(this.domNode,n.wheel,z.hitch(this,"_mouseWheeled")),f.addListener(this.upArrowNode,this.textbox,{keyCode:v.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),f.addListener(this.downArrowNode,this.textbox,
{keyCode:v.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),f.addListener(this.upArrowNode,this.textbox,{keyCode:v.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),f.addListener(this.downArrowNode,this.textbox,{keyCode:v.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,
this.defaultTimeout,this.minimumTimeout))}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(E,v,z,u){return E("dijit.form.SimpleTextarea",u,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=
this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);z("ie")&&this.cols&&v.add(this.textbox,"dijitTextAreaCols")},filter:function(n){n&&(n=n.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(n){if(this.maxLength){var h=parseInt(this.maxLength),f=this.textbox.value.replace(/\r/g,"");h=f.length-h;if(0<h){var c=this.textbox;if(c.selectionStart){var a=c.selectionStart,b=0;z("opera")&&(b=(this.textbox.value.substring(0,a).match(/\r/g)||
[]).length);this.textbox.value=f.substring(0,a-h-b)+f.substring(a-b);c.setSelectionRange(a-h,a-h)}else this.ownerDocument.selection&&(c.focus(),f=this.ownerDocument.selection.createRange(),f.moveStart("character",-h),f.text="",f.select())}}this.inherited(arguments)}})})},"dijit/form/TimeTextBox":function(){define("dojo/_base/declare dojo/keys dojo/query dojo/_base/lang ../_TimePicker ./_DateTimeTextBox".split(" "),function(E,v,z,u,n,h){return E("dijit.form.TimeTextBox",h,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",
popupClass:n,_selector:"time",value:new Date(""),maxHeight:-1,openDropDown:function(f){this.inherited(arguments);var c=z(".dijitTimePickerItemSelected",this.dropDown.domNode),a=this.dropDown.domNode.parentNode;a.scrollTop=c[0]?c[0].offsetTop-(a.clientHeight-c[0].clientHeight)/2:(a.scrollHeight-a.clientHeight)/2;this.dropDown.on("input",u.hitch(this,function(){this.set("value",this.dropDown.get("value"),!1)}))},_onInput:function(){this.inherited(arguments);var f=this.get("displayedValue");this.filterString=
f&&!this.parse(f,this.constraints)?f.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()}})})},"dijit/_TimePicker":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/sniff dojo/query dojo/mouse dojo/on ./_WidgetBase ./form/_ListMouseMixin".split(" "),function(E,v,z,u,n,h,f,c,a,b,d,g,l,A,t,m){return n("dijit._TimePicker",[t,m],{baseClass:"dijitTimePicker",
pickerMin:"T00:00:00",pickerMax:"T23:59:59",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:u.toISOString,buildRendering:function(){this.inherited(arguments);this.timeMenu=this.containerNode=this.domNode},setValue:function(k){c.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",k)},_setValueAttr:function(k){this._set("value",
k);this._showText()},_setFilterStringAttr:function(k){this._set("filterString",k);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(k,p,r,w){k=this.ownerDocument.createDocumentFragment();for(p=0;p<this._maxIncrement;p++)(r=this._createOption(p))&&k.appendChild(r);return k},_showText:function(){var k=u.fromISOString;this.domNode.innerHTML="";this._clickableIncrementDate=k(this.clickableIncrement);this._visibleIncrementDate=k(this.visibleIncrement);var p=function(w){return 3600*
w.getHours()+60*w.getMinutes()+w.getSeconds()},r=p(this._clickableIncrementDate);p=p(this._visibleIncrementDate);(this.value||this.currentFocus).getTime();this._refDate=k(this.pickerMin);this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._visibleIncrement=p/r;k=k(this.pickerMax);k.setFullYear(1970,0,1);k=.001*(k.getTime()-this._refDate.getTime());this._maxIncrement=Math.ceil((k+1)/r);r=this._getFilteredNodes();!r.firstChild&&this.filterString?(this.filterString="",this._showText()):
this.domNode.appendChild(r)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(k){for(var p in{clickableIncrement:1,visibleIncrement:1,pickerMin:1,pickerMax:1})p in k&&(this[p]=k[p]);k.locale||(k.locale=this.lang)},_createOption:function(k){var p=new Date(this._refDate),r=this._clickableIncrementDate;p.setHours(p.getHours()+r.getHours()*k,p.getMinutes()+r.getMinutes()*k,p.getSeconds()+
r.getSeconds()*k);"time"==this.constraints.selector&&p.setFullYear(1970,0,1);var w=z.format(p,this.constraints);if(this.filterString&&0!==w.toLowerCase().indexOf(this.filterString))return null;r=this.ownerDocument.createElement("div");r.className=this.baseClass+"Item";r.date=p;r.idx=k;f.create("div",{"class":this.baseClass+"ItemInner",innerHTML:w},r);w=1>k%this._visibleIncrement&&-1<k%this._visibleIncrement;k=!w&&!(k%this._clickableIncrement);w?r.className+=" "+this.baseClass+"Marker":k&&(r.className+=
" "+this.baseClass+"Tick");this.isDisabledDate(p)&&(r.className+=" "+this.baseClass+"ItemDisabled");this.value&&!v.compare(this.value,p,this.constraints.selector)&&(r.selected=!0,r.className+=" "+this.baseClass+"ItemSelected",this._selectedDiv=r,w?r.className+=" "+this.baseClass+"MarkerSelected":k&&(r.className+=" "+this.baseClass+"TickSelected"),this._highlightOption(r,!0));return r},onOpen:function(){this.inherited(arguments);this.set("selected",this._selectedDiv)},_onOptionSelected:function(k,
p){(k=k.target.date||k.target.parentNode.date)&&!this.isDisabledDate(k)&&(this._set("value",k),this.emit("input"),p&&(this._highlighted_option=null,this.set("value",k),this.onChange(k)))},onChange:function(){},_highlightOption:function(k,p){if(k){if(p)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=k;else{if(this._highlighted_option!==k)return;this._highlighted_option=null}h.toggle(k,this.baseClass+"ItemHover",p);h.contains(k,this.baseClass+"Marker")?
h.toggle(k,this.baseClass+"MarkerHover",p):h.toggle(k,this.baseClass+"TickHover",p)}},handleKey:function(k){if(k.keyCode==a.DOWN_ARROW)return this.selectNextNode(),this._onOptionSelected({target:this._highlighted_option},!1),k.stopPropagation(),k.preventDefault(),!1;if(k.keyCode==a.UP_ARROW)return this.selectPreviousNode(),this._onOptionSelected({target:this._highlighted_option},!1),k.stopPropagation(),k.preventDefault(),!1;if(k.keyCode==a.ENTER||k.keyCode===a.TAB){if(!this._keyboardSelected&&k.keyCode===
a.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option},!0);return k.keyCode===a.TAB}},onHover:function(k){this._highlightOption(k,!0)},onUnhover:function(k){this._highlightOption(k,!1)},onSelect:function(k){this._highlightOption(k,!0)},onDeselect:function(k){this._highlightOption(k,!1)},onClick:function(k){this._onOptionSelected({target:k},!0)}})})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel ../_base/lang ../_base/declare ../_base/array ../_base/xhr ../Evented ./util/filter ./util/simpleFetch ../date/stamp".split(" "),
function(E,v,z,u,n,h,f,c,a){z=z("dojo.data.ItemFileReadStore",[h],{constructor:function(b){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=b.url;this._jsonData=b.data;this.data=null;this._datatypeMap=b.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(d){return a.fromISOString(d)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName=
"_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];void 0!==b.urlPreventCache&&(this.urlPreventCache=b.urlPreventCache?!0:!1);void 0!==b.hierarchical&&(this.hierarchical=b.hierarchical?!0:!1);b.clearOnClose&&(this.clearOnClose=!0);"failOk"in b&&(this.failOk=b.failOk?!0:!1)},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(b){if(!this.isItem(b))throw Error(this.declaredClass+
": Invalid item argument.");},_assertIsAttribute:function(b){if("string"!==typeof b)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(b,d,g){b=this.getValues(b,d);return 0<b.length?b[0]:g},getValues:function(b,d){this._assertIsItem(b);this._assertIsAttribute(d);return(b[d]||[]).slice(0)},getAttributes:function(b){this._assertIsItem(b);var d=[],g;for(g in b)g!==this._storeRefPropName&&g!==this._itemNumPropName&&g!==this._rootItemPropName&&g!==this._reverseRefMap&&
d.push(g);return d},hasAttribute:function(b,d){this._assertIsItem(b);this._assertIsAttribute(d);return d in b},containsValue:function(b,d,g){var l=void 0;"string"===typeof g&&(l=f.patternToRegExp(g,!1));return this._containsValue(b,d,g,l)},_containsValue:function(b,d,g,l){return u.some(this.getValues(b,d),function(A){if(null!==A&&!v.isObject(A)&&l){if(A.toString().match(l))return!0}else if(g===A)return!0})},isItem:function(b){return b&&b[this._storeRefPropName]===this&&this._arrayOfAllItems[b[this._itemNumPropName]]===
b?!0:!1},isItemLoaded:function(b){return this.isItem(b)},loadItem:function(b){this._assertIsItem(b.item)},getFeatures:function(){return this._features},getLabel:function(b){if(this._labelAttr&&this.isItem(b))return this.getValue(b,this._labelAttr)},getLabelAttributes:function(b){return this._labelAttr?[this._labelAttr]:null},filter:function(b,d,g){var l=[];if(b.query){var A=b.queryOptions?b.queryOptions.ignoreCase:!1;var t={};for(r in b.query){var m=b.query[r];"string"===typeof m?t[r]=f.patternToRegExp(m,
A):m instanceof RegExp&&(t[r]=m)}for(A=0;A<d.length;++A){var k=!0,p=d[A];if(null===p)k=!1;else for(r in b.query)m=b.query[r],this._containsValue(p,r,m,t[r])||(k=!1);k&&l.push(p)}}else for(A=0;A<d.length;++A){var r=d[A];null!==r&&l.push(r)}g(l,b)},_fetchItems:function(b,d,g){var l=this;if(this._loadFinished)this.filter(b,this._getItemsArray(b.queryOptions),d);else if(this._jsonFileUrl!==this._ccUrl?(E.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url),null!=this.data&&(this._jsonData=this.data,this.data=null),this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:b,filter:v.hitch(l,"filter"),findCallback:v.hitch(l,d)});else{this._loadInProgress=!0;var A=n.get({url:l._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});A.addCallback(function(m){try{l._getItemsFromLoadedData(m),
l._loadFinished=!0,l._loadInProgress=!1,l.filter(b,l._getItemsArray(b.queryOptions),d),l._handleQueuedFetches()}catch(k){l._loadFinished=!0,l._loadInProgress=!1,g(k,b)}});A.addErrback(function(m){l._loadInProgress=!1;g(m,b)});var t=null;b.abort&&(t=b.abort);b.abort=function(){var m=A;m&&-1===m.fired&&(m.cancel(),m=null);t&&t.call(b)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,l.filter(b,this._getItemsArray(b.queryOptions),d)}catch(m){g(m,
b)}else g(Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),b)},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var b=0;b<this._queuedFetches.length;b++){var d=this._queuedFetches[b],g=d.args,l=d.filter;d=d.findCallback;l?l(g,this._getItemsArray(g.queryOptions),d):this.fetchItemByIdentity(g)}this._queuedFetches=[]}},_getItemsArray:function(b){return b&&b.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(b){this.clearOnClose&&
this._loadFinished&&!this._loadInProgress&&(""!=this._jsonFileUrl&&null!=this._jsonFileUrl||""!=this.url&&null!=this.url||null!=this.data||console.debug(this.declaredClass+": WARNING!  Data reload  information has not been provided.  Please set 'url' or 'data' to the appropriate value before the next fetch"),this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[])},_getItemsFromLoadedData:function(b){function d(R){return null!==
R&&"object"===typeof R&&(!v.isArray(R)||l)&&!v.isFunction(R)&&(R.constructor==Object||v.isArray(R))&&"undefined"===typeof R._reference&&"undefined"===typeof R._type&&"undefined"===typeof R._value&&A.hierarchical}function g(R){A._arrayOfAllItems.push(R);for(var X in R){var T=R[X];if(T)if(v.isArray(T))for(var W=0;W<T.length;++W){var C=T[W];d(C)&&g(C)}else d(T)&&g(T)}}var l=!1,A=this;this._labelAttr=b.label;var t;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=b.items;for(t=0;t<this._arrayOfTopLevelItems.length;++t){var m=
this._arrayOfTopLevelItems[t];v.isArray(m)&&(l=!0);g(m);m[this._rootItemPropName]=!0}var k={},p;for(t=0;t<this._arrayOfAllItems.length;++t)for(p in m=this._arrayOfAllItems[t],m){if(p!==this._rootItemPropName){var r=m[p];null!==r?v.isArray(r)||(m[p]=[r]):m[p]=[null]}k[p]=p}for(;k[this._storeRefPropName];)this._storeRefPropName+="_";for(;k[this._itemNumPropName];)this._itemNumPropName+="_";for(;k[this._reverseRefMap];)this._reverseRefMap+="_";if(k=b.identifier)for(this._itemsByIdentity={},this._features["dojo.data.api.Identity"]=
k,t=0;t<this._arrayOfAllItems.length;++t)if(m=this._arrayOfAllItems[t],b=m[k],b=b[0],Object.hasOwnProperty.call(this._itemsByIdentity,b)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+k+"].  Value collided: ["+b+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+k+"].  Value collided: ["+
b+"]");}else this._itemsByIdentity[b]=m;else this._features["dojo.data.api.Identity"]=Number;for(t=0;t<this._arrayOfAllItems.length;++t)m=this._arrayOfAllItems[t],m[this._storeRefPropName]=this,m[this._itemNumPropName]=t;for(t=0;t<this._arrayOfAllItems.length;++t)for(p in m=this._arrayOfAllItems[t],m)for(b=m[p],k=0;k<b.length;++k)if(r=b[k],null!==r&&"object"==typeof r){if("_type"in r&&"_value"in r){var w=r._type,H=this._datatypeMap[w];if(H)if(v.isFunction(H))b[k]=new H(r._value);else if(v.isFunction(H.deserialize))b[k]=
H.deserialize(r._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+w+"'");}if(r._reference){r=r._reference;if(v.isObject(r))for(w=0;w<this._arrayOfAllItems.length;++w){H=this._arrayOfAllItems[w];var J=!0,K;for(K in r)H[K]!=r[K]&&(J=!1);J&&(b[k]=H)}else b[k]=this._getItemByIdentity(r);
this.referenceIntegrity&&(r=b[k],this.isItem(r)&&this._addReferenceToMap(r,m,p))}else this.isItem(r)&&this.referenceIntegrity&&this._addReferenceToMap(r,m,p)}},_addReferenceToMap:function(b,d,g){},getIdentity:function(b){var d=this._features["dojo.data.api.Identity"];return d===Number?b[this._itemNumPropName]:(b=b[d])?b[0]:null},fetchItemByIdentity:function(b){if(this._loadFinished){var d=this._getItemByIdentity(b.identity);if(b.onItem){var g=b.scope?b.scope:E.global;b.onItem.call(g,d)}}else{var l=
this;this._jsonFileUrl!==this._ccUrl?(E.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=this.data&&null==this._jsonData&&(this._jsonData=this.data,this.data=null);this._jsonFileUrl?this._loadInProgress?this._queuedFetches.push({args:b}):(this._loadInProgress=!0,g=n.get({url:l._jsonFileUrl,
handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),g.addCallback(function(A){var t=b.scope?b.scope:E.global;try{l._getItemsFromLoadedData(A),l._loadFinished=!0,l._loadInProgress=!1,d=l._getItemByIdentity(b.identity),b.onItem&&b.onItem.call(t,d),l._handleQueuedFetches()}catch(m){l._loadInProgress=!1,b.onError&&b.onError.call(t,m)}}),g.addErrback(function(A){l._loadInProgress=!1;b.onError&&b.onError.call(b.scope?b.scope:E.global,A)})):this._jsonData&&(l._getItemsFromLoadedData(l._jsonData),
l._jsonData=null,l._loadFinished=!0,d=l._getItemByIdentity(b.identity),b.onItem&&(g=b.scope?b.scope:E.global,b.onItem.call(g,d)))}},_getItemByIdentity:function(b){var d=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,b)&&(d=this._itemsByIdentity[b]):Object.hasOwnProperty.call(this._arrayOfAllItems,b)&&(d=this._arrayOfAllItems[b]);void 0===d&&(d=null);return d},getIdentityAttributes:function(b){b=this._features["dojo.data.api.Identity"];return b===Number?null:[b]},_forceLoad:function(){var b=
this;this._jsonFileUrl!==this._ccUrl?(E.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl):this.url!==this._ccUrl&&(this._ccUrl=this._jsonFileUrl=this.url);null!=this.data&&(this._jsonData=this.data,this.data=null);if(this._jsonFileUrl){var d=n.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,
sync:!0});d.addCallback(function(g){try{if(!0!==b._loadInProgress&&!b._loadFinished)b._getItemsFromLoadedData(g),b._loadFinished=!0;else if(b._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(l){throw console.log(l),l;}});d.addErrback(function(g){throw g;})}else this._jsonData&&(b._getItemsFromLoadedData(b._jsonData),b._jsonData=null,b._loadFinished=!0)}});v.extend(z,c);return z})},"dojo/data/util/filter":function(){define(["../../_base/lang"],
function(E){var v={};E.setObject("dojo.data.util.filter",v);v.patternToRegExp=function(z,u){for(var n="^",h=null,f=0;f<z.length;f++)switch(h=z.charAt(f),h){case "\\":n+=h;f++;n+=z.charAt(f);break;case "*":n+=".*";break;case "?":n+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":n+="\\";default:n+=h}n+="$";return u?new RegExp(n,"mi"):new RegExp(n,"m")};return v})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang",
"../../_base/kernel","./sorter"],function(E,v,z){var u={};E.setObject("dojo.data.util.simpleFetch",u);u.errorHandler=function(n,h){h.onError&&h.onError.call(h.scope||v.global,n,h)};u.fetchHandler=function(n,h){var f=h.abort||null,c=!1,a=h.start?h.start:0,b=h.count&&Infinity!==h.count?a+h.count:n.length;h.abort=function(){c=!0;f&&f.call(h)};var d=h.scope||v.global;h.store||(h.store=this);h.onBegin&&h.onBegin.call(d,n.length,h);h.sort&&n.sort(z.createSortFunction(h.sort,this));if(h.onItem)for(var g=
a;g<n.length&&g<b;++g){var l=n[g];c||h.onItem.call(d,l,h)}h.onComplete&&!c&&(g=null,h.onItem||(g=n.slice(a,b)),h.onComplete.call(d,g,h))};u.fetch=function(n){n=n||{};n.store||(n.store=this);this._fetchItems(n,E.hitch(this,"fetchHandler"),E.hitch(this,"errorHandler"));return n};return u})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(E){var v={};E.setObject("dojo.data.util.sorter",v);v.basicComparator=function(z,u){var n=-1;null===z&&(z=void 0);null===u&&(u=void 0);if(z==
u)n=0;else if(z>u||null==z)n=1;return n};v.createSortFunction=function(z,u){function n(l,A,t,m){return function(k,p){k=m.getValue(k,l);p=m.getValue(p,l);return A*t(k,p)}}for(var h=[],f,c=u.comparatorMap,a=v.basicComparator,b=0;b<z.length;b++){f=z[b];var d=f.attribute;if(d){f=f.descending?-1:1;var g=a;c&&("string"!==typeof d&&"toString"in d&&(d=d.toString()),g=c[d]||a);h.push(n(d,f,g,u))}}return function(l,A){for(var t=0;t<h.length;){var m=h[t++](l,A);if(0!==m)return m}return 0}};return v})},"dojox/date/islamic":function(){define(["dojox/main",
"dojo/_base/lang","dojo/date","./islamic/Date"],function(E,v,z,u){var n=v.getObject("date.islamic",!0,E);n.getDaysInMonth=function(h){return h.getDaysInIslamicMonth(h.getMonth(),h.getFullYear())};n.compare=function(h,f,c){h instanceof u&&(h=h.toGregorian());f instanceof u&&(f=f.toGregorian());return z.compare.apply(null,arguments)};n.add=function(h,f,c){var a=new u(h);switch(f){case "day":a.setDate(h.getDate()+c);break;case "weekday":var b=h.getDay();if(5>b+c&&0<b+c)a.setDate(h.getDate()+c);else{var d=
f=0;5==b?(b=4,d=0<c?-1:1):6==b&&(b=4,d=0<c?-2:2);b=0<c?5-b-1:-b;var g=c-b,l=parseInt(g/5);0!=g%5&&(f=0<c?2:-2);f=f+7*l+g%5+b;a.setDate(h.getDate()+f+d)}break;case "year":a.setFullYear(h.getFullYear()+c);break;case "week":c*=7;a.setDate(h.getDate()+c);break;case "month":h=h.getMonth();a.setMonth(h+c);break;case "hour":a.setHours(h.getHours()+c);break;case "minute":a._addMinutes(c);break;case "second":a._addSeconds(c);break;case "millisecond":a._addMilliseconds(c)}return a};n.difference=function(h,
f,c){f=f||new u;c=c||"day";var a=f.getFullYear()-h.getFullYear(),b=1;switch(c){case "weekday":a=Math.round(n.difference(h,f,"day"));b=parseInt(n.difference(h,f,"week"));if(0==a%7)a=5*b;else{c=0;var d=h.getDay(),g=f.getDay();b=parseInt(a/7);f=a%7;h=new u(h);h.setDate(h.getDate()+7*b);h=h.getDay();if(0<a)switch(!0){case 5==d:c=-1;break;case 6==d:c=0;break;case 5==g:c=-1;break;case 6==g:c=-2;break;case 5<h+f:c=-2}else if(0>a)switch(!0){case 5==d:c=0;break;case 6==d:c=1;break;case 5==g:c=2;break;case 6==
g:c=1;break;case 0>h+f:c=2}a=a+c-2*b}b=a;break;case "year":b=a;break;case "month":c=f.toGregorian()>h.toGregorian()?f:h;d=f.toGregorian()>h.toGregorian()?h:f;b=c.getMonth();g=d.getMonth();if(0==a)b=c.getMonth()-d.getMonth();else for(b=12-g+b,a=d.getFullYear()+1,c=c.getFullYear(),a;a<c;a++)b+=12;f.toGregorian()<h.toGregorian()&&(b=-b);break;case "week":b=parseInt(n.difference(h,f,"day")/7);break;case "day":b/=24;case "hour":b/=60;case "minute":b/=60;case "second":b/=1E3;case "millisecond":b*=f.toGregorian().getTime()-
h.toGregorian().getTime()}return Math.round(b)};return n})},"dojox/main":function(){define(["dojo/_base/kernel"],function(E){return E.dojox})},"dojox/date/islamic/Date":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(E,v,z){var u=v("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var n=arguments.length;n?1==n?(n=arguments[0],"number"==
typeof n&&(n=new Date(n)),n instanceof Date?this.fromGregorian(n):""==n?this._date=new Date(""):(this._year=n._year,this._month=n._month,this._date=n._date,this._hours=n._hours,this._minutes=n._minutes,this._seconds=n._seconds,this._milliseconds=n._milliseconds)):3<=n&&(this._year+=arguments[0],this._month+=arguments[1],this._date+=arguments[2],this._hours+=arguments[3]||0,this._minutes+=arguments[4]||0,this._seconds+=arguments[5]||0,this._milliseconds+=arguments[6]||0):this.fromGregorian(new Date)},
getDate:function(){return this._date},getMonth:function(){return this._month},getFullYear:function(){return this._year},getDay:function(){return this.toGregorian().getDay()},getHours:function(){return this._hours},getMinutes:function(){return this._minutes},getSeconds:function(){return this._seconds},getMilliseconds:function(){return this._milliseconds},setDate:function(n){n=parseInt(n);if(!(0<n&&n<=this.getDaysInIslamicMonth(this._month,this._year))){var h;if(0<n)for(h=this.getDaysInIslamicMonth(this._month,
this._year);n>h;n-=h,h=this.getDaysInIslamicMonth(this._month,this._year))this._month++,12<=this._month&&(this._year++,this._month-=12);else for(h=this.getDaysInIslamicMonth(0<=this._month-1?this._month-1:11,0<=this._month-1?this._year:this._year-1);0>=n;h=this.getDaysInIslamicMonth(0<=this._month-1?this._month-1:11,0<=this._month-1?this._year:this._year-1))this._month--,0>this._month&&(this._year--,this._month+=12),n+=h}this._date=n;return this},setFullYear:function(n){this._year=+n},setMonth:function(n){this._year+=
Math.floor(n/12);this._month=0<n?Math.floor(n%12):Math.floor((n%12+12)%12)},setHours:function(){var n=arguments.length,h=0;1<=n&&(h=parseInt(arguments[0]));2<=n&&(this._minutes=parseInt(arguments[1]));3<=n&&(this._seconds=parseInt(arguments[2]));4==n&&(this._milliseconds=parseInt(arguments[3]));for(;24<=h;)this._date++,n=this.getDaysInIslamicMonth(this._month,this._year),this._date>n&&(this._month++,12<=this._month&&(this._year++,this._month-=12),this._date-=n),h-=24;this._hours=h},_addMinutes:function(n){n+=
this._minutes;this.setMinutes(n);this.setHours(this._hours+parseInt(n/60));return this},_addSeconds:function(n){n+=this._seconds;this.setSeconds(n);this._addMinutes(parseInt(n/60));return this},_addMilliseconds:function(n){n+=this._milliseconds;this.setMilliseconds(n);this._addSeconds(parseInt(n/1E3));return this},setMinutes:function(n){this._minutes=n%60;return this},setSeconds:function(n){this._seconds=n%60;return this},setMilliseconds:function(n){this._milliseconds=n%1E3;return this},toString:function(){if(isNaN(this._date))return"Invalidate Date";
var n=new Date;n.setHours(this._hours);n.setMinutes(this._minutes);n.setSeconds(this._seconds);n.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+n.toTimeString()},toGregorian:function(){var n=this._year;n=Math.floor(this._date+Math.ceil(29.5*this._month)+354*(n-1)+Math.floor((3+11*n)/30)+this._ISLAMIC_EPOCH-1-.5)+.5;var h=n-this._GREGORIAN_EPOCH,f=Math.floor(h/146097),c=this._mod(h,146097);h=Math.floor(c/36524);var a=this._mod(c,36524);c=Math.floor(a/1461);
a=this._mod(a,1461);a=Math.floor(a/365);f=400*f+100*h+4*c+a;4!=h&&4!=a&&f++;h=n-(this._GREGORIAN_EPOCH+365*(f-1)+Math.floor((f-1)/4)-Math.floor((f-1)/100)+Math.floor((f-1)/400));c=this._GREGORIAN_EPOCH-1+365*(f-1)+Math.floor((f-1)/4)-Math.floor((f-1)/100)+Math.floor((f-1)/400)+Math.floor(739/12+(z.isLeapYear(new Date(f,3,1))?-1:-2)+1);c=n<c?0:z.isLeapYear(new Date(f,3,1))?1:2;h=Math.floor((12*(h+c)+373)/367);c=this._GREGORIAN_EPOCH-1+365*(f-1)+Math.floor((f-1)/4)-Math.floor((f-1)/100)+Math.floor((f-
1)/400)+Math.floor((367*h-362)/12+(2>=h?0:z.isLeapYear(new Date(f,h-1,1))?-1:-2)+1);return new Date(f,h-1,n-c+1,this._hours,this._minutes,this._seconds,this._milliseconds)},fromGregorian:function(n){n=new Date(n);var h=n.getFullYear(),f=n.getMonth(),c=n.getDate();h=this._GREGORIAN_EPOCH-1+365*(h-1)+Math.floor((h-1)/4)+-Math.floor((h-1)/100)+Math.floor((h-1)/400)+Math.floor((367*(f+1)-362)/12+(2>=f+1?0:z.isLeapYear(n)?-1:-2)+c);h=Math.floor(h)+.5;h-=this._ISLAMIC_EPOCH;f=Math.floor((30*h+10646)/10631);
c=Math.ceil((h-29-this._yearStart(f))/29.5);c=Math.min(c,11);this._date=Math.ceil(h-this._monthStart(f,c))+1;this._month=c;this._year=f;this._hours=n.getHours();this._minutes=n.getMinutes();this._seconds=n.getSeconds();this._milliseconds=n.getMilliseconds();this._day=n.getDay();return this},valueOf:function(){return this.toGregorian().valueOf()},_yearStart:function(n){return 354*(n-1)+Math.floor((3+11*n)/30)},_monthStart:function(n,h){return Math.ceil(29.5*h)+354*(n-1)+Math.floor((3+11*n)/30)},_civilLeapYear:function(n){return 11>
(14+11*n)%30},getDaysInIslamicMonth:function(n,h){var f=0;f=29+(n+1)%2;11==n&&this._civilLeapYear(h)&&f++;return f},_mod:function(n,h){return n-h*Math.floor(n/h)}});u.getDaysInIslamicMonth=function(n){return(new u).getDaysInIslamicMonth(n.getMonth(),n.getFullYear())};return u})},"dojox/date/islamic/locale":function(){define("dojox/main dojo/_base/lang dojo/_base/array dojo/date dojo/i18n dojo/regexp dojo/string ./Date dojo/i18n!dojo/cldr/nls/islamic".split(" "),function(E,v,z,u,n,h,f,c,a){function b(t,
m,k,p,r){return r.replace(/([a-z])\1*/ig,function(w){var H=w.charAt(0);w=w.length;var J=["abbr","wide","narrow"];switch(H){case "G":var K=m.eraAbbr[0];break;case "y":K=String(t.getFullYear());break;case "M":K=t.getMonth();if(3>w){K+=1;var R=!0}else H=["months-format",J[w-3]].join("-"),K=m[H][K];break;case "d":K=t.getDate(!0);R=!0;break;case "E":K=t.getDay();3>w?(K+=1,R=!0):(H=["days-format",J[w-3]].join("-"),K=m[H][K]);break;case "a":K=12>t.getHours()?"am":"pm";K=m["dayPeriods-format-wide-"+K];break;
case "h":case "H":case "K":case "k":R=t.getHours();switch(H){case "h":K=R%12||12;break;case "H":K=R;break;case "K":K=R%12;break;case "k":K=R||24}R=!0;break;case "m":K=t.getMinutes();R=!0;break;case "s":K=t.getSeconds();R=!0;break;case "S":K=Math.round(t.getMilliseconds()*Math.pow(10,w-3));R=!0;break;case "z":if(K=u.getTimezoneName(t.toGregorian()))break;w=4;case "Z":K=t.toGregorian().getTimezoneOffset();K=[0>=K?"+":"-",f.pad(Math.floor(Math.abs(K)/60),2),f.pad(Math.abs(K)%60,2)];4==w&&(K.splice(0,
0,"GMT"),K.splice(3,0,":"));K=K.join("");break;default:throw Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+r);}R&&(K=f.pad(K,w));return K})}function d(t,m,k,p){var r=function(J){return J};m=m||r;k=k||r;p=p||r;var w=t.match(/(''|[^'])+/g),H="'"==t.charAt(0);z.forEach(w,function(J,K){J?(w[K]=(H?k:m)(J),H=!H):w[K]=""});return p(w.join(""))}function g(t,m,k,p){p=h.escapeString(p);n.normalizeLocale(k.locale);return p.replace(/([a-z])\1*/ig,function(r){var w=r.charAt(0);var H=
r.length,J="";k.strict?1<H&&(J="0{"+(H-1)+"}"):J="0?";switch(w){case "y":w="\\d+";break;case "M":w=2<H?"\\S+ ?\\S+":J+"[1-9]|1[0-2]";break;case "d":w="[12]\\d|"+J+"[1-9]|3[01]";break;case "E":w="\\S+";break;case "h":w=J+"[1-9]|1[0-2]";break;case "k":w=J+"\\d|1[01]";break;case "H":w=J+"\\d|1\\d|2[0-3]";break;case "K":w=J+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":w=J+"\\d|[0-5]\\d";break;case "S":w="\\d{"+H+"}";break;case "a":H=k.am||m["dayPeriods-format-wide-am"];J=k.pm||m["dayPeriods-format-wide-pm"];
k.strict?w=H+"|"+J:(w=H+"|"+J,H!=H.toLowerCase()&&(w+="|"+H.toLowerCase()),J!=J.toLowerCase()&&(w+="|"+J.toLowerCase()));break;default:w=".*"}t&&t.push(r);return"("+w+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var l=v.getObject("date.islamic.locale",!0,E);l.format=function(t,m){m=m||{};var k=n.normalizeLocale(m.locale),p=m.formatLength||"short",r=l._getIslamicBundle(k),w=[];k=v.hitch(this,b,t,r,k,m.fullYear);if("year"==m.selector)return t.getFullYear();"time"!=m.selector&&(t=m.datePattern||r["dateFormat-"+
p])&&w.push(d(t,k));"date"!=m.selector&&(m=m.timePattern||r["timeFormat-"+p])&&w.push(d(m,k));return w.join(" ")};l.regexp=function(t){return l._parseInfo(t).regexp};l._parseInfo=function(t){t=t||{};var m=n.normalizeLocale(t.locale);m=l._getIslamicBundle(m);var k=t.formatLength||"short",p=t.datePattern||m["dateFormat-"+k];k=t.timePattern||m["timeFormat-"+k];var r=[];return{regexp:d("date"==t.selector?p:"time"==t.selector?k:"undefined"==typeof k?p:p+" "+k,v.hitch(this,g,r,m,t)),tokens:r,bundle:m}};
l.parse=function(t,m){t=t.replace(/[\u200E\u200F\u202A\u202E]/g,"");m||(m={});var k=l._parseInfo(m),p=k.tokens,r=k.bundle;k=k.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");t=(new RegExp("^"+k+"$")).exec(t);n.normalizeLocale(m.locale);if(!t)return null;var w=[1389,0,1,0,0,0,0],H="",J=["abbr","wide","narrow"];z.every(t,function(K,R){if(!R)return!0;R=p[R-1];var X=R.length;switch(R.charAt(0)){case "y":w[0]=Number(K);break;case "M":if(2<X){if(R=r["months-format-"+J[X-3]].concat(),m.strict||(K=K.replace(".",
"").toLowerCase(),R=z.map(R,function(W){return W?W.replace(".","").toLowerCase():W})),K=z.indexOf(R,K),-1==K)return!1}else K--;w[1]=Number(K);break;case "D":w[1]=0;case "d":w[2]=Number(K);break;case "a":R=m.am||r["dayPeriods-format-wide-am"];X=m.pm||r["dayPeriods-format-wide-pm"];if(!m.strict){var T=/\./g;K=K.replace(T,"").toLowerCase();R=R.replace(T,"").toLowerCase();X=X.replace(T,"").toLowerCase()}if(m.strict&&K!=R&&K!=X)return!1;H=K==X?"p":K==R?"a":"";break;case "K":24==K&&(K=0);case "h":case "H":case "k":w[3]=
Number(K);break;case "m":w[4]=Number(K);break;case "s":w[5]=Number(K);break;case "S":w[6]=Number(K)}return!0});t=+w[3];"p"===H&&12>t?w[3]=t+12:"a"===H&&12==t&&(w[3]=0);return new c(w[0],w[1],w[2],w[3],w[4],w[5],w[6])};var A=[];l.addCustomFormats=function(t,m){A.push({pkg:t,name:m})};l._getIslamicBundle=function(t){var m={};z.forEach(A,function(k){k=n.getLocalization(k.pkg,k.name,t);m=v.mixin(m,k)},this);return m};l.addCustomFormats("dojo.cldr","islamic");l.getNames=function(t,m,k,p,r){p=l._getIslamicBundle(p);
t=[t,k,m];if("standAlone"==k){k=t.join("-");var w=p[k];1==w[0]&&(w=void 0)}t[1]="format";return(w||p[t.join("-")]).concat()};l.weekDays=l.getNames("days","wide","format");l.months=l.getNames("months","wide","format");return l})},"url:dijit/templates/ProgressBar.html":'\x3cdiv class\x3d"dijitProgressBar dijitProgressBarEmpty" role\x3d"progressbar"\r\n\t\x3e\x3cdiv  data-dojo-attach-point\x3d"internalProgress" class\x3d"dijitProgressBarFull"\r\n\t\t\x3e\x3cdiv class\x3d"dijitProgressBarTile" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3cspan style\x3d"visibility:hidden"\x3e\x26#160;\x3c/span\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"dijitProgressBarLabel" id\x3d"${id}_label"\x3e\x3c/div\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"indeterminateHighContrastImage"\r\n\t\t   class\x3d"dijitInline dijitProgressBarIndeterminateHighContrastImage"\x3e\x3c/span\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/dijit/editing/templates/AttachmentEditor.html":"\x3cdiv class\x3d\"attachmentEditor\"\x3e\r\n    \x3cbr /\x3e\r\n    \x3cdiv\x3e\r\n        \x3cb\x3e${NLS_attachments}\x3c/b\x3e\r\n        \x3chr /\x3e\r\n        \x3cdiv dojoAttachPoint\x3d\"_attachmentError\" style\x3d'color:red;display:none'\x3e\x3c/div\x3e\r\n        \x3cbr /\x3e\r\n        \x3cspan dojoAttachPoint\x3d'_attachmentList' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e\r\n        \x3cbr\x3e\x3cbr\x3e\r\n        \x3cdiv data-dojo-type\x3d\"dijit/ProgressBar\" dojoAttachPoint\x3d\"_attachmentProgress\" indeterminate\x3d\"true\" style\x3d'display:none'\x3e\x3c/div\x3e\r\n        \x3cbr /\x3e        \r\n        \x3cform dojoAttachPoint\x3d'_uploadForm'\x3e ${NLS_add}:\x26nbsp;\x26nbsp;\x3cinput type\x3d'file' name\x3d'attachment' dojoAttachPoint\x3d'_uploadField' /\x3e \x3c/form\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}"\r\n\trole\x3d"combobox"\r\n\taria-haspopup\x3d"true"\r\n\tdata-dojo-attach-point\x3d"_popupStateNode"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\r\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\r\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/dijit/templates/AttributeInspector.html":'\x3cdiv class\x3d"esriAttributeInspector"\x3e\r\n    \x3cdiv class\x3d"atiLayerName" dojoAttachPoint\x3d"layerName"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"atiAttributes" dojoAttachPoint\x3d"attributeTable"\x3e\x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"attachmentEditor"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"atiEditorTrackingInfo" dojoAttachPoint\x3d"editorTrackingInfoDiv"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"atiButtons" dojoAttachPoint\x3d"editButtons"\x3e\r\n        \x3cbutton  dojoType\x3d"dijit.form.Button" class\x3d"atiButton atiDeleteButton"  dojoAttachPoint\x3d"deleteBtn" dojoAttachEvent\x3d"onClick: onDeleteBtn" showLabel\x3d"true" type\x3d"button"\x3e${NLS_deleteFeature}\x3c/button\x3e\r\n        \x3cdiv class\x3d"atiNavButtons" dojoAttachPoint\x3d"navButtons"\x3e\r\n            \x3cdiv class\x3d"atiNavMessage" dojoAttachPoint\x3d"navMessage"\x3e\x3c/div\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiFirstIcon" dojoAttachPoint\x3d"firstFeatureButton" dojoAttachEvent\x3d"onClick: onFirstFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_first}\x3c/button\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiPrevIcon" dojoAttachPoint\x3d"prevFeatureButton" dojoAttachEvent\x3d"onClick: onPreviousFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_previous}\x3c/button\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiNextIcon" dojoAttachPoint\x3d"nextFeatureButton" dojoAttachEvent\x3d"onClick: onNextFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_next}\x3c/button\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiLastIcon" dojoAttachPoint\x3d"lastFeatureButton" dojoAttachEvent\x3d"onClick: onLastFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_last}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"*now":function(E){E(['dojo/i18n!*preload*esri/dijit/nls/AttributeInspector-all*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});define("esri/dijit/AttributeInspector-all",["../layers/FeatureLayer","./AttributeInspector"],function(E,v){return{}});