// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/SymbolStyler/templates/ColorRampPicker.html":'\x3cdiv\x3e\r\n  \x3cdiv\x3e\r\n  \x3cdiv class\x3d"${css.container}"\x3e\r\n    \x3cdiv class\x3d"${css.preview} ${css.item}"\r\n         data-dojo-attach-point\x3d"dap_previewRamp"\x3e\x3c/div\x3e\r\n    \x3cinput class\x3d"${css.flipper}" type\x3d"button" data-dojo-attach-point\x3d"dap_colorFlipper" /\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.container}"\x3e\r\n    \x3cdiv class\x3d"${css.viewport}"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_colorRampPicker"\r\n           class\x3d"${css.list}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.container} ${css.transparencySection}" data-dojo-attach-point\x3d"dap_transparencySection"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dap_transparencyLabel" class\x3d"${css.label}"\x3e${labels.transparency}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dap_transparencySlider"\r\n         data-dojo-type\x3d"esri/dijit/HorizontalSlider"\r\n         data-dojo-props\x3d"intermediateChanges: true, minimum: 0, maximum: 1, discreteValues: 100, labels: ${_transparencyLabels}"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n'}});
define("esri/dijit/SymbolStyler/ColorRampPicker","../../kernel ../_EventedWidget ../_Tooltip ./_DelayedUpdate ./colorRampUtil ./schemeUtil ./stylerUtil dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/a11yclick dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/on dojo/query dojo/i18n!../../nls/jsapi dojo/text!./templates/ColorRampPicker.html dojo/NodeList-dom dijit/form/Button esri/dijit/HorizontalSlider".split(" "),function(t,
h,u,v,m,d,w,x,y,n,g,z,f,p,l,D,A,k,q,r,B){h=z("esri.dijit.SymbolStyler.ColorRampPicker",[h,x,y,v,u],{baseClass:"esriColorRampPicker",templateString:B,labels:r.widgets.symbolEditor,css:{item:"esriItem",label:"esriLabel",selected:"esriSelected",container:"esriContainer",list:"esriList",preview:"esriPreview",flipper:"esriFlipper",viewport:"esriViewport",transparencySection:"esriColorRampPickerTransparencySection"},schemes:null,selected:null,numStops:0,_schemesChanged:!1,_selectedChanged:!1,_numStopsChanged:!1,
_orientationChanged:!1,_transparencyChanged:!1,_commitPropsTrigger:null,_colorRampSurfaces:null,_previewRampSurface:null,_rampsAndSchemes:null,_transparency:null,_transparencyLabels:function(){return"["+[0,50,100].map(function(a){return f.replace(r.widgets.colorPicker.percent,{percent:a})}).map(function(a){return"'"+a+"'"})+"]"}(),constructor:function(a){this._colorRampSurfaces=[];this._commitPropsTrigger=this.createUpdateTrigger(this._commitProperties,this)},_commitProperties:function(){var a=!1,
b=!1;if(this._schemesChanged||this._numStopsChanged)this._numStopsChanged=this._schemesChanged=!1,this._rampsAndSchemes=a=d.getColorRampsWithSchemes(this.schemes,this.numStops),a=!0;if(this._transparencyChanged){this._transparencyChanged=!1;var c=1-this._transparency;g.forEach(this.selected.colors,function(e){e.a=c});b=!0}this._selectedChanged&&(this._selectedChanged=!1,b=!0);this._orientationChanged&&(this._orientationChanged=!1,a=b=!0);this.selected||this.set("selected",this._rampsAndSchemes[0]);
b&&this._renderSelected();a&&this._renderSuggestions()},_renderSuggestions:function(){var a=this._rampsAndSchemes,b=this._colorRampSurfaces,c=this.dap_colorRampPicker;l.empty(c);b.forEach(function(e){e.destroy()});this._colorRampSurfaces=g.map(a,function(e){var C=l.create("div",{className:this.css.item,tabIndex:0},c);return m.create({node:C,colors:e.colors,numClasses:this.numStops,style:"ramp"})},this)},_renderSelected:function(){var a=this.selected.colors,b=this.dap_previewRamp,c=d.is2DScheme(this.selected.scheme);
this._previewRampSurface&&(this._previewRampSurface.destroy(),this._previewRampSurface=null,l.empty(b));p.toggle(b,"esriGrid",c);this._previewRampSurface=m.create({node:b,colors:a,numClasses:this.numStops,height:c?void 0:180,style:c?"grid":"ramp"});this.findTooltip(this.dap_colorFlipper).label=c?this.labels.rotateColorsTooltip:this.labels.flipColorsTooltip},getStyle:function(){return this.get("selected")},_setSchemesAttr:function(a){this._schemesChanged=!0;this._set("schemes",d.cloneScheme(a));this._commitPropsTrigger()},
_getSelectedAttr:function(){var a=this.selected,b={colors:d._createColors(a.colors)};a.scheme&&(b.scheme=d.cloneScheme(a.scheme));return b},_setSelectedAttr:function(a){f.isArray(a)&&(a={colors:a});var b=this._hasSameColors(a.colors);this._transparency=null===this._transparency?b?0:1-a.colors[a.colors.length-1].a:this._transparency;w.silentlyUpdateIntermediateChangingValueWidget(this.dap_transparencySlider,this._transparency);this._transparencyChanged=!b;this.dap_transparencySlider.set("disabled",
b,!1);this._selectedChanged=!0;this._set("selected",a);this._commitPropsTrigger();this.emit("color-ramp-change",this.get("selected"))},_hasSameColors:function(a){var b=a[0];return g.every(a,function(c){var e=c.r===b.r&&c.g===b.g&&c.b===b.b;b=c;return e})},_setNumStopsAttr:function(a){this._numStopsChanged=!0;this._set("numStops",0<a?a:0);this._commitPropsTrigger()},postCreate:function(){this.inherited(arguments);this._addHandlers();this.createTooltips([{node:this.dap_colorFlipper,label:this.labels.flipColorsTooltip},
{node:this.dap_colorRampPicker,label:this.labels.selectRampTooltip}])},_addHandlers:function(){this.own(k(this.dap_colorRampPicker,k.selector("."+this.css.item,n),f.partial(this._rampClickHandler,this)),k(this.dap_colorFlipper,n,f.hitch(this,function(){this.flipColors()})),k(this.dap_transparencySlider,"change",f.hitch(this,function(){this._transparency=this.dap_transparencySlider.get("value");this._transparencyChanged=!0;this._commitPropsTrigger()})))},_rampClickHandler:function(a){var b=a.css.selected,
c="."+a.css.item,e=q("."+a.css.item,a.dap_colorRampPicker).indexOf(this);q(c,a.dap_colorRampPicker).removeClass(b);p.add(this,b);a.set("selected",a._rampsAndSchemes[e])},flipColors:function(){var a=this._rampsAndSchemes,b=this.selected;g.forEach(a,function(c){d.flipColors(c.scheme)});-1===a.map(function(c){return c.scheme}).indexOf(b.scheme)&&d.flipColors(b.scheme);d.is2DScheme(b.scheme)?b.colors=d.getColorsForClassBreaks(b.scheme,this.numStops):b.colors.reverse();this._schemesChanged=this._orientationChanged=
!0;this.set("selected",b);this._commitPropsTrigger()},destroy:function(){this.inherited(arguments);g.forEach(this._colorRampSurfaces,function(a){a.destroy()});this._previewRampSurface&&this._previewRampSurface.destroy()}});A("extend-esri")&&f.setObject("dijit.SymbolStyler.ColorRampPicker",h,t);return h});