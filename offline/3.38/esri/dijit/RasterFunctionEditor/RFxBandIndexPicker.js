// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/RasterFunctionEditor/templates/RFxBandIndexPicker.html":"\x3cdiv class\x3d'esriRFxBandIndexPicker'\x3e\r\n  \x3cdiv data-dojo-type\x3d'dijit/form/ComboBox' data-dojo-attach-point\x3d'_comboBox' data-dojo-attach-event\x3d'onChange: _handleComboBoxChange'\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n"}});
define("esri/dijit/RasterFunctionEditor/RFxBandIndexPicker","dojo/_base/declare dojo/_base/lang dojo/has dojo/Deferred dojo/store/Memory dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../lang ../../kernel dojo/text!./templates/RFxBandIndexPicker.html".split(" "),function(e,d,g,h,k,l,m,n,p,q,r){e=e([l,m,n],{templateString:r,postCreate:function(){this.inherited(arguments);this._setOptionsFromNBandsArg(this.nBandsArg);this._attachNBandsArgChangeEvent()},_attachNBandsArgChangeEvent:function(){this.nBandsArg&&
this.nBandsArg.input&&this.own(this.nBandsArg.input.on("change",d.hitch(this,this._setOptionsFromNBandsArg,this.nBandsArg)))},_setOptionsFromNBandsArg:function(a){if(a&&a.input&&"function"===typeof a.input.getSelectedLayer){var b=a.input.getSelectedLayer();if(b)if(p.isDefined(b.bandCount))this._onLayerLoad(b);else b.on("load",d.hitch(this,function(){this._onLayerLoad(b)}));else this._makeSelectReadOnly(!1),this._createFallbackOptions(this.value)}else this.set("options",this._createFallbackOptions(this.value))},
_onLayerLoad:function(a){this._getBandCount(a).then(d.hitch(this,function(b){this._populateComboBox(b)}),d.hitch(this,function(){this._populateComboBox(a.bandCount)}))},_getBandCount:function(a){var b=new h;a||b.reject();if(a.renderingRule&&10.3<=a.currentVersion)return a.getRenderingRuleServiceInfo(a.renderingRule).then(function(f){return f?f.bandCount:a.bandCount});var c=a.bandCount;void 0===c&&null===c||b.resolve(c);return b.promise},_populateComboBox:function(a){for(var b=0,c=[];b<a;)c.push({id:b,
name:String(b+1)}),b++;this._setComboBoxStore(c)},_createFallbackOptions:function(a){null!=a&&""!==a&&this._setComboBoxStore([{id:0,name:+a+1}])},_setComboBoxStore:function(a){a=new k({data:a,idProperty:"id"});this._comboBox.set("store",a);this._comboBox.set("value",+this.value+1)},_makeSelectReadOnly:function(a){this._comboBox.textbox.readOnly=a},_handleComboBoxChange:function(a){this.value=+a-1}});g("extend-esri")&&d.setObject("dijit.RasterFunctionEditor.RFxBandIndexPicker",e,q);return e});