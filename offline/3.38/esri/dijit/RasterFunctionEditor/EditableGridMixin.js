// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/RasterFunctionEditor/EditableGridMixin","dojo/_base/declare dojo/has dojo/query ../../kernel dojo/dom-construct dojo/_base/array dojo/_base/lang dojo/dom-class dojo/Evented".split(" "),function(h,m,n,p,t,k,f,q,r){h=h([r],{attachGridEvents:function(){this.own(this._grid.on("dgrid-datachange",f.hitch(this,"_onDataChange")),this._grid.on(".dgrid-content .dgrid-cell:mouseover",f.hitch(this,"_onGridMouseOver")),this._grid.on(".dgrid-content .dgrid-cell:mouseout",f.hitch(this,"_onGridMouseOut")),
this._grid.on(".dgrid-content .dgrid-cell:click",f.hitch(this,"_onGridCellClick")))},_addBlankObject:function(){var a=this._store.data,b=this._store,d=this._grid;a.length&&(a[a.length-1].idNum=a.length);var c={id:a.length?a[a.length-1].id+1:1,idNum:"*"};if(this.defaultBlankObject){var g=f.clone(this.defaultBlankObject);k.forEach(Object.keys(g),function(e){c[e]=g[e]},this)}else k.forEach(Object.keys(d.columns),function(e){e=d.columns[e];var l=e.field;"idNum"!==l&&"id"!==l&&(c[e.field]="")});b.add(c)},
_onDataChange:function(a){var b=this._grid;a&&("*"===a.cell.row.data.idNum&&this._addBlankObject(),a.cell.row.data[a.cell.column.field]=a.value);b.refresh();this.emit("change",{bubbles:!1,cancelable:!1})},_onGridMouseOver:function(a){this._toggleDeleteButton(a,!0)},_onGridMouseOut:function(a){this._toggleDeleteButton(a,!1)},_toggleDeleteButton:function(a,b){var d=this._grid,c=this._store.data.length;a=d.cell(a);var g;a&&a.row&&(g=n(".field-idNum",a.row.element)[0]);if(1<c&&g){for(c=0;c<this.dataLength;c++)d.store.data[c].idNum=
c+1;void 0!==a.column&&"*"!=a.row.data.idNum&&q.toggle(g,"esriBandMatrixDeleteIcon",b)}},_onGridCellClick:function(a){var b=this._grid,d=this._store.data.length;a=b.cell(a);if(1<d&&"*"!=a.row.data.idNum&&"idNum"===a.column.field){b.store.remove(a.row.data.id);for(a=0;a<d-2;a++)b.store.data[a].idNum=a+1;b.store.data[d-2].idNum="*";b.refresh();this.emit("change",{bubbles:!1,cancelable:!1})}}});m("extend-esri")&&f.setObject("dijit.RasterFunctionEditor.EditableGridMixin",h,p);return h});