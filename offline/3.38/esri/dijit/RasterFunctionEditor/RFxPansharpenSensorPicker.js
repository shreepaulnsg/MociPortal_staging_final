// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/RasterFunctionEditor/templates/RFxPansharpenSensorPicker.html":'\x3cdiv\x3e\r\n  \x3ctable class\x3d"esri-rfx-args-editor__table"\x3e\r\n    \x3ctr class\x3d"esri-rfx-args-editor__tr--arg-name esri-rfx-pansharpen-sensor-picker"\x3e\r\n      \x3ctd data-dojo-attach-point\x3d"fieldLabel" data-key\x3d"factorFunction"\x3e\x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3ctr class\x3d"esri-rfx-args-editor__tr--arg-widget esri-rfx-pixel-type-filter"\x3e\r\n      \x3ctd\x3e\r\n        \x3cselect dojoType\x3d"dijit.form.Select" data-dojo-attach-point\x3d"_templateNode"\r\n          declaredClass\x3d"RFxPansharpenSensorPicker"\x3e\x3c/select\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/dijit/RasterFunctionEditor/RFxPansharpenSensorPicker","dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array dojo/store/Memory dojo/data/ObjectStore dojo/i18n!../../nls/jsapi dojo/text!./templates/RFxPansharpenSensorPicker.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../kernel".split(" "),function(d,g,h,e,k,l,m,n,p,q,r,t){d=d("RFxPansharpenSensorPicker",[p,q,r],{widgetsInTemplate:!0,templateString:n,declaredClass:"esri.widgets.ToolModeler.RasterFunctionEditor.ArgumentEditors.RFxPansharpenSensorPicker",
sensorPickerStore:[],sensorList:[{name:"DubaiSat-2",pansharpenWeights:[.166,.167,.167,.5]},{name:"GeoEye-1",pansharpenWeights:[.41,.16,.13,.3]},{name:"GF-1 PMS",pansharpenWeights:[.2501,.3646,0,.3853]},{name:"GF-2 PMS",pansharpenWeights:[.2501,.3646,0,.3853]},{name:"IKONOS",pansharpenWeights:[.378,.211,0,.411]},{name:"Jilin-1",pansharpenWeights:[.2501,.3646,0,.5]},{name:"KOMPSAT-2",pansharpenWeights:[.166,.167,.167,.5]},{name:"KOMPSAT-3",pansharpenWeights:[.166,.167,.167,.5]},{name:"Landsat 1-5  MSS",
pansharpenWeights:[0,0,0,0]},{name:"Landsat 7  ETM+",pansharpenWeights:[.11,.14,.14,.61]},{name:"Landsat 8",pansharpenWeights:[.42,.51,.07,0]},{name:"Pleiades-1",pansharpenWeights:[.9,.75,.5,.5]},{name:"QuickBird",pansharpenWeights:[.85,.7,.35,1]},{name:"SkySat",pansharpenWeights:[.41,.16,.13,.3]},{name:"SPOT 5",pansharpenWeights:[.166,.167,.167,.5]},{name:"SPOT 6",pansharpenWeights:[.45,.55,0,0]},{name:"SPOT 7",pansharpenWeights:[.45,.55,0,0]},{name:"TH-01",pansharpenWeights:[.329,.509,0,.162]},
{name:"UltraCam",pansharpenWeights:[.326,.645,.029,0]},{name:"WorldView-2",pansharpenWeights:[.39,.23,.21,.17]},{name:"WorldView-3",pansharpenWeights:[.38,.25,.2,.16]},{name:"WorldView-4",pansharpenWeights:[.39,.23,.21,.17]},{name:"ZY1-02C PMS",pansharpenWeights:[0,0,0,0]},{name:"ZY3-CRESDA",pansharpenWeights:[0,0,0,0]},{name:"ZY3-SASMAC",pansharpenWeights:[.329,.509,0,.162]}],constructor:function(){this.inherited(arguments);this._i18n=m.rasterFunctionEditor},postCreate:function(){this.inherited(arguments);
this._setLabels();this._setPickerList();this._attachSensorChangeListener()},_getPersistedValue:function(){var a;Object.keys(this.inputArgs).forEach(function(b){a=this.inputArgs[b].value}.bind(this));return a},_setInputArgValue:function(a){Object.keys(this.inputArgs).forEach(function(b){this.inputArgs[b].value=a}.bind(this));this.emit("change",{value:a})},_getFunctionName:function(a){return a.ToolName?a.ToolName.value.replace("_sa",""):a.type.replace("Arguments","")},_setSensorPickerStore:function(a){var b=
this._createObjectStore(a,"key");this._templateNode.set("store",b);b=a[0]&&a[0].key;var c=this._getPersistedValue();c&&e.some(a,function(f){return f.key===c})&&(b=c);this._templateNode.set("value",b);this._setInputArgValue(b)},_createObjectStore:function(a,b){return new l(new k({data:a,idProperty:b}))},_normaliseWeights:function(a){return[a.reduce(function(b,c,f){b[f]=c;return b},{})]},_setLabels:function(){this.inputArgs&&e.forEach(Object.keys(this.inputArgs),function(a){a=this.inputArgs[a];this.fieldLabel.innerHTML=
a.displayName;a.input=this._templateNode}.bind(this))},_setPickerList:function(){var a=this._getFunctionName(this.rfxArgs),b=(a=this.rasterFunctions[a])&&a.rasterFunctionArguments;e.forEach(Object.keys(this.inputArgs),function(c){(c=b[c].domain)&&"list"===c.type&&(this.sensorPickerStore=g.clone(this.rasterFunctionEnums[c.enum]))},this);e.forEach(this.sensorPickerStore,function(c){c.key=c.key.toString()});this.sensorPickerStore||console.error("Domain list Enum not set! Check Schema");this.sensorPickerStore=
this.sensorPickerStore.concat(this.sensorList.map(function(c){return{key:c.name,label:c.name}}));this._setSensorPickerStore(this.sensorPickerStore)},_attachSensorChangeListener:function(){this._templateNode.on("change",this._handleSensorChange.bind(this))},_handleSensorChange:function(a){this._setInputArgValue(a);var b=this.sensorList.filter(function(c){return c.name===a}.bind(this))[0];b=this._normaliseWeights(b?b.pansharpenWeights:[.166,.167,.167,.5]);this.triggerArgs.Weights.input.updateValue(b);
this.triggerArgs.Weights.input.refreshGrid()}});h("extend-esri")&&g.setObject("dijit.RasterFunctionEditor.RFxPansharpenSensorPicker",d,t);return d});