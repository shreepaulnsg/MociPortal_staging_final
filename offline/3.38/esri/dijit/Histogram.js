// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/Histogram/templates/Histogram.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${css.container}" data-dojo-attach-point\x3d"_containerNode"\x3e\r\n    \x3cdiv class\x3d"${css.topLabel}" data-dojo-attach-point\x3d"_topLabelNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.svgContainer}" data-dojo-attach-point\x3d"_svgContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.bottomLabel}" data-dojo-attach-point\x3d"_bottomLabelNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("esri/dijit/Histogram","require ../kernel dijit/_TemplatedMixin dijit/_WidgetBase dijit/Tooltip dojo/has dojo/on dojo/string dojo/number dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/date/locale dojox/gfx dojo/i18n!../nls/jsapi dojo/text!./Histogram/templates/Histogram.html".split(" "),function(t,u,h,v,n,w,D,m,p,k,x,y,E,F,q,G,l,z,r,A,B){h=x([v,h],{declaredClass:"esri.dijit.Histogram",baseClass:"esri-histogram",
templateString:B,data:null,statistics:null,isDate:!1,css:{container:"esri-histogram-container",topLabel:"esri-histogram-top-label",svgContainer:"esri-histogram-svg-container",bottomLabel:"esri-histogram-bottom-label",surface:"esri-histogram-surface",group:"esri-histogram-group",bar:"esri-histogram-bar"},_surface:null,_countTooltips:null,_barsGroup:null,_defaultImagePadding:30,_defaultBarPadding:40,_i18n:A.widgets.histogram,constructor:function(a,b){this._countTooltips=[]},startup:function(){this.inherited(arguments);
this._syncContainerSizes();this._surface=this._generateSurface();this._barsGroup=this._generateBarsGroup();this.statistics&&(this._generateLines(),this._generateCountTooltips());this._updateLabels()},_syncContainerSizes:function(){this._nodeDimensions=l.getMarginBox(this.domNode);this._topLabelHeight=l.getMarginBox(this._topLabelNode).h;this._bottomLabelHeight=l.getMarginBox(this._bottomLabelNode).h;this._svgContainer.setAttribute("style","height: "+(this._nodeDimensions.h-(this._topLabelHeight+this._bottomLabelHeight)-
1)+"px;");this._svgContainerDimensions=l.getMarginBox(this._svgContainer)},_updateLabels:function(){var a=this.data.maxValue,b=this.data.minValue;this._topLabelNode.innerHTML=this.isDate?this._getFormattedDate(a):this._getLocaleFormattedNumber(a);this._bottomLabelNode.innerHTML=this.isDate?this._getFormattedDate(b):this._getLocaleFormattedNumber(b)},_generateSurface:function(){var a=r.createSurface(this._svgContainer,"100%","100%");a.rawNode.setAttribute("class",this.css.surface);return a},_generateBarsGroup:function(){var a=
this.data,b=this._defaultBarPadding,d;var c=this._surface.createGroup();c.rawNode.setAttribute("class",this.css.group);var f=k.map(a.bins,function(e){return"object"===typeof e?e.count:e});f.reverse();var g=(this._svgContainerDimensions.h-1)/f.length;k.forEach(f,function(e,C){d=Math.round(0<e?(this._svgContainerDimensions.w-b)*(e/Math.max.apply(Math,f)):0);e=c.createRect({width:d,height:g}).setFill("#aaa").setTransform(r.matrix.translate(1,g*C-1)).setStroke({color:"#FFF",width:2});e.rawNode.setAttribute("class",
this.css.bar);e.rawNode.setAttribute("shape-rendering","crispEdges")},this);return c},_generateLines:function(){var a=this.statistics,b=this._svgContainerDimensions.h;var d=this.isDate?this._getFormattedDate(a.avg):this._getLocaleFormattedNumber(this._roundValueForLabel(a.avg));d=m.substitute(this._i18n.statsAvg,{avg:d});var c=this._getLocaleFormattedNumber(this._roundValueForLabel(a.stddev));c=m.substitute(this._i18n.statsSD,{sd:c});var f={color:"#667",style:"Dot"};this._generateLine({label:d,lineStroke:{color:"#667"},
imageURL:"esri/dijit/Histogram/images/xAvg.png",yAxisAlignment:b*(a.max-a.avg)/(a.max-a.min),imagePadding:this._defaultImagePadding});this._generateLine({label:c,lineStroke:f,imageURL:"esri/dijit/Histogram/images/sd.png",yAxisAlignment:b*(a.max-a.avg-a.stddev)/(a.max-a.min),imagePadding:this._defaultImagePadding+10});this._generateLine({label:c,lineStroke:f,imageURL:"esri/dijit/Histogram/images/sd.png",yAxisAlignment:b*(a.max-a.avg+a.stddev)/(a.max-a.min),imagePadding:this._defaultImagePadding+10})},
_generateLine:function(a){var b=this._surface,d=this._svgContainerDimensions.h,c=a.yAxisAlignment,f=a.imageURL,g=a.lineStroke,e=a.label;a=a.imagePadding;g=b.createLine({x1:0,x2:this._svgContainerDimensions.w-a,y1:c,y2:c}).setStroke(g);g.rawNode.setAttribute("shape-rendering","crispEdges");b=b.createImage({x:this._svgContainerDimensions.w-a,y:c-6,width:12,height:14,src:t.toUrl(f)});new n({connectId:[b.rawNode],label:e});d=c>d||0>c?"none":"block";q.set(g.rawNode,"display",d);q.set(b.rawNode,"display",
d)},_generateCountTooltips:function(){var a=k.map(this.data.bins,function(b){return"object"===typeof b?b.count:b});a.reverse();k.forEach(a,function(b,d){b=m.substitute(this._i18n.count,{count:b});this._countTooltips.push(new n({connectId:[this._barsGroup.children[d].rawNode],label:b}))},this)},_getLocaleFormattedNumber:function(a){return isNaN(a)?null:p.format(a)},_getFormattedDate:function(a){return z.format(new Date(a))},_roundValueForLabel:function(a){return p.round(a,this._getRoundingPrecision(a))},
_getRoundingPrecision:function(a){return 1E3<=a?0:10<=a?2:0<=a?4:6}});w("extend-esri")&&y.setObject("dijit.Histogram",h,u);return h});