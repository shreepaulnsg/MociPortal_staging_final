// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/dijit/FeatureTable/storeUtils","./dataUtils dojo/_base/array dojo/_base/lang dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/store/util/QueryResults ../FeatureLayerQueryStore".split(" "),function(n,q,w,r,p,t,u,v){return{generateMemoryStore:function(a){var d=a.idProperty;a=q.map(a.features,function(h){return h.attributes});return new t(new p({data:a,idProperty:d}))},generateCacheStore:function(a){var d=a.grid,h=a.layer,e=a.ids||null,l=e&&e.length?e.length:d.featureCount,
k=a.orderByFields,b=a.where||null,c=a.batchCount||25,g=a.getAttachments||!1;a=a.getRelatedRecords||!1;d=new p({idProperty:d.idProperty});h=new v({layer:h,objectIds:e,totalCount:l,batchCount:c,where:b||"1\x3d1",orderByFields:k,getAttachments:g,getRelatedRecords:a});return new r(h,d)},generateSort:function(a,d,h,e){var l=function(){return function(b,c){var g=k[0],m=parseInt(g.columnId,10),f=g.attribute;"esriAttachments"!==f&&"esriRelatedRecords"!==g.fieldType||"undefined"===typeof m?(b=b[f]&&b[f].toLowerCase?
b[f].toLowerCase():b[f],c=c[f]&&c[f].toLowerCase?c[f].toLowerCase():c[f]):(b=a.columns[m].get(b),c=a.columns[m].get(c));b=n.isValueEmpty(b)?null:b.valueOf();c=n.isValueEmpty(c)?null:c.valueOf();return null===b&&null!==c?g.descending?-1:1:null!==b&&null===c?g.descending?1:-1:b===c?0:(b>c?1:-1)*(g.descending?-1:1)}},k=e&&e.sort;k&&"function"!==typeof k&&(e.sort=l());return new u(d.queryEngine(h,e)(d.data))}}});