// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/tasks/IdentifyParameters","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../layerUtils ../geometry/jsonUtils ../geometry/scaleUtils".split(" "),function(v,q,k,e,w,x,l,y,z){var f=v(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=f.LAYER_OPTION_TOP},geometry:null,spatialReference:null,layerIds:null,tolerance:null,returnGeometry:!1,returnFieldName:!1,returnUnformattedValues:!1,mapExtent:null,width:400,height:400,
dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(a){var c=a&&a.geometry||this.geometry,b=this.mapExtent,m=this.spatialReference,r=this.layerIds;a={tolerance:this.tolerance,returnGeometry:this.returnGeometry,returnFieldName:this.returnFieldName,returnUnformattedValues:this.returnUnformattedValues,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision};if(c){var t=
c.toJson();delete t.spatialReference;a.geometry=e.toJson(t);a.geometryType=y.getJsonType(c)}m?a.sr=m.wkid||e.toJson(m.toJson()):c&&c.spatialReference?a.sr=c.spatialReference.wkid||e.toJson(c.spatialReference.toJson()):b&&b.spatialReference&&(a.sr=b.spatialReference.wkid||e.toJson(b.spatialReference.toJson()));b&&(a.mapExtent=b.xmin+","+b.ymin+","+b.xmax+","+b.ymax);a.layers=this.layerOption;r&&(a.layers+=":"+r.join(","));a.layerDefs=l._serializeLayerDefinitions(this.layerDefinitions,!0);c=this.timeExtent;
a.time=c?c.toJson().join(","):null;a.layerTimeOptions=l._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){b=z.getScale({extent:b,width:this.width,spatialReference:b.spatialReference});var A=l._getLayersForScale(b,this.dynamicLayerInfos),u=[];k.forEach(this.dynamicLayerInfos,function(g){if(!g.subLayerIds){var d=g.id;if((!this.layerIds||this.layerIds&&-1!==k.indexOf(this.layerIds,d))&&-1!==k.indexOf(A,d)){var h={id:d};h.source=g.source&&g.source.toJson();
var n;this.layerDefinitions&&this.layerDefinitions[d]&&(n=this.layerDefinitions[d]);n&&(h.definitionExpression=n);var p;this.layerTimeOptions&&this.layerTimeOptions[d]&&(p=this.layerTimeOptions[d]);p&&(h.layerTimeOptions=p.toJson());u.push(h)}}},this);b=e.toJson(u);"[]"===b&&(b="[{}]");a.dynamicLayers=b}return a}});q.mixin(f,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"});w("extend-esri")&&q.setObject("tasks.IdentifyParameters",f,x);return f});