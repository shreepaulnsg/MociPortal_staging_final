// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/tasks/Task","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(h,k,l,m,n,p,q,r){h=h(r,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(a,b){a&&k.isString(a)&&(this._url=q.urlToObject(this.url=a));b&&b.requestOptions&&(this.requestOptions=b.requestOptions);this.normalization=!0;this._errorHandler=k.hitch(this,this._errorHandler);this.registerConnectEvents()},
_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},_encode:function(a,b,e){var f={},g;for(g in a)if("declaredClass"!==g){var d=a[g];var c=typeof d;if(null!==d&&void 0!==d&&"function"!==c)if(k.isArray(d)){f[g]=[];var t=d.length;for(c=0;c<t;c++)f[g][c]=this._encode(d[c])}else"object"===c?d.toJson&&(c=d.toJson(e&&e[g]),"esri.tasks.FeatureSet"===d.declaredClass&&c.spatialReference&&(c.sr=c.spatialReference,delete c.spatialReference),
f[g]=b?c:l.toJson(c)):f[g]=d}return f},_successHandler:function(a,b,e,f){b&&this[b].apply(this,a);e&&e.apply(null,a);f&&p._resDfd(f,a)},_errorHandler:function(a,b,e){this.onError(a);b&&b(a);e&&e.errback(a)},setNormalization:function(a){this.normalization=a},onError:function(){}});m("extend-esri")&&(n.Task=h);return h});