// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/tasks/DirectionsFeatureSet","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/json ../kernel ../geometry/Extent ../geometry/Polyline ../geometry/Point ../graphic ./FeatureSet".split(" "),function(q,t,m,v,w,x,y,u,z,A,B){q=q(B,{declaredClass:"esri.tasks.DirectionsFeatureSet",constructor:function(a,p){this.routeId=a.routeId;this.routeName=a.routeName;t.mixin(this,a.summary);this.extent=new y(this.envelope);var e=this._fromCompressedGeometry,f=this.features,g=this.extent.spatialReference,
h=[];m.forEach(p,function(c,b){f[b].setGeometry(h[b]=c?e(c,g):f[b].geometry)});this.mergedGeometry=this._mergePolylinesToSinglePath(h,g);this.geometryType="esriGeometryPolyline";m.forEach(a.events,function(c,b){m.forEach(c,function(d,k){c[k]=new A(new z(d.point.x,d.point.y,g),null,{ETA:d.ETA,strings:w.stringify(d.strings),arriveTimeUTC:d.arriveTimeUTC})});a.events[b]=c});delete this.envelope},_fromCompressedGeometry:function(a,p){var e=0,f=0,g=0,h=0,c=[],b=0,d=0,k=0;(a=a.match(/((\+|\-)[^\+\-\|]+|\|)/g))||
(a=[]);if(0===parseInt(a[b],32)){b=2;var l=parseInt(a[b],32);b++;var r=parseInt(a[b],32);b++;if(l&1){d=m.indexOf(a,"|")+1;var C=parseInt(a[d],32);d++}if(l&2){k=m.indexOf(a,"|",d)+1;var D=parseInt(a[k],32);k++}}else r=parseInt(a[b],32),b++;for(;b<a.length&&"|"!==a[b];){l=parseInt(a[b],32)+e;b++;e=l;var n=parseInt(a[b],32)+f;b++;f=n;l=[l/r,n/r];d&&(n=parseInt(a[d],32)+g,d++,g=n,l.push(n/C));k&&(n=parseInt(a[k],32)+h,k++,h=n,l.push(n/D));c.push(l)}e=new u({paths:[c],hasZ:0<d,hasM:0<k});e.setSpatialReference(p);
return e},_mergePolylinesToSinglePath:function(a,p){var e=[],f=!1;m.forEach(a,function(c){m.forEach(c.paths,function(b){f=f||c.hasM;e=e.concat(b)})});var g=[],h=[0,0];m.forEach(e,function(c){if(c[0]!==h[0]||c[1]!==h[1])g.push(c),h=c});return new u({paths:[g],spatialReference:p,hasM:f})}});v("extend-esri")&&t.setObject("tasks.DirectionsFeatureSet",q,x);return q});