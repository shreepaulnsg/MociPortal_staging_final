// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/tasks/locationproviders/StandardGeographyQueryLocationProvider","../../declare dojo/_base/lang dojo/_base/array dojo/string ../../lang ../../geometry/jsonUtils ./LocationProviderRemoteBase".split(" "),function(m,n,p,k,q,r,t){return m("esri.tasks.locationproviders.StandardGeographyQueryLocationProvider",t,{standardGeographyQueryTask:null,queryParameters:null,geographyQueryTemplate:null,geometryType:"esriGeometryPolygon",constructor:function(){this.queryParameters||(this.queryParameters=
{});this.queryParameters.returnCentroids&&(this.geometryType="esriGeometryPoint")},_batchWillOverflow:function(a,d){return 100<a.length+1},_locateBatch:function(a){var d=n.mixin({},this.queryParameters,{geographyQueries:p.map(a,function(b,e){b=b.expression;b.OBJECTID=e;return b})});q.isDefined(d.generalizationLevel)||(d.generalizationLevel=6);d.returnGeometry=!1===this.queryParameters.returnGeometry?!1:!0;return this.standardGeographyQueryTask.execute(d).then(function(b){for(var e=[],g=0;g<b.featureSet.features.length;g++){var f=
b.featureSet.features[g];if(f)for(var c=0;c<a.length;c++){var h=a[c];if(h.expression.OBJECTID==f.attributes.ResultID){for(c=0;c<h.features.length;c++){var l=h.features[c];f.geometry&&(l.geometry=r.fromJson(f.geometry),e.push(l))}break}}}return e})},_createKey:function(a,d){return k.substitute(this.geographyQueryTemplate,a.attributes)},_createQueryExpression:function(a){return{QUERY:k.substitute(this.geographyQueryTemplate,a.attributes)}}})});