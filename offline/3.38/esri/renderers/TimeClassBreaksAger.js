// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/renderers/TimeClassBreaksAger","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(n,p,g,q,r,t,u,v,w,x){var e=n(x,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(b,a){this.infos=b;this.timeUnits=a||"day";b.sort(function(c,d){return c.minAge<d.minAge?-1:c.minAge>d.minAge?1:0})},getAgedSymbol:function(b,a){var c=a.getLayer();a=a.attributes;var d=u.isDefined;b=v.fromJson(b.toJson());
var h=c._map.timeExtent.endTime;if(!h)return b;var k=r.difference(new Date(a[c._startTimeField]),h,this.timeUnits);p.some(this.infos,function(f){if(k>=f.minAge&&k<=f.maxAge){var l=f.color,m=f.size;f=f.alpha;l&&b.setColor(l);d(m)&&this._setSymbolSize(b,m);d(f)&&b.color&&(b.color.a=f);return!0}},this);return b},toJson:function(){var b={agerClassBreakInfos:[]},a;b.timeUnits=this._getRestUnits(this.timeUnits);for(a=0;a<this.infos.length;a+=1){var c=this.infos[a];var d={};d.oldestAge=Infinity===c.maxAge?
null:c.maxAge;d.size=c.size;c.color&&(d.color=w.toJsonColor(c.color));c.alpha&&(d.alpha=Math.round(255*c.alpha));b.agerClassBreakInfos[a]=d}return b},_getRestUnits:function(b){var a="esriTimeUnitsDays";switch(b){case e.UNIT_SECONDS:a="esriTimeUnitsSeconds";break;case e.UNIT_MILLISECONDS:a="esriTimeUnitsMilliseconds";break;case e.UNIT_HOURS:a="esriTimeUnitsHours";break;case e.UNIT_MINUTES:a="esriTimeUnitsMinutes";break;case e.UNIT_MONTHS:a="esriTimeUnitsMonths";break;case e.UNIT_WEEKS:a="esriTimeUnitsWeeks";
break;case e.UNIT_YEARS:a="esriTimeUnitsYears"}return a}});g.mixin(e,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});q("extend-esri")&&g.setObject("renderer.TimeClassBreaksAger",e,t);return e});