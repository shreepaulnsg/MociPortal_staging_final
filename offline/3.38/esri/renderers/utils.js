// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/renderers/utils","dojo/_base/lang dojo/_base/array dojo/has dojo/date/locale ../kernel ../numberUtils ../Color dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(k,n,y,v,z,q,w,A){function B(b){return b&&n.map(b,function(a){return new w(a)})}function x(b,a,c){var d="";0===a?d=t.lt+" ":a===c&&(d=t.gt+" ");return d+b}var p={},t={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},C={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},D={millisecond:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},E={formatLength:"short",fullYear:!0},F={formatLength:"short"};k.mixin(p,
{timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(b,a){var c=[];null==b||b instanceof Date||(b=new Date(b));a=a||{};a=k.mixin({},a);var d=a.selector?a.selector.toLowerCase():null,f=!d||-1<d.indexOf("time");d=!d||-1<d.indexOf("date");f&&(a.timeOptions=a.timeOptions||F,a.timeOptions&&(a.timeOptions=k.mixin({},a.timeOptions),a.timeOptions.selector=a.timeOptions.selector||"time",c.push(a.timeOptions)));d&&(a.dateOptions=a.dateOptions||E,a.dateOptions&&
(a.dateOptions=k.mixin({},a.dateOptions),a.dateOptions.selector=a.dateOptions.selector||"date",c.push(a.dateOptions)));c&&c.length?(c=n.map(c,function(e){return v.format(b,e)}),a=1==c.length?c[0]:A["dateTimeFormat-medium"].replace(/'/g,"").replace(/\{(\d+)\}/g,function(e,g){return c[g]})):a=v.format(b);return a},createColorStops:function(b){var a=b.values,c=b.colors,d=b.labelIndexes,f=b.isDate,e=b.dateFormatOptions;b=[];return b=n.map(a,function(g,l){var m=null;if(!d||-1<n.indexOf(d,l)){var h;(h=
f?p.formatDate(g,e):q.format(g))&&(m=x(h,l,a.length-1))}return{value:g,color:c[l],label:m}})},updateColorStops:function(b){var a=b.stops,c=b.changes,d=b.isDate,f=b.dateFormatOptions,e=[],g=n.map(a,function(m){return m.value});n.forEach(c,function(m){e.push(m.index);g[m.index]=m.value});var l=q.round(g,{indexes:e});n.forEach(a,function(m,h){m.value=g[h];if(null!=m.label){var r,u=null;(r=d?p.formatDate(l[h],f):q.format(l[h]))&&(u=x(r,h,a.length-1));m.label=u}})},createClassBreakLabel:function(b){var a=
b.minValue,c=b.maxValue,d=b.isFirstBreak?"":t.gt+" ";b="percent-of-total"===b.normalizationType?t.pct:"";a=null==a?"":q.format(a);c=null==c?"":q.format(c);return d+a+b+" \u2013 "+c+b},setLabelsForClassBreaks:function(b){var a=b.classBreaks,c=b.classificationMethod,d=b.normalizationType,f=[];a&&a.length&&("standard-deviation"===c?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):b.round?(f.push(a[0].minValue),n.forEach(a,function(e){f.push(e.maxValue)}),
f=q.round(f),n.forEach(a,function(e,g){e.label=p.createClassBreakLabel({minValue:0===g?f[0]:f[g],maxValue:f[g+1],isFirstBreak:0===g,normalizationType:d})})):n.forEach(a,function(e,g){e.label=p.createClassBreakLabel({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===g,normalizationType:d})}))},updateClassBreak:function(b){var a=b.classBreaks,c=b.normalizationType,d=b.change,f=d.index;d=d.value;var e=-1,g=-1,l=a.length;"standard-deviation"===b.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):
(0===f?e=f:f===l?g=f-1:(g=f-1,e=f),-1<e&&e<l&&(b=a[e],b.minValue=d,b.label=p.createClassBreakLabel({minValue:b.minValue,maxValue:b.maxValue,isFirstBreak:0===e,normalizationType:c})),-1<g&&g<l&&(b=a[g],b.maxValue=d,b.label=p.createClassBreakLabel({minValue:b.minValue,maxValue:b.maxValue,isFirstBreak:0===g,normalizationType:c})))},calculateDateFormatInterval:function(b){var a,c,d=b.length,f=Infinity;b=n.map(b,function(G){return new Date(G)});for(a=0;a<d-1;a++){var e=b[a];var g=[];var l=Infinity;var m=
"";for(c=a+1;c<d;c++){var h=b[c];h=e.getFullYear()!==h.getFullYear()&&"year"||e.getMonth()!==h.getMonth()&&"month"||e.getDate()!==h.getDate()&&"day"||e.getHours()!==h.getHours()&&"hour"||e.getMinutes()!==h.getMinutes()&&"minute"||e.getSeconds()!==h.getSeconds()&&"second"||"millisecond";var r=C[h];r<l&&(l=r,m=h);g.push(h)}if(l<f){f=l;var u=m}}return u},createUniqueValueLabel:function(b){var a=b.value,c=b.fieldInfo,d=b.domain;b=b.dateFormatInterval;var f=String(a);(d=d&&d.codedValues?d.getName(a):null)?
f=d:"number"===typeof a&&(f=c&&"esriFieldTypeDate"===c.type?p.formatDate(a,b&&D[b]):q.format(a));return f},cloneColorInfo:function(b){if(b){var a=k.mixin({},b);a.colors=B(a.colors);a.stops=a.stops&&n.map(a.stops,function(c){c=k.mixin({},c);c.color&&(c.color=new w(c.color));return c});a.legendOptions&&(a.legendOptions=k.mixin({},a.legendOptions))}return a},cloneOpacityInfo:function(b){if(b){var a=k.mixin({},b);if(b=a.opacityValues)a.opacityValues=b.slice(0);if(b=a.stops)a.stops=n.map(b,function(c){return k.mixin({},
c)});if(b=a.legendOptions)a.legendOptions=k.mixin({},b)}return a},cloneSizeInfo:function(b){if(b){var a=k.mixin({},b);a.stops&&(a.stops=n.map(a.stops,function(c){return k.mixin({},c)}));(b=a.minSize)&&"object"===typeof b&&(a.minSize=p.cloneSizeInfo(b));(b=a.maxSize)&&"object"===typeof b&&(a.maxSize=p.cloneSizeInfo(b));if(b=a.legendOptions)if(a.legendOptions=k.mixin({},b),b=b.customValues)a.legendOptions.customValues=b.slice(0)}return a},getClassCodesForRelationship:function(){return k.clone({2:["L",
"H"],3:["L","M","H"],4:["L","M1","M2","H"]})},getClassValuesForRelationship:function(){return k.clone({2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]})}});y("extend-esri")&&k.setObject("renderer.utils",p,z);return p});