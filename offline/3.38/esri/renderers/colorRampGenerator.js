// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/renderers/colorRampGenerator",["dojo/_base/declare","dojo/_base/lang","../renderers/colorUtils"],function(r,q,p){return{createAlgorithmicColorRamp:function(c,m){if(!c)return null;var b=c.fromColor,a=c.toColor;if(!b||!a)return null;void 0===b.r&&3<=b.length&&(b={r:b[0],g:b[1],b:b[2]});void 0===a.r&&3<=a.length&&(a={r:a[0],g:a[1],b:a[2]});var d=c.size||256;c=c.algorithm||"cie-lab";if(1===d)var f=[b.r,b.g,b.b,255];else if(2===d)f=[b.r,b.g,b.b,255,a.r,a.g,b.b,255];else if(-1<c.toLowerCase().indexOf("hsv")){f=
p.toHSV(b);a=p.toHSV(a);d=d||256;var g=0===f.s,n=0===a.s;b=f.h;c=a.h;g&&!n?b=f.h=c:n&&!g&&(c=a.h=b);g=Math.abs(c-b);180>g?c=(c-b)/(d-1):(g=360-g,c=b>c?g/(d-1):-g/(d-1));g=(a.s-f.s)/(d-1);n=(a.v-f.v)/(d-1);var k=f.s;f=f.v;var l,e=new Uint8Array(4*d);for(l=0;l<d-1;l++){var h=p.toRGB({h:b,s:k,v:f});e[4*l]=h.r;e[4*l+1]=h.g;e[4*l+2]=h.b;e[4*l+3]=255;b+=c;k+=g;f+=n;360<b?b-=360:0>b&&(b+=360)}h=p.toRGB(a);e[4*(d-1)]=h.r;e[4*(d-1)+1]=h.g;e[4*(d-1)+2]=h.b;e[4*(d-1)+3]=255;f=e}else if(-1<c.toLowerCase().indexOf("lch")){k=
p.toLCH(b);a=p.toLCH(a);d=d||256;f=(a.l-k.l)/(d-1);b=(a.c-k.c)/(d-1);c=(a.h-k.h)/(d-1);g=k.l;n=k.c;k=k.h;e=new Uint8Array(4*d);for(l=0;l<d-1;l++)h=p.toRGB({l:g,c:n,h:k}),e[4*l]=h.r,e[4*l+1]=h.g,e[4*l+2]=h.b,e[4*l+3]=255,g+=f,n+=b,k+=c;h=p.toRGB(a);e[4*(d-1)]=h.r;e[4*(d-1)+1]=h.g;e[4*(d-1)+2]=h.b;e[4*(d-1)+3]=255;f=e}else if(-1<c.toLowerCase().indexOf("lab")){k=p.toLAB(b);a=p.toLAB(a);d=d||256;f=(a.l-k.l)/(d-1);b=(a.a-k.a)/(d-1);c=(a.b-k.b)/(d-1);g=k.l;n=k.a;k=k.b;e=new Uint8Array(4*d);for(l=0;l<d-
1;l++)h=p.toRGB({l:g,a:n,b:k}),e[4*l]=h.r,e[4*l+1]=h.g,e[4*l+2]=h.b,e[4*l+3]=255,g+=f,n+=b,k+=c;h=p.toRGB(a);e[4*(d-1)]=h.r;e[4*(d-1)+1]=h.g;e[4*(d-1)+2]=h.b;e[4*(d-1)+3]=255;f=e}if(m&&!1===m.flattened)for(m=f,f=[],a=0;a<f/4;a++)f[a]=m.slice(4*a,4*a+4);return f},createMultiPartColorRamp:function(c,m){if(!c)return null;m=m&&q.clone(m)||{flattened:!0};var b=c.colorRamps;if(!b||0===b.length)return null;var a=c.size||256;c=Math.max(Math.floor(a/b.length),1);var d=Math.max(c,a-(b.length-1)*c),f=!1!==m.flattened;
m.flattened=!0;a=(b.length-1)*c+d;var g=new Uint8Array(4*a);for(a=0;a<b.length;a++){var n={fromColor:b[a].fromColor,toColor:b[a].toColor,size:a===b.length-1?d:c};g instanceof Array?g.concat(this.createAlgorithmicColorRamp(n,m)):g.set(this.createAlgorithmicColorRamp(n,m),c*a*4)}if(!f)for(m=g,g=[],a=0;a<g/4;a++)g[a]=m.slice(4*a,4*a+4);return g},createRandomColorRamp:function(c){c=c||{};var m=c.size||256,b=!1===c.flattened;var a=b?new Uint8Array(4*m):[];for(c=0;c<m;c++)b?(a[4*c]=Math.round(255*Math.random()),
a[4*c+1]=Math.round(255*Math.random()),a[4*c+2]=Math.round(255*Math.random()),a[4*c+3]=255):a[c]=[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),255];return a}}});