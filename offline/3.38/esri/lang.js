// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
//>>built
define("esri/lang","dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(r,A,B,f,C,D,E,F,n){function w(a,c,b,d){(c=c&&c[a])?c={formatType:c.formatType,options:c}:d&&-1!==r.indexOf(d.properties||"",a)?c={formatType:d.formatter||"DateString",options:null}:b&&-1!==r.indexOf(b.properties||"",a)&&(c={formatType:b.formatter||"NumberFormat",options:null});return c}function x(a,c,b){return[f.isString(a)?a.split(""):
a,c||B.global,f.isString(b)?new Function("item","index","array",b):b]}function m(a){return void 0!==a&&null!==a}function t(a){return m(a)?a:""}function u(a,c,b,d){var e=b.match(/([^\(]+)(\([^\)]+\))?/i);b=f.trim(e[1]);var g=e[2]?f.trim(e[2]):null;e=c[a];d=d||(g?A.fromJson(g.replace(/^\(/,"({").replace(/\)$/,"})")):{});g=d.utcOffset;if(-1===r.indexOf(G,b))b=f.getObject(b),f.isFunction(b)&&(e=b(e,a,c,d));else if("number"===typeof e||"string"===typeof e&&e&&!isNaN(Number(e)))switch(e=Number(e),b){case "NumberFormat":return E.format(e,
d);case "DateString":a=new Date(e);if(d.local||d.systemLocale)return d.systemLocale?a.toLocaleDateString()+(d.hideTime?"":" "+a.toLocaleTimeString()):a.toDateString()+(d.hideTime?"":" "+a.toTimeString());a=a.toUTCString();d.hideTime&&(a=a.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return a;case "DateFormat":return a=new Date(e),m(g)&&(a=C.add(a,"minute",a.getTimezoneOffset()-g)),F.format(a,d)}return t(e)}function v(a,c){var b;if(c)for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b]instanceof
Object&&v(a[b],!0));else for(b in a)a.hasOwnProperty(b)&&void 0===a[b]&&delete a[b];return a}var G=["NumberFormat","DateString","DateFormat"],y=/<\/?[^>]+>/g,z={valueOf:function(a,c){for(var b in a)if(a[b]==c)return b;return null},stripTags:function(a){if(a){var c=typeof a;if("string"===c)a=a.replace(y,"");else if("object"===c)for(var b in a)(c=a[b])&&"string"===typeof c&&(c=c.replace(y,"")),a[b]=c}return a},substitute:function(a,c,b){if(m(b))if(f.isObject(b)){var d=b.first;var e=b.dateFormat;var g=
b.numberFormat;var p=b.format}else d=b;if(c&&"${*}"!==c)return f.replace(c,f.hitch({obj:a},function(k,l){var h=l.split(":");return 1<h.length?(l=h[0],h.shift(),(k=p&&p[h[0]])?h=k.formatType:(h=h.join(":"),k=null),u(l,this.obj,h,k)):(k=w(l,p,g,e))?u(l,this.obj,k.formatType,k.options):t(this.obj[l])}),/\$\{([^\}]+)\}/g);c=[];for(var q in a)if(b=(b=w(q,p,g,e))?u(q,a,b.formatType,b.options):a[q],c.push(q+" \x3d "+t(b)+"\x3cbr/\x3e"),d)break;return c.join("")},filter:function(a,c,b){c=x(a,b,c);b={};var d;
a=c[0];for(d in a)c[2].call(c[d],a[d],d,a)&&(b[d]=a[d]);return b},startsWith:function(a,c,b){b=b||0;return a.indexOf(c,b)===b},endsWith:function(a,c,b){if("number"!==typeof b||!isFinite(b)||Math.floor(b)!==b||b>a.length)b=a.length;b-=c.length;a=a.indexOf(c,b);return-1!==a&&a===b},isDefined:m,fixJson:v,isObject:function(a){return a&&"object"===typeof a},isString:function(a){return"string"===typeof a},mixin:function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a},clone2DArray:function(a){if(a=
a?a.slice(0):null){var c,b=a.length;for(c=0;c<b;c++)a[c]=a[c]?a[c].slice(0):null}return a},clone3DArray:function(a){if(a=a?a.slice(0):null){var c,b=a.length;for(c=0;c<b;c++){a[c]=a[c]?a[c].slice(0):null;var d=a[c];if(d){var e,g=d.length;for(e=0;e<g;e++)d[e]=d[e]?d[e].slice(0):null}}}return a}};D("extend-esri")&&(f.mixin(n,z),n._isDefined=m,n._getParts=x,n._sanitize=v);return z});