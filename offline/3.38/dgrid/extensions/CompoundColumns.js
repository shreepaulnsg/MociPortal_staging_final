//>>built
define("dgrid/extensions/CompoundColumns","dojo/_base/lang dojo/_base/declare dojo/sniff dojo/query ../util/misc xstyle/css!../css/extensions/CompoundColumns.css".split(" "),function(r,x,y,t,u){return x("dgrid.extensions.CompoundColumns",null,{configStructure:function(){function b(v,k,z,g){var n=0,A=function(){},l,p;u.each(v,function(d,B){"string"===typeof d&&(d={label:d});v instanceof Array||d.field||(d.field=B);p=(l=d.children)&&!1!==d.showChildHeaders;d.parentColumn=g;l?null==d.id?d.id=(g&&g.id||
k-1)+"-"+f.length:g&&g.id&&(d.id=g.id+"-"+d.id):(e.push(d),f.push(r.delegate(d,{renderHeaderCell:A})),n++);p||(d=r.delegate(d,{rowSpan:-k}));l&&(n+=d.colSpan=b(l,k+1,p,d));z&&(c[k]||(c[k]=[])).push(d)},this);return n}var a=this.subRows&&this.subRows[0]||this.columns,c=[[]],f=c[0],e=[];c[0].className="dgrid-spacer-row";b(a,1,!0);a=c.length;var h,m;for(h=0;h<a;h++){var w=c[h];for(m=0;m<w.length;m++){var q=w[m];1>q.rowSpan&&(q.rowSpan+=a)}}e=[e];e.headerRows=c;this.subRows=e;this.inherited(arguments)},
renderHeader:function(){var b,a=this.subRows[0],c=this.subRows.headerRows[0];this.inherited(arguments);for(b=a.length;b--;)a[b].headerNode=c[b].headerNode},_findSortArrowParent:function(b){var a=this.inherited(arguments);if(a&&u.contains(t(".dgrid-spacer-row",this.headerNode)[0],a))return a=a.columnId||a.parentNode.columnId,a=t(".dgrid-column-"+a,this.headerNode),a[a.length-1]},_configColumn:function(b,a,c,f){var e=b.parentColumn;if(e){var h=0===a.indexOf(f)?a.substring(f.length):a;f=e.id+"-";a=b.id=
f+h}this.inherited(arguments,[b,a,c,f])},cell:function(b,a){if("object"!=typeof a){var c=this.column(a);c&&(a=c.id)}return this.inherited(arguments,[b,a])},column:function(b){var a=this.inherited(arguments);if(null==a&&"object"!=typeof b){var c="-"+b,f=c.length,e;for(e in this.columns)if(-1!==e.indexOf(c,e.length-f))return this.columns[e]}return a},_updateCompoundHiddenStates:function(b,a){b=this.columns[b];var c;if(!b||b.hidden!=a)for(;b&&b.parentColumn;){b=b.parentColumn;if(c=b.colSpan+=a?-1:1)b.headerNode.colSpan=
c;1!==c||a?!c&&a&&this._hideColumn(b.id):this._showColumn(b.id)}},_hideColumn:function(b){var a=this;this._updateCompoundHiddenStates(b,!0);this.inherited(arguments);y("ff")&&(this.headerNode.style.display="none",setTimeout(function(){a.headerNode.style.display="";a.resize()},0))},_showColumn:function(b){this._updateCompoundHiddenStates(b,!1);this.inherited(arguments)},_getResizedColumnWidths:function(){var b=0,a=this.columns,c;for(c in a)b+=a[c].headerNode.offsetWidth;return{totalWidth:b,lastColId:this.subRows[0][this.subRows[0].length-
1].id}}})});