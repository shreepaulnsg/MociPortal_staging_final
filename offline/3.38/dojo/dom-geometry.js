/*
	Copyright (c) 2004-2016, The JS Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(k,n,m,h){function p(a,b,d,c,e,g){g=g||"px";a=a.style;isNaN(b)||(a.left=b+g);isNaN(d)||(a.top=d+g);0<=c&&(a.width=c+g);0<=e&&(a.height=e+g)}function q(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function r(a){return"border-box"==f.boxModel||"table"==a.tagName.toLowerCase()||q(a)}function t(a){var b={x:0,y:0,width:0,height:0,top:0,
right:0,bottom:0,left:0};try{var d=a.getBoundingClientRect()}catch(c){return b}return"undefined"===typeof d.left?b:d}var f={boxModel:"content-box"};k("ie")&&(f.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");f.getPadExtents=function(a,b){a=m.byId(a);var d=b||h.getComputedStyle(a),c=h.toPixelValue;b=c(a,d.paddingLeft);var e=c(a,d.paddingTop),g=c(a,d.paddingRight);a=c(a,d.paddingBottom);return{l:b,t:e,r:g,b:a,w:b+g,h:e+a}};f.getBorderExtents=function(a,b){a=m.byId(a);var d=h.toPixelValue,
c=b||h.getComputedStyle(a);b="none"!=c.borderLeftStyle?d(a,c.borderLeftWidth):0;var e="none"!=c.borderTopStyle?d(a,c.borderTopWidth):0,g="none"!=c.borderRightStyle?d(a,c.borderRightWidth):0;a="none"!=c.borderBottomStyle?d(a,c.borderBottomWidth):0;return{l:b,t:e,r:g,b:a,w:b+g,h:e+a}};f.getPadBorderExtents=function(a,b){a=m.byId(a);var d=b||h.getComputedStyle(a);b=f.getPadExtents(a,d);a=f.getBorderExtents(a,d);return{l:b.l+a.l,t:b.t+a.t,r:b.r+a.r,b:b.b+a.b,w:b.w+a.w,h:b.h+a.h}};f.getMarginExtents=function(a,
b){a=m.byId(a);var d=b||h.getComputedStyle(a),c=h.toPixelValue;b=c(a,d.marginLeft);var e=c(a,d.marginTop),g=c(a,d.marginRight);a=c(a,d.marginBottom);return{l:b,t:e,r:g,b:a,w:b+g,h:e+a}};f.getMarginBox=function(a,b){a=m.byId(a);b=b||h.getComputedStyle(a);b=f.getMarginExtents(a,b);var d=a.offsetLeft-b.l,c=a.offsetTop-b.t,e=a.parentNode,g=h.toPixelValue;8==k("ie")&&!k("quirks")&&e&&(e=h.getComputedStyle(e),d-="none"!=e.borderLeftStyle?g(a,e.borderLeftWidth):0,c-="none"!=e.borderTopStyle?g(a,e.borderTopWidth):
0);return{l:d,t:c,w:a.offsetWidth+b.w,h:a.offsetHeight+b.h}};f.getContentBox=function(a,b){a=m.byId(a);var d=b||h.getComputedStyle(a);b=a.clientWidth;var c=f.getPadExtents(a,d);var e=f.getBorderExtents(a,d);d=a.offsetLeft+c.l+e.l;var g=a.offsetTop+c.t+e.t;b?e=a.clientHeight:(b=a.offsetWidth-e.w,e=a.offsetHeight-e.h);if(8==k("ie")&&!k("quirks")){var l=a.parentNode,u=h.toPixelValue;l&&(l=h.getComputedStyle(l),d-="none"!=l.borderLeftStyle?u(a,l.borderLeftWidth):0,g-="none"!=l.borderTopStyle?u(a,l.borderTopWidth):
0)}return{l:d,t:g,w:b-c.w,h:e-c.h}};f.setContentSize=function(a,b,d){a=m.byId(a);var c=b.w;b=b.h;r(a)&&(d=f.getPadBorderExtents(a,d),0<=c&&(c+=d.w),0<=b&&(b+=d.h));p(a,NaN,NaN,c,b)};var v={l:0,t:0,w:0,h:0};f.setMarginBox=function(a,b,d){a=m.byId(a);var c=d||h.getComputedStyle(a);d=b.w;var e=b.h,g=r(a)?v:f.getPadBorderExtents(a,c);c=f.getMarginExtents(a,c);if(k("webkit")&&q(a)){var l=a.style;0<=d&&!l.width&&(l.width="4px");0<=e&&!l.height&&(l.height="4px")}0<=d&&(d=Math.max(d-g.w-c.w,0));0<=e&&(e=
Math.max(e-g.h-c.h,0));p(a,b.l,b.t,d,e)};f.isBodyLtr=function(a){a=a||n.doc;return"ltr"==(n.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};f.docScroll=function(a){a=a||n.doc;var b=a.parentWindow||a.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=k("quirks")?n.body(a):a.documentElement)&&{x:f.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};f.getIeDocumentElementOffset=function(a){return{x:0,y:0}};f.fixIeBiDiScrollLeft=function(a,b){b=b||n.doc;var d=k("ie");
if(d&&!f.isBodyLtr(b)){var c=k("quirks");b=c?n.body(b):b.documentElement;var e=n.global;6==d&&!c&&e.frameElement&&b.scrollHeight>b.clientHeight&&(a+=b.clientLeft);return 8>d||c?a+b.clientWidth-b.scrollWidth:-a}return a};f.position=function(a,b){a=m.byId(a);var d=n.body(a.ownerDocument),c=t(a);c={x:c.left,y:c.top,w:c.right-c.left,h:c.bottom-c.top};9>k("ie")&&(c.x-=k("quirks")?d.clientLeft+d.offsetLeft:0,c.y-=k("quirks")?d.clientTop+d.offsetTop:0);b&&(a=f.docScroll(a.ownerDocument),c.x+=a.x,c.y+=a.y);
return c};f.getMarginSize=function(a,b){a=m.byId(a);b=f.getMarginExtents(a,b||h.getComputedStyle(a));a=t(a);return{w:a.right-a.left+b.w,h:a.bottom-a.top+b.h}};f.normalizeEvent=function(a){"layerX"in a||(a.layerX=a.offsetX,a.layerY=a.offsetY);if(!("pageX"in a)){var b=a.target;b=b&&b.ownerDocument||document;var d=k("quirks")?b.body:b.documentElement;a.pageX=a.clientX+f.fixIeBiDiScrollLeft(d.scrollLeft||0,b);a.pageY=a.clientY+(d.scrollTop||0)}};return f});