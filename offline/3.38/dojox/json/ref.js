//>>built
define("dojox/json/ref","dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date/stamp dojox".split(" "),function(J,w,M,K,H,D){K.getObject("json",!0,D);return D.json.ref={resolveJson:function(h,f){function n(a,p,e,b,m,g,x){var c,d;e=u in a?a[u]:e;if(u in a||void 0!==e&&b)e=(v+e).replace(q,"$2$3");b=g||a;if(void 0!==e){E&&(a.__id=e);!f.schemas||a instanceof Array||!(d=e.match(/^(.+\/)[^\.\[]*$/))||(m=f.schemas[d[1]]);if(k[e]&&a instanceof Array==k[e]instanceof Array){b=k[e];delete b.$ref;
delete b._loadObject;var z=!0}else if(d=m&&m.prototype)A.prototype=d,b=new A;k[e]=b;B&&(B[e]=f.time)}for(;m;){if(d=m.properties)for(c in a){var r=d[c];r&&"date-time"==r.format&&"string"==typeof a[c]&&(a[c]=H.fromISOString(a[c]))}m=m["extends"]}m=a.length;for(c in a){if(c==m)break;if(a.hasOwnProperty(c)){d=a[c];if("object"==typeof d&&d&&!(d instanceof Date)&&"__parent"!=c)if(l=d[y]||C&&d[u],a==t||l&&d.__parent||(d.__parent=x?x:b),l)if(delete a[c],g=l.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/),
k[(v+l).replace(q,"$2$3")]?l=k[(v+l).replace(q,"$2$3")]:(l="$"==g[1]||"this"==g[1]||""===g[1]?h:k[(v+g[1]).replace(q,"$2$3")])&&g[3]&&g[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(N,O,I,P,L){l=l&&l[I?I.replace(/["'\\]/,""):L]}),l)d=l;else{if(!p){F||t.push(b);var F=!0;d=n(d,!1,d[y],!0,r);d._loadObject=f.loader}}else p||(d=n(d,t==a,void 0===e?void 0:G(e,c),!1,r,b!=a&&"object"==typeof b[c]&&b[c],a));a[c]=d;if(b!=a&&!b.__isDirty&&(g=b[c],b[c]=d,!(!z||d===g||b._loadObject||"_"==c.charAt(0)&&
"_"==c.charAt(1)||"$ref"==c||d instanceof Date&&g instanceof Date&&d.getTime()==g.getTime()||"function"==typeof d&&"function"==typeof g&&d.toString()==g.toString())&&k.onUpdate))k.onUpdate(b,c,g,d)}}if(z&&(u in a||b instanceof Array))for(c in b){if(!(b.__isDirty||!b.hasOwnProperty(c)||a.hasOwnProperty(c)||"_"==c.charAt(0)&&"_"==c.charAt(1)||b instanceof Array&&isNaN(c))){if(k.onUpdate&&"_loadObject"!=c&&"_idAttr"!=c)k.onUpdate(b,c,b[c],void 0);for(delete b[c];b instanceof Array&&b.length&&void 0===
b[b.length-1];)b.length--}}else if(k.onLoad)k.onLoad(b);return b}f=f||{};var u=f.idAttribute||"id",y=this.refAttribute,C=f.idAsRef,v=f.idPrefix||"",E=f.assignAbsoluteIds,k=f.index||{},B=f.timeStamps,l,t=[],q=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,G=this._addProp,A=function(){};h&&"object"==typeof h&&(h=n(h,!1,f.defaultId,!0),n(t,!1));return h},fromJson:function(h,f){try{var n=eval("("+h+")")}catch(u){throw new SyntaxError("Invalid JSON string: "+u.message+" parsing: "+h);}return n?this.resolveJson(n,
f):n},toJson:function(h,f,n,u,y){function C(){var a=(G++).toString();return t.hasOwnProperty(a)?C():a}function v(a,p,e){if("object"==typeof a&&a){if(a instanceof Date)return'"'+H.toISOString(a,{zulu:!0})+'"';var b=a.__id;if(b){if("#"!=p&&(E&&!b.match(/#/)||l[b]))return e=b,"#"!=b.charAt(0)&&(e=a.__clientId==b?"cid:"+b:b.substring(0,n.length)==n?b.substring(n.length):b),a={},a[B]=e,w.toJson(a,f);p=b}else q?a instanceof Array||(p=C(),a.__id=p,t[p]=a):(a.__id=p,t[p]=a);l[p]=a;e=e||"";var m=f?e+w.toJsonIndentStr:
"",g=f?"\n":"";b=f?" ":"";if(a instanceof Array)return"["+J.map(a,function(r,F){r=v(r,q?void 0:k(p,F),m);"string"!=typeof r&&(r="undefined");return g+m+r}).join(","+b)+g+e+"]";var x=[];q&&"undefined"===typeof a[y]&&x.push(g+m+w._escapeString(y)+":"+b+w.toJson(a.__id));for(var c in a)if(a.hasOwnProperty(c)){if("number"==typeof c)var d='"'+c+'"';else if("string"!=typeof c||"_"==c.charAt(0)&&"_"==c.charAt(1))continue;else d=w._escapeString(c);var z=v(a[c],q?void 0:k(p,c),m);"string"==typeof z&&x.push(g+
m+d+":"+b+z)}return"{"+x.join(","+b)+g+e+"}"}return"function"==typeof a&&D.json.ref.serializeFunctions?a.toString():w.toJson(a)}var E=this._useRefs,k=this._addProp,B=this.refAttribute;n=n||"";var l={},t={},q=y?!0:!1,G=1;h=v(h,q?void 0:"#","");if(!u)for(var A in t)delete t[A].__id;return h},_addProp:function(h,f){return h+(h.match(/#/)?1==h.length?"":".":"#")+f},refAttribute:"$ref",_useRefs:!1,serializeFunctions:!1}});