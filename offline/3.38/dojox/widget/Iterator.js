//>>built
define("dojox/widget/Iterator",["dojo","dijit","dojox","dojo/require!dijit/Declaration"],function(b,f,g){b.provide("dojox.widget.Iterator");b.require("dijit.Declaration");b.experimental("dojox.widget.Iterator");b.declare("dojox.widget.Iterator",[f.Declaration],{constructor:function(){var a=0;return function(){this.attrs=[];this.children=[];this.widgetClass="dojox.widget.Iterator._classes._"+a++}}(),start:0,fetchMax:1E3,query:{name:"*"},attrs:[],defaultValue:"",widgetCtor:null,dataValues:[],data:null,
store:null,_srcIndex:0,_srcParent:null,_setSrcIndex:function(a){this._srcIndex=0;for(this._srcParent=a.parentNode;a.previousSibling;)this._srcIndex++,a=a.previousSibling},postscript:function(a,d){this._setSrcIndex(d);this.inherited("postscript",arguments);var c=this.widgetCtor=b.getObject(this.widgetClass);this.attrs=b.map(c.prototype.templateString.match(/\$\{([^\s:\}]+)(?::([^\s:\}]+))?\}/g),function(e){return e.slice(2,-1)});b.forEach(this.attrs,function(e){c.prototype[e]=""});this.update()},clear:function(){this.children.length&&
this._setSrcIndex(this.children[0].domNode);b.forEach(this.children,"item.destroy();");this.children=[]},update:function(){if(this.store)this.fetch();else this.onDataAvailable(this.data||this.dataValues)},_addItem:function(a,d){b.isString(a)&&(a={value:a});a=new this.widgetCtor(a);this.children.push(a);b.place(a.domNode,this._srcParent,this._srcIndex+d)},getAttrValuesObj:function(a){var d={};b.isString(a)?b.forEach(this.attrs,function(c){d[c]="value"==c?a:this.defaultValue},this):b.forEach(this.attrs,
function(c){d[c]=this.store?this.store.getValue(a,c)||this.defaultValue:a[c]||this.defaultValue},this);return d},onDataAvailable:function(a){this.clear();b.forEach(a,function(d,c){this._addItem(this.getAttrValuesObj(d),c)},this)},fetch:function(a,d,c){this.store.fetch({query:a||this.query,start:d||this.start,count:c||this.fetchMax,onComplete:b.hitch(this,"onDataAvailable")})}});g.widget.Iterator._classes={}});