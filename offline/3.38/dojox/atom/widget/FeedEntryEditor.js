//>>built
require({cache:{"url:dojox/atom/widget/templates/FeedEntryEditor.html":'\x3cdiv class\x3d"feedEntryViewer"\x3e\r\n    \x3ctable border\x3d"0" width\x3d"100%" class\x3d"feedEntryViewerMenuTable" dojoAttachPoint\x3d"feedEntryViewerMenu" style\x3d"display: none;"\x3e\r\n        \x3ctr width\x3d"100%"  dojoAttachPoint\x3d"entryCheckBoxDisplayOptions"\x3e\r\n        \t\x3ctd align\x3d"left" dojoAttachPoint\x3d"entryNewButton"\x3e\r\n                \x3cspan class\x3d"feedEntryViewerMenu" dojoAttachPoint\x3d"doNew" dojoAttachEvent\x3d"onclick:_toggleNew"\x3e\x3c/span\x3e\r\n        \t\x3c/td\x3e\r\n            \x3ctd align\x3d"left" dojoAttachPoint\x3d"entryEditButton" style\x3d"display: none;"\x3e\r\n                \x3cspan class\x3d"feedEntryViewerMenu" dojoAttachPoint\x3d"edit" dojoAttachEvent\x3d"onclick:_toggleEdit"\x3e\x3c/span\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd align\x3d"left" dojoAttachPoint\x3d"entrySaveCancelButtons" style\x3d"display: none;"\x3e\r\n                \x3cspan class\x3d"feedEntryViewerMenu" dojoAttachPoint\x3d"save" dojoAttachEvent\x3d"onclick:saveEdits"\x3e\x3c/span\x3e\r\n                \x3cspan class\x3d"feedEntryViewerMenu" dojoAttachPoint\x3d"cancel" dojoAttachEvent\x3d"onclick:cancelEdits"\x3e\x3c/span\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd align\x3d"right"\x3e\r\n                \x3cspan class\x3d"feedEntryViewerMenu" dojoAttachPoint\x3d"displayOptions" dojoAttachEvent\x3d"onclick:_toggleOptions"\x3e\x3c/span\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr class\x3d"feedEntryViewerDisplayCheckbox" dojoAttachPoint\x3d"entryCheckBoxRow" width\x3d"100%" style\x3d"display: none;"\x3e\r\n            \x3ctd dojoAttachPoint\x3d"feedEntryCelltitle"\x3e\r\n                \x3cinput type\x3d"checkbox" name\x3d"title" value\x3d"Title" dojoAttachPoint\x3d"feedEntryCheckBoxTitle" dojoAttachEvent\x3d"onclick:_toggleCheckbox"/\x3e\r\n\t\t\t\t\x3clabel for\x3d"title" dojoAttachPoint\x3d"feedEntryCheckBoxLabelTitle"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd dojoAttachPoint\x3d"feedEntryCellauthors"\x3e\r\n                \x3cinput type\x3d"checkbox" name\x3d"authors" value\x3d"Authors" dojoAttachPoint\x3d"feedEntryCheckBoxAuthors" dojoAttachEvent\x3d"onclick:_toggleCheckbox"/\x3e\r\n\t\t\t\t\x3clabel for\x3d"title" dojoAttachPoint\x3d"feedEntryCheckBoxLabelAuthors"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd dojoAttachPoint\x3d"feedEntryCellcontributors"\x3e\r\n                \x3cinput type\x3d"checkbox" name\x3d"contributors" value\x3d"Contributors" dojoAttachPoint\x3d"feedEntryCheckBoxContributors" dojoAttachEvent\x3d"onclick:_toggleCheckbox"/\x3e\r\n\t\t\t\t\x3clabel for\x3d"title" dojoAttachPoint\x3d"feedEntryCheckBoxLabelContributors"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd dojoAttachPoint\x3d"feedEntryCellid"\x3e\r\n                \x3cinput type\x3d"checkbox" name\x3d"id" value\x3d"Id" dojoAttachPoint\x3d"feedEntryCheckBoxId" dojoAttachEvent\x3d"onclick:_toggleCheckbox"/\x3e\r\n\t\t\t\t\x3clabel for\x3d"title" dojoAttachPoint\x3d"feedEntryCheckBoxLabelId"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd rowspan\x3d"2" align\x3d"right"\x3e\r\n                \x3cspan class\x3d"feedEntryViewerMenu" dojoAttachPoint\x3d"close" dojoAttachEvent\x3d"onclick:_toggleOptions"\x3e\x3c/span\x3e\r\n            \x3c/td\x3e\r\n\t\t\x3c/tr\x3e\r\n\t\t\x3ctr class\x3d"feedEntryViewerDisplayCheckbox" dojoAttachPoint\x3d"entryCheckBoxRow2" width\x3d"100%" style\x3d"display: none;"\x3e\r\n            \x3ctd dojoAttachPoint\x3d"feedEntryCellupdated"\x3e\r\n                \x3cinput type\x3d"checkbox" name\x3d"updated" value\x3d"Updated" dojoAttachPoint\x3d"feedEntryCheckBoxUpdated" dojoAttachEvent\x3d"onclick:_toggleCheckbox"/\x3e\r\n\t\t\t\t\x3clabel for\x3d"title" dojoAttachPoint\x3d"feedEntryCheckBoxLabelUpdated"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd dojoAttachPoint\x3d"feedEntryCellsummary"\x3e\r\n                \x3cinput type\x3d"checkbox" name\x3d"summary" value\x3d"Summary" dojoAttachPoint\x3d"feedEntryCheckBoxSummary" dojoAttachEvent\x3d"onclick:_toggleCheckbox"/\x3e\r\n\t\t\t\t\x3clabel for\x3d"title" dojoAttachPoint\x3d"feedEntryCheckBoxLabelSummary"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd dojoAttachPoint\x3d"feedEntryCellcontent"\x3e\r\n                \x3cinput type\x3d"checkbox" name\x3d"content" value\x3d"Content" dojoAttachPoint\x3d"feedEntryCheckBoxContent" dojoAttachEvent\x3d"onclick:_toggleCheckbox"/\x3e\r\n\t\t\t\t\x3clabel for\x3d"title" dojoAttachPoint\x3d"feedEntryCheckBoxLabelContent"\x3e\x3c/label\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n    \r\n    \x3ctable class\x3d"feedEntryViewerContainer" border\x3d"0" width\x3d"100%"\x3e\r\n        \x3ctr class\x3d"feedEntryViewerTitle" dojoAttachPoint\x3d"entryTitleRow" style\x3d"display: none;"\x3e\r\n            \x3ctd\x3e\r\n                \x3ctable width\x3d"100%" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\r\n                    \x3ctr class\x3d"graphic-tab-lgray"\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"lp2"\x3e\r\n\t\t\t\t\t\t\t\x3cspan class\x3d"lp" dojoAttachPoint\x3d"entryTitleHeader"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                        \t\x3cselect dojoAttachPoint\x3d"entryTitleSelect" dojoAttachEvent\x3d"onchange:_switchEditor" style\x3d"display: none"\x3e\r\n                        \t\t\x3coption value\x3d"text"\x3eText\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\x3coption value\x3d"html"\x3eHTML\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\x3coption value\x3d"xhtml"\x3eXHTML\x3c/option\x3e\r\n                        \t\x3c/select\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd colspan\x3d"2" dojoAttachPoint\x3d"entryTitleNode"\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n\r\n        \x3ctr class\x3d"feedEntryViewerAuthor" dojoAttachPoint\x3d"entryAuthorRow" style\x3d"display: none;"\x3e\r\n            \x3ctd\x3e\r\n                \x3ctable width\x3d"100%" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\r\n                    \x3ctr class\x3d"graphic-tab-lgray"\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"lp2"\x3e\r\n\t\t\t\t\t\t\t\x3cspan class\x3d"lp" dojoAttachPoint\x3d"entryAuthorHeader"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd dojoAttachPoint\x3d"entryAuthorNode"\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n\r\n        \x3ctr class\x3d"feedEntryViewerContributor" dojoAttachPoint\x3d"entryContributorRow" style\x3d"display: none;"\x3e\r\n            \x3ctd\x3e\r\n                \x3ctable width\x3d"100%" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\r\n                    \x3ctr class\x3d"graphic-tab-lgray"\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"lp2"\x3e\r\n\t\t\t\t\t\t\t\x3cspan class\x3d"lp" dojoAttachPoint\x3d"entryContributorHeader"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd dojoAttachPoint\x3d"entryContributorNode" class\x3d"feedEntryViewerContributorNames"\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \r\n        \x3ctr class\x3d"feedEntryViewerId" dojoAttachPoint\x3d"entryIdRow" style\x3d"display: none;"\x3e\r\n            \x3ctd\x3e\r\n                \x3ctable width\x3d"100%" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\r\n                    \x3ctr class\x3d"graphic-tab-lgray"\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"lp2"\x3e\r\n\t\t\t\t\t\t\t\x3cspan class\x3d"lp" dojoAttachPoint\x3d"entryIdHeader"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd dojoAttachPoint\x3d"entryIdNode" class\x3d"feedEntryViewerIdText"\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \r\n        \x3ctr class\x3d"feedEntryViewerUpdated" dojoAttachPoint\x3d"entryUpdatedRow" style\x3d"display: none;"\x3e\r\n            \x3ctd\x3e\r\n                \x3ctable width\x3d"100%" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\r\n                    \x3ctr class\x3d"graphic-tab-lgray"\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"lp2"\x3e\r\n\t\t\t\t\t\t\t\x3cspan class\x3d"lp" dojoAttachPoint\x3d"entryUpdatedHeader"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd dojoAttachPoint\x3d"entryUpdatedNode" class\x3d"feedEntryViewerUpdatedText"\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \r\n        \x3ctr class\x3d"feedEntryViewerSummary" dojoAttachPoint\x3d"entrySummaryRow" style\x3d"display: none;"\x3e\r\n            \x3ctd\x3e\r\n                \x3ctable width\x3d"100%" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\r\n                    \x3ctr class\x3d"graphic-tab-lgray"\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"lp2" colspan\x3d"2"\x3e\r\n\t\t\t\t\t\t\t\x3cspan class\x3d"lp" dojoAttachPoint\x3d"entrySummaryHeader"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                        \t\x3cselect dojoAttachPoint\x3d"entrySummarySelect" dojoAttachEvent\x3d"onchange:_switchEditor" style\x3d"display: none"\x3e\r\n                        \t\t\x3coption value\x3d"text"\x3eText\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\x3coption value\x3d"html"\x3eHTML\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\x3coption value\x3d"xhtml"\x3eXHTML\x3c/option\x3e\r\n                        \t\x3c/select\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd dojoAttachPoint\x3d"entrySummaryNode"\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \r\n        \x3ctr class\x3d"feedEntryViewerContent" dojoAttachPoint\x3d"entryContentRow" style\x3d"display: none;"\x3e\r\n            \x3ctd\x3e\r\n                \x3ctable width\x3d"100%" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\r\n                    \x3ctr class\x3d"graphic-tab-lgray"\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"lp2"\x3e\r\n\t\t\t\t\t\t\t\x3cspan class\x3d"lp" dojoAttachPoint\x3d"entryContentHeader"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                        \t\x3cselect dojoAttachPoint\x3d"entryContentSelect" dojoAttachEvent\x3d"onchange:_switchEditor" style\x3d"display: none"\x3e\r\n                        \t\t\x3coption value\x3d"text"\x3eText\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\x3coption value\x3d"html"\x3eHTML\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\x3coption value\x3d"xhtml"\x3eXHTML\x3c/option\x3e\r\n                        \t\x3c/select\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd dojoAttachPoint\x3d"entryContentNode"\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                \x3c/table\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/atom/widget/templates/PeopleEditor.html":'\x3cdiv class\x3d"peopleEditor"\x3e\r\n\t\x3ctable style\x3d"width: 100%"\x3e\r\n\t\t\x3ctbody dojoAttachPoint\x3d"peopleEditorEditors"\x3e\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cspan class\x3d"peopleEditorButton" dojoAttachPoint\x3d"peopleEditorButton" dojoAttachEvent\x3d"onclick:_add"\x3e\x3c/span\x3e\r\n\x3c/div\x3e'}});
define("dojox/atom/widget/FeedEntryEditor","dojo/_base/kernel dojo/_base/lang dojo/_base/connect dojo/_base/declare dojo/_base/fx dojo/_base/sniff dojo/dom dojo/dom-style dojo/dom-construct dijit/_Widget dijit/_Templated dijit/_Container dijit/Editor dijit/form/TextBox dijit/form/SimpleTextarea ./FeedEntryViewer ../io/model dojo/text!./templates/FeedEntryEditor.html dojo/text!./templates/PeopleEditor.html dojo/i18n!./nls/FeedEntryViewer dojo/i18n!./nls/FeedEntryEditor dojo/i18n!./nls/PeopleEditor".split(" "),function(r,
v,B,w,C,x,y,f,z,D,E,F,q,t,A,l,p,G,H,m,I,u){r.experimental("dojox.atom.widget.FeedEntryEditor");var k=w("dojox.atom.widget.FeedEntryEditor",l,{_contentEditor:null,_oldContent:null,_setObject:null,enableEdit:!1,_contentEditorCreator:null,_editors:{},entryNewButton:null,_editable:!1,templateString:G,postCreate:function(){""!==this.entrySelectionTopic&&(this._subscriptions=[r.subscribe(this.entrySelectionTopic,this,"_handleEvent")]);var a=m;this.displayOptions.innerHTML=a.displayOptions;this.feedEntryCheckBoxLabelTitle.innerHTML=
a.title;this.feedEntryCheckBoxLabelAuthors.innerHTML=a.authors;this.feedEntryCheckBoxLabelContributors.innerHTML=a.contributors;this.feedEntryCheckBoxLabelId.innerHTML=a.id;this.close.innerHTML=a.close;this.feedEntryCheckBoxLabelUpdated.innerHTML=a.updated;this.feedEntryCheckBoxLabelSummary.innerHTML=a.summary;this.feedEntryCheckBoxLabelContent.innerHTML=a.content;a=I;this.doNew.innerHTML=a.doNew;this.edit.innerHTML=a.edit;this.save.innerHTML=a.save;this.cancel.innerHTML=a.cancel},setEntry:function(a,
c,b){b=this._entry!==a?this._editMode=!1:!0;k.superclass.setEntry.call(this,a,c);this._editable=this._isEditable(a);b||this._editable||(f.set(this.entryEditButton,"display","none"),f.set(this.entrySaveCancelButtons,"display","none"));this._editable&&this.enableEdit&&!b&&(f.set(this.entryEditButton,"display",""),this.enableMenuFade&&this.entrySaveCancelButton&&C.fadeOut({node:this.entrySaveCancelButton,duration:250}).play())},_toggleEdit:function(){this._editable&&this.enableEdit&&(f.set(this.entryEditButton,
"display","none"),f.set(this.entrySaveCancelButtons,"display",""),this._editMode=!0,this.setEntry(this._entry,this._feed,!0))},_handleEvent:function(a){a.source!=this&&"delete"==a.action&&a.entry&&a.entry==this._entry&&f.set(this.entryEditButton,"display","none");k.superclass._handleEvent.call(this,a)},_isEditable:function(a){var c=!1;if(a&&null!==a&&a.links&&null!==a.links)for(var b in a.links)if(a.links[b].rel&&"edit"==a.links[b].rel){c=!0;break}return c},setTitle:function(a,c,b){c?b.title&&b.title.value&&
null!==b.title.value&&(this._toLoad||(this._toLoad=[]),this.entryTitleSelect.value=b.title.type,a=this._createEditor(a,b.title,!0,"html"===b.title.type||"xhtml"===b.title.type),a.name="title",this._toLoad.push(a),this.setFieldValidity("titleedit",!0),this.setFieldValidity("title",!0)):(k.superclass.setTitle.call(this,a,c,b),b.title&&b.title.value&&null!==b.title.value&&this.setFieldValidity("title",!0))},setAuthors:function(a,c,b){c?b.authors&&0<b.authors.length&&(this._editors.authors=this._createPeopleEditor(this.entryAuthorNode,
{data:b.authors,name:"Author"}),this.setFieldValidity("authors",!0)):(k.superclass.setAuthors.call(this,a,c,b),b.authors&&0<b.authors.length&&this.setFieldValidity("authors",!0))},setContributors:function(a,c,b){c?b.contributors&&0<b.contributors.length&&(this._editors.contributors=this._createPeopleEditor(this.entryContributorNode,{data:b.contributors,name:"Contributor"}),this.setFieldValidity("contributors",!0)):(k.superclass.setContributors.call(this,a,c,b),b.contributors&&0<b.contributors.length&&
this.setFieldValidity("contributors",!0))},setId:function(a,c,b){c?b.id&&null!==b.id&&(this._editors.id=this._createEditor(a,b.id),this.setFieldValidity("id",!0)):(k.superclass.setId.call(this,a,c,b),b.id&&null!==b.id&&this.setFieldValidity("id",!0))},setUpdated:function(a,c,b){c?b.updated&&null!==b.updated&&(this._editors.updated=this._createEditor(a,b.updated),this.setFieldValidity("updated",!0)):(k.superclass.setUpdated.call(this,a,c,b),b.updated&&null!==b.updated&&this.setFieldValidity("updated",
!0))},setSummary:function(a,c,b){c?b.summary&&b.summary.value&&null!==b.summary.value&&(this._toLoad||(this._toLoad=[]),this.entrySummarySelect.value=b.summary.type,a=this._createEditor(a,b.summary,!0,"html"===b.summary.type||"xhtml"===b.summary.type),a.name="summary",this._toLoad.push(a),this.setFieldValidity("summaryedit",!0),this.setFieldValidity("summary",!0)):(k.superclass.setSummary.call(this,a,c,b),b.summary&&b.summary.value&&null!==b.summary.value&&this.setFieldValidity("summary",!0))},setContent:function(a,
c,b){c?b.content&&b.content.value&&null!==b.content.value&&(this._toLoad||(this._toLoad=[]),this.entryContentSelect.value=b.content.type,a=this._createEditor(a,b.content,!0,"html"===b.content.type||"xhtml"===b.content.type),a.name="content",this._toLoad.push(a),this.setFieldValidity("contentedit",!0),this.setFieldValidity("content",!0)):(k.superclass.setContent.call(this,a,c,b),b.content&&b.content.value&&null!==b.content.value&&this.setFieldValidity("content",!0))},_createEditor:function(a,c,b,d){if(!c){if(d)return{anchorNode:a,
entryValue:"",editor:null,generateEditor:function(){var g=document.createElement("div");g.innerHTML=this.entryValue;this.anchorNode.appendChild(g);return this.editor=g=new q({},g)}};b?(b=document.createElement("textarea"),a.appendChild(b),f.set(b,"width","90%"),a=new A({},b)):(b=document.createElement("input"),a.appendChild(b),f.set(b,"width","95%"),a=new t({},b));a.attr("value","");return a}c=void 0!==c.value?c.value:c.attr?c.attr("value"):c;if(d)return-1!=c.indexOf("\x3c")&&(c=c.replace(/</g,"\x26lt;")),
{anchorNode:a,entryValue:c,editor:null,generateEditor:function(){var g=document.createElement("div");g.innerHTML=this.entryValue;this.anchorNode.appendChild(g);return this.editor=g=new q({},g)}};b?(b=document.createElement("textarea"),a.appendChild(b),f.set(b,"width","90%"),a=new A({},b)):(b=document.createElement("input"),a.appendChild(b),f.set(b,"width","95%"),a=new t({},b));a.attr("value",c);return a},_switchEditor:function(a){var c=null,b=null,d=null;b=x("ie")?a.srcElement:a.target;b===this.entryTitleSelect?
(d=this.entryTitleNode,c="title"):b===this.entrySummarySelect?(d=this.entrySummaryNode,c="summary"):(d=this.entryContentNode,c="content");a=this._editors[c];if("text"===b.value){if(a.isInstanceOf(q)){b=a.attr("value",!1);a.close(!1,!0);for(a.destroy();d.firstChild;)z.destroy(d.firstChild);d=this._createEditor(d,{value:b},!0,!1);this._editors[c]=d}}else if(!a.isInstanceOf(q)){b=a.attr("value");for(a.destroy();d.firstChild;)z.destroy(d.firstChild);d=this._createEditor(d,{value:b},!0,!0);d=v.hitch(d,
d.generateEditor)();this._editors[c]=d}},_createPeopleEditor:function(a,c){var b=document.createElement("div");a.appendChild(b);return new J(c,b)},saveEdits:function(){f.set(this.entrySaveCancelButtons,"display","none");f.set(this.entryEditButton,"display","");f.set(this.entryNewButton,"display","");var a=!1,c;if(this._new){this._new=!1;var b=new p.Entry;a=this._editors.title.attr("value");"xhtml"===this.entryTitleSelect.value&&(a=this._enforceXhtml(a),a='\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e'+
a+"\x3c/div\x3e");b.setTitle(a,this.entryTitleSelect.value);b.id=this._editors.id.attr("value");var d=this._editors.authors.getValues();for(c in d)(d[c].name||d[c].email||d[c].uri)&&b.addAuthor(d[c].name,d[c].email,d[c].uri);d=this._editors.contributors.getValues();for(c in d)(d[c].name||d[c].email||d[c].uri)&&b.addContributor(d[c].name,d[c].email,d[c].uri);a=this._editors.summary.attr("value");"xhtml"===this.entrySummarySelect.value&&(a=this._enforceXhtml(a),a='\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e'+
a+"\x3c/div\x3e");b.summary=new p.Content("summary",a,null,this.entrySummarySelect.value);a=this._editors.content.attr("value");"xhtml"===this.entryContentSelect.value&&(a=this._enforceXhtml(a),a='\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e'+a+"\x3c/div\x3e");b.content=new p.Content("content",a,null,this.entryContentSelect.value);f.set(this.entryNewButton,"display","");r.publish(this.entrySelectionTopic,[{action:"post",source:this,entry:b}])}else{b=this.getEntry();!this._editors.title||this._editors.title.attr("value")==
b.title.value&&this.entryTitleSelect.value==b.title.type||(a=this._editors.title.attr("value"),"xhtml"===this.entryTitleSelect.value&&(a=this._enforceXhtml(a),0!==a.indexOf('\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e')&&(a='\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e'+a+"\x3c/div\x3e")),b.title=new p.Content("title",a,null,this.entryTitleSelect.value),a=!0);this._editors.id.attr("value")!=b.id&&(b.id=this._editors.id.attr("value"),a=!0);!this._editors.summary||this._editors.summary.attr("value")==
b.summary.value&&this.entrySummarySelect.value==b.summary.type||(a=this._editors.summary.attr("value"),"xhtml"===this.entrySummarySelect.value&&(a=this._enforceXhtml(a),0!==a.indexOf('\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e')&&(a='\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e'+a+"\x3c/div\x3e")),b.summary=new p.Content("summary",a,null,this.entrySummarySelect.value),a=!0);!this._editors.content||this._editors.content.attr("value")==b.content.value&&this.entryContentSelect.value==
b.content.type||(a=this._editors.content.attr("value"),"xhtml"===this.entryContentSelect.value&&(a=this._enforceXhtml(a),0!==a.indexOf('\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e')&&(a='\x3cdiv xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e'+a+"\x3c/div\x3e")),b.content=new p.Content("content",a,null,this.entryContentSelect.value),a=!0);if(this._editors.authors)if(a)for(c in b.authors=[],d=this._editors.authors.getValues(),d)(d[c].name||d[c].email||d[c].uri)&&b.addAuthor(d[c].name,d[c].email,
d[c].uri);else{var g=b.authors;d=this._editors.authors.getValues();var e=!1;for(c in d){a:{for(c in g)if(g[c].name===d[c].name&&g[c].email===d[c].email&&g[c].uri===d[c].uri){var h=!0;break a}h=!1}if(!h){e=!0;break}}if(e){b.authors=[];for(c in d)(d[c].name||d[c].email||d[c].uri)&&b.addAuthor(d[c].name,d[c].email,d[c].uri);a=!0}}if(this._editors.contributors)if(a)for(c in b.contributors=[],d=this._editors.contributors.getValues(),d)(d[c].name||d[c].email||d[c].uri)&&b.addAuthor(d[c].name,d[c].email,
d[c].uri);else{g=b.contributors;d=this._editors.contributors.getValues();e=!1;for(c in d){a:{for(c in g)if(g[c].name===d[c].name&&g[c].email===d[c].email&&g[c].uri===d[c].uri){h=!0;break a}h=!1}if(h){e=!0;break}}if(e){b.contributors=[];for(c in d)(d[c].name||d[c].email||d[c].uri)&&b.addContributor(d[c].name,d[c].email,d[c].uri);a=!0}}a&&r.publish(this.entrySelectionTopic,[{action:"update",source:this,entry:b,callback:this._handleSave}])}this._editMode=!1;this.setEntry(b,this._feed,!0)},_handleSave:function(a,
c){this._editMode=!1;this.clear();this.setEntry(a,this.getFeed(),!0)},cancelEdits:function(){this._new=!1;f.set(this.entrySaveCancelButtons,"display","none");this._editable&&f.set(this.entryEditButton,"display","");f.set(this.entryNewButton,"display","");this._editMode=!1;this.clearEditors();this.setEntry(this.getEntry(),this.getFeed(),!0)},clear:function(){this._editable=!1;this.clearEditors();k.superclass.clear.apply(this);this._contentEditor&&(this._contentEditor=this._setObject=this._oldContent=
this._contentEditorCreator=null,this._editors={})},clearEditors:function(){for(var a in this._editors)this._editors[a].isInstanceOf(q)&&this._editors[a].close(!1,!0),this._editors[a].destroy();this._editors={}},_enforceXhtml:function(a){var c=null;a&&(c=a.replace(/<br>/g,"\x3cbr/\x3e"),c=this._closeTag(c,"hr"),c=this._closeTag(c,"img"));return c},_closeTag:function(a,c){c="\x3c"+c;var b=a.indexOf(c);if(-1!==b)for(;-1!==b;){for(var d="",g=!1,e=0;e<a.length;e++){var h=a.charAt(e);e<=b||g||"\x3e"!==
h||(d+="/",g=!0);d+=h}a=d;b=a.indexOf(c,b+1)}return a},_toggleNew:function(){f.set(this.entryNewButton,"display","none");f.set(this.entryEditButton,"display","none");f.set(this.entrySaveCancelButtons,"display","");this.entrySummarySelect.value="text";this.entryContentSelect.value="text";this.entryTitleSelect.value="text";this.clearNodes();this._new=!0;var a=new l.EntryHeader({title:m.title});this.entryTitleHeader.appendChild(a.domNode);this._editors.title=this._createEditor(this.entryTitleNode,null);
this.setFieldValidity("title",!0);a=new l.EntryHeader({title:m.authors});this.entryAuthorHeader.appendChild(a.domNode);this._editors.authors=this._createPeopleEditor(this.entryAuthorNode,{name:"Author"});this.setFieldValidity("authors",!0);a=new l.EntryHeader({title:m.contributors});this.entryContributorHeader.appendChild(a.domNode);this._editors.contributors=this._createPeopleEditor(this.entryContributorNode,{name:"Contributor"});this.setFieldValidity("contributors",!0);a=new l.EntryHeader({title:m.id});
this.entryIdHeader.appendChild(a.domNode);this._editors.id=this._createEditor(this.entryIdNode,null);this.setFieldValidity("id",!0);a=new l.EntryHeader({title:m.updated});this.entryUpdatedHeader.appendChild(a.domNode);this._editors.updated=this._createEditor(this.entryUpdatedNode,null);this.setFieldValidity("updated",!0);a=new l.EntryHeader({title:m.summary});this.entrySummaryHeader.appendChild(a.domNode);this._editors.summary=this._createEditor(this.entrySummaryNode,null,!0);this.setFieldValidity("summaryedit",
!0);this.setFieldValidity("summary",!0);a=new l.EntryHeader({title:m.content});this.entryContentHeader.appendChild(a.domNode);this._editors.content=this._createEditor(this.entryContentNode,null,!0);this.setFieldValidity("contentedit",!0);this.setFieldValidity("content",!0);this._displaySections()},_displaySections:function(){f.set(this.entrySummarySelect,"display","none");f.set(this.entryContentSelect,"display","none");f.set(this.entryTitleSelect,"display","none");this.isFieldValid("contentedit")&&
f.set(this.entryContentSelect,"display","");this.isFieldValid("summaryedit")&&f.set(this.entrySummarySelect,"display","");this.isFieldValid("titleedit")&&f.set(this.entryTitleSelect,"display","");k.superclass._displaySections.apply(this);if(this._toLoad){for(var a in this._toLoad){var c=this._toLoad[a].generateEditor?v.hitch(this._toLoad[a],this._toLoad[a].generateEditor)():this._toLoad[a];this._editors[this._toLoad[a].name]=c;this._toLoad[a]=null}this._toLoad=null}}}),J=w("dojox.atom.widget.PeopleEditor",
[D,E,F],{templateString:H,_rows:[],_editors:[],_index:0,_numRows:0,postCreate:function(){this.name?"Author"==this.name?this.peopleEditorButton.appendChild(document.createTextNode("["+u.addAuthor+"]")):"Contributor"==this.name&&this.peopleEditorButton.appendChild(document.createTextNode("["+u.addContributor+"]")):this.peopleEditorButton.appendChild(document.createTextNode("["+u.add+"]"));this._editors=[];if(this.data&&0!==this.data.length)for(var a in this.data)this._createEditors(this.data[a].name,
this.data[a].email,this.data[a].uri,a),this._index++,this._numRows++;else this._createEditors(null,null,null,0,this.name),this._index=1},destroy:function(){for(var a in this._editors)for(var c in this._editors[a])this._editors[a][c].destroy();this._editors=[]},_createEditors:function(a,c,b,d,g){var e=document.createElement("tr");this.peopleEditorEditors.appendChild(e);e.id="removeRow"+d;var h=document.createElement("td");h.setAttribute("align","right");e.appendChild(h);h.colSpan=2;0<this._numRows&&
(e=document.createElement("hr"),h.appendChild(e),e.id="hr"+d);e=document.createElement("span");h.appendChild(e);e.className="peopleEditorButton";f.set(e,"font-size","x-small");B.connect(e,"onclick",this,"_removeEditor");e.id="remove"+d;h=document.createTextNode("[X]");e.appendChild(h);e=document.createElement("tr");this.peopleEditorEditors.appendChild(e);e.id="editorsRow"+d;var n=document.createElement("td");e.appendChild(n);f.set(n,"width","20%");h=document.createElement("td");e.appendChild(h);e=
document.createElement("table");n.appendChild(e);f.set(e,"width","100%");n=document.createElement("tbody");e.appendChild(n);e=document.createElement("table");h.appendChild(e);f.set(e,"width","100%");h=document.createElement("tbody");e.appendChild(h);this._editors[d]=[];this._editors[d].push(this._createEditor(a,g+"name"+d,"Name:",n,h));this._editors[d].push(this._createEditor(c,g+"email"+d,"Email:",n,h));this._editors[d].push(this._createEditor(b,g+"uri"+d,"URI:",n,h))},_createEditor:function(a,c,
b,d,g){var e=document.createElement("tr");d.appendChild(e);var h=document.createElement("label");h.setAttribute("for",c);h.appendChild(document.createTextNode(b));d=document.createElement("td");d.appendChild(h);e.appendChild(d);e=document.createElement("tr");g.appendChild(e);g=document.createElement("td");e.appendChild(g);b=document.createElement("input");b.setAttribute("id",c);g.appendChild(b);f.set(b,"width","95%");c=new t({},b);c.attr("value",a);return c},_removeEditor:function(a){var c=null;c=
x("ie")?a.srcElement:a.target;a=c.id;a=a.substring(6);for(var b in this._editors[a])this._editors[a][b].destroy();b=y.byId("editorsRow"+a);c=b.parentNode;c.removeChild(b);b=y.byId("removeRow"+a);c=b.parentNode;c.removeChild(b);this._numRows--;1===this._numRows&&"hr"===c.firstChild.firstChild.firstChild.tagName.toLowerCase()&&(b=c.firstChild.firstChild,b.removeChild(b.firstChild));this._editors[a]=null},_add:function(){this._createEditors(null,null,null,this._index);this._index++;this._numRows++},
getValues:function(){var a=[],c;for(c in this._editors)this._editors[c]&&a.push({name:this._editors[c][0].attr("value"),email:this._editors[c][1].attr("value"),uri:this._editors[c][2].attr("value")});return a}});return k});