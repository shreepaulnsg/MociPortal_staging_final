//>>built
require({cache:{"url:dojox/grid/resources/Expando.html":'\x3cdiv class\x3d"dojoxGridExpando"\r\n\t\x3e\x3cdiv class\x3d"dojoxGridExpandoNode" dojoAttachEvent\x3d"onclick:onToggle"\r\n\t\t\x3e\x3cdiv class\x3d"dojoxGridExpandoNodeInner" dojoAttachPoint\x3d"expandoInner"\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n'}});
define("dojox/grid/_TreeView","dijit/registry ../main dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/event dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/query dojo/parser dojo/text!./resources/Expando.html dijit/_Widget dijit/_TemplatedMixin ./_View ./_Builder ./util".split(" "),function(M,G,H,B,N,Q,w,m,O,R,n,S,I,T,U,V,W,X){H("dojox.grid._Expando",[T,U],{open:!1,toggleClass:"",itemId:"",cellIdx:-1,view:null,rowNode:null,rowIdx:-1,expandoCell:null,level:0,templateString:I,
_toggleRows:function(a,d){if(a&&this.rowNode)if(n("table.dojoxGridRowTableNeedsRowUpdate").length)this._initialized&&this.view.grid.updateRow(this.rowIdx);else{var b=this;if(this.view.grid.treeModel){var e=this._tableRow?w.get(this._tableRow,"dojoxTreeGridPath"):"";e&&n('tr[dojoxTreeGridPath^\x3d"'+e+'/"]',this.rowNode).forEach(function(g){var c=n(".dojoxGridExpando",g)[0];c&&c.parentNode&&c.parentNode.parentNode&&!m.contains(c.parentNode.parentNode,"dojoxGridNoChildren")&&(c=M.byNode(c))&&c._toggleRows(a,
c.open&&d);g.style.display=d?"":"none"})}else n("tr."+a,this.rowNode).forEach(function(g){if(m.contains(g,"dojoxGridExpandoRow")){var c=n(".dojoxGridExpando",g)[0];if(c){var k=M.byNode(c),l=k?k.toggleClass:c.getAttribute("toggleClass");c=k?k.open:b.expandoCell.getOpenState(c.getAttribute("itemId"));b._toggleRows(l,c&&d)}}g.style.display=d?"":"none"})}},setOpen:function(a){a&&m.contains(this.domNode,"dojoxGridExpandoLoading")&&(a=!1);var d=this.view.grid,b=d.store,e=d.treeModel,g=this;if(d._by_idx[this.rowIdx])if(e&&
!this._loadedChildren)if(a){var c=d.getItem(w.get(this._tableRow,"dojoxTreeGridPath"));c?(this.expandoInner.innerHTML="o",m.add(this.domNode,"dojoxGridExpandoLoading"),e.getChildren(c,function(k){g._loadedChildren=!0;g._setOpen(a)})):this._setOpen(a)}else this._setOpen(a);else!e&&b?a?(e=d._by_idx[this.rowIdx])&&!b.isItemLoaded(e.item)?(this.expandoInner.innerHTML="o",m.add(this.domNode,"dojoxGridExpandoLoading"),b.loadItem({item:e.item,onItem:N.hitch(this,function(k){var l=b.getIdentity(k);d._by_idty[l]=
d._by_idx[this.rowIdx]={idty:l,item:k};this._setOpen(a)})})):this._setOpen(a):this._setOpen(a):this._setOpen(a)},_setOpen:function(a){if(a&&this._tableRow&&m.contains(this._tableRow,"dojoxGridNoChildren"))this._setOpen(!1);else{this.expandoInner.innerHTML=a?"-":"+";m.remove(this.domNode,"dojoxGridExpandoLoading");m.toggle(this.domNode,"dojoxGridExpandoOpened",a);if(this._tableRow){m.toggle(this._tableRow,"dojoxGridRowCollapsed",!a);var d=w.get(this._tableRow,"dojoxTreeGridBaseClasses"),b="";b=a?N.trim((" "+
d+" ").replace(" dojoxGridRowCollapsed "," ")):0>(" "+d+" ").indexOf(" dojoxGridRowCollapsed ")?d+(d?" ":"")+"dojoxGridRowCollapsed":d;w.set(this._tableRow,"dojoxTreeGridBaseClasses",b)}d=this.open!==a;this.open=a;this.expandoCell&&this.itemId&&(this.expandoCell.openStates[this.itemId]=a);b=this.view;var e=b.grid;this.toggleClass&&d&&(this._tableRow&&this._tableRow.style.display||this._toggleRows(this.toggleClass,a));b&&this._initialized&&0<=this.rowIdx&&(e.rowHeightChanged(this.rowIdx),e.postresize(),
b.hasVScrollbar(!0));this._initialized=!0}},onToggle:function(a){this.setOpen(!this.open);Q.stop(a)},setRowNode:function(a,d,b){if(0>this.cellIdx||!this.itemId)return!1;this._initialized=!1;this.view=b;this.rowNode=d;this.rowIdx=a;this.expandoCell=b.structure.cells[0][this.cellIdx];(a=this.domNode)&&a.parentNode&&a.parentNode.parentNode&&(this._tableRow=a.parentNode.parentNode);this.open=this.expandoCell.getOpenState(this.itemId);b.grid.treeModel&&(O.set(this.domNode,"marginLeft",18*this.level+"px"),
this.domNode.parentNode&&O.set(this.domNode.parentNode,"backgroundPosition",18*this.level+3+"px"));this.setOpen(this.open);return!0}});I=H("dojox.grid._TreeContentBuilder",W._ContentBuilder,{generateHtml:function(a,d){var b=this.getTableArray(),e=this.view,g=e.structure.cells[0];a=this.grid.getItem(d);var c=this.grid,k=this.grid.store;X.fire(this.view,"onBeforeRow",[d,[g]]);var l=function(x,f,h,q,p,y){if(y){var C=b.length;q=q||[];var J=q.join("|"),D=q[q.length-1],r=D+(h?" dojoxGridSummaryRow":"");
c.treeModel&&f&&!c.treeModel.mayHaveChildren(f)&&(r+=" dojoxGridNoChildren");b.push('\x3ctr style\x3d"" class\x3d"'+r+'" dojoxTreeGridPath\x3d"'+p.join("/")+'" dojoxTreeGridBaseClasses\x3d"'+r+'"\x3e');var K=x+1;r=null;for(var z=0,u;u=g[z];z++){var E=u.markup,P=u.customClasses=[],Y=u.customStyles=[];E[5]=u.formatAtLevel(p,f,x,h,D,P);E[1]=P.join(" ");E[3]=Y.join(";");b.push.apply(b,E);!r&&u.level===K&&u.parentCell&&(r=u.parentCell)}b.push("\x3c/tr\x3e");f&&k&&k.isItem(f)&&(z=k.getIdentity(f),"undefined"==
typeof c._by_idty_paths[z]&&(c._by_idty_paths[z]=p.join("/")));var v=p.concat([]);if(c.treeModel&&f){if(c.treeModel.mayHaveChildren(f)){h=e.structure.cells[0][c.expandoCell||0];var F=h.getOpenState(f)&&y;h=new G.grid.TreePath(p.join("/"),c);h=h.children(!0)||[];B.forEach(h,function(L,A){var t=J.split("|");t.push(t[t.length-1]+"-"+A);v.push(A);l(K,L,!1,t,v,F);v.pop()})}}else f&&r&&!h?(h=e.structure.cells[0][r.level],F=h.getOpenState(f)&&y,k.hasAttribute(f,r.field)?(y=J.split("|"),y.pop(),h=new G.grid.TreePath(p.join("/"),
c),h=h.children(!0)||[],h.length?(b[C]='\x3ctr class\x3d"'+y.join(" ")+' dojoxGridExpandoRow" dojoxTreeGridPath\x3d"'+p.join("/")+'"\x3e',B.forEach(h,function(L,A){var t=J.split("|");t.push(t[t.length-1]+"-"+A);v.push(A);l(K,L,!1,t,v,F);v.pop()}),v.push(h.length),l(x,f,!0,q,v,F)):b[C]='\x3ctr class\x3d"'+D+' dojoxGridNoChildren" dojoxTreeGridPath\x3d"'+p.join("/")+'"\x3e'):k.isItemLoaded(f)?b[C]='\x3ctr class\x3d"'+D+' dojoxGridNoChildren" dojoxTreeGridPath\x3d"'+p.join("/")+'"\x3e':b[0]=b[0].replace("dojoxGridRowTable",
"dojoxGridRowTable dojoxGridRowTableNeedsRowUpdate")):f&&!h&&1<q.length&&(b[C]='\x3ctr class\x3d"'+q[q.length-2]+'" dojoxTreeGridPath\x3d"'+p.join("/")+'"\x3e')}else-1==b[0].indexOf("dojoxGridRowTableNeedsRowUpdate")&&(b[0]=b[0].replace("dojoxGridRowTable","dojoxGridRowTable dojoxGridRowTableNeedsRowUpdate"))};l(0,a,!1,["dojoxGridRowToggle-"+d],[d],!0);b.push("\x3c/table\x3e");return b.join("")},findTarget:function(a,d){for(;a&&a!=this.domNode&&(!a.tagName||"tr"!=a.tagName.toLowerCase());)a=a.parentNode;
return a!=this.domNode?a:null},getCellNode:function(a,d){if((a=n("td[idx\x3d'"+d+"']",a)[0])&&a.parentNode&&!m.contains(a.parentNode,"dojoxGridSummaryRow"))return a},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode)return!1;a.rowIndex=w.get(a.rowNode,"dojoxTreeGridPath");this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return!0}});return H("dojox.grid._TreeView",V,{_contentBuilderClass:I,_onDndDrop:function(a,d,b){this.grid&&this.grid.aggregator&&this.grid.aggregator.clearSubtotalCache();
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.grid,"_cleanupExpandoCache","_cleanupExpandoCache")},_cleanupExpandoCache:function(a,d,b){if(-1!=a)if(B.forEach(this.grid.layout.cells,function(c){"undefined"!=typeof c.openStates&&d in c.openStates&&delete c.openStates[d]}),"string"==typeof a&&-1<a.indexOf("/")){var e=new G.grid.TreePath(a,this.grid);for(a=e.parent();a;)e=a,a=e.parent();if(e=e.item())if(e=this.grid.store.getIdentity(e),"undefined"!=typeof this._expandos[e]){for(var g in this._expandos[e])(a=
this._expandos[e][g])&&a.destroy(),delete this._expandos[e][g];delete this._expandos[e]}}else{for(g in this._expandos)if("undefined"!=typeof this._expandos[g])for(e in this._expandos[g])(a=this._expandos[g][e])&&a.destroy();this._expandos={}}},postMixInProperties:function(){this.inherited(arguments);this._expandos={}},onBeforeRow:function(a,d){var b=this.grid;b._by_idx&&b._by_idx[a]&&b._by_idx[a].idty&&(b=b._by_idx[a].idty,this._expandos[b]=this._expandos[b]||{});this.inherited(arguments)},onAfterRow:function(a,
d,b){B.forEach(n("span.dojoxGridExpando",b),function(c){if(c&&c.parentNode){var k=c.getAttribute("toggleClass"),l=this.grid;if(l._by_idx&&l._by_idx[a]&&l._by_idx[a].idty){var x=l._by_idx[a].idty;var f=this._expandos[x][k]}f?(R.place(f.domNode,c,"replace"),f.itemId=c.getAttribute("itemId"),f.cellIdx=parseInt(c.getAttribute("cellIdx"),10),isNaN(f.cellIdx)&&(f.cellIdx=-1)):x&&(f=S.parse(c.parentNode)[0],this._expandos[x][k]=f);f&&!f.setRowNode(a,b,this)&&f.domNode.parentNode.removeChild(f.domNode)}},
this);var e=!1,g=this;n("tr[dojoxTreeGridPath]",b).forEach(function(c){m.toggle(c,"dojoxGridSubRowAlt",e);w.set(c,"dojoxTreeGridBaseClasses",c.className);e=!e;g.grid.rows.styleRowNode(w.get(c,"dojoxTreeGridPath"),c)});this.inherited(arguments)},updateRowStyles:function(a){var d=n("tr[dojoxTreeGridPath\x3d'"+a+"']",this.domNode);d.length&&this.styleRowNode(a,d[0])},getCellNode:function(a,d){if(a=n("tr[dojoxTreeGridPath\x3d'"+a+"']",this.domNode)[0])return this.content.getCellNode(a,d)},destroy:function(){this._cleanupExpandoCache();
this.inherited(arguments)}})});