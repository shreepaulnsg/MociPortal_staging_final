//>>built
define("xstyle/main",["require","xstyle/core/parser","xstyle/core/base","xstyle/core/elemental","xstyle/core/generate"],function(z,t,m,u,A){function v(c){c=document.getElementsByTagName(c);for(var a=0;a<c.length;a++)h(c[a])}function n(){v("link");v("style")}function h(c,a,d){function e(){z(["xstyle/core/load-imports"],function(k){k(c,function(){h(c,a,!0)})})}function f(k){for(var w=k.cssRules,p=0;p<w.length;p++){var l=w[p];if(l.selectorText&&"x-"==l.selectorText.substring(0,2)&&(g=!0,/^'/.test(l.style.content)))return q(eval(l.style.content),
k,a),!0}}var b=c.sheet||c.styleSheet;if(b&&(!b.processed||d)){b.processed=!0;var g=b.needsParsing,x=b.rules||b.cssRules;if((b.href||b.imports&&b.imports.length)&&!d)return e();if(!g)for(var r=0;r<x.length;r++){var y=x[r];if(y.href&&!d){if(!f(y.styleSheet))return e();return}}q(b.localSource||(b.ownerNode||b.owningElement).innerHTML,b,a)}}function q(c,a,d){a.addRule||(a.addRule=function(f,b,g){return this.insertRule(f+"{"+b+"}",0<=g?g:this.cssRules.length)});a.deleteRule||(a.deleteRule=a.removeRule);
var e=1;(a.href||location.href).replace(/[^\/]+$/,"");m.css=c;t(m,c,a);0==--e&&d&&d(a);return m}u.ready(n);t.getStyleSheet=function(c,a){return c.styleSheet||c};return{process:h,processAll:n,parse:q,generate:A,update:u.update,load:function(c,a,d,e){a(["xstyle/css"],function(f){f.load(c,a,function(b){b?h({sheet:b},d):(n(),d())},e)})}}});