//>>built
/*
 inherited ||
        // if it is inherited, we need to check to make sure there isn't an existing property */
define("xstyle/core/Rule",["xstyle/core/expression","xstyle/core/Definition","put-selector/put","xstyle/core/es6","xstyle/core/utils"],function(u,H,D,E,v){function w(a,b,c){try{a[b]=c}catch(d){}}function p(){}function F(a,b,c,d){if(a.calls){var e;for(c=0;c<a.length;c++){var f=a[c];if(f instanceof x){a.hasOwnProperty(c)||(a[c]=f=y(f));var g=f.ref&&(f.ref.selfResolving?f.ref.apply(b,f.getArgs(),b):u.evaluate(b,[f.caller,f]));void 0!==g&&((e||(e=[])).push(g),f.evaluated=!0)}}}if(e)return b=u.react(function(){for(var k=
0,m=a.slice(),l=0;l<a.length;l++){var h=a[l];h instanceof x&&h.evaluated&&(m[l-1]=a[l-1].slice(0,-h.caller.length),m[l]=arguments[k++])}return m.join("")}),b.skipResolve=!0,d=new H,d.setCompute(b.apply(d,e,d)),d;if(!d)return a.toString()}function x(a){this.caller=a;this.args=[]}function I(a,b,c,d){return v.when(b,function(e){var f=e;e&&e.forRule&&((a._subRuleListeners||(a._subRuleListeners=[])).push(function(g){var k=f.forRule(g,!0);k&&k.forElement?z(g,k,d):c&&c(k)}),e=e.forRule(a));if(e&&e.forElement)return z(a,
e,d);c&&c(e)})}function z(a,b,c){return require(["xstyle/core/elemental"],function(d){d.addRenderer(a,function(e){var f=b.forElement(e);c&&c(f,e)})})}var y=Object.create||function(a){function b(){}b.prototype=a;return new b},q=v.convertCssNameToJs,J={"{":"}","[":"]","(":")"},A=D("div").style;p.prototype={property:function(a){return(this._properties||(this._properties={}))[a]||(this._properties[a]=new Proxy(this.get(a)))},eachProperty:function(a){for(var b=this.values||0,c=0;c<b.length;c++){var d=
b[c];a.call(this,d||"unnamed",b[d])}},fullSelector:function(){return(this.parent?this.parent.fullSelector():"")+(this.selector||"")+" "},newRule:function(a){a=(this.rules||(this.rules={}))[a]=new p;a.disabled=this.disabled;a.parent=this;return a},newCall:function(a){a=new x(a);a.parent=this;return a},addSheetRule:function(a,b){if("@"!=a.charAt(0)){var c=this.styleSheet,d=c.cssRules||c.rules,e=-1<this.ruleIndex?this.ruleIndex:d.length;try{c.addRule(a,b||" ",e)}catch(f){a.match(/-(moz|webkit|ie)-/)||
console.warn("Unable to add rule",a,b)}return d[e]}},onRule:function(){var a=this.getCssRule();if(this.installStyles)for(var b=0;b<this.installStyles.length;b++){var c=this.installStyles[b];w(a.style,c[0],c[1])}},setMediaSelector:function(a){this.isMediaBlock=!0;this.selector=a},setStyle:function(a,b){this.cssRule?w(this.cssRule.style,a,b):(this.installStyles||(this.installStyles=[])).push([a,b])},getCssRule:function(){this.cssRule||(this.cssRule=this.addSheetRule(this.selector,this.cssText));return this.cssRule},
get:function(a){return this.values[a]},elements:function(a){var b=this;require(["xstyle/core/elemental"],function(c){c.addRenderer(b,function(d){a(d)})})},declareDefinition:function(a,b,c){a=a&&q(a);if(!this.disabled){var d=this;if(b.length)if("\x3e"==b[0].toString().charAt(0))a||(this.generator=b,require(["xstyle/core/generate","xstyle/core/elemental"],function(h,n){b=h.forSelector(b,d);n.addRenderer(d,b)}));else{var e=a in A||this.getDefinition(a);if(!c||!e){c=this.definitions||(this.definitions=
{});var f=b[0];if(f.indexOf&&-1<f.indexOf(",")){f=b.join("").split(/\s*,\s*/);for(var g=[],k=0;k<f.length;k++)g[k]=u.evaluate(this,f[k])}b[0]&&"{"==b[0].operator?g=b[0]:b[1]&&"{"==b[1].operator&&(g=b[1],v.extend(g,b[0]));g=g||u.evaluate(this,b);if(g.then){var m=g;g={then:function(h){return m.then(function(n){return h(l(n))})}}}var l=function(h){h.define&&(h=h.define(d,a));return h};e&&console.warn('Overriding existing property "'+a+'"');return c[a]=l(g)}}else return c=this.definitions||(this.definitions=
{}),c[a]=b}},onArguments:function(a){var b=a.ref;return b&&b.apply(this,a.getArgs(),this)},setValue:function(a,b,c){var d=q(a);if(!this.disabled){var e=this.values||(this.values=[]);e.push(a);e[a]=b;if(a){do{e=(c||this).getDefinition(a);if(void 0!==e){if(this.cssRule&&(!e||!e.keepCSSValue)){var f=this.cssRule.style;d in f&&w(f,d,"")}I(this,e.put(b,this,d))}a=a.substring(0,a.lastIndexOf("-"))}while(a)}d in A&&this._setStyleFromValue(d,b,!0)}},_setStyleFromValue:function(a,b,c){var d=b[0];if(d instanceof
p)for(c=d.values,d=0;d<c.length;d++){var e=c[d];this._setStyleFromValue(a+("main"==e?"":e.charAt(0).toUpperCase()+e.slice(1)),c[e])}else{if(b.calls){var f=this;if(b.expression=F(b,this,a,!0)){var g=b.expression&&b.expression.valueOf(),k=function(l,h){var n=g&&g.forRule?g.forRule(l,!0):g;if(n&&n.forElement)if(h=h&&h.elements)for(var r=0;r<h.length;r++)for(var t=h[r].querySelectorAll(l.selector),B=0;B<t.length;B++){var G=t[B];w(G.style,a,n.forElement(G))}else z(l,n,function(K,L){w(L.style,a,K)});else l.setStyle(a,
n)},m=[f];v.when(g,function(l){(g=l)&&g.forRule&&(f._subRuleListeners||(f._subRuleListeners=[])).push(function(h){m.push(h);k(h)});k(f)});b.expression.dependencyOf({invalidate:function(l){v.when(b.expression.valueOf(),function(h){g=h;for(h=0;h<m.length;h++){var n=!0,r=m[h];if(l&&l.rules){n=!1;for(var t=0;t<l.rules.length;t++)if(l.rules[t]===r){n=!0;break}}n&&k(r,l)}})}})}}c||this.setStyle(a,b)}},put:function(a){var b=this;return{forRule:function(c){b.extend(c);if("defaults"!=a&&a&&"string"==typeof a&&
b.values)for(var d=a.toString().split(/,\s*/),e=0;e<d.length;e++){var f=b.values[e];f&&c.setValue(f,d[e],b)}}}},extend:function(a,b){(this.derivatives||(this.derivatives=[])).push(a);var c=this.extraSelector;c&&(a.selector+=c);var d=this.cssRule.style,e=a.getCssRule().style,f=a.inheritedStyles||(a.inheritedStyles={});for(c=0;c<d.length;c++){var g=q(d[c]);if(!e[g]||f[g])e[g]=d[g],f[g]=!0}if(c=this.values){c=y(c);var k=a.values;a.values=k?E.copy(c,k):c}if(b){if(c=this.definitions){c=y(c);var m=a.definitions;
a.definitions=m?E.copy(c,m):c}a.tagName=this.tagName||a.tagName}(a.bases||(a.bases=[])).push(this);b=this._subRuleListeners||0;for(c=0;c<b.length;c++)b[c](a);var l=a.getCssRule().style;this.eachProperty(function(h,n){h=q(h);"object"==typeof n&&(n=y(n));h in A&&!l[h]&&a._setStyleFromValue(h,n)});if(k&&a.definitions)for(c=0,b=k.length;c<b;c++)g=k[c],d=q(g),a.definitions[d]!==(m&&m[d])&&a.setValue(g,k[d]);if(k=this.generator){if(k instanceof Array)for(k=k.slice(0),c=0;c<k.length;c++)m=k[c],"{"===m.operator&&
(b=a.newRule(),b.selector=m.selector+a.selector.slice(1),b.styleSheet=a.styleSheet||a.cssRule.parentStyleSheet,m.extend(b,!0),k[c]=b);a.declareDefinition(null,k)}},getDefinition:function(a,b){a=q(a);var c=this;do{var d=c.definitions&&c.definitions[a];void 0===d&&b&&c[b]&&(d=c[b][a]);c=c.parent}while(void 0===d&&c);return d},newElement:function(){return D((this.tagName||"span")+(this.selector||""))},cssText:""};u.evaluateText=F;var C=x.prototype=new p;C.declareDefinition=C.setValue=function(a,b){this.args.push(b)};
C.toString=function(){var a=this.operator;return a+this.args+J[a]};p.updateStaleProperties=function(){};return p});